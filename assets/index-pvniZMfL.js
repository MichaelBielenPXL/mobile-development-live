function wk(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function JT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rg={exports:{}},qc={},bg={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IS;function Ek(){if(IS)return qe;IS=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function b(z,ne,te){this.props=z,this.context=ne,this.refs=T,this.updater=te||I}b.prototype.isReactComponent={},b.prototype.setState=function(z,ne){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ne,"setState")},b.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function j(){}j.prototype=b.prototype;function V(z,ne,te){this.props=z,this.context=ne,this.refs=T,this.updater=te||I}var B=V.prototype=new j;B.constructor=V,A(B,b.prototype),B.isPureReactComponent=!0;var K=Array.isArray,J=Object.prototype.hasOwnProperty,Z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(z,ne,te){var se,he={},ce=null,H=null;if(ne!=null)for(se in ne.ref!==void 0&&(H=ne.ref),ne.key!==void 0&&(ce=""+ne.key),ne)J.call(ne,se)&&!P.hasOwnProperty(se)&&(he[se]=ne[se]);var oe=arguments.length-2;if(oe===1)he.children=te;else if(1<oe){for(var ye=Array(oe),Te=0;Te<oe;Te++)ye[Te]=arguments[Te+2];he.children=ye}if(z&&z.defaultProps)for(se in oe=z.defaultProps,oe)he[se]===void 0&&(he[se]=oe[se]);return{$$typeof:n,type:z,key:ce,ref:H,props:he,_owner:Z.current}}function k(z,ne){return{$$typeof:n,type:z.type,key:ne,ref:z.ref,props:z.props,_owner:z._owner}}function M(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function O(z){var ne={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(te){return ne[te]})}var F=/\/+/g;function D(z,ne){return typeof z=="object"&&z!==null&&z.key!=null?O(""+z.key):ne.toString(36)}function me(z,ne,te,se,he){var ce=typeof z;(ce==="undefined"||ce==="boolean")&&(z=null);var H=!1;if(z===null)H=!0;else switch(ce){case"string":case"number":H=!0;break;case"object":switch(z.$$typeof){case n:case e:H=!0}}if(H)return H=z,he=he(H),z=se===""?"."+D(H,0):se,K(he)?(te="",z!=null&&(te=z.replace(F,"$&/")+"/"),me(he,ne,te,"",function(Te){return Te})):he!=null&&(M(he)&&(he=k(he,te+(!he.key||H&&H.key===he.key?"":(""+he.key).replace(F,"$&/")+"/")+z)),ne.push(he)),1;if(H=0,se=se===""?".":se+":",K(z))for(var oe=0;oe<z.length;oe++){ce=z[oe];var ye=se+D(ce,oe);H+=me(ce,ne,te,ye,he)}else if(ye=E(z),typeof ye=="function")for(z=ye.call(z),oe=0;!(ce=z.next()).done;)ce=ce.value,ye=se+D(ce,oe++),H+=me(ce,ne,te,ye,he);else if(ce==="object")throw ne=String(z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return H}function _e(z,ne,te){if(z==null)return z;var se=[],he=0;return me(z,se,"","",function(ce){return ne.call(te,ce,he++)}),se}function pe(z){if(z._status===-1){var ne=z._result;ne=ne(),ne.then(function(te){(z._status===0||z._status===-1)&&(z._status=1,z._result=te)},function(te){(z._status===0||z._status===-1)&&(z._status=2,z._result=te)}),z._status===-1&&(z._status=0,z._result=ne)}if(z._status===1)return z._result.default;throw z._result}var we={current:null},W={transition:null},ee={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:W,ReactCurrentOwner:Z};function ue(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:_e,forEach:function(z,ne,te){_e(z,function(){ne.apply(this,arguments)},te)},count:function(z){var ne=0;return _e(z,function(){ne++}),ne},toArray:function(z){return _e(z,function(ne){return ne})||[]},only:function(z){if(!M(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},qe.Component=b,qe.Fragment=t,qe.Profiler=s,qe.PureComponent=V,qe.StrictMode=r,qe.Suspense=d,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,qe.act=ue,qe.cloneElement=function(z,ne,te){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var se=A({},z.props),he=z.key,ce=z.ref,H=z._owner;if(ne!=null){if(ne.ref!==void 0&&(ce=ne.ref,H=Z.current),ne.key!==void 0&&(he=""+ne.key),z.type&&z.type.defaultProps)var oe=z.type.defaultProps;for(ye in ne)J.call(ne,ye)&&!P.hasOwnProperty(ye)&&(se[ye]=ne[ye]===void 0&&oe!==void 0?oe[ye]:ne[ye])}var ye=arguments.length-2;if(ye===1)se.children=te;else if(1<ye){oe=Array(ye);for(var Te=0;Te<ye;Te++)oe[Te]=arguments[Te+2];se.children=oe}return{$$typeof:n,type:z.type,key:he,ref:ce,props:se,_owner:H}},qe.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},qe.createElement=R,qe.createFactory=function(z){var ne=R.bind(null,z);return ne.type=z,ne},qe.createRef=function(){return{current:null}},qe.forwardRef=function(z){return{$$typeof:u,render:z}},qe.isValidElement=M,qe.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:pe}},qe.memo=function(z,ne){return{$$typeof:p,type:z,compare:ne===void 0?null:ne}},qe.startTransition=function(z){var ne=W.transition;W.transition={};try{z()}finally{W.transition=ne}},qe.unstable_act=ue,qe.useCallback=function(z,ne){return we.current.useCallback(z,ne)},qe.useContext=function(z){return we.current.useContext(z)},qe.useDebugValue=function(){},qe.useDeferredValue=function(z){return we.current.useDeferredValue(z)},qe.useEffect=function(z,ne){return we.current.useEffect(z,ne)},qe.useId=function(){return we.current.useId()},qe.useImperativeHandle=function(z,ne,te){return we.current.useImperativeHandle(z,ne,te)},qe.useInsertionEffect=function(z,ne){return we.current.useInsertionEffect(z,ne)},qe.useLayoutEffect=function(z,ne){return we.current.useLayoutEffect(z,ne)},qe.useMemo=function(z,ne){return we.current.useMemo(z,ne)},qe.useReducer=function(z,ne,te){return we.current.useReducer(z,ne,te)},qe.useRef=function(z){return we.current.useRef(z)},qe.useState=function(z){return we.current.useState(z)},qe.useSyncExternalStore=function(z,ne,te){return we.current.useSyncExternalStore(z,ne,te)},qe.useTransition=function(){return we.current.useTransition()},qe.version="18.3.1",qe}var CS;function tp(){return CS||(CS=1,bg.exports=Ek()),bg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS;function Sk(){if(RS)return qc;RS=1;var n=tp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var m,y={},E=null,I=null;p!==void 0&&(E=""+p),d.key!==void 0&&(E=""+d.key),d.ref!==void 0&&(I=d.ref);for(m in d)r.call(d,m)&&!o.hasOwnProperty(m)&&(y[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:u,key:E,ref:I,props:y,_owner:s.current}}return qc.Fragment=t,qc.jsx=l,qc.jsxs=l,qc}var bS;function xk(){return bS||(bS=1,Rg.exports=Sk()),Rg.exports}var v=xk(),S=tp();const Os=JT(S),np=wk({__proto__:null,default:Os},[S]);var xh={},Ag={exports:{}},On={},Pg={exports:{}},Ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function Tk(){return AS||(AS=1,(function(n){function e(W,ee){var ue=W.length;W.push(ee);e:for(;0<ue;){var z=ue-1>>>1,ne=W[z];if(0<s(ne,ee))W[z]=ee,W[ue]=ne,ue=z;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ee=W[0],ue=W.pop();if(ue!==ee){W[0]=ue;e:for(var z=0,ne=W.length,te=ne>>>1;z<te;){var se=2*(z+1)-1,he=W[se],ce=se+1,H=W[ce];if(0>s(he,ue))ce<ne&&0>s(H,he)?(W[z]=H,W[ce]=ue,z=ce):(W[z]=he,W[se]=ue,z=se);else if(ce<ne&&0>s(H,ue))W[z]=H,W[ce]=ue,z=ce;else break e}}return ee}function s(W,ee){var ue=W.sortIndex-ee.sortIndex;return ue!==0?ue:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],m=1,y=null,E=3,I=!1,A=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(W){for(var ee=t(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=W)r(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function K(W){if(T=!1,B(W),!A)if(t(d)!==null)A=!0,pe(J);else{var ee=t(p);ee!==null&&we(K,ee.startTime-W)}}function J(W,ee){A=!1,T&&(T=!1,j(R),R=-1),I=!0;var ue=E;try{for(B(ee),y=t(d);y!==null&&(!(y.expirationTime>ee)||W&&!O());){var z=y.callback;if(typeof z=="function"){y.callback=null,E=y.priorityLevel;var ne=z(y.expirationTime<=ee);ee=n.unstable_now(),typeof ne=="function"?y.callback=ne:y===t(d)&&r(d),B(ee)}else r(d);y=t(d)}if(y!==null)var te=!0;else{var se=t(p);se!==null&&we(K,se.startTime-ee),te=!1}return te}finally{y=null,E=ue,I=!1}}var Z=!1,P=null,R=-1,k=5,M=-1;function O(){return!(n.unstable_now()-M<k)}function F(){if(P!==null){var W=n.unstable_now();M=W;var ee=!0;try{ee=P(!0,W)}finally{ee?D():(Z=!1,P=null)}}else Z=!1}var D;if(typeof V=="function")D=function(){V(F)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,_e=me.port2;me.port1.onmessage=F,D=function(){_e.postMessage(null)}}else D=function(){b(F,0)};function pe(W){P=W,Z||(Z=!0,D())}function we(W,ee){R=b(function(){W(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){A||I||(A=!0,pe(J))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(W){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var ue=E;E=ee;try{return W()}finally{E=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ue=E;E=W;try{return ee()}finally{E=ue}},n.unstable_scheduleCallback=function(W,ee,ue){var z=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?z+ue:z):ue=z,W){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ue+ne,W={id:m++,callback:ee,priorityLevel:W,startTime:ue,expirationTime:ne,sortIndex:-1},ue>z?(W.sortIndex=ue,e(p,W),t(d)===null&&W===t(p)&&(T?(j(R),R=-1):T=!0,we(K,ue-z))):(W.sortIndex=ne,e(d,W),A||I||(A=!0,pe(J))),W},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(W){var ee=E;return function(){var ue=E;E=ee;try{return W.apply(this,arguments)}finally{E=ue}}}})(Ng)),Ng}var PS;function Ik(){return PS||(PS=1,Pg.exports=Tk()),Pg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS;function Ck(){if(NS)return On;NS=1;var n=tp(),e=Ik();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function E(i){return d.call(y,i)?!0:d.call(m,i)?!1:p.test(i)?y[i]=!0:(m[i]=!0,!1)}function I(i,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,a,c,f){if(a===null||typeof a>"u"||I(i,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function T(i,a,c,f,g,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new T(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];b[a]=new T(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new T(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new T(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new T(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new T(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new T(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new T(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new T(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(j,V);b[a]=new T(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(j,V);b[a]=new T(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(j,V);b[a]=new T(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new T(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new T(i,1,!1,i.toLowerCase(),null,!0,!0)});function B(i,a,c,f){var g=b.hasOwnProperty(a)?b[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,c,g,f)&&(c=null),f||g===null?E(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(a=g.attributeName,f=g.attributeNamespace,c===null?i.removeAttribute(a):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?i.setAttributeNS(f,a,c):i.setAttribute(a,c))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),Z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),W=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,z;function ne(i){if(z===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var te=!1;function se(i,a){if(!i||te)return"";te=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){f=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var g=Y.stack.split(`
`),_=f.stack.split(`
`),C=g.length-1,L=_.length-1;1<=C&&0<=L&&g[C]!==_[L];)L--;for(;1<=C&&0<=L;C--,L--)if(g[C]!==_[L]){if(C!==1||L!==1)do if(C--,L--,0>L||g[C]!==_[L]){var U=`
`+g[C].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=C&&0<=L);break}}}finally{te=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ne(i):""}function he(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=se(i.type,!1),i;case 11:return i=se(i.type.render,!1),i;case 1:return i=se(i.type,!0),i;default:return""}}function ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case Z:return"Portal";case k:return"Profiler";case R:return"StrictMode";case D:return"Suspense";case me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case M:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case _e:return a=i.displayName||null,a!==null?a:ce(i.type)||"Memo";case pe:a=i._payload,i=i._init;try{return ce(i(a))}catch{}}return null}function H(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(a);case 8:return a===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ye(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Te(i){var a=ye(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(C){f=""+C,_.call(this,C)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function je(i){i._valueTracker||(i._valueTracker=Te(i))}function $e(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=ye(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function Ue(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ht(i,a){var c=a.checked;return ue({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function An(i,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=oe(a.value!=null?a.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function xn(i,a){a=a.checked,a!=null&&B(i,"checked",a,!1)}function Tn(i,a){xn(i,a);var c=oe(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?xt(i,a.type,c):a.hasOwnProperty("defaultValue")&&xt(i,a.type,oe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Ot(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function xt(i,a,c){(a!=="number"||Ue(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var Tt=Array.isArray;function en(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+oe(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ri(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function po(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(Tt(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:oe(c)}}function cd(i,a){var c=oe(a.value),f=oe(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function si(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function rc(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?rc(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ii,ud=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,g){MSApp.execUnsafeLocalFunction(function(){return i(a,c,f,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(ii=ii||document.createElement("div"),ii.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ii.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function mo(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dd=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(i){dd.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),oi[a]=oi[i]})});function ai(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||oi.hasOwnProperty(i)&&oi[i]?(""+a).trim():a+"px"}function wa(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=ai(c,a[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,g):i[c]=g}}var sc=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pr(i,a){if(a){if(sc[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Ea(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function Sa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var gs=null,ys=null,bt=null;function ic(i){if(i=kc(i)){if(typeof gs!="function")throw Error(t(280));var a=i.stateNode;a&&(a=jd(a),gs(i.stateNode,i.type,a))}}function ci(i){ys?bt?bt.push(i):bt=[i]:ys=i}function ui(){if(ys){var i=ys,a=bt;if(bt=ys=null,ic(i),a)for(i=0;i<a.length;i++)ic(a[i])}}function hd(i,a){return i(a)}function fd(){}var Or=!1;function pd(i,a,c){if(Or)return i(a,c);Or=!0;try{return hd(i,a,c)}finally{Or=!1,(ys!==null||bt!==null)&&(fd(),ui())}}function go(i,a){var c=i.stateNode;if(c===null)return null;var f=jd(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var di=!1;if(u)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){di=!0}}),window.addEventListener("test",hi,hi),window.removeEventListener("test",hi,hi)}catch{di=!1}function md(i,a,c,f,g,_,C,L,U){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(le){this.onError(le)}}var vs=!1,Lr=null,xa=!1,Jn=null,gd={onError:function(i){vs=!0,Lr=i}};function yd(i,a,c,f,g,_,C,L,U){vs=!1,Lr=null,md.apply(gd,arguments)}function oc(i,a,c,f,g,_,C,L,U){if(yd.apply(this,arguments),vs){if(vs){var Y=Lr;vs=!1,Lr=null}else throw Error(t(198));xa||(xa=!0,Jn=Y)}}function mr(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function ac(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function vd(i){if(mr(i)!==i)throw Error(t(188))}function _d(i){var a=i.alternate;if(!a){if(a=mr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return vd(g),i;if(_===f)return vd(g),a;_=_.sibling}throw Error(t(188))}if(c.return!==f.return)c=g,f=_;else{for(var C=!1,L=g.child;L;){if(L===c){C=!0,c=g,f=_;break}if(L===f){C=!0,f=g,c=_;break}L=L.sibling}if(!C){for(L=_.child;L;){if(L===c){C=!0,c=_,f=g;break}if(L===f){C=!0,f=_,c=g;break}L=L.sibling}if(!C)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:a}function wd(i){return i=_d(i),i!==null?yo(i):null}function yo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=yo(i);if(a!==null)return a;i=i.sibling}return null}var lc=e.unstable_scheduleCallback,Ta=e.unstable_cancelCallback,vo=e.unstable_shouldYield,_s=e.unstable_requestPaint,mt=e.unstable_now,sm=e.unstable_getCurrentPriorityLevel,Ia=e.unstable_ImmediatePriority,cc=e.unstable_UserBlockingPriority,_o=e.unstable_NormalPriority,uc=e.unstable_LowPriority,Ca=e.unstable_IdlePriority,wo=null,jn=null;function Ed(i){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(wo,i,void 0,(i.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:Eo,Vr=Math.log,Zn=Math.LN2;function Eo(i){return i>>>=0,i===0?32:31-(Vr(i)/Zn|0)|0}var jr=64,fi=4194304;function it(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ws(i,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,_=i.pingedLanes,C=c&268435455;if(C!==0){var L=C&~g;L!==0?f=it(L):(_&=C,_!==0&&(f=it(_)))}else C=c&~g,C!==0?f=it(C):_!==0&&(f=it(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,_=a&-a,g>=_||g===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)c=31-Fn(a),g=1<<c,f|=i[c],a&=~g;return f}function So(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xo(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes;0<_;){var C=31-Fn(_),L=1<<C,U=g[C];U===-1?((L&c)===0||(L&f)!==0)&&(g[C]=So(L,a)):U<=a&&(i.expiredLanes|=L),_&=~L}}function dc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function hc(){var i=jr;return jr<<=1,(jr&4194240)===0&&(jr=64),i}function fc(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function To(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Fn(a),i[a]=c}function im(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-Fn(c),_=1<<g;a[g]=0,f[g]=-1,i[g]=-1,c&=~_}}function pc(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Fn(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}var Xe=0;function Fr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var mc,Ra,gc,yc,vc,Ur=!1,ba=[],zr=null,Br=null,tn=null,Io=new Map,Es=new Map,Un=[],Sd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pi(i,a){switch(i){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":Io.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(a.pointerId)}}function gr(i,a,c,f,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},a!==null&&(a=kc(a),a!==null&&Ra(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function xd(i,a,c,f,g){switch(a){case"focusin":return zr=gr(zr,i,a,c,f,g),!0;case"dragenter":return Br=gr(Br,i,a,c,f,g),!0;case"mouseover":return tn=gr(tn,i,a,c,f,g),!0;case"pointerover":var _=g.pointerId;return Io.set(_,gr(Io.get(_)||null,i,a,c,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Es.set(_,gr(Es.get(_)||null,i,a,c,f,g)),!0}return!1}function Aa(i){var a=Ao(i.target);if(a!==null){var c=mr(a);if(c!==null){if(a=c.tag,a===13){if(a=ac(c),a!==null){i.blockedOn=a,vc(i.priority,function(){gc(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function dt(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Pa(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);li=f,c.target.dispatchEvent(f),li=null}else return a=kc(c),a!==null&&Ra(a),i.blockedOn=c,!1;a.shift()}return!0}function Td(i,a,c){dt(i)&&c.delete(a)}function om(){Ur=!1,zr!==null&&dt(zr)&&(zr=null),Br!==null&&dt(Br)&&(Br=null),tn!==null&&dt(tn)&&(tn=null),Io.forEach(Td),Es.forEach(Td)}function mi(i,a){i.blockedOn===a&&(i.blockedOn=null,Ur||(Ur=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,om)))}function gi(i){function a(g){return mi(g,i)}if(0<ba.length){mi(ba[0],i);for(var c=1;c<ba.length;c++){var f=ba[c];f.blockedOn===i&&(f.blockedOn=null)}}for(zr!==null&&mi(zr,i),Br!==null&&mi(Br,i),tn!==null&&mi(tn,i),Io.forEach(a),Es.forEach(a),c=0;c<Un.length;c++)f=Un[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<Un.length&&(c=Un[0],c.blockedOn===null);)Aa(c),c.blockedOn===null&&Un.shift()}var Ss=K.ReactCurrentBatchConfig,xs=!0;function $r(i,a,c,f){var g=Xe,_=Ss.transition;Ss.transition=null;try{Xe=1,_c(i,a,c,f)}finally{Xe=g,Ss.transition=_}}function Id(i,a,c,f){var g=Xe,_=Ss.transition;Ss.transition=null;try{Xe=4,_c(i,a,c,f)}finally{Xe=g,Ss.transition=_}}function _c(i,a,c,f){if(xs){var g=Pa(i,a,c,f);if(g===null)ym(i,a,f,Wr,c),pi(i,f);else if(xd(g,i,a,c,f))f.stopPropagation();else if(pi(i,f),a&4&&-1<Sd.indexOf(i)){for(;g!==null;){var _=kc(g);if(_!==null&&mc(_),_=Pa(i,a,c,f),_===null&&ym(i,a,f,Wr,c),_===g)break;g=_}g!==null&&f.stopPropagation()}else ym(i,a,f,null,c)}}var Wr=null;function Pa(i,a,c,f){if(Wr=null,i=Sa(f),i=Ao(i),i!==null)if(a=mr(i),a===null)i=null;else if(c=a.tag,c===13){if(i=ac(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Wr=i,null}function Na(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sm()){case Ia:return 1;case cc:return 4;case _o:case uc:return 16;case Ca:return 536870912;default:return 16}default:return 16}}var zn=null,ka=null,Ts=null;function Cd(){if(Ts)return Ts;var i,a=ka,c=a.length,f,g="value"in zn?zn.value:zn.textContent,_=g.length;for(i=0;i<c&&a[i]===g[i];i++);var C=c-i;for(f=1;f<=C&&a[c-f]===g[_-f];f++);return Ts=g.slice(i,1<f?1-f:void 0)}function Co(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Hr(){return!0}function wc(){return!1}function un(i){function a(c,f,g,_,C){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Hr:wc,this.isPropagationStopped=wc,this}return ue(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),a}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ro=un(Gr),yi=ue({},Gr,{view:0,detail:0}),Da=un(yi),Ma,Oa,Bn,bo=ue({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ze,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Bn&&(Bn&&i.type==="mousemove"?(Ma=i.screenX-Bn.screenX,Oa=i.screenY-Bn.screenY):Oa=Ma=0,Bn=i),Ma)},movementY:function(i){return"movementY"in i?i.movementY:Oa}}),Ec=un(bo),Rd=ue({},bo,{dataTransfer:0}),bd=un(Rd),La=ue({},yi,{relatedTarget:0}),nn=un(La),Ad=ue({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pd=un(Ad),vi=ue({},Gr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=un(vi),w=ue({},Gr,{data:0}),x=un(w),N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=X[i])?!!a[i]:!1}function ze(){return ge}var Nt=ue({},yi,{key:function(i){if(i.key){var a=N[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Co(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ze,charCode:function(i){return i.type==="keypress"?Co(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Co(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ct=un(Nt),Lt=ue({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$n=un(Lt),Is=ue({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ze}),qr=un(Is),Kr=ue({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Va=un(Kr),Sc=ue({},bo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),pN=un(Sc),mN=[9,13,27,32],am=u&&"CompositionEvent"in window,xc=null;u&&"documentMode"in document&&(xc=document.documentMode);var gN=u&&"TextEvent"in window&&!xc,yw=u&&(!am||xc&&8<xc&&11>=xc),vw=" ",_w=!1;function ww(i,a){switch(i){case"keyup":return mN.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ew(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ja=!1;function yN(i,a){switch(i){case"compositionend":return Ew(a);case"keypress":return a.which!==32?null:(_w=!0,vw);case"textInput":return i=a.data,i===vw&&_w?null:i;default:return null}}function vN(i,a){if(ja)return i==="compositionend"||!am&&ww(i,a)?(i=Cd(),Ts=ka=zn=null,ja=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return yw&&a.locale!=="ko"?null:a.data;default:return null}}var _N={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sw(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!_N[i.type]:a==="textarea"}function xw(i,a,c,f){ci(f),a=Od(a,"onChange"),0<a.length&&(c=new Ro("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var Tc=null,Ic=null;function wN(i){zw(i,0)}function Nd(i){var a=$a(i);if($e(a))return i}function EN(i,a){if(i==="change")return a}var Tw=!1;if(u){var lm;if(u){var cm="oninput"in document;if(!cm){var Iw=document.createElement("div");Iw.setAttribute("oninput","return;"),cm=typeof Iw.oninput=="function"}lm=cm}else lm=!1;Tw=lm&&(!document.documentMode||9<document.documentMode)}function Cw(){Tc&&(Tc.detachEvent("onpropertychange",Rw),Ic=Tc=null)}function Rw(i){if(i.propertyName==="value"&&Nd(Ic)){var a=[];xw(a,Ic,i,Sa(i)),pd(wN,a)}}function SN(i,a,c){i==="focusin"?(Cw(),Tc=a,Ic=c,Tc.attachEvent("onpropertychange",Rw)):i==="focusout"&&Cw()}function xN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Nd(Ic)}function TN(i,a){if(i==="click")return Nd(a)}function IN(i,a){if(i==="input"||i==="change")return Nd(a)}function CN(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var yr=typeof Object.is=="function"?Object.is:CN;function Cc(i,a){if(yr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!d.call(a,g)||!yr(i[g],a[g]))return!1}return!0}function bw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Aw(i,a){var c=bw(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=bw(c)}}function Pw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Pw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Nw(){for(var i=window,a=Ue();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=Ue(i.document)}return a}function um(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function RN(i){var a=Nw(),c=i.focusedElem,f=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&Pw(c.ownerDocument.documentElement,c)){if(f!==null&&um(c)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!i.extend&&_>f&&(g=f,f=_,_=g),g=Aw(c,_);var C=Aw(c,f);g&&C&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),_>f?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var bN=u&&"documentMode"in document&&11>=document.documentMode,Fa=null,dm=null,Rc=null,hm=!1;function kw(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;hm||Fa==null||Fa!==Ue(f)||(f=Fa,"selectionStart"in f&&um(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Rc&&Cc(Rc,f)||(Rc=f,f=Od(dm,"onSelect"),0<f.length&&(a=new Ro("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=Fa)))}function kd(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var Ua={animationend:kd("Animation","AnimationEnd"),animationiteration:kd("Animation","AnimationIteration"),animationstart:kd("Animation","AnimationStart"),transitionend:kd("Transition","TransitionEnd")},fm={},Dw={};u&&(Dw=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Dd(i){if(fm[i])return fm[i];if(!Ua[i])return i;var a=Ua[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in Dw)return fm[i]=a[c];return i}var Mw=Dd("animationend"),Ow=Dd("animationiteration"),Lw=Dd("animationstart"),Vw=Dd("transitionend"),jw=new Map,Fw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(i,a){jw.set(i,a),o(a,[i])}for(var pm=0;pm<Fw.length;pm++){var mm=Fw[pm],AN=mm.toLowerCase(),PN=mm[0].toUpperCase()+mm.slice(1);_i(AN,"on"+PN)}_i(Mw,"onAnimationEnd"),_i(Ow,"onAnimationIteration"),_i(Lw,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(Vw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NN=new Set("cancel close invalid load scroll toggle".split(" ").concat(bc));function Uw(i,a,c){var f=i.type||"unknown-event";i.currentTarget=c,oc(f,a,void 0,i),i.currentTarget=null}function zw(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var C=f.length-1;0<=C;C--){var L=f[C],U=L.instance,Y=L.currentTarget;if(L=L.listener,U!==_&&g.isPropagationStopped())break e;Uw(g,L,Y),_=U}else for(C=0;C<f.length;C++){if(L=f[C],U=L.instance,Y=L.currentTarget,L=L.listener,U!==_&&g.isPropagationStopped())break e;Uw(g,L,Y),_=U}}}if(xa)throw i=Jn,xa=!1,Jn=null,i}function gt(i,a){var c=a[xm];c===void 0&&(c=a[xm]=new Set);var f=i+"__bubble";c.has(f)||(Bw(a,i,2,!1),c.add(f))}function gm(i,a,c){var f=0;a&&(f|=4),Bw(c,i,f,a)}var Md="_reactListening"+Math.random().toString(36).slice(2);function Ac(i){if(!i[Md]){i[Md]=!0,r.forEach(function(c){c!=="selectionchange"&&(NN.has(c)||gm(c,!1,i),gm(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Md]||(a[Md]=!0,gm("selectionchange",!1,a))}}function Bw(i,a,c,f){switch(Na(a)){case 1:var g=$r;break;case 4:g=Id;break;default:g=_c}c=g.bind(null,a,c,i),g=void 0,!di||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function ym(i,a,c,f,g){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var L=f.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(C===4)for(C=f.return;C!==null;){var U=C.tag;if((U===3||U===4)&&(U=C.stateNode.containerInfo,U===g||U.nodeType===8&&U.parentNode===g))return;C=C.return}for(;L!==null;){if(C=Ao(L),C===null)return;if(U=C.tag,U===5||U===6){f=_=C;continue e}L=L.parentNode}}f=f.return}pd(function(){var Y=_,le=Sa(c),de=[];e:{var ae=jw.get(i);if(ae!==void 0){var Se=Ro,Ce=i;switch(i){case"keypress":if(Co(c)===0)break e;case"keydown":case"keyup":Se=ct;break;case"focusin":Ce="focus",Se=nn;break;case"focusout":Ce="blur",Se=nn;break;case"beforeblur":case"afterblur":Se=nn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=qr;break;case Mw:case Ow:case Lw:Se=Pd;break;case Vw:Se=Va;break;case"scroll":Se=Da;break;case"wheel":Se=pN;break;case"copy":case"cut":case"paste":Se=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=$n}var Pe=(a&4)!==0,kt=!Pe&&i==="scroll",G=Pe?ae!==null?ae+"Capture":null:ae;Pe=[];for(var $=Y,Q;$!==null;){Q=$;var fe=Q.stateNode;if(Q.tag===5&&fe!==null&&(Q=fe,G!==null&&(fe=go($,G),fe!=null&&Pe.push(Pc($,fe,Q)))),kt)break;$=$.return}0<Pe.length&&(ae=new Se(ae,Ce,null,c,le),de.push({event:ae,listeners:Pe}))}}if((a&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",Se=i==="mouseout"||i==="pointerout",ae&&c!==li&&(Ce=c.relatedTarget||c.fromElement)&&(Ao(Ce)||Ce[Cs]))break e;if((Se||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,Se?(Ce=c.relatedTarget||c.toElement,Se=Y,Ce=Ce?Ao(Ce):null,Ce!==null&&(kt=mr(Ce),Ce!==kt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Se=null,Ce=Y),Se!==Ce)){if(Pe=Ec,fe="onMouseLeave",G="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=$n,fe="onPointerLeave",G="onPointerEnter",$="pointer"),kt=Se==null?ae:$a(Se),Q=Ce==null?ae:$a(Ce),ae=new Pe(fe,$+"leave",Se,c,le),ae.target=kt,ae.relatedTarget=Q,fe=null,Ao(le)===Y&&(Pe=new Pe(G,$+"enter",Ce,c,le),Pe.target=Q,Pe.relatedTarget=kt,fe=Pe),kt=fe,Se&&Ce)t:{for(Pe=Se,G=Ce,$=0,Q=Pe;Q;Q=za(Q))$++;for(Q=0,fe=G;fe;fe=za(fe))Q++;for(;0<$-Q;)Pe=za(Pe),$--;for(;0<Q-$;)G=za(G),Q--;for(;$--;){if(Pe===G||G!==null&&Pe===G.alternate)break t;Pe=za(Pe),G=za(G)}Pe=null}else Pe=null;Se!==null&&$w(de,ae,Se,Pe,!1),Ce!==null&&kt!==null&&$w(de,kt,Ce,Pe,!0)}}e:{if(ae=Y?$a(Y):window,Se=ae.nodeName&&ae.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ae.type==="file")var Ne=EN;else if(Sw(ae))if(Tw)Ne=IN;else{Ne=xN;var De=SN}else(Se=ae.nodeName)&&Se.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Ne=TN);if(Ne&&(Ne=Ne(i,Y))){xw(de,Ne,c,le);break e}De&&De(i,ae,Y),i==="focusout"&&(De=ae._wrapperState)&&De.controlled&&ae.type==="number"&&xt(ae,"number",ae.value)}switch(De=Y?$a(Y):window,i){case"focusin":(Sw(De)||De.contentEditable==="true")&&(Fa=De,dm=Y,Rc=null);break;case"focusout":Rc=dm=Fa=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,kw(de,c,le);break;case"selectionchange":if(bN)break;case"keydown":case"keyup":kw(de,c,le)}var Me;if(am)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else ja?ww(i,c)&&(Ve="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(yw&&c.locale!=="ko"&&(ja||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&ja&&(Me=Cd()):(zn=le,ka="value"in zn?zn.value:zn.textContent,ja=!0)),De=Od(Y,Ve),0<De.length&&(Ve=new x(Ve,i,null,c,le),de.push({event:Ve,listeners:De}),Me?Ve.data=Me:(Me=Ew(c),Me!==null&&(Ve.data=Me)))),(Me=gN?yN(i,c):vN(i,c))&&(Y=Od(Y,"onBeforeInput"),0<Y.length&&(le=new x("onBeforeInput","beforeinput",null,c,le),de.push({event:le,listeners:Y}),le.data=Me))}zw(de,a)})}function Pc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Od(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=go(i,c),_!=null&&f.unshift(Pc(i,_,g)),_=go(i,a),_!=null&&f.push(Pc(i,_,g))),i=i.return}return f}function za(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function $w(i,a,c,f,g){for(var _=a._reactName,C=[];c!==null&&c!==f;){var L=c,U=L.alternate,Y=L.stateNode;if(U!==null&&U===f)break;L.tag===5&&Y!==null&&(L=Y,g?(U=go(c,_),U!=null&&C.unshift(Pc(c,U,L))):g||(U=go(c,_),U!=null&&C.push(Pc(c,U,L)))),c=c.return}C.length!==0&&i.push({event:a,listeners:C})}var kN=/\r\n?/g,DN=/\u0000|\uFFFD/g;function Ww(i){return(typeof i=="string"?i:""+i).replace(kN,`
`).replace(DN,"")}function Ld(i,a,c){if(a=Ww(a),Ww(i)!==a&&c)throw Error(t(425))}function Vd(){}var vm=null,_m=null;function wm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Em=typeof setTimeout=="function"?setTimeout:void 0,MN=typeof clearTimeout=="function"?clearTimeout:void 0,Hw=typeof Promise=="function"?Promise:void 0,ON=typeof queueMicrotask=="function"?queueMicrotask:typeof Hw<"u"?function(i){return Hw.resolve(null).then(i).catch(LN)}:Em;function LN(i){setTimeout(function(){throw i})}function Sm(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){i.removeChild(g),gi(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);gi(a)}function wi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Gw(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Ba,Nc="__reactProps$"+Ba,Cs="__reactContainer$"+Ba,xm="__reactEvents$"+Ba,VN="__reactListeners$"+Ba,jN="__reactHandles$"+Ba;function Ao(i){var a=i[Qr];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Cs]||c[Qr]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Gw(i);i!==null;){if(c=i[Qr])return c;i=Gw(i)}return a}i=c,c=i.parentNode}return null}function kc(i){return i=i[Qr]||i[Cs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function $a(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function jd(i){return i[Nc]||null}var Tm=[],Wa=-1;function Ei(i){return{current:i}}function yt(i){0>Wa||(i.current=Tm[Wa],Tm[Wa]=null,Wa--)}function ft(i,a){Wa++,Tm[Wa]=i.current,i.current=a}var Si={},dn=Ei(Si),Pn=Ei(!1),Po=Si;function Ha(i,a){var c=i.type.contextTypes;if(!c)return Si;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in c)g[_]=a[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function Nn(i){return i=i.childContextTypes,i!=null}function Fd(){yt(Pn),yt(dn)}function qw(i,a,c){if(dn.current!==Si)throw Error(t(168));ft(dn,a),ft(Pn,c)}function Kw(i,a,c){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(t(108,H(i)||"Unknown",g));return ue({},c,f)}function Ud(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Si,Po=dn.current,ft(dn,i),ft(Pn,Pn.current),!0}function Qw(i,a,c){var f=i.stateNode;if(!f)throw Error(t(169));c?(i=Kw(i,a,Po),f.__reactInternalMemoizedMergedChildContext=i,yt(Pn),yt(dn),ft(dn,i)):yt(Pn),ft(Pn,c)}var Rs=null,zd=!1,Im=!1;function Yw(i){Rs===null?Rs=[i]:Rs.push(i)}function FN(i){zd=!0,Yw(i)}function xi(){if(!Im&&Rs!==null){Im=!0;var i=0,a=Xe;try{var c=Rs;for(Xe=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}Rs=null,zd=!1}catch(g){throw Rs!==null&&(Rs=Rs.slice(i+1)),lc(Ia,xi),g}finally{Xe=a,Im=!1}}return null}var Ga=[],qa=0,Bd=null,$d=0,er=[],tr=0,No=null,bs=1,As="";function ko(i,a){Ga[qa++]=$d,Ga[qa++]=Bd,Bd=i,$d=a}function Xw(i,a,c){er[tr++]=bs,er[tr++]=As,er[tr++]=No,No=i;var f=bs;i=As;var g=32-Fn(f)-1;f&=~(1<<g),c+=1;var _=32-Fn(a)+g;if(30<_){var C=g-g%5;_=(f&(1<<C)-1).toString(32),f>>=C,g-=C,bs=1<<32-Fn(a)+g|c<<g|f,As=_+i}else bs=1<<_|c<<g|f,As=i}function Cm(i){i.return!==null&&(ko(i,1),Xw(i,1,0))}function Rm(i){for(;i===Bd;)Bd=Ga[--qa],Ga[qa]=null,$d=Ga[--qa],Ga[qa]=null;for(;i===No;)No=er[--tr],er[tr]=null,As=er[--tr],er[tr]=null,bs=er[--tr],er[tr]=null}var Wn=null,Hn=null,St=!1,vr=null;function Jw(i,a){var c=ir(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function Zw(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Wn=i,Hn=wi(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Wn=i,Hn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=No!==null?{id:bs,overflow:As}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=ir(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,Wn=i,Hn=null,!0):!1;default:return!1}}function bm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Am(i){if(St){var a=Hn;if(a){var c=a;if(!Zw(i,a)){if(bm(i))throw Error(t(418));a=wi(c.nextSibling);var f=Wn;a&&Zw(i,a)?Jw(f,c):(i.flags=i.flags&-4097|2,St=!1,Wn=i)}}else{if(bm(i))throw Error(t(418));i.flags=i.flags&-4097|2,St=!1,Wn=i}}}function eE(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Wn=i}function Wd(i){if(i!==Wn)return!1;if(!St)return eE(i),St=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!wm(i.type,i.memoizedProps)),a&&(a=Hn)){if(bm(i))throw tE(),Error(t(418));for(;a;)Jw(i,a),a=wi(a.nextSibling)}if(eE(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Hn=wi(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Hn=null}}else Hn=Wn?wi(i.stateNode.nextSibling):null;return!0}function tE(){for(var i=Hn;i;)i=wi(i.nextSibling)}function Ka(){Hn=Wn=null,St=!1}function Pm(i){vr===null?vr=[i]:vr.push(i)}var UN=K.ReactCurrentBatchConfig;function Dc(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,i));var g=f,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var L=g.refs;C===null?delete L[_]:L[_]=C},a._stringRef=_,a)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function Hd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function nE(i){var a=i._init;return a(i._payload)}function rE(i){function a(G,$){if(i){var Q=G.deletions;Q===null?(G.deletions=[$],G.flags|=16):Q.push($)}}function c(G,$){if(!i)return null;for(;$!==null;)a(G,$),$=$.sibling;return null}function f(G,$){for(G=new Map;$!==null;)$.key!==null?G.set($.key,$):G.set($.index,$),$=$.sibling;return G}function g(G,$){return G=Ni(G,$),G.index=0,G.sibling=null,G}function _(G,$,Q){return G.index=Q,i?(Q=G.alternate,Q!==null?(Q=Q.index,Q<$?(G.flags|=2,$):Q):(G.flags|=2,$)):(G.flags|=1048576,$)}function C(G){return i&&G.alternate===null&&(G.flags|=2),G}function L(G,$,Q,fe){return $===null||$.tag!==6?($=Eg(Q,G.mode,fe),$.return=G,$):($=g($,Q),$.return=G,$)}function U(G,$,Q,fe){var Ne=Q.type;return Ne===P?le(G,$,Q.props.children,fe,Q.key):$!==null&&($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===pe&&nE(Ne)===$.type)?(fe=g($,Q.props),fe.ref=Dc(G,$,Q),fe.return=G,fe):(fe=mh(Q.type,Q.key,Q.props,null,G.mode,fe),fe.ref=Dc(G,$,Q),fe.return=G,fe)}function Y(G,$,Q,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=Sg(Q,G.mode,fe),$.return=G,$):($=g($,Q.children||[]),$.return=G,$)}function le(G,$,Q,fe,Ne){return $===null||$.tag!==7?($=Uo(Q,G.mode,fe,Ne),$.return=G,$):($=g($,Q),$.return=G,$)}function de(G,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Eg(""+$,G.mode,Q),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case J:return Q=mh($.type,$.key,$.props,null,G.mode,Q),Q.ref=Dc(G,null,$),Q.return=G,Q;case Z:return $=Sg($,G.mode,Q),$.return=G,$;case pe:var fe=$._init;return de(G,fe($._payload),Q)}if(Tt($)||ee($))return $=Uo($,G.mode,Q,null),$.return=G,$;Hd(G,$)}return null}function ae(G,$,Q,fe){var Ne=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Ne!==null?null:L(G,$,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case J:return Q.key===Ne?U(G,$,Q,fe):null;case Z:return Q.key===Ne?Y(G,$,Q,fe):null;case pe:return Ne=Q._init,ae(G,$,Ne(Q._payload),fe)}if(Tt(Q)||ee(Q))return Ne!==null?null:le(G,$,Q,fe,null);Hd(G,Q)}return null}function Se(G,$,Q,fe,Ne){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return G=G.get(Q)||null,L($,G,""+fe,Ne);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case J:return G=G.get(fe.key===null?Q:fe.key)||null,U($,G,fe,Ne);case Z:return G=G.get(fe.key===null?Q:fe.key)||null,Y($,G,fe,Ne);case pe:var De=fe._init;return Se(G,$,Q,De(fe._payload),Ne)}if(Tt(fe)||ee(fe))return G=G.get(Q)||null,le($,G,fe,Ne,null);Hd($,fe)}return null}function Ce(G,$,Q,fe){for(var Ne=null,De=null,Me=$,Ve=$=0,Qt=null;Me!==null&&Ve<Q.length;Ve++){Me.index>Ve?(Qt=Me,Me=null):Qt=Me.sibling;var st=ae(G,Me,Q[Ve],fe);if(st===null){Me===null&&(Me=Qt);break}i&&Me&&st.alternate===null&&a(G,Me),$=_(st,$,Ve),De===null?Ne=st:De.sibling=st,De=st,Me=Qt}if(Ve===Q.length)return c(G,Me),St&&ko(G,Ve),Ne;if(Me===null){for(;Ve<Q.length;Ve++)Me=de(G,Q[Ve],fe),Me!==null&&($=_(Me,$,Ve),De===null?Ne=Me:De.sibling=Me,De=Me);return St&&ko(G,Ve),Ne}for(Me=f(G,Me);Ve<Q.length;Ve++)Qt=Se(Me,G,Ve,Q[Ve],fe),Qt!==null&&(i&&Qt.alternate!==null&&Me.delete(Qt.key===null?Ve:Qt.key),$=_(Qt,$,Ve),De===null?Ne=Qt:De.sibling=Qt,De=Qt);return i&&Me.forEach(function(ki){return a(G,ki)}),St&&ko(G,Ve),Ne}function Pe(G,$,Q,fe){var Ne=ee(Q);if(typeof Ne!="function")throw Error(t(150));if(Q=Ne.call(Q),Q==null)throw Error(t(151));for(var De=Ne=null,Me=$,Ve=$=0,Qt=null,st=Q.next();Me!==null&&!st.done;Ve++,st=Q.next()){Me.index>Ve?(Qt=Me,Me=null):Qt=Me.sibling;var ki=ae(G,Me,st.value,fe);if(ki===null){Me===null&&(Me=Qt);break}i&&Me&&ki.alternate===null&&a(G,Me),$=_(ki,$,Ve),De===null?Ne=ki:De.sibling=ki,De=ki,Me=Qt}if(st.done)return c(G,Me),St&&ko(G,Ve),Ne;if(Me===null){for(;!st.done;Ve++,st=Q.next())st=de(G,st.value,fe),st!==null&&($=_(st,$,Ve),De===null?Ne=st:De.sibling=st,De=st);return St&&ko(G,Ve),Ne}for(Me=f(G,Me);!st.done;Ve++,st=Q.next())st=Se(Me,G,Ve,st.value,fe),st!==null&&(i&&st.alternate!==null&&Me.delete(st.key===null?Ve:st.key),$=_(st,$,Ve),De===null?Ne=st:De.sibling=st,De=st);return i&&Me.forEach(function(_k){return a(G,_k)}),St&&ko(G,Ve),Ne}function kt(G,$,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===P&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case J:e:{for(var Ne=Q.key,De=$;De!==null;){if(De.key===Ne){if(Ne=Q.type,Ne===P){if(De.tag===7){c(G,De.sibling),$=g(De,Q.props.children),$.return=G,G=$;break e}}else if(De.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===pe&&nE(Ne)===De.type){c(G,De.sibling),$=g(De,Q.props),$.ref=Dc(G,De,Q),$.return=G,G=$;break e}c(G,De);break}else a(G,De);De=De.sibling}Q.type===P?($=Uo(Q.props.children,G.mode,fe,Q.key),$.return=G,G=$):(fe=mh(Q.type,Q.key,Q.props,null,G.mode,fe),fe.ref=Dc(G,$,Q),fe.return=G,G=fe)}return C(G);case Z:e:{for(De=Q.key;$!==null;){if($.key===De)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){c(G,$.sibling),$=g($,Q.children||[]),$.return=G,G=$;break e}else{c(G,$);break}else a(G,$);$=$.sibling}$=Sg(Q,G.mode,fe),$.return=G,G=$}return C(G);case pe:return De=Q._init,kt(G,$,De(Q._payload),fe)}if(Tt(Q))return Ce(G,$,Q,fe);if(ee(Q))return Pe(G,$,Q,fe);Hd(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,$!==null&&$.tag===6?(c(G,$.sibling),$=g($,Q),$.return=G,G=$):(c(G,$),$=Eg(Q,G.mode,fe),$.return=G,G=$),C(G)):c(G,$)}return kt}var Qa=rE(!0),sE=rE(!1),Gd=Ei(null),qd=null,Ya=null,Nm=null;function km(){Nm=Ya=qd=null}function Dm(i){var a=Gd.current;yt(Gd),i._currentValue=a}function Mm(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function Xa(i,a){qd=i,Nm=Ya=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(kn=!0),i.firstContext=null)}function nr(i){var a=i._currentValue;if(Nm!==i)if(i={context:i,memoizedValue:a,next:null},Ya===null){if(qd===null)throw Error(t(308));Ya=i,qd.dependencies={lanes:0,firstContext:i}}else Ya=Ya.next=i;return a}var Do=null;function Om(i){Do===null?Do=[i]:Do.push(i)}function iE(i,a,c,f){var g=a.interleaved;return g===null?(c.next=c,Om(a)):(c.next=g.next,g.next=c),a.interleaved=c,Ps(i,f)}function Ps(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Ti=!1;function Lm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oE(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ns(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Ii(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(nt&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,Ps(i,c)}return g=f.interleaved,g===null?(a.next=a,Om(f)):(a.next=g.next,g.next=a),f.interleaved=a,Ps(i,c)}function Kd(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,pc(i,c)}}function aE(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var C={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?g=_=C:_=_.next=C,c=c.next}while(c!==null);_===null?g=_=a:_=_.next=a}else g=_=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function Qd(i,a,c,f){var g=i.updateQueue;Ti=!1;var _=g.firstBaseUpdate,C=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var U=L,Y=U.next;U.next=null,C===null?_=Y:C.next=Y,C=U;var le=i.alternate;le!==null&&(le=le.updateQueue,L=le.lastBaseUpdate,L!==C&&(L===null?le.firstBaseUpdate=Y:L.next=Y,le.lastBaseUpdate=U))}if(_!==null){var de=g.baseState;C=0,le=Y=U=null,L=_;do{var ae=L.lane,Se=L.eventTime;if((f&ae)===ae){le!==null&&(le=le.next={eventTime:Se,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Ce=i,Pe=L;switch(ae=a,Se=c,Pe.tag){case 1:if(Ce=Pe.payload,typeof Ce=="function"){de=Ce.call(Se,de,ae);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Pe.payload,ae=typeof Ce=="function"?Ce.call(Se,de,ae):Ce,ae==null)break e;de=ue({},de,ae);break e;case 2:Ti=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,ae=g.effects,ae===null?g.effects=[L]:ae.push(L))}else Se={eventTime:Se,lane:ae,tag:L.tag,payload:L.payload,callback:L.callback,next:null},le===null?(Y=le=Se,U=de):le=le.next=Se,C|=ae;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;ae=L,L=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(le===null&&(U=de),g.baseState=U,g.firstBaseUpdate=Y,g.lastBaseUpdate=le,a=g.shared.interleaved,a!==null){g=a;do C|=g.lane,g=g.next;while(g!==a)}else _===null&&(g.shared.lanes=0);Lo|=C,i.lanes=C,i.memoizedState=de}}function lE(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var Mc={},Yr=Ei(Mc),Oc=Ei(Mc),Lc=Ei(Mc);function Mo(i){if(i===Mc)throw Error(t(174));return i}function Vm(i,a){switch(ft(Lc,a),ft(Oc,i),ft(Yr,Mc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:_a(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=_a(a,i)}yt(Yr),ft(Yr,a)}function Ja(){yt(Yr),yt(Oc),yt(Lc)}function cE(i){Mo(Lc.current);var a=Mo(Yr.current),c=_a(a,i.type);a!==c&&(ft(Oc,i),ft(Yr,c))}function jm(i){Oc.current===i&&(yt(Yr),yt(Oc))}var It=Ei(0);function Yd(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Fm=[];function Um(){for(var i=0;i<Fm.length;i++)Fm[i]._workInProgressVersionPrimary=null;Fm.length=0}var Xd=K.ReactCurrentDispatcher,zm=K.ReactCurrentBatchConfig,Oo=0,Ct=null,Bt=null,qt=null,Jd=!1,Vc=!1,jc=0,zN=0;function hn(){throw Error(t(321))}function Bm(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!yr(i[c],a[c]))return!1;return!0}function $m(i,a,c,f,g,_){if(Oo=_,Ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Xd.current=i===null||i.memoizedState===null?HN:GN,i=c(f,g),Vc){_=0;do{if(Vc=!1,jc=0,25<=_)throw Error(t(301));_+=1,qt=Bt=null,a.updateQueue=null,Xd.current=qN,i=c(f,g)}while(Vc)}if(Xd.current=th,a=Bt!==null&&Bt.next!==null,Oo=0,qt=Bt=Ct=null,Jd=!1,a)throw Error(t(300));return i}function Wm(){var i=jc!==0;return jc=0,i}function Xr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Ct.memoizedState=qt=i:qt=qt.next=i,qt}function rr(){if(Bt===null){var i=Ct.alternate;i=i!==null?i.memoizedState:null}else i=Bt.next;var a=qt===null?Ct.memoizedState:qt.next;if(a!==null)qt=a,Bt=i;else{if(i===null)throw Error(t(310));Bt=i,i={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},qt===null?Ct.memoizedState=qt=i:qt=qt.next=i}return qt}function Fc(i,a){return typeof a=="function"?a(i):a}function Hm(i){var a=rr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=Bt,g=f.baseQueue,_=c.pending;if(_!==null){if(g!==null){var C=g.next;g.next=_.next,_.next=C}f.baseQueue=g=_,c.pending=null}if(g!==null){_=g.next,f=f.baseState;var L=C=null,U=null,Y=_;do{var le=Y.lane;if((Oo&le)===le)U!==null&&(U=U.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var de={lane:le,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};U===null?(L=U=de,C=f):U=U.next=de,Ct.lanes|=le,Lo|=le}Y=Y.next}while(Y!==null&&Y!==_);U===null?C=f:U.next=L,yr(f,a.memoizedState)||(kn=!0),a.memoizedState=f,a.baseState=C,a.baseQueue=U,c.lastRenderedState=f}if(i=c.interleaved,i!==null){g=i;do _=g.lane,Ct.lanes|=_,Lo|=_,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Gm(i){var a=rr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,_=a.memoizedState;if(g!==null){c.pending=null;var C=g=g.next;do _=i(_,C.action),C=C.next;while(C!==g);yr(_,a.memoizedState)||(kn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),c.lastRenderedState=_}return[_,f]}function uE(){}function dE(i,a){var c=Ct,f=rr(),g=a(),_=!yr(f.memoizedState,g);if(_&&(f.memoizedState=g,kn=!0),f=f.queue,qm(pE.bind(null,c,f,i),[i]),f.getSnapshot!==a||_||qt!==null&&qt.memoizedState.tag&1){if(c.flags|=2048,Uc(9,fE.bind(null,c,f,g,a),void 0,null),Kt===null)throw Error(t(349));(Oo&30)!==0||hE(c,a,g)}return g}function hE(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function fE(i,a,c,f){a.value=c,a.getSnapshot=f,mE(a)&&gE(i)}function pE(i,a,c){return c(function(){mE(a)&&gE(i)})}function mE(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!yr(i,c)}catch{return!0}}function gE(i){var a=Ps(i,1);a!==null&&Sr(a,i,1,-1)}function yE(i){var a=Xr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:i},a.queue=i,i=i.dispatch=WN.bind(null,Ct,i),[a.memoizedState,i]}function Uc(i,a,c,f){return i={tag:i,create:a,destroy:c,deps:f,next:null},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i)),i}function vE(){return rr().memoizedState}function Zd(i,a,c,f){var g=Xr();Ct.flags|=i,g.memoizedState=Uc(1|a,c,void 0,f===void 0?null:f)}function eh(i,a,c,f){var g=rr();f=f===void 0?null:f;var _=void 0;if(Bt!==null){var C=Bt.memoizedState;if(_=C.destroy,f!==null&&Bm(f,C.deps)){g.memoizedState=Uc(a,c,_,f);return}}Ct.flags|=i,g.memoizedState=Uc(1|a,c,_,f)}function _E(i,a){return Zd(8390656,8,i,a)}function qm(i,a){return eh(2048,8,i,a)}function wE(i,a){return eh(4,2,i,a)}function EE(i,a){return eh(4,4,i,a)}function SE(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function xE(i,a,c){return c=c!=null?c.concat([i]):null,eh(4,4,SE.bind(null,a,i),c)}function Km(){}function TE(i,a){var c=rr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Bm(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function IE(i,a){var c=rr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Bm(a,f[1])?f[0]:(i=i(),c.memoizedState=[i,a],i)}function CE(i,a,c){return(Oo&21)===0?(i.baseState&&(i.baseState=!1,kn=!0),i.memoizedState=c):(yr(c,a)||(c=hc(),Ct.lanes|=c,Lo|=c,i.baseState=!0),a)}function BN(i,a){var c=Xe;Xe=c!==0&&4>c?c:4,i(!0);var f=zm.transition;zm.transition={};try{i(!1),a()}finally{Xe=c,zm.transition=f}}function RE(){return rr().memoizedState}function $N(i,a,c){var f=Ai(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},bE(i))AE(a,c);else if(c=iE(i,a,c,f),c!==null){var g=Cn();Sr(c,i,f,g),PE(c,a,f)}}function WN(i,a,c){var f=Ai(i),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(bE(i))AE(a,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,L=_(C,c);if(g.hasEagerState=!0,g.eagerState=L,yr(L,C)){var U=a.interleaved;U===null?(g.next=g,Om(a)):(g.next=U.next,U.next=g),a.interleaved=g;return}}catch{}finally{}c=iE(i,a,g,f),c!==null&&(g=Cn(),Sr(c,i,f,g),PE(c,a,f))}}function bE(i){var a=i.alternate;return i===Ct||a!==null&&a===Ct}function AE(i,a){Vc=Jd=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function PE(i,a,c){if((c&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,pc(i,c)}}var th={readContext:nr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},HN={readContext:nr,useCallback:function(i,a){return Xr().memoizedState=[i,a===void 0?null:a],i},useContext:nr,useEffect:_E,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,Zd(4194308,4,SE.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Zd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Zd(4,2,i,a)},useMemo:function(i,a){var c=Xr();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var f=Xr();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=$N.bind(null,Ct,i),[f.memoizedState,i]},useRef:function(i){var a=Xr();return i={current:i},a.memoizedState=i},useState:yE,useDebugValue:Km,useDeferredValue:function(i){return Xr().memoizedState=i},useTransition:function(){var i=yE(!1),a=i[0];return i=BN.bind(null,i[1]),Xr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var f=Ct,g=Xr();if(St){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),Kt===null)throw Error(t(349));(Oo&30)!==0||hE(f,a,c)}g.memoizedState=c;var _={value:c,getSnapshot:a};return g.queue=_,_E(pE.bind(null,f,_,i),[i]),f.flags|=2048,Uc(9,fE.bind(null,f,_,c,a),void 0,null),c},useId:function(){var i=Xr(),a=Kt.identifierPrefix;if(St){var c=As,f=bs;c=(f&~(1<<32-Fn(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=jc++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=zN++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},GN={readContext:nr,useCallback:TE,useContext:nr,useEffect:qm,useImperativeHandle:xE,useInsertionEffect:wE,useLayoutEffect:EE,useMemo:IE,useReducer:Hm,useRef:vE,useState:function(){return Hm(Fc)},useDebugValue:Km,useDeferredValue:function(i){var a=rr();return CE(a,Bt.memoizedState,i)},useTransition:function(){var i=Hm(Fc)[0],a=rr().memoizedState;return[i,a]},useMutableSource:uE,useSyncExternalStore:dE,useId:RE,unstable_isNewReconciler:!1},qN={readContext:nr,useCallback:TE,useContext:nr,useEffect:qm,useImperativeHandle:xE,useInsertionEffect:wE,useLayoutEffect:EE,useMemo:IE,useReducer:Gm,useRef:vE,useState:function(){return Gm(Fc)},useDebugValue:Km,useDeferredValue:function(i){var a=rr();return Bt===null?a.memoizedState=i:CE(a,Bt.memoizedState,i)},useTransition:function(){var i=Gm(Fc)[0],a=rr().memoizedState;return[i,a]},useMutableSource:uE,useSyncExternalStore:dE,useId:RE,unstable_isNewReconciler:!1};function _r(i,a){if(i&&i.defaultProps){a=ue({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function Qm(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:ue({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var nh={isMounted:function(i){return(i=i._reactInternals)?mr(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Cn(),g=Ai(i),_=Ns(f,g);_.payload=a,c!=null&&(_.callback=c),a=Ii(i,_,g),a!==null&&(Sr(a,i,g,f),Kd(a,i,g))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Cn(),g=Ai(i),_=Ns(f,g);_.tag=1,_.payload=a,c!=null&&(_.callback=c),a=Ii(i,_,g),a!==null&&(Sr(a,i,g,f),Kd(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Cn(),f=Ai(i),g=Ns(c,f);g.tag=2,a!=null&&(g.callback=a),a=Ii(i,g,f),a!==null&&(Sr(a,i,f,c),Kd(a,i,f))}};function NE(i,a,c,f,g,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,C):a.prototype&&a.prototype.isPureReactComponent?!Cc(c,f)||!Cc(g,_):!0}function kE(i,a,c){var f=!1,g=Si,_=a.contextType;return typeof _=="object"&&_!==null?_=nr(_):(g=Nn(a)?Po:dn.current,f=a.contextTypes,_=(f=f!=null)?Ha(i,g):Si),a=new a(c,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=nh,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=_),a}function DE(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&nh.enqueueReplaceState(a,a.state,null)}function Ym(i,a,c,f){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},Lm(i);var _=a.contextType;typeof _=="object"&&_!==null?g.context=nr(_):(_=Nn(a)?Po:dn.current,g.context=Ha(i,_)),g.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Qm(i,a,_,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&nh.enqueueReplaceState(g,g.state,null),Qd(i,c,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Za(i,a){try{var c="",f=a;do c+=he(f),f=f.return;while(f);var g=c}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:g,digest:null}}function Xm(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function Jm(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var KN=typeof WeakMap=="function"?WeakMap:Map;function ME(i,a,c){c=Ns(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){ch||(ch=!0,fg=f),Jm(i,a)},c}function OE(i,a,c){c=Ns(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;c.payload=function(){return f(g)},c.callback=function(){Jm(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){Jm(i,a),typeof f!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),c}function LE(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new KN;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(g.add(c),i=lk.bind(null,i,a,c),a.then(i,i))}function VE(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function jE(i,a,c,f,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=Ns(-1,1),a.tag=2,Ii(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var QN=K.ReactCurrentOwner,kn=!1;function In(i,a,c,f){a.child=i===null?sE(a,null,c,f):Qa(a,i.child,c,f)}function FE(i,a,c,f,g){c=c.render;var _=a.ref;return Xa(a,g),f=$m(i,a,c,f,_,g),c=Wm(),i!==null&&!kn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,ks(i,a,g)):(St&&c&&Cm(a),a.flags|=1,In(i,a,f,g),a.child)}function UE(i,a,c,f,g){if(i===null){var _=c.type;return typeof _=="function"&&!wg(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=_,zE(i,a,_,f,g)):(i=mh(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&g)===0){var C=_.memoizedProps;if(c=c.compare,c=c!==null?c:Cc,c(C,f)&&i.ref===a.ref)return ks(i,a,g)}return a.flags|=1,i=Ni(_,f),i.ref=a.ref,i.return=a,a.child=i}function zE(i,a,c,f,g){if(i!==null){var _=i.memoizedProps;if(Cc(_,f)&&i.ref===a.ref)if(kn=!1,a.pendingProps=f=_,(i.lanes&g)!==0)(i.flags&131072)!==0&&(kn=!0);else return a.lanes=i.lanes,ks(i,a,g)}return Zm(i,a,c,f,g)}function BE(i,a,c){var f=a.pendingProps,g=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(tl,Gn),Gn|=c;else{if((c&1073741824)===0)return i=_!==null?_.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,ft(tl,Gn),Gn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:c,ft(tl,Gn),Gn|=f}else _!==null?(f=_.baseLanes|c,a.memoizedState=null):f=c,ft(tl,Gn),Gn|=f;return In(i,a,g,c),a.child}function $E(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Zm(i,a,c,f,g){var _=Nn(c)?Po:dn.current;return _=Ha(a,_),Xa(a,g),c=$m(i,a,c,f,_,g),f=Wm(),i!==null&&!kn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,ks(i,a,g)):(St&&f&&Cm(a),a.flags|=1,In(i,a,c,g),a.child)}function WE(i,a,c,f,g){if(Nn(c)){var _=!0;Ud(a)}else _=!1;if(Xa(a,g),a.stateNode===null)sh(i,a),kE(a,c,f),Ym(a,c,f,g),f=!0;else if(i===null){var C=a.stateNode,L=a.memoizedProps;C.props=L;var U=C.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=nr(Y):(Y=Nn(c)?Po:dn.current,Y=Ha(a,Y));var le=c.getDerivedStateFromProps,de=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==f||U!==Y)&&DE(a,C,f,Y),Ti=!1;var ae=a.memoizedState;C.state=ae,Qd(a,f,C,g),U=a.memoizedState,L!==f||ae!==U||Pn.current||Ti?(typeof le=="function"&&(Qm(a,c,le,f),U=a.memoizedState),(L=Ti||NE(a,c,L,f,ae,U,Y))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=U),C.props=f,C.state=U,C.context=Y,f=L):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{C=a.stateNode,oE(i,a),L=a.memoizedProps,Y=a.type===a.elementType?L:_r(a.type,L),C.props=Y,de=a.pendingProps,ae=C.context,U=c.contextType,typeof U=="object"&&U!==null?U=nr(U):(U=Nn(c)?Po:dn.current,U=Ha(a,U));var Se=c.getDerivedStateFromProps;(le=typeof Se=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==de||ae!==U)&&DE(a,C,f,U),Ti=!1,ae=a.memoizedState,C.state=ae,Qd(a,f,C,g);var Ce=a.memoizedState;L!==de||ae!==Ce||Pn.current||Ti?(typeof Se=="function"&&(Qm(a,c,Se,f),Ce=a.memoizedState),(Y=Ti||NE(a,c,Y,f,ae,Ce,U)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,Ce,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,Ce,U)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Ce),C.props=f,C.state=Ce,C.context=U,f=Y):(typeof C.componentDidUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),f=!1)}return eg(i,a,c,f,_,g)}function eg(i,a,c,f,g,_){$E(i,a);var C=(a.flags&128)!==0;if(!f&&!C)return g&&Qw(a,c,!1),ks(i,a,_);f=a.stateNode,QN.current=a;var L=C&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&C?(a.child=Qa(a,i.child,null,_),a.child=Qa(a,null,L,_)):In(i,a,L,_),a.memoizedState=f.state,g&&Qw(a,c,!0),a.child}function HE(i){var a=i.stateNode;a.pendingContext?qw(i,a.pendingContext,a.pendingContext!==a.context):a.context&&qw(i,a.context,!1),Vm(i,a.containerInfo)}function GE(i,a,c,f,g){return Ka(),Pm(g),a.flags|=256,In(i,a,c,f),a.child}var tg={dehydrated:null,treeContext:null,retryLane:0};function ng(i){return{baseLanes:i,cachePool:null,transitions:null}}function qE(i,a,c){var f=a.pendingProps,g=It.current,_=!1,C=(a.flags&128)!==0,L;if((L=C)||(L=i!==null&&i.memoizedState===null?!1:(g&2)!==0),L?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),ft(It,g&1),i===null)return Am(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=f.children,i=f.fallback,_?(f=a.mode,_=a.child,C={mode:"hidden",children:C},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=C):_=gh(C,f,0,null),i=Uo(i,f,c,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=ng(c),a.memoizedState=tg,i):rg(a,C));if(g=i.memoizedState,g!==null&&(L=g.dehydrated,L!==null))return YN(i,a,C,f,L,g,c);if(_){_=f.fallback,C=a.mode,g=i.child,L=g.sibling;var U={mode:"hidden",children:f.children};return(C&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=U,a.deletions=null):(f=Ni(g,U),f.subtreeFlags=g.subtreeFlags&14680064),L!==null?_=Ni(L,_):(_=Uo(_,C,c,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,C=i.child.memoizedState,C=C===null?ng(c):{baseLanes:C.baseLanes|c,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=i.childLanes&~c,a.memoizedState=tg,f}return _=i.child,i=_.sibling,f=Ni(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=f,a.memoizedState=null,f}function rg(i,a){return a=gh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function rh(i,a,c,f){return f!==null&&Pm(f),Qa(a,i.child,null,c),i=rg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function YN(i,a,c,f,g,_,C){if(c)return a.flags&256?(a.flags&=-257,f=Xm(Error(t(422))),rh(i,a,C,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=f.fallback,g=a.mode,f=gh({mode:"visible",children:f.children},g,0,null),_=Uo(_,g,C,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&Qa(a,i.child,null,C),a.child.memoizedState=ng(C),a.memoizedState=tg,_);if((a.mode&1)===0)return rh(i,a,C,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var L=f.dgst;return f=L,_=Error(t(419)),f=Xm(_,f,void 0),rh(i,a,C,f)}if(L=(C&i.childLanes)!==0,kn||L){if(f=Kt,f!==null){switch(C&-C){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|C))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Ps(i,g),Sr(f,i,g,-1))}return _g(),f=Xm(Error(t(421))),rh(i,a,C,f)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=ck.bind(null,i),g._reactRetry=a,null):(i=_.treeContext,Hn=wi(g.nextSibling),Wn=a,St=!0,vr=null,i!==null&&(er[tr++]=bs,er[tr++]=As,er[tr++]=No,bs=i.id,As=i.overflow,No=a),a=rg(a,f.children),a.flags|=4096,a)}function KE(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),Mm(i.return,a,c)}function sg(i,a,c,f,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=g)}function QE(i,a,c){var f=a.pendingProps,g=f.revealOrder,_=f.tail;if(In(i,a,f.children,c),f=It.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&KE(i,c,a);else if(i.tag===19)KE(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(ft(It,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&Yd(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),sg(a,!1,g,c,_);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Yd(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}sg(a,!0,c,null,_);break;case"together":sg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function sh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function ks(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Lo|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,c=Ni(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Ni(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function XN(i,a,c){switch(a.tag){case 3:HE(a),Ka();break;case 5:cE(a);break;case 1:Nn(a.type)&&Ud(a);break;case 4:Vm(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;ft(Gd,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(ft(It,It.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?qE(i,a,c):(ft(It,It.current&1),i=ks(i,a,c),i!==null?i.sibling:null);ft(It,It.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(i.flags&128)!==0){if(f)return QE(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ft(It,It.current),f)break;return null;case 22:case 23:return a.lanes=0,BE(i,a,c)}return ks(i,a,c)}var YE,ig,XE,JE;YE=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},ig=function(){},XE=function(i,a,c,f){var g=i.memoizedProps;if(g!==f){i=a.stateNode,Mo(Yr.current);var _=null;switch(c){case"input":g=ht(i,g),f=ht(i,f),_=[];break;case"select":g=ue({},g,{value:void 0}),f=ue({},f,{value:void 0}),_=[];break;case"textarea":g=ri(i,g),f=ri(i,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Vd)}pr(c,f);var C;c=null;for(Y in g)if(!f.hasOwnProperty(Y)&&g.hasOwnProperty(Y)&&g[Y]!=null)if(Y==="style"){var L=g[Y];for(C in L)L.hasOwnProperty(C)&&(c||(c={}),c[C]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?_||(_=[]):(_=_||[]).push(Y,null));for(Y in f){var U=f[Y];if(L=g?.[Y],f.hasOwnProperty(Y)&&U!==L&&(U!=null||L!=null))if(Y==="style")if(L){for(C in L)!L.hasOwnProperty(C)||U&&U.hasOwnProperty(C)||(c||(c={}),c[C]="");for(C in U)U.hasOwnProperty(C)&&L[C]!==U[C]&&(c||(c={}),c[C]=U[C])}else c||(_||(_=[]),_.push(Y,c)),c=U;else Y==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,L=L?L.__html:void 0,U!=null&&L!==U&&(_=_||[]).push(Y,U)):Y==="children"?typeof U!="string"&&typeof U!="number"||(_=_||[]).push(Y,""+U):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(U!=null&&Y==="onScroll"&&gt("scroll",i),_||L===U||(_=[])):(_=_||[]).push(Y,U))}c&&(_=_||[]).push("style",c);var Y=_;(a.updateQueue=Y)&&(a.flags|=4)}},JE=function(i,a,c,f){c!==f&&(a.flags|=4)};function zc(i,a){if(!St)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function fn(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function JN(i,a,c){var f=a.pendingProps;switch(Rm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(a),null;case 1:return Nn(a.type)&&Fd(),fn(a),null;case 3:return f=a.stateNode,Ja(),yt(Pn),yt(dn),Um(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Wd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vr!==null&&(gg(vr),vr=null))),ig(i,a),fn(a),null;case 5:jm(a);var g=Mo(Lc.current);if(c=a.type,i!==null&&a.stateNode!=null)XE(i,a,c,f,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return fn(a),null}if(i=Mo(Yr.current),Wd(a)){f=a.stateNode,c=a.type;var _=a.memoizedProps;switch(f[Qr]=a,f[Nc]=_,i=(a.mode&1)!==0,c){case"dialog":gt("cancel",f),gt("close",f);break;case"iframe":case"object":case"embed":gt("load",f);break;case"video":case"audio":for(g=0;g<bc.length;g++)gt(bc[g],f);break;case"source":gt("error",f);break;case"img":case"image":case"link":gt("error",f),gt("load",f);break;case"details":gt("toggle",f);break;case"input":An(f,_),gt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},gt("invalid",f);break;case"textarea":po(f,_),gt("invalid",f)}pr(c,_),g=null;for(var C in _)if(_.hasOwnProperty(C)){var L=_[C];C==="children"?typeof L=="string"?f.textContent!==L&&(_.suppressHydrationWarning!==!0&&Ld(f.textContent,L,i),g=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(_.suppressHydrationWarning!==!0&&Ld(f.textContent,L,i),g=["children",""+L]):s.hasOwnProperty(C)&&L!=null&&C==="onScroll"&&gt("scroll",f)}switch(c){case"input":je(f),Ot(f,_,!0);break;case"textarea":je(f),si(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Vd)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{C=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=rc(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=C.createElement(c,{is:f.is}):(i=C.createElement(c),c==="select"&&(C=i,f.multiple?C.multiple=!0:f.size&&(C.size=f.size))):i=C.createElementNS(i,c),i[Qr]=a,i[Nc]=f,YE(i,a,!1,!1),a.stateNode=i;e:{switch(C=Ea(c,f),c){case"dialog":gt("cancel",i),gt("close",i),g=f;break;case"iframe":case"object":case"embed":gt("load",i),g=f;break;case"video":case"audio":for(g=0;g<bc.length;g++)gt(bc[g],i);g=f;break;case"source":gt("error",i),g=f;break;case"img":case"image":case"link":gt("error",i),gt("load",i),g=f;break;case"details":gt("toggle",i),g=f;break;case"input":An(i,f),g=ht(i,f),gt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=ue({},f,{value:void 0}),gt("invalid",i);break;case"textarea":po(i,f),g=ri(i,f),gt("invalid",i);break;default:g=f}pr(c,g),L=g;for(_ in L)if(L.hasOwnProperty(_)){var U=L[_];_==="style"?wa(i,U):_==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&ud(i,U)):_==="children"?typeof U=="string"?(c!=="textarea"||U!=="")&&mo(i,U):typeof U=="number"&&mo(i,""+U):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?U!=null&&_==="onScroll"&&gt("scroll",i):U!=null&&B(i,_,U,C))}switch(c){case"input":je(i),Ot(i,f,!1);break;case"textarea":je(i),si(i);break;case"option":f.value!=null&&i.setAttribute("value",""+oe(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?en(i,!!f.multiple,_,!1):f.defaultValue!=null&&en(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Vd)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return fn(a),null;case 6:if(i&&a.stateNode!=null)JE(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(c=Mo(Lc.current),Mo(Yr.current),Wd(a)){if(f=a.stateNode,c=a.memoizedProps,f[Qr]=a,(_=f.nodeValue!==c)&&(i=Wn,i!==null))switch(i.tag){case 3:Ld(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ld(f.nodeValue,c,(i.mode&1)!==0)}_&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Qr]=a,a.stateNode=f}return fn(a),null;case 13:if(yt(It),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(St&&Hn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)tE(),Ka(),a.flags|=98560,_=!1;else if(_=Wd(a),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Qr]=a}else Ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fn(a),_=!1}else vr!==null&&(gg(vr),vr=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(It.current&1)!==0?$t===0&&($t=3):_g())),a.updateQueue!==null&&(a.flags|=4),fn(a),null);case 4:return Ja(),ig(i,a),i===null&&Ac(a.stateNode.containerInfo),fn(a),null;case 10:return Dm(a.type._context),fn(a),null;case 17:return Nn(a.type)&&Fd(),fn(a),null;case 19:if(yt(It),_=a.memoizedState,_===null)return fn(a),null;if(f=(a.flags&128)!==0,C=_.rendering,C===null)if(f)zc(_,!1);else{if($t!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=Yd(i),C!==null){for(a.flags|=128,zc(_,!1),f=C.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)_=c,i=f,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,i=C.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return ft(It,It.current&1|2),a.child}i=i.sibling}_.tail!==null&&mt()>nl&&(a.flags|=128,f=!0,zc(_,!1),a.lanes=4194304)}else{if(!f)if(i=Yd(C),i!==null){if(a.flags|=128,f=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),zc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!St)return fn(a),null}else 2*mt()-_.renderingStartTime>nl&&c!==1073741824&&(a.flags|=128,f=!0,zc(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(c=_.last,c!==null?c.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=mt(),a.sibling=null,c=It.current,ft(It,f?c&1|2:c&1),a):(fn(a),null);case 22:case 23:return vg(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Gn&1073741824)!==0&&(fn(a),a.subtreeFlags&6&&(a.flags|=8192)):fn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function ZN(i,a){switch(Rm(a),a.tag){case 1:return Nn(a.type)&&Fd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ja(),yt(Pn),yt(dn),Um(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return jm(a),null;case 13:if(yt(It),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ka()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return yt(It),null;case 4:return Ja(),null;case 10:return Dm(a.type._context),null;case 22:case 23:return vg(),null;case 24:return null;default:return null}}var ih=!1,pn=!1,ek=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function el(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){At(i,a,f)}else c.current=null}function og(i,a,c){try{c()}catch(f){At(i,a,f)}}var ZE=!1;function tk(i,a){if(vm=xs,i=Nw(),um(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var C=0,L=-1,U=-1,Y=0,le=0,de=i,ae=null;t:for(;;){for(var Se;de!==c||g!==0&&de.nodeType!==3||(L=C+g),de!==_||f!==0&&de.nodeType!==3||(U=C+f),de.nodeType===3&&(C+=de.nodeValue.length),(Se=de.firstChild)!==null;)ae=de,de=Se;for(;;){if(de===i)break t;if(ae===c&&++Y===g&&(L=C),ae===_&&++le===f&&(U=C),(Se=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=Se}c=L===-1||U===-1?null:{start:L,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(_m={focusedElem:i,selectionRange:c},xs=!1,Ie=a;Ie!==null;)if(a=Ie,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Ie=i;else for(;Ie!==null;){a=Ie;try{var Ce=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Pe=Ce.memoizedProps,kt=Ce.memoizedState,G=a.stateNode,$=G.getSnapshotBeforeUpdate(a.elementType===a.type?Pe:_r(a.type,Pe),kt);G.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){At(a,a.return,fe)}if(i=a.sibling,i!==null){i.return=a.return,Ie=i;break}Ie=a.return}return Ce=ZE,ZE=!1,Ce}function Bc(i,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var _=g.destroy;g.destroy=void 0,_!==void 0&&og(a,c,_)}g=g.next}while(g!==f)}}function oh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function ag(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function eS(i){var a=i.alternate;a!==null&&(i.alternate=null,eS(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Qr],delete a[Nc],delete a[xm],delete a[VN],delete a[jN])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function tS(i){return i.tag===5||i.tag===3||i.tag===4}function nS(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||tS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lg(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Vd));else if(f!==4&&(i=i.child,i!==null))for(lg(i,a,c),i=i.sibling;i!==null;)lg(i,a,c),i=i.sibling}function cg(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(cg(i,a,c),i=i.sibling;i!==null;)cg(i,a,c),i=i.sibling}var rn=null,wr=!1;function Ci(i,a,c){for(c=c.child;c!==null;)rS(i,a,c),c=c.sibling}function rS(i,a,c){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(wo,c)}catch{}switch(c.tag){case 5:pn||el(c,a);case 6:var f=rn,g=wr;rn=null,Ci(i,a,c),rn=f,wr=g,rn!==null&&(wr?(i=rn,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):rn.removeChild(c.stateNode));break;case 18:rn!==null&&(wr?(i=rn,c=c.stateNode,i.nodeType===8?Sm(i.parentNode,c):i.nodeType===1&&Sm(i,c),gi(i)):Sm(rn,c.stateNode));break;case 4:f=rn,g=wr,rn=c.stateNode.containerInfo,wr=!0,Ci(i,a,c),rn=f,wr=g;break;case 0:case 11:case 14:case 15:if(!pn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,C=_.destroy;_=_.tag,C!==void 0&&((_&2)!==0||(_&4)!==0)&&og(c,a,C),g=g.next}while(g!==f)}Ci(i,a,c);break;case 1:if(!pn&&(el(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(L){At(c,a,L)}Ci(i,a,c);break;case 21:Ci(i,a,c);break;case 22:c.mode&1?(pn=(f=pn)||c.memoizedState!==null,Ci(i,a,c),pn=f):Ci(i,a,c);break;default:Ci(i,a,c)}}function sS(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new ek),a.forEach(function(f){var g=uk.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}}function Er(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var _=i,C=a,L=C;e:for(;L!==null;){switch(L.tag){case 5:rn=L.stateNode,wr=!1;break e;case 3:rn=L.stateNode.containerInfo,wr=!0;break e;case 4:rn=L.stateNode.containerInfo,wr=!0;break e}L=L.return}if(rn===null)throw Error(t(160));rS(_,C,g),rn=null,wr=!1;var U=g.alternate;U!==null&&(U.return=null),g.return=null}catch(Y){At(g,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)iS(a,i),a=a.sibling}function iS(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Er(a,i),Jr(i),f&4){try{Bc(3,i,i.return),oh(3,i)}catch(Pe){At(i,i.return,Pe)}try{Bc(5,i,i.return)}catch(Pe){At(i,i.return,Pe)}}break;case 1:Er(a,i),Jr(i),f&512&&c!==null&&el(c,c.return);break;case 5:if(Er(a,i),Jr(i),f&512&&c!==null&&el(c,c.return),i.flags&32){var g=i.stateNode;try{mo(g,"")}catch(Pe){At(i,i.return,Pe)}}if(f&4&&(g=i.stateNode,g!=null)){var _=i.memoizedProps,C=c!==null?c.memoizedProps:_,L=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{L==="input"&&_.type==="radio"&&_.name!=null&&xn(g,_),Ea(L,C);var Y=Ea(L,_);for(C=0;C<U.length;C+=2){var le=U[C],de=U[C+1];le==="style"?wa(g,de):le==="dangerouslySetInnerHTML"?ud(g,de):le==="children"?mo(g,de):B(g,le,de,Y)}switch(L){case"input":Tn(g,_);break;case"textarea":cd(g,_);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var Se=_.value;Se!=null?en(g,!!_.multiple,Se,!1):ae!==!!_.multiple&&(_.defaultValue!=null?en(g,!!_.multiple,_.defaultValue,!0):en(g,!!_.multiple,_.multiple?[]:"",!1))}g[Nc]=_}catch(Pe){At(i,i.return,Pe)}}break;case 6:if(Er(a,i),Jr(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,_=i.memoizedProps;try{g.nodeValue=_}catch(Pe){At(i,i.return,Pe)}}break;case 3:if(Er(a,i),Jr(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{gi(a.containerInfo)}catch(Pe){At(i,i.return,Pe)}break;case 4:Er(a,i),Jr(i);break;case 13:Er(a,i),Jr(i),g=i.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(hg=mt())),f&4&&sS(i);break;case 22:if(le=c!==null&&c.memoizedState!==null,i.mode&1?(pn=(Y=pn)||le,Er(a,i),pn=Y):Er(a,i),Jr(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!le&&(i.mode&1)!==0)for(Ie=i,le=i.child;le!==null;){for(de=Ie=le;Ie!==null;){switch(ae=Ie,Se=ae.child,ae.tag){case 0:case 11:case 14:case 15:Bc(4,ae,ae.return);break;case 1:el(ae,ae.return);var Ce=ae.stateNode;if(typeof Ce.componentWillUnmount=="function"){f=ae,c=ae.return;try{a=f,Ce.props=a.memoizedProps,Ce.state=a.memoizedState,Ce.componentWillUnmount()}catch(Pe){At(f,c,Pe)}}break;case 5:el(ae,ae.return);break;case 22:if(ae.memoizedState!==null){lS(de);continue}}Se!==null?(Se.return=ae,Ie=Se):lS(de)}le=le.sibling}e:for(le=null,de=i;;){if(de.tag===5){if(le===null){le=de;try{g=de.stateNode,Y?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(L=de.stateNode,U=de.memoizedProps.style,C=U!=null&&U.hasOwnProperty("display")?U.display:null,L.style.display=ai("display",C))}catch(Pe){At(i,i.return,Pe)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=Y?"":de.memoizedProps}catch(Pe){At(i,i.return,Pe)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===i)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===i)break e;for(;de.sibling===null;){if(de.return===null||de.return===i)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Er(a,i),Jr(i),f&4&&sS(i);break;case 21:break;default:Er(a,i),Jr(i)}}function Jr(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(tS(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(mo(g,""),f.flags&=-33);var _=nS(i);cg(i,_,g);break;case 3:case 4:var C=f.stateNode.containerInfo,L=nS(i);lg(i,L,C);break;default:throw Error(t(161))}}catch(U){At(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function nk(i,a,c){Ie=i,oS(i)}function oS(i,a,c){for(var f=(i.mode&1)!==0;Ie!==null;){var g=Ie,_=g.child;if(g.tag===22&&f){var C=g.memoizedState!==null||ih;if(!C){var L=g.alternate,U=L!==null&&L.memoizedState!==null||pn;L=ih;var Y=pn;if(ih=C,(pn=U)&&!Y)for(Ie=g;Ie!==null;)C=Ie,U=C.child,C.tag===22&&C.memoizedState!==null?cS(g):U!==null?(U.return=C,Ie=U):cS(g);for(;_!==null;)Ie=_,oS(_),_=_.sibling;Ie=g,ih=L,pn=Y}aS(i)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,Ie=_):aS(i)}}function aS(i){for(;Ie!==null;){var a=Ie;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:pn||oh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!pn)if(c===null)f.componentDidMount();else{var g=a.elementType===a.type?c.memoizedProps:_r(a.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&lE(a,_,f);break;case 3:var C=a.updateQueue;if(C!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}lE(a,C,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&c.focus();break;case"img":U.src&&(c.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var le=Y.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&gi(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}pn||a.flags&512&&ag(a)}catch(ae){At(a,a.return,ae)}}if(a===i){Ie=null;break}if(c=a.sibling,c!==null){c.return=a.return,Ie=c;break}Ie=a.return}}function lS(i){for(;Ie!==null;){var a=Ie;if(a===i){Ie=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Ie=c;break}Ie=a.return}}function cS(i){for(;Ie!==null;){var a=Ie;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{oh(4,a)}catch(U){At(a,c,U)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(U){At(a,g,U)}}var _=a.return;try{ag(a)}catch(U){At(a,_,U)}break;case 5:var C=a.return;try{ag(a)}catch(U){At(a,C,U)}}}catch(U){At(a,a.return,U)}if(a===i){Ie=null;break}var L=a.sibling;if(L!==null){L.return=a.return,Ie=L;break}Ie=a.return}}var rk=Math.ceil,ah=K.ReactCurrentDispatcher,ug=K.ReactCurrentOwner,sr=K.ReactCurrentBatchConfig,nt=0,Kt=null,Vt=null,sn=0,Gn=0,tl=Ei(0),$t=0,$c=null,Lo=0,lh=0,dg=0,Wc=null,Dn=null,hg=0,nl=1/0,Ds=null,ch=!1,fg=null,Ri=null,uh=!1,bi=null,dh=0,Hc=0,pg=null,hh=-1,fh=0;function Cn(){return(nt&6)!==0?mt():hh!==-1?hh:hh=mt()}function Ai(i){return(i.mode&1)===0?1:(nt&2)!==0&&sn!==0?sn&-sn:UN.transition!==null?(fh===0&&(fh=hc()),fh):(i=Xe,i!==0||(i=window.event,i=i===void 0?16:Na(i.type)),i)}function Sr(i,a,c,f){if(50<Hc)throw Hc=0,pg=null,Error(t(185));To(i,c,f),((nt&2)===0||i!==Kt)&&(i===Kt&&((nt&2)===0&&(lh|=c),$t===4&&Pi(i,sn)),Mn(i,f),c===1&&nt===0&&(a.mode&1)===0&&(nl=mt()+500,zd&&xi()))}function Mn(i,a){var c=i.callbackNode;xo(i,a);var f=ws(i,i===Kt?sn:0);if(f===0)c!==null&&Ta(c),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(c!=null&&Ta(c),a===1)i.tag===0?FN(dS.bind(null,i)):Yw(dS.bind(null,i)),ON(function(){(nt&6)===0&&xi()}),c=null;else{switch(Fr(f)){case 1:c=Ia;break;case 4:c=cc;break;case 16:c=_o;break;case 536870912:c=Ca;break;default:c=_o}c=_S(c,uS.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function uS(i,a){if(hh=-1,fh=0,(nt&6)!==0)throw Error(t(327));var c=i.callbackNode;if(rl()&&i.callbackNode!==c)return null;var f=ws(i,i===Kt?sn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=ph(i,f);else{a=f;var g=nt;nt|=2;var _=fS();(Kt!==i||sn!==a)&&(Ds=null,nl=mt()+500,jo(i,a));do try{ok();break}catch(L){hS(i,L)}while(!0);km(),ah.current=_,nt=g,Vt!==null?a=0:(Kt=null,sn=0,a=$t)}if(a!==0){if(a===2&&(g=dc(i),g!==0&&(f=g,a=mg(i,g))),a===1)throw c=$c,jo(i,0),Pi(i,f),Mn(i,mt()),c;if(a===6)Pi(i,f);else{if(g=i.current.alternate,(f&30)===0&&!sk(g)&&(a=ph(i,f),a===2&&(_=dc(i),_!==0&&(f=_,a=mg(i,_))),a===1))throw c=$c,jo(i,0),Pi(i,f),Mn(i,mt()),c;switch(i.finishedWork=g,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Fo(i,Dn,Ds);break;case 3:if(Pi(i,f),(f&130023424)===f&&(a=hg+500-mt(),10<a)){if(ws(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Cn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Em(Fo.bind(null,i,Dn,Ds),a);break}Fo(i,Dn,Ds);break;case 4:if(Pi(i,f),(f&4194240)===f)break;for(a=i.eventTimes,g=-1;0<f;){var C=31-Fn(f);_=1<<C,C=a[C],C>g&&(g=C),f&=~_}if(f=g,f=mt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*rk(f/1960))-f,10<f){i.timeoutHandle=Em(Fo.bind(null,i,Dn,Ds),f);break}Fo(i,Dn,Ds);break;case 5:Fo(i,Dn,Ds);break;default:throw Error(t(329))}}}return Mn(i,mt()),i.callbackNode===c?uS.bind(null,i):null}function mg(i,a){var c=Wc;return i.current.memoizedState.isDehydrated&&(jo(i,a).flags|=256),i=ph(i,a),i!==2&&(a=Dn,Dn=c,a!==null&&gg(a)),i}function gg(i){Dn===null?Dn=i:Dn.push.apply(Dn,i)}function sk(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],_=g.getSnapshot;g=g.value;try{if(!yr(_(),g))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Pi(i,a){for(a&=~dg,a&=~lh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-Fn(a),f=1<<c;i[c]=-1,a&=~f}}function dS(i){if((nt&6)!==0)throw Error(t(327));rl();var a=ws(i,0);if((a&1)===0)return Mn(i,mt()),null;var c=ph(i,a);if(i.tag!==0&&c===2){var f=dc(i);f!==0&&(a=f,c=mg(i,f))}if(c===1)throw c=$c,jo(i,0),Pi(i,a),Mn(i,mt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Fo(i,Dn,Ds),Mn(i,mt()),null}function yg(i,a){var c=nt;nt|=1;try{return i(a)}finally{nt=c,nt===0&&(nl=mt()+500,zd&&xi())}}function Vo(i){bi!==null&&bi.tag===0&&(nt&6)===0&&rl();var a=nt;nt|=1;var c=sr.transition,f=Xe;try{if(sr.transition=null,Xe=1,i)return i()}finally{Xe=f,sr.transition=c,nt=a,(nt&6)===0&&xi()}}function vg(){Gn=tl.current,yt(tl)}function jo(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,MN(c)),Vt!==null)for(c=Vt.return;c!==null;){var f=c;switch(Rm(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Fd();break;case 3:Ja(),yt(Pn),yt(dn),Um();break;case 5:jm(f);break;case 4:Ja();break;case 13:yt(It);break;case 19:yt(It);break;case 10:Dm(f.type._context);break;case 22:case 23:vg()}c=c.return}if(Kt=i,Vt=i=Ni(i.current,null),sn=Gn=a,$t=0,$c=null,dg=lh=Lo=0,Dn=Wc=null,Do!==null){for(a=0;a<Do.length;a++)if(c=Do[a],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,_=c.pending;if(_!==null){var C=_.next;_.next=g,f.next=C}c.pending=f}Do=null}return i}function hS(i,a){do{var c=Vt;try{if(km(),Xd.current=th,Jd){for(var f=Ct.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Jd=!1}if(Oo=0,qt=Bt=Ct=null,Vc=!1,jc=0,ug.current=null,c===null||c.return===null){$t=1,$c=a,Vt=null;break}e:{var _=i,C=c.return,L=c,U=a;if(a=sn,L.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var Y=U,le=L,de=le.tag;if((le.mode&1)===0&&(de===0||de===11||de===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var Se=VE(C);if(Se!==null){Se.flags&=-257,jE(Se,C,L,_,a),Se.mode&1&&LE(_,Y,a),a=Se,U=Y;var Ce=a.updateQueue;if(Ce===null){var Pe=new Set;Pe.add(U),a.updateQueue=Pe}else Ce.add(U);break e}else{if((a&1)===0){LE(_,Y,a),_g();break e}U=Error(t(426))}}else if(St&&L.mode&1){var kt=VE(C);if(kt!==null){(kt.flags&65536)===0&&(kt.flags|=256),jE(kt,C,L,_,a),Pm(Za(U,L));break e}}_=U=Za(U,L),$t!==4&&($t=2),Wc===null?Wc=[_]:Wc.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var G=ME(_,U,a);aE(_,G);break e;case 1:L=U;var $=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Ri===null||!Ri.has(Q)))){_.flags|=65536,a&=-a,_.lanes|=a;var fe=OE(_,L,a);aE(_,fe);break e}}_=_.return}while(_!==null)}mS(c)}catch(Ne){a=Ne,Vt===c&&c!==null&&(Vt=c=c.return);continue}break}while(!0)}function fS(){var i=ah.current;return ah.current=th,i===null?th:i}function _g(){($t===0||$t===3||$t===2)&&($t=4),Kt===null||(Lo&268435455)===0&&(lh&268435455)===0||Pi(Kt,sn)}function ph(i,a){var c=nt;nt|=2;var f=fS();(Kt!==i||sn!==a)&&(Ds=null,jo(i,a));do try{ik();break}catch(g){hS(i,g)}while(!0);if(km(),nt=c,ah.current=f,Vt!==null)throw Error(t(261));return Kt=null,sn=0,$t}function ik(){for(;Vt!==null;)pS(Vt)}function ok(){for(;Vt!==null&&!vo();)pS(Vt)}function pS(i){var a=vS(i.alternate,i,Gn);i.memoizedProps=i.pendingProps,a===null?mS(i):Vt=a,ug.current=null}function mS(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=JN(c,a,Gn),c!==null){Vt=c;return}}else{if(c=ZN(c,a),c!==null){c.flags&=32767,Vt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{$t=6,Vt=null;return}}if(a=a.sibling,a!==null){Vt=a;return}Vt=a=i}while(a!==null);$t===0&&($t=5)}function Fo(i,a,c){var f=Xe,g=sr.transition;try{sr.transition=null,Xe=1,ak(i,a,c,f)}finally{sr.transition=g,Xe=f}return null}function ak(i,a,c,f){do rl();while(bi!==null);if((nt&6)!==0)throw Error(t(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=c.lanes|c.childLanes;if(im(i,_),i===Kt&&(Vt=Kt=null,sn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||uh||(uh=!0,_S(_o,function(){return rl(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=sr.transition,sr.transition=null;var C=Xe;Xe=1;var L=nt;nt|=4,ug.current=null,tk(i,c),iS(c,i),RN(_m),xs=!!vm,_m=vm=null,i.current=c,nk(c),_s(),nt=L,Xe=C,sr.transition=_}else i.current=c;if(uh&&(uh=!1,bi=i,dh=g),_=i.pendingLanes,_===0&&(Ri=null),Ed(c.stateNode),Mn(i,mt()),a!==null)for(f=i.onRecoverableError,c=0;c<a.length;c++)g=a[c],f(g.value,{componentStack:g.stack,digest:g.digest});if(ch)throw ch=!1,i=fg,fg=null,i;return(dh&1)!==0&&i.tag!==0&&rl(),_=i.pendingLanes,(_&1)!==0?i===pg?Hc++:(Hc=0,pg=i):Hc=0,xi(),null}function rl(){if(bi!==null){var i=Fr(dh),a=sr.transition,c=Xe;try{if(sr.transition=null,Xe=16>i?16:i,bi===null)var f=!1;else{if(i=bi,bi=null,dh=0,(nt&6)!==0)throw Error(t(331));var g=nt;for(nt|=4,Ie=i.current;Ie!==null;){var _=Ie,C=_.child;if((Ie.flags&16)!==0){var L=_.deletions;if(L!==null){for(var U=0;U<L.length;U++){var Y=L[U];for(Ie=Y;Ie!==null;){var le=Ie;switch(le.tag){case 0:case 11:case 15:Bc(8,le,_)}var de=le.child;if(de!==null)de.return=le,Ie=de;else for(;Ie!==null;){le=Ie;var ae=le.sibling,Se=le.return;if(eS(le),le===Y){Ie=null;break}if(ae!==null){ae.return=Se,Ie=ae;break}Ie=Se}}}var Ce=_.alternate;if(Ce!==null){var Pe=Ce.child;if(Pe!==null){Ce.child=null;do{var kt=Pe.sibling;Pe.sibling=null,Pe=kt}while(Pe!==null)}}Ie=_}}if((_.subtreeFlags&2064)!==0&&C!==null)C.return=_,Ie=C;else e:for(;Ie!==null;){if(_=Ie,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Bc(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,Ie=G;break e}Ie=_.return}}var $=i.current;for(Ie=$;Ie!==null;){C=Ie;var Q=C.child;if((C.subtreeFlags&2064)!==0&&Q!==null)Q.return=C,Ie=Q;else e:for(C=$;Ie!==null;){if(L=Ie,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:oh(9,L)}}catch(Ne){At(L,L.return,Ne)}if(L===C){Ie=null;break e}var fe=L.sibling;if(fe!==null){fe.return=L.return,Ie=fe;break e}Ie=L.return}}if(nt=g,xi(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(wo,i)}catch{}f=!0}return f}finally{Xe=c,sr.transition=a}}return!1}function gS(i,a,c){a=Za(c,a),a=ME(i,a,1),i=Ii(i,a,1),a=Cn(),i!==null&&(To(i,1,a),Mn(i,a))}function At(i,a,c){if(i.tag===3)gS(i,i,c);else for(;a!==null;){if(a.tag===3){gS(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ri===null||!Ri.has(f))){i=Za(c,i),i=OE(a,i,1),a=Ii(a,i,1),i=Cn(),a!==null&&(To(a,1,i),Mn(a,i));break}}a=a.return}}function lk(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),a=Cn(),i.pingedLanes|=i.suspendedLanes&c,Kt===i&&(sn&c)===c&&($t===4||$t===3&&(sn&130023424)===sn&&500>mt()-hg?jo(i,0):dg|=c),Mn(i,a)}function yS(i,a){a===0&&((i.mode&1)===0?a=1:(a=fi,fi<<=1,(fi&130023424)===0&&(fi=4194304)));var c=Cn();i=Ps(i,a),i!==null&&(To(i,a,c),Mn(i,c))}function ck(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),yS(i,c)}function uk(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),yS(i,c)}var vS;vS=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||Pn.current)kn=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return kn=!1,XN(i,a,c);kn=(i.flags&131072)!==0}else kn=!1,St&&(a.flags&1048576)!==0&&Xw(a,$d,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;sh(i,a),i=a.pendingProps;var g=Ha(a,dn.current);Xa(a,c),g=$m(null,a,f,i,g,c);var _=Wm();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Nn(f)?(_=!0,Ud(a)):_=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Lm(a),g.updater=nh,a.stateNode=g,g._reactInternals=a,Ym(a,f,i,c),a=eg(null,a,f,!0,_,c)):(a.tag=0,St&&_&&Cm(a),In(null,a,g,c),a=a.child),a;case 16:f=a.elementType;e:{switch(sh(i,a),i=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=hk(f),i=_r(f,i),g){case 0:a=Zm(null,a,f,i,c);break e;case 1:a=WE(null,a,f,i,c);break e;case 11:a=FE(null,a,f,i,c);break e;case 14:a=UE(null,a,f,_r(f.type,i),c);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:_r(f,g),Zm(i,a,f,g,c);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:_r(f,g),WE(i,a,f,g,c);case 3:e:{if(HE(a),i===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,g=_.element,oE(i,a),Qd(a,f,null,c);var C=a.memoizedState;if(f=C.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){g=Za(Error(t(423)),a),a=GE(i,a,f,c,g);break e}else if(f!==g){g=Za(Error(t(424)),a),a=GE(i,a,f,c,g);break e}else for(Hn=wi(a.stateNode.containerInfo.firstChild),Wn=a,St=!0,vr=null,c=sE(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ka(),f===g){a=ks(i,a,c);break e}In(i,a,f,c)}a=a.child}return a;case 5:return cE(a),i===null&&Am(a),f=a.type,g=a.pendingProps,_=i!==null?i.memoizedProps:null,C=g.children,wm(f,g)?C=null:_!==null&&wm(f,_)&&(a.flags|=32),$E(i,a),In(i,a,C,c),a.child;case 6:return i===null&&Am(a),null;case 13:return qE(i,a,c);case 4:return Vm(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Qa(a,null,f,c):In(i,a,f,c),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:_r(f,g),FE(i,a,f,g,c);case 7:return In(i,a,a.pendingProps,c),a.child;case 8:return In(i,a,a.pendingProps.children,c),a.child;case 12:return In(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,_=a.memoizedProps,C=g.value,ft(Gd,f._currentValue),f._currentValue=C,_!==null)if(yr(_.value,C)){if(_.children===g.children&&!Pn.current){a=ks(i,a,c);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var L=_.dependencies;if(L!==null){C=_.child;for(var U=L.firstContext;U!==null;){if(U.context===f){if(_.tag===1){U=Ns(-1,c&-c),U.tag=2;var Y=_.updateQueue;if(Y!==null){Y=Y.shared;var le=Y.pending;le===null?U.next=U:(U.next=le.next,le.next=U),Y.pending=U}}_.lanes|=c,U=_.alternate,U!==null&&(U.lanes|=c),Mm(_.return,c,a),L.lanes|=c;break}U=U.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(t(341));C.lanes|=c,L=C.alternate,L!==null&&(L.lanes|=c),Mm(C,c,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}In(i,a,g.children,c),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,Xa(a,c),g=nr(g),f=f(g),a.flags|=1,In(i,a,f,c),a.child;case 14:return f=a.type,g=_r(f,a.pendingProps),g=_r(f.type,g),UE(i,a,f,g,c);case 15:return zE(i,a,a.type,a.pendingProps,c);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:_r(f,g),sh(i,a),a.tag=1,Nn(f)?(i=!0,Ud(a)):i=!1,Xa(a,c),kE(a,f,g),Ym(a,f,g,c),eg(null,a,f,!0,i,c);case 19:return QE(i,a,c);case 22:return BE(i,a,c)}throw Error(t(156,a.tag))};function _S(i,a){return lc(i,a)}function dk(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(i,a,c,f){return new dk(i,a,c,f)}function wg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hk(i){if(typeof i=="function")return wg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===_e)return 14}return 2}function Ni(i,a){var c=i.alternate;return c===null?(c=ir(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function mh(i,a,c,f,g,_){var C=2;if(f=i,typeof i=="function")wg(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case P:return Uo(c.children,g,_,a);case R:C=8,g|=8;break;case k:return i=ir(12,c,a,g|2),i.elementType=k,i.lanes=_,i;case D:return i=ir(13,c,a,g),i.elementType=D,i.lanes=_,i;case me:return i=ir(19,c,a,g),i.elementType=me,i.lanes=_,i;case we:return gh(c,g,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:C=10;break e;case O:C=9;break e;case F:C=11;break e;case _e:C=14;break e;case pe:C=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=ir(C,c,a,g),a.elementType=i,a.type=f,a.lanes=_,a}function Uo(i,a,c,f){return i=ir(7,i,f,a),i.lanes=c,i}function gh(i,a,c,f){return i=ir(22,i,f,a),i.elementType=we,i.lanes=c,i.stateNode={isHidden:!1},i}function Eg(i,a,c){return i=ir(6,i,null,a),i.lanes=c,i}function Sg(i,a,c){return a=ir(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function fk(i,a,c,f,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fc(0),this.expirationTimes=fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function xg(i,a,c,f,g,_,C,L,U){return i=new fk(i,a,c,L,U),a===1?(a=1,_===!0&&(a|=8)):a=0,_=ir(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lm(_),i}function pk(i,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:f==null?null:""+f,children:i,containerInfo:a,implementation:c}}function wS(i){if(!i)return Si;i=i._reactInternals;e:{if(mr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Nn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(Nn(c))return Kw(i,c,a)}return a}function ES(i,a,c,f,g,_,C,L,U){return i=xg(c,f,!0,i,g,_,C,L,U),i.context=wS(null),c=i.current,f=Cn(),g=Ai(c),_=Ns(f,g),_.callback=a??null,Ii(c,_,g),i.current.lanes=g,To(i,g,f),Mn(i,f),i}function yh(i,a,c,f){var g=a.current,_=Cn(),C=Ai(g);return c=wS(c),a.context===null?a.context=c:a.pendingContext=c,a=Ns(_,C),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Ii(g,a,C),i!==null&&(Sr(i,g,C,_),Kd(i,g,C)),C}function vh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function SS(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Tg(i,a){SS(i,a),(i=i.alternate)&&SS(i,a)}function mk(){return null}var xS=typeof reportError=="function"?reportError:function(i){console.error(i)};function Ig(i){this._internalRoot=i}_h.prototype.render=Ig.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));yh(i,a,null,null)},_h.prototype.unmount=Ig.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Vo(function(){yh(null,i,null,null)}),a[Cs]=null}};function _h(i){this._internalRoot=i}_h.prototype.unstable_scheduleHydration=function(i){if(i){var a=yc();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Un.length&&a!==0&&a<Un[c].priority;c++);Un.splice(c,0,i),c===0&&Aa(i)}};function Cg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function wh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function TS(){}function gk(i,a,c,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var Y=vh(C);_.call(Y)}}var C=ES(a,f,i,0,null,!1,!1,"",TS);return i._reactRootContainer=C,i[Cs]=C.current,Ac(i.nodeType===8?i.parentNode:i),Vo(),C}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var L=f;f=function(){var Y=vh(U);L.call(Y)}}var U=xg(i,0,!1,null,null,!1,!1,"",TS);return i._reactRootContainer=U,i[Cs]=U.current,Ac(i.nodeType===8?i.parentNode:i),Vo(function(){yh(a,U,c,f)}),U}function Eh(i,a,c,f,g){var _=c._reactRootContainer;if(_){var C=_;if(typeof g=="function"){var L=g;g=function(){var U=vh(C);L.call(U)}}yh(a,C,i,g)}else C=gk(c,a,i,g,f);return vh(C)}mc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=it(a.pendingLanes);c!==0&&(pc(a,c|1),Mn(a,mt()),(nt&6)===0&&(nl=mt()+500,xi()))}break;case 13:Vo(function(){var f=Ps(i,1);if(f!==null){var g=Cn();Sr(f,i,1,g)}}),Tg(i,1)}},Ra=function(i){if(i.tag===13){var a=Ps(i,134217728);if(a!==null){var c=Cn();Sr(a,i,134217728,c)}Tg(i,134217728)}},gc=function(i){if(i.tag===13){var a=Ai(i),c=Ps(i,a);if(c!==null){var f=Cn();Sr(c,i,a,f)}Tg(i,a)}},yc=function(){return Xe},vc=function(i,a){var c=Xe;try{return Xe=i,a()}finally{Xe=c}},gs=function(i,a,c){switch(a){case"input":if(Tn(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=jd(f);if(!g)throw Error(t(90));$e(f),Tn(f,g)}}}break;case"textarea":cd(i,c);break;case"select":a=c.value,a!=null&&en(i,!!c.multiple,a,!1)}},hd=yg,fd=Vo;var yk={usingClientEntryPoint:!1,Events:[kc,$a,jd,ci,ui,yg]},Gc={findFiberByHostInstance:Ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vk={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=wd(i),i===null?null:i.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||mk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{wo=Sh.inject(vk),jn=Sh}catch{}}return On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yk,On.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cg(a))throw Error(t(200));return pk(i,a,null,c)},On.createRoot=function(i,a){if(!Cg(i))throw Error(t(299));var c=!1,f="",g=xS;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=xg(i,1,!1,null,null,c,!1,f,g),i[Cs]=a.current,Ac(i.nodeType===8?i.parentNode:i),new Ig(a)},On.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=wd(a),i=i===null?null:i.stateNode,i},On.flushSync=function(i){return Vo(i)},On.hydrate=function(i,a,c){if(!wh(a))throw Error(t(200));return Eh(null,i,a,!0,c)},On.hydrateRoot=function(i,a,c){if(!Cg(i))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,g=!1,_="",C=xS;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),a=ES(a,null,i,1,c??null,g,!1,_,C),i[Cs]=a.current,Ac(i),f)for(i=0;i<f.length;i++)c=f[i],g=c._getVersion,g=g(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,g]:a.mutableSourceEagerHydrationData.push(c,g);return new _h(a)},On.render=function(i,a,c){if(!wh(a))throw Error(t(200));return Eh(null,i,a,!1,c)},On.unmountComponentAtNode=function(i){if(!wh(i))throw Error(t(40));return i._reactRootContainer?(Vo(function(){Eh(null,null,i,!1,function(){i._reactRootContainer=null,i[Cs]=null})}),!0):!1},On.unstable_batchedUpdates=yg,On.unstable_renderSubtreeIntoContainer=function(i,a,c,f){if(!wh(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Eh(i,a,c,!1,f)},On.version="18.3.1-next-f1338f8080-20240426",On}var kS;function ZT(){if(kS)return Ag.exports;kS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ag.exports=Ck(),Ag.exports}var DS;function Rk(){if(DS)return xh;DS=1;var n=ZT();return xh.createRoot=n.createRoot,xh.hydrateRoot=n.hydrateRoot,xh}var bk=Rk();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pk=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),MS=n=>{const e=Pk(n);return e.charAt(0).toUpperCase()+e.slice(1)},eI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=S.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},d)=>S.createElement("svg",{ref:d,...Nk,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:eI("lucide",s),...u},[...l.map(([p,m])=>S.createElement(p,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=(n,e)=>{const t=S.forwardRef(({className:r,...s},o)=>S.createElement(kk,{ref:o,iconNode:e,className:eI(`lucide-${Ak(MS(n))}`,`lucide-${n}`,r),...s}));return t.displayName=MS(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tI=Sn("arrow-left",Dk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],nI=Sn("calendar",Mk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],kg=Sn("camera",Ok);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Vk=Sn("check",Lk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rI=Sn("chevron-down",jk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Uk=Sn("chevron-right",Fk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Bk=Sn("chevron-up",zk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sI=Sn("funnel",$k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Hk=Sn("grip-vertical",Wk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],OS=Sn("log-out",Gk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],iI=Sn("message-square",qk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Qk=Sn("plus",Kk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],wu=Sn("star",Yk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Jk=Sn("upload",Xk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],oI=Sn("user",Zk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aI=Sn("x",eD);function lI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=lI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function cI(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=lI(n))&&(r&&(r+=" "),r+=e);return r}const tD=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},nD=(n,e)=>({classGroupId:n,validator:e}),uI=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),of="-",LS=[],rD="arbitrary..",sD=n=>{const e=oD(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return iD(l);const u=l.split(of),d=u[0]===""&&u.length>1?1:0;return dI(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],p=t[l];return d?p?tD(p,d):d:p||LS}return t[l]||LS}}},dI=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const s=n[e],o=t.nextPart.get(s);if(o){const p=dI(n,e+1,o);if(p)return p}const l=t.validators;if(l===null)return;const u=e===0?n.join(of):n.slice(e).join(of),d=l.length;for(let p=0;p<d;p++){const m=l[p];if(m.validator(u))return m.classGroupId}},iD=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?rD+r:void 0})(),oD=n=>{const{theme:e,classGroups:t}=n;return aD(t,e)},aD=(n,e)=>{const t=uI();for(const r in n){const s=n[r];vv(s,t,r,e)}return t},vv=(n,e,t,r)=>{const s=n.length;for(let o=0;o<s;o++){const l=n[o];lD(l,e,t,r)}},lD=(n,e,t,r)=>{if(typeof n=="string"){cD(n,e,t);return}if(typeof n=="function"){uD(n,e,t,r);return}dD(n,e,t,r)},cD=(n,e,t)=>{const r=n===""?e:hI(e,n);r.classGroupId=t},uD=(n,e,t,r)=>{if(hD(n)){vv(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(nD(t,n))},dD=(n,e,t,r)=>{const s=Object.entries(n),o=s.length;for(let l=0;l<o;l++){const[u,d]=s[l];vv(d,hI(e,u),t,r)}},hI=(n,e)=>{let t=n;const r=e.split(of),s=r.length;for(let o=0;o<s;o++){const l=r[o];let u=t.nextPart.get(l);u||(u=uI(),t.nextPart.set(l,u)),t=u}return t},hD=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,fD=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const s=(o,l)=>{t[o]=l,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(o){let l=t[o];if(l!==void 0)return l;if((l=r[o])!==void 0)return s(o,l),l},set(o,l){o in t?t[o]=l:s(o,l)}}},yy="!",VS=":",pD=[],jS=(n,e,t,r,s)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:s}),mD=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let l=0,u=0,d=0,p;const m=s.length;for(let T=0;T<m;T++){const b=s[T];if(l===0&&u===0){if(b===VS){o.push(s.slice(d,T)),d=T+1;continue}if(b==="/"){p=T;continue}}b==="["?l++:b==="]"?l--:b==="("?u++:b===")"&&u--}const y=o.length===0?s:s.slice(d);let E=y,I=!1;y.endsWith(yy)?(E=y.slice(0,-1),I=!0):y.startsWith(yy)&&(E=y.slice(1),I=!0);const A=p&&p>d?p-d:void 0;return jS(o,I,E,A)};if(e){const s=e+VS,o=r;r=l=>l.startsWith(s)?o(l.slice(s.length)):jS(pD,!1,l,void 0,!0)}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},gD=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let s=[];for(let o=0;o<t.length;o++){const l=t[o],u=l[0]==="[",d=e.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},yD=n=>({cache:fD(n.cacheSize),parseClassName:mD(n),sortModifiers:gD(n),...sD(n)}),vD=/\s+/,_D=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,l=[],u=n.trim().split(vD);let d="";for(let p=u.length-1;p>=0;p-=1){const m=u[p],{isExternal:y,modifiers:E,hasImportantModifier:I,baseClassName:A,maybePostfixModifierPosition:T}=t(m);if(y){d=m+(d.length>0?" "+d:d);continue}let b=!!T,j=r(b?A.substring(0,T):A);if(!j){if(!b){d=m+(d.length>0?" "+d:d);continue}if(j=r(A),!j){d=m+(d.length>0?" "+d:d);continue}b=!1}const V=E.length===0?"":E.length===1?E[0]:o(E).join(":"),B=I?V+yy:V,K=B+j;if(l.indexOf(K)>-1)continue;l.push(K);const J=s(j,b);for(let Z=0;Z<J.length;++Z){const P=J[Z];l.push(B+P)}d=m+(d.length>0?" "+d:d)}return d},wD=(...n)=>{let e=0,t,r,s="";for(;e<n.length;)(t=n[e++])&&(r=fI(t))&&(s&&(s+=" "),s+=r);return s},fI=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=fI(n[r]))&&(t&&(t+=" "),t+=e);return t},ED=(n,...e)=>{let t,r,s,o;const l=d=>{const p=e.reduce((m,y)=>y(m),n());return t=yD(p),r=t.cache.get,s=t.cache.set,o=u,u(d)},u=d=>{const p=r(d);if(p)return p;const m=_D(d,t);return s(d,m),m};return o=l,(...d)=>o(wD(...d))},SD=[],Wt=n=>{const e=t=>t[n]||SD;return e.isThemeGetter=!0,e},pI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,mI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,xD=/^\d+\/\d+$/,TD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ID=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,CD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,RD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,sl=n=>xD.test(n),He=n=>!!n&&!Number.isNaN(Number(n)),Di=n=>!!n&&Number.isInteger(Number(n)),Dg=n=>n.endsWith("%")&&He(n.slice(0,-1)),Ms=n=>TD.test(n),AD=()=>!0,PD=n=>ID.test(n)&&!CD.test(n),gI=()=>!1,ND=n=>RD.test(n),kD=n=>bD.test(n),DD=n=>!Re(n)&&!be(n),MD=n=>zl(n,_I,gI),Re=n=>pI.test(n),zo=n=>zl(n,wI,PD),Mg=n=>zl(n,FD,He),FS=n=>zl(n,yI,gI),OD=n=>zl(n,vI,kD),Th=n=>zl(n,EI,ND),be=n=>mI.test(n),Kc=n=>Bl(n,wI),LD=n=>Bl(n,UD),US=n=>Bl(n,yI),VD=n=>Bl(n,_I),jD=n=>Bl(n,vI),Ih=n=>Bl(n,EI,!0),zl=(n,e,t)=>{const r=pI.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Bl=(n,e,t=!1)=>{const r=mI.exec(n);return r?r[1]?e(r[1]):t:!1},yI=n=>n==="position"||n==="percentage",vI=n=>n==="image"||n==="url",_I=n=>n==="length"||n==="size"||n==="bg-size",wI=n=>n==="length",FD=n=>n==="number",UD=n=>n==="family-name",EI=n=>n==="shadow",zD=()=>{const n=Wt("color"),e=Wt("font"),t=Wt("text"),r=Wt("font-weight"),s=Wt("tracking"),o=Wt("leading"),l=Wt("breakpoint"),u=Wt("container"),d=Wt("spacing"),p=Wt("radius"),m=Wt("shadow"),y=Wt("inset-shadow"),E=Wt("text-shadow"),I=Wt("drop-shadow"),A=Wt("blur"),T=Wt("perspective"),b=Wt("aspect"),j=Wt("ease"),V=Wt("animate"),B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...K(),be,Re],Z=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],R=()=>[be,Re,d],k=()=>[sl,"full","auto",...R()],M=()=>[Di,"none","subgrid",be,Re],O=()=>["auto",{span:["full",Di,be,Re]},Di,be,Re],F=()=>[Di,"auto",be,Re],D=()=>["auto","min","max","fr",be,Re],me=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_e=()=>["start","end","center","stretch","center-safe","end-safe"],pe=()=>["auto",...R()],we=()=>[sl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],W=()=>[n,be,Re],ee=()=>[...K(),US,FS,{position:[be,Re]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",VD,MD,{size:[be,Re]}],ne=()=>[Dg,Kc,zo],te=()=>["","none","full",p,be,Re],se=()=>["",He,Kc,zo],he=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>[He,Dg,US,FS],oe=()=>["","none",A,be,Re],ye=()=>["none",He,be,Re],Te=()=>["none",He,be,Re],je=()=>[He,be,Re],$e=()=>[sl,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ms],breakpoint:[Ms],color:[AD],container:[Ms],"drop-shadow":[Ms],ease:["in","out","in-out"],font:[DD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ms],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ms],shadow:[Ms],spacing:["px",He],text:[Ms],"text-shadow":[Ms],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",sl,Re,be,b]}],container:["container"],columns:[{columns:[He,Re,be,u]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[Di,"auto",be,Re]}],basis:[{basis:[sl,"full","auto",u,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,sl,"auto","initial","none",Re]}],grow:[{grow:["",He,be,Re]}],shrink:[{shrink:["",He,be,Re]}],order:[{order:[Di,"first","last","none",be,Re]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...me(),"normal"]}],"justify-items":[{"justify-items":[..._e(),"normal"]}],"justify-self":[{"justify-self":["auto",..._e()]}],"align-content":[{content:["normal",...me()]}],"align-items":[{items:[..._e(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._e(),{baseline:["","last"]}]}],"place-content":[{"place-content":me()}],"place-items":[{"place-items":[..._e(),"baseline"]}],"place-self":[{"place-self":["auto",..._e()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:pe()}],mx:[{mx:pe()}],my:[{my:pe()}],ms:[{ms:pe()}],me:[{me:pe()}],mt:[{mt:pe()}],mr:[{mr:pe()}],mb:[{mb:pe()}],ml:[{ml:pe()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:we()}],w:[{w:[u,"screen",...we()]}],"min-w":[{"min-w":[u,"screen","none",...we()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...we()]}],h:[{h:["screen","lh",...we()]}],"min-h":[{"min-h":["screen","lh","none",...we()]}],"max-h":[{"max-h":["screen","lh",...we()]}],"font-size":[{text:["base",t,Kc,zo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,be,Mg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Dg,Re]}],"font-family":[{font:[LD,Re,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,be,Re]}],"line-clamp":[{"line-clamp":[He,"none",be,Mg]}],leading:[{leading:[o,...R()]}],"list-image":[{"list-image":["none",be,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",be,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",be,zo]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[He,"auto",be,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Di,be,Re],radial:["",be,Re],conic:[Di,be,Re]},jD,OD]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,be,Re]}],"outline-w":[{outline:["",He,Kc,zo]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",m,Ih,Th]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",y,Ih,Th]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[He,zo]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",E,Ih,Th]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[He,be,Re]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":H()}],"mask-image-linear-to-pos":[{"mask-linear-to":H()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":H()}],"mask-image-t-to-pos":[{"mask-t-to":H()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":H()}],"mask-image-r-to-pos":[{"mask-r-to":H()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":H()}],"mask-image-b-to-pos":[{"mask-b-to":H()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":H()}],"mask-image-l-to-pos":[{"mask-l-to":H()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":H()}],"mask-image-x-to-pos":[{"mask-x-to":H()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":H()}],"mask-image-y-to-pos":[{"mask-y-to":H()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[be,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":H()}],"mask-image-radial-to-pos":[{"mask-radial-to":H()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":K()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":H()}],"mask-image-conic-to-pos":[{"mask-conic-to":H()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",be,Re]}],filter:[{filter:["","none",be,Re]}],blur:[{blur:oe()}],brightness:[{brightness:[He,be,Re]}],contrast:[{contrast:[He,be,Re]}],"drop-shadow":[{"drop-shadow":["","none",I,Ih,Th]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",He,be,Re]}],"hue-rotate":[{"hue-rotate":[He,be,Re]}],invert:[{invert:["",He,be,Re]}],saturate:[{saturate:[He,be,Re]}],sepia:[{sepia:["",He,be,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",be,Re]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[He,be,Re]}],"backdrop-contrast":[{"backdrop-contrast":[He,be,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,be,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,be,Re]}],"backdrop-invert":[{"backdrop-invert":["",He,be,Re]}],"backdrop-opacity":[{"backdrop-opacity":[He,be,Re]}],"backdrop-saturate":[{"backdrop-saturate":[He,be,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",He,be,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",be,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",be,Re]}],ease:[{ease:["linear","initial",j,be,Re]}],delay:[{delay:[He,be,Re]}],animate:[{animate:["none",V,be,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[T,be,Re]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:ye()}],"rotate-x":[{"rotate-x":ye()}],"rotate-y":[{"rotate-y":ye()}],"rotate-z":[{"rotate-z":ye()}],scale:[{scale:Te()}],"scale-x":[{"scale-x":Te()}],"scale-y":[{"scale-y":Te()}],"scale-z":[{"scale-z":Te()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[be,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be,Re]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[He,Kc,zo,Mg]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},BD=ED(zD);function ot(...n){return BD(cI(n))}function af({className:n,...e}){return v.jsx("div",{"data-slot":"card",className:ot("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function SI({className:n,...e}){return v.jsx("div",{"data-slot":"card-header",className:ot("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function $D({className:n,...e}){return v.jsx("h4",{"data-slot":"card-title",className:ot("leading-none",n),...e})}function _v({className:n,...e}){return v.jsx("div",{"data-slot":"card-content",className:ot("px-6 [&:last-child]:pb-6",n),...e})}function zS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Zs(...n){return e=>{let t=!1;const r=n.map(s=>{const o=zS(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():zS(n[s],null)}}}}function rt(...n){return S.useCallback(Zs(...n),n)}var WD=Symbol.for("react.lazy"),lf=np[" use ".trim().toString()];function HD(n){return typeof n=="object"&&n!==null&&"then"in n}function xI(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===WD&&"_payload"in n&&HD(n._payload)}function rp(n){const e=GD(n),t=S.forwardRef((r,s)=>{let{children:o,...l}=r;xI(o)&&typeof lf=="function"&&(o=lf(o._payload));const u=S.Children.toArray(o),d=u.find(KD);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}var TI=rp("Slot");function GD(n){const e=S.forwardRef((t,r)=>{let{children:s,...o}=t;if(xI(s)&&typeof lf=="function"&&(s=lf(s._payload)),S.isValidElement(s)){const l=YD(s),u=QD(o,s.props);return s.type!==S.Fragment&&(u.ref=r?Zs(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var qD=Symbol("radix.slottable");function KD(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===qD}function QD(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function YD(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const BS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,$S=cI,II=(n,e)=>t=>{var r;if(e?.variants==null)return $S(n,t?.class,t?.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(p=>{const m=t?.[p],y=o?.[p];if(m===null)return null;const E=BS(m)||BS(y);return s[p][E]}),u=t&&Object.entries(t).reduce((p,m)=>{let[y,E]=m;return E===void 0||(p[y]=E),p},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,m)=>{let{class:y,className:E,...I}=m;return Object.entries(I).every(A=>{let[T,b]=A;return Array.isArray(b)?b.includes({...o,...u}[T]):{...o,...u}[T]===b})?[...p,y,E]:p},[]);return $S(n,l,d,t?.class,t?.className)},XD=II("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ls({className:n,variant:e,asChild:t=!1,...r}){const s=t?TI:"span";return v.jsx(s,{"data-slot":"badge",className:ot(XD({variant:e}),n),...r})}const JD=II("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Rn=S.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},o)=>{const l=r?TI:"button";return v.jsx(l,{"data-slot":"button",className:ot(JD({variant:e,size:t,className:n})),ref:o,...s})});Rn.displayName="Button";var $u=ZT();const ZD=JT($u);function vy(n,[e,t]){return Math.min(t,Math.max(e,n))}function Ae(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function eM(n,e){const t=S.createContext(e),r=o=>{const{children:l,...u}=o,d=S.useMemo(()=>u,Object.values(u));return v.jsx(t.Provider,{value:d,children:l})};r.displayName=n+"Provider";function s(o){const l=S.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,s]}function oo(n,e=[]){let t=[];function r(o,l){const u=S.createContext(l),d=t.length;t=[...t,l];const p=y=>{const{scope:E,children:I,...A}=y,T=E?.[n]?.[d]||u,b=S.useMemo(()=>A,Object.values(A));return v.jsx(T.Provider,{value:b,children:I})};p.displayName=o+"Provider";function m(y,E){const I=E?.[n]?.[d]||u,A=S.useContext(I);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[p,m]}const s=()=>{const o=t.map(l=>S.createContext(l));return function(u){const d=u?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return s.scopeName=n,[r,tM(s,...e)]}function tM(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((u,{useScope:d,scopeName:p})=>{const y=d(o)[`__scope${p}`];return{...u,...y}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function WS(n){const e=nM(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(sM);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function nM(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=oM(s),u=iM(o,s.props);return s.type!==S.Fragment&&(u.ref=r?Zs(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var rM=Symbol("radix.slottable");function sM(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===rM}function iM(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function oM(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function wv(n){const e=n+"CollectionProvider",[t,r]=oo(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=T=>{const{scope:b,children:j}=T,V=Os.useRef(null),B=Os.useRef(new Map).current;return v.jsx(s,{scope:b,itemMap:B,collectionRef:V,children:j})};l.displayName=e;const u=n+"CollectionSlot",d=WS(u),p=Os.forwardRef((T,b)=>{const{scope:j,children:V}=T,B=o(u,j),K=rt(b,B.collectionRef);return v.jsx(d,{ref:K,children:V})});p.displayName=u;const m=n+"CollectionItemSlot",y="data-radix-collection-item",E=WS(m),I=Os.forwardRef((T,b)=>{const{scope:j,children:V,...B}=T,K=Os.useRef(null),J=rt(b,K),Z=o(m,j);return Os.useEffect(()=>(Z.itemMap.set(K,{ref:K,...B}),()=>void Z.itemMap.delete(K))),v.jsx(E,{[y]:"",ref:J,children:V})});I.displayName=m;function A(T){const b=o(n+"CollectionConsumer",T);return Os.useCallback(()=>{const V=b.collectionRef.current;if(!V)return[];const B=Array.from(V.querySelectorAll(`[${y}]`));return Array.from(b.itemMap.values()).sort((Z,P)=>B.indexOf(Z.ref.current)-B.indexOf(P.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:p,ItemSlot:I},A,r]}var aM=S.createContext(void 0);function sp(n){const e=S.useContext(aM);return n||e||"ltr"}function lM(n){const e=cM(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(dM);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function cM(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=fM(s),u=hM(o,s.props);return s.type!==S.Fragment&&(u.ref=r?Zs(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var uM=Symbol("radix.slottable");function dM(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===uM}function hM(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function fM(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var pM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=pM.reduce((n,e)=>{const t=lM(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function CI(n,e){n&&$u.flushSync(()=>n.dispatchEvent(e))}function Jt(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>e.current?.(...t),[])}function mM(n,e=globalThis?.document){const t=Jt(n);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var gM="DismissableLayer",_y="dismissableLayer.update",yM="dismissableLayer.pointerDownOutside",vM="dismissableLayer.focusOutside",HS,RI=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ip=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...d}=n,p=S.useContext(RI),[m,y]=S.useState(null),E=m?.ownerDocument??globalThis?.document,[,I]=S.useState({}),A=rt(e,P=>y(P)),T=Array.from(p.layers),[b]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),j=T.indexOf(b),V=m?T.indexOf(m):-1,B=p.layersWithOutsidePointerEventsDisabled.size>0,K=V>=j,J=EM(P=>{const R=P.target,k=[...p.branches].some(M=>M.contains(R));!K||k||(s?.(P),l?.(P),P.defaultPrevented||u?.())},E),Z=SM(P=>{const R=P.target;[...p.branches].some(M=>M.contains(R))||(o?.(P),l?.(P),P.defaultPrevented||u?.())},E);return mM(P=>{V===p.layers.size-1&&(r?.(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},E),S.useEffect(()=>{if(m)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(HS=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(m)),p.layers.add(m),GS(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=HS)}},[m,E,t,p]),S.useEffect(()=>()=>{m&&(p.layers.delete(m),p.layersWithOutsidePointerEventsDisabled.delete(m),GS())},[m,p]),S.useEffect(()=>{const P=()=>I({});return document.addEventListener(_y,P),()=>document.removeEventListener(_y,P)},[]),v.jsx(Ge.div,{...d,ref:A,style:{pointerEvents:B?K?"auto":"none":void 0,...n.style},onFocusCapture:Ae(n.onFocusCapture,Z.onFocusCapture),onBlurCapture:Ae(n.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:Ae(n.onPointerDownCapture,J.onPointerDownCapture)})});ip.displayName=gM;var _M="DismissableLayerBranch",wM=S.forwardRef((n,e)=>{const t=S.useContext(RI),r=S.useRef(null),s=rt(e,r);return S.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),v.jsx(Ge.div,{...n,ref:s})});wM.displayName=_M;function EM(n,e=globalThis?.document){const t=Jt(n),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let d=function(){bI(yM,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function SM(n,e=globalThis?.document){const t=Jt(n),r=S.useRef(!1);return S.useEffect(()=>{const s=o=>{o.target&&!r.current&&bI(vM,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function GS(){const n=new CustomEvent(_y);document.dispatchEvent(n)}function bI(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?CI(s,o):s.dispatchEvent(o)}var Og=0;function Ev(){S.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??qS()),document.body.insertAdjacentElement("beforeend",n[1]??qS()),Og++,()=>{Og===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Og--}},[])}function qS(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Lg="focusScope.autoFocusOnMount",Vg="focusScope.autoFocusOnUnmount",KS={bubbles:!1,cancelable:!0},xM="FocusScope",op=S.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=n,[u,d]=S.useState(null),p=Jt(s),m=Jt(o),y=S.useRef(null),E=rt(e,T=>d(T)),I=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let T=function(B){if(I.paused||!u)return;const K=B.target;u.contains(K)?y.current=K:Oi(y.current,{select:!0})},b=function(B){if(I.paused||!u)return;const K=B.relatedTarget;K!==null&&(u.contains(K)||Oi(y.current,{select:!0}))},j=function(B){if(document.activeElement===document.body)for(const J of B)J.removedNodes.length>0&&Oi(u)};document.addEventListener("focusin",T),document.addEventListener("focusout",b);const V=new MutationObserver(j);return u&&V.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",T),document.removeEventListener("focusout",b),V.disconnect()}}},[r,u,I.paused]),S.useEffect(()=>{if(u){YS.add(I);const T=document.activeElement;if(!u.contains(T)){const j=new CustomEvent(Lg,KS);u.addEventListener(Lg,p),u.dispatchEvent(j),j.defaultPrevented||(TM(AM(AI(u)),{select:!0}),document.activeElement===T&&Oi(u))}return()=>{u.removeEventListener(Lg,p),setTimeout(()=>{const j=new CustomEvent(Vg,KS);u.addEventListener(Vg,m),u.dispatchEvent(j),j.defaultPrevented||Oi(T??document.body,{select:!0}),u.removeEventListener(Vg,m),YS.remove(I)},0)}}},[u,p,m,I]);const A=S.useCallback(T=>{if(!t&&!r||I.paused)return;const b=T.key==="Tab"&&!T.altKey&&!T.ctrlKey&&!T.metaKey,j=document.activeElement;if(b&&j){const V=T.currentTarget,[B,K]=IM(V);B&&K?!T.shiftKey&&j===K?(T.preventDefault(),t&&Oi(B,{select:!0})):T.shiftKey&&j===B&&(T.preventDefault(),t&&Oi(K,{select:!0})):j===V&&T.preventDefault()}},[t,r,I.paused]);return v.jsx(Ge.div,{tabIndex:-1,...l,ref:E,onKeyDown:A})});op.displayName=xM;function TM(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Oi(r,{select:e}),document.activeElement!==t)return}function IM(n){const e=AI(n),t=QS(e,n),r=QS(e.reverse(),n);return[t,r]}function AI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function QS(n,e){for(const t of n)if(!CM(t,{upTo:e}))return t}function CM(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function RM(n){return n instanceof HTMLInputElement&&"select"in n}function Oi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&RM(n)&&e&&n.select()}}var YS=bM();function bM(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=XS(n,e),n.unshift(e)},remove(e){n=XS(n,e),n[0]?.resume()}}}function XS(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function AM(n){return n.filter(e=>e.tagName!=="A")}var zt=globalThis?.document?S.useLayoutEffect:()=>{},PM=np[" useId ".trim().toString()]||(()=>{}),NM=0;function Bs(n){const[e,t]=S.useState(PM());return zt(()=>{t(r=>r??String(NM++))},[n]),n||(e?`radix-${e}`:"")}const kM=["top","right","bottom","left"],Qi=Math.min,Qn=Math.max,cf=Math.round,Ch=Math.floor,ss=n=>({x:n,y:n}),DM={left:"right",right:"left",bottom:"top",top:"bottom"},MM={start:"end",end:"start"};function wy(n,e,t){return Qn(n,Qi(e,t))}function Gs(n,e){return typeof n=="function"?n(e):n}function qs(n){return n.split("-")[0]}function $l(n){return n.split("-")[1]}function Sv(n){return n==="x"?"y":"x"}function xv(n){return n==="y"?"height":"width"}const OM=new Set(["top","bottom"]);function ts(n){return OM.has(qs(n))?"y":"x"}function Tv(n){return Sv(ts(n))}function LM(n,e,t){t===void 0&&(t=!1);const r=$l(n),s=Tv(n),o=xv(s);let l=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=uf(l)),[l,uf(l)]}function VM(n){const e=uf(n);return[Ey(n),e,Ey(e)]}function Ey(n){return n.replace(/start|end/g,e=>MM[e])}const JS=["left","right"],ZS=["right","left"],jM=["top","bottom"],FM=["bottom","top"];function UM(n,e,t){switch(n){case"top":case"bottom":return t?e?ZS:JS:e?JS:ZS;case"left":case"right":return e?jM:FM;default:return[]}}function zM(n,e,t,r){const s=$l(n);let o=UM(qs(n),t==="start",r);return s&&(o=o.map(l=>l+"-"+s),e&&(o=o.concat(o.map(Ey)))),o}function uf(n){return n.replace(/left|right|bottom|top/g,e=>DM[e])}function BM(n){return{top:0,right:0,bottom:0,left:0,...n}}function PI(n){return typeof n!="number"?BM(n):{top:n,right:n,bottom:n,left:n}}function df(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function e0(n,e,t){let{reference:r,floating:s}=n;const o=ts(e),l=Tv(e),u=xv(l),d=qs(e),p=o==="y",m=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,E=r[u]/2-s[u]/2;let I;switch(d){case"top":I={x:m,y:r.y-s.height};break;case"bottom":I={x:m,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y};break;case"left":I={x:r.x-s.width,y};break;default:I={x:r.x,y:r.y}}switch($l(e)){case"start":I[l]-=E*(t&&p?-1:1);break;case"end":I[l]+=E*(t&&p?-1:1);break}return I}const $M=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:l}=t,u=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:n,floating:e,strategy:s}),{x:m,y}=e0(p,r,d),E=r,I={},A=0;for(let T=0;T<u.length;T++){const{name:b,fn:j}=u[T],{x:V,y:B,data:K,reset:J}=await j({x:m,y,initialPlacement:r,placement:E,strategy:s,middlewareData:I,rects:p,platform:l,elements:{reference:n,floating:e}});m=V??m,y=B??y,I={...I,[b]:{...I[b],...K}},J&&A<=50&&(A++,typeof J=="object"&&(J.placement&&(E=J.placement),J.rects&&(p=J.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:s}):J.rects),{x:m,y}=e0(p,E,d)),T=-1)}return{x:m,y,placement:E,strategy:s,middlewareData:I}};async function Eu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:l,elements:u,strategy:d}=n,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:E=!1,padding:I=0}=Gs(e,n),A=PI(I),b=u[E?y==="floating"?"reference":"floating":y],j=df(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(b)))==null||t?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:p,rootBoundary:m,strategy:d})),V=y==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),K=await(o.isElement==null?void 0:o.isElement(B))?await(o.getScale==null?void 0:o.getScale(B))||{x:1,y:1}:{x:1,y:1},J=df(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:V,offsetParent:B,strategy:d}):V);return{top:(j.top-J.top+A.top)/K.y,bottom:(J.bottom-j.bottom+A.bottom)/K.y,left:(j.left-J.left+A.left)/K.x,right:(J.right-j.right+A.right)/K.x}}const WM=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:l,elements:u,middlewareData:d}=e,{element:p,padding:m=0}=Gs(n,e)||{};if(p==null)return{};const y=PI(m),E={x:t,y:r},I=Tv(s),A=xv(I),T=await l.getDimensions(p),b=I==="y",j=b?"top":"left",V=b?"bottom":"right",B=b?"clientHeight":"clientWidth",K=o.reference[A]+o.reference[I]-E[I]-o.floating[A],J=E[I]-o.reference[I],Z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let P=Z?Z[B]:0;(!P||!await(l.isElement==null?void 0:l.isElement(Z)))&&(P=u.floating[B]||o.floating[A]);const R=K/2-J/2,k=P/2-T[A]/2-1,M=Qi(y[j],k),O=Qi(y[V],k),F=M,D=P-T[A]-O,me=P/2-T[A]/2+R,_e=wy(F,me,D),pe=!d.arrow&&$l(s)!=null&&me!==_e&&o.reference[A]/2-(me<F?M:O)-T[A]/2<0,we=pe?me<F?me-F:me-D:0;return{[I]:E[I]+we,data:{[I]:_e,centerOffset:me-_e-we,...pe&&{alignmentOffset:we}},reset:pe}}}),HM=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:l,initialPlacement:u,platform:d,elements:p}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:E,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:T=!0,...b}=Gs(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const j=qs(s),V=ts(u),B=qs(u)===u,K=await(d.isRTL==null?void 0:d.isRTL(p.floating)),J=E||(B||!T?[uf(u)]:VM(u)),Z=A!=="none";!E&&Z&&J.push(...zM(u,T,A,K));const P=[u,...J],R=await Eu(e,b),k=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&k.push(R[j]),y){const me=LM(s,l,K);k.push(R[me[0]],R[me[1]])}if(M=[...M,{placement:s,overflows:k}],!k.every(me=>me<=0)){var O,F;const me=(((O=o.flip)==null?void 0:O.index)||0)+1,_e=P[me];if(_e&&(!(y==="alignment"?V!==ts(_e):!1)||M.every(W=>ts(W.placement)===V?W.overflows[0]>0:!0)))return{data:{index:me,overflows:M},reset:{placement:_e}};let pe=(F=M.filter(we=>we.overflows[0]<=0).sort((we,W)=>we.overflows[1]-W.overflows[1])[0])==null?void 0:F.placement;if(!pe)switch(I){case"bestFit":{var D;const we=(D=M.filter(W=>{if(Z){const ee=ts(W.placement);return ee===V||ee==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(ee=>ee>0).reduce((ee,ue)=>ee+ue,0)]).sort((W,ee)=>W[1]-ee[1])[0])==null?void 0:D[0];we&&(pe=we);break}case"initialPlacement":pe=u;break}if(s!==pe)return{reset:{placement:pe}}}return{}}}};function t0(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function n0(n){return kM.some(e=>n[e]>=0)}const GM=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Gs(n,e);switch(r){case"referenceHidden":{const o=await Eu(e,{...s,elementContext:"reference"}),l=t0(o,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:n0(l)}}}case"escaped":{const o=await Eu(e,{...s,altBoundary:!0}),l=t0(o,t.floating);return{data:{escapedOffsets:l,escaped:n0(l)}}}default:return{}}}}},NI=new Set(["left","top"]);async function qM(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=qs(t),u=$l(t),d=ts(t)==="y",p=NI.has(l)?-1:1,m=o&&d?-1:1,y=Gs(e,n);let{mainAxis:E,crossAxis:I,alignmentAxis:A}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof A=="number"&&(I=u==="end"?A*-1:A),d?{x:I*m,y:E*p}:{x:E*p,y:I*m}}const KM=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:l,middlewareData:u}=e,d=await qM(e,n);return l===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:l}}}}},QM=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:b=>{let{x:j,y:V}=b;return{x:j,y:V}}},...d}=Gs(n,e),p={x:t,y:r},m=await Eu(e,d),y=ts(qs(s)),E=Sv(y);let I=p[E],A=p[y];if(o){const b=E==="y"?"top":"left",j=E==="y"?"bottom":"right",V=I+m[b],B=I-m[j];I=wy(V,I,B)}if(l){const b=y==="y"?"top":"left",j=y==="y"?"bottom":"right",V=A+m[b],B=A-m[j];A=wy(V,A,B)}const T=u.fn({...e,[E]:I,[y]:A});return{...T,data:{x:T.x-t,y:T.y-r,enabled:{[E]:o,[y]:l}}}}}},YM=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:d=!0,crossAxis:p=!0}=Gs(n,e),m={x:t,y:r},y=ts(s),E=Sv(y);let I=m[E],A=m[y];const T=Gs(u,e),b=typeof T=="number"?{mainAxis:T,crossAxis:0}:{mainAxis:0,crossAxis:0,...T};if(d){const B=E==="y"?"height":"width",K=o.reference[E]-o.floating[B]+b.mainAxis,J=o.reference[E]+o.reference[B]-b.mainAxis;I<K?I=K:I>J&&(I=J)}if(p){var j,V;const B=E==="y"?"width":"height",K=NI.has(qs(s)),J=o.reference[y]-o.floating[B]+(K&&((j=l.offset)==null?void 0:j[y])||0)+(K?0:b.crossAxis),Z=o.reference[y]+o.reference[B]+(K?0:((V=l.offset)==null?void 0:V[y])||0)-(K?b.crossAxis:0);A<J?A=J:A>Z&&(A=Z)}return{[E]:I,[y]:A}}}},XM=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:l,elements:u}=e,{apply:d=()=>{},...p}=Gs(n,e),m=await Eu(e,p),y=qs(s),E=$l(s),I=ts(s)==="y",{width:A,height:T}=o.floating;let b,j;y==="top"||y==="bottom"?(b=y,j=E===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(j=y,b=E==="end"?"top":"bottom");const V=T-m.top-m.bottom,B=A-m.left-m.right,K=Qi(T-m[b],V),J=Qi(A-m[j],B),Z=!e.middlewareData.shift;let P=K,R=J;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=B),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=V),Z&&!E){const M=Qn(m.left,0),O=Qn(m.right,0),F=Qn(m.top,0),D=Qn(m.bottom,0);I?R=A-2*(M!==0||O!==0?M+O:Qn(m.left,m.right)):P=T-2*(F!==0||D!==0?F+D:Qn(m.top,m.bottom))}await d({...e,availableWidth:R,availableHeight:P});const k=await l.getDimensions(u.floating);return A!==k.width||T!==k.height?{reset:{rects:!0}}:{}}}};function ap(){return typeof window<"u"}function Wl(n){return kI(n)?(n.nodeName||"").toLowerCase():"#document"}function Yn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ps(n){var e;return(e=(kI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function kI(n){return ap()?n instanceof Node||n instanceof Yn(n).Node:!1}function Nr(n){return ap()?n instanceof Element||n instanceof Yn(n).Element:!1}function hs(n){return ap()?n instanceof HTMLElement||n instanceof Yn(n).HTMLElement:!1}function r0(n){return!ap()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Yn(n).ShadowRoot}const JM=new Set(["inline","contents"]);function Wu(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=kr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!JM.has(s)}const ZM=new Set(["table","td","th"]);function eO(n){return ZM.has(Wl(n))}const tO=[":popover-open",":modal"];function lp(n){return tO.some(e=>{try{return n.matches(e)}catch{return!1}})}const nO=["transform","translate","scale","rotate","perspective"],rO=["transform","translate","scale","rotate","perspective","filter"],sO=["paint","layout","strict","content"];function Iv(n){const e=Cv(),t=Nr(n)?kr(n):n;return nO.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||rO.some(r=>(t.willChange||"").includes(r))||sO.some(r=>(t.contain||"").includes(r))}function iO(n){let e=Yi(n);for(;hs(e)&&!bl(e);){if(Iv(e))return e;if(lp(e))return null;e=Yi(e)}return null}function Cv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oO=new Set(["html","body","#document"]);function bl(n){return oO.has(Wl(n))}function kr(n){return Yn(n).getComputedStyle(n)}function cp(n){return Nr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Yi(n){if(Wl(n)==="html")return n;const e=n.assignedSlot||n.parentNode||r0(n)&&n.host||ps(n);return r0(e)?e.host:e}function DI(n){const e=Yi(n);return bl(e)?n.ownerDocument?n.ownerDocument.body:n.body:hs(e)&&Wu(e)?e:DI(e)}function Su(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=DI(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),l=Yn(s);if(o){const u=Sy(l);return e.concat(l,l.visualViewport||[],Wu(s)?s:[],u&&t?Su(u):[])}return e.concat(s,Su(s,[],t))}function Sy(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function MI(n){const e=kr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=hs(n),o=s?n.offsetWidth:t,l=s?n.offsetHeight:r,u=cf(t)!==o||cf(r)!==l;return u&&(t=o,r=l),{width:t,height:r,$:u}}function Rv(n){return Nr(n)?n:n.contextElement}function vl(n){const e=Rv(n);if(!hs(e))return ss(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=MI(e);let l=(o?cf(t.width):t.width)/r,u=(o?cf(t.height):t.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const aO=ss(0);function OI(n){const e=Yn(n);return!Cv()||!e.visualViewport?aO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lO(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Yn(n)?!1:e}function Xo(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=Rv(n);let l=ss(1);e&&(r?Nr(r)&&(l=vl(r)):l=vl(n));const u=lO(o,t,r)?OI(o):ss(0);let d=(s.left+u.x)/l.x,p=(s.top+u.y)/l.y,m=s.width/l.x,y=s.height/l.y;if(o){const E=Yn(o),I=r&&Nr(r)?Yn(r):r;let A=E,T=Sy(A);for(;T&&r&&I!==A;){const b=vl(T),j=T.getBoundingClientRect(),V=kr(T),B=j.left+(T.clientLeft+parseFloat(V.paddingLeft))*b.x,K=j.top+(T.clientTop+parseFloat(V.paddingTop))*b.y;d*=b.x,p*=b.y,m*=b.x,y*=b.y,d+=B,p+=K,A=Yn(T),T=Sy(A)}}return df({width:m,height:y,x:d,y:p})}function up(n,e){const t=cp(n).scrollLeft;return e?e.left+t:Xo(ps(n)).left+t}function LI(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-up(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function cO(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",l=ps(r),u=e?lp(e.floating):!1;if(r===l||u&&o)return t;let d={scrollLeft:0,scrollTop:0},p=ss(1);const m=ss(0),y=hs(r);if((y||!y&&!o)&&((Wl(r)!=="body"||Wu(l))&&(d=cp(r)),hs(r))){const I=Xo(r);p=vl(r),m.x=I.x+r.clientLeft,m.y=I.y+r.clientTop}const E=l&&!y&&!o?LI(l,d):ss(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-d.scrollLeft*p.x+m.x+E.x,y:t.y*p.y-d.scrollTop*p.y+m.y+E.y}}function uO(n){return Array.from(n.getClientRects())}function dO(n){const e=ps(n),t=cp(n),r=n.ownerDocument.body,s=Qn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Qn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+up(n);const u=-t.scrollTop;return kr(r).direction==="rtl"&&(l+=Qn(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:l,y:u}}const s0=25;function hO(n,e){const t=Yn(n),r=ps(n),s=t.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;const m=Cv();(!m||m&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const p=up(r);if(p<=0){const m=r.ownerDocument,y=m.body,E=getComputedStyle(y),I=m.compatMode==="CSS1Compat"&&parseFloat(E.marginLeft)+parseFloat(E.marginRight)||0,A=Math.abs(r.clientWidth-y.clientWidth-I);A<=s0&&(o-=A)}else p<=s0&&(o+=p);return{width:o,height:l,x:u,y:d}}const fO=new Set(["absolute","fixed"]);function pO(n,e){const t=Xo(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=hs(n)?vl(n):ss(1),l=n.clientWidth*o.x,u=n.clientHeight*o.y,d=s*o.x,p=r*o.y;return{width:l,height:u,x:d,y:p}}function i0(n,e,t){let r;if(e==="viewport")r=hO(n,t);else if(e==="document")r=dO(ps(n));else if(Nr(e))r=pO(e,t);else{const s=OI(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return df(r)}function VI(n,e){const t=Yi(n);return t===e||!Nr(t)||bl(t)?!1:kr(t).position==="fixed"||VI(t,e)}function mO(n,e){const t=e.get(n);if(t)return t;let r=Su(n,[],!1).filter(u=>Nr(u)&&Wl(u)!=="body"),s=null;const o=kr(n).position==="fixed";let l=o?Yi(n):n;for(;Nr(l)&&!bl(l);){const u=kr(l),d=Iv(l);!d&&u.position==="fixed"&&(s=null),(o?!d&&!s:!d&&u.position==="static"&&!!s&&fO.has(s.position)||Wu(l)&&!d&&VI(n,l))?r=r.filter(m=>m!==l):s=u,l=Yi(l)}return e.set(n,r),r}function gO(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const l=[...t==="clippingAncestors"?lp(e)?[]:mO(e,this._c):[].concat(t),r],u=l[0],d=l.reduce((p,m)=>{const y=i0(e,m,s);return p.top=Qn(y.top,p.top),p.right=Qi(y.right,p.right),p.bottom=Qi(y.bottom,p.bottom),p.left=Qn(y.left,p.left),p},i0(e,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function yO(n){const{width:e,height:t}=MI(n);return{width:e,height:t}}function vO(n,e,t){const r=hs(e),s=ps(e),o=t==="fixed",l=Xo(n,!0,o,e);let u={scrollLeft:0,scrollTop:0};const d=ss(0);function p(){d.x=up(s)}if(r||!r&&!o)if((Wl(e)!=="body"||Wu(s))&&(u=cp(e)),r){const I=Xo(e,!0,o,e);d.x=I.x+e.clientLeft,d.y=I.y+e.clientTop}else s&&p();o&&!r&&s&&p();const m=s&&!r&&!o?LI(s,u):ss(0),y=l.left+u.scrollLeft-d.x-m.x,E=l.top+u.scrollTop-d.y-m.y;return{x:y,y:E,width:l.width,height:l.height}}function jg(n){return kr(n).position==="static"}function o0(n,e){if(!hs(n)||kr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ps(n)===t&&(t=t.ownerDocument.body),t}function jI(n,e){const t=Yn(n);if(lp(n))return t;if(!hs(n)){let s=Yi(n);for(;s&&!bl(s);){if(Nr(s)&&!jg(s))return s;s=Yi(s)}return t}let r=o0(n,e);for(;r&&eO(r)&&jg(r);)r=o0(r,e);return r&&bl(r)&&jg(r)&&!Iv(r)?t:r||iO(n)||t}const _O=async function(n){const e=this.getOffsetParent||jI,t=this.getDimensions,r=await t(n.floating);return{reference:vO(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function wO(n){return kr(n).direction==="rtl"}const EO={convertOffsetParentRelativeRectToViewportRelativeRect:cO,getDocumentElement:ps,getClippingRect:gO,getOffsetParent:jI,getElementRects:_O,getClientRects:uO,getDimensions:yO,getScale:vl,isElement:Nr,isRTL:wO};function FI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function SO(n,e){let t=null,r;const s=ps(n);function o(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),o();const p=n.getBoundingClientRect(),{left:m,top:y,width:E,height:I}=p;if(u||e(),!E||!I)return;const A=Ch(y),T=Ch(s.clientWidth-(m+E)),b=Ch(s.clientHeight-(y+I)),j=Ch(m),B={rootMargin:-A+"px "+-T+"px "+-b+"px "+-j+"px",threshold:Qn(0,Qi(1,d))||1};let K=!0;function J(Z){const P=Z[0].intersectionRatio;if(P!==d){if(!K)return l();P?l(!1,P):r=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!FI(p,n.getBoundingClientRect())&&l(),K=!1}try{t=new IntersectionObserver(J,{...B,root:s.ownerDocument})}catch{t=new IntersectionObserver(J,B)}t.observe(n)}return l(!0),o}function xO(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,p=Rv(n),m=s||o?[...p?Su(p):[],...Su(e)]:[];m.forEach(j=>{s&&j.addEventListener("scroll",t,{passive:!0}),o&&j.addEventListener("resize",t)});const y=p&&u?SO(p,t):null;let E=-1,I=null;l&&(I=new ResizeObserver(j=>{let[V]=j;V&&V.target===p&&I&&(I.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var B;(B=I)==null||B.observe(e)})),t()}),p&&!d&&I.observe(p),I.observe(e));let A,T=d?Xo(n):null;d&&b();function b(){const j=Xo(n);T&&!FI(T,j)&&t(),T=j,A=requestAnimationFrame(b)}return t(),()=>{var j;m.forEach(V=>{s&&V.removeEventListener("scroll",t),o&&V.removeEventListener("resize",t)}),y?.(),(j=I)==null||j.disconnect(),I=null,d&&cancelAnimationFrame(A)}}const TO=KM,IO=QM,CO=HM,RO=XM,bO=GM,a0=WM,AO=YM,PO=(n,e,t)=>{const r=new Map,s={platform:EO,...t},o={...s.platform,_c:r};return $M(n,e,{...s,platform:o})};var NO=typeof document<"u",kO=function(){},$h=NO?S.useLayoutEffect:kO;function hf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!hf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!hf(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function UI(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function l0(n,e){const t=UI(n);return Math.round(e*t)/t}function Fg(n){const e=S.useRef(n);return $h(()=>{e.current=n}),e}function DO(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:d,open:p}=n,[m,y]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[E,I]=S.useState(r);hf(E,r)||I(r);const[A,T]=S.useState(null),[b,j]=S.useState(null),V=S.useCallback(W=>{W!==Z.current&&(Z.current=W,T(W))},[]),B=S.useCallback(W=>{W!==P.current&&(P.current=W,j(W))},[]),K=o||A,J=l||b,Z=S.useRef(null),P=S.useRef(null),R=S.useRef(m),k=d!=null,M=Fg(d),O=Fg(s),F=Fg(p),D=S.useCallback(()=>{if(!Z.current||!P.current)return;const W={placement:e,strategy:t,middleware:E};O.current&&(W.platform=O.current),PO(Z.current,P.current,W).then(ee=>{const ue={...ee,isPositioned:F.current!==!1};me.current&&!hf(R.current,ue)&&(R.current=ue,$u.flushSync(()=>{y(ue)}))})},[E,e,t,O,F]);$h(()=>{p===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,y(W=>({...W,isPositioned:!1})))},[p]);const me=S.useRef(!1);$h(()=>(me.current=!0,()=>{me.current=!1}),[]),$h(()=>{if(K&&(Z.current=K),J&&(P.current=J),K&&J){if(M.current)return M.current(K,J,D);D()}},[K,J,D,M,k]);const _e=S.useMemo(()=>({reference:Z,floating:P,setReference:V,setFloating:B}),[V,B]),pe=S.useMemo(()=>({reference:K,floating:J}),[K,J]),we=S.useMemo(()=>{const W={position:t,left:0,top:0};if(!pe.floating)return W;const ee=l0(pe.floating,m.x),ue=l0(pe.floating,m.y);return u?{...W,transform:"translate("+ee+"px, "+ue+"px)",...UI(pe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:ue}},[t,u,pe.floating,m.x,m.y]);return S.useMemo(()=>({...m,update:D,refs:_e,elements:pe,floatingStyles:we}),[m,D,_e,pe,we])}const MO=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?a0({element:r.current,padding:s}).fn(t):{}:r?a0({element:r,padding:s}).fn(t):{}}}},OO=(n,e)=>({...TO(n),options:[n,e]}),LO=(n,e)=>({...IO(n),options:[n,e]}),VO=(n,e)=>({...AO(n),options:[n,e]}),jO=(n,e)=>({...CO(n),options:[n,e]}),FO=(n,e)=>({...RO(n),options:[n,e]}),UO=(n,e)=>({...bO(n),options:[n,e]}),zO=(n,e)=>({...MO(n),options:[n,e]});var BO="Arrow",zI=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return v.jsx(Ge.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});zI.displayName=BO;var $O=zI;function WO(n){const[e,t]=S.useState(void 0);return zt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let l,u;if("borderBoxSize"in o){const d=o.borderBoxSize,p=Array.isArray(d)?d[0]:d;l=p.inlineSize,u=p.blockSize}else l=n.offsetWidth,u=n.offsetHeight;t({width:l,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var bv="Popper",[BI,dp]=oo(bv),[HO,$I]=BI(bv),WI=n=>{const{__scopePopper:e,children:t}=n,[r,s]=S.useState(null);return v.jsx(HO,{scope:e,anchor:r,onAnchorChange:s,children:t})};WI.displayName=bv;var HI="PopperAnchor",GI=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=$I(HI,t),l=S.useRef(null),u=rt(e,l),d=S.useRef(null);return S.useEffect(()=>{const p=d.current;d.current=r?.current||l.current,p!==d.current&&o.onAnchorChange(d.current)}),r?null:v.jsx(Ge.div,{...s,ref:u})});GI.displayName=HI;var Av="PopperContent",[GO,qO]=BI(Av),qI=S.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:p=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:E=!1,updatePositionStrategy:I="optimized",onPlaced:A,...T}=n,b=$I(Av,t),[j,V]=S.useState(null),B=rt(e,H=>V(H)),[K,J]=S.useState(null),Z=WO(K),P=Z?.width??0,R=Z?.height??0,k=r+(o!=="center"?"-"+o:""),M=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},O=Array.isArray(p)?p:[p],F=O.length>0,D={padding:M,boundary:O.filter(QO),altBoundary:F},{refs:me,floatingStyles:_e,placement:pe,isPositioned:we,middlewareData:W}=DO({strategy:"fixed",placement:k,whileElementsMounted:(...H)=>xO(...H,{animationFrame:I==="always"}),elements:{reference:b.anchor},middleware:[OO({mainAxis:s+R,alignmentAxis:l}),d&&LO({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?VO():void 0,...D}),d&&jO({...D}),FO({...D,apply:({elements:H,rects:oe,availableWidth:ye,availableHeight:Te})=>{const{width:je,height:$e}=oe.reference,Ue=H.floating.style;Ue.setProperty("--radix-popper-available-width",`${ye}px`),Ue.setProperty("--radix-popper-available-height",`${Te}px`),Ue.setProperty("--radix-popper-anchor-width",`${je}px`),Ue.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),K&&zO({element:K,padding:u}),YO({arrowWidth:P,arrowHeight:R}),E&&UO({strategy:"referenceHidden",...D})]}),[ee,ue]=YI(pe),z=Jt(A);zt(()=>{we&&z?.()},[we,z]);const ne=W.arrow?.x,te=W.arrow?.y,se=W.arrow?.centerOffset!==0,[he,ce]=S.useState();return zt(()=>{j&&ce(window.getComputedStyle(j).zIndex)},[j]),v.jsx("div",{ref:me.setFloating,"data-radix-popper-content-wrapper":"",style:{..._e,transform:we?_e.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:v.jsx(GO,{scope:t,placedSide:ee,onArrowChange:J,arrowX:ne,arrowY:te,shouldHideArrow:se,children:v.jsx(Ge.div,{"data-side":ee,"data-align":ue,...T,ref:B,style:{...T.style,animation:we?void 0:"none"}})})})});qI.displayName=Av;var KI="PopperArrow",KO={top:"bottom",right:"left",bottom:"top",left:"right"},QI=S.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=qO(KI,r),l=KO[o.placedSide];return v.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:v.jsx($O,{...s,ref:t,style:{...s.style,display:"block"}})})});QI.displayName=KI;function QO(n){return n!==null}var YO=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,l=s.arrow?.centerOffset!==0,u=l?0:n.arrowWidth,d=l?0:n.arrowHeight,[p,m]=YI(t),y={start:"0%",center:"50%",end:"100%"}[m],E=(s.arrow?.x??0)+u/2,I=(s.arrow?.y??0)+d/2;let A="",T="";return p==="bottom"?(A=l?y:`${E}px`,T=`${-d}px`):p==="top"?(A=l?y:`${E}px`,T=`${r.floating.height+d}px`):p==="right"?(A=`${-d}px`,T=l?y:`${I}px`):p==="left"&&(A=`${r.floating.width+d}px`,T=l?y:`${I}px`),{data:{x:A,y:T}}}});function YI(n){const[e,t="center"]=n.split("-");return[e,t]}var XI=WI,JI=GI,ZI=qI,eC=QI,XO="Portal",hp=S.forwardRef((n,e)=>{const{container:t,...r}=n,[s,o]=S.useState(!1);zt(()=>o(!0),[]);const l=t||s&&globalThis?.document?.body;return l?ZD.createPortal(v.jsx(Ge.div,{...r,ref:e}),l):null});hp.displayName=XO;function JO(n){const e=ZO(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(t2);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function ZO(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=r2(s),u=n2(o,s.props);return s.type!==S.Fragment&&(u.ref=r?Zs(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var e2=Symbol("radix.slottable");function t2(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===e2}function n2(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function r2(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var s2=np[" useInsertionEffect ".trim().toString()]||zt;function xu({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,o,l]=i2({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:s;{const m=S.useRef(n!==void 0);S.useEffect(()=>{const y=m.current;y!==u&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const p=S.useCallback(m=>{if(u){const y=o2(m)?m(n):m;y!==n&&l.current?.(y)}else o(m)},[u,n,o,l]);return[d,p]}function i2({defaultProp:n,onChange:e}){const[t,r]=S.useState(n),s=S.useRef(t),o=S.useRef(e);return s2(()=>{o.current=e},[e]),S.useEffect(()=>{s.current!==t&&(o.current?.(t),s.current=t)},[t,s]),[t,r,o]}function o2(n){return typeof n=="function"}function a2(n){const e=S.useRef({value:n,previous:n});return S.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var tC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),l2="VisuallyHidden",c2=S.forwardRef((n,e)=>v.jsx(Ge.span,{...n,ref:e,style:{...tC,...n.style}}));c2.displayName=l2;var u2=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},il=new WeakMap,Rh=new WeakMap,bh={},Ug=0,nC=function(n){return n&&(n.host||nC(n.parentNode))},d2=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=nC(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},h2=function(n,e,t,r){var s=d2(e,Array.isArray(n)?n:[n]);bh[t]||(bh[t]=new WeakMap);var o=bh[t],l=[],u=new Set,d=new Set(s),p=function(y){!y||u.has(y)||(u.add(y),p(y.parentNode))};s.forEach(p);var m=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(E){if(u.has(E))m(E);else try{var I=E.getAttribute(r),A=I!==null&&I!=="false",T=(il.get(E)||0)+1,b=(o.get(E)||0)+1;il.set(E,T),o.set(E,b),l.push(E),T===1&&A&&Rh.set(E,!0),b===1&&E.setAttribute(t,"true"),A||E.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",E,j)}})};return m(e),u.clear(),Ug++,function(){l.forEach(function(y){var E=il.get(y)-1,I=o.get(y)-1;il.set(y,E),o.set(y,I),E||(Rh.has(y)||y.removeAttribute(r),Rh.delete(y)),I||y.removeAttribute(t)}),Ug--,Ug||(il=new WeakMap,il=new WeakMap,Rh=new WeakMap,bh={})}},Pv=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=u2(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),h2(r,s,t,"aria-hidden")):function(){return null}},es=function(){return es=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},es.apply(this,arguments)};function rC(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function f2(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var Wh="right-scroll-bar-position",Hh="width-before-scroll-bar",p2="with-scroll-bars-hidden",m2="--removed-body-scroll-bar-size";function zg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function g2(n,e){var t=S.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var y2=typeof window<"u"?S.useLayoutEffect:S.useEffect,c0=new WeakMap;function v2(n,e){var t=g2(null,function(r){return n.forEach(function(s){return zg(s,r)})});return y2(function(){var r=c0.get(t);if(r){var s=new Set(r),o=new Set(n),l=t.current;s.forEach(function(u){o.has(u)||zg(u,null)}),o.forEach(function(u){s.has(u)||zg(u,l)})}c0.set(t,n)},[n]),t}function _2(n){return n}function w2(n,e){e===void 0&&(e=_2);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var l=e(o,r);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(r=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){r=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(o),l=t}var d=function(){var m=l;l=[],m.forEach(o)},p=function(){return Promise.resolve().then(d)};p(),t={push:function(m){l.push(m),p()},filter:function(m){return l=l.filter(m),t}}}};return s}function E2(n){n===void 0&&(n={});var e=w2(null);return e.options=es({async:!0,ssr:!1},n),e}var sC=function(n){var e=n.sideCar,t=rC(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,es({},t))};sC.isSideCarExport=!0;function S2(n,e){return n.useMedium(e),sC}var iC=E2(),Bg=function(){},fp=S.forwardRef(function(n,e){var t=S.useRef(null),r=S.useState({onScrollCapture:Bg,onWheelCapture:Bg,onTouchMoveCapture:Bg}),s=r[0],o=r[1],l=n.forwardProps,u=n.children,d=n.className,p=n.removeScrollBar,m=n.enabled,y=n.shards,E=n.sideCar,I=n.noRelative,A=n.noIsolation,T=n.inert,b=n.allowPinchZoom,j=n.as,V=j===void 0?"div":j,B=n.gapMode,K=rC(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),J=E,Z=v2([t,e]),P=es(es({},K),s);return S.createElement(S.Fragment,null,m&&S.createElement(J,{sideCar:iC,removeScrollBar:p,shards:y,noRelative:I,noIsolation:A,inert:T,setCallbacks:o,allowPinchZoom:!!b,lockRef:t,gapMode:B}),l?S.cloneElement(S.Children.only(u),es(es({},P),{ref:Z})):S.createElement(V,es({},P,{className:d,ref:Z}),u))});fp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fp.classNames={fullWidth:Hh,zeroRight:Wh};var x2=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function T2(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=x2();return e&&n.setAttribute("nonce",e),n}function I2(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function C2(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var R2=function(){var n=0,e=null;return{add:function(t){n==0&&(e=T2())&&(I2(e,t),C2(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},b2=function(){var n=R2();return function(e,t){S.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},oC=function(){var n=b2(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},A2={left:0,top:0,right:0,gap:0},$g=function(n){return parseInt(n||"",10)||0},P2=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[$g(t),$g(r),$g(s)]},N2=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return A2;var e=P2(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},k2=oC(),_l="data-scroll-locked",D2=function(n,e,t,r){var s=n.left,o=n.top,l=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(p2,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(_l,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wh,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Hh,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Wh," .").concat(Wh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hh," .").concat(Hh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(_l,`] {
    `).concat(m2,": ").concat(u,`px;
  }
`)},u0=function(){var n=parseInt(document.body.getAttribute(_l)||"0",10);return isFinite(n)?n:0},M2=function(){S.useEffect(function(){return document.body.setAttribute(_l,(u0()+1).toString()),function(){var n=u0()-1;n<=0?document.body.removeAttribute(_l):document.body.setAttribute(_l,n.toString())}},[])},O2=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;M2();var o=S.useMemo(function(){return N2(s)},[s]);return S.createElement(k2,{styles:D2(o,!e,s,t?"":"!important")})},xy=!1;if(typeof window<"u")try{var Ah=Object.defineProperty({},"passive",{get:function(){return xy=!0,!0}});window.addEventListener("test",Ah,Ah),window.removeEventListener("test",Ah,Ah)}catch{xy=!1}var ol=xy?{passive:!1}:!1,L2=function(n){return n.tagName==="TEXTAREA"},aC=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!L2(n)&&t[e]==="visible")},V2=function(n){return aC(n,"overflowY")},j2=function(n){return aC(n,"overflowX")},d0=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=lC(n,r);if(s){var o=cC(n,r),l=o[1],u=o[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},F2=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},U2=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},lC=function(n,e){return n==="v"?V2(e):j2(e)},cC=function(n,e){return n==="v"?F2(e):U2(e)},z2=function(n,e){return n==="h"&&e==="rtl"?-1:1},B2=function(n,e,t,r,s){var o=z2(n,window.getComputedStyle(e).direction),l=o*r,u=t.target,d=e.contains(u),p=!1,m=l>0,y=0,E=0;do{if(!u)break;var I=cC(n,u),A=I[0],T=I[1],b=I[2],j=T-b-o*A;(A||j)&&lC(n,u)&&(y+=j,E+=A);var V=u.parentNode;u=V&&V.nodeType===Node.DOCUMENT_FRAGMENT_NODE?V.host:V}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(m&&Math.abs(y)<1||!m&&Math.abs(E)<1)&&(p=!0),p},Ph=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},h0=function(n){return[n.deltaX,n.deltaY]},f0=function(n){return n&&"current"in n?n.current:n},$2=function(n,e){return n[0]===e[0]&&n[1]===e[1]},W2=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},H2=0,al=[];function G2(n){var e=S.useRef([]),t=S.useRef([0,0]),r=S.useRef(),s=S.useState(H2++)[0],o=S.useState(oC)[0],l=S.useRef(n);S.useEffect(function(){l.current=n},[n]),S.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var T=f2([n.lockRef.current],(n.shards||[]).map(f0),!0).filter(Boolean);return T.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),T.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=S.useCallback(function(T,b){if("touches"in T&&T.touches.length===2||T.type==="wheel"&&T.ctrlKey)return!l.current.allowPinchZoom;var j=Ph(T),V=t.current,B="deltaX"in T?T.deltaX:V[0]-j[0],K="deltaY"in T?T.deltaY:V[1]-j[1],J,Z=T.target,P=Math.abs(B)>Math.abs(K)?"h":"v";if("touches"in T&&P==="h"&&Z.type==="range")return!1;var R=d0(P,Z);if(!R)return!0;if(R?J=P:(J=P==="v"?"h":"v",R=d0(P,Z)),!R)return!1;if(!r.current&&"changedTouches"in T&&(B||K)&&(r.current=J),!J)return!0;var k=r.current||J;return B2(k,b,T,k==="h"?B:K)},[]),d=S.useCallback(function(T){var b=T;if(!(!al.length||al[al.length-1]!==o)){var j="deltaY"in b?h0(b):Ph(b),V=e.current.filter(function(J){return J.name===b.type&&(J.target===b.target||b.target===J.shadowParent)&&$2(J.delta,j)})[0];if(V&&V.should){b.cancelable&&b.preventDefault();return}if(!V){var B=(l.current.shards||[]).map(f0).filter(Boolean).filter(function(J){return J.contains(b.target)}),K=B.length>0?u(b,B[0]):!l.current.noIsolation;K&&b.cancelable&&b.preventDefault()}}},[]),p=S.useCallback(function(T,b,j,V){var B={name:T,delta:b,target:j,should:V,shadowParent:q2(j)};e.current.push(B),setTimeout(function(){e.current=e.current.filter(function(K){return K!==B})},1)},[]),m=S.useCallback(function(T){t.current=Ph(T),r.current=void 0},[]),y=S.useCallback(function(T){p(T.type,h0(T),T.target,u(T,n.lockRef.current))},[]),E=S.useCallback(function(T){p(T.type,Ph(T),T.target,u(T,n.lockRef.current))},[]);S.useEffect(function(){return al.push(o),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:E}),document.addEventListener("wheel",d,ol),document.addEventListener("touchmove",d,ol),document.addEventListener("touchstart",m,ol),function(){al=al.filter(function(T){return T!==o}),document.removeEventListener("wheel",d,ol),document.removeEventListener("touchmove",d,ol),document.removeEventListener("touchstart",m,ol)}},[]);var I=n.removeScrollBar,A=n.inert;return S.createElement(S.Fragment,null,A?S.createElement(o,{styles:W2(s)}):null,I?S.createElement(O2,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function q2(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const K2=S2(iC,G2);var pp=S.forwardRef(function(n,e){return S.createElement(fp,es({},n,{ref:e,sideCar:K2}))});pp.classNames=fp.classNames;var Q2=[" ","Enter","ArrowUp","ArrowDown"],Y2=[" ","Enter"],Jo="Select",[mp,gp,X2]=wv(Jo),[Hl]=oo(Jo,[X2,dp]),yp=dp(),[J2,ao]=Hl(Jo),[Z2,eL]=Hl(Jo),uC=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:o,value:l,defaultValue:u,onValueChange:d,dir:p,name:m,autoComplete:y,disabled:E,required:I,form:A}=n,T=yp(e),[b,j]=S.useState(null),[V,B]=S.useState(null),[K,J]=S.useState(!1),Z=sp(p),[P,R]=xu({prop:r,defaultProp:s??!1,onChange:o,caller:Jo}),[k,M]=xu({prop:l,defaultProp:u,onChange:d,caller:Jo}),O=S.useRef(null),F=b?A||!!b.closest("form"):!0,[D,me]=S.useState(new Set),_e=Array.from(D).map(pe=>pe.props.value).join(";");return v.jsx(XI,{...T,children:v.jsxs(J2,{required:I,scope:e,trigger:b,onTriggerChange:j,valueNode:V,onValueNodeChange:B,valueNodeHasChildren:K,onValueNodeHasChildrenChange:J,contentId:Bs(),value:k,onValueChange:M,open:P,onOpenChange:R,dir:Z,triggerPointerDownPosRef:O,disabled:E,children:[v.jsx(mp.Provider,{scope:e,children:v.jsx(Z2,{scope:n.__scopeSelect,onNativeOptionAdd:S.useCallback(pe=>{me(we=>new Set(we).add(pe))},[]),onNativeOptionRemove:S.useCallback(pe=>{me(we=>{const W=new Set(we);return W.delete(pe),W})},[]),children:t})}),F?v.jsxs(kC,{"aria-hidden":!0,required:I,tabIndex:-1,name:m,autoComplete:y,value:k,onChange:pe=>M(pe.target.value),disabled:E,form:A,children:[k===void 0?v.jsx("option",{value:""}):null,Array.from(D)]},_e):null]})})};uC.displayName=Jo;var dC="SelectTrigger",hC=S.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,o=yp(t),l=ao(dC,t),u=l.disabled||r,d=rt(e,l.onTriggerChange),p=gp(t),m=S.useRef("touch"),[y,E,I]=MC(T=>{const b=p().filter(B=>!B.disabled),j=b.find(B=>B.value===l.value),V=OC(b,T,j);V!==void 0&&l.onValueChange(V.value)}),A=T=>{u||(l.onOpenChange(!0),I()),T&&(l.triggerPointerDownPosRef.current={x:Math.round(T.pageX),y:Math.round(T.pageY)})};return v.jsx(JI,{asChild:!0,...o,children:v.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":DC(l.value)?"":void 0,...s,ref:d,onClick:Ae(s.onClick,T=>{T.currentTarget.focus(),m.current!=="mouse"&&A(T)}),onPointerDown:Ae(s.onPointerDown,T=>{m.current=T.pointerType;const b=T.target;b.hasPointerCapture(T.pointerId)&&b.releasePointerCapture(T.pointerId),T.button===0&&T.ctrlKey===!1&&T.pointerType==="mouse"&&(A(T),T.preventDefault())}),onKeyDown:Ae(s.onKeyDown,T=>{const b=y.current!=="";!(T.ctrlKey||T.altKey||T.metaKey)&&T.key.length===1&&E(T.key),!(b&&T.key===" ")&&Q2.includes(T.key)&&(A(),T.preventDefault())})})})});hC.displayName=dC;var fC="SelectValue",pC=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:o,placeholder:l="",...u}=n,d=ao(fC,t),{onValueNodeHasChildrenChange:p}=d,m=o!==void 0,y=rt(e,d.onValueNodeChange);return zt(()=>{p(m)},[p,m]),v.jsx(Ge.span,{...u,ref:y,style:{pointerEvents:"none"},children:DC(d.value)?v.jsx(v.Fragment,{children:l}):o})});pC.displayName=fC;var tL="SelectIcon",mC=S.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return v.jsx(Ge.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});mC.displayName=tL;var nL="SelectPortal",gC=n=>v.jsx(hp,{asChild:!0,...n});gC.displayName=nL;var Zo="SelectContent",yC=S.forwardRef((n,e)=>{const t=ao(Zo,n.__scopeSelect),[r,s]=S.useState();if(zt(()=>{s(new DocumentFragment)},[]),!t.open){const o=r;return o?$u.createPortal(v.jsx(vC,{scope:n.__scopeSelect,children:v.jsx(mp.Slot,{scope:n.__scopeSelect,children:v.jsx("div",{children:n.children})})}),o):null}return v.jsx(_C,{...n,ref:e})});yC.displayName=Zo;var xr=10,[vC,lo]=Hl(Zo),rL="SelectContentImpl",sL=JO("SelectContent.RemoveScroll"),_C=S.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:l,side:u,sideOffset:d,align:p,alignOffset:m,arrowPadding:y,collisionBoundary:E,collisionPadding:I,sticky:A,hideWhenDetached:T,avoidCollisions:b,...j}=n,V=ao(Zo,t),[B,K]=S.useState(null),[J,Z]=S.useState(null),P=rt(e,H=>K(H)),[R,k]=S.useState(null),[M,O]=S.useState(null),F=gp(t),[D,me]=S.useState(!1),_e=S.useRef(!1);S.useEffect(()=>{if(B)return Pv(B)},[B]),Ev();const pe=S.useCallback(H=>{const[oe,...ye]=F().map($e=>$e.ref.current),[Te]=ye.slice(-1),je=document.activeElement;for(const $e of H)if($e===je||($e?.scrollIntoView({block:"nearest"}),$e===oe&&J&&(J.scrollTop=0),$e===Te&&J&&(J.scrollTop=J.scrollHeight),$e?.focus(),document.activeElement!==je))return},[F,J]),we=S.useCallback(()=>pe([R,B]),[pe,R,B]);S.useEffect(()=>{D&&we()},[D,we]);const{onOpenChange:W,triggerPointerDownPosRef:ee}=V;S.useEffect(()=>{if(B){let H={x:0,y:0};const oe=Te=>{H={x:Math.abs(Math.round(Te.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(Te.pageY)-(ee.current?.y??0))}},ye=Te=>{H.x<=10&&H.y<=10?Te.preventDefault():B.contains(Te.target)||W(!1),document.removeEventListener("pointermove",oe),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",ye,{capture:!0})}}},[B,W,ee]),S.useEffect(()=>{const H=()=>W(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[W]);const[ue,z]=MC(H=>{const oe=F().filter(je=>!je.disabled),ye=oe.find(je=>je.ref.current===document.activeElement),Te=OC(oe,H,ye);Te&&setTimeout(()=>Te.ref.current.focus())}),ne=S.useCallback((H,oe,ye)=>{const Te=!_e.current&&!ye;(V.value!==void 0&&V.value===oe||Te)&&(k(H),Te&&(_e.current=!0))},[V.value]),te=S.useCallback(()=>B?.focus(),[B]),se=S.useCallback((H,oe,ye)=>{const Te=!_e.current&&!ye;(V.value!==void 0&&V.value===oe||Te)&&O(H)},[V.value]),he=r==="popper"?Ty:wC,ce=he===Ty?{side:u,sideOffset:d,align:p,alignOffset:m,arrowPadding:y,collisionBoundary:E,collisionPadding:I,sticky:A,hideWhenDetached:T,avoidCollisions:b}:{};return v.jsx(vC,{scope:t,content:B,viewport:J,onViewportChange:Z,itemRefCallback:ne,selectedItem:R,onItemLeave:te,itemTextRefCallback:se,focusSelectedItem:we,selectedItemText:M,position:r,isPositioned:D,searchRef:ue,children:v.jsx(pp,{as:sL,allowPinchZoom:!0,children:v.jsx(op,{asChild:!0,trapped:V.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:Ae(s,H=>{V.trigger?.focus({preventScroll:!0}),H.preventDefault()}),children:v.jsx(ip,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>V.onOpenChange(!1),children:v.jsx(he,{role:"listbox",id:V.contentId,"data-state":V.open?"open":"closed",dir:V.dir,onContextMenu:H=>H.preventDefault(),...j,...ce,onPlaced:()=>me(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Ae(j.onKeyDown,H=>{const oe=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!oe&&H.key.length===1&&z(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let Te=F().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(H.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const je=H.target,$e=Te.indexOf(je);Te=Te.slice($e+1)}setTimeout(()=>pe(Te)),H.preventDefault()}})})})})})})});_C.displayName=rL;var iL="SelectItemAlignedPosition",wC=S.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,o=ao(Zo,t),l=lo(Zo,t),[u,d]=S.useState(null),[p,m]=S.useState(null),y=rt(e,P=>m(P)),E=gp(t),I=S.useRef(!1),A=S.useRef(!0),{viewport:T,selectedItem:b,selectedItemText:j,focusSelectedItem:V}=l,B=S.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&p&&T&&b&&j){const P=o.trigger.getBoundingClientRect(),R=p.getBoundingClientRect(),k=o.valueNode.getBoundingClientRect(),M=j.getBoundingClientRect();if(o.dir!=="rtl"){const je=M.left-R.left,$e=k.left-je,Ue=P.left-$e,ht=P.width+Ue,An=Math.max(ht,R.width),xn=window.innerWidth-xr,Tn=vy($e,[xr,Math.max(xr,xn-An)]);u.style.minWidth=ht+"px",u.style.left=Tn+"px"}else{const je=R.right-M.right,$e=window.innerWidth-k.right-je,Ue=window.innerWidth-P.right-$e,ht=P.width+Ue,An=Math.max(ht,R.width),xn=window.innerWidth-xr,Tn=vy($e,[xr,Math.max(xr,xn-An)]);u.style.minWidth=ht+"px",u.style.right=Tn+"px"}const O=E(),F=window.innerHeight-xr*2,D=T.scrollHeight,me=window.getComputedStyle(p),_e=parseInt(me.borderTopWidth,10),pe=parseInt(me.paddingTop,10),we=parseInt(me.borderBottomWidth,10),W=parseInt(me.paddingBottom,10),ee=_e+pe+D+W+we,ue=Math.min(b.offsetHeight*5,ee),z=window.getComputedStyle(T),ne=parseInt(z.paddingTop,10),te=parseInt(z.paddingBottom,10),se=P.top+P.height/2-xr,he=F-se,ce=b.offsetHeight/2,H=b.offsetTop+ce,oe=_e+pe+H,ye=ee-oe;if(oe<=se){const je=O.length>0&&b===O[O.length-1].ref.current;u.style.bottom="0px";const $e=p.clientHeight-T.offsetTop-T.offsetHeight,Ue=Math.max(he,ce+(je?te:0)+$e+we),ht=oe+Ue;u.style.height=ht+"px"}else{const je=O.length>0&&b===O[0].ref.current;u.style.top="0px";const Ue=Math.max(se,_e+T.offsetTop+(je?ne:0)+ce)+ye;u.style.height=Ue+"px",T.scrollTop=oe-se+T.offsetTop}u.style.margin=`${xr}px 0`,u.style.minHeight=ue+"px",u.style.maxHeight=F+"px",r?.(),requestAnimationFrame(()=>I.current=!0)}},[E,o.trigger,o.valueNode,u,p,T,b,j,o.dir,r]);zt(()=>B(),[B]);const[K,J]=S.useState();zt(()=>{p&&J(window.getComputedStyle(p).zIndex)},[p]);const Z=S.useCallback(P=>{P&&A.current===!0&&(B(),V?.(),A.current=!1)},[B,V]);return v.jsx(aL,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:I,onScrollButtonChange:Z,children:v.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:K},children:v.jsx(Ge.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});wC.displayName=iL;var oL="SelectPopperPosition",Ty=S.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=xr,...o}=n,l=yp(t);return v.jsx(ZI,{...l,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ty.displayName=oL;var[aL,Nv]=Hl(Zo,{}),Iy="SelectViewport",EC=S.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,o=lo(Iy,t),l=Nv(Iy,t),u=rt(e,o.onViewportChange),d=S.useRef(0);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),v.jsx(mp.Slot,{scope:t,children:v.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ae(s.onScroll,p=>{const m=p.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:E}=l;if(E?.current&&y){const I=Math.abs(d.current-m.scrollTop);if(I>0){const A=window.innerHeight-xr*2,T=parseFloat(y.style.minHeight),b=parseFloat(y.style.height),j=Math.max(T,b);if(j<A){const V=j+I,B=Math.min(A,V),K=V-B;y.style.height=B+"px",y.style.bottom==="0px"&&(m.scrollTop=K>0?K:0,y.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});EC.displayName=Iy;var SC="SelectGroup",[lL,cL]=Hl(SC),uL=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Bs();return v.jsx(lL,{scope:t,id:s,children:v.jsx(Ge.div,{role:"group","aria-labelledby":s,...r,ref:e})})});uL.displayName=SC;var xC="SelectLabel",dL=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=cL(xC,t);return v.jsx(Ge.div,{id:s.id,...r,ref:e})});dL.displayName=xC;var ff="SelectItem",[hL,TC]=Hl(ff),IC=S.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:o,...l}=n,u=ao(ff,t),d=lo(ff,t),p=u.value===r,[m,y]=S.useState(o??""),[E,I]=S.useState(!1),A=rt(e,V=>d.itemRefCallback?.(V,r,s)),T=Bs(),b=S.useRef("touch"),j=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.jsx(hL,{scope:t,value:r,disabled:s,textId:T,isSelected:p,onItemTextChange:S.useCallback(V=>{y(B=>B||(V?.textContent??"").trim())},[]),children:v.jsx(mp.ItemSlot,{scope:t,value:r,disabled:s,textValue:m,children:v.jsx(Ge.div,{role:"option","aria-labelledby":T,"data-highlighted":E?"":void 0,"aria-selected":p&&E,"data-state":p?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:A,onFocus:Ae(l.onFocus,()=>I(!0)),onBlur:Ae(l.onBlur,()=>I(!1)),onClick:Ae(l.onClick,()=>{b.current!=="mouse"&&j()}),onPointerUp:Ae(l.onPointerUp,()=>{b.current==="mouse"&&j()}),onPointerDown:Ae(l.onPointerDown,V=>{b.current=V.pointerType}),onPointerMove:Ae(l.onPointerMove,V=>{b.current=V.pointerType,s?d.onItemLeave?.():b.current==="mouse"&&V.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(l.onPointerLeave,V=>{V.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Ae(l.onKeyDown,V=>{d.searchRef?.current!==""&&V.key===" "||(Y2.includes(V.key)&&j(),V.key===" "&&V.preventDefault())})})})})});IC.displayName=ff;var Zc="SelectItemText",CC=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...o}=n,l=ao(Zc,t),u=lo(Zc,t),d=TC(Zc,t),p=eL(Zc,t),[m,y]=S.useState(null),E=rt(e,j=>y(j),d.onItemTextChange,j=>u.itemTextRefCallback?.(j,d.value,d.disabled)),I=m?.textContent,A=S.useMemo(()=>v.jsx("option",{value:d.value,disabled:d.disabled,children:I},d.value),[d.disabled,d.value,I]),{onNativeOptionAdd:T,onNativeOptionRemove:b}=p;return zt(()=>(T(A),()=>b(A)),[T,b,A]),v.jsxs(v.Fragment,{children:[v.jsx(Ge.span,{id:d.textId,...o,ref:E}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?$u.createPortal(o.children,l.valueNode):null]})});CC.displayName=Zc;var RC="SelectItemIndicator",bC=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return TC(RC,t).isSelected?v.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});bC.displayName=RC;var Cy="SelectScrollUpButton",AC=S.forwardRef((n,e)=>{const t=lo(Cy,n.__scopeSelect),r=Nv(Cy,n.__scopeSelect),[s,o]=S.useState(!1),l=rt(e,r.onScrollButtonChange);return zt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=d.scrollTop>0;o(p)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?v.jsx(NC,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});AC.displayName=Cy;var Ry="SelectScrollDownButton",PC=S.forwardRef((n,e)=>{const t=lo(Ry,n.__scopeSelect),r=Nv(Ry,n.__scopeSelect),[s,o]=S.useState(!1),l=rt(e,r.onScrollButtonChange);return zt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<p;o(m)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?v.jsx(NC,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});PC.displayName=Ry;var NC=S.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,o=lo("SelectScrollButton",t),l=S.useRef(null),u=gp(t),d=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),zt(()=>{u().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),v.jsx(Ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ae(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Ae(s.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Ae(s.onPointerLeave,()=>{d()})})}),fL="SelectSeparator",pL=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return v.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e})});pL.displayName=fL;var by="SelectArrow",mL=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=yp(t),o=ao(by,t),l=lo(by,t);return o.open&&l.position==="popper"?v.jsx(eC,{...s,...r,ref:e}):null});mL.displayName=by;var gL="SelectBubbleInput",kC=S.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=S.useRef(null),o=rt(r,s),l=a2(e);return S.useEffect(()=>{const u=s.current;if(!u)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&m){const y=new Event("change",{bubbles:!0});m.call(u,e),u.dispatchEvent(y)}},[l,e]),v.jsx(Ge.select,{...t,style:{...tC,...t.style},ref:o,defaultValue:e})});kC.displayName=gL;function DC(n){return n===""||n===void 0}function MC(n){const e=Jt(n),t=S.useRef(""),r=S.useRef(0),s=S.useCallback(l=>{const u=t.current+l;e(u),(function d(p){t.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(u)},[e]),o=S.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,o]}function OC(n,e,t){const s=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=yL(n,Math.max(o,0));s.length===1&&(l=l.filter(p=>p!==t));const d=l.find(p=>p.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function yL(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var vL=uC,_L=hC,wL=pC,EL=mC,SL=gC,xL=yC,TL=EC,IL=IC,CL=CC,RL=bC,bL=AC,AL=PC;function pf({...n}){return v.jsx(vL,{"data-slot":"select",...n})}function mf({...n}){return v.jsx(wL,{"data-slot":"select-value",...n})}function gf({className:n,size:e="default",children:t,...r}){return v.jsxs(_L,{"data-slot":"select-trigger","data-size":e,className:ot("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,v.jsx(EL,{asChild:!0,children:v.jsx(rI,{className:"size-4 opacity-50"})})]})}function yf({className:n,children:e,position:t="popper",...r}){return v.jsx(SL,{children:v.jsxs(xL,{"data-slot":"select-content",className:ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[v.jsx(PL,{}),v.jsx(TL,{className:ot("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),v.jsx(NL,{})]})})}function Al({className:n,children:e,...t}){return v.jsxs(IL,{"data-slot":"select-item",className:ot("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[v.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:v.jsx(RL,{children:v.jsx(Vk,{className:"size-4"})})}),v.jsx(CL,{children:e})]})}function PL({className:n,...e}){return v.jsx(bL,{"data-slot":"select-scroll-up-button",className:ot("flex cursor-default items-center justify-center py-1",n),...e,children:v.jsx(Bk,{className:"size-4"})})}function NL({className:n,...e}){return v.jsx(AL,{"data-slot":"select-scroll-down-button",className:ot("flex cursor-default items-center justify-center py-1",n),...e,children:v.jsx(rI,{className:"size-4"})})}const kL="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function vf(n){const[e,t]=S.useState(!1),r=()=>{t(!0)},{src:s,alt:o,style:l,className:u,...d}=n;return e?v.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${u??""}`,style:l,children:v.jsx("div",{className:"flex items-center justify-center w-full h-full",children:v.jsx("img",{src:kL,alt:"Error loading image",...d,"data-original-url":s})})}):v.jsx("img",{src:s,alt:o,className:u,style:l,...d,onError:r})}const DL=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],ML=({routes:n,onRouteClick:e,filterGrade:t,onFilterChange:r,selectedRouteId:s})=>v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(sI,{className:"size-4 text-muted-foreground"}),v.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by grade:"})]}),v.jsxs(pf,{value:t||"all",onValueChange:o=>r(o==="all"?"":o),children:[v.jsx(gf,{className:"w-32",children:v.jsx(mf,{placeholder:"All grades"})}),v.jsxs(yf,{children:[v.jsx(Al,{value:"all",children:"All grades"}),DL.map(o=>v.jsx(Al,{value:o,children:o},o))]})]}),t&&v.jsx(Rn,{variant:"outline",size:"sm",onClick:()=>r(""),children:"Clear filter"})]}),v.jsxs("div",{className:"landscape-mobile:space-y-4",children:[v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4 landscape-mobile:hidden",children:n.map(o=>v.jsxs(af,{className:`cursor-pointer hover:shadow-lg transition-all overflow-hidden ${s===o.id?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>e(o),children:[v.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[v.jsx(vf,{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"}),v.jsx("div",{className:"absolute top-3 left-3",children:v.jsx(Ls,{variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:o.grade})}),v.jsx("div",{className:"absolute top-3 right-3",children:v.jsx(Ls,{variant:"outline",className:"bg-background/90 backdrop-blur-sm border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-background)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff"},children:o.color})})]}),v.jsx(_v,{className:"p-4",children:v.jsxs("div",{className:"space-y-3",children:[v.jsx("h3",{className:"font-medium truncate",children:o.name}),v.jsx("div",{className:"flex items-center justify-center",children:v.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:5},(l,u)=>v.jsx(wu,{className:`size-4 ${u<Math.round(o.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},u)),v.jsx("span",{className:"text-sm font-medium ml-2",children:o.averageRating>0?o.averageRating.toFixed(1):""}),v.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",o.totalReviews,")"]})]})}),v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"text-xs text-muted-foreground",children:["Set by ",o.setter]})})]})})]},o.id))}),v.jsx("div",{className:"hidden landscape-mobile:block space-y-4",children:n.map(o=>{const l=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=p=>Array.from({length:5},(m,y)=>v.jsx(wu,{className:`size-3 ${y<p?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},y)),d=p=>{const m=new Date(p),E=Math.abs(new Date().getTime()-m.getTime());return Math.ceil(E/(1e3*60*60*24))};return v.jsx(af,{className:`cursor-pointer hover:shadow-lg transition-all overflow-hidden ${s===o.id?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>e(o),children:v.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-3",children:[v.jsx("h3",{className:"text-2xl font-medium",children:o.name}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Ls,{variant:"secondary",className:"text-base px-3 py-1.5",children:o.grade}),v.jsxs(Ls,{variant:"outline",className:"text-base px-3 py-1.5 border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-background)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff",borderColor:"transparent"},children:[o.color," holds"]}),d(o.dateSet)<=7&&v.jsx(Ls,{variant:"outline",className:"text-xs px-2 py-1 bg-green-50 text-green-700 border-green-200",children:"New"})]})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(oI,{className:"size-4 text-muted-foreground"}),v.jsxs("span",{className:"text-sm",children:["Route setter: ",v.jsx("strong",{children:o.setter})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(nI,{className:"size-4 text-muted-foreground"}),v.jsxs("span",{className:"text-sm",children:["Set on ",l(o.dateSet)]}),v.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",d(o.dateSet)," days ago)"]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex items-center gap-1",children:u(Math.round(o.averageRating))}),v.jsx("span",{className:"font-medium",children:o.averageRating>0?o.averageRating.toFixed(1):""}),v.jsxs("span",{className:"text-muted-foreground",children:["(",o.totalReviews," review",o.totalReviews!==1?"s":"",")"]})]}),o.totalReviews>0&&v.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[v.jsx(iI,{className:"size-4"}),v.jsx("span",{children:o.totalReviews===1?"Latest review":`${o.totalReviews} climbers have reviewed this route`})]})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"aspect-[4/3] relative overflow-hidden rounded-lg",children:v.jsx(vf,{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"})}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"font-medium text-sm",children:"Route Description"}),v.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:o.description||"No description available for this route."})]})]})]})},o.id)})})]}),n.length===0&&v.jsx("div",{className:"text-center py-12",children:v.jsx("p",{className:"text-muted-foreground",children:"No routes found matching your filter."})})]});function OL(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var hr=n=>{const{present:e,children:t}=n,r=LL(e),s=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),o=rt(r.ref,VL(s));return typeof t=="function"||r.isPresent?S.cloneElement(s,{ref:o}):null};hr.displayName="Presence";function LL(n){const[e,t]=S.useState(),r=S.useRef(null),s=S.useRef(n),o=S.useRef("none"),l=n?"mounted":"unmounted",[u,d]=OL(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const p=Nh(r.current);o.current=u==="mounted"?p:"none"},[u]),zt(()=>{const p=r.current,m=s.current;if(m!==n){const E=o.current,I=Nh(p);n?d("MOUNT"):I==="none"||p?.display==="none"?d("UNMOUNT"):d(m&&E!==I?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),zt(()=>{if(e){let p;const m=e.ownerDocument.defaultView??window,y=I=>{const T=Nh(r.current).includes(CSS.escape(I.animationName));if(I.target===e&&T&&(d("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",p=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},E=I=>{I.target===e&&(o.current=Nh(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(p),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(p=>{r.current=p?getComputedStyle(p):null,t(p)},[])}}function Nh(n){return n?.animationName||"none"}function VL(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function jL(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var kv="ScrollArea",[LC]=oo(kv),[FL,fr]=LC(kv),VC=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:o=600,...l}=n,[u,d]=S.useState(null),[p,m]=S.useState(null),[y,E]=S.useState(null),[I,A]=S.useState(null),[T,b]=S.useState(null),[j,V]=S.useState(0),[B,K]=S.useState(0),[J,Z]=S.useState(!1),[P,R]=S.useState(!1),k=rt(e,O=>d(O)),M=sp(s);return v.jsx(FL,{scope:t,type:r,dir:M,scrollHideDelay:o,scrollArea:u,viewport:p,onViewportChange:m,content:y,onContentChange:E,scrollbarX:I,onScrollbarXChange:A,scrollbarXEnabled:J,onScrollbarXEnabledChange:Z,scrollbarY:T,onScrollbarYChange:b,scrollbarYEnabled:P,onScrollbarYEnabledChange:R,onCornerWidthChange:V,onCornerHeightChange:K,children:v.jsx(Ge.div,{dir:M,...l,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":B+"px",...n.style}})})});VC.displayName=kv;var jC="ScrollAreaViewport",FC=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...o}=n,l=fr(jC,t),u=S.useRef(null),d=rt(e,u,l.onViewportChange);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),v.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...n.style},children:v.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});FC.displayName=jC;var ms="ScrollAreaScrollbar",UC=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=fr(ms,n.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,u=n.orientation==="horizontal";return S.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),s.type==="hover"?v.jsx(UL,{...r,ref:e,forceMount:t}):s.type==="scroll"?v.jsx(zL,{...r,ref:e,forceMount:t}):s.type==="auto"?v.jsx(zC,{...r,ref:e,forceMount:t}):s.type==="always"?v.jsx(Dv,{...r,ref:e}):null});UC.displayName=ms;var UL=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=fr(ms,n.__scopeScrollArea),[o,l]=S.useState(!1);return S.useEffect(()=>{const u=s.scrollArea;let d=0;if(u){const p=()=>{window.clearTimeout(d),l(!0)},m=()=>{d=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),v.jsx(hr,{present:t||o,children:v.jsx(zC,{"data-state":o?"visible":"hidden",...r,ref:e})})}),zL=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=fr(ms,n.__scopeScrollArea),o=n.orientation==="horizontal",l=_p(()=>d("SCROLL_END"),100),[u,d]=jL("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,s.scrollHideDelay,d]),S.useEffect(()=>{const p=s.viewport,m=o?"scrollLeft":"scrollTop";if(p){let y=p[m];const E=()=>{const I=p[m];y!==I&&(d("SCROLL"),l()),y=I};return p.addEventListener("scroll",E),()=>p.removeEventListener("scroll",E)}},[s.viewport,o,d,l]),v.jsx(hr,{present:t||u!=="hidden",children:v.jsx(Dv,{"data-state":u==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ae(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Ae(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),zC=S.forwardRef((n,e)=>{const t=fr(ms,n.__scopeScrollArea),{forceMount:r,...s}=n,[o,l]=S.useState(!1),u=n.orientation==="horizontal",d=_p(()=>{if(t.viewport){const p=t.viewport.offsetWidth<t.viewport.scrollWidth,m=t.viewport.offsetHeight<t.viewport.scrollHeight;l(u?p:m)}},10);return Pl(t.viewport,d),Pl(t.content,d),v.jsx(hr,{present:r||o,children:v.jsx(Dv,{"data-state":o?"visible":"hidden",...s,ref:e})})}),Dv=S.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=fr(ms,n.__scopeScrollArea),o=S.useRef(null),l=S.useRef(0),[u,d]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=GC(u.viewport,u.content),m={...r,sizes:u,onSizesChange:d,hasThumb:p>0&&p<1,onThumbChange:E=>o.current=E,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:E=>l.current=E};function y(E,I){return qL(E,l.current,u,I)}return t==="horizontal"?v.jsx(BL,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const E=s.viewport.scrollLeft,I=p0(E,u,s.dir);o.current.style.transform=`translate3d(${I}px, 0, 0)`}},onWheelScroll:E=>{s.viewport&&(s.viewport.scrollLeft=E)},onDragScroll:E=>{s.viewport&&(s.viewport.scrollLeft=y(E,s.dir))}}):t==="vertical"?v.jsx($L,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const E=s.viewport.scrollTop,I=p0(E,u);o.current.style.transform=`translate3d(0, ${I}px, 0)`}},onWheelScroll:E=>{s.viewport&&(s.viewport.scrollTop=E)},onDragScroll:E=>{s.viewport&&(s.viewport.scrollTop=y(E))}}):null}),BL=S.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=fr(ms,n.__scopeScrollArea),[l,u]=S.useState(),d=S.useRef(null),p=rt(e,d,o.onScrollbarXChange);return S.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),v.jsx($C,{"data-orientation":"horizontal",...s,ref:p,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":vp(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.x),onDragScroll:m=>n.onDragScroll(m.x),onWheelScroll:(m,y)=>{if(o.viewport){const E=o.viewport.scrollLeft+m.deltaX;n.onWheelScroll(E),KC(E,y)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:wf(l.paddingLeft),paddingEnd:wf(l.paddingRight)}})}})}),$L=S.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=fr(ms,n.__scopeScrollArea),[l,u]=S.useState(),d=S.useRef(null),p=rt(e,d,o.onScrollbarYChange);return S.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),v.jsx($C,{"data-orientation":"vertical",...s,ref:p,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":vp(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.y),onDragScroll:m=>n.onDragScroll(m.y),onWheelScroll:(m,y)=>{if(o.viewport){const E=o.viewport.scrollTop+m.deltaY;n.onWheelScroll(E),KC(E,y)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:wf(l.paddingTop),paddingEnd:wf(l.paddingBottom)}})}})}),[WL,BC]=LC(ms),$C=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:p,onWheelScroll:m,onResize:y,...E}=n,I=fr(ms,t),[A,T]=S.useState(null),b=rt(e,k=>T(k)),j=S.useRef(null),V=S.useRef(""),B=I.viewport,K=r.content-r.viewport,J=Jt(m),Z=Jt(d),P=_p(y,10);function R(k){if(j.current){const M=k.clientX-j.current.left,O=k.clientY-j.current.top;p({x:M,y:O})}}return S.useEffect(()=>{const k=M=>{const O=M.target;A?.contains(O)&&J(M,K)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[B,A,K,J]),S.useEffect(Z,[r,Z]),Pl(A,P),Pl(I.content,P),v.jsx(WL,{scope:t,scrollbar:A,hasThumb:s,onThumbChange:Jt(o),onThumbPointerUp:Jt(l),onThumbPositionChange:Z,onThumbPointerDown:Jt(u),children:v.jsx(Ge.div,{...E,ref:b,style:{position:"absolute",...E.style},onPointerDown:Ae(n.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),j.current=A.getBoundingClientRect(),V.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I.viewport&&(I.viewport.style.scrollBehavior="auto"),R(k))}),onPointerMove:Ae(n.onPointerMove,R),onPointerUp:Ae(n.onPointerUp,k=>{const M=k.target;M.hasPointerCapture(k.pointerId)&&M.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=V.current,I.viewport&&(I.viewport.style.scrollBehavior=""),j.current=null})})})}),_f="ScrollAreaThumb",WC=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=BC(_f,n.__scopeScrollArea);return v.jsx(hr,{present:t||s.hasThumb,children:v.jsx(HL,{ref:e,...r})})}),HL=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,o=fr(_f,t),l=BC(_f,t),{onThumbPositionChange:u}=l,d=rt(e,y=>l.onThumbChange(y)),p=S.useRef(void 0),m=_p(()=>{p.current&&(p.current(),p.current=void 0)},100);return S.useEffect(()=>{const y=o.viewport;if(y){const E=()=>{if(m(),!p.current){const I=KL(y,u);p.current=I,u()}};return u(),y.addEventListener("scroll",E),()=>y.removeEventListener("scroll",E)}},[o.viewport,m,u]),v.jsx(Ge.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ae(n.onPointerDownCapture,y=>{const I=y.target.getBoundingClientRect(),A=y.clientX-I.left,T=y.clientY-I.top;l.onThumbPointerDown({x:A,y:T})}),onPointerUp:Ae(n.onPointerUp,l.onThumbPointerUp)})});WC.displayName=_f;var Mv="ScrollAreaCorner",HC=S.forwardRef((n,e)=>{const t=fr(Mv,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?v.jsx(GL,{...n,ref:e}):null});HC.displayName=Mv;var GL=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=fr(Mv,t),[o,l]=S.useState(0),[u,d]=S.useState(0),p=!!(o&&u);return Pl(s.scrollbarX,()=>{const m=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(m),d(m)}),Pl(s.scrollbarY,()=>{const m=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(m),l(m)}),p?v.jsx(Ge.div,{...r,ref:e,style:{width:o,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function wf(n){return n?parseInt(n,10):0}function GC(n,e){const t=n/e;return isNaN(t)?0:t}function vp(n){const e=GC(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function qL(n,e,t,r="ltr"){const s=vp(t),o=s/2,l=e||o,u=s-l,d=t.scrollbar.paddingStart+l,p=t.scrollbar.size-t.scrollbar.paddingEnd-u,m=t.content-t.viewport,y=r==="ltr"?[0,m]:[m*-1,0];return qC([d,p],y)(n)}function p0(n,e,t="ltr"){const r=vp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,l=e.content-e.viewport,u=o-r,d=t==="ltr"?[0,l]:[l*-1,0],p=vy(n,d);return qC([0,l],[0,u])(p)}function qC(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function KC(n,e){return n>0&&n<e}var KL=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return(function s(){const o={left:n.scrollLeft,top:n.scrollTop},l=t.left!==o.left,u=t.top!==o.top;(l||u)&&e(),t=o,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function _p(n,e){const t=Jt(n),r=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),S.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Pl(n,e){const t=Jt(e);zt(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var QL=VC,YL=FC,XL=HC;function QC({className:n,children:e,...t}){return v.jsxs(QL,{"data-slot":"scroll-area",className:ot("relative",n),...t,children:[v.jsx(YL,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),v.jsx(JL,{}),v.jsx(XL,{})]})}function JL({className:n,orientation:e="vertical",...t}){return v.jsx(UC,{"data-slot":"scroll-area-scrollbar",orientation:e,className:ot("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:v.jsx(WC,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const ZL=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],eV=({routes:n,onRouteClick:e,filterGrade:t,onFilterChange:r,selectedRouteId:s})=>v.jsxs("div",{className:"h-full flex flex-col",children:[v.jsxs("div",{className:"p-4 border-b space-y-4 flex-shrink-0",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(sI,{className:"size-4 text-muted-foreground"}),v.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by grade"})]}),v.jsxs(pf,{value:t||"all",onValueChange:o=>r(o==="all"?"":o),children:[v.jsx(gf,{className:"w-full",children:v.jsx(mf,{placeholder:"All grades"})}),v.jsxs(yf,{children:[v.jsx(Al,{value:"all",children:"All grades"}),ZL.map(o=>v.jsx(Al,{value:o,children:o},o))]})]}),t&&v.jsx(Rn,{variant:"outline",size:"sm",onClick:()=>r(""),className:"w-full",children:"Clear filter"})]}),v.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.length," route",n.length!==1?"s":""]})]}),v.jsxs(QC,{className:"flex-1",children:[v.jsx("div",{className:"divide-y divide-border",children:n.map(o=>v.jsx("button",{onClick:l=>{l.preventDefault(),e(o)},type:"button",className:`w-full text-left p-4 hover:bg-accent transition-colors ${s===o.id?"bg-accent border-l-4 border-l-primary":"border-l-4 border-l-transparent"}`,children:v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-start justify-between gap-2",children:[v.jsx("h3",{className:`font-medium line-clamp-1 ${s===o.id?"text-primary":""}`,children:o.name}),v.jsx(Uk,{className:`size-4 flex-shrink-0 ${s===o.id?"text-primary":"text-muted-foreground"}`})]}),v.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[v.jsx(Ls,{variant:"secondary",className:"text-xs",children:o.grade}),v.jsx(Ls,{variant:"outline",className:"text-xs border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-muted)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":o.color.toLowerCase()==="yellow"?"#eab308":o.color.toLowerCase()==="purple"?"#a855f7":o.color.toLowerCase()==="orange"?"#f97316":"var(--color-muted)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff"},children:o.color})]}),v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(l,u)=>v.jsx(wu,{className:`size-3 ${u<Math.round(o.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},u))}),v.jsx("span",{className:"text-xs text-muted-foreground",children:o.averageRating>0?o.averageRating.toFixed(1):""}),v.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",o.totalReviews,")"]})]}),v.jsxs("div",{className:"text-xs text-muted-foreground",children:["Set by ",o.setter]})]})},o.id))}),n.length===0&&v.jsx("div",{className:"p-8 text-center",children:v.jsx("p",{className:"text-sm text-muted-foreground",children:"No routes found matching your filter."})})]})]});var tV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nV=tV.reduce((n,e)=>{const t=rp(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),rV="Separator",m0="horizontal",sV=["horizontal","vertical"],YC=S.forwardRef((n,e)=>{const{decorative:t,orientation:r=m0,...s}=n,o=iV(r)?r:m0,u=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return v.jsx(nV.div,{"data-orientation":o,...u,...s,ref:e})});YC.displayName=rV;function iV(n){return sV.includes(n)}var oV=YC;function aV({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return v.jsx(oV,{"data-slot":"separator-root",decorative:t,orientation:e,className:ot("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}function XC({className:n,...e}){return v.jsx("textarea",{"data-slot":"textarea",className:ot("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}var lV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cV=lV.reduce((n,e)=>{const t=rp(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),uV="Label",JC=S.forwardRef((n,e)=>v.jsx(cV.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));JC.displayName=uV;var dV=JC;function Li({className:n,...e}){return v.jsx(dV,{"data-slot":"label",className:ot("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}const hV=({onSubmit:n,onCancel:e,currentUser:t})=>{const[r,s]=S.useState(0),[o,l]=S.useState(""),[u,d]=S.useState(0),p=E=>{E.preventDefault(),!(r===0||!o.trim())&&(n({rating:r,comment:o.trim()}),s(0),l(""))},m=()=>v.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:5},(E,I)=>{const A=I+1,T=A<=(u||r);return v.jsx("button",{type:"button",className:"p-1 hover:scale-110 transition-transform",onClick:()=>s(A),onMouseEnter:()=>d(A),onMouseLeave:()=>d(0),children:v.jsx(wu,{className:`size-6 transition-colors ${T?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-400"}`})},I)}),v.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:r>0?`${r} star${r!==1?"s":""}`:"Select rating"})]}),y=r>0&&o.trim();return v.jsxs("form",{onSubmit:p,className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("h3",{className:"font-medium",children:"Write a Review"}),v.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reviewing as ",t.displayName||t.email||"Anonymous"]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{children:"Rating"}),m()]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{htmlFor:"comment",children:"Comment"}),v.jsx(XC,{id:"comment",placeholder:"Share your thoughts about this route...",value:o,onChange:E=>l(E.target.value),rows:4})]}),v.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[v.jsx(Rn,{type:"submit",disabled:!y,children:"Submit Review"}),v.jsx(Rn,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})},g0=({route:n,onBack:e,onAddReview:t,currentUser:r,showBackButton:s=!0})=>{const[o,l]=S.useState(!1),u=m=>{t(m),l(!1)},d=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),p=m=>Array.from({length:5},(y,E)=>v.jsx(wu,{className:`size-4 ${E<m?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},E));return v.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[s&&v.jsxs(Rn,{variant:"ghost",onClick:e,className:"gap-2",children:[v.jsx(tI,{className:"size-4"}),"Back to Gallery"]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsx("div",{className:"space-y-6",children:v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsx("div",{className:"aspect-[4/3] relative overflow-hidden rounded-lg",children:v.jsx(vf,{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"})}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("h1",{className:"text-3xl landscape-mobile:text-2xl xl:text-3xl font-medium",children:n.name}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Ls,{variant:"secondary",className:"text-base px-3 py-1",children:n.grade}),v.jsx(Ls,{variant:"outline",style:{backgroundColor:n.color.toLowerCase()==="multi-color"?"var(--color-background)":n.color.toLowerCase()==="red"?"#ef4444":n.color.toLowerCase()==="blue"?"#3b82f6":n.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:n.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff",borderColor:"transparent"},children:n.color})]})]}),v.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(oI,{className:"size-4 text-muted-foreground"}),v.jsxs("span",{children:["Set by ",v.jsx("strong",{children:n.setter})]})]}),v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(nI,{className:"size-4 text-muted-foreground"}),v.jsxs("span",{children:["Set on ",d(n.dateSet)]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex items-center gap-1",children:p(Math.round(n.averageRating))}),v.jsx("span",{className:"font-medium",children:n.averageRating>0?n.averageRating.toFixed(1):""}),v.jsxs("span",{className:"text-muted-foreground",children:["(",n.totalReviews," review",n.totalReviews!==1?"s":"",")"]})]})]})]})]})}),v.jsx("div",{className:"landscape-mobile:max-h-[80vh] landscape-mobile:overflow-hidden landscape-mobile:flex landscape-mobile:flex-col",children:v.jsxs(af,{className:"landscape-mobile:flex landscape-mobile:flex-col landscape-mobile:h-full landscape-mobile:min-h-0",children:[v.jsx(SI,{className:"landscape-mobile:flex-shrink-0",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(iI,{className:"size-5"}),v.jsx("h2",{children:"Reviews"})]}),v.jsx(Rn,{onClick:()=>l(!0),size:"sm",className:"landscape-mobile:text-sm",children:"Write a Review"})]})}),v.jsxs(_v,{className:"space-y-4 landscape-mobile:flex-1 landscape-mobile:overflow-y-auto landscape-mobile:min-h-0",children:[o&&v.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:v.jsx(hV,{onSubmit:u,onCancel:()=>l(!1),currentUser:r})}),n.reviews.length>0?v.jsx("div",{className:"space-y-4",children:n.reviews.map((m,y)=>v.jsxs("div",{children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("div",{className:"flex items-start justify-between",children:v.jsxs("div",{className:"space-y-1",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"font-medium",children:m.author}),v.jsx("div",{className:"flex items-center gap-1",children:p(m.rating)})]}),v.jsx("p",{className:"text-sm text-muted-foreground",children:d(m.date)})]})}),v.jsx("p",{className:"text-sm leading-relaxed",children:m.comment})]}),y<n.reviews.length-1&&v.jsx(aV,{className:"mt-4"})]},m.id))}):v.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No reviews yet. Be the first to review this route!"})]})]})})]})]})};function y0({className:n,type:e,...t}){return v.jsx("input",{type:e,"data-slot":"input",className:ot("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}const fV=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],pV=["Red","Blue","Green","Yellow","Purple","Orange","Black","White","Multi-color"];function mV({onSave:n,onCancel:e}){const[t,r]=S.useState({name:"",grade:"",color:"",description:"",setter:"",imageUrl:""}),[s,o]=S.useState(""),[l,u]=S.useState(!1),d=(T,b)=>{r(j=>({...j,[T]:b}))},p=T=>{if(T&&T.type.startsWith("image/")){const b=new FileReader;b.onload=j=>{const V=j.target?.result;o(V),r(B=>({...B,imageUrl:V}))},b.readAsDataURL(T)}},m=T=>{T.preventDefault(),T.stopPropagation(),T.type==="dragenter"||T.type==="dragover"?u(!0):T.type==="dragleave"&&u(!1)},y=T=>{T.preventDefault(),T.stopPropagation(),u(!1);const b=T.dataTransfer.files;b&&b[0]&&p(b[0])},E=T=>{const b=T.target.files;b&&b[0]&&p(b[0])},I=T=>{if(T.preventDefault(),!t.name||!t.grade||!t.color||!t.setter)return;const b={...t,dateSet:new Date().toISOString().split("T")[0],imageUrl:t.imageUrl||"https://images.unsplash.com/photo-1730659071194-4c833ac5da4e?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxpbmRvb3IlMjByb2NrJTIwY2xpbWJpbmclMjB3YWxsJTIwY29sb3JmdWwlMjBob2xkc3xlbnwxfHx8fDE3NTg3MDAyNTZ8MA&ixlib=rb-4.1.0&q=80&w=1080"};n(b)},A=t.name&&t.grade&&t.color&&t.setter;return v.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[v.jsxs(Rn,{variant:"ghost",onClick:e,className:"gap-2",children:[v.jsx(tI,{className:"size-4"}),"Back to Gallery"]}),v.jsxs(af,{children:[v.jsx(SI,{children:v.jsx($D,{children:"Add New Route"})}),v.jsx(_v,{children:v.jsxs("form",{onSubmit:I,className:"space-y-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{children:"Route Photo"}),v.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${l?"border-primary bg-primary/10":""}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:y,children:s?v.jsxs("div",{className:"relative",children:[v.jsx(vf,{src:s,alt:"Route preview",className:"w-full h-48 object-cover rounded-lg"}),v.jsx(Rn,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{o(""),r(T=>({...T,imageUrl:""}))},children:v.jsx(aI,{className:"size-4"})})]}):v.jsxs("div",{className:"space-y-4",children:[v.jsx(Jk,{className:"size-12 text-muted-foreground mx-auto"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop an image here, or click to select"}),v.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden",id:"image-upload"}),v.jsx(Rn,{type:"button",variant:"outline",asChild:!0,children:v.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:"Choose Image"})})]})]})})]}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{htmlFor:"name",children:"Route Name *"}),v.jsx(y0,{id:"name",type:"text",placeholder:"Enter route name",value:t.name,onChange:T=>d("name",T.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{htmlFor:"setter",children:"Route Setter *"}),v.jsx(y0,{id:"setter",type:"text",placeholder:"Who set this route?",value:t.setter,onChange:T=>d("setter",T.target.value)})]})]}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{children:"Grade *"}),v.jsxs(pf,{value:t.grade,onValueChange:T=>d("grade",T),children:[v.jsx(gf,{children:v.jsx(mf,{placeholder:"Select grade"})}),v.jsx(yf,{children:fV.map(T=>v.jsx(Al,{value:T,children:T},T))})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{children:"Hold Color *"}),v.jsxs(pf,{value:t.color,onValueChange:T=>d("color",T),children:[v.jsx(gf,{children:v.jsx(mf,{placeholder:"Select color"})}),v.jsx(yf,{children:pV.map(T=>v.jsx(Al,{value:T,children:T},T))})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Li,{htmlFor:"description",children:"Description"}),v.jsx(XC,{id:"description",placeholder:"Describe the route, key moves, or tips...",value:t.description,onChange:T=>d("description",T.target.value),rows:4})]}),v.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[v.jsx(Rn,{type:"submit",disabled:!A,children:"Add Route"}),v.jsx(Rn,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})]})}function gV(n,e=[]){let t=[];function r(o,l){const u=S.createContext(l);u.displayName=o+"Context";const d=t.length;t=[...t,l];const p=y=>{const{scope:E,children:I,...A}=y,T=E?.[n]?.[d]||u,b=S.useMemo(()=>A,Object.values(A));return v.jsx(T.Provider,{value:b,children:I})};p.displayName=o+"Provider";function m(y,E){const I=E?.[n]?.[d]||u,A=S.useContext(I);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[p,m]}const s=()=>{const o=t.map(l=>S.createContext(l));return function(u){const d=u?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return s.scopeName=n,[r,yV(s,...e)]}function yV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((u,{useScope:d,scopeName:p})=>{const y=d(o)[`__scope${p}`];return{...u,...y}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var vV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ov=vV.reduce((n,e)=>{const t=rp(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),Wg={exports:{}},Hg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function _V(){if(v0)return Hg;v0=1;var n=tp();function e(y,E){return y===E&&(y!==0||1/y===1/E)||y!==y&&E!==E}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(y,E){var I=E(),A=r({inst:{value:I,getSnapshot:E}}),T=A[0].inst,b=A[1];return o(function(){T.value=I,T.getSnapshot=E,d(T)&&b({inst:T})},[y,I,E]),s(function(){return d(T)&&b({inst:T}),y(function(){d(T)&&b({inst:T})})},[y]),l(I),I}function d(y){var E=y.getSnapshot;y=y.value;try{var I=E();return!t(y,I)}catch{return!0}}function p(y,E){return E()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return Hg.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Hg}var _0;function wV(){return _0||(_0=1,Wg.exports=_V()),Wg.exports}var EV=wV();function SV(){return EV.useSyncExternalStore(xV,()=>!0,()=>!1)}function xV(){return()=>{}}var Lv="Avatar",[TV]=gV(Lv),[IV,ZC]=TV(Lv),eR=S.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,o]=S.useState("idle");return v.jsx(IV,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:v.jsx(Ov.span,{...r,ref:e})})});eR.displayName=Lv;var tR="AvatarImage",CV=S.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...o}=n,l=ZC(tR,t),u=RV(r,o),d=Jt(p=>{s(p),l.onImageLoadingStatusChange(p)});return zt(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?v.jsx(Ov.img,{...o,ref:e,src:r}):null});CV.displayName=tR;var nR="AvatarFallback",rR=S.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,o=ZC(nR,t),[l,u]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&o.imageLoadingStatus!=="loaded"?v.jsx(Ov.span,{...s,ref:e}):null});rR.displayName=nR;function w0(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function RV(n,{referrerPolicy:e,crossOrigin:t}){const r=SV(),s=S.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[l,u]=S.useState(()=>w0(o,n));return zt(()=>{u(w0(o,n))},[o,n]),zt(()=>{const d=y=>()=>{u(y)};if(!o)return;const p=d("loaded"),m=d("error");return o.addEventListener("load",p),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof t=="string"&&(o.crossOrigin=t),()=>{o.removeEventListener("load",p),o.removeEventListener("error",m)}},[o,t,e]),l}var bV=eR,AV=rR;function kh({className:n,...e}){return v.jsx(bV,{"data-slot":"avatar",className:ot("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function Dh({className:n,...e}){return v.jsx(AV,{"data-slot":"avatar-fallback",className:ot("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}var Gg="rovingFocusGroup.onEntryFocus",PV={bubbles:!1,cancelable:!0},Hu="RovingFocusGroup",[Ay,sR,NV]=wv(Hu),[kV,iR]=oo(Hu,[NV]),[DV,MV]=kV(Hu),oR=S.forwardRef((n,e)=>v.jsx(Ay.Provider,{scope:n.__scopeRovingFocusGroup,children:v.jsx(Ay.Slot,{scope:n.__scopeRovingFocusGroup,children:v.jsx(OV,{...n,ref:e})})}));oR.displayName=Hu;var OV=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:p,preventScrollOnEntryFocus:m=!1,...y}=n,E=S.useRef(null),I=rt(e,E),A=sp(o),[T,b]=xu({prop:l,defaultProp:u??null,onChange:d,caller:Hu}),[j,V]=S.useState(!1),B=Jt(p),K=sR(t),J=S.useRef(!1),[Z,P]=S.useState(0);return S.useEffect(()=>{const R=E.current;if(R)return R.addEventListener(Gg,B),()=>R.removeEventListener(Gg,B)},[B]),v.jsx(DV,{scope:t,orientation:r,dir:A,loop:s,currentTabStopId:T,onItemFocus:S.useCallback(R=>b(R),[b]),onItemShiftTab:S.useCallback(()=>V(!0),[]),onFocusableItemAdd:S.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:S.useCallback(()=>P(R=>R-1),[]),children:v.jsx(Ge.div,{tabIndex:j||Z===0?-1:0,"data-orientation":r,...y,ref:I,style:{outline:"none",...n.style},onMouseDown:Ae(n.onMouseDown,()=>{J.current=!0}),onFocus:Ae(n.onFocus,R=>{const k=!J.current;if(R.target===R.currentTarget&&k&&!j){const M=new CustomEvent(Gg,PV);if(R.currentTarget.dispatchEvent(M),!M.defaultPrevented){const O=K().filter(pe=>pe.focusable),F=O.find(pe=>pe.active),D=O.find(pe=>pe.id===T),_e=[F,D,...O].filter(Boolean).map(pe=>pe.ref.current);cR(_e,m)}}J.current=!1}),onBlur:Ae(n.onBlur,()=>V(!1))})})}),aR="RovingFocusGroupItem",lR=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,children:l,...u}=n,d=Bs(),p=o||d,m=MV(aR,t),y=m.currentTabStopId===p,E=sR(t),{onFocusableItemAdd:I,onFocusableItemRemove:A,currentTabStopId:T}=m;return S.useEffect(()=>{if(r)return I(),()=>A()},[r,I,A]),v.jsx(Ay.ItemSlot,{scope:t,id:p,focusable:r,active:s,children:v.jsx(Ge.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...u,ref:e,onMouseDown:Ae(n.onMouseDown,b=>{r?m.onItemFocus(p):b.preventDefault()}),onFocus:Ae(n.onFocus,()=>m.onItemFocus(p)),onKeyDown:Ae(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){m.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const j=jV(b,m.orientation,m.dir);if(j!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let B=E().filter(K=>K.focusable).map(K=>K.ref.current);if(j==="last")B.reverse();else if(j==="prev"||j==="next"){j==="prev"&&B.reverse();const K=B.indexOf(b.currentTarget);B=m.loop?FV(B,K+1):B.slice(K+1)}setTimeout(()=>cR(B))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:T!=null}):l})})});lR.displayName=aR;var LV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VV(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function jV(n,e,t){const r=VV(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return LV[r]}function cR(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function FV(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var UV=oR,zV=lR;function BV(n){const e=$V(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(HV);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function $V(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=qV(s),u=GV(o,s.props);return s.type!==S.Fragment&&(u.ref=r?Zs(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var WV=Symbol("radix.slottable");function HV(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===WV}function GV(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function qV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Py=["Enter"," "],KV=["ArrowDown","PageUp","Home"],uR=["ArrowUp","PageDown","End"],QV=[...KV,...uR],YV={ltr:[...Py,"ArrowRight"],rtl:[...Py,"ArrowLeft"]},XV={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Gu="Menu",[Tu,JV,ZV]=wv(Gu),[ua,dR]=oo(Gu,[ZV,dp,iR]),wp=dp(),hR=iR(),[ej,da]=ua(Gu),[tj,qu]=ua(Gu),fR=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:o,modal:l=!0}=n,u=wp(e),[d,p]=S.useState(null),m=S.useRef(!1),y=Jt(o),E=sp(s);return S.useEffect(()=>{const I=()=>{m.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>m.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),v.jsx(XI,{...u,children:v.jsx(ej,{scope:e,open:t,onOpenChange:y,content:d,onContentChange:p,children:v.jsx(tj,{scope:e,onClose:S.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:m,dir:E,modal:l,children:r})})})};fR.displayName=Gu;var nj="MenuAnchor",Vv=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=wp(t);return v.jsx(JI,{...s,...r,ref:e})});Vv.displayName=nj;var jv="MenuPortal",[rj,pR]=ua(jv,{forceMount:void 0}),mR=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,o=da(jv,e);return v.jsx(rj,{scope:e,forceMount:t,children:v.jsx(hr,{present:t||o.open,children:v.jsx(hp,{asChild:!0,container:s,children:r})})})};mR.displayName=jv;var cr="MenuContent",[sj,Fv]=ua(cr),gR=S.forwardRef((n,e)=>{const t=pR(cr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=da(cr,n.__scopeMenu),l=qu(cr,n.__scopeMenu);return v.jsx(Tu.Provider,{scope:n.__scopeMenu,children:v.jsx(hr,{present:r||o.open,children:v.jsx(Tu.Slot,{scope:n.__scopeMenu,children:l.modal?v.jsx(ij,{...s,ref:e}):v.jsx(oj,{...s,ref:e})})})})}),ij=S.forwardRef((n,e)=>{const t=da(cr,n.__scopeMenu),r=S.useRef(null),s=rt(e,r);return S.useEffect(()=>{const o=r.current;if(o)return Pv(o)},[]),v.jsx(Uv,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Ae(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),oj=S.forwardRef((n,e)=>{const t=da(cr,n.__scopeMenu);return v.jsx(Uv,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),aj=BV("MenuContent.ScrollLock"),Uv=S.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:E,onDismiss:I,disableOutsideScroll:A,...T}=n,b=da(cr,t),j=qu(cr,t),V=wp(t),B=hR(t),K=JV(t),[J,Z]=S.useState(null),P=S.useRef(null),R=rt(e,P,b.onContentChange),k=S.useRef(0),M=S.useRef(""),O=S.useRef(0),F=S.useRef(null),D=S.useRef("right"),me=S.useRef(0),_e=A?pp:S.Fragment,pe=A?{as:aj,allowPinchZoom:!0}:void 0,we=ee=>{const ue=M.current+ee,z=K().filter(H=>!H.disabled),ne=document.activeElement,te=z.find(H=>H.ref.current===ne)?.textValue,se=z.map(H=>H.textValue),he=_j(se,ue,te),ce=z.find(H=>H.textValue===he)?.ref.current;(function H(oe){M.current=oe,window.clearTimeout(k.current),oe!==""&&(k.current=window.setTimeout(()=>H(""),1e3))})(ue),ce&&setTimeout(()=>ce.focus())};S.useEffect(()=>()=>window.clearTimeout(k.current),[]),Ev();const W=S.useCallback(ee=>D.current===F.current?.side&&Ej(ee,F.current?.area),[]);return v.jsx(sj,{scope:t,searchRef:M,onItemEnter:S.useCallback(ee=>{W(ee)&&ee.preventDefault()},[W]),onItemLeave:S.useCallback(ee=>{W(ee)||(P.current?.focus(),Z(null))},[W]),onTriggerLeave:S.useCallback(ee=>{W(ee)&&ee.preventDefault()},[W]),pointerGraceTimerRef:O,onPointerGraceIntentChange:S.useCallback(ee=>{F.current=ee},[]),children:v.jsx(_e,{...pe,children:v.jsx(op,{asChild:!0,trapped:s,onMountAutoFocus:Ae(o,ee=>{ee.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:v.jsx(ip,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:E,onDismiss:I,children:v.jsx(UV,{asChild:!0,...B,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:J,onCurrentTabStopIdChange:Z,onEntryFocus:Ae(d,ee=>{j.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:v.jsx(ZI,{role:"menu","aria-orientation":"vertical","data-state":kR(b.open),"data-radix-menu-content":"",dir:j.dir,...V,...T,ref:R,style:{outline:"none",...T.style},onKeyDown:Ae(T.onKeyDown,ee=>{const z=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,ne=ee.ctrlKey||ee.altKey||ee.metaKey,te=ee.key.length===1;z&&(ee.key==="Tab"&&ee.preventDefault(),!ne&&te&&we(ee.key));const se=P.current;if(ee.target!==se||!QV.includes(ee.key))return;ee.preventDefault();const ce=K().filter(H=>!H.disabled).map(H=>H.ref.current);uR.includes(ee.key)&&ce.reverse(),yj(ce)}),onBlur:Ae(n.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(k.current),M.current="")}),onPointerMove:Ae(n.onPointerMove,Iu(ee=>{const ue=ee.target,z=me.current!==ee.clientX;if(ee.currentTarget.contains(ue)&&z){const ne=ee.clientX>me.current?"right":"left";D.current=ne,me.current=ee.clientX}}))})})})})})})});gR.displayName=cr;var lj="MenuGroup",zv=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(Ge.div,{role:"group",...r,ref:e})});zv.displayName=lj;var cj="MenuLabel",yR=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(Ge.div,{...r,ref:e})});yR.displayName=cj;var Ef="MenuItem",E0="menu.itemSelect",Ep=S.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,o=S.useRef(null),l=qu(Ef,n.__scopeMenu),u=Fv(Ef,n.__scopeMenu),d=rt(e,o),p=S.useRef(!1),m=()=>{const y=o.current;if(!t&&y){const E=new CustomEvent(E0,{bubbles:!0,cancelable:!0});y.addEventListener(E0,I=>r?.(I),{once:!0}),CI(y,E),E.defaultPrevented?p.current=!1:l.onClose()}};return v.jsx(vR,{...s,ref:d,disabled:t,onClick:Ae(n.onClick,m),onPointerDown:y=>{n.onPointerDown?.(y),p.current=!0},onPointerUp:Ae(n.onPointerUp,y=>{p.current||y.currentTarget?.click()}),onKeyDown:Ae(n.onKeyDown,y=>{const E=u.searchRef.current!=="";t||E&&y.key===" "||Py.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});Ep.displayName=Ef;var vR=S.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...o}=n,l=Fv(Ef,t),u=hR(t),d=S.useRef(null),p=rt(e,d),[m,y]=S.useState(!1),[E,I]=S.useState("");return S.useEffect(()=>{const A=d.current;A&&I((A.textContent??"").trim())},[o.children]),v.jsx(Tu.ItemSlot,{scope:t,disabled:r,textValue:s??E,children:v.jsx(zV,{asChild:!0,...u,focusable:!r,children:v.jsx(Ge.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:p,onPointerMove:Ae(n.onPointerMove,Iu(A=>{r?l.onItemLeave(A):(l.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ae(n.onPointerLeave,Iu(A=>l.onItemLeave(A))),onFocus:Ae(n.onFocus,()=>y(!0)),onBlur:Ae(n.onBlur,()=>y(!1))})})})}),uj="MenuCheckboxItem",_R=S.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return v.jsx(TR,{scope:n.__scopeMenu,checked:t,children:v.jsx(Ep,{role:"menuitemcheckbox","aria-checked":Sf(t)?"mixed":t,...s,ref:e,"data-state":$v(t),onSelect:Ae(s.onSelect,()=>r?.(Sf(t)?!0:!t),{checkForDefaultPrevented:!1})})})});_R.displayName=uj;var wR="MenuRadioGroup",[dj,hj]=ua(wR,{value:void 0,onValueChange:()=>{}}),ER=S.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,o=Jt(r);return v.jsx(dj,{scope:n.__scopeMenu,value:t,onValueChange:o,children:v.jsx(zv,{...s,ref:e})})});ER.displayName=wR;var SR="MenuRadioItem",xR=S.forwardRef((n,e)=>{const{value:t,...r}=n,s=hj(SR,n.__scopeMenu),o=t===s.value;return v.jsx(TR,{scope:n.__scopeMenu,checked:o,children:v.jsx(Ep,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":$v(o),onSelect:Ae(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});xR.displayName=SR;var Bv="MenuItemIndicator",[TR,fj]=ua(Bv,{checked:!1}),IR=S.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,o=fj(Bv,t);return v.jsx(hr,{present:r||Sf(o.checked)||o.checked===!0,children:v.jsx(Ge.span,{...s,ref:e,"data-state":$v(o.checked)})})});IR.displayName=Bv;var pj="MenuSeparator",CR=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});CR.displayName=pj;var mj="MenuArrow",RR=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=wp(t);return v.jsx(eC,{...s,...r,ref:e})});RR.displayName=mj;var gj="MenuSub",[zH,bR]=ua(gj),eu="MenuSubTrigger",AR=S.forwardRef((n,e)=>{const t=da(eu,n.__scopeMenu),r=qu(eu,n.__scopeMenu),s=bR(eu,n.__scopeMenu),o=Fv(eu,n.__scopeMenu),l=S.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=o,p={__scopeMenu:n.__scopeMenu},m=S.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return S.useEffect(()=>m,[m]),S.useEffect(()=>{const y=u.current;return()=>{window.clearTimeout(y),d(null)}},[u,d]),v.jsx(Vv,{asChild:!0,...p,children:v.jsx(vR,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":kR(t.open),...n,ref:Zs(e,s.onTriggerChange),onClick:y=>{n.onClick?.(y),!(n.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Ae(n.onPointerMove,Iu(y=>{o.onItemEnter(y),!y.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),m()},100))})),onPointerLeave:Ae(n.onPointerLeave,Iu(y=>{m();const E=t.content?.getBoundingClientRect();if(E){const I=t.content?.dataset.side,A=I==="right",T=A?-5:5,b=E[A?"left":"right"],j=E[A?"right":"left"];o.onPointerGraceIntentChange({area:[{x:y.clientX+T,y:y.clientY},{x:b,y:E.top},{x:j,y:E.top},{x:j,y:E.bottom},{x:b,y:E.bottom}],side:I}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(y),y.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(n.onKeyDown,y=>{const E=o.searchRef.current!=="";n.disabled||E&&y.key===" "||YV[r.dir].includes(y.key)&&(t.onOpenChange(!0),t.content?.focus(),y.preventDefault())})})})});AR.displayName=eu;var PR="MenuSubContent",NR=S.forwardRef((n,e)=>{const t=pR(cr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=da(cr,n.__scopeMenu),l=qu(cr,n.__scopeMenu),u=bR(PR,n.__scopeMenu),d=S.useRef(null),p=rt(e,d);return v.jsx(Tu.Provider,{scope:n.__scopeMenu,children:v.jsx(hr,{present:r||o.open,children:v.jsx(Tu.Slot,{scope:n.__scopeMenu,children:v.jsx(Uv,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{l.isUsingKeyboardRef.current&&d.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Ae(n.onFocusOutside,m=>{m.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ae(n.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:Ae(n.onKeyDown,m=>{const y=m.currentTarget.contains(m.target),E=XV[l.dir].includes(m.key);y&&E&&(o.onOpenChange(!1),u.trigger?.focus(),m.preventDefault())})})})})})});NR.displayName=PR;function kR(n){return n?"open":"closed"}function Sf(n){return n==="indeterminate"}function $v(n){return Sf(n)?"indeterminate":n?"checked":"unchecked"}function yj(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function vj(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function _j(n,e,t){const s=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=vj(n,Math.max(o,0));s.length===1&&(l=l.filter(p=>p!==t));const d=l.find(p=>p.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function wj(n,e){const{x:t,y:r}=n;let s=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],d=e[l],p=u.x,m=u.y,y=d.x,E=d.y;m>r!=E>r&&t<(y-p)*(r-m)/(E-m)+p&&(s=!s)}return s}function Ej(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return wj(t,e)}function Iu(n){return e=>e.pointerType==="mouse"?n(e):void 0}var Sj=fR,xj=Vv,Tj=mR,Ij=gR,Cj=zv,Rj=yR,bj=Ep,Aj=_R,Pj=ER,Nj=xR,kj=IR,Dj=CR,Mj=RR,Oj=AR,Lj=NR,Sp="DropdownMenu",[Vj]=oo(Sp,[dR]),bn=dR(),[jj,DR]=Vj(Sp),MR=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:o,onOpenChange:l,modal:u=!0}=n,d=bn(e),p=S.useRef(null),[m,y]=xu({prop:s,defaultProp:o??!1,onChange:l,caller:Sp});return v.jsx(jj,{scope:e,triggerId:Bs(),triggerRef:p,contentId:Bs(),open:m,onOpenChange:y,onOpenToggle:S.useCallback(()=>y(E=>!E),[y]),modal:u,children:v.jsx(Sj,{...d,open:m,onOpenChange:y,dir:r,modal:u,children:t})})};MR.displayName=Sp;var OR="DropdownMenuTrigger",LR=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,o=DR(OR,t),l=bn(t);return v.jsx(xj,{asChild:!0,...l,children:v.jsx(Ge.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Zs(e,o.triggerRef),onPointerDown:Ae(n.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:Ae(n.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});LR.displayName=OR;var Fj="DropdownMenuPortal",VR=n=>{const{__scopeDropdownMenu:e,...t}=n,r=bn(e);return v.jsx(Tj,{...r,...t})};VR.displayName=Fj;var jR="DropdownMenuContent",FR=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=DR(jR,t),o=bn(t),l=S.useRef(!1);return v.jsx(Ij,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:Ae(n.onCloseAutoFocus,u=>{l.current||s.triggerRef.current?.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Ae(n.onInteractOutside,u=>{const d=u.detail.originalEvent,p=d.button===0&&d.ctrlKey===!0,m=d.button===2||p;(!s.modal||m)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FR.displayName=jR;var Uj="DropdownMenuGroup",zj=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Cj,{...s,...r,ref:e})});zj.displayName=Uj;var Bj="DropdownMenuLabel",$j=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Rj,{...s,...r,ref:e})});$j.displayName=Bj;var Wj="DropdownMenuItem",UR=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(bj,{...s,...r,ref:e})});UR.displayName=Wj;var Hj="DropdownMenuCheckboxItem",Gj=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Aj,{...s,...r,ref:e})});Gj.displayName=Hj;var qj="DropdownMenuRadioGroup",Kj=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Pj,{...s,...r,ref:e})});Kj.displayName=qj;var Qj="DropdownMenuRadioItem",Yj=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Nj,{...s,...r,ref:e})});Yj.displayName=Qj;var Xj="DropdownMenuItemIndicator",Jj=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(kj,{...s,...r,ref:e})});Jj.displayName=Xj;var Zj="DropdownMenuSeparator",zR=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Dj,{...s,...r,ref:e})});zR.displayName=Zj;var eF="DropdownMenuArrow",tF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Mj,{...s,...r,ref:e})});tF.displayName=eF;var nF="DropdownMenuSubTrigger",rF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Oj,{...s,...r,ref:e})});rF.displayName=nF;var sF="DropdownMenuSubContent",iF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=bn(t);return v.jsx(Lj,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});iF.displayName=sF;var oF=MR,aF=LR,lF=VR,cF=FR,uF=UR,dF=zR;function S0({...n}){return v.jsx(oF,{"data-slot":"dropdown-menu",...n})}function x0({...n}){return v.jsx(aF,{"data-slot":"dropdown-menu-trigger",...n})}function T0({className:n,sideOffset:e=4,...t}){return v.jsx(lF,{children:v.jsx(cF,{"data-slot":"dropdown-menu-content",sideOffset:e,className:ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function I0({className:n,inset:e,variant:t="default",...r}){return v.jsx(uF,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:ot("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function C0({className:n,...e}){return v.jsx(dF,{"data-slot":"dropdown-menu-separator",className:ot("bg-border -mx-1 my-1 h-px",n),...e})}const xp=S.createContext(null);xp.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Wv=10,Qo=S.useLayoutEffect,R0=np.useId,hF=typeof R0=="function"?R0:()=>null;let fF=0;function Hv(n=null){const e=hF(),t=S.useRef(n||e||null);return t.current===null&&(t.current=""+fF++),n??t.current}function BR({children:n,className:e="",collapsedSize:t,collapsible:r,defaultSize:s,forwardedRef:o,id:l,maxSize:u,minSize:d,onCollapse:p,onExpand:m,onResize:y,order:E,style:I,tagName:A="div",...T}){const b=S.useContext(xp);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:j,expandPanel:V,getPanelSize:B,getPanelStyle:K,groupId:J,isPanelCollapsed:Z,reevaluatePanelConstraints:P,registerPanel:R,resizePanel:k,unregisterPanel:M}=b,O=Hv(l),F=S.useRef({callbacks:{onCollapse:p,onExpand:m,onResize:y},constraints:{collapsedSize:t,collapsible:r,defaultSize:s,maxSize:u,minSize:d},id:O,idIsFromProps:l!==void 0,order:E});S.useRef({didLogMissingDefaultSizeWarning:!1}),Qo(()=>{const{callbacks:me,constraints:_e}=F.current,pe={..._e};F.current.id=O,F.current.idIsFromProps=l!==void 0,F.current.order=E,me.onCollapse=p,me.onExpand=m,me.onResize=y,_e.collapsedSize=t,_e.collapsible=r,_e.defaultSize=s,_e.maxSize=u,_e.minSize=d,(pe.collapsedSize!==_e.collapsedSize||pe.collapsible!==_e.collapsible||pe.maxSize!==_e.maxSize||pe.minSize!==_e.minSize)&&P(F.current,pe)}),Qo(()=>{const me=F.current;return R(me),()=>{M(me)}},[E,O,R,M]),S.useImperativeHandle(o,()=>({collapse:()=>{j(F.current)},expand:me=>{V(F.current,me)},getId(){return O},getSize(){return B(F.current)},isCollapsed(){return Z(F.current)},isExpanded(){return!Z(F.current)},resize:me=>{k(F.current,me)}}),[j,V,B,Z,O,k]);const D=K(F.current,s);return S.createElement(A,{...T,children:n,className:e,id:O,style:{...D,...I},[Pt.groupId]:J,[Pt.panel]:"",[Pt.panelCollapsible]:r||void 0,[Pt.panelId]:O,[Pt.panelSize]:parseFloat(""+D.flexGrow).toFixed(1)})}const $R=S.forwardRef((n,e)=>S.createElement(BR,{...n,forwardedRef:e}));BR.displayName="Panel";$R.displayName="forwardRef(Panel)";let Ny=null,Gh=-1,Vi=null;function pF(n,e){if(e){const t=(e&KR)!==0,r=(e&QR)!==0,s=(e&YR)!==0,o=(e&XR)!==0;if(t)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(n){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function mF(){Vi!==null&&(document.head.removeChild(Vi),Ny=null,Vi=null,Gh=-1)}function qg(n,e){var t,r;const s=pF(n,e);if(Ny!==s){if(Ny=s,Vi===null&&(Vi=document.createElement("style"),document.head.appendChild(Vi)),Gh>=0){var o;(o=Vi.sheet)===null||o===void 0||o.removeRule(Gh)}Gh=(t=(r=Vi.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&t!==void 0?t:-1}}function WR(n){return n.type==="keydown"}function HR(n){return n.type.startsWith("pointer")}function GR(n){return n.type.startsWith("mouse")}function Tp(n){if(HR(n)){if(n.isPrimary)return{x:n.clientX,y:n.clientY}}else if(GR(n))return{x:n.clientX,y:n.clientY};return{x:1/0,y:1/0}}function gF(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function yF(n,e,t){return n.x<e.x+e.width&&n.x+n.width>e.x&&n.y<e.y+e.height&&n.y+n.height>e.y}function vF(n,e){if(n===e)throw new Error("Cannot compare node with itself");const t={a:P0(n),b:P0(e)};let r;for(;t.a.at(-1)===t.b.at(-1);)n=t.a.pop(),e=t.b.pop(),r=n;We(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:A0(b0(t.a)),b:A0(b0(t.b))};if(s.a===s.b){const o=r.childNodes,l={a:t.a.at(-1),b:t.b.at(-1)};let u=o.length;for(;u--;){const d=o[u];if(d===l.a)return 1;if(d===l.b)return-1}}return Math.sign(s.a-s.b)}const _F=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function wF(n){var e;const t=getComputedStyle((e=qR(n))!==null&&e!==void 0?e:n).display;return t==="flex"||t==="inline-flex"}function EF(n){const e=getComputedStyle(n);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||wF(n))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||_F.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function b0(n){let e=n.length;for(;e--;){const t=n[e];if(We(t,"Missing node"),EF(t))return t}return null}function A0(n){return n&&Number(getComputedStyle(n).zIndex)||0}function P0(n){const e=[];for(;n;)e.push(n),n=qR(n);return e}function qR(n){const{parentNode:e}=n;return e&&e instanceof ShadowRoot?e.host:e}const KR=1,QR=2,YR=4,XR=8,SF=gF()==="coarse";let br=[],wl=!1,Ho=new Map,Ip=new Map;const Cu=new Set;function xF(n,e,t,r,s){var o;const{ownerDocument:l}=e,u={direction:t,element:e,hitAreaMargins:r,setResizeHandlerState:s},d=(o=Ho.get(l))!==null&&o!==void 0?o:0;return Ho.set(l,d+1),Cu.add(u),xf(),function(){var m;Ip.delete(n),Cu.delete(u);const y=(m=Ho.get(l))!==null&&m!==void 0?m:1;if(Ho.set(l,y-1),xf(),y===1&&Ho.delete(l),br.includes(u)){const E=br.indexOf(u);E>=0&&br.splice(E,1),qv(),s("up",!0,null)}}}function TF(n){const{target:e}=n,{x:t,y:r}=Tp(n);wl=!0,Gv({target:e,x:t,y:r}),xf(),br.length>0&&(Tf("down",n),n.preventDefault(),JR(e)||n.stopImmediatePropagation())}function Kg(n){const{x:e,y:t}=Tp(n);if(wl&&n.buttons===0&&(wl=!1,Tf("up",n)),!wl){const{target:r}=n;Gv({target:r,x:e,y:t})}Tf("move",n),qv(),br.length>0&&n.preventDefault()}function Qg(n){const{target:e}=n,{x:t,y:r}=Tp(n);Ip.clear(),wl=!1,br.length>0&&(n.preventDefault(),JR(e)||n.stopImmediatePropagation()),Tf("up",n),Gv({target:e,x:t,y:r}),qv(),xf()}function JR(n){let e=n;for(;e;){if(e.hasAttribute(Pt.resizeHandle))return!0;e=e.parentElement}return!1}function Gv({target:n,x:e,y:t}){br.splice(0);let r=null;(n instanceof HTMLElement||n instanceof SVGElement)&&(r=n),Cu.forEach(s=>{const{element:o,hitAreaMargins:l}=s,u=o.getBoundingClientRect(),{bottom:d,left:p,right:m,top:y}=u,E=SF?l.coarse:l.fine;if(e>=p-E&&e<=m+E&&t>=y-E&&t<=d+E){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&vF(r,o)>0){let A=r,T=!1;for(;A&&!A.contains(o);){if(yF(A.getBoundingClientRect(),u)){T=!0;break}A=A.parentElement}if(T)return}br.push(s)}})}function Yg(n,e){Ip.set(n,e)}function qv(){let n=!1,e=!1;br.forEach(r=>{const{direction:s}=r;s==="horizontal"?n=!0:e=!0});let t=0;Ip.forEach(r=>{t|=r}),n&&e?qg("intersection",t):n?qg("horizontal",t):e?qg("vertical",t):mF()}let Xg=new AbortController;function xf(){Xg.abort(),Xg=new AbortController;const n={capture:!0,signal:Xg.signal};Cu.size&&(wl?(br.length>0&&Ho.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("contextmenu",Qg,n),r.addEventListener("pointerleave",Kg,n),r.addEventListener("pointermove",Kg,n))}),window.addEventListener("pointerup",Qg,n),window.addEventListener("pointercancel",Qg,n)):Ho.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("pointerdown",TF,n),r.addEventListener("pointermove",Kg,n))}))}function Tf(n,e){Cu.forEach(t=>{const{setResizeHandlerState:r}=t,s=br.includes(t);r(n,s,e)})}function IF(){const[n,e]=S.useState(0);return S.useCallback(()=>e(t=>t+1),[])}function We(n,e){if(!n)throw console.error(e),Error(e)}function ea(n,e,t=Wv){return n.toFixed(t)===e.toFixed(t)?0:n>e?1:-1}function Vs(n,e,t=Wv){return ea(n,e,t)===0}function qn(n,e,t){return ea(n,e,t)===0}function CF(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){const s=n[r],o=e[r];if(!qn(s,o,t))return!1}return!0}function ml({panelConstraints:n,panelIndex:e,size:t}){const r=n[e];We(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:l=100,minSize:u=0}=r;if(ea(t,u)<0)if(o){const d=(s+u)/2;ea(t,d)<0?t=s:t=u}else t=u;return t=Math.min(l,t),t=parseFloat(t.toFixed(Wv)),t}function tu({delta:n,initialLayout:e,panelConstraints:t,pivotIndices:r,prevLayout:s,trigger:o}){if(qn(n,0))return e;const l=[...e],[u,d]=r;We(u!=null,"Invalid first pivot index"),We(d!=null,"Invalid second pivot index");let p=0;if(o==="keyboard"){{const y=n<0?d:u,E=t[y];We(E,`Panel constraints not found for index ${y}`);const{collapsedSize:I=0,collapsible:A,minSize:T=0}=E;if(A){const b=e[y];if(We(b!=null,`Previous layout not found for panel index ${y}`),qn(b,I)){const j=T-b;ea(j,Math.abs(n))>0&&(n=n<0?0-j:j)}}}{const y=n<0?u:d,E=t[y];We(E,`No panel constraints found for index ${y}`);const{collapsedSize:I=0,collapsible:A,minSize:T=0}=E;if(A){const b=e[y];if(We(b!=null,`Previous layout not found for panel index ${y}`),qn(b,T)){const j=b-I;ea(j,Math.abs(n))>0&&(n=n<0?0-j:j)}}}}{const y=n<0?1:-1;let E=n<0?d:u,I=0;for(;;){const T=e[E];We(T!=null,`Previous layout not found for panel index ${E}`);const j=ml({panelConstraints:t,panelIndex:E,size:100})-T;if(I+=j,E+=y,E<0||E>=t.length)break}const A=Math.min(Math.abs(n),Math.abs(I));n=n<0?0-A:A}{let E=n<0?u:d;for(;E>=0&&E<t.length;){const I=Math.abs(n)-Math.abs(p),A=e[E];We(A!=null,`Previous layout not found for panel index ${E}`);const T=A-I,b=ml({panelConstraints:t,panelIndex:E,size:T});if(!qn(A,b)&&(p+=A-b,l[E]=b,p.toPrecision(3).localeCompare(Math.abs(n).toPrecision(3),void 0,{numeric:!0})>=0))break;n<0?E--:E++}}if(CF(s,l))return s;{const y=n<0?d:u,E=e[y];We(E!=null,`Previous layout not found for panel index ${y}`);const I=E+p,A=ml({panelConstraints:t,panelIndex:y,size:I});if(l[y]=A,!qn(A,I)){let T=I-A,j=n<0?d:u;for(;j>=0&&j<t.length;){const V=l[j];We(V!=null,`Previous layout not found for panel index ${j}`);const B=V+T,K=ml({panelConstraints:t,panelIndex:j,size:B});if(qn(V,K)||(T-=K-V,l[j]=K),qn(T,0))break;n>0?j--:j++}}}const m=l.reduce((y,E)=>E+y,0);return qn(m,100)?l:s}function RF({layout:n,panelsArray:e,pivotIndices:t}){let r=0,s=100,o=0,l=0;const u=t[0];We(u!=null,"No pivot index found"),e.forEach((y,E)=>{const{constraints:I}=y,{maxSize:A=100,minSize:T=0}=I;E===u?(r=T,s=A):(o+=T,l+=A)});const d=Math.min(s,100-o),p=Math.max(r,100-l),m=n[u];return{valueMax:d,valueMin:p,valueNow:m}}function Ru(n,e=document){return Array.from(e.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${n}"]`))}function ZR(n,e,t=document){const s=Ru(n,t).findIndex(o=>o.getAttribute(Pt.resizeHandleId)===e);return s??null}function eb(n,e,t){const r=ZR(n,e,t);return r!=null?[r,r+1]:[-1,-1]}function tb(n,e=document){var t;if(e instanceof HTMLElement&&(e==null||(t=e.dataset)===null||t===void 0?void 0:t.panelGroupId)==n)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${n}"]`);return r||null}function Cp(n,e=document){const t=e.querySelector(`[${Pt.resizeHandleId}="${n}"]`);return t||null}function bF(n,e,t,r=document){var s,o,l,u;const d=Cp(e,r),p=Ru(n,r),m=d?p.indexOf(d):-1,y=(s=(o=t[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,E=(l=(u=t[m+1])===null||u===void 0?void 0:u.id)!==null&&l!==void 0?l:null;return[y,E]}function AF({committedValuesRef:n,eagerValuesRef:e,groupId:t,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:l}){S.useRef({didWarnAboutMissingResizeHandle:!1}),Qo(()=>{if(!o)return;const u=Ru(t,o);for(let d=0;d<s.length-1;d++){const{valueMax:p,valueMin:m,valueNow:y}=RF({layout:r,panelsArray:s,pivotIndices:[d,d+1]}),E=u[d];if(E!=null){const I=s[d];We(I,`No panel data found for index "${d}"`),E.setAttribute("aria-controls",I.id),E.setAttribute("aria-valuemax",""+Math.round(p)),E.setAttribute("aria-valuemin",""+Math.round(m)),E.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{u.forEach((d,p)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[t,r,s,o]),S.useEffect(()=>{if(!o)return;const u=e.current;We(u,"Eager values not found");const{panelDataArray:d}=u,p=tb(t,o);We(p!=null,`No group found for id "${t}"`);const m=Ru(t,o);We(m,`No resize handles found for group id "${t}"`);const y=m.map(E=>{const I=E.getAttribute(Pt.resizeHandleId);We(I,"Resize handle element has no handle id attribute");const[A,T]=bF(t,I,d,o);if(A==null||T==null)return()=>{};const b=j=>{if(!j.defaultPrevented)switch(j.key){case"Enter":{j.preventDefault();const V=d.findIndex(B=>B.id===A);if(V>=0){const B=d[V];We(B,`No panel data found for index ${V}`);const K=r[V],{collapsedSize:J=0,collapsible:Z,minSize:P=0}=B.constraints;if(K!=null&&Z){const R=tu({delta:qn(K,J)?P-J:J-K,initialLayout:r,panelConstraints:d.map(k=>k.constraints),pivotIndices:eb(t,I,o),prevLayout:r,trigger:"keyboard"});r!==R&&l(R)}}break}}};return E.addEventListener("keydown",b),()=>{E.removeEventListener("keydown",b)}});return()=>{y.forEach(E=>E())}},[o,n,e,t,r,s,l])}function N0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function nb(n,e){const t=n==="horizontal",{x:r,y:s}=Tp(e);return t?r:s}function PF(n,e,t,r,s){const o=t==="horizontal",l=Cp(e,s);We(l,`No resize handle element found for id "${e}"`);const u=l.getAttribute(Pt.groupId);We(u,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=r;const p=nb(t,n),m=tb(u,s);We(m,`No group element found for id "${u}"`);const y=m.getBoundingClientRect(),E=o?y.width:y.height;return(p-d)/E*100}function NF(n,e,t,r,s,o){if(WR(n)){const l=t==="horizontal";let u=0;n.shiftKey?u=100:s!=null?u=s:u=10;let d=0;switch(n.key){case"ArrowDown":d=l?0:u;break;case"ArrowLeft":d=l?-u:0;break;case"ArrowRight":d=l?u:0;break;case"ArrowUp":d=l?0:-u;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return r==null?0:PF(n,e,t,r,o)}function kF({panelDataArray:n}){const e=Array(n.length),t=n.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<n.length;o++){const l=t[o];We(l,`Panel constraints not found for index ${o}`);const{defaultSize:u}=l;u!=null&&(r++,e[o]=u,s-=u)}for(let o=0;o<n.length;o++){const l=t[o];We(l,`Panel constraints not found for index ${o}`);const{defaultSize:u}=l;if(u!=null)continue;const d=n.length-r,p=s/d;r++,e[o]=p,s-=p}return e}function ll(n,e,t){e.forEach((r,s)=>{const o=n[s];We(o,`Panel data not found for index ${s}`);const{callbacks:l,constraints:u,id:d}=o,{collapsedSize:p=0,collapsible:m}=u,y=t[d];if(y==null||r!==y){t[d]=r;const{onCollapse:E,onExpand:I,onResize:A}=l;A&&A(r,y),m&&(E||I)&&(I&&(y==null||Vs(y,p))&&!Vs(r,p)&&I(),E&&(y==null||!Vs(y,p))&&Vs(r,p)&&E())}})}function Mh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t])return!1;return!0}function DF({defaultSize:n,dragState:e,layout:t,panelData:r,panelIndex:s,precision:o=3}){const l=t[s];let u;return l==null?u=n!=null?n.toPrecision(o):"1":r.length===1?u="1":u=l.toPrecision(o),{flexBasis:0,flexGrow:u,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function MF(n,e=10){let t=null;return(...s)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...s)},e)}}function k0(n){try{if(typeof localStorage<"u")n.getItem=e=>localStorage.getItem(e),n.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),n.getItem=()=>null,n.setItem=()=>{}}}function rb(n){return`react-resizable-panels:${n}`}function sb(n){return n.map(e=>{const{constraints:t,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function ib(n,e){try{const t=rb(n),r=e.getItem(t);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function OF(n,e,t){var r,s;const o=(r=ib(n,t))!==null&&r!==void 0?r:{},l=sb(e);return(s=o[l])!==null&&s!==void 0?s:null}function LF(n,e,t,r,s){var o;const l=rb(n),u=sb(e),d=(o=ib(n,s))!==null&&o!==void 0?o:{};d[u]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{s.setItem(l,JSON.stringify(d))}catch(p){console.error(p)}}function D0({layout:n,panelConstraints:e}){const t=[...n],r=t.reduce((o,l)=>o+l,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!qn(r,100)&&t.length>0)for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=100/r*l;t[o]=u}let s=0;for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=ml({panelConstraints:e,panelIndex:o,size:l});l!=u&&(s+=l-u,t[o]=u)}if(!qn(s,0))for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=l+s,d=ml({panelConstraints:e,panelIndex:o,size:u});if(l!==d&&(s-=d-l,t[o]=d,qn(s,0)))break}return t}const VF=100,nu={getItem:n=>(k0(nu),nu.getItem(n)),setItem:(n,e)=>{k0(nu),nu.setItem(n,e)}},M0={};function ob({autoSaveId:n=null,children:e,className:t="",direction:r,forwardedRef:s,id:o=null,onLayout:l=null,keyboardResizeBy:u=null,storage:d=nu,style:p,tagName:m="div",...y}){const E=Hv(o),I=S.useRef(null),[A,T]=S.useState(null),[b,j]=S.useState([]),V=IF(),B=S.useRef({}),K=S.useRef(new Map),J=S.useRef(0),Z=S.useRef({autoSaveId:n,direction:r,dragState:A,id:E,keyboardResizeBy:u,onLayout:l,storage:d}),P=S.useRef({layout:b,panelDataArray:[],panelDataArrayChanged:!1});S.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),S.useImperativeHandle(s,()=>({getId:()=>Z.current.id,getLayout:()=>{const{layout:te}=P.current;return te},setLayout:te=>{const{onLayout:se}=Z.current,{layout:he,panelDataArray:ce}=P.current,H=D0({layout:te,panelConstraints:ce.map(oe=>oe.constraints)});N0(he,H)||(j(H),P.current.layout=H,se&&se(H),ll(ce,H,B.current))}}),[]),Qo(()=>{Z.current.autoSaveId=n,Z.current.direction=r,Z.current.dragState=A,Z.current.id=E,Z.current.onLayout=l,Z.current.storage=d}),AF({committedValuesRef:Z,eagerValuesRef:P,groupId:E,layout:b,panelDataArray:P.current.panelDataArray,setLayout:j,panelGroupElement:I.current}),S.useEffect(()=>{const{panelDataArray:te}=P.current;if(n){if(b.length===0||b.length!==te.length)return;let se=M0[n];se==null&&(se=MF(LF,VF),M0[n]=se);const he=[...te],ce=new Map(K.current);se(n,he,ce,b,d)}},[n,b,d]),S.useEffect(()=>{});const R=S.useCallback(te=>{const{onLayout:se}=Z.current,{layout:he,panelDataArray:ce}=P.current;if(te.constraints.collapsible){const H=ce.map(je=>je.constraints),{collapsedSize:oe=0,panelSize:ye,pivotIndices:Te}=Bo(ce,te,he);if(We(ye!=null,`Panel size not found for panel "${te.id}"`),!Vs(ye,oe)){K.current.set(te.id,ye);const $e=ul(ce,te)===ce.length-1?ye-oe:oe-ye,Ue=tu({delta:$e,initialLayout:he,panelConstraints:H,pivotIndices:Te,prevLayout:he,trigger:"imperative-api"});Mh(he,Ue)||(j(Ue),P.current.layout=Ue,se&&se(Ue),ll(ce,Ue,B.current))}}},[]),k=S.useCallback((te,se)=>{const{onLayout:he}=Z.current,{layout:ce,panelDataArray:H}=P.current;if(te.constraints.collapsible){const oe=H.map(ht=>ht.constraints),{collapsedSize:ye=0,panelSize:Te=0,minSize:je=0,pivotIndices:$e}=Bo(H,te,ce),Ue=se??je;if(Vs(Te,ye)){const ht=K.current.get(te.id),An=ht!=null&&ht>=Ue?ht:Ue,Tn=ul(H,te)===H.length-1?Te-An:An-Te,Ot=tu({delta:Tn,initialLayout:ce,panelConstraints:oe,pivotIndices:$e,prevLayout:ce,trigger:"imperative-api"});Mh(ce,Ot)||(j(Ot),P.current.layout=Ot,he&&he(Ot),ll(H,Ot,B.current))}}},[]),M=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{panelSize:ce}=Bo(he,te,se);return We(ce!=null,`Panel size not found for panel "${te.id}"`),ce},[]),O=S.useCallback((te,se)=>{const{panelDataArray:he}=P.current,ce=ul(he,te);return DF({defaultSize:se,dragState:A,layout:b,panelData:he,panelIndex:ce})},[A,b]),F=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{collapsedSize:ce=0,collapsible:H,panelSize:oe}=Bo(he,te,se);return We(oe!=null,`Panel size not found for panel "${te.id}"`),H===!0&&Vs(oe,ce)},[]),D=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{collapsedSize:ce=0,collapsible:H,panelSize:oe}=Bo(he,te,se);return We(oe!=null,`Panel size not found for panel "${te.id}"`),!H||ea(oe,ce)>0},[]),me=S.useCallback(te=>{const{panelDataArray:se}=P.current;se.push(te),se.sort((he,ce)=>{const H=he.order,oe=ce.order;return H==null&&oe==null?0:H==null?-1:oe==null?1:H-oe}),P.current.panelDataArrayChanged=!0,V()},[V]);Qo(()=>{if(P.current.panelDataArrayChanged){P.current.panelDataArrayChanged=!1;const{autoSaveId:te,onLayout:se,storage:he}=Z.current,{layout:ce,panelDataArray:H}=P.current;let oe=null;if(te){const Te=OF(te,H,he);Te&&(K.current=new Map(Object.entries(Te.expandToSizes)),oe=Te.layout)}oe==null&&(oe=kF({panelDataArray:H}));const ye=D0({layout:oe,panelConstraints:H.map(Te=>Te.constraints)});N0(ce,ye)||(j(ye),P.current.layout=ye,se&&se(ye),ll(H,ye,B.current))}}),Qo(()=>{const te=P.current;return()=>{te.layout=[]}},[]);const _e=S.useCallback(te=>{let se=!1;const he=I.current;return he&&window.getComputedStyle(he,null).getPropertyValue("direction")==="rtl"&&(se=!0),function(H){H.preventDefault();const oe=I.current;if(!oe)return()=>null;const{direction:ye,dragState:Te,id:je,keyboardResizeBy:$e,onLayout:Ue}=Z.current,{layout:ht,panelDataArray:An}=P.current,{initialLayout:xn}=Te??{},Tn=eb(je,te,oe);let Ot=NF(H,te,ye,Te,$e,oe);const xt=ye==="horizontal";xt&&se&&(Ot=-Ot);const Tt=An.map(po=>po.constraints),en=tu({delta:Ot,initialLayout:xn??ht,panelConstraints:Tt,pivotIndices:Tn,prevLayout:ht,trigger:WR(H)?"keyboard":"mouse-or-touch"}),ri=!Mh(ht,en);(HR(H)||GR(H))&&J.current!=Ot&&(J.current=Ot,!ri&&Ot!==0?xt?Yg(te,Ot<0?KR:QR):Yg(te,Ot<0?YR:XR):Yg(te,0)),ri&&(j(en),P.current.layout=en,Ue&&Ue(en),ll(An,en,B.current))}},[]),pe=S.useCallback((te,se)=>{const{onLayout:he}=Z.current,{layout:ce,panelDataArray:H}=P.current,oe=H.map(ht=>ht.constraints),{panelSize:ye,pivotIndices:Te}=Bo(H,te,ce);We(ye!=null,`Panel size not found for panel "${te.id}"`);const $e=ul(H,te)===H.length-1?ye-se:se-ye,Ue=tu({delta:$e,initialLayout:ce,panelConstraints:oe,pivotIndices:Te,prevLayout:ce,trigger:"imperative-api"});Mh(ce,Ue)||(j(Ue),P.current.layout=Ue,he&&he(Ue),ll(H,Ue,B.current))},[]),we=S.useCallback((te,se)=>{const{layout:he,panelDataArray:ce}=P.current,{collapsedSize:H=0,collapsible:oe}=se,{collapsedSize:ye=0,collapsible:Te,maxSize:je=100,minSize:$e=0}=te.constraints,{panelSize:Ue}=Bo(ce,te,he);Ue!=null&&(oe&&Te&&Vs(Ue,H)?Vs(H,ye)||pe(te,ye):Ue<$e?pe(te,$e):Ue>je&&pe(te,je))},[pe]),W=S.useCallback((te,se)=>{const{direction:he}=Z.current,{layout:ce}=P.current;if(!I.current)return;const H=Cp(te,I.current);We(H,`Drag handle element not found for id "${te}"`);const oe=nb(he,se);T({dragHandleId:te,dragHandleRect:H.getBoundingClientRect(),initialCursorPosition:oe,initialLayout:ce})},[]),ee=S.useCallback(()=>{T(null)},[]),ue=S.useCallback(te=>{const{panelDataArray:se}=P.current,he=ul(se,te);he>=0&&(se.splice(he,1),delete B.current[te.id],P.current.panelDataArrayChanged=!0,V())},[V]),z=S.useMemo(()=>({collapsePanel:R,direction:r,dragState:A,expandPanel:k,getPanelSize:M,getPanelStyle:O,groupId:E,isPanelCollapsed:F,isPanelExpanded:D,reevaluatePanelConstraints:we,registerPanel:me,registerResizeHandle:_e,resizePanel:pe,startDragging:W,stopDragging:ee,unregisterPanel:ue,panelGroupElement:I.current}),[R,A,r,k,M,O,E,F,D,we,me,_e,pe,W,ee,ue]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return S.createElement(xp.Provider,{value:z},S.createElement(m,{...y,children:e,className:t,id:o,ref:I,style:{...ne,...p},[Pt.group]:"",[Pt.groupDirection]:r,[Pt.groupId]:E}))}const ab=S.forwardRef((n,e)=>S.createElement(ob,{...n,forwardedRef:e}));ob.displayName="PanelGroup";ab.displayName="forwardRef(PanelGroup)";function ul(n,e){return n.findIndex(t=>t===e||t.id===e.id)}function Bo(n,e,t){const r=ul(n,e),o=r===n.length-1?[r-1,r]:[r,r+1],l=t[r];return{...e.constraints,panelSize:l,pivotIndices:o}}function jF({disabled:n,handleId:e,resizeHandler:t,panelGroupElement:r}){S.useEffect(()=>{if(n||t==null||r==null)return;const s=Cp(e,r);if(s==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),t(l);break}case"F6":{l.preventDefault();const u=s.getAttribute(Pt.groupId);We(u,`No group element found for id "${u}"`);const d=Ru(u,r),p=ZR(u,e,r);We(p!==null,`No resize element found for id "${e}"`);const m=l.shiftKey?p>0?p-1:d.length-1:p+1<d.length?p+1:0;d[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,n,e,t])}function lb({children:n=null,className:e="",disabled:t=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:l,onDragging:u,onFocus:d,onPointerDown:p,onPointerUp:m,style:y={},tabIndex:E=0,tagName:I="div",...A}){var T,b;const j=S.useRef(null),V=S.useRef({onClick:l,onDragging:u,onPointerDown:p,onPointerUp:m});S.useEffect(()=>{V.current.onClick=l,V.current.onDragging=u,V.current.onPointerDown=p,V.current.onPointerUp=m});const B=S.useContext(xp);if(B===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:K,groupId:J,registerResizeHandle:Z,startDragging:P,stopDragging:R,panelGroupElement:k}=B,M=Hv(s),[O,F]=S.useState("inactive"),[D,me]=S.useState(!1),[_e,pe]=S.useState(null),we=S.useRef({state:O});Qo(()=>{we.current.state=O}),S.useEffect(()=>{if(t)pe(null);else{const z=Z(M);pe(()=>z)}},[t,M,Z]);const W=(T=r?.coarse)!==null&&T!==void 0?T:15,ee=(b=r?.fine)!==null&&b!==void 0?b:5;S.useEffect(()=>{if(t||_e==null)return;const z=j.current;We(z,"Element ref not attached");let ne=!1;return xF(M,z,K,{coarse:W,fine:ee},(se,he,ce)=>{if(!he){F("inactive");return}switch(se){case"down":{F("drag"),ne=!1,We(ce,'Expected event to be defined for "down" action'),P(M,ce);const{onDragging:H,onPointerDown:oe}=V.current;H?.(!0),oe?.();break}case"move":{const{state:H}=we.current;ne=!0,H!=="drag"&&F("hover"),We(ce,'Expected event to be defined for "move" action'),_e(ce);break}case"up":{F("hover"),R();const{onClick:H,onDragging:oe,onPointerUp:ye}=V.current;oe?.(!1),ye?.(),ne||H?.();break}}})},[W,K,t,ee,Z,M,_e,P,R]),jF({disabled:t,handleId:M,resizeHandler:_e,panelGroupElement:k});const ue={touchAction:"none",userSelect:"none"};return S.createElement(I,{...A,children:n,className:e,id:s,onBlur:()=>{me(!1),o?.()},onFocus:()=>{me(!0),d?.()},ref:j,role:"separator",style:{...ue,...y},tabIndex:E,[Pt.groupDirection]:K,[Pt.groupId]:J,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:O==="drag"?"pointer":D?"keyboard":void 0,[Pt.resizeHandleEnabled]:!t,[Pt.resizeHandleId]:M,[Pt.resizeHandleState]:O})}lb.displayName="PanelResizeHandle";function FF({className:n,...e}){return v.jsx(ab,{"data-slot":"resizable-panel-group",className:ot("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),...e})}function O0({className:n,...e}){return v.jsx($R,{"data-slot":"resizable-panel",className:ot("relative",n),...e})}function UF({withHandle:n,className:e,...t}){return v.jsx(lb,{"data-slot":"resizable-handle",className:ot("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...t,children:n&&v.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:v.jsx(Hk,{className:"size-2.5"})})})}function zF(n){const e=BF(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(WF);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function BF(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=GF(s),u=HF(o,s.props);return s.type!==S.Fragment&&(u.ref=r?Zs(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var $F=Symbol("radix.slottable");function WF(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===$F}function HF(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function GF(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Rp="Dialog",[cb]=oo(Rp),[qF,Mr]=cb(Rp),ub=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:o,modal:l=!0}=n,u=S.useRef(null),d=S.useRef(null),[p,m]=xu({prop:r,defaultProp:s??!1,onChange:o,caller:Rp});return v.jsx(qF,{scope:e,triggerRef:u,contentRef:d,contentId:Bs(),titleId:Bs(),descriptionId:Bs(),open:p,onOpenChange:m,onOpenToggle:S.useCallback(()=>m(y=>!y),[m]),modal:l,children:t})};ub.displayName=Rp;var db="DialogTrigger",KF=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Mr(db,t),o=rt(e,s.triggerRef);return v.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Yv(s.open),...r,ref:o,onClick:Ae(n.onClick,s.onOpenToggle)})});KF.displayName=db;var Kv="DialogPortal",[QF,hb]=cb(Kv,{forceMount:void 0}),fb=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,o=Mr(Kv,e);return v.jsx(QF,{scope:e,forceMount:t,children:S.Children.map(r,l=>v.jsx(hr,{present:t||o.open,children:v.jsx(hp,{asChild:!0,container:s,children:l})}))})};fb.displayName=Kv;var If="DialogOverlay",pb=S.forwardRef((n,e)=>{const t=hb(If,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=Mr(If,n.__scopeDialog);return o.modal?v.jsx(hr,{present:r||o.open,children:v.jsx(XF,{...s,ref:e})}):null});pb.displayName=If;var YF=zF("DialogOverlay.RemoveScroll"),XF=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Mr(If,t);return v.jsx(pp,{as:YF,allowPinchZoom:!0,shards:[s.contentRef],children:v.jsx(Ge.div,{"data-state":Yv(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ta="DialogContent",mb=S.forwardRef((n,e)=>{const t=hb(ta,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=Mr(ta,n.__scopeDialog);return v.jsx(hr,{present:r||o.open,children:o.modal?v.jsx(JF,{...s,ref:e}):v.jsx(ZF,{...s,ref:e})})});mb.displayName=ta;var JF=S.forwardRef((n,e)=>{const t=Mr(ta,n.__scopeDialog),r=S.useRef(null),s=rt(e,t.contentRef,r);return S.useEffect(()=>{const o=r.current;if(o)return Pv(o)},[]),v.jsx(gb,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(n.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Ae(n.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:Ae(n.onFocusOutside,o=>o.preventDefault())})}),ZF=S.forwardRef((n,e)=>{const t=Mr(ta,n.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return v.jsx(gb,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{n.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||t.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{n.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),gb=S.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=n,u=Mr(ta,t),d=S.useRef(null),p=rt(e,d);return Ev(),v.jsxs(v.Fragment,{children:[v.jsx(op,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:v.jsx(ip,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Yv(u.open),...l,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(e4,{titleId:u.titleId}),v.jsx(n4,{contentRef:d,descriptionId:u.descriptionId})]})]})}),Qv="DialogTitle",yb=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Mr(Qv,t);return v.jsx(Ge.h2,{id:s.titleId,...r,ref:e})});yb.displayName=Qv;var vb="DialogDescription",_b=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Mr(vb,t);return v.jsx(Ge.p,{id:s.descriptionId,...r,ref:e})});_b.displayName=vb;var wb="DialogClose",Eb=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Mr(wb,t);return v.jsx(Ge.button,{type:"button",...r,ref:e,onClick:Ae(n.onClick,()=>s.onOpenChange(!1))})});Eb.displayName=wb;function Yv(n){return n?"open":"closed"}var Sb="DialogTitleWarning",[BH,xb]=eM(Sb,{contentName:ta,titleName:Qv,docsSlug:"dialog"}),e4=({titleId:n})=>{const e=xb(Sb),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},t4="DialogDescriptionWarning",n4=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xb(t4).contentName}}.`;return S.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},r4=ub,s4=fb,i4=pb,o4=mb,a4=yb,l4=_b,c4=Eb;function u4({...n}){return v.jsx(r4,{"data-slot":"sheet",...n})}function d4({...n}){return v.jsx(s4,{"data-slot":"sheet-portal",...n})}function h4({className:n,...e}){return v.jsx(i4,{"data-slot":"sheet-overlay",className:ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function f4({className:n,children:e,side:t="right",...r}){return v.jsxs(d4,{children:[v.jsx(h4,{className:n?.includes("landscape:hidden")?"landscape:hidden":""}),v.jsxs(o4,{"data-slot":"sheet-content",className:ot("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",n),...r,children:[e,v.jsxs(c4,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[v.jsx(aI,{className:"size-4"}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function p4({className:n,...e}){return v.jsx("div",{"data-slot":"sheet-header",className:ot("flex flex-col gap-1.5 p-4",n),...e})}function m4({className:n,...e}){return v.jsx(a4,{"data-slot":"sheet-title",className:ot("text-foreground font-semibold",n),...e})}function g4({className:n,...e}){return v.jsx(l4,{"data-slot":"sheet-description",className:ot("text-muted-foreground text-sm",n),...e})}const y4=()=>{};var L0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve=function(n,e){if(!n)throw Gl(e)},Gl=function(n){return new Error("Firebase Database ("+Tb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},v4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,m=o>>2,y=(o&3)<<4|u>>4;let E=(u&15)<<2|p>>6,I=p&63;d||(I=64,l||(E=64)),r.push(t[m],t[y],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ib(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):v4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||p==null||y==null)throw new _4;const E=o<<2|u>>4;if(r.push(E),p!==64){const I=u<<4&240|p>>2;if(r.push(I),y!==64){const A=p<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Cb=function(n){const e=Ib(n);return Xv.encodeByteArray(e,!0)},Cf=function(n){return Cb(n).replace(/\./g,"")},Rf=function(n){try{return Xv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(n){return Rb(void 0,n)}function Rb(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!E4(t)||(n[t]=Rb(n[t],e[t]));return n}function E4(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=()=>S4().__FIREBASE_DEFAULTS__,T4=()=>{if(typeof process>"u"||typeof L0>"u")return;const n=L0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},I4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Rf(n[1]);return e&&JSON.parse(e)},bp=()=>{try{return y4()||x4()||T4()||I4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bb=n=>bp()?.emulatorHosts?.[n],Ab=n=>{const e=bb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Pb=()=>bp()?.config,Nb=n=>bp()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Cf(JSON.stringify(t)),Cf(JSON.stringify(l)),""].join(".")}const uu={};function C4(){const n={prod:[],emulator:[]};for(const e of Object.keys(uu))uu[e]?n.emulator.push(e):n.prod.push(e);return n}function R4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let V0=!1;function e_(n,e){if(typeof window>"u"||typeof document>"u"||!co(window.location.host)||uu[n]===e||uu[n]||V0)return;uu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",o=C4().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function u(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,I){E.setAttribute("width","24"),E.setAttribute("id",I),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{V0=!0,l()},E}function m(E,I){E.setAttribute("id",I),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function y(){const E=R4(r),I=t("text"),A=document.getElementById(I)||document.createElement("span"),T=t("learnmore"),b=document.getElementById(T)||document.createElement("a"),j=t("preprendIcon"),V=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const B=E.element;u(B),m(b,T);const K=p();d(V,j),B.append(V,A,b,K),document.body.appendChild(B)}o?(A.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function b4(){const n=bp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function P4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Db(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N4(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function k4(){return Tb.NODE_ADMIN===!0}function D4(){return!b4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M4(){try{return typeof indexedDB=="object"}catch{return!1}}function O4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="FirebaseError";class ei extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=L4,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?V4(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new ei(s,u,r)}}function V4(n,e){return n.replace(j4,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const j4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(n){return JSON.parse(n)}function an(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=bu(Rf(o[0])||""),t=bu(Rf(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},F4=function(n){const e=Mb(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},U4=function(n){const e=Mb(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Nl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ky(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bf(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function Xi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(j0(o)&&j0(l)){if(!Xi(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function j0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ru(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function su(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)r[y]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let y=0;y<16;y++)r[y]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let y=16;y<80;y++){const E=r[y-3]^r[y-8]^r[y-14]^r[y-16];r[y]=(E<<1|E>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],d=this.chain_[4],p,m;for(let y=0;y<80;y++){y<40?y<20?(p=u^o&(l^u),m=1518500249):(p=o^l^u,m=1859775393):y<60?(p=o&l|u&(o|l),m=2400959708):(p=o^l^u,m=3395469782);const E=(s<<5|s>>>27)+p+d+m+r[y]&4294967295;d=u,u=l,l=(o<<30|o>>>2)&4294967295,o=s,s=E}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}else for(;s<t;)if(o[l]=e[s],++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function B4(n,e){const t=new $4(n,e);return t.subscribe.bind(t)}class $4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");W4(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Jg),s.error===void 0&&(s.error=Jg),s.complete===void 0&&(s.complete=Jg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jg(){}function H4(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,ve(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(o<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Ap=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n){return n&&n._delegate?n._delegate:n}class Ji{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Jv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q4(e))try{this.getOrInitializeService({instanceIdentifier:$o})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=$o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$o){return this.instances.has(e)}getOptions(e=$o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$o){return this.component?this.component.multipleInstances?e:$o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K4(n){return n===$o?void 0:n}function Q4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const X4={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},J4=Ke.INFO,Z4={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},e3=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Z4[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=J4,this._logHandler=e3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const t3=(n,e)=>e.some(t=>n instanceof t);let F0,U0;function n3(){return F0||(F0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r3(){return U0||(U0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ob=new WeakMap,Dy=new WeakMap,Lb=new WeakMap,Zg=new WeakMap,n_=new WeakMap;function s3(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Bi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Ob.set(t,n)}).catch(()=>{}),n_.set(e,n),e}function i3(n){if(Dy.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Dy.set(n,e)}let My={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Dy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Lb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function o3(n){My=n(My)}function a3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ey(this),e,...t);return Lb.set(r,e.sort?e.sort():[e]),Bi(r)}:r3().includes(n)?function(...e){return n.apply(ey(this),e),Bi(Ob.get(this))}:function(...e){return Bi(n.apply(ey(this),e))}}function l3(n){return typeof n=="function"?a3(n):(n instanceof IDBTransaction&&i3(n),t3(n,n3())?new Proxy(n,My):n)}function Bi(n){if(n instanceof IDBRequest)return s3(n);if(Zg.has(n))return Zg.get(n);const e=l3(n);return e!==n&&(Zg.set(n,e),n_.set(e,n)),e}const ey=n=>n_.get(n);function c3(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=Bi(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Bi(l.result),d.oldVersion,d.newVersion,Bi(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const u3=["get","getKey","getAll","getAllKeys","count"],d3=["put","add","delete","clear"],ty=new Map;function z0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ty.get(e))return ty.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=d3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||u3.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&d.done]))[0]};return ty.set(e,o),o}o3(n=>({...n,get:(e,t,r)=>z0(e,t)||n.get(e,t,r),has:(e,t)=>!!z0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(f3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function f3(n){return n.getComponent()?.type==="VERSION"}const Oy="@firebase/app",B0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Pp("@firebase/app"),p3="@firebase/app-compat",m3="@firebase/analytics-compat",g3="@firebase/analytics",y3="@firebase/app-check-compat",v3="@firebase/app-check",_3="@firebase/auth",w3="@firebase/auth-compat",E3="@firebase/database",S3="@firebase/data-connect",x3="@firebase/database-compat",T3="@firebase/functions",I3="@firebase/functions-compat",C3="@firebase/installations",R3="@firebase/installations-compat",b3="@firebase/messaging",A3="@firebase/messaging-compat",P3="@firebase/performance",N3="@firebase/performance-compat",k3="@firebase/remote-config",D3="@firebase/remote-config-compat",M3="@firebase/storage",O3="@firebase/storage-compat",L3="@firebase/firestore",V3="@firebase/ai",j3="@firebase/firestore-compat",F3="firebase",U3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="[DEFAULT]",z3={[Oy]:"fire-core",[p3]:"fire-core-compat",[g3]:"fire-analytics",[m3]:"fire-analytics-compat",[v3]:"fire-app-check",[y3]:"fire-app-check-compat",[_3]:"fire-auth",[w3]:"fire-auth-compat",[E3]:"fire-rtdb",[S3]:"fire-data-connect",[x3]:"fire-rtdb-compat",[T3]:"fire-fn",[I3]:"fire-fn-compat",[C3]:"fire-iid",[R3]:"fire-iid-compat",[b3]:"fire-fcm",[A3]:"fire-fcm-compat",[P3]:"fire-perf",[N3]:"fire-perf-compat",[k3]:"fire-rc",[D3]:"fire-rc-compat",[M3]:"fire-gcs",[O3]:"fire-gcs-compat",[L3]:"fire-fst",[j3]:"fire-fst-compat",[V3]:"fire-vertex","fire-js":"fire-js",[F3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Map,B3=new Map,Vy=new Map;function $0(n,e){try{n.container.addComponent(e)}catch(t){Ks.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function na(n){const e=n.name;if(Vy.has(e))return Ks.debug(`There were multiple attempts to register component ${e}.`),!1;Vy.set(e,n);for(const t of Af.values())$0(t,n);for(const t of B3.values())$0(t,n);return!0}function Np(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new Ku("app","Firebase",$3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=U3;function Vb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Ly,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $i.create("bad-app-name",{appName:String(s)});if(t||(t=Pb()),!t)throw $i.create("no-options");const o=Af.get(s);if(o){if(Xi(t,o.options)&&Xi(r,o.config))return o;throw $i.create("duplicate-app",{appName:s})}const l=new Y4(s);for(const d of Vy.values())l.addComponent(d);const u=new W3(t,r,l);return Af.set(s,u),u}function r_(n=Ly){const e=Af.get(n);if(!e&&n===Ly&&Pb())return Vb();if(!e)throw $i.create("no-app",{appName:n});return e}function is(n,e,t){let r=z3[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ks.warn(l.join(" "));return}na(new Ji(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="firebase-heartbeat-database",G3=1,Au="firebase-heartbeat-store";let ny=null;function jb(){return ny||(ny=c3(H3,G3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Au)}catch(t){console.warn(t)}}}}).catch(n=>{throw $i.create("idb-open",{originalErrorMessage:n.message})})),ny}async function q3(n){try{const t=(await jb()).transaction(Au),r=await t.objectStore(Au).get(Fb(n));return await t.done,r}catch(e){if(e instanceof ei)Ks.warn(e.message);else{const t=$i.create("idb-get",{originalErrorMessage:e?.message});Ks.warn(t.message)}}}async function W0(n,e){try{const r=(await jb()).transaction(Au,"readwrite");await r.objectStore(Au).put(e,Fb(n)),await r.done}catch(t){if(t instanceof ei)Ks.warn(t.message);else{const r=$i.create("idb-set",{originalErrorMessage:t?.message});Ks.warn(r.message)}}}function Fb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=1024,Q3=30;class Y3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new J3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=H0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Q3){const s=Z3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ks.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=H0(),{heartbeatsToSend:t,unsentEntries:r}=X3(this._heartbeatsCache.heartbeats),s=Cf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Ks.warn(e),""}}}function H0(){return new Date().toISOString().substring(0,10)}function X3(n,e=K3){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),G0(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),G0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class J3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M4()?O4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await q3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return W0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return W0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function G0(n){return Cf(JSON.stringify({version:2,heartbeats:n})).length}function Z3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(n){na(new Ji("platform-logger",e=>new h3(e),"PRIVATE")),na(new Ji("heartbeat",e=>new Y3(e),"PRIVATE")),is(Oy,B0,n),is(Oy,B0,"esm2020"),is("fire-js","")}eU("");function Ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tU=Ub,zb=new Ku("auth","Firebase",Ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new Pp("@firebase/auth");function nU(n,...e){Pf.logLevel<=Ke.WARN&&Pf.warn(`Auth (${ha}): ${n}`,...e)}function qh(n,...e){Pf.logLevel<=Ke.ERROR&&Pf.error(`Auth (${ha}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(n,...e){throw i_(n,...e)}function Ar(n,...e){return i_(n,...e)}function s_(n,e,t){const r={...tU(),[e]:t};return new Ku("auth","Firebase",r).create(e,{appName:n.name})}function $s(n){return s_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rU(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ur(n,"argument-error"),s_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function i_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zb.create(n,...e)}function Oe(n,e,...t){if(!n)throw i_(e,...t)}function Fs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qh(e),new Error(e)}function Qs(n,e){n||Fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(){return typeof self<"u"&&self.location?.href||""}function sU(){return q0()==="http:"||q0()==="https:"}function q0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sU()||P4()||"connection"in navigator)?navigator.onLine:!0}function oU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qs(t>e,"Short delay should be less than long delay!"),this.isMobile=t_()||Db()}get(){return iU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(n,e){Qs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cU=new Qu(3e4,6e4);function uo(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ni(n,e,t,r,s={}){return $b(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=ql({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:d,...o};return A4()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&co(n.emulatorConfig.host)&&(p.credentials="include"),Bb.fetch()(await Wb(n,n.config.apiHost,t,u),p)})}async function $b(n,e,t){n._canInitEmulator=!1;const r={...aU,...e};try{const s=new dU(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Oh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Oh(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Oh(n,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw s_(n,m,p);ur(n,m)}}catch(s){if(s instanceof ei)throw s;ur(n,"network-request-failed",{message:String(s)})}}async function Yu(n,e,t,r,s={}){const o=await ni(n,e,t,r,s);return"mfaPendingCredential"in o&&ur(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Wb(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?o_(n.config,s):`${n.config.apiScheme}://${s}`;return lU.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function uU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ar(this.auth,"network-request-failed")),cU.get())})}}function Oh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ar(n,e,r);return s.customData._tokenResponse=t,s}function K0(n){return n!==void 0&&n.enterprise!==void 0}class hU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return uU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fU(n,e){return ni(n,"GET","/v2/recaptchaConfig",uo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(n,e){return ni(n,"POST","/v1/accounts:delete",e)}async function Nf(n,e){return ni(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mU(n,e=!1){const t=Gt(n),r=await t.getIdToken(e),s=a_(r);Oe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:du(ry(s.auth_time)),issuedAtTime:du(ry(s.iat)),expirationTime:du(ry(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ry(n){return Number(n)*1e3}function a_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Rf(t);return s?JSON.parse(s):(qh("Failed to decode base64 JWT payload"),null)}catch(s){return qh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Q0(n){const e=a_(n);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ei&&gU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function gU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(n){const e=n.auth,t=await n.getIdToken(),r=await kl(n,Nf(e,{idToken:t}));Oe(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?Hb(s.providerUserInfo):[],l=_U(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,p=u?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Fy(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)}async function vU(n){const e=Gt(n);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _U(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Hb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(n,e){const t=await $b(n,{},async()=>{const r=ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await Wb(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&co(n.emulatorConfig.host)&&(d.credentials="include"),Bb.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function EU(n,e){return ni(n,"POST","/v2/accounts:revokeToken",uo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Q0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=Q0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await wU(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new El;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Oe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Oe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return Fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(n,e){Oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ir{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new yU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await kl(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mU(this,e)}reload(){return vU(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject($s(this.auth));const e=await this.getIdToken();return await kl(this,pU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,p=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:E,isAnonymous:I,providerData:A,stsTokenManager:T}=t;Oe(y&&T,e,"internal-error");const b=El.fromJSON(this.name,T);Oe(typeof y=="string",e,"internal-error"),Mi(r,e.name),Mi(s,e.name),Oe(typeof E=="boolean",e,"internal-error"),Oe(typeof I=="boolean",e,"internal-error"),Mi(o,e.name),Mi(l,e.name),Mi(u,e.name),Mi(d,e.name),Mi(p,e.name),Mi(m,e.name);const j=new Ir({uid:y,auth:e,email:s,emailVerified:E,displayName:r,isAnonymous:I,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:b,createdAt:p,lastLoginAt:m});return A&&Array.isArray(A)&&(j.providerData=A.map(V=>({...V}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,r=!1){const s=new El;s.updateFromServerResponse(t);const o=new Ir({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Oe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Hb(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new El;u.updateFromIdToken(r);const d=new Ir({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Fy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map;function Us(n){Qs(n instanceof Function,"Expected a class definition");let e=Y0.get(n);return e?(Qs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Y0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gb.type="NONE";const X0=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(n,e,t){return`firebase:${n}:${e}:${t}`}class Sl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Kh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Kh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nf(this.auth,{idToken:e}).catch(()=>{});return t?Ir._fromGetAccountInfoResponse(this.auth,t,e):null}return Ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Sl(Us(X0),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Us(X0);const l=Kh(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const m=await p._get(l);if(m){let y;if(typeof m=="string"){const E=await Nf(e,{idToken:m}).catch(()=>{});if(!E)break;y=await Ir._fromGetAccountInfoResponse(e,E,m)}else y=Ir._fromJSON(e,m);p!==o&&(u=y),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Sl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Sl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jb(e))return"Blackberry";if(Zb(e))return"Webos";if(Kb(e))return"Safari";if((e.includes("chrome/")||Qb(e))&&!e.includes("edge/"))return"Chrome";if(Xb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function qb(n=En()){return/firefox\//i.test(n)}function Kb(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qb(n=En()){return/crios\//i.test(n)}function Yb(n=En()){return/iemobile/i.test(n)}function Xb(n=En()){return/android/i.test(n)}function Jb(n=En()){return/blackberry/i.test(n)}function Zb(n=En()){return/webos/i.test(n)}function l_(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function SU(n=En()){return l_(n)&&!!window.navigator?.standalone}function xU(){return N4()&&document.documentMode===10}function eA(n=En()){return l_(n)||Xb(n)||Zb(n)||Jb(n)||/windows phone/i.test(n)||Yb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(n,e=[]){let t;switch(n){case"Browser":t=J0(En());break;case"Worker":t=`${J0(En())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ha}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(n,e={}){return ni(n,"GET","/v2/passwordPolicy",uo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=6;class RU{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??CU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z0(this),this.idTokenSubscription=new Z0(this),this.beforeStateQueue=new TU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Us(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nf(this,{idToken:e}),r=await Ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject($s(this));const t=e?Gt(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject($s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject($s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IU(this),t=new RU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await EU(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Us(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[Us(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&nU(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ho(n){return Gt(n)}class Z0{constructor(e){this.auth=e,this.observer=null,this.addObserver=B4(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AU(n){kp=n}function nA(n){return kp.loadJS(n)}function PU(){return kp.recaptchaEnterpriseScript}function NU(){return kp.gapiScript}function kU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class DU{constructor(){this.enterprise=new MU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class MU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const OU="recaptcha-enterprise",rA="NO_RECAPTCHA";class LU{constructor(e){this.type=OU,this.auth=ho(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{fU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new hU(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;K0(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(rA)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&K0(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=PU();d.length!==0&&(d+=u),nA(d).then(()=>{s(u,o,l)}).catch(p=>{l(p)})}}).catch(u=>{l(u)})})}}async function ex(n,e,t,r=!1,s=!1){const o=new LU(n);let l;if(s)l=rA;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,p=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Uy(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ex(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ex(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(n,e){const t=Np(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Xi(o,e??{}))return s;ur(s,"already-initialized")}return t.initialize({options:e})}function jU(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Us);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function FU(n,e,t){const r=ho(n);Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=sA(e),{host:l,port:u}=UU(e),d=u===null?"":`:${u}`,p={url:`${o}//${l}${d}/`},m=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Oe(Xi(p,r.config.emulator)&&Xi(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,co(l)?(Zv(`${o}//${l}${d}`),e_("Auth",!0)):zU()}function sA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function UU(n){const e=sA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:tx(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:tx(l)}}}function tx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function zU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fs("not implemented")}_getIdTokenResponse(e){return Fs("not implemented")}_linkToIdToken(e,t){return Fs("not implemented")}_getReauthenticationResolver(e){return Fs("not implemented")}}async function BU(n,e){return ni(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(n,e){return Yu(n,"POST","/v1/accounts:signInWithPassword",uo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(n,e){return Yu(n,"POST","/v1/accounts:signInWithEmailLink",uo(n,e))}async function HU(n,e){return Yu(n,"POST","/v1/accounts:signInWithEmailLink",uo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends c_{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Pu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Pu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uy(e,t,"signInWithPassword",$U);case"emailLink":return WU(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uy(e,r,"signUpPassword",BU);case"emailLink":return HU(e,{idToken:t,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(n,e){return Yu(n,"POST","/v1/accounts:signInWithIdp",uo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="http://localhost";class ra extends c_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new ra(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return xl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xl(e,t)}buildRequest(){const e={requestUri:GU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ql(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KU(n){const e=ru(su(n)).link,t=e?ru(su(e)).deep_link_id:null,r=ru(su(n)).deep_link_id;return(r?ru(su(r)).link:null)||r||t||e||n}class u_{constructor(e){const t=ru(su(e)),r=t.apiKey??null,s=t.oobCode??null,o=qU(t.mode??null);Oe(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=KU(e);try{return new u_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.providerId=Kl.PROVIDER_ID}static credential(e,t){return Pu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=u_.parseLink(t);return Oe(r,"argument-error"),Pu._fromEmailAndCode(e,r.code,r.tenantId)}}Kl.PROVIDER_ID="password";Kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends d_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Xu{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ra._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return js.credential(t,r)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Xu{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Xu{constructor(){super("twitter.com")}static credential(e,t){return ra._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ui.credential(t,r)}catch{return null}}}Ui.TWITTER_SIGN_IN_METHOD="twitter.com";Ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(n,e){return Yu(n,"POST","/v1/accounts:signUp",uo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Ir._fromIdTokenResponse(e,r,s),l=nx(r);return new sa({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=nx(r);return new sa({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function nx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends ei{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Df(e,t,r,s)}}function iA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,o,e,r):o})}async function YU(n,e,t=!1){const r=await kl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return sa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(n,e,t=!1){const{auth:r}=n;if(Vn(r.app))return Promise.reject($s(r));const s="reauthenticate";try{const o=await kl(n,iA(r,s,e,n),t);Oe(o.idToken,r,"internal-error");const l=a_(o.idToken);Oe(l,r,"internal-error");const{sub:u}=l;return Oe(n.uid===u,r,"user-mismatch"),sa._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ur(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(n,e,t=!1){if(Vn(n.app))return Promise.reject($s(n));const r="signIn",s=await iA(n,r,e),o=await sa._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function JU(n,e){return oA(ho(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(n){const e=ho(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZU(n,e,t){if(Vn(n.app))return Promise.reject($s(n));const r=ho(n),l=await Uy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QU).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&aA(n),d}),u=await sa._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function ez(n,e,t){return Vn(n.app)?Promise.reject($s(n)):JU(Gt(n),Kl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&aA(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(n,e){return ni(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nz(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Gt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await kl(r,tz(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function rz(n,e,t,r){return Gt(n).onIdTokenChanged(e,t,r)}function sz(n,e,t){return Gt(n).beforeAuthStateChanged(e,t)}function lA(n,e,t,r){return Gt(n).onAuthStateChanged(e,t,r)}function cA(n){return Gt(n).signOut()}const Mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=1e3,oz=10;class dA extends uA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);xU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,oz):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},iz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dA.type="LOCAL";const az=dA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA extends uA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hA.type="SESSION";const fA=hA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Dp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async p=>p(t.origin,o)),d=await lz(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const p=h_("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const E=y;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(){return window}function uz(n){os().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(){return typeof os().WorkerGlobalScope<"u"&&typeof os().importScripts=="function"}async function dz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hz(){return navigator?.serviceWorker?.controller||null}function fz(){return pA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="firebaseLocalStorageDb",pz=1,Of="firebaseLocalStorage",gA="fbase_key";class Ju{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mp(n,e){return n.transaction([Of],e?"readwrite":"readonly").objectStore(Of)}function mz(){const n=indexedDB.deleteDatabase(mA);return new Ju(n).toPromise()}function zy(){const n=indexedDB.open(mA,pz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Of,{keyPath:gA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Of)?e(r):(r.close(),await mz(),e(await zy()))})})}async function rx(n,e,t){const r=Mp(n,!0).put({[gA]:e,value:t});return new Ju(r).toPromise()}async function gz(n,e){const t=Mp(n,!1).get(e),r=await new Ju(t).toPromise();return r===void 0?null:r.value}function sx(n,e){const t=Mp(n,!0).delete(e);return new Ju(t).toPromise()}const yz=800,vz=3;class yA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>vz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dp._getInstance(fz()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dz(),!this.activeServiceWorker)return;this.sender=new cz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zy();return await rx(e,Mf,"1"),await sx(e,Mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>rx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>gz(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Mp(s,!1).getAll();return new Ju(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yA.type="LOCAL";const _z=yA;new Qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n,e){return e?Us(e):(Oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends c_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wz(n){return oA(n.auth,new f_(n),n.bypassAuthState)}function Ez(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),XU(t,new f_(n),n.bypassAuthState)}async function Sz(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),YU(t,new f_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wz;case"linkViaPopup":case"linkViaRedirect":return Sz;case"reauthViaPopup":case"reauthViaRedirect":return Ez;default:ur(this.auth,"internal-error")}}resolve(e){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=new Qu(2e3,1e4);async function Tz(n,e,t){if(Vn(n.app))return Promise.reject(Ar(n,"operation-not-supported-in-this-environment"));const r=ho(n);rU(n,e,d_);const s=vA(r,t);return new Go(r,"signInViaPopup",e,s).executeNotNull()}class Go extends _A{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Qs(this.filter.length===1,"Popup operations only handle one event");const e=h_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xz.get())};e()}}Go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz="pendingRedirect",Qh=new Map;class Cz extends _A{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Qh.get(this.auth._key());if(!e){try{const r=await Rz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Qh.set(this.auth._key(),e)}return this.bypassAuthState||Qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rz(n,e){const t=Pz(e),r=Az(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function bz(n,e){Qh.set(n._key(),e)}function Az(n){return Us(n._redirectPersistence)}function Pz(n){return Kh(Iz,n.config.apiKey,n.name)}async function Nz(n,e,t=!1){if(Vn(n.app))return Promise.reject($s(n));const r=ho(n),s=vA(r,e),l=await new Cz(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=600*1e3;class Dz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!wA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ar(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kz&&this.cachedEventUids.clear(),this.cachedEventUids.has(ix(e))}saveEventToCache(e){this.cachedEventUids.add(ix(e)),this.lastProcessedEventTime=Date.now()}}function ix(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Mz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oz(n,e={}){return ni(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vz=/^https?/;async function jz(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Oz(n);for(const t of e)try{if(Fz(t))return}catch{}ur(n,"unauthorized-domain")}function Fz(n){const e=jy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!Vz.test(t))return!1;if(Lz.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=new Qu(3e4,6e4);function ox(){const n=os().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zz(n){return new Promise((e,t)=>{function r(){ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ox(),t(Ar(n,"network-request-failed"))},timeout:Uz.get()})}if(os().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(os().gapi?.load)r();else{const s=kU("iframefcb");return os()[s]=()=>{gapi.load?r():t(Ar(n,"network-request-failed"))},nA(`${NU()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function Bz(n){return Yh=Yh||zz(n),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=new Qu(5e3,15e3),Wz="__/auth/iframe",Hz="emulator/auth/iframe",Gz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kz(n){const e=n.config;Oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?o_(e,Hz):`https://${n.config.authDomain}/${Wz}`,r={apiKey:e.apiKey,appName:n.name,v:ha},s=qz.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ql(r).slice(1)}`}async function Qz(n){const e=await Bz(n),t=os().gapi;return Oe(t,n,"internal-error"),e.open({where:document.body,url:Kz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gz,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Ar(n,"network-request-failed"),u=os().setTimeout(()=>{o(l)},$z.get());function d(){os().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xz=500,Jz=600,Zz="_blank",e6="http://localhost";class ax{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t6(n,e,t,r=Xz,s=Jz){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...Yz,width:r.toString(),height:s.toString(),top:o,left:l},p=En().toLowerCase();t&&(u=Qb(p)?Zz:t),qb(p)&&(e=e||e6,d.scrollbars="yes");const m=Object.entries(d).reduce((E,[I,A])=>`${E}${I}=${A},`,"");if(SU(p)&&u!=="_self")return n6(e||"",u),new ax(null);const y=window.open(e||"",u,m);Oe(y,n,"popup-blocked");try{y.focus()}catch{}return new ax(y)}function n6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="__/auth/handler",s6="emulator/auth/handler",i6=encodeURIComponent("fac");async function lx(n,e,t,r,s,o){Oe(n.config.authDomain,n,"auth-domain-config-required"),Oe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ha,eventId:s};if(e instanceof d_){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",ky(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof Xu){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),p=d?`#${i6}=${encodeURIComponent(d)}`:"";return`${o6(n)}?${ql(u).slice(1)}${p}`}function o6({config:n}){return n.emulator?o_(n,s6):`https://${n.authDomain}/${r6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="webStorageSupport";class a6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fA,this._completeRedirectFn=Nz,this._overrideRedirectResult=bz}async _openPopup(e,t,r,s){Qs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await lx(e,t,r,jy(),s);return t6(e,o,h_())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await lx(e,t,r,jy(),s);return uz(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Qs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Qz(e),r=new Dz(e);return t.register("authEvent",s=>(Oe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sy,{type:sy},s=>{const o=s?.[0]?.[sy];o!==void 0&&t(!!o),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eA()||Kb()||l_()}}const l6=a6;var cx="@firebase/auth",ux="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d6(n){na(new Ji("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Oe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tA(n)},p=new bU(r,s,o,d);return jU(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),na(new Ji("auth-internal",e=>{const t=ho(e.getProvider("auth").getImmediate());return(r=>new c6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(cx,ux,u6(n)),is(cx,ux,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=300,f6=Nb("authIdTokenMaxAge")||h6;let dx=null;const p6=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>f6)return;const s=t?.token;dx!==s&&(dx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function m6(n=r_()){const e=Np(n,"auth");if(e.isInitialized())return e.getImmediate();const t=VU(n,{popupRedirectResolver:l6,persistence:[_z,az,fA]}),r=Nb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=p6(o.toString());sz(t,l,()=>l(t.currentUser)),rz(t,u=>l(u))}}const s=bb("auth");return s&&FU(t,`http://${s}`),t}function g6(){return document.getElementsByTagName("head")?.[0]??document}AU({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Ar("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",g6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d6("Browser");var y6="firebase",v6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(y6,v6,"app");var hx={};const fx="@firebase/database",px="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EA="";function _6(n){EA=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),an(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:bu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ti(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new w6(e)}}catch{}return new E6},qo=SA("localStorage"),S6=SA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new Pp("@firebase/database"),x6=(function(){let n=1;return function(){return n++}})(),xA=function(n){const e=G4(n),t=new z4;t.update(e);const r=t.digest();return Xv.encodeByteArray(r)},Zu=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Zu.apply(null,r):typeof r=="object"?e+=an(r):e+=r,e+=" "}return e};let hu=null,mx=!0;const T6=function(n,e){ve(!0,"Can't turn on custom loggers persistently."),Tl.logLevel=Ke.VERBOSE,hu=Tl.log.bind(Tl)},yn=function(...n){if(mx===!0&&(mx=!1,hu===null&&S6.get("logging_enabled")===!0&&T6()),hu){const e=Zu.apply(null,n);hu(e)}},ed=function(n){return function(...e){yn(n,...e)}},By=function(...n){const e="FIREBASE INTERNAL ERROR: "+Zu(...n);Tl.error(e)},Ys=function(...n){const e=`FIREBASE FATAL ERROR: ${Zu(...n)}`;throw Tl.error(e),new Error(e)},Xn=function(...n){const e="FIREBASE WARNING: "+Zu(...n);Tl.warn(e)},I6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},TA=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},C6=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Dl="[MIN_NAME]",ia="[MAX_NAME]",Ql=function(n,e){if(n===e)return 0;if(n===Dl||e===ia)return-1;if(e===Dl||n===ia)return 1;{const t=gx(n),r=gx(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},R6=function(n,e){return n===e?0:n<e?-1:1},Qc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+an(e))},p_=function(n){if(typeof n!="object"||n===null)return an(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=an(e[r]),t+=":",t+=p_(n[e[r]]);return t+="}",t},IA=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function dr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const CA=function(n){ve(!TA(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,l,u,d;n===0?(o=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=u+r,l=Math.round(n*Math.pow(2,t-u)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const p=[];for(d=t;d;d-=1)p.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const m=p.join("");let y="";for(d=0;d<64;d+=8){let E=parseInt(m.substr(d,8),2).toString(16);E.length===1&&(E="0"+E),y=y+E}return y.toLowerCase()},b6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},A6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},P6=new RegExp("^-?(0*)\\d{1,10}$"),N6=-2147483648,k6=2147483647,gx=function(n){if(P6.test(n)){const e=Number(n);if(e>=N6&&e<=k6)return e}return null},td=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Xn("Exception was thrown by user callback.",t),e},Math.floor(0))}},D6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Xn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(yn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xn(e)}}class Xh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="5",RA="v",bA="s",AA="r",PA="f",NA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kA="ls",DA="p",$y="ac",MA="websocket",OA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,t,r,s,o=!1,l="",u=!1,d=!1,p=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=d,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function L6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function VA(n,e,t){ve(typeof e=="string","typeof type must == string"),ve(typeof t=="object","typeof params must == object");let r;if(e===MA)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===OA)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);L6(n)&&(t.ns=n.namespace);const s=[];return dr(t,(o,l)=>{s.push(o+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(){this.counters_={}}incrementCounter(e,t=1){ti(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return w4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy={},oy={};function g_(n){const e=n.toString();return iy[e]||(iy[e]=new V6),iy[e]}function j6(n,e){const t=n.toString();return oy[t]||(oy[t]=e()),oy[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&td(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="start",U6="close",z6="pLPCommand",B6="pRTLPCB",jA="id",FA="pw",UA="ser",$6="cb",W6="seg",H6="ts",G6="d",q6="dframe",zA=1870,BA=30,K6=zA-BA,Q6=25e3,Y6=3e4;class gl{constructor(e,t,r,s,o,l,u){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ed(e),this.stats_=g_(t),this.urlFn=d=>(this.appCheckToken&&(d[$y]=this.appCheckToken),VA(t,OA,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new F6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Y6)),C6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new y_((...o)=>{const[l,u,d,p,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===yx)this.id=u,this.password=d;else if(l===U6)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[yx]="t",r[UA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$6]=this.scriptTagHolder.uniqueCallbackIdentifier),r[RA]=m_,this.transportSessionId&&(r[bA]=this.transportSessionId),this.lastSessionId&&(r[kA]=this.lastSessionId),this.applicationId&&(r[DA]=this.applicationId),this.appCheckToken&&(r[$y]=this.appCheckToken),typeof location<"u"&&location.hostname&&NA.test(location.hostname)&&(r[AA]=PA);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gl.forceAllow_=!0}static forceDisallow(){gl.forceDisallow_=!0}static isAvailable(){return gl.forceAllow_?!0:!gl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!b6()&&!A6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=an(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Cb(t),s=IA(r,K6);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[q6]="t",r[jA]=e,r[FA]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=an(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class y_{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=x6(),window[z6+this.uniqueCallbackIdentifier]=e,window[B6+this.uniqueCallbackIdentifier]=t,this.myIFrame=y_.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){yn("frame writing exception"),u.stack&&yn(u.stack),yn(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||yn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[jA]=this.myID,e[FA]=this.myPW,e[UA]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+BA+r.length<=zA;){const l=this.pendingSegs.shift();r=r+"&"+W6+s+"="+l.seg+"&"+H6+s+"="+l.ts+"&"+G6+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(Q6)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{yn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=16384,J6=45e3;let Lf=null;typeof MozWebSocket<"u"?Lf=MozWebSocket:typeof WebSocket<"u"&&(Lf=WebSocket);class Tr{constructor(e,t,r,s,o,l,u){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ed(this.connId),this.stats_=g_(t),this.connURL=Tr.connectionURL_(t,l,u,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const l={};return l[RA]=m_,typeof location<"u"&&location.hostname&&NA.test(location.hostname)&&(l[AA]=PA),t&&(l[bA]=t),r&&(l[kA]=r),s&&(l[$y]=s),o&&(l[DA]=o),VA(e,MA,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qo.set("previous_websocket_failure",!0);try{let r;k4(),this.mySock=new Lf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Tr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Lf!==null&&!Tr.forceDisallow_}static previouslyFailed(){return qo.isInMemoryStorage||qo.get("previous_websocket_failure")===!0}markConnectionHealthy(){qo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=bu(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ve(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=an(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=IA(t,X6);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(J6))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Tr.responsesRequiredToBeHealthy=2;Tr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{static get ALL_TRANSPORTS(){return[gl,Tr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Tr&&Tr.isAvailable();let r=t&&!Tr.previouslyFailed();if(e.webSocketOnly&&(t||Xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Tr];else{const s=this.transports_=[];for(const o of Nu.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Nu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Nu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=6e4,e5=5e3,t5=10*1024,n5=100*1024,ay="t",vx="d",r5="s",_x="r",s5="e",wx="o",Ex="a",Sx="n",xx="p",i5="h";class o5{constructor(e,t,r,s,o,l,u,d,p,m){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ed("c:"+this.id+":"),this.transportManager_=new Nu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=fu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>n5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>t5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ay in e){const t=e[ay];t===Ex?this.upgradeIfSecondaryHealthy_():t===_x?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===wx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Qc("t",e),r=Qc("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:xx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ex,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Sx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Qc("t",e),r=Qc("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Qc(ay,e);if(vx in e){const r=e[vx];if(t===i5){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===Sx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===r5?this.onConnectionShutdown_(r):t===_x?this.onReset_(r):t===s5?By("Server Error: "+r):t===wx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):By("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),m_!==r&&Xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),fu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Z6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(e5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:xx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.allowedEvents_=e,this.listeners_={},ve(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){ve(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends WA{static getInstance(){return new Vf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!t_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ve(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=32,Ix=768;class Et{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ut(){return new Et("")}function et(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zi(n){return n.pieces_.length-n.pieceNum_}function _t(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Et(n.pieces_,e)}function HA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function a5(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function GA(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qA(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Et(e,0)}function Zt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Et)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new Et(t,0)}function Je(n){return n.pieceNum_>=n.pieces_.length}function lr(n,e){const t=et(n),r=et(e);if(t===null)return e;if(t===r)return lr(_t(n),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function KA(n,e){if(Zi(n)!==Zi(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Cr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Zi(n)>Zi(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class l5{constructor(e,t){this.errorPrefix_=t,this.parts_=GA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ap(this.parts_[r]);QA(this)}}function c5(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Ap(e),QA(n)}function u5(n){const e=n.parts_.pop();n.byteLength_-=Ap(e),n.parts_.length>0&&(n.byteLength_-=1)}function QA(n){if(n.byteLength_>Ix)throw new Error(n.errorPrefix_+"has a key path longer than "+Ix+" bytes ("+n.byteLength_+").");if(n.parts_.length>Tx)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Tx+") or object contains a cycle "+Wo(n))}function Wo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends WA{static getInstance(){return new v_}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ve(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=1e3,d5=300*1e3,Cx=30*1e3,h5=1.3,f5=3e4,p5="server_kill",Rx=3;class Ws extends $A{constructor(e,t,r,s,o,l,u,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=d,this.id=Ws.nextPersistentConnectionId_++,this.log_=ed("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yc,this.maxReconnectDelay_=d5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");v_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Vf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(an(o)),ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new Jv,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?t.resolve(u):t.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ve(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const d=u.d,p=u.s;Ws.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",u),p!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(p,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ti(e,"w")){const r=Nl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||U4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Cx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=F4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,l=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";s&&(o.q=r,o.t=s),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+an(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):By("Unrecognized action received from server: "+an(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>f5&&(this.reconnectDelay_=Yc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*h5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ws.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const d=function(){u?u.close():(l=!0,r())},p=function(y){ve(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)};this.realtime_={close:d,sendRequest:p};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,E]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?yn("getToken() completed but was canceled"):(yn("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=E&&E.token,u=new o5(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,I=>{Xn(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(p5)},o))}catch(y){this.log_("Failed to get token: "+y),l||(this.repoInfo_.nodeAdmin&&Xn(y),d())}}}interrupt(e){yn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){yn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ky(this.interruptReasons_)&&(this.reconnectDelay_=Yc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>p_(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new Et(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){yn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Rx&&(this.reconnectDelay_=Cx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){yn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Rx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+EA.replace(/\./g,"-")]=1,t_()?e["framework.cordova"]=1:Db()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vf.getInstance().currentlyOnline();return ky(this.interruptReasons_)&&e}}Ws.nextPersistentConnectionId_=0;Ws.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new tt(Dl,e),s=new tt(Dl,t);return this.compare(r,s)!==0}minPost(){return tt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh;class YA extends Op{static get __EMPTY_NODE(){return Lh}static set __EMPTY_NODE(e){Lh=e}compare(e,t){return Ql(e.name,t.name)}isDefinedOn(e){throw Gl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tt.MIN}maxPost(){return new tt(ia,Lh)}makePost(e,t){return ve(typeof e=="string","KeyIndex indexValue must always be a string."),new tt(e,Lh)}toString(){return".key"}}const Il=new YA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=class{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Kn=class iu{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??iu.RED,this.left=s??ns.EMPTY_NODE,this.right=o??ns.EMPTY_NODE}copy(e,t,r,s,o){return new iu(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ns.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return ns.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,iu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,iu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Kn.RED=!0;Kn.BLACK=!1;class m5{copy(e,t,r,s,o){return this}insert(e,t,r){return new Kn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ns=class Jh{constructor(e,t=Jh.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Jh(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Kn.BLACK,null,null))}remove(e){return new Jh(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Kn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Vh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Vh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Vh(this.root_,null,this.comparator_,!0,e)}};ns.EMPTY_NODE=new m5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(n,e){return Ql(n.name,e.name)}function __(n,e){return Ql(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wy;function y5(n){Wy=n}const XA=function(n){return typeof n=="number"?"number:"+CA(n):"string:"+n},JA=function(n){if(n.isLeafNode()){const e=n.val();ve(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ti(e,".sv"),"Priority must be a string or number.")}else ve(n===Wy||n.isEmpty(),"priority of unexpected type.");ve(n===Wy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bx;class Yt{static set __childrenNodeConstructor(e){bx=e}static get __childrenNodeConstructor(){return bx}constructor(e,t=Yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ve(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),JA(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Yt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Je(e)?this:et(e)===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=et(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ve(r!==".priority"||Zi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+XA(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=CA(this.value_):e+=this.value_,this.lazyHash_=xA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Yt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Yt.__childrenNodeConstructor?-1:(ve(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=Yt.VALUE_TYPE_ORDER.indexOf(t),o=Yt.VALUE_TYPE_ORDER.indexOf(r);return ve(s>=0,"Unknown leaf type: "+t),ve(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZA,eP;function v5(n){ZA=n}function _5(n){eP=n}class w5 extends Op{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?Ql(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tt.MIN}maxPost(){return new tt(ia,new Yt("[PRIORITY-POST]",eP))}makePost(e,t){const r=ZA(e);return new tt(t,new Yt("[PRIORITY-POST]",r))}toString(){return".priority"}}const wn=new w5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5=Math.log(2);class S5{constructor(e){const t=o=>parseInt(Math.log(o)/E5,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const jf=function(n,e,t,r){n.sort(e);const s=function(d,p){const m=p-d;let y,E;if(m===0)return null;if(m===1)return y=n[d],E=t?t(y):y,new Kn(E,y.node,Kn.BLACK,null,null);{const I=parseInt(m/2,10)+d,A=s(d,I),T=s(I+1,p);return y=n[I],E=t?t(y):y,new Kn(E,y.node,Kn.BLACK,A,T)}},o=function(d){let p=null,m=null,y=n.length;const E=function(A,T){const b=y-A,j=y;y-=A;const V=s(b+1,j),B=n[b],K=t?t(B):B;I(new Kn(K,B.node,T,null,V))},I=function(A){p?(p.left=A,p=A):(m=A,p=A)};for(let A=0;A<d.count;++A){const T=d.nextBitIsOne(),b=Math.pow(2,d.count-(A+1));T?E(b,Kn.BLACK):(E(b,Kn.BLACK),E(b,Kn.RED))}return m},l=new S5(n.length),u=o(l);return new ns(r||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly;const cl={};class zs{static get Default(){return ve(cl&&wn,"ChildrenNode.ts has not been loaded"),ly=ly||new zs({".priority":cl},{".priority":wn}),ly}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Nl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ns?t:null}hasIndex(e){return ti(this.indexSet_,e.toString())}addIndex(e,t){ve(e!==Il,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(tt.Wrap);let l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let u;s?u=jf(r,e.getCompare()):u=cl;const d=e.toString(),p={...this.indexSet_};p[d]=e;const m={...this.indexes_};return m[d]=u,new zs(m,p)}addToIndexes(e,t){const r=bf(this.indexes_,(s,o)=>{const l=Nl(this.indexSet_,o);if(ve(l,"Missing index implementation for "+o),s===cl)if(l.isDefinedOn(e.node)){const u=[],d=t.getIterator(tt.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&u.push(p),p=d.getNext();return u.push(e),jf(u,l.getCompare())}else return cl;else{const u=t.get(e.name);let d=s;return u&&(d=d.remove(new tt(e.name,u))),d.insert(e,e.node)}});return new zs(r,this.indexSet_)}removeFromIndexes(e,t){const r=bf(this.indexes_,s=>{if(s===cl)return s;{const o=t.get(e.name);return o?s.remove(new tt(e.name,o)):s}});return new zs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc;class at{static get EMPTY_NODE(){return Xc||(Xc=new at(new ns(__),null,zs.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&JA(this.priorityNode_),this.children_.isEmpty()&&ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xc}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Xc:t}}getChild(e){const t=et(e);return t===null?this:this.getImmediateChild(t).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ve(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new tt(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?Xc:this.priorityNode_;return new at(s,l,o)}}updateChild(e,t){const r=et(e);if(r===null)return t;{ve(et(e)!==".priority"||Zi(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(_t(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(wn,(l,u)=>{t[l]=u.val(e),r++,o&&at.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!e&&o&&s<2*r){const l=[];for(const u in t)l[u]=t[u];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+XA(this.getPriority().val())+":"),this.forEachChild(wn,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":xA(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new tt(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new tt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new tt(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,tt.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,tt.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===nd?-1:0}withIndex(e){if(e===Il||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Il||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(wn),s=t.getIterator(wn);let o=r.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=s.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Il?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class x5 extends at{constructor(){super(new ns(__),at.EMPTY_NODE,zs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const nd=new x5;Object.defineProperties(tt,{MIN:{value:new tt(Dl,at.EMPTY_NODE)},MAX:{value:new tt(ia,nd)}});YA.__EMPTY_NODE=at.EMPTY_NODE;Yt.__childrenNodeConstructor=at;y5(nd);_5(nd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=!0;function vn(n,e=null){if(n===null)return at.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ve(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Yt(t,vn(e))}if(!(n instanceof Array)&&T5){const t=[];let r=!1;if(dr(n,(l,u)=>{if(l.substring(0,1)!=="."){const d=vn(u);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new tt(l,d)))}}),t.length===0)return at.EMPTY_NODE;const o=jf(t,g5,l=>l.name,__);if(r){const l=jf(t,wn.getCompare());return new at(o,vn(e),new zs({".priority":l},{".priority":wn}))}else return new at(o,vn(e),zs.Default)}else{let t=at.EMPTY_NODE;return dr(n,(r,s)=>{if(ti(n,r)&&r.substring(0,1)!=="."){const o=vn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(vn(e))}}v5(vn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5 extends Op{constructor(e){super(),this.indexPath_=e,ve(!Je(e)&&et(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?Ql(e.name,t.name):o}makePost(e,t){const r=vn(e),s=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new tt(t,s)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,nd);return new tt(ia,e)}toString(){return GA(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5 extends Op{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Ql(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tt.MIN}maxPost(){return tt.MAX}makePost(e,t){const r=vn(e);return new tt(t,r)}toString(){return".value"}}const R5=new C5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(n){return{type:"value",snapshotNode:n}}function A5(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function P5(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ax(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function N5(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Dl}hasEnd(){return this.endSet_}getIndexEndValue(){return ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ia}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wn}copy(){const e=new w_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Px(n){const e={};if(n.isDefault())return e;let t;if(n.index_===wn?t="$priority":n.index_===R5?t="$value":n.index_===Il?t="$key":(ve(n.index_ instanceof I5,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=an(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=an(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+an(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=an(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+an(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Nx(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==wn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends $A{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=ed("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Ff.getListenId_(e,r),u={};this.listens_[l]=u;const d=Px(e._queryParams);this.restRequest_(o+".json",d,(p,m)=>{let y=m;if(p===404&&(y=null,p=null),p===null&&this.onDataUpdate_(o,y,!1,r),Nl(this.listens_,l)===u){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",s(E,null)}})}unlisten(e,t){const r=Ff.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Px(e._queryParams),r=e._path.toString(),s=new Jv;return this.restRequest_(r+".json",t,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(r,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ql(t);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let d=null;if(u.status>=200&&u.status<300){try{d=bu(u.responseText)}catch{Xn("Failed to parse JSON response for "+l+": "+u.responseText)}r(null,d)}else u.status!==401&&u.status!==404&&Xn("Got unsuccessful REST response for "+l+" Status: "+u.status),r(u.status);r=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(){return{value:null,children:new Map}}function tP(n,e,t){if(Je(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=et(e);n.children.has(r)||n.children.set(r,Uf());const s=n.children.get(r);e=_t(e),tP(s,e,t)}}function Hy(n,e,t){n.value!==null?t(e,n.value):D5(n,(r,s)=>{const o=new Et(e.toString()+"/"+r);Hy(s,o,t)})}function D5(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&dr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=10*1e3,O5=30*1e3,L5=300*1e3;class V5{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new M5(e);const r=kx+(O5-kx)*Math.random();fu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;dr(e,(s,o)=>{o>0&&ti(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),fu(this.reportStats_.bind(this),Math.floor(Math.random()*2*L5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rs;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(rs||(rs={}));function nP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=rs.ACK_USER_WRITE,this.source=nP()}operationForChild(e){if(Je(this.path)){if(this.affectedTree.value!=null)return ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Et(e));return new zf(ut(),t,this.revert)}}else return ve(et(this.path)===e,"operationForChild called for unrelated child."),new zf(_t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=rs.OVERWRITE}operationForChild(e){return Je(this.path)?new oa(this.source,ut(),this.snap.getImmediateChild(e)):new oa(this.source,_t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=rs.MERGE}operationForChild(e){if(Je(this.path)){const t=this.children.subtree(new Et(e));return t.isEmpty()?null:t.value?new oa(this.source,ut(),t.value):new ku(this.source,ut(),t)}else return ve(et(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ku(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Je(e))return this.isFullyInitialized()&&!this.filtered_;const t=et(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function j5(n,e,t,r){const s=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(N5(l.childName,l.snapshotNode))}),Jc(n,s,"child_removed",e,r,t),Jc(n,s,"child_added",e,r,t),Jc(n,s,"child_moved",o,r,t),Jc(n,s,"child_changed",e,r,t),Jc(n,s,"value",e,r,t),s}function Jc(n,e,t,r,s,o){const l=r.filter(u=>u.type===t);l.sort((u,d)=>U5(n,u,d)),l.forEach(u=>{const d=F5(n,u,o);s.forEach(p=>{p.respondsTo(u.type)&&e.push(p.createEvent(d,n.query_))})})}function F5(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function U5(n,e,t){if(e.childName==null||t.childName==null)throw Gl("Should only compare child_ events.");const r=new tt(e.childName,e.snapshotNode),s=new tt(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n,e){return{eventCache:n,serverCache:e}}function pu(n,e,t,r){return iP(new E_(e,t,r),n.serverCache)}function oP(n,e,t,r){return iP(n.eventCache,new E_(e,t,r))}function Gy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function aa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cy;const z5=()=>(cy||(cy=new ns(R6)),cy);class vt{static fromObject(e){let t=new vt(null);return dr(e,(r,s)=>{t=t.set(new Et(r),s)}),t}constructor(e,t=z5()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ut(),value:this.value};if(Je(e))return null;{const r=et(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(_t(e),t);return o!=null?{path:Zt(new Et(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Je(e))return this;{const t=et(e),r=this.children.get(t);return r!==null?r.subtree(_t(e)):new vt(null)}}set(e,t){if(Je(e))return new vt(t,this.children);{const r=et(e),o=(this.children.get(r)||new vt(null)).set(_t(e),t),l=this.children.insert(r,o);return new vt(this.value,l)}}remove(e){if(Je(e))return this.children.isEmpty()?new vt(null):new vt(null,this.children);{const t=et(e),r=this.children.get(t);if(r){const s=r.remove(_t(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new vt(null):new vt(this.value,o)}else return this}}get(e){if(Je(e))return this.value;{const t=et(e),r=this.children.get(t);return r?r.get(_t(e)):null}}setTree(e,t){if(Je(e))return t;{const r=et(e),o=(this.children.get(r)||new vt(null)).setTree(_t(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new vt(this.value,l)}}fold(e){return this.fold_(ut(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(Zt(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ut(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(Je(e))return null;{const o=et(e),l=this.children.get(o);return l?l.findOnPath_(_t(e),Zt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ut(),t)}foreachOnPath_(e,t,r){if(Je(e))return this;{this.value&&r(t,this.value);const s=et(e),o=this.children.get(s);return o?o.foreachOnPath_(_t(e),Zt(t,s),r):new vt(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Zt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.writeTree_=e}static empty(){return new Pr(new vt(null))}}function mu(n,e,t){if(Je(e))return new Pr(new vt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const l=lr(s,e);return o=o.updateChild(l,t),new Pr(n.writeTree_.set(s,o))}else{const s=new vt(t),o=n.writeTree_.setTree(e,s);return new Pr(o)}}}function Dx(n,e,t){let r=n;return dr(t,(s,o)=>{r=mu(r,Zt(e,s),o)}),r}function Mx(n,e){if(Je(e))return Pr.empty();{const t=n.writeTree_.setTree(e,new vt(null));return new Pr(t)}}function qy(n,e){return fa(n,e)!=null}function fa(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(lr(t.path,e)):null}function Ox(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(wn,(r,s)=>{e.push(new tt(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new tt(r,s.value))}),e}function Wi(n,e){if(Je(e))return n;{const t=fa(n,e);return t!=null?new Pr(new vt(t)):new Pr(n.writeTree_.subtree(e))}}function Ky(n){return n.writeTree_.isEmpty()}function Ml(n,e){return aP(ut(),n.writeTree_,e)}function aP(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(ve(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=aP(Zt(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Zt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n,e){return fP(e,n)}function B5(n,e,t,r,s){ve(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=mu(n.visibleWrites,e,t)),n.lastWriteId=r}function $5(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function W5(n,e){const t=n.allWrites.findIndex(u=>u.writeId===e);ve(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const u=n.allWrites[l];u.visible&&(l>=t&&H5(u,r.path)?s=!1:Cr(r.path,u.path)&&(o=!0)),l--}if(s){if(o)return G5(n),!0;if(r.snap)n.visibleWrites=Mx(n.visibleWrites,r.path);else{const u=r.children;dr(u,d=>{n.visibleWrites=Mx(n.visibleWrites,Zt(r.path,d))})}return!0}else return!1}function H5(n,e){if(n.snap)return Cr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Cr(Zt(n.path,t),e))return!0;return!1}function G5(n){n.visibleWrites=cP(n.allWrites,q5,ut()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function q5(n){return n.visible}function cP(n,e,t){let r=Pr.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let u;if(o.snap)Cr(t,l)?(u=lr(t,l),r=mu(r,u,o.snap)):Cr(l,t)&&(u=lr(l,t),r=mu(r,ut(),o.snap.getChild(u)));else if(o.children){if(Cr(t,l))u=lr(t,l),r=Dx(r,u,o.children);else if(Cr(l,t))if(u=lr(l,t),Je(u))r=Dx(r,ut(),o.children);else{const d=Nl(o.children,et(u));if(d){const p=d.getChild(_t(u));r=mu(r,ut(),p)}}}else throw Gl("WriteRecord should have .snap or .children")}}return r}function uP(n,e,t,r,s){if(!r&&!s){const o=fa(n.visibleWrites,e);if(o!=null)return o;{const l=Wi(n.visibleWrites,e);if(Ky(l))return t;if(t==null&&!qy(l,ut()))return null;{const u=t||at.EMPTY_NODE;return Ml(l,u)}}}else{const o=Wi(n.visibleWrites,e);if(!s&&Ky(o))return t;if(!s&&t==null&&!qy(o,ut()))return null;{const l=function(p){return(p.visible||s)&&(!r||!~r.indexOf(p.writeId))&&(Cr(p.path,e)||Cr(e,p.path))},u=cP(n.allWrites,l,e),d=t||at.EMPTY_NODE;return Ml(u,d)}}}function K5(n,e,t){let r=at.EMPTY_NODE;const s=fa(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(wn,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=Wi(n.visibleWrites,e);return t.forEachChild(wn,(l,u)=>{const d=Ml(Wi(o,new Et(l)),u);r=r.updateImmediateChild(l,d)}),Ox(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=Wi(n.visibleWrites,e);return Ox(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function Q5(n,e,t,r,s){ve(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=Zt(e,t);if(qy(n.visibleWrites,o))return null;{const l=Wi(n.visibleWrites,o);return Ky(l)?s.getChild(t):Ml(l,s.getChild(t))}}function Y5(n,e,t,r){const s=Zt(e,t),o=fa(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=Wi(n.visibleWrites,s);return Ml(l,r.getNode().getImmediateChild(t))}else return null}function X5(n,e){return fa(n.visibleWrites,e)}function J5(n,e,t,r,s,o,l){let u;const d=Wi(n.visibleWrites,e),p=fa(d,ut());if(p!=null)u=p;else if(t!=null)u=Ml(d,t);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const m=[],y=l.getCompare(),E=o?u.getReverseIteratorFrom(r,l):u.getIteratorFrom(r,l);let I=E.getNext();for(;I&&m.length<s;)y(I,r)!==0&&m.push(I),I=E.getNext();return m}else return[]}function Z5(){return{visibleWrites:Pr.empty(),allWrites:[],lastWriteId:-1}}function Qy(n,e,t,r){return uP(n.writeTree,n.treePath,e,t,r)}function dP(n,e){return K5(n.writeTree,n.treePath,e)}function Lx(n,e,t,r){return Q5(n.writeTree,n.treePath,e,t,r)}function Bf(n,e){return X5(n.writeTree,Zt(n.treePath,e))}function e9(n,e,t,r,s,o){return J5(n.writeTree,n.treePath,e,t,r,s,o)}function S_(n,e,t){return Y5(n.writeTree,n.treePath,e,t)}function hP(n,e){return fP(Zt(n.treePath,e),n.writeTree)}function fP(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ve(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ve(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Ax(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,P5(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,A5(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ax(r,e.snapshotNode,s.oldSnap));else throw Gl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const pP=new n9;class x_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new E_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return S_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:aa(this.viewCache_),o=e9(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function r9(n,e){ve(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ve(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function s9(n,e,t,r,s){const o=new t9;let l,u;if(t.type===rs.OVERWRITE){const p=t;p.source.fromUser?l=Yy(n,e,p.path,p.snap,r,s,o):(ve(p.source.fromServer,"Unknown source."),u=p.source.tagged||e.serverCache.isFiltered()&&!Je(p.path),l=$f(n,e,p.path,p.snap,r,s,u,o))}else if(t.type===rs.MERGE){const p=t;p.source.fromUser?l=o9(n,e,p.path,p.children,r,s,o):(ve(p.source.fromServer,"Unknown source."),u=p.source.tagged||e.serverCache.isFiltered(),l=Xy(n,e,p.path,p.children,r,s,u,o))}else if(t.type===rs.ACK_USER_WRITE){const p=t;p.revert?l=c9(n,e,p.path,r,s,o):l=a9(n,e,p.path,p.affectedTree,r,s,o)}else if(t.type===rs.LISTEN_COMPLETE)l=l9(n,e,t.path,r,o);else throw Gl("Unknown operation type: "+t.type);const d=o.getChanges();return i9(e,l,d),{viewCache:l,changes:d}}function i9(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Gy(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(b5(Gy(e)))}}function mP(n,e,t,r,s,o){const l=e.eventCache;if(Bf(r,t)!=null)return e;{let u,d;if(Je(t))if(ve(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=aa(e),m=p instanceof at?p:at.EMPTY_NODE,y=dP(r,m);u=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const p=Qy(r,aa(e));u=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=et(t);if(p===".priority"){ve(Zi(t)===1,"Can't have a priority with additional path components");const m=l.getNode();d=e.serverCache.getNode();const y=Lx(r,t,m,d);y!=null?u=n.filter.updatePriority(m,y):u=l.getNode()}else{const m=_t(t);let y;if(l.isCompleteForChild(p)){d=e.serverCache.getNode();const E=Lx(r,t,l.getNode(),d);E!=null?y=l.getNode().getImmediateChild(p).updateChild(m,E):y=l.getNode().getImmediateChild(p)}else y=S_(r,p,e.serverCache);y!=null?u=n.filter.updateChild(l.getNode(),p,y,m,s,o):u=l.getNode()}}return pu(e,u,l.isFullyInitialized()||Je(t),n.filter.filtersNodes())}}function $f(n,e,t,r,s,o,l,u){const d=e.serverCache;let p;const m=l?n.filter:n.filter.getIndexedFilter();if(Je(t))p=m.updateFullNode(d.getNode(),r,null);else if(m.filtersNodes()&&!d.isFiltered()){const I=d.getNode().updateChild(t,r);p=m.updateFullNode(d.getNode(),I,null)}else{const I=et(t);if(!d.isCompleteForPath(t)&&Zi(t)>1)return e;const A=_t(t),b=d.getNode().getImmediateChild(I).updateChild(A,r);I===".priority"?p=m.updatePriority(d.getNode(),b):p=m.updateChild(d.getNode(),I,b,A,pP,null)}const y=oP(e,p,d.isFullyInitialized()||Je(t),m.filtersNodes()),E=new x_(s,y,o);return mP(n,y,t,s,E,u)}function Yy(n,e,t,r,s,o,l){const u=e.eventCache;let d,p;const m=new x_(s,e,o);if(Je(t))p=n.filter.updateFullNode(e.eventCache.getNode(),r,l),d=pu(e,p,!0,n.filter.filtersNodes());else{const y=et(t);if(y===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),r),d=pu(e,p,u.isFullyInitialized(),u.isFiltered());else{const E=_t(t),I=u.getNode().getImmediateChild(y);let A;if(Je(E))A=r;else{const T=m.getCompleteChild(y);T!=null?HA(E)===".priority"&&T.getChild(qA(E)).isEmpty()?A=T:A=T.updateChild(E,r):A=at.EMPTY_NODE}if(I.equals(A))d=e;else{const T=n.filter.updateChild(u.getNode(),y,A,E,m,l);d=pu(e,T,u.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function Vx(n,e){return n.eventCache.isCompleteForChild(e)}function o9(n,e,t,r,s,o,l){let u=e;return r.foreach((d,p)=>{const m=Zt(t,d);Vx(e,et(m))&&(u=Yy(n,u,m,p,s,o,l))}),r.foreach((d,p)=>{const m=Zt(t,d);Vx(e,et(m))||(u=Yy(n,u,m,p,s,o,l))}),u}function jx(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Xy(n,e,t,r,s,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,p;Je(t)?p=r:p=new vt(null).setTree(t,r);const m=e.serverCache.getNode();return p.children.inorderTraversal((y,E)=>{if(m.hasChild(y)){const I=e.serverCache.getNode().getImmediateChild(y),A=jx(n,I,E);d=$f(n,d,new Et(y),A,s,o,l,u)}}),p.children.inorderTraversal((y,E)=>{const I=!e.serverCache.isCompleteForChild(y)&&E.value===null;if(!m.hasChild(y)&&!I){const A=e.serverCache.getNode().getImmediateChild(y),T=jx(n,A,E);d=$f(n,d,new Et(y),T,s,o,l,u)}}),d}function a9(n,e,t,r,s,o,l){if(Bf(s,t)!=null)return e;const u=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(Je(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return $f(n,e,t,d.getNode().getChild(t),s,o,u,l);if(Je(t)){let p=new vt(null);return d.getNode().forEachChild(Il,(m,y)=>{p=p.set(new Et(m),y)}),Xy(n,e,t,p,s,o,u,l)}else return e}else{let p=new vt(null);return r.foreach((m,y)=>{const E=Zt(t,m);d.isCompleteForPath(E)&&(p=p.set(m,d.getNode().getChild(E)))}),Xy(n,e,t,p,s,o,u,l)}}function l9(n,e,t,r,s){const o=e.serverCache,l=oP(e,o.getNode(),o.isFullyInitialized()||Je(t),o.isFiltered());return mP(n,l,t,r,pP,s)}function c9(n,e,t,r,s,o){let l;if(Bf(r,t)!=null)return e;{const u=new x_(r,e,s),d=e.eventCache.getNode();let p;if(Je(t)||et(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Qy(r,aa(e));else{const y=e.serverCache.getNode();ve(y instanceof at,"serverChildren would be complete if leaf node"),m=dP(r,y)}m=m,p=n.filter.updateFullNode(d,m,o)}else{const m=et(t);let y=S_(r,m,e.serverCache);y==null&&e.serverCache.isCompleteForChild(m)&&(y=d.getImmediateChild(m)),y!=null?p=n.filter.updateChild(d,m,y,_t(t),u,o):e.eventCache.getNode().hasChild(m)?p=n.filter.updateChild(d,m,at.EMPTY_NODE,_t(t),u,o):p=d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Qy(r,aa(e)),l.isLeafNode()&&(p=n.filter.updateFullNode(p,l,o)))}return l=e.serverCache.isFullyInitialized()||Bf(r,ut())!=null,pu(e,p,l,n.filter.filtersNodes())}}function u9(n,e){const t=aa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Je(e)&&!t.getImmediateChild(et(e)).isEmpty())?t.getChild(e):null}function Fx(n,e,t,r){e.type===rs.MERGE&&e.source.queryId!==null&&(ve(aa(n.viewCache_),"We should always have a full cache before handling merges"),ve(Gy(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=s9(n.processor_,s,e,t,r);return r9(n.processor_,o.viewCache),ve(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,d9(n,o.changes,o.viewCache.eventCache.getNode())}function d9(n,e,t,r){const s=n.eventRegistrations_;return j5(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ux;function h9(n){ve(!Ux,"__referenceConstructor has already been defined"),Ux=n}function T_(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return ve(o!=null,"SyncTree gave us an op for an invalid query."),Fx(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(Fx(l,e,t,r));return o}}function I_(n,e){let t=null;for(const r of n.views.values())t=t||u9(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zx;function f9(n){ve(!zx,"__referenceConstructor has already been defined"),zx=n}class Bx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=Z5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function p9(n,e,t,r,s){return B5(n.pendingWriteTree_,e,t,r,s),s?Vp(n,new oa(nP(),e,t)):[]}function yl(n,e,t=!1){const r=$5(n.pendingWriteTree_,e);if(W5(n.pendingWriteTree_,e)){let o=new vt(null);return r.snap!=null?o=o.set(ut(),!0):dr(r.children,l=>{o=o.set(new Et(l),!0)}),Vp(n,new zf(r.path,o,t))}else return[]}function Lp(n,e,t){return Vp(n,new oa(rP(),e,t))}function m9(n,e,t){const r=vt.fromObject(t);return Vp(n,new ku(rP(),e,r))}function g9(n,e,t,r){const s=_P(n,r);if(s!=null){const o=wP(s),l=o.path,u=o.queryId,d=lr(l,e),p=new oa(sP(u),d,t);return EP(n,l,p)}else return[]}function y9(n,e,t,r){const s=_P(n,r);if(s){const o=wP(s),l=o.path,u=o.queryId,d=lr(l,e),p=vt.fromObject(t),m=new ku(sP(u),d,p);return EP(n,l,m)}else return[]}function gP(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,u)=>{const d=lr(l,e),p=I_(u,d);if(p)return p});return uP(s,e,o,t,!0)}function Vp(n,e){return yP(e,n.syncPointTree_,null,lP(n.pendingWriteTree_,ut()))}function yP(n,e,t,r){if(Je(n.path))return vP(n,e,t,r);{const s=e.get(ut());t==null&&s!=null&&(t=I_(s,ut()));let o=[];const l=et(n.path),u=n.operationForChild(l),d=e.children.get(l);if(d&&u){const p=t?t.getImmediateChild(l):null,m=hP(r,l);o=o.concat(yP(u,d,p,m))}return s&&(o=o.concat(T_(s,n,r,t))),o}}function vP(n,e,t,r){const s=e.get(ut());t==null&&s!=null&&(t=I_(s,ut()));let o=[];return e.children.inorderTraversal((l,u)=>{const d=t?t.getImmediateChild(l):null,p=hP(r,l),m=n.operationForChild(l);m&&(o=o.concat(vP(m,u,d,p)))}),s&&(o=o.concat(T_(s,n,r,t))),o}function _P(n,e){return n.tagToQueryMap.get(e)}function wP(n){const e=n.indexOf("$");return ve(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Et(n.substr(0,e))}}function EP(n,e,t){const r=n.syncPointTree_.get(e);ve(r,"Missing sync point for query tag that we're tracking");const s=lP(n.pendingWriteTree_,e);return T_(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new C_(t)}node(){return this.node_}}class R_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Zt(this.path_,e);return new R_(this.syncTree_,t)}node(){return gP(this.syncTree_,this.path_)}}const v9=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},$x=function(n,e,t){if(!n||typeof n!="object")return n;if(ve(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return _9(n[".sv"],e,t);if(typeof n[".sv"]=="object")return w9(n[".sv"],e);ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},_9=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ve(!1,"Unexpected server value: "+n)}},w9=function(n,e,t){n.hasOwnProperty("increment")||ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ve(!1,"Unexpected increment value: "+r);const s=e.node();if(ve(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},E9=function(n,e,t,r){return b_(e,new R_(t,n),r)},S9=function(n,e,t){return b_(n,new C_(e),t)};function b_(n,e,t){const r=n.getPriority().val(),s=$x(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,u=$x(l.getValue(),e,t);return u!==l.getValue()||s!==l.getPriority().val()?new Yt(u,vn(s)):n}else{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new Yt(s))),l.forEachChild(wn,(u,d)=>{const p=b_(d,e.getImmediateChild(u),t);p!==d&&(o=o.updateImmediateChild(u,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function P_(n,e){let t=e instanceof Et?e:new Et(e),r=n,s=et(t);for(;s!==null;){const o=Nl(r.node.children,s)||{children:{},childCount:0};r=new A_(s,r,o),t=_t(t),s=et(t)}return r}function Yl(n){return n.node.value}function SP(n,e){n.node.value=e,Jy(n)}function xP(n){return n.node.childCount>0}function x9(n){return Yl(n)===void 0&&!xP(n)}function jp(n,e){dr(n.node.children,(t,r)=>{e(new A_(t,n,r))})}function TP(n,e,t,r){t&&e(n),jp(n,s=>{TP(s,e,!0)})}function T9(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function rd(n){return new Et(n.parent===null?n.name:rd(n.parent)+"/"+n.name)}function Jy(n){n.parent!==null&&I9(n.parent,n.name,n)}function I9(n,e,t){const r=x9(t),s=ti(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,Jy(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Jy(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=/[\[\].#$\/\u0000-\u001F\u007F]/,R9=/[\[\].#$\u0000-\u001F\u007F]/,uy=10*1024*1024,IP=function(n){return typeof n=="string"&&n.length!==0&&!C9.test(n)},b9=function(n){return typeof n=="string"&&n.length!==0&&!R9.test(n)},A9=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),b9(n)},CP=function(n,e,t){const r=t instanceof Et?new l5(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Wo(r));if(typeof e=="function")throw new Error(n+"contains a function "+Wo(r)+" with contents = "+e.toString());if(TA(e))throw new Error(n+"contains "+e.toString()+" "+Wo(r));if(typeof e=="string"&&e.length>uy/3&&Ap(e)>uy)throw new Error(n+"contains a string greater than "+uy+" utf8 bytes "+Wo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(dr(e,(l,u)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!IP(l)))throw new Error(n+" contains an invalid key ("+l+") "+Wo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);c5(r,l),CP(n,u,r),u5(r)}),s&&o)throw new Error(n+' contains ".value" child '+Wo(r)+" in addition to actual children.")}},P9=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!IP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!A9(t))throw new Error(H4(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function k9(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!KA(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function pa(n,e,t){k9(n,t),D9(n,r=>Cr(r,e)||Cr(e,r))}function D9(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(M9(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function M9(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();hu&&yn("event: "+t.toString()),td(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="repo_interrupt",L9=25;class V9{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new N9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Uf(),this.transactionQueueTree_=new A_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function j9(n,e,t){if(n.stats_=g_(n.repoInfo_),n.forceRestClient_||D6())n.server_=new Ff(n.repoInfo_,(r,s,o,l)=>{Wx(n,r,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Hx(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{an(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ws(n.repoInfo_,e,(r,s,o,l)=>{Wx(n,r,s,o,l)},r=>{Hx(n,r)},r=>{U9(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=j6(n.repoInfo_,()=>new V5(n.stats_,n.server_)),n.infoData_=new k5,n.infoSyncTree_=new Bx({startListening:(r,s,o,l)=>{let u=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(u=Lp(n.infoSyncTree_,r._path,d),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),N_(n,"connected",!1),n.serverSyncTree_=new Bx({startListening:(r,s,o,l)=>(n.server_.listen(r,o,s,(u,d)=>{const p=l(u,d);pa(n.eventQueue_,r._path,p)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function F9(n){const t=n.infoData_.getNode(new Et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function RP(n){return v9({timestamp:F9(n)})}function Wx(n,e,t,r,s){n.dataUpdateCount++;const o=new Et(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const d=bf(t,p=>vn(p));l=y9(n.serverSyncTree_,o,d,s)}else{const d=vn(t);l=g9(n.serverSyncTree_,o,d,s)}else if(r){const d=bf(t,p=>vn(p));l=m9(n.serverSyncTree_,o,d)}else{const d=vn(t);l=Lp(n.serverSyncTree_,o,d)}let u=o;l.length>0&&(u=D_(n,o)),pa(n.eventQueue_,u,l)}function Hx(n,e){N_(n,"connected",e),e===!1&&B9(n)}function U9(n,e){dr(e,(t,r)=>{N_(n,t,r)})}function N_(n,e,t){const r=new Et("/.info/"+e),s=vn(t);n.infoData_.updateSnapshot(r,s);const o=Lp(n.infoSyncTree_,r,s);pa(n.eventQueue_,r,o)}function z9(n){return n.nextWriteId_++}function B9(n){bP(n,"onDisconnectEvents");const e=RP(n),t=Uf();Hy(n.onDisconnect_,ut(),(s,o)=>{const l=E9(s,o,n.serverSyncTree_,e);tP(t,s,l)});let r=[];Hy(t,ut(),(s,o)=>{r=r.concat(Lp(n.serverSyncTree_,s,o));const l=G9(n,s);D_(n,l)}),n.onDisconnect_=Uf(),pa(n.eventQueue_,ut(),r)}function $9(n){n.persistentConnection_&&n.persistentConnection_.interrupt(O9)}function bP(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),yn(t,...e)}function AP(n,e,t){return gP(n.serverSyncTree_,e,t)||at.EMPTY_NODE}function k_(n,e=n.transactionQueueTree_){if(e||Fp(n,e),Yl(e)){const t=NP(n,e);ve(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&W9(n,rd(e),t)}else xP(e)&&jp(e,t=>{k_(n,t)})}function W9(n,e,t){const r=t.map(p=>p.currentWriteId),s=AP(n,e,r);let o=s;const l=s.hash();for(let p=0;p<t.length;p++){const m=t[p];ve(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const y=lr(e,m.path);o=o.updateChild(y,m.currentOutputSnapshotRaw)}const u=o.val(!0),d=e;n.server_.put(d.toString(),u,p=>{bP(n,"transaction put response",{path:d.toString(),status:p});let m=[];if(p==="ok"){const y=[];for(let E=0;E<t.length;E++)t[E].status=2,m=m.concat(yl(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&y.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();Fp(n,P_(n.transactionQueueTree_,e)),k_(n,n.transactionQueueTree_),pa(n.eventQueue_,e,m);for(let E=0;E<y.length;E++)td(y[E])}else{if(p==="datastale")for(let y=0;y<t.length;y++)t[y].status===3?t[y].status=4:t[y].status=0;else{Xn("transaction at "+d.toString()+" failed: "+p);for(let y=0;y<t.length;y++)t[y].status=4,t[y].abortReason=p}D_(n,e)}},l)}function D_(n,e){const t=PP(n,e),r=rd(t),s=NP(n,t);return H9(n,s,r),r}function H9(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const d=e[u],p=lr(t,d.path);let m=!1,y;if(ve(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,y=d.abortReason,s=s.concat(yl(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=L9)m=!0,y="maxretry",s=s.concat(yl(n.serverSyncTree_,d.currentWriteId,!0));else{const E=AP(n,d.path,l);d.currentInputSnapshot=E;const I=e[u].update(E.val());if(I!==void 0){CP("transaction failed: Data returned ",I,d.path);let A=vn(I);typeof I=="object"&&I!=null&&ti(I,".priority")||(A=A.updatePriority(E.getPriority()));const b=d.currentWriteId,j=RP(n),V=S9(A,E,j);d.currentOutputSnapshotRaw=A,d.currentOutputSnapshotResolved=V,d.currentWriteId=z9(n),l.splice(l.indexOf(b),1),s=s.concat(p9(n.serverSyncTree_,d.path,V,d.currentWriteId,d.applyLocally)),s=s.concat(yl(n.serverSyncTree_,b,!0))}else m=!0,y="nodata",s=s.concat(yl(n.serverSyncTree_,d.currentWriteId,!0))}pa(n.eventQueue_,t,s),s=[],m&&(e[u].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[u].unwatcher),e[u].onComplete&&(y==="nodata"?r.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):r.push(()=>e[u].onComplete(new Error(y),!1,null))))}Fp(n,n.transactionQueueTree_);for(let u=0;u<r.length;u++)td(r[u]);k_(n,n.transactionQueueTree_)}function PP(n,e){let t,r=n.transactionQueueTree_;for(t=et(e);t!==null&&Yl(r)===void 0;)r=P_(r,t),e=_t(e),t=et(e);return r}function NP(n,e){const t=[];return kP(n,e,t),t.sort((r,s)=>r.order-s.order),t}function kP(n,e,t){const r=Yl(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);jp(e,s=>{kP(n,s,t)})}function Fp(n,e){const t=Yl(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,SP(e,t.length>0?t:void 0)}jp(e,r=>{Fp(n,r)})}function G9(n,e){const t=rd(PP(n,e)),r=P_(n.transactionQueueTree_,e);return T9(r,s=>{dy(n,s)}),dy(n,r),TP(r,s=>{dy(n,s)}),t}function dy(n,e){const t=Yl(e);if(t){const r=[];let s=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ve(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(ve(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(yl(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?SP(e,void 0):t.length=o+1,pa(n.eventQueue_,rd(e),s);for(let l=0;l<r.length;l++)td(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function K9(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xn(`Invalid query segment '${t}' in query '${n}'`)}return e}const Gx=function(n,e){const t=Q9(n),r=t.namespace;t.domain==="firebase.com"&&Ys(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Ys("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||I6();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new LA(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new Et(t.pathString)}},Q9=function(n){let e="",t="",r="",s="",o="",l=!0,u="https",d=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(u=n.substring(0,p-1),n=n.substring(p+2));let m=n.indexOf("/");m===-1&&(m=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),e=n.substring(0,Math.min(m,y)),m<y&&(s=q9(n.substring(m,y)));const E=K9(n.substring(Math.min(n.length,y)));p=e.indexOf(":"),p>=0?(l=u==="https"||u==="wss",d=parseInt(e.substring(p+1),10)):p=e.length;const I=e.slice(0,p);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const A=e.indexOf(".");r=e.substring(0,A).toLowerCase(),t=e.substring(A+1),o=r}"ns"in E&&(o=E.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:l,scheme:u,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Je(this._path)?null:HA(this._path)}get ref(){return new Xl(this._repo,this._path)}get _queryIdentifier(){const e=Nx(this._queryParams),t=p_(e);return t==="{}"?"default":t}get _queryObject(){return Nx(this._queryParams)}isEqual(e){if(e=Gt(e),!(e instanceof M_))return!1;const t=this._repo===e._repo,r=KA(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+a5(this._path)}}class Xl extends M_{constructor(e,t){super(e,t,new w_,!1)}get parent(){const e=qA(this._path);return e===null?null:new Xl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}h9(Xl);f9(Xl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9="FIREBASE_DATABASE_EMULATOR_HOST",Zy={};let X9=!1;function J9(n,e,t,r){const s=e.lastIndexOf(":"),o=e.substring(0,s),l=co(o);n.repoInfo_=new LA(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function Z9(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Ys("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=Gx(o,s),u=l.repoInfo,d;typeof process<"u"&&hx&&(d=hx[Y9]),d?(o=`http://${d}?ns=${u.namespace}`,l=Gx(o,s),u=l.repoInfo):l.repoInfo.secure;const p=new O6(n.name,n.options,e);P9("Invalid Firebase Database URL",l),Je(l.path)||Ys("Database URL must point to the root of a Firebase Database (not including a child path).");const m=tB(u,n,p,new M6(n,t));return new nB(m,n)}function eB(n,e){const t=Zy[e];(!t||t[n.key]!==n)&&Ys(`Database ${e}(${n.repoInfo_}) has already been deleted.`),$9(n),delete t[n.key]}function tB(n,e,t,r){let s=Zy[e.name];s||(s={},Zy[e.name]=s);let o=s[n.toURLString()];return o&&Ys("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new V9(n,X9,t,r),s[n.toURLString()]=o,o}class nB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(j9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xl(this._repo,ut())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ys("Cannot call "+e+" on a deleted database.")}}function rB(n=r_(),e){const t=Np(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Ab("database");r&&sB(t,...r)}return t}function sB(n,e,t,r={}){n=Gt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&Xi(r,o.repoInfo_.emulatorOptions))return;Ys("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Ys('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Xh(Xh.OWNER);else if(r.mockUserToken){const u=typeof r.mockUserToken=="string"?r.mockUserToken:kb(r.mockUserToken,n.app.options.projectId);l=new Xh(u)}co(e)&&(Zv(e),e_("Database",!0)),J9(o,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(n){_6(ha),na(new Ji("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Z9(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),is(fx,px,n),is(fx,px,"esm2020")}Ws.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ws.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};iB();var qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,DP;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function k(){}k.prototype=R.prototype,P.F=R.prototype,P.prototype=new k,P.prototype.constructor=P,P.D=function(M,O,F){for(var D=Array(arguments.length-2),me=2;me<arguments.length;me++)D[me-2]=arguments[me];return R.prototype[O].apply(M,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,k){k||(k=0);const M=Array(16);if(typeof R=="string")for(var O=0;O<16;++O)M[O]=R.charCodeAt(k++)|R.charCodeAt(k++)<<8|R.charCodeAt(k++)<<16|R.charCodeAt(k++)<<24;else for(O=0;O<16;++O)M[O]=R[k++]|R[k++]<<8|R[k++]<<16|R[k++]<<24;R=P.g[0],k=P.g[1],O=P.g[2];let F=P.g[3],D;D=R+(F^k&(O^F))+M[0]+3614090360&4294967295,R=k+(D<<7&4294967295|D>>>25),D=F+(O^R&(k^O))+M[1]+3905402710&4294967295,F=R+(D<<12&4294967295|D>>>20),D=O+(k^F&(R^k))+M[2]+606105819&4294967295,O=F+(D<<17&4294967295|D>>>15),D=k+(R^O&(F^R))+M[3]+3250441966&4294967295,k=O+(D<<22&4294967295|D>>>10),D=R+(F^k&(O^F))+M[4]+4118548399&4294967295,R=k+(D<<7&4294967295|D>>>25),D=F+(O^R&(k^O))+M[5]+1200080426&4294967295,F=R+(D<<12&4294967295|D>>>20),D=O+(k^F&(R^k))+M[6]+2821735955&4294967295,O=F+(D<<17&4294967295|D>>>15),D=k+(R^O&(F^R))+M[7]+4249261313&4294967295,k=O+(D<<22&4294967295|D>>>10),D=R+(F^k&(O^F))+M[8]+1770035416&4294967295,R=k+(D<<7&4294967295|D>>>25),D=F+(O^R&(k^O))+M[9]+2336552879&4294967295,F=R+(D<<12&4294967295|D>>>20),D=O+(k^F&(R^k))+M[10]+4294925233&4294967295,O=F+(D<<17&4294967295|D>>>15),D=k+(R^O&(F^R))+M[11]+2304563134&4294967295,k=O+(D<<22&4294967295|D>>>10),D=R+(F^k&(O^F))+M[12]+1804603682&4294967295,R=k+(D<<7&4294967295|D>>>25),D=F+(O^R&(k^O))+M[13]+4254626195&4294967295,F=R+(D<<12&4294967295|D>>>20),D=O+(k^F&(R^k))+M[14]+2792965006&4294967295,O=F+(D<<17&4294967295|D>>>15),D=k+(R^O&(F^R))+M[15]+1236535329&4294967295,k=O+(D<<22&4294967295|D>>>10),D=R+(O^F&(k^O))+M[1]+4129170786&4294967295,R=k+(D<<5&4294967295|D>>>27),D=F+(k^O&(R^k))+M[6]+3225465664&4294967295,F=R+(D<<9&4294967295|D>>>23),D=O+(R^k&(F^R))+M[11]+643717713&4294967295,O=F+(D<<14&4294967295|D>>>18),D=k+(F^R&(O^F))+M[0]+3921069994&4294967295,k=O+(D<<20&4294967295|D>>>12),D=R+(O^F&(k^O))+M[5]+3593408605&4294967295,R=k+(D<<5&4294967295|D>>>27),D=F+(k^O&(R^k))+M[10]+38016083&4294967295,F=R+(D<<9&4294967295|D>>>23),D=O+(R^k&(F^R))+M[15]+3634488961&4294967295,O=F+(D<<14&4294967295|D>>>18),D=k+(F^R&(O^F))+M[4]+3889429448&4294967295,k=O+(D<<20&4294967295|D>>>12),D=R+(O^F&(k^O))+M[9]+568446438&4294967295,R=k+(D<<5&4294967295|D>>>27),D=F+(k^O&(R^k))+M[14]+3275163606&4294967295,F=R+(D<<9&4294967295|D>>>23),D=O+(R^k&(F^R))+M[3]+4107603335&4294967295,O=F+(D<<14&4294967295|D>>>18),D=k+(F^R&(O^F))+M[8]+1163531501&4294967295,k=O+(D<<20&4294967295|D>>>12),D=R+(O^F&(k^O))+M[13]+2850285829&4294967295,R=k+(D<<5&4294967295|D>>>27),D=F+(k^O&(R^k))+M[2]+4243563512&4294967295,F=R+(D<<9&4294967295|D>>>23),D=O+(R^k&(F^R))+M[7]+1735328473&4294967295,O=F+(D<<14&4294967295|D>>>18),D=k+(F^R&(O^F))+M[12]+2368359562&4294967295,k=O+(D<<20&4294967295|D>>>12),D=R+(k^O^F)+M[5]+4294588738&4294967295,R=k+(D<<4&4294967295|D>>>28),D=F+(R^k^O)+M[8]+2272392833&4294967295,F=R+(D<<11&4294967295|D>>>21),D=O+(F^R^k)+M[11]+1839030562&4294967295,O=F+(D<<16&4294967295|D>>>16),D=k+(O^F^R)+M[14]+4259657740&4294967295,k=O+(D<<23&4294967295|D>>>9),D=R+(k^O^F)+M[1]+2763975236&4294967295,R=k+(D<<4&4294967295|D>>>28),D=F+(R^k^O)+M[4]+1272893353&4294967295,F=R+(D<<11&4294967295|D>>>21),D=O+(F^R^k)+M[7]+4139469664&4294967295,O=F+(D<<16&4294967295|D>>>16),D=k+(O^F^R)+M[10]+3200236656&4294967295,k=O+(D<<23&4294967295|D>>>9),D=R+(k^O^F)+M[13]+681279174&4294967295,R=k+(D<<4&4294967295|D>>>28),D=F+(R^k^O)+M[0]+3936430074&4294967295,F=R+(D<<11&4294967295|D>>>21),D=O+(F^R^k)+M[3]+3572445317&4294967295,O=F+(D<<16&4294967295|D>>>16),D=k+(O^F^R)+M[6]+76029189&4294967295,k=O+(D<<23&4294967295|D>>>9),D=R+(k^O^F)+M[9]+3654602809&4294967295,R=k+(D<<4&4294967295|D>>>28),D=F+(R^k^O)+M[12]+3873151461&4294967295,F=R+(D<<11&4294967295|D>>>21),D=O+(F^R^k)+M[15]+530742520&4294967295,O=F+(D<<16&4294967295|D>>>16),D=k+(O^F^R)+M[2]+3299628645&4294967295,k=O+(D<<23&4294967295|D>>>9),D=R+(O^(k|~F))+M[0]+4096336452&4294967295,R=k+(D<<6&4294967295|D>>>26),D=F+(k^(R|~O))+M[7]+1126891415&4294967295,F=R+(D<<10&4294967295|D>>>22),D=O+(R^(F|~k))+M[14]+2878612391&4294967295,O=F+(D<<15&4294967295|D>>>17),D=k+(F^(O|~R))+M[5]+4237533241&4294967295,k=O+(D<<21&4294967295|D>>>11),D=R+(O^(k|~F))+M[12]+1700485571&4294967295,R=k+(D<<6&4294967295|D>>>26),D=F+(k^(R|~O))+M[3]+2399980690&4294967295,F=R+(D<<10&4294967295|D>>>22),D=O+(R^(F|~k))+M[10]+4293915773&4294967295,O=F+(D<<15&4294967295|D>>>17),D=k+(F^(O|~R))+M[1]+2240044497&4294967295,k=O+(D<<21&4294967295|D>>>11),D=R+(O^(k|~F))+M[8]+1873313359&4294967295,R=k+(D<<6&4294967295|D>>>26),D=F+(k^(R|~O))+M[15]+4264355552&4294967295,F=R+(D<<10&4294967295|D>>>22),D=O+(R^(F|~k))+M[6]+2734768916&4294967295,O=F+(D<<15&4294967295|D>>>17),D=k+(F^(O|~R))+M[13]+1309151649&4294967295,k=O+(D<<21&4294967295|D>>>11),D=R+(O^(k|~F))+M[4]+4149444226&4294967295,R=k+(D<<6&4294967295|D>>>26),D=F+(k^(R|~O))+M[11]+3174756917&4294967295,F=R+(D<<10&4294967295|D>>>22),D=O+(R^(F|~k))+M[2]+718787259&4294967295,O=F+(D<<15&4294967295|D>>>17),D=k+(F^(O|~R))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+O&4294967295,P.g[3]=P.g[3]+F&4294967295}r.prototype.v=function(P,R){R===void 0&&(R=P.length);const k=R-this.blockSize,M=this.C;let O=this.h,F=0;for(;F<R;){if(O==0)for(;F<=k;)s(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<R;)if(M[O++]=P.charCodeAt(F++),O==this.blockSize){s(this,M),O=0;break}}else for(;F<R;)if(M[O++]=P[F++],O==this.blockSize){s(this,M),O=0;break}}this.h=O,this.o+=R},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;R=this.o*8;for(var k=P.length-8;k<P.length;++k)P[k]=R&255,R/=256;for(this.v(P),P=Array(16),R=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)P[R++]=this.g[k]>>>M&255;return P};function o(P,R){var k=u;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=R(P)}function l(P,R){this.h=R;const k=[];let M=!0;for(let O=P.length-1;O>=0;O--){const F=P[O]|0;M&&F==R||(k[O]=F,M=!1)}this.g=k}var u={};function d(P){return-128<=P&&P<128?o(P,function(R){return new l([R|0],R<0?-1:0)}):new l([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return y;if(P<0)return b(p(-P));const R=[];let k=1;for(let M=0;P>=k;M++)R[M]=P/k|0,k*=4294967296;return new l(R,0)}function m(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return b(m(P.substring(1),R));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=p(Math.pow(R,8));let M=y;for(let F=0;F<P.length;F+=8){var O=Math.min(8,P.length-F);const D=parseInt(P.substring(F,F+O),R);O<8?(O=p(Math.pow(R,O)),M=M.j(O).add(p(D))):(M=M.j(k),M=M.add(p(D)))}return M}var y=d(0),E=d(1),I=d(16777216);n=l.prototype,n.m=function(){if(T(this))return-b(this).m();let P=0,R=1;for(let k=0;k<this.g.length;k++){const M=this.i(k);P+=(M>=0?M:4294967296+M)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(A(this))return"0";if(T(this))return"-"+b(this).toString(P);const R=p(Math.pow(P,6));var k=this;let M="";for(;;){const O=K(k,R).g;k=j(k,O.j(R));let F=((k.g.length>0?k.g[0]:k.h)>>>0).toString(P);if(k=O,A(k))return F+M;for(;F.length<6;)F="0"+F;M=F+M}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function A(P){if(P.h!=0)return!1;for(let R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function T(P){return P.h==-1}n.l=function(P){return P=j(this,P),T(P)?-1:A(P)?0:1};function b(P){const R=P.g.length,k=[];for(let M=0;M<R;M++)k[M]=~P.g[M];return new l(k,~P.h).add(E)}n.abs=function(){return T(this)?b(this):this},n.add=function(P){const R=Math.max(this.g.length,P.g.length),k=[];let M=0;for(let O=0;O<=R;O++){let F=M+(this.i(O)&65535)+(P.i(O)&65535),D=(F>>>16)+(this.i(O)>>>16)+(P.i(O)>>>16);M=D>>>16,F&=65535,D&=65535,k[O]=D<<16|F}return new l(k,k[k.length-1]&-2147483648?-1:0)};function j(P,R){return P.add(b(R))}n.j=function(P){if(A(this)||A(P))return y;if(T(this))return T(P)?b(this).j(b(P)):b(b(this).j(P));if(T(P))return b(this.j(b(P)));if(this.l(I)<0&&P.l(I)<0)return p(this.m()*P.m());const R=this.g.length+P.g.length,k=[];for(var M=0;M<2*R;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<P.g.length;O++){const F=this.i(M)>>>16,D=this.i(M)&65535,me=P.i(O)>>>16,_e=P.i(O)&65535;k[2*M+2*O]+=D*_e,V(k,2*M+2*O),k[2*M+2*O+1]+=F*_e,V(k,2*M+2*O+1),k[2*M+2*O+1]+=D*me,V(k,2*M+2*O+1),k[2*M+2*O+2]+=F*me,V(k,2*M+2*O+2)}for(P=0;P<R;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=R;P<2*R;P++)k[P]=0;return new l(k,0)};function V(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function B(P,R){this.g=P,this.h=R}function K(P,R){if(A(R))throw Error("division by zero");if(A(P))return new B(y,y);if(T(P))return R=K(b(P),R),new B(b(R.g),b(R.h));if(T(R))return R=K(P,b(R)),new B(b(R.g),R.h);if(P.g.length>30){if(T(P)||T(R))throw Error("slowDivide_ only works with positive integers.");for(var k=E,M=R;M.l(P)<=0;)k=J(k),M=J(M);var O=Z(k,1),F=Z(M,1);for(M=Z(M,2),k=Z(k,2);!A(M);){var D=F.add(M);D.l(P)<=0&&(O=O.add(k),F=D),M=Z(M,1),k=Z(k,1)}return R=j(P,O.j(R)),new B(O,R)}for(O=y;P.l(R)>=0;){for(k=Math.max(1,Math.floor(P.m()/R.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),F=p(k),D=F.j(R);T(D)||D.l(P)>0;)k-=M,F=p(k),D=F.j(R);A(F)&&(F=E),O=O.add(F),P=j(P,D)}return new B(O,P)}n.B=function(P){return K(this,P).h},n.and=function(P){const R=Math.max(this.g.length,P.g.length),k=[];for(let M=0;M<R;M++)k[M]=this.i(M)&P.i(M);return new l(k,this.h&P.h)},n.or=function(P){const R=Math.max(this.g.length,P.g.length),k=[];for(let M=0;M<R;M++)k[M]=this.i(M)|P.i(M);return new l(k,this.h|P.h)},n.xor=function(P){const R=Math.max(this.g.length,P.g.length),k=[];for(let M=0;M<R;M++)k[M]=this.i(M)^P.i(M);return new l(k,this.h^P.h)};function J(P){const R=P.g.length+1,k=[];for(let M=0;M<R;M++)k[M]=P.i(M)<<1|P.i(M-1)>>>31;return new l(k,P.h)}function Z(P,R){const k=R>>5;R%=32;const M=P.g.length-k,O=[];for(let F=0;F<M;F++)O[F]=R>0?P.i(F+k)>>>R|P.i(F+k+1)<<32-R:P.i(F+k);return new l(O,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,DP=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=m,Hi=l}).apply(typeof qx<"u"?qx:typeof self<"u"?self:typeof window<"u"?window:{});var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MP,ou,OP,Zh,ev,LP,VP,jP;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof jh=="object"&&jh];for(var w=0;w<h.length;++w){var x=h[w];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function s(h,w){if(w)e:{var x=r;h=h.split(".");for(var N=0;N<h.length-1;N++){var q=h[N];if(!(q in x))break e;x=x[q]}h=h[h.length-1],N=x[h],w=w(N),w!=N&&w!=null&&e(x,h,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(w){var x=[],N;for(N in w)Object.prototype.hasOwnProperty.call(w,N)&&x.push([N,w[N]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function d(h,w,x){return h.call.apply(h.bind,arguments)}function p(h,w,x){return p=d,p.apply(null,arguments)}function m(h,w){var x=Array.prototype.slice.call(arguments,1);return function(){var N=x.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function y(h,w){function x(){}x.prototype=w.prototype,h.Z=w.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(N,q,X){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return w.prototype[q].apply(N,ge)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const w=h.length;if(w>0){const x=Array(w);for(let N=0;N<w;N++)x[N]=h[N];return x}return[]}function A(h,w){for(let N=1;N<arguments.length;N++){const q=arguments[N];var x=typeof q;if(x=x!="object"?x:q?Array.isArray(q)?"array":x:"null",x=="array"||x=="object"&&typeof q.length=="number"){x=h.length||0;const X=q.length||0;h.length=x+X;for(let ge=0;ge<X;ge++)h[x+ge]=q[ge]}else h.push(q)}}class T{constructor(w,x){this.i=w,this.j=x,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function b(h){l.setTimeout(()=>{throw h},0)}function j(){var h=P;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class V{constructor(){this.h=this.g=null}add(w,x){const N=B.get();N.set(w,x),this.h?this.h.next=N:this.g=N,this.h=N}}var B=new T(()=>new K,h=>h.reset());class K{constructor(){this.next=this.g=this.h=null}set(w,x){this.h=w,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let J,Z=!1,P=new V,R=()=>{const h=Promise.resolve(void 0);J=()=>{h.then(k)}};function k(){for(var h;h=j();){try{h.h.call(h.g)}catch(x){b(x)}var w=B;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}Z=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};l.addEventListener("test",x,w),l.removeEventListener("test",x,w)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function me(h,w){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}y(me,O),me.prototype.init=function(h,w){const x=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(x=="mouseover"?w=h.fromElement:x=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),pe=0;function we(h,w,x,N,q){this.listener=h,this.proxy=null,this.src=w,this.type=x,this.capture=!!N,this.ha=q,this.key=++pe,this.da=this.fa=!1}function W(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ee(h,w,x){for(const N in h)w.call(x,h[N],N,h)}function ue(h,w){for(const x in h)w.call(void 0,h[x],x,h)}function z(h){const w={};for(const x in h)w[x]=h[x];return w}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(h,w){let x,N;for(let q=1;q<arguments.length;q++){N=arguments[q];for(x in N)h[x]=N[x];for(let X=0;X<ne.length;X++)x=ne[X],Object.prototype.hasOwnProperty.call(N,x)&&(h[x]=N[x])}}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,w,x,N,q){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const ge=ce(h,w,N,q);return ge>-1?(w=h[ge],x||(w.fa=!1)):(w=new we(w,this.src,X,!!N,q),w.fa=x,h.push(w)),w};function he(h,w){const x=w.type;if(x in h.g){var N=h.g[x],q=Array.prototype.indexOf.call(N,w,void 0),X;(X=q>=0)&&Array.prototype.splice.call(N,q,1),X&&(W(w),h.g[x].length==0&&(delete h.g[x],h.h--))}}function ce(h,w,x,N){for(let q=0;q<h.length;++q){const X=h[q];if(!X.da&&X.listener==w&&X.capture==!!x&&X.ha==N)return q}return-1}var H="closure_lm_"+(Math.random()*1e6|0),oe={};function ye(h,w,x,N,q){if(Array.isArray(w)){for(let X=0;X<w.length;X++)ye(h,w[X],x,N,q);return null}return x=Ot(x),h&&h[_e]?h.J(w,x,u(N)?!!N.capture:!1,q):Te(h,w,x,!1,N,q)}function Te(h,w,x,N,q,X){if(!w)throw Error("Invalid event type");const ge=u(q)?!!q.capture:!!q;let ze=xn(h);if(ze||(h[H]=ze=new se(h)),x=ze.add(w,x,N,ge,X),x.proxy)return x;if(N=je(),x.proxy=N,N.src=h,N.listener=x,h.addEventListener)F||(q=ge),q===void 0&&(q=!1),h.addEventListener(w.toString(),N,q);else if(h.attachEvent)h.attachEvent(ht(w.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return x}function je(){function h(x){return w.call(h.src,h.listener,x)}const w=An;return h}function $e(h,w,x,N,q){if(Array.isArray(w))for(var X=0;X<w.length;X++)$e(h,w[X],x,N,q);else N=u(N)?!!N.capture:!!N,x=Ot(x),h&&h[_e]?(h=h.i,X=String(w).toString(),X in h.g&&(w=h.g[X],x=ce(w,x,N,q),x>-1&&(W(w[x]),Array.prototype.splice.call(w,x,1),w.length==0&&(delete h.g[X],h.h--)))):h&&(h=xn(h))&&(w=h.g[w.toString()],h=-1,w&&(h=ce(w,x,N,q)),(x=h>-1?w[h]:null)&&Ue(x))}function Ue(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[_e])he(w.i,h);else{var x=h.type,N=h.proxy;w.removeEventListener?w.removeEventListener(x,N,h.capture):w.detachEvent?w.detachEvent(ht(x),N):w.addListener&&w.removeListener&&w.removeListener(N),(x=xn(w))?(he(x,h),x.h==0&&(x.src=null,w[H]=null)):W(h)}}}function ht(h){return h in oe?oe[h]:oe[h]="on"+h}function An(h,w){if(h.da)h=!0;else{w=new me(w,this);const x=h.listener,N=h.ha||h.src;h.fa&&Ue(h),h=x.call(N,w)}return h}function xn(h){return h=h[H],h instanceof se?h:null}var Tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ot(h){return typeof h=="function"?h:(h[Tn]||(h[Tn]=function(w){return h.handleEvent(w)}),h[Tn])}function xt(){M.call(this),this.i=new se(this),this.M=this,this.G=null}y(xt,M),xt.prototype[_e]=!0,xt.prototype.removeEventListener=function(h,w,x,N){$e(this,h,w,x,N)};function Tt(h,w){var x,N=h.G;if(N)for(x=[];N;N=N.G)x.push(N);if(h=h.M,N=w.type||w,typeof w=="string")w=new O(w,h);else if(w instanceof O)w.target=w.target||h;else{var q=w;w=new O(N,h),te(w,q)}q=!0;let X,ge;if(x)for(ge=x.length-1;ge>=0;ge--)X=w.g=x[ge],q=en(X,N,!0,w)&&q;if(X=w.g=h,q=en(X,N,!0,w)&&q,q=en(X,N,!1,w)&&q,x)for(ge=0;ge<x.length;ge++)X=w.g=x[ge],q=en(X,N,!1,w)&&q}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const x=h.g[w];for(let N=0;N<x.length;N++)W(x[N]);delete h.g[w],h.h--}}this.G=null},xt.prototype.J=function(h,w,x,N){return this.i.add(String(h),w,!1,x,N)},xt.prototype.K=function(h,w,x,N){return this.i.add(String(h),w,!0,x,N)};function en(h,w,x,N){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let q=!0;for(let X=0;X<w.length;++X){const ge=w[X];if(ge&&!ge.da&&ge.capture==x){const ze=ge.listener,Nt=ge.ha||ge.src;ge.fa&&he(h.i,ge),q=ze.call(Nt,N)!==!1&&q}}return q&&!N.defaultPrevented}function ri(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(h,w||0)}function po(h){h.g=ri(()=>{h.g=null,h.i&&(h.i=!1,po(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class cd extends M{constructor(w,x){super(),this.m=w,this.l=x,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:po(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function si(h){M.call(this),this.h=h,this.g={}}y(si,M);var rc=[];function _a(h){ee(h.g,function(w,x){this.g.hasOwnProperty(x)&&Ue(w)},h),h.g={}}si.prototype.N=function(){si.Z.N.call(this),_a(this)},si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=l.JSON.stringify,ud=l.JSON.parse,mo=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function oi(){}function dd(){}var ai={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wa(){O.call(this,"d")}y(wa,O);function sc(){O.call(this,"c")}y(sc,O);var pr={},Ea=null;function li(){return Ea=Ea||new xt}pr.Ia="serverreachability";function Sa(h){O.call(this,pr.Ia,h)}y(Sa,O);function gs(h){const w=li();Tt(w,new Sa(w))}pr.STAT_EVENT="statevent";function ys(h,w){O.call(this,pr.STAT_EVENT,h),this.stat=w}y(ys,O);function bt(h){const w=li();Tt(w,new ys(w,h))}pr.Ja="timingevent";function ic(h,w){O.call(this,pr.Ja,h),this.size=w}y(ic,O);function ci(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},w)}function ui(){this.g=!0}ui.prototype.ua=function(){this.g=!1};function hd(h,w,x,N,q,X){h.info(function(){if(h.g)if(X){var ge="",ze=X.split("&");for(let ct=0;ct<ze.length;ct++){var Nt=ze[ct].split("=");if(Nt.length>1){const Lt=Nt[0];Nt=Nt[1];const $n=Lt.split("_");ge=$n.length>=2&&$n[1]=="type"?ge+(Lt+"="+Nt+"&"):ge+(Lt+"=redacted&")}}}else ge=null;else ge=X;return"XMLHTTP REQ ("+N+") [attempt "+q+"]: "+w+`
`+x+`
`+ge})}function fd(h,w,x,N,q,X,ge){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+q+"]: "+w+`
`+x+`
`+X+" "+ge})}function Or(h,w,x,N){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+go(h,x)+(N?" "+N:"")})}function pd(h,w){h.info(function(){return"TIMEOUT: "+w})}ui.prototype.info=function(){};function go(h,w){if(!h.g)return w;if(!w)return null;try{const X=JSON.parse(w);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var x=X[h];if(!(x.length<2)){var N=x[1];if(Array.isArray(N)&&!(N.length<1)){var q=N[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ge=1;ge<N.length;ge++)N[ge]=""}}}}return ii(X)}catch{return w}}var di={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},md;function vs(){}y(vs,oi),vs.prototype.g=function(){return new XMLHttpRequest},md=new vs;function Lr(h){return encodeURIComponent(String(h))}function xa(h){var w=1;h=h.split(":");const x=[];for(;w>0&&h.length;)x.push(h.shift()),w--;return h.length&&x.push(h.join(":")),x}function Jn(h,w,x,N){this.j=h,this.i=w,this.l=x,this.S=N||1,this.V=new si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gd}function gd(){this.i=null,this.g="",this.h=!1}var yd={},oc={};function mr(h,w,x){h.M=1,h.A=ws(Zn(w)),h.u=x,h.R=!0,ac(h,null)}function ac(h,w){h.F=Date.now(),yo(h),h.B=Zn(h.A);var x=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),yc(x.i,"t",N),h.C=0,x=h.j.L,h.h=new gd,h.g=Rd(h.j,x?w:null,!h.u),h.P>0&&(h.O=new cd(p(h.Y,h,h.g),h.P)),w=h.V,x=h.g,N=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(rc[0]=q.toString()),q=rc);for(let X=0;X<q.length;X++){const ge=ye(x,q[X],N||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),gs(),hd(h.i,h.v,h.B,h.l,h.S,h.u)}Jn.prototype.ba=function(h){h=h.target;const w=this.O;w&&$r(h)==3?w.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)e:{const ze=$r(this.g),Nt=this.g.ya(),ct=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Id(this.g)))){this.K||ze!=4||Nt==7||(Nt==8||ct<=0?gs(3):gs(2)),Ta(this);var w=this.g.ca();this.X=w;var x=vd(this);if(this.o=w==200,fd(this.i,this.v,this.B,this.l,this.S,ze,w),this.o){if(this.U&&!this.L){t:{if(this.g){var N,q=this.g;if((N=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var X=N;break t}}X=null}if(h=X)Or(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mt(this,h);else{this.o=!1,this.m=3,bt(12),_s(this),vo(this);break e}}if(this.R){h=!0;let Lt;for(;!this.K&&this.C<x.length;)if(Lt=wd(this,x),Lt==oc){ze==4&&(this.m=4,bt(14),h=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==yd){this.m=4,bt(15),Or(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else Or(this.i,this.l,Lt,null),mt(this,Lt);if(_d(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||x.length!=0||this.h.h||(this.m=1,bt(16),h=!1),this.o=this.o&&h,!h)Or(this.i,this.l,x,"[Invalid Chunked Response]"),_s(this),vo(this);else if(x.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ro(ge),ge.P=!0,bt(11))}}else Or(this.i,this.l,x,null),mt(this,x);ze==4&&_s(this),this.o&&!this.K&&(ze==4?Ma(this.j,this):(this.o=!1,yo(this)))}else _c(this.g),w==400&&x.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),_s(this),vo(this)}}}catch{}finally{}};function vd(h){if(!_d(h))return h.g.la();const w=Id(h.g);if(w==="")return"";let x="";const N=w.length,q=$r(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return _s(h),vo(h),"";h.h.i=new l.TextDecoder}for(let X=0;X<N;X++)h.h.h=!0,x+=h.h.i.decode(w[X],{stream:!(q&&X==N-1)});return w.length=0,h.h.g+=x,h.C=0,h.h.g}function _d(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function wd(h,w){var x=h.C,N=w.indexOf(`
`,x);return N==-1?oc:(x=Number(w.substring(x,N)),isNaN(x)?yd:(N+=1,N+x>w.length?oc:(w=w.slice(N,N+x),h.C=N+x,w)))}Jn.prototype.cancel=function(){this.K=!0,_s(this)};function yo(h){h.T=Date.now()+h.H,lc(h,h.H)}function lc(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ci(p(h.aa,h),w)}function Ta(h){h.D&&(l.clearTimeout(h.D),h.D=null)}Jn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(pd(this.i,this.B),this.M!=2&&(gs(),bt(17)),_s(this),this.m=2,vo(this)):lc(this,this.T-h)};function vo(h){h.j.I==0||h.K||Ma(h.j,h)}function _s(h){Ta(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,_a(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function mt(h,w){try{var x=h.j;if(x.I!=0&&(x.g==h||uc(x.h,h))){if(!h.L&&uc(x.h,h)&&x.I==3){try{var N=x.Ba.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var q=N;if(q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)Da(x),zn(x);else break e;Gr(x),bt(18)}}else x.xa=q[1],0<x.xa-x.K&&q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=ci(p(x.Va,x),6e3));_o(x.h)<=1&&x.ta&&(x.ta=void 0)}else Bn(x,11)}else if((h.L||x.g==h)&&Da(x),!D(w))for(q=x.Ba.g.parse(w),w=0;w<q.length;w++){let ct=q[w];const Lt=ct[0];if(!(Lt<=x.K))if(x.K=Lt,ct=ct[1],x.I==2)if(ct[0]=="c"){x.M=ct[1],x.ba=ct[2];const $n=ct[3];$n!=null&&(x.ka=$n,x.j.info("VER="+x.ka));const Is=ct[4];Is!=null&&(x.za=Is,x.j.info("SVER="+x.za));const qr=ct[5];qr!=null&&typeof qr=="number"&&qr>0&&(N=1.5*qr,x.O=N,x.j.info("backChannelRequestTimeoutMs_="+N)),N=x;const Kr=h.g;if(Kr){const Va=Kr.g?Kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Va){var X=N.h;X.g||Va.indexOf("spdy")==-1&&Va.indexOf("quic")==-1&&Va.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ca(X,X.h),X.h=null))}if(N.G){const Sc=Kr.g?Kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Sc&&(N.wa=Sc,it(N.J,N.G,Sc))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),N=x;var ge=h;if(N.na=Ec(N,N.L?N.ba:null,N.W),ge.L){wo(N.h,ge);var ze=ge,Nt=N.O;Nt&&(ze.H=Nt),ze.D&&(Ta(ze),yo(ze)),N.g=ge}else un(N);x.i.length>0&&Ts(x)}else ct[0]!="stop"&&ct[0]!="close"||Bn(x,7);else x.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Bn(x,7):Na(x):ct[0]!="noop"&&x.l&&x.l.qa(ct),x.A=0)}}gs(4)}catch{}}var sm=class{constructor(h,w){this.g=h,this.map=w}};function Ia(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function _o(h){return h.h?1:h.g?h.g.size:0}function uc(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function Ca(h,w){h.g?h.g.add(w):h.h=w}function wo(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}Ia.prototype.cancel=function(){if(this.i=jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function jn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const x of h.g.values())w=w.concat(x.G);return w}return I(h.i)}var Ed=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fn(h,w){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const N=h[x].indexOf("=");let q,X=null;N>=0?(q=h[x].substring(0,N),X=h[x].substring(N+1)):q=h[x],w(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Vr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof Vr?(this.l=h.l,Eo(this,h.j),this.o=h.o,this.g=h.g,jr(this,h.u),this.h=h.h,fi(this,vc(h.i)),this.m=h.m):h&&(w=String(h).match(Ed))?(this.l=!1,Eo(this,w[1]||"",!0),this.o=So(w[2]||""),this.g=So(w[3]||"",!0),jr(this,w[4]),this.h=So(w[5]||"",!0),fi(this,w[6]||"",!0),this.m=So(w[7]||"")):(this.l=!1,this.i=new Xe(null,this.l))}Vr.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(xo(w,hc,!0),":");var x=this.g;return(x||w=="file")&&(h.push("//"),(w=this.o)&&h.push(xo(w,hc,!0),"@"),h.push(Lr(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(xo(x,x.charAt(0)=="/"?To:fc,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",xo(x,pc)),h.join("")},Vr.prototype.resolve=function(h){const w=Zn(this);let x=!!h.j;x?Eo(w,h.j):x=!!h.o,x?w.o=h.o:x=!!h.g,x?w.g=h.g:x=h.u!=null;var N=h.h;if(x)jr(w,h.u);else if(x=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var q=w.h.lastIndexOf("/");q!=-1&&(N=w.h.slice(0,q+1)+N)}if(q=N,q==".."||q==".")N="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){N=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let ge=0;ge<q.length;){const ze=q[ge++];ze=="."?N&&ge==q.length&&X.push(""):ze==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),N&&ge==q.length&&X.push("")):(X.push(ze),N=!0)}N=X.join("/")}else N=q}return x?w.h=N:x=h.i.toString()!=="",x?fi(w,vc(h.i)):x=!!h.m,x&&(w.m=h.m),w};function Zn(h){return new Vr(h)}function Eo(h,w,x){h.j=x?So(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function jr(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function fi(h,w,x){w instanceof Xe?(h.i=w,ba(h.i,h.l)):(x||(w=xo(w,im)),h.i=new Xe(w,h.l))}function it(h,w,x){h.i.set(w,x)}function ws(h){return it(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function So(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function xo(h,w,x){return typeof h=="string"?(h=encodeURI(h).replace(w,dc),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var hc=/[#\/\?@]/g,fc=/[#\?:]/g,To=/[#\?]/g,im=/[#\?@]/g,pc=/#/g;function Xe(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function Fr(h){h.g||(h.g=new Map,h.h=0,h.i&&Fn(h.i,function(w,x){h.add(decodeURIComponent(w.replace(/\+/g," ")),x)}))}n=Xe.prototype,n.add=function(h,w){Fr(this),this.i=null,h=Ur(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(w),this.h+=1,this};function mc(h,w){Fr(h),w=Ur(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function Ra(h,w){return Fr(h),w=Ur(h,w),h.g.has(w)}n.forEach=function(h,w){Fr(this),this.g.forEach(function(x,N){x.forEach(function(q){h.call(w,q,N,this)},this)},this)};function gc(h,w){Fr(h);let x=[];if(typeof w=="string")Ra(h,w)&&(x=x.concat(h.g.get(Ur(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)x=x.concat(h[w]);return x}n.set=function(h,w){return Fr(this),this.i=null,h=Ur(this,h),Ra(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=gc(this,h),h.length>0?String(h[0]):w):w};function yc(h,w,x){mc(h,w),x.length>0&&(h.i=null,h.g.set(Ur(h,w),I(x)),h.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let N=0;N<w.length;N++){var x=w[N];const q=Lr(x);x=gc(this,x);for(let X=0;X<x.length;X++){let ge=q;x[X]!==""&&(ge+="="+Lr(x[X])),h.push(ge)}}return this.i=h.join("&")};function vc(h){const w=new Xe;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function Ur(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function ba(h,w){w&&!h.j&&(Fr(h),h.i=null,h.g.forEach(function(x,N){const q=N.toLowerCase();N!=q&&(mc(this,N),yc(this,q,x))},h)),h.j=w}function zr(h,w){const x=new ui;if(l.Image){const N=new Image;N.onload=m(tn,x,"TestLoadImage: loaded",!0,w,N),N.onerror=m(tn,x,"TestLoadImage: error",!1,w,N),N.onabort=m(tn,x,"TestLoadImage: abort",!1,w,N),N.ontimeout=m(tn,x,"TestLoadImage: timeout",!1,w,N),l.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else w(!1)}function Br(h,w){const x=new ui,N=new AbortController,q=setTimeout(()=>{N.abort(),tn(x,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:N.signal}).then(X=>{clearTimeout(q),X.ok?tn(x,"TestPingServer: ok",!0,w):tn(x,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(q),tn(x,"TestPingServer: error",!1,w)})}function tn(h,w,x,N,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),N(x)}catch{}}function Io(){this.g=new mo}function Es(h){this.i=h.Sb||null,this.h=h.ab||!1}y(Es,oi),Es.prototype.g=function(){return new Un(this.i,this.h)};function Un(h,w){xt.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Un,xt),n=Un.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,gr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sd(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sd(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?pi(this):gr(this),this.readyState==3&&Sd(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,pi(this))},n.Na=function(h){this.g&&(this.response=h,pi(this))},n.ga=function(){this.g&&pi(this)};function pi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,gr(h)}n.setRequestHeader=function(h,w){this.A.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var x=w.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=w.next();return h.join(`\r
`)};function gr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function xd(h){let w="";return ee(h,function(x,N){w+=N,w+=":",w+=x,w+=`\r
`}),w}function Aa(h,w,x){e:{for(N in x){var N=!1;break e}N=!0}N||(x=xd(x),typeof h=="string"?x!=null&&Lr(x):it(h,w,x))}function dt(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(dt,xt);var Td=/^https?$/i,om=["POST","PUT"];n=dt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,w,x,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():md.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(X){mi(this,X);return}if(h=x||"",x=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var q in N)x.set(q,N[q]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const X of N.keys())x.set(X,N.get(X));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),q=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(om,w,void 0)>=0)||N||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ge]of x)this.g.setRequestHeader(X,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){mi(this,X)}};function mi(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,gi(h),xs(h)}function gi(h){h.A||(h.A=!0,Tt(h,"complete"),Tt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Tt(this,"complete"),Tt(this,"abort"),xs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ss(this):this.Xa())},n.Xa=function(){Ss(this)};function Ss(h){if(h.h&&typeof o<"u"){if(h.v&&$r(h)==4)setTimeout(h.Ca.bind(h),0);else if(Tt(h,"readystatechange"),$r(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var x;if(!(x=w)){var N;if(N=X===0){let ge=String(h.D).match(Ed)[1]||null;!ge&&l.self&&l.self.location&&(ge=l.self.location.protocol.slice(0,-1)),N=!Td.test(ge?ge.toLowerCase():"")}x=N}if(x)Tt(h,"complete"),Tt(h,"success");else{h.o=6;try{var q=$r(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",gi(h)}}finally{xs(h)}}}}function xs(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,w||Tt(h,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function $r(h){return h.g?h.g.readyState:0}n.ca=function(){try{return $r(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),ud(w)}};function Id(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function _c(h){const w={};h=(h.g&&$r(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(D(h[N]))continue;var x=xa(h[N]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=w[q]||[];w[q]=X,X.push(x)}ue(w,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(h,w,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||w}function Pa(h){this.za=0,this.i=[],this.j=new ui,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wr("baseRetryDelayMs",5e3,h),this.Za=Wr("retryDelaySeedMs",1e4,h),this.Ta=Wr("forwardChannelMaxRetries",2,h),this.va=Wr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ia(h&&h.concurrentRequestLimit),this.Ba=new Io,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Pa.prototype,n.ka=8,n.I=1,n.connect=function(h,w,x,N){bt(0),this.W=h,this.H=w||{},x&&N!==void 0&&(this.H.OSID=x,this.H.OAID=N),this.F=this.X,this.J=Ec(this,null,this.W),Ts(this)};function Na(h){if(ka(h),h.I==3){var w=h.V++,x=Zn(h.J);if(it(x,"SID",h.M),it(x,"RID",w),it(x,"TYPE","terminate"),Hr(h,x),w=new Jn(h,h.j,w),w.M=2,w.A=ws(Zn(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!x&&l.Image&&(new Image().src=w.A,x=!0),x||(w.g=Rd(w.j,null),w.g.ea(w.A)),w.F=Date.now(),yo(w)}bo(h)}function zn(h){h.g&&(Ro(h),h.g.cancel(),h.g=null)}function ka(h){zn(h),h.v&&(l.clearTimeout(h.v),h.v=null),Da(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function Ts(h){if(!cc(h.h)&&!h.m){h.m=!0;var w=h.Ea;J||R(),Z||(J(),Z=!0),P.add(w,h),h.D=0}}function Cd(h,w){return _o(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ci(p(h.Ea,h,w),Oa(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Jn(this,this.j,h);let X=this.o;if(this.U&&(X?(X=z(X),te(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var w=0,x=0;x<this.i.length;x++){t:{var N=this.i[x];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,w>4096){w=x;break e}if(w===4096||x===this.i.length-1){w=x+1;break e}}w=1e3}else w=1e3;w=wc(this,q,w),x=Zn(this.J),it(x,"RID",h),it(x,"CVER",22),this.G&&it(x,"X-HTTP-Session-Id",this.G),Hr(this,x),X&&(this.R?w="headers="+Lr(xd(X))+"&"+w:this.u&&Aa(x,this.u,X)),Ca(this.h,q),this.Ra&&it(x,"TYPE","init"),this.S?(it(x,"$req",w),it(x,"SID","null"),q.U=!0,mr(q,x,null)):mr(q,x,w),this.I=2}}else this.I==3&&(h?Co(this,h):this.i.length==0||cc(this.h)||Co(this))};function Co(h,w){var x;w?x=w.l:x=h.V++;const N=Zn(h.J);it(N,"SID",h.M),it(N,"RID",x),it(N,"AID",h.K),Hr(h,N),h.u&&h.o&&Aa(N,h.u,h.o),x=new Jn(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),w&&(h.i=w.G.concat(h.i)),w=wc(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ca(h.h,x),mr(x,N,w)}function Hr(h,w){h.H&&ee(h.H,function(x,N){it(w,N,x)}),h.l&&ee({},function(x,N){it(w,N,x)})}function wc(h,w,x){x=Math.min(h.i.length,x);const N=h.l?p(h.l.Ka,h.l,h):null;e:{var q=h.i;let ze=-1;for(;;){const Nt=["count="+x];ze==-1?x>0?(ze=q[0].g,Nt.push("ofs="+ze)):ze=0:Nt.push("ofs="+ze);let ct=!0;for(let Lt=0;Lt<x;Lt++){var X=q[Lt].g;const $n=q[Lt].map;if(X-=ze,X<0)ze=Math.max(0,q[Lt].g-100),ct=!1;else try{X="req"+X+"_"||"";try{var ge=$n instanceof Map?$n:Object.entries($n);for(const[Is,qr]of ge){let Kr=qr;u(qr)&&(Kr=ii(qr)),Nt.push(X+Is+"="+encodeURIComponent(Kr))}}catch(Is){throw Nt.push(X+"type="+encodeURIComponent("_badmap")),Is}}catch{N&&N($n)}}if(ct){ge=Nt.join("&");break e}}ge=void 0}return h=h.i.splice(0,x),w.G=h,ge}function un(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;J||R(),Z||(J(),Z=!0),P.add(w,h),h.A=0}}function Gr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ci(p(h.Da,h),Oa(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,yi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ci(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),zn(this),yi(this))};function Ro(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function yi(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=Zn(h.na);it(w,"RID","rpc"),it(w,"SID",h.M),it(w,"AID",h.K),it(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&it(w,"TO",h.ia),it(w,"TYPE","xmlhttp"),Hr(h,w),h.u&&h.o&&Aa(w,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=ws(Zn(w)),x.u=null,x.R=!0,ac(x,h)}n.Va=function(){this.C!=null&&(this.C=null,zn(this),Gr(this),bt(19))};function Da(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Ma(h,w){var x=null;if(h.g==w){Da(h),Ro(h),h.g=null;var N=2}else if(uc(h.h,w))x=w.G,wo(h.h,w),N=1;else return;if(h.I!=0){if(w.o)if(N==1){x=w.u?w.u.length:0,w=Date.now()-w.F;var q=h.D;N=li(),Tt(N,new ic(N,x)),Ts(h)}else un(h);else if(q=w.m,q==3||q==0&&w.X>0||!(N==1&&Cd(h,w)||N==2&&Gr(h)))switch(x&&x.length>0&&(w=h.h,w.i=w.i.concat(x)),q){case 1:Bn(h,5);break;case 4:Bn(h,10);break;case 3:Bn(h,6);break;default:Bn(h,2)}}}function Oa(h,w){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*w}function Bn(h,w){if(h.j.info("Error code "+w),w==2){var x=p(h.bb,h),N=h.Ua;const q=!N;N=new Vr(N||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Eo(N,"https"),ws(N),q?zr(N.toString(),x):Br(N.toString(),x)}else bt(2);h.I=0,h.l&&h.l.pa(w),bo(h),ka(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function bo(h){if(h.I=0,h.ja=[],h.l){const w=jn(h.h);(w.length!=0||h.i.length!=0)&&(A(h.ja,w),A(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Ec(h,w,x){var N=x instanceof Vr?Zn(x):new Vr(x);if(N.g!="")w&&(N.g=w+"."+N.g),jr(N,N.u);else{var q=l.location;N=q.protocol,w=w?w+"."+q.hostname:q.hostname,q=+q.port;const X=new Vr(null);N&&Eo(X,N),w&&(X.g=w),q&&jr(X,q),x&&(X.h=x),N=X}return x=h.G,w=h.wa,x&&w&&it(N,x,w),it(N,"VER",h.ka),Hr(h,N),N}function Rd(h,w,x){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new dt(new Es({ab:x})):new dt(h.ma),w.Fa(h.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function bd(){}n=bd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function La(){}La.prototype.g=function(h,w){return new nn(h,w)};function nn(h,w){xt.call(this),this.g=new Pa(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!D(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!D(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new vi(this)}y(nn,xt),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Na(this.g)},nn.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=ii(h),h=x);w.i.push(new sm(w.Ya++,h)),w.I==3&&Ts(w)},nn.prototype.N=function(){this.g.l=null,delete this.j,Na(this.g),delete this.g,nn.Z.N.call(this)};function Ad(h){wa.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const x in w){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}y(Ad,wa);function Pd(){sc.call(this),this.status=1}y(Pd,sc);function vi(h){this.g=h}y(vi,bd),vi.prototype.ra=function(){Tt(this.g,"a")},vi.prototype.qa=function(h){Tt(this.g,new Ad(h))},vi.prototype.pa=function(h){Tt(this.g,new Pd)},vi.prototype.oa=function(){Tt(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,jP=function(){return new La},VP=function(){return li()},LP=pr,ev={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},di.NO_ERROR=0,di.TIMEOUT=8,di.HTTP_ERROR=6,Zh=di,hi.COMPLETE="complete",OP=hi,dd.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",xt.prototype.listen=xt.prototype.J,ou=dd,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,MP=dt}).apply(typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{});const Kx="@firebase/firestore",Qx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new Pp("@firebase/firestore");function dl(){return la.logLevel}function xe(n,...e){if(la.logLevel<=Ke.DEBUG){const t=e.map(O_);la.debug(`Firestore (${Jl}): ${n}`,...t)}}function Xs(n,...e){if(la.logLevel<=Ke.ERROR){const t=e.map(O_);la.error(`Firestore (${Jl}): ${n}`,...t)}}function Ol(n,...e){if(la.logLevel<=Ke.WARN){const t=e.map(O_);la.warn(`Firestore (${Jl}): ${n}`,...t)}}function O_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,FP(n,r,t)}function FP(n,e,t){let r=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xs(r),new Error(r)}function lt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||FP(e,s,r)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends ei{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gn.UNAUTHENTICATED)))}shutdown(){}}class aB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lB{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string",31837,{l:r}),new UP(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class cB{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uB{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new cB(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dB{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0,3512);const r=o=>{o.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(lt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Yx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=hB(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function tv(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return hy(s)===hy(o)?Qe(s,o):hy(s)?1:-1}return Qe(n.length,e.length)}const fB=55296,pB=57343;function hy(n){const e=n.charCodeAt(0);return e>=fB&&e<=pB}function Ll(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="__name__";class Zr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Zr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Qe(e.length,t.length)}static compareSegments(e,t){const r=Zr.isNumericId(e),s=Zr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Zr.extractNumericId(e).compare(Zr.extractNumericId(t)):tv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class pt extends Zr{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const mB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Zr{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return mB.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xx}static keyField(){return new ln([Xx])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ee(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Ee(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ee(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new Ee(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(pt.fromString(e))}static fromName(e){return new ke(pt.fromString(e).popFirst(5))}static empty(){return new ke(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(n,e,t){if(!t)throw new Ee(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gB(n,e,t,r){if(e===!0&&r===!0)throw new Ee(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Jx(n){if(!ke.isDocumentKey(n))throw new Ee(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Zx(n){if(ke.isDocumentKey(n))throw new Ee(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Up(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function qi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Up(n);throw new Ee(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function sd(n,e){if(!BP(n))throw new Ee(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Ee(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=-62135596800,tT=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*tT);return new wt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eT)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tT}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sd(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Ut("string",wt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new wt(0,0))}static max(){return new Fe(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;function yB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new eo(s,ke.empty(),e)}function vB(n){return new eo(n.readTime,n.key,Du)}class eo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new eo(Fe.min(),ke.empty(),Du)}static max(){return new eo(Fe.max(),ke.empty(),Du)}}function _B(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==wB)throw n;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>r(d)))})),l=!0,o===s&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((s=>s?ie.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next((m=>{l[p]=m,++u,u===o&&r(l)}),(m=>s(m)))}}))}static doWhile(e,t){return new ie(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function SB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ec(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=-1;function Bp(n){return n==null}function Wf(n){return n===0&&1/n==-1/0}function xB(n){return typeof n=="number"&&Number.isInteger(n)&&!Wf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="";function TB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nT(e)),e=IB(n.get(t),e);return nT(e)}function IB(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case $P:t+="";break;default:t+=o}}return t}function nT(n){return n+$P+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fh(this.root,e,this.comparator,!0)}}class Fh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??on.RED,this.left=s??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new on(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return on.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sT(this.data.getIterator())}getIteratorFrom(e){return new sT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class sT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Rr([])}unionWith(e){let t=new Ht(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ll(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new HP("Invalid base64 string: "+o):o}})(e);return new cn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const CB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(n){if(lt(!!n,39018),typeof n=="string"){let e=0;const t=CB.exec(n);if(lt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function no(n){return typeof n=="string"?cn.fromBase64String(n):cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="server_timestamp",qP="__type__",KP="__previous_value__",QP="__local_write_time__";function j_(n){return(n?.mapValue?.fields||{})[qP]?.stringValue===GP}function $p(n){const e=n.mapValue.fields[KP];return j_(e)?$p(e):e}function Mu(n){const e=to(n.mapValue.fields[QP].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,t,r,s,o,l,u,d,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=m}}const Hf="(default)";class Ou{constructor(e,t){this.projectId=e,this.database=t||Hf}static empty(){return new Ou("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="__type__",bB="__max__",Uh={mapValue:{}},XP="__vector__",Gf="value";function ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?j_(n)?4:PB(n)?9007199254740991:AB(n)?10:11:Le(28295,{value:n})}function fs(n,e){if(n===e)return!0;const t=ro(n);if(t!==ro(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mu(n).isEqual(Mu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=to(s.timestampValue),u=to(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return no(s.bytesValue).isEqual(no(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Dt(s.geoPointValue.latitude)===Dt(o.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Dt(s.integerValue)===Dt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Dt(s.doubleValue),u=Dt(o.doubleValue);return l===u?Wf(l)===Wf(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return Ll(n.arrayValue.values||[],e.arrayValue.values||[],fs);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(rT(l)!==rT(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!fs(l[d],u[d])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function Lu(n,e){return(n.values||[]).find((t=>fs(t,e)))!==void 0}function Vl(n,e){if(n===e)return 0;const t=ro(n),r=ro(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Dt(o.integerValue||o.doubleValue),d=Dt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return iT(n.timestampValue,e.timestampValue);case 4:return iT(Mu(n),Mu(e));case 5:return tv(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=no(o),d=no(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let p=0;p<u.length&&p<d.length;p++){const m=Qe(u[p],d[p]);if(m!==0)return m}return Qe(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Qe(Dt(o.latitude),Dt(l.latitude));return u!==0?u:Qe(Dt(o.longitude),Dt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return oT(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},p=u[Gf]?.arrayValue,m=d[Gf]?.arrayValue,y=Qe(p?.values?.length||0,m?.values?.length||0);return y!==0?y:oT(p,m)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Uh.mapValue&&l===Uh.mapValue)return 0;if(o===Uh.mapValue)return 1;if(l===Uh.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),p=l.fields||{},m=Object.keys(p);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const E=tv(d[y],m[y]);if(E!==0)return E;const I=Vl(u[d[y]],p[m[y]]);if(I!==0)return I}return Qe(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function iT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=to(n),r=to(e),s=Qe(t.seconds,r.seconds);return s!==0?s:Qe(t.nanos,r.nanos)}function oT(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Vl(t[s],r[s]);if(o)return o}return Qe(t.length,r.length)}function jl(n){return nv(n)}function nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=to(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return no(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=nv(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${nv(t.fields[l])}`;return s+"}"})(n.mapValue):Le(61005,{value:n})}function ef(n){switch(ro(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$p(n);return e?16+ef(e):16;case 5:return 2*n.stringValue.length;case 6:return no(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+ef(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return ma(r.fields,((o,l)=>{s+=o.length+ef(l)})),s})(n.mapValue);default:throw Le(13486,{value:n})}}function aT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rv(n){return!!n&&"integerValue"in n}function F_(n){return!!n&&"arrayValue"in n}function lT(n){return!!n&&"nullValue"in n}function cT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tf(n){return!!n&&"mapValue"in n}function AB(n){return(n?.mapValue?.fields||{})[YP]?.stringValue===XP}function gu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ma(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=gu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gu(n.arrayValue.values[t]);return e}return{...n}}function PB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===bB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(t)}setAll(e){let t=ln.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=gu(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());tf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];tf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ma(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new or(gu(this.value))}}function JP(n){const e=[];return ma(n.fields,((t,r)=>{const s=new ln([t]);if(tf(r)){const o=JP(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new _n(e,0,Fe.min(),Fe.min(),Fe.min(),or.empty(),0)}static newFoundDocument(e,t,r,s){return new _n(e,1,t,Fe.min(),r,s,0)}static newNoDocument(e,t){return new _n(e,2,t,Fe.min(),Fe.min(),or.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,Fe.min(),Fe.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.position=e,this.inclusive=t}}function uT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=ke.comparator(ke.fromName(l.referenceValue),t.key):r=Vl(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function dT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function NB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{}class Ft extends ZP{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new DB(e,t,r):t==="array-contains"?new LB(e,r):t==="in"?new VB(e,r):t==="not-in"?new jB(e,r):t==="array-contains-any"?new FB(e,r):new Ft(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new MB(e,r):new OB(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vl(t,this.value)):t!==null&&ro(this.value)===ro(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dr extends ZP{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Dr(e,t)}matches(e){return e1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function e1(n){return n.op==="and"}function t1(n){return kB(n)&&e1(n)}function kB(n){for(const e of n.filters)if(e instanceof Dr)return!1;return!0}function sv(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+jl(n.value);if(t1(n))return n.filters.map((e=>sv(e))).join(",");{const e=n.filters.map((t=>sv(t))).join(",");return`${n.op}(${e})`}}function n1(n,e){return n instanceof Ft?(function(r,s){return s instanceof Ft&&r.op===s.op&&r.field.isEqual(s.field)&&fs(r.value,s.value)})(n,e):n instanceof Dr?(function(r,s){return s instanceof Dr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&n1(l,s.filters[u])),!0):!1})(n,e):void Le(19439)}function r1(n){return n instanceof Ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${jl(t.value)}`})(n):n instanceof Dr?(function(t){return t.op.toString()+" {"+t.getFilters().map(r1).join(" ,")+"}"})(n):"Filter"}class DB extends Ft{constructor(e,t,r){super(e,t,r),this.key=ke.fromName(r.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class MB extends Ft{constructor(e,t){super(e,"in",t),this.keys=s1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OB extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=s1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function s1(n,e){return(e.arrayValue?.values||[]).map((t=>ke.fromName(t.referenceValue)))}class LB extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return F_(t)&&Lu(t.arrayValue,this.value)}}class VB extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lu(this.value.arrayValue,t)}}class jB extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lu(this.value.arrayValue,t)}}class FB extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!F_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Lu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function hT(n,e=null,t=[],r=[],s=null,o=null,l=null){return new UB(n,e,t,r,s,o,l)}function U_(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>sv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Bp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>jl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>jl(r))).join(",")),e.Te=t}return e.Te}function z_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!n1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dT(n.startAt,e.startAt)&&dT(n.endAt,e.endAt)}function iv(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zB(n,e,t,r,s,o,l,u){return new tc(n,e,t,r,s,o,l,u)}function Wp(n){return new tc(n)}function fT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function i1(n){return n.collectionGroup!==null}function yu(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Ht(ln.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Vu(o,r))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new Vu(ln.keyField(),r))}return e.Ie}function as(n){const e=Be(n);return e.Ee||(e.Ee=BB(e,yu(n))),e.Ee}function BB(n,e){if(n.limitType==="F")return hT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Vu(s.field,o)}));const t=n.endAt?new qf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qf(n.startAt.position,n.startAt.inclusive):null;return hT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ov(n,e){const t=n.filters.concat([e]);return new tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kf(n,e,t){return new tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hp(n,e){return z_(as(n),as(e))&&n.limitType===e.limitType}function o1(n){return`${U_(as(n))}|lt:${n.limitType}`}function hl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>r1(s))).join(", ")}]`),Bp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>jl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>jl(s))).join(",")),`Target(${r})`})(as(n))}; limitType=${n.limitType})`}function Gp(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of yu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const p=uT(l,u,d);return l.inclusive?p<=0:p<0})(r.startAt,yu(r),s)||r.endAt&&!(function(l,u,d){const p=uT(l,u,d);return l.inclusive?p>=0:p>0})(r.endAt,yu(r),s))})(n,e)}function $B(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function a1(n){return(e,t)=>{let r=!1;for(const s of yu(n)){const o=WB(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function WB(n,e,t){const r=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),p=u.data.field(o);return d!==null&&p!==null?Vl(d,p):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return WP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=new Rt(ke.comparator);function Js(){return HB}const l1=new Rt(ke.comparator);function au(...n){let e=l1;for(const t of n)e=e.insert(t.key,t);return e}function c1(n){let e=l1;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ko(){return vu()}function u1(){return vu()}function vu(){return new ga((n=>n.toString()),((n,e)=>n.isEqual(e)))}const GB=new Rt(ke.comparator),qB=new Ht(ke.comparator);function Ye(...n){let e=qB;for(const t of n)e=e.add(t);return e}const KB=new Ht(Qe);function QB(){return KB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wf(e)?"-0":e}}function d1(n){return{integerValue:""+n}}function YB(n,e){return xB(e)?d1(e):B_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this._=void 0}}function XB(n,e,t){return n instanceof ju?(function(s,o){const l={fields:{[qP]:{stringValue:GP},[QP]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&j_(o)&&(o=$p(o)),o&&(l.fields[KP]=o),{mapValue:l}})(t,e):n instanceof Fu?f1(n,e):n instanceof Uu?p1(n,e):(function(s,o){const l=h1(s,o),u=pT(l)+pT(s.Ae);return rv(l)&&rv(s.Ae)?d1(u):B_(s.serializer,u)})(n,e)}function JB(n,e,t){return n instanceof Fu?f1(n,e):n instanceof Uu?p1(n,e):t}function h1(n,e){return n instanceof Qf?(function(r){return rv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class ju extends qp{}class Fu extends qp{constructor(e){super(),this.elements=e}}function f1(n,e){const t=m1(e);for(const r of n.elements)t.some((s=>fs(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Uu extends qp{constructor(e){super(),this.elements=e}}function p1(n,e){let t=m1(e);for(const r of n.elements)t=t.filter((s=>!fs(s,r)));return{arrayValue:{values:t}}}class Qf extends qp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function pT(n){return Dt(n.integerValue||n.doubleValue)}function m1(n){return F_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e,t){this.field=e,this.transform=t}}function e$(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Fu&&s instanceof Fu||r instanceof Uu&&s instanceof Uu?Ll(r.elements,s.elements,fs):r instanceof Qf&&s instanceof Qf?fs(r.Ae,s.Ae):r instanceof ju&&s instanceof ju})(n.transform,e.transform)}class t${constructor(e,t){this.version=e,this.transformResults=t}}class Hs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hs}static exists(e){return new Hs(void 0,e)}static updateTime(e){return new Hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kp{}function g1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new v1(n.key,Hs.none()):new id(n.key,n.data,Hs.none());{const t=n.data,r=or.empty();let s=new Ht(ln.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new ya(n.key,r,new Rr(s.toArray()),Hs.none())}}function n$(n,e,t){n instanceof id?(function(s,o,l){const u=s.value.clone(),d=gT(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof ya?(function(s,o,l){if(!nf(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=gT(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(y1(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function _u(n,e,t,r){return n instanceof id?(function(o,l,u,d){if(!nf(o.precondition,l))return u;const p=o.value.clone(),m=yT(o.fieldTransforms,d,l);return p.setAll(m),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof ya?(function(o,l,u,d){if(!nf(o.precondition,l))return u;const p=yT(o.fieldTransforms,d,l),m=l.data;return m.setAll(y1(o)),m.setAll(p),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,l,u){return nf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function r$(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=h1(r.transform,s||null);o!=null&&(t===null&&(t=or.empty()),t.set(r.field,o))}return t||null}function mT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ll(r,s,((o,l)=>e$(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class id extends Kp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ya extends Kp{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function y1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gT(n,e,t){const r=new Map;lt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,JB(l,u,t[s]))}return r}function yT(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,XB(o,l,e))}return r}class v1 extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s$ extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&n$(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_u(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_u(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=u1();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=g1(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Ll(this.mutations,e.mutations,((t,r)=>mT(t,r)))&&Ll(this.baseMutations,e.baseMutations,((t,r)=>mT(t,r)))}}class $_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){lt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return GB})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new $_(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Ze;function l$(n){switch(n){case re.OK:return Le(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function _1(n){if(n===void 0)return Xs("GRPC error has no .code"),re.UNKNOWN;switch(n){case jt.OK:return re.OK;case jt.CANCELLED:return re.CANCELLED;case jt.UNKNOWN:return re.UNKNOWN;case jt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case jt.INTERNAL:return re.INTERNAL;case jt.UNAVAILABLE:return re.UNAVAILABLE;case jt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case jt.NOT_FOUND:return re.NOT_FOUND;case jt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case jt.ABORTED:return re.ABORTED;case jt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case jt.DATA_LOSS:return re.DATA_LOSS;default:return Le(39323,{code:n})}}(Ze=jt||(jt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=new Hi([4294967295,4294967295],0);function vT(n){const e=c$().encode(n),t=new DP;return t.update(e),new Uint8Array(t.digest())}function _T(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Hi([t,r],0),new Hi([s,o],0)]}class W_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lu(`Invalid padding: ${t}`);if(r<0)throw new lu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new lu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Hi.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Hi.fromNumber(r)));return s.compare(u$)===1&&(s=new Hi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=vT(e),[r,s]=_T(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new W_(o,s,t);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=vT(e),[r,s]=_T(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,od.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qp(Fe.min(),s,new Rt(Qe),Js(),Ye())}}class od{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new od(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class w1{constructor(e,t){this.targetId=e,this.Ce=t}}class E1{constructor(e,t,r=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class wT{constructor(){this.ve=0,this.Fe=ET(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Le(38017,{changeType:o})}})),new od(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=ET()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class d${constructor(e){this.Ge=e,this.ze=new Map,this.je=Js(),this.Je=zh(),this.He=zh(),this.Ye=new Rt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(iv(o))if(r===0){const l=new ke(o.path);this.et(t,l,_n.newNoDocument(l,Fe.min()))}else lt(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=no(r).toUint8Array()}catch(d){if(d instanceof HP)return Ol("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new W_(l,s,o)}catch(d){return Ol(d instanceof lu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&iv(u.target)){const d=new ke(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,_n.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Ye();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Qp(e,t,this.Ye,this.je,r);return this.je=Js(),this.Je=zh(),this.He=zh(),this.Ye=new Rt(Qe),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new wT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ht(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ht(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zh(){return new Rt(ke.comparator)}function ET(){return new Rt(ke.comparator)}const h$={asc:"ASCENDING",desc:"DESCENDING"},f$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p$={and:"AND",or:"OR"};class m${constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function av(n,e){return n.useProto3Json||Bp(e)?e:{value:e}}function Yf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function g$(n,e){return Yf(n,e.toTimestamp())}function ls(n){return lt(!!n,49232),Fe.fromTimestamp((function(t){const r=to(t);return new wt(r.seconds,r.nanos)})(n))}function H_(n,e){return lv(n,e).canonicalString()}function lv(n,e){const t=(function(s){return new pt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function x1(n){const e=pt.fromString(n);return lt(b1(e),10190,{key:e.toString()}),e}function cv(n,e){return H_(n.databaseId,e.path)}function fy(n,e){const t=x1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(I1(t))}function T1(n,e){return H_(n.databaseId,e)}function y$(n){const e=x1(n);return e.length===4?pt.emptyPath():I1(e)}function uv(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function I1(n){return lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ST(n,e,t){return{name:cv(n,e),fields:t.value.mapValue.fields}}function v$(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Le(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,m){return p.useProto3Json?(lt(m===void 0||typeof m=="string",58123),cn.fromBase64String(m||"")):(lt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),cn.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(p){const m=p.code===void 0?re.UNKNOWN:_1(p.code);return new Ee(m,p.message||"")})(l);t=new E1(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fy(n,r.document.name),o=ls(r.document.updateTime),l=r.document.createTime?ls(r.document.createTime):Fe.min(),u=new or({mapValue:{fields:r.document.fields}}),d=_n.newFoundDocument(s,o,l,u),p=r.targetIds||[],m=r.removedTargetIds||[];t=new rf(p,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fy(n,r.document),o=r.readTime?ls(r.readTime):Fe.min(),l=_n.newNoDocument(s,o),u=r.removedTargetIds||[];t=new rf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fy(n,r.document),o=r.removedTargetIds||[];t=new rf([],o,s,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new a$(s,o),u=r.targetId;t=new w1(u,l)}}return t}function _$(n,e){let t;if(e instanceof id)t={update:ST(n,e.key,e.value)};else if(e instanceof v1)t={delete:cv(n,e.key)};else if(e instanceof ya)t={update:ST(n,e.key,e.data),updateMask:b$(e.fieldMask)};else{if(!(e instanceof s$))return Le(16599,{Vt:e.type});t={verify:cv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof ju)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Fu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Uu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Qf)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw Le(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:g$(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Le(27497)})(n,e.precondition)),t}function w$(n,e){return n&&n.length>0?(lt(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?ls(s.updateTime):ls(o);return l.isEqual(Fe.min())&&(l=ls(o)),new t$(l,s.transformResults||[])})(t,e)))):[]}function E$(n,e){return{documents:[T1(n,e.path)]}}function S$(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=T1(n,s);const o=(function(p){if(p.length!==0)return R1(Dr.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((m=>(function(E){return{field:fl(E.field),direction:I$(E.dir)}})(m)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=av(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function x$(n){let e=y$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){lt(r===1,65062);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){const E=C1(y);return E instanceof Dr&&t1(E)?E.getFilters():[E]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((E=>(function(A){return new Vu(pl(A.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(E)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let E;return E=typeof y=="object"?y.value:y,Bp(E)?null:E})(t.limit));let d=null;t.startAt&&(d=(function(y){const E=!!y.before,I=y.values||[];return new qf(I,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(y){const E=!y.before,I=y.values||[];return new qf(I,E)})(t.endAt)),zB(e,s,l,o,u,"F",d,p)}function T$(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function C1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=pl(t.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pl(t.unaryFilter.field);return Ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=pl(t.unaryFilter.field);return Ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=pl(t.unaryFilter.field);return Ft.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ft.create(pl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Dr.create(t.compositeFilter.filters.map((r=>C1(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function I$(n){return h$[n]}function C$(n){return f$[n]}function R$(n){return p$[n]}function fl(n){return{fieldPath:n.canonicalString()}}function pl(n){return ln.fromServerFormat(n.fieldPath)}function R1(n){return n instanceof Ft?(function(t){if(t.op==="=="){if(cT(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NAN"}};if(lT(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cT(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NOT_NAN"}};if(lT(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fl(t.field),op:C$(t.op),value:t.value}}})(n):n instanceof Dr?(function(t){const r=t.getFilters().map((s=>R1(s)));return r.length===1?r[0]:{compositeFilter:{op:R$(t.op),filters:r}}})(n):Le(54877,{filter:n})}function b$(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function b1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t,r,s,o=Fe.min(),l=Fe.min(),u=cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e){this.yt=e}}function P$(n){const e=x$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(){this.Cn=new k$}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(eo.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class k${constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ht(pt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ht(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A1=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(A1,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fl(0)}static cr(){return new Fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="LruGarbageCollector",D$=1048576;function IT([n,e],[t,r]){const s=Qe(n,t);return s===0?Qe(e,r):s}class M${constructor(e){this.Ir=e,this.buffer=new Ht(IT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();IT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class O${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(TT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ec(t)?xe(TT,"Ignoring IndexedDB error during garbage collection: ",t):await Zl(t)}await this.Vr(3e5)}))}}class L${constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(zp.ce);const r=new M$(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(xT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,l,u,d,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(p=Date.now(),dl()<=Ke.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(p-d)+`ms
Total Duration: ${p-m}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function V$(n,e){return new L$(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(){this.changes=new ga((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&_u(r.mutation,s,Rr.empty(),wt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const s=Ko();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=au();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Ko();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,r,s){let o=Js();const l=vu(),u=(function(){return vu()})();return t.forEach(((d,p)=>{const m=r.get(p.key);s.has(p.key)&&(m===void 0||m.mutation instanceof ya)?o=o.insert(p.key,p):m!==void 0?(l.set(p.key,m.mutation.getFieldMask()),_u(m.mutation,p,m.mutation.getFieldMask(),wt.now())):l.set(p.key,Rr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((p,m)=>l.set(p,m))),t.forEach(((p,m)=>u.set(p,new F$(m,l.get(p)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=vu();let s=new Rt(((l,u)=>l-u)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let m=r.get(d)||Rr.empty();m=u.applyToLocalView(p,m),r.set(d,m);const y=(s.get(u.batchId)||Ye()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,m=d.value,y=u1();m.forEach((E=>{if(!o.has(E)){const I=g1(t.get(E),r.get(E));I!==null&&y.set(E,I),o=o.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):i1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ie.resolve(Ko());let u=Du,d=o;return l.next((p=>ie.forEach(p,((m,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(m)?ie.resolve():this.remoteDocumentCache.getEntry(e,m).next((E=>{d=d.insert(m,E)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,d,p,Ye()))).next((m=>({batchId:u,changes:c1(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((r=>{let s=au();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=au();return this.indexManager.getCollectionParents(e,o).next((u=>ie.forEach(u,(d=>{const p=(function(y,E){return new tc(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((m=>{m.forEach(((y,E)=>{l=l.insert(y,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((d,p)=>{const m=p.getKey();l.get(m)===null&&(l=l.insert(m,_n.newInvalidDocument(m)))}));let u=au();return l.forEach(((d,p)=>{const m=o.get(d);m!==void 0&&_u(m.mutation,p,Rr.empty(),wt.now()),Gp(t,p)&&(u=u.insert(d,p))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ls(s.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:P$(s.bundledQuery),readTime:ls(s.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(){this.overlays=new Rt(ke.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ko();return ie.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=Ko(),o=t.length+1,l=new ke(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Rt(((p,m)=>p-m));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let m=o.get(p.largestBatchId);m===null&&(m=Ko(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const u=Ko(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,m)=>u.set(p,m))),!(u.size()>=s)););return ie.resolve(u)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new o$(t,r));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.Qr=new Ht(Xt.$r),this.Ur=new Ht(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Xt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ke(new pt([])),r=new Xt(t,e),s=new Xt(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ke(new pt([])),r=new Xt(t,e),s=new Xt(t,e+1);let o=Ye();return this.Ur.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Xt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ke.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Xt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new i$(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new Xt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?V_:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xt(t,0),s=new Xt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ht(Qe);return t.forEach((s=>{const o=new Xt(s,0),l=new Xt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{r=r.add(u.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;ke.isDocumentKey(o)||(o=o.child(""));const l=new Xt(new ke(o),0);let u=new Ht(Qe);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.Yr)),!0)}),l),ie.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){lt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(s=>{const o=new Xt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Xt(t,0),s=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.ri=e,this.docs=(function(){return new Rt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=Js();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():_n.newInvalidDocument(s))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Js();const l=t.path,u=new ke(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:m}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||_B(vB(m),r)<=0||(s.has(m.key)||Gp(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Le(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new G$(this)}getSize(e){return ie.resolve(this.size)}}class G$ extends j${constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e){this.persistence=e,this.si=new ga((t=>U_(t)),z_),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new G_,this.targetCount=0,this.ai=Fl.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Fl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),ie.waitFor(o).next((()=>s))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t){this.ui={},this.overlays={},this.ci=new zp(0),this.li=!1,this.li=!0,this.hi=new $$,this.referenceDelegate=e(this),this.Pi=new q$(this),this.indexManager=new N$,this.remoteDocumentCache=(function(s){return new H$(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new A$(t),this.Ii=new z$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new W$(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const s=new K$(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class K$ extends EB{constructor(e){super(),this.currentSequenceNumber=e}}class q_{constructor(e){this.persistence=e,this.Ri=new G_,this.Vi=null}static mi(e){return new q_(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const s=ke.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xf{constructor(e,t){this.persistence=e,this.pi=new ga((r=>TB(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=V$(this,t)}static mi(e,t){return new Xf(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?ie.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((u=>{u||(r++,o.removeEntry(l,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ef(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ie.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ye(),s=Ye();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new K_(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return D4()?8:SB(En())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new Q$;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(dl()<=Ke.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",hl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(dl()<=Ke.DEBUG&&xe("QueryEngine","Query:",hl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(dl()<=Ke.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",hl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,as(t))):ie.resolve())}ys(e,t){if(fT(t))return ie.resolve(null);let r=as(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Kf(t,null,"F"),r=as(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ye(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.Ds(t,u);return this.Cs(t,p,l,d.readTime)?this.ys(e,Kf(t,null,"F")):this.vs(e,p,t,d)}))))})))))}ws(e,t,r,s){return fT(t)||s.isEqual(Fe.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,s)?ie.resolve(null):(dl()<=Ke.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hl(t)),this.vs(e,l,t,yB(s,Du)).next((u=>u)))}))}Ds(e,t){let r=new Ht(a1(e));return t.forEach(((s,o)=>{Gp(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return dl()<=Ke.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",hl(t)),this.ps.getDocumentsMatchingQuery(e,t,eo.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="LocalStore",X$=3e8;class J${constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Rt(Qe),this.xs=new ga((o=>U_(o)),z_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Z$(n,e,t,r){return new J$(n,e,t,r)}async function N1(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Ye();for(const p of s){l.push(p.batchId);for(const m of p.mutations)d=d.add(m.key)}for(const p of o){u.push(p.batchId);for(const m of p.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:u})))}))}))}function eW(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,m){const y=p.batch,E=y.keys();let I=ie.resolve();return E.forEach((A=>{I=I.next((()=>m.getEntry(d,A))).next((T=>{const b=p.docVersions.get(A);lt(b!==null,48541),T.version.compareTo(b)<0&&(y.applyToRemoteDocument(T,p),T.isValidDocument()&&(T.setReadTime(p.commitVersion),m.addEntry(T)))}))})),I.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Ye();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function k1(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function tW(n,e){const t=Be(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((m,y)=>{const E=s.get(y);if(!E)return;u.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,m.addedDocuments,y))));let I=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?I=I.withResumeToken(cn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),s=s.insert(y,I),(function(T,b,j){return T.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=X$?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(E,I,m)&&u.push(t.Pi.updateTargetData(o,I))}));let d=Js(),p=Ye();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),u.push(nW(o,l,e.documentUpdates).next((m=>{d=m.ks,p=m.qs}))),!r.isEqual(Fe.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(m)}return ie.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,p))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function nW(n,e,t){let r=Ye(),s=Ye();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=Js();return t.forEach(((u,d)=>{const p=o.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Fe.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):xe(Q_,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function rW(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=V_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function sW(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,ie.resolve(s)):t.Pi.allocateTargetId(r).next((l=>(s=new zi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function dv(n,e,t){const r=Be(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!ec(l))throw l;xe(Q_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function CT(n,e,t){const r=Be(n);let s=Fe.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,p,m){const y=Be(d),E=y.xs.get(m);return E!==void 0?ie.resolve(y.Ms.get(E)):y.Pi.getTargetData(p,m)})(r,l,as(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?s:Fe.min(),t?o:Ye()))).next((u=>(iW(r,$B(e),u),{documents:u,Qs:o})))))}function iW(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class RT{constructor(){this.activeTargetIds=QB()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oW{constructor(){this.Mo=new RT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new RT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="ConnectivityMonitor";class AT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(bT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(bT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh=null;function hv(){return Bh===null?Bh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bh++,"0x"+Bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="RestConnection",lW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Hf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const l=hv(),u=this.zo(e,t.toUriEncodedString());xe(py,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(u),m=co(p);return this.Jo(e,u,d,r,m).then((y=>(xe(py,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw Ol(py,`RPC '${e}' ${l} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,t,r,s,o,l){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=lW[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class dW extends cW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const l=hv();return new Promise(((u,d)=>{const p=new MP;p.setWithCredentials(!0),p.listenOnce(OP.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Zh.NO_ERROR:const y=p.getResponseJson();xe(mn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),u(y);break;case Zh.TIMEOUT:xe(mn,`RPC '${e}' ${l} timed out`),d(new Ee(re.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const E=p.getStatus();if(xe(mn,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const A=I?.error;if(A&&A.status&&A.message){const T=(function(j){const V=j.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(V)>=0?V:re.UNKNOWN})(A.status);d(new Ee(T,A.message))}else d(new Ee(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Ee(re.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{xe(mn,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(s);xe(mn,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",m,r,15)}))}T_(e,t,r){const s=hv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=jP(),u=VP(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");xe(mn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const y=l.createWebChannel(m,d);this.I_(y);let E=!1,I=!1;const A=new uW({Yo:b=>{I?xe(mn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(E||(xe(mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),E=!0),xe(mn,`RPC '${e}' stream ${s} sending:`,b),y.send(b))},Zo:()=>y.close()}),T=(b,j,V)=>{b.listen(j,(B=>{try{V(B)}catch(K){setTimeout((()=>{throw K}),0)}}))};return T(y,ou.EventType.OPEN,(()=>{I||(xe(mn,`RPC '${e}' stream ${s} transport opened.`),A.o_())})),T(y,ou.EventType.CLOSE,(()=>{I||(I=!0,xe(mn,`RPC '${e}' stream ${s} transport closed`),A.a_(),this.E_(y))})),T(y,ou.EventType.ERROR,(b=>{I||(I=!0,Ol(mn,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),A.a_(new Ee(re.UNAVAILABLE,"The operation could not be completed")))})),T(y,ou.EventType.MESSAGE,(b=>{if(!I){const j=b.data[0];lt(!!j,16349);const V=j,B=V?.error||V[0]?.error;if(B){xe(mn,`RPC '${e}' stream ${s} received error:`,B);const K=B.status;let J=(function(R){const k=jt[R];if(k!==void 0)return _1(k)})(K),Z=B.message;J===void 0&&(J=re.INTERNAL,Z="Unknown error status: "+K+" with message "+B.message),I=!0,A.a_(new Ee(J,Z)),y.close()}else xe(mn,`RPC '${e}' stream ${s} received:`,j),A.u_(j)}})),T(u,LP.STAT_EVENT,(b=>{b.stat===ev.PROXY?xe(mn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===ev.NOPROXY&&xe(mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function my(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(n){return new m$(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="PersistentStream";class M1{constructor(e,t,r,s,o,l,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Xs(t.toString()),Xs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new Ee(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(PT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(xe(PT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hW extends M1{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=v$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Fe.min():l.readTime?ls(l.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=uv(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=iv(d)?{documents:E$(o,d)}:{query:S$(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=S1(o,l.resumeToken);const p=av(o,l.expectedCount);p!==null&&(u.expectedCount=p)}else if(l.snapshotVersion.compareTo(Fe.min())>0){u.readTime=Yf(o,l.snapshotVersion.toTimestamp());const p=av(o,l.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const r=T$(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=uv(this.serializer),t.removeTarget=e,this.q_(t)}}class fW extends M1{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=w$(e.writeResults,e.commitTime),r=ls(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=uv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>_$(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{}class mW extends pW{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,lv(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(re.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,lv(t,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(re.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xs(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="RemoteStore";class yW{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{va(this)&&(xe(ca,"Restarting streams for network reachability change."),await(async function(d){const p=Be(d);p.Ea.add(4),await ad(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Xp(p)})(this))}))})),this.Ra=new gW(r,s)}}async function Xp(n){if(va(n))for(const e of n.da)await e(!0)}async function ad(n){for(const e of n.da)await e(!1)}function O1(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Z_(t)?J_(t):nc(t).O_()&&X_(t,e))}function Y_(n,e){const t=Be(n),r=nc(t);t.Ia.delete(e),r.O_()&&L1(t,e),t.Ia.size===0&&(r.O_()?r.L_():va(t)&&t.Ra.set("Unknown"))}function X_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nc(n).Y_(e)}function L1(n,e){n.Va.Ue(e),nc(n).Z_(e)}function J_(n){n.Va=new d$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),nc(n).start(),n.Ra.ua()}function Z_(n){return va(n)&&!nc(n).x_()&&n.Ia.size>0}function va(n){return Be(n).Ea.size===0}function V1(n){n.Va=void 0}async function vW(n){n.Ra.set("Online")}async function _W(n){n.Ia.forEach(((e,t)=>{X_(n,e)}))}async function wW(n,e){V1(n),Z_(n)?(n.Ra.ha(e),J_(n)):n.Ra.set("Unknown")}async function EW(n,e,t){if(n.Ra.set("Online"),e instanceof E1&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(r){xe(ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jf(n,r)}else if(e instanceof rf?n.Va.Ze(e):e instanceof w1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await k1(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.Ia.get(p);m&&o.Ia.set(p,m.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,p)=>{const m=o.Ia.get(d);if(!m)return;o.Ia.set(d,m.withResumeToken(cn.EMPTY_BYTE_STRING,m.snapshotVersion)),L1(o,d);const y=new zi(m.target,d,p,m.sequenceNumber);X_(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){xe(ca,"Failed to raise snapshot:",r),await Jf(n,r)}}async function Jf(n,e,t){if(!ec(e))throw e;n.Ea.add(1),await ad(n),n.Ra.set("Offline"),t||(t=()=>k1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{xe(ca,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xp(n)}))}function j1(n,e){return e().catch((t=>Jf(n,t,e)))}async function Jp(n){const e=Be(n),t=so(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:V_;for(;SW(e);)try{const s=await rW(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,xW(e,s)}catch(s){await Jf(e,s)}F1(e)&&U1(e)}function SW(n){return va(n)&&n.Ta.length<10}function xW(n,e){n.Ta.push(e);const t=so(n);t.O_()&&t.X_&&t.ea(e.mutations)}function F1(n){return va(n)&&!so(n).x_()&&n.Ta.length>0}function U1(n){so(n).start()}async function TW(n){so(n).ra()}async function IW(n){const e=so(n);for(const t of n.Ta)e.ea(t.mutations)}async function CW(n,e,t){const r=n.Ta.shift(),s=$_.from(r,e,t);await j1(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Jp(n)}async function RW(n,e){e&&so(n).X_&&await(async function(r,s){if((function(l){return l$(l)&&l!==re.ABORTED})(s.code)){const o=r.Ta.shift();so(r).B_(),await j1(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Jp(r)}})(n,e),F1(n)&&U1(n)}async function NT(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),xe(ca,"RemoteStore received new credentials");const r=va(t);t.Ea.add(3),await ad(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xp(t)}async function bW(n,e){const t=Be(n);e?(t.Ea.delete(2),await Xp(t)):e||(t.Ea.add(2),await ad(t),t.Ra.set("Unknown"))}function nc(n){return n.ma||(n.ma=(function(t,r,s){const o=Be(t);return o.sa(),new hW(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:vW.bind(null,n),t_:_W.bind(null,n),r_:wW.bind(null,n),H_:EW.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Z_(n)?J_(n):n.Ra.set("Unknown")):(await n.ma.stop(),V1(n))}))),n.ma}function so(n){return n.fa||(n.fa=(function(t,r,s){const o=Be(t);return o.sa(),new fW(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:TW.bind(null,n),r_:RW.bind(null,n),ta:IW.bind(null,n),na:CW.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Jp(n)):(await n.fa.stop(),n.Ta.length>0&&(xe(ca,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new ew(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tw(n,e){if(Xs("AsyncQueue",`${e}: ${n}`),ec(n))return new Ee(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static emptySet(e){return new Cl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ke.comparator(t.key,r.key):(t,r)=>ke.comparator(t.key,r.key),this.keyedMap=au(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Cl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.ga=new Rt(ke.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ul{constructor(e,t,r,s,o,l,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Ul(e,t,Cl.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class PW{constructor(){this.queries=DT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Be(t),o=s.queries;s.queries=DT(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new Ee(re.ABORTED,"Firestore shutting down"))}}function DT(){return new ga((n=>o1(n)),Hp)}async function z1(n,e){const t=Be(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new AW,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=tw(l,`Initialization of query '${hl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&nw(t)}async function B1(n,e){const t=Be(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function NW(n,e){const t=Be(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(r=!0);l.wa=s}}r&&nw(t)}function kW(n,e,t){const r=Be(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function nw(n){n.Ca.forEach((e=>{e.next()}))}var fv,MT;(MT=fv||(fv={})).Ma="default",MT.Cache="cache";class $1{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.key=e}}class H1{constructor(e){this.key=e}}class DW{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=a1(e),this.tu=new Cl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new kT,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,y)=>{const E=s.get(m),I=Gp(this.query,y)?y:null,A=!!E&&this.mutatedKeys.has(E.key),T=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let b=!1;E&&I?E.data.isEqual(I.data)?A!==T&&(r.track({type:3,doc:I}),b=!0):this.su(E,I)||(r.track({type:2,doc:I}),b=!0,(d&&this.eu(I,d)>0||p&&this.eu(I,p)<0)&&(u=!0)):!E&&I?(r.track({type:0,doc:I}),b=!0):E&&!I&&(r.track({type:1,doc:E}),b=!0,(d||p)&&(u=!0)),b&&(I?(l=l.add(I),o=T?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,y)=>(function(I,A){const T=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:b})}};return T(I)-T(A)})(m.type,y.type)||this.eu(m.doc,y.doc))),this.ou(r),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new Ul(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new H1(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new W1(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rw="SyncEngine";class MW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class OW{constructor(e){this.key=e,this.hu=!1}}class LW{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ga((u=>o1(u)),Hp),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(ke.comparator),this.Au=new Map,this.Ru=new G_,this.Vu={},this.mu=new Map,this.fu=Fl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VW(n,e,t=!0){const r=X1(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await G1(r,e,t,!0),s}async function jW(n,e){const t=X1(n);await G1(t,e,!0,!1)}async function G1(n,e,t,r){const s=await sW(n.localStore,as(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await FW(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&O1(n.remoteStore,s),u}async function FW(n,e,t,r,s){n.pu=(y,E,I)=>(async function(T,b,j,V){let B=b.view.ru(j);B.Cs&&(B=await CT(T.localStore,b.query,!1).then((({documents:P})=>b.view.ru(P,B))));const K=V&&V.targetChanges.get(b.targetId),J=V&&V.targetMismatches.get(b.targetId)!=null,Z=b.view.applyChanges(B,T.isPrimaryClient,K,J);return LT(T,b.targetId,Z.au),Z.snapshot})(n,y,E,I);const o=await CT(n.localStore,e,!0),l=new DW(e,o.Qs),u=l.ru(o.documents),d=od.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(u,n.isPrimaryClient,d);LT(n,t,p.au);const m=new MW(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function UW(n,e,t){const r=Be(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!Hp(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dv(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Y_(r.remoteStore,s.targetId),pv(r,s.targetId)})).catch(Zl)):(pv(r,s.targetId),await dv(r.localStore,s.targetId,!0))}async function zW(n,e){const t=Be(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Y_(t.remoteStore,r.targetId))}async function BW(n,e,t){const r=QW(n);try{const s=await(function(l,u){const d=Be(l),p=wt.now(),m=u.reduce(((I,A)=>I.add(A.key)),Ye());let y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let A=Js(),T=Ye();return d.Ns.getEntries(I,m).next((b=>{A=b,A.forEach(((j,V)=>{V.isValidDocument()||(T=T.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(I,A))).next((b=>{y=b;const j=[];for(const V of u){const B=r$(V,y.get(V.key).overlayedDocument);B!=null&&j.push(new ya(V.key,B,JP(B.value.mapValue),Hs.exists(!0)))}return d.mutationQueue.addMutationBatch(I,p,j,u)})).next((b=>{E=b;const j=b.applyToLocalDocumentSet(y,T);return d.documentOverlayCache.saveOverlays(I,b.batchId,j)}))})).then((()=>({batchId:E.batchId,changes:c1(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Rt(Qe)),p=p.insert(u,d),l.Vu[l.currentUser.toKey()]=p})(r,s.batchId,t),await ld(r,s.changes),await Jp(r.remoteStore)}catch(s){const o=tw(s,"Failed to persist write");t.reject(o)}}async function q1(n,e){const t=Be(n);try{const r=await tW(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?lt(l.hu,14607):s.removedDocuments.size>0&&(lt(l.hu,42227),l.hu=!1))})),await ld(t,r,e)}catch(r){await Zl(r)}}function OT(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=Be(l);d.onlineState=u;let p=!1;d.queries.forEach(((m,y)=>{for(const E of y.Sa)E.va(u)&&(p=!0)})),p&&nw(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $W(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new Rt(ke.comparator);l=l.insert(o,_n.newNoDocument(o,Fe.min()));const u=Ye().add(o),d=new Qp(Fe.min(),new Map,new Rt(Qe),l,u);await q1(r,d),r.du=r.du.remove(o),r.Au.delete(e),sw(r)}else await dv(r.localStore,e,!1).then((()=>pv(r,e,t))).catch(Zl)}async function WW(n,e){const t=Be(n),r=e.batch.batchId;try{const s=await eW(t.localStore,e);Q1(t,r,null),K1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ld(t,s)}catch(s){await Zl(s)}}async function HW(n,e,t){const r=Be(n);try{const s=await(function(l,u){const d=Be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let m;return d.mutationQueue.lookupMutationBatch(p,u).next((y=>(lt(y!==null,37113),m=y.keys(),d.mutationQueue.removeMutationBatch(p,y)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m))).next((()=>d.localDocuments.getDocuments(p,m)))}))})(r.localStore,e);Q1(r,e,t),K1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ld(r,s)}catch(s){await Zl(s)}}function K1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Q1(n,e,t){const r=Be(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function pv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Y1(n,r)}))}function Y1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Y_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),sw(n))}function LT(n,e,t){for(const r of t)r instanceof W1?(n.Ru.addReference(r.key,e),GW(n,r)):r instanceof H1?(xe(rw,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Y1(n,r.key)):Le(19791,{wu:r})}function GW(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(xe(rw,"New document in limbo: "+t),n.Eu.add(r),sw(n))}function sw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(pt.fromString(e)),r=n.fu.next();n.Au.set(r,new OW(t)),n.du=n.du.insert(t,r),O1(n.remoteStore,new zi(as(Wp(t.path)),r,"TargetPurposeLimboResolution",zp.ce))}}async function ld(n,e,t){const r=Be(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{l.push(r.pu(d,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const m=p?!p.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(p){s.push(p);const m=K_.As(d.targetId,p);o.push(m)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(d,p){const m=Be(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ie.forEach(p,(E=>ie.forEach(E.Es,(I=>m.persistence.referenceDelegate.addReference(y,E.targetId,I))).next((()=>ie.forEach(E.ds,(I=>m.persistence.referenceDelegate.removeReference(y,E.targetId,I)))))))))}catch(y){if(!ec(y))throw y;xe(Q_,"Failed to update sequence numbers: "+y)}for(const y of p){const E=y.targetId;if(!y.fromCache){const I=m.Ms.get(E),A=I.snapshotVersion,T=I.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(E,T)}}})(r.localStore,o))}async function qW(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){xe(rw,"User change. New user:",e.toKey());const r=await N1(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new Ee(re.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ld(t,r.Ls)}}function KW(n,e){const t=Be(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let s=Ye();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function X1(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=q1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$W.bind(null,e),e.Pu.H_=NW.bind(null,e.eventManager),e.Pu.yu=kW.bind(null,e.eventManager),e}function QW(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HW.bind(null,e),e}class Zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Z$(this.persistence,new Y$,e.initialUser,this.serializer)}Cu(e){return new P1(q_.mi,this.serializer)}Du(e){return new oW}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zf.provider={build:()=>new Zf};class YW extends Zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){lt(this.persistence.referenceDelegate instanceof Xf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new O$(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new P1((r=>Xf.mi(r,t)),this.serializer)}}class mv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qW.bind(null,this.syncEngine),await bW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PW})()}createDatastore(e){const t=Yp(e.databaseInfo.databaseId),r=(function(o){return new dW(o)})(e.databaseInfo);return(function(o,l,u,d){return new mW(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,u){return new yW(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>OT(this.syncEngine,t,0)),(function(){return AT.v()?new AT:new aW})())}createSyncEngine(e,t){return(function(s,o,l,u,d,p,m){const y=new LW(s,o,l,u,d,p);return m&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Be(t);xe(ca,"RemoteStore shutting down."),r.Ea.add(5),await ad(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}mv.provider={build:()=>new mv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="FirestoreClient";class XW{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=gn.UNAUTHENTICATED,this.clientId=L_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{xe(io,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(xe(io,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=tw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function gy(n,e){n.asyncQueue.verifyOperationInProgress(),xe(io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await N1(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function VT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await JW(n);xe(io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>NT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>NT(e.remoteStore,s))),n._onlineComponents=e}async function JW(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe(io,"Using user provided OfflineComponentProvider");try{await gy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ol("Error using user provided cache. Falling back to memory cache: "+t),await gy(n,new Zf)}}else xe(io,"Using default OfflineComponentProvider"),await gy(n,new YW(void 0));return n._offlineComponents}async function Z1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe(io,"Using user provided OnlineComponentProvider"),await VT(n,n._uninitializedComponentsProvider._online)):(xe(io,"Using default OnlineComponentProvider"),await VT(n,new mv))),n._onlineComponents}function ZW(n){return Z1(n).then((e=>e.syncEngine))}async function gv(n){const e=await Z1(n),t=e.eventManager;return t.onListen=VW.bind(null,e.syncEngine),t.onUnlisten=UW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zW.bind(null,e.syncEngine),t}function eH(n,e,t={}){const r=new Gi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const m=new J1({next:E=>{m.Nu(),l.enqueueAndForget((()=>B1(o,y)));const I=E.docs.has(u);!I&&E.fromCache?p.reject(new Ee(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&d&&d.source==="server"?p.reject(new Ee(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),y=new $1(Wp(u.path),m,{includeMetadataChanges:!0,qa:!0});return z1(o,y)})(await gv(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="firestore.googleapis.com",FT=!0;class UT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tN,this.ssl=FT}else this.host=e.host,this.ssl=e.ssl??FT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D$)throw new Ee(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eN(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ee(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zp{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new oB;switch(r.type){case"firstParty":return new uB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=jT.get(t);r&&(xe("ComponentProvider","Removing Datastore"),jT.delete(t),r.terminate())})(this),Promise.resolve()}}function tH(n,e,t,r={}){n=qi(n,Zp);const s=co(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;s&&(Zv(`https://${u}`),e_("Firestore",!0)),o.host!==tN&&o.host!==u&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:r};if(!Xi(d,l)&&(n._setSettings(d),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=gn.MOCK_USER;else{p=kb(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ee(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gn(y)}n._authCredentials=new aB(new UP(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fo(this.firestore,e,this._query)}}class Mt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(sd(t,Mt._jsonSchema))return new Mt(e,r||null,new ke(pt.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Ut("string",Mt._jsonSchemaVersion),referencePath:Ut("string")};class Ki extends fo{constructor(e,t,r){super(e,t,Wp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new ke(e))}withConverter(e){return new Ki(this.firestore,e,this._path)}}function nH(n,e,...t){if(n=Gt(n),zP("collection","path",e),n instanceof Zp){const r=pt.fromString(e,...t);return Zx(r),new Ki(n,null,r)}{if(!(n instanceof Mt||n instanceof Ki))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return Zx(r),new Ki(n.firestore,null,r)}}function em(n,e,...t){if(n=Gt(n),arguments.length===1&&(e=L_.newId()),zP("doc","path",e),n instanceof Zp){const r=pt.fromString(e,...t);return Jx(r),new Mt(n,null,new ke(r))}{if(!(n instanceof Mt||n instanceof Ki))throw new Ee(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return Jx(r),new Mt(n.firestore,n instanceof Ki?n.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="AsyncQueue";class BT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D1(this,"async_queue_retry"),this._c=()=>{const r=my();r&&xe(zT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=my();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=my();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Gi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ec(e))throw e;xe(zT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Xs("INTERNAL UNHANDLED ERROR: ",$T(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=ew.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Le(47125,{Pc:$T(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function $T(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class zu extends Zp{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new BT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BT(e),this._firestoreClient=void 0,await e}}}function rH(n,e){const t=typeof n=="object"?n:r_(),r=typeof n=="string"?n:Hf,s=Np(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Ab("firestore");o&&tH(s,...o)}return s}function iw(n){if(n._terminated)throw new Ee(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sH(n),n._firestoreClient}function sH(n){const e=n._freezeSettings(),t=(function(s,o,l,u){return new RB(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,eN(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new XW(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar(cn.fromBase64String(e))}catch(t){throw new Ee(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ar(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sd(e,ar._jsonSchema))return ar.fromBase64String(e.bytes)}}ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:Ut("string",ar._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cs._jsonSchemaVersion}}static fromJSON(e){if(sd(e,cs._jsonSchema))return new cs(e.latitude,e.longitude)}}cs._jsonSchemaVersion="firestore/geoPoint/1.0",cs._jsonSchema={type:Ut("string",cs._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:us._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sd(e,us._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new us(e.vectorValues);throw new Ee(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}us._jsonSchemaVersion="firestore/vectorValue/1.0",us._jsonSchema={type:Ut("string",us._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=/^__.*__$/;class oH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new id(e,this.data,t,this.fieldTransforms)}}function nN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:n})}}class lw{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ep(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nN(this.Ac)&&iH.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aH{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yp(e)}Cc(e,t,r,s=!1){return new lw({Ac:e,methodName:t,Dc:r,path:ln.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rN(n){const e=n._freezeSettings(),t=Yp(n._databaseId);return new aH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lH(n,e,t,r,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);oN("Data must be an object, but it was:",l,r);const u=sN(r,l);let d,p;if(o.merge)d=new Rr(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const E=uH(e,y,t);if(!l.contains(E))throw new Ee(re.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);hH(m,E)||m.push(E)}d=new Rr(m),p=l.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,p=l.fieldTransforms;return new oH(new or(u),d,p)}class cw extends aw{_toFieldTransform(e){return new ZB(e.path,new ju)}isEqual(e){return e instanceof cw}}function cH(n,e,t,r=!1){return uw(t,n.Cc(r?4:3,e))}function uw(n,e){if(iN(n=Gt(n)))return oN("Unsupported field value:",e,n),sN(n,e);if(n instanceof aw)return(function(r,s){if(!nN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=uw(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YB(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:Yf(s.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yf(s.serializer,o)}}if(r instanceof cs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ar)return{bytesValue:S1(s.serializer,r._byteString)};if(r instanceof Mt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:H_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof us)return(function(l,u){return{mapValue:{fields:{[YP]:{stringValue:XP},[Gf]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw u.Sc("VectorValues must only contain numeric values.");return B_(u.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Up(r)}`)})(n,e)}function sN(n,e){const t={};return WP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(n,((r,s)=>{const o=uw(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function iN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof cs||n instanceof ar||n instanceof Mt||n instanceof aw||n instanceof us)}function oN(n,e,t){if(!iN(t)||!BP(t)){const r=Up(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function uH(n,e,t){if((e=Gt(e))instanceof ow)return e._internalPath;if(typeof e=="string")return aN(n,e);throw ep("Field path arguments must be of type string or ",n,!1,void 0,t)}const dH=new RegExp("[~\\*/\\[\\]]");function aN(n,e,t){if(e.search(dH)>=0)throw ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ow(...e.split("."))._internalPath}catch{throw ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ep(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new Ee(re.INVALID_ARGUMENT,u+n+d)}function hH(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fH extends lN{data(){return super.data()}}function tm(n,e){return typeof e=="string"?aN(n,e):e instanceof ow?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pH(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dw{}class hw extends dw{}function mH(n,e,...t){let r=[];e instanceof dw&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((d=>d instanceof fw)).length,u=o.filter((d=>d instanceof nm)).length;if(l>1||l>0&&u>0)throw new Ee(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class nm extends hw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new nm(e,t,r)}_apply(e){const t=this._parse(e);return cN(e._query,t),new fo(e.firestore,e.converter,ov(e._query,t))}_parse(e){const t=rN(e.firestore);return(function(o,l,u,d,p,m,y){let E;if(p.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Ee(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){GT(y,m);const A=[];for(const T of y)A.push(HT(d,o,T));E={arrayValue:{values:A}}}else E=HT(d,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||GT(y,m),E=cH(u,l,y,m==="in"||m==="not-in");return Ft.create(p,m,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function gH(n,e,t){const r=e,s=tm("where",n);return nm._create(s,r,t)}class fw extends dw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fw(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Dr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)cN(l,d),l=ov(l,d)})(e._query,t),new fo(e.firestore,e.converter,ov(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pw extends hw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pw(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new Ee(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ee(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vu(o,l)})(e._query,this._field,this._direction);return new fo(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new tc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function yH(n,e="asc"){const t=e,r=tm("orderBy",n);return pw._create(r,t)}class mw extends hw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mw(e,t,r)}_apply(e){return new fo(e.firestore,e.converter,Kf(e._query,this._limit,this._limitType))}}function vH(n){return mw._create("limit",n,"F")}function HT(n,e,t){if(typeof(t=Gt(t))=="string"){if(t==="")throw new Ee(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i1(e)&&t.indexOf("/")!==-1)throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!ke.isDocumentKey(r))throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return aT(n,new ke(r))}if(t instanceof Mt)return aT(n,t._key);throw new Ee(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Up(t)}.`)}function GT(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cN(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _H{convertValue(e,t="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ma(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Gf].arrayValue?.values?.map((r=>Dt(r.doubleValue)));return new us(t)}convertGeoPoint(e){return new cs(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$p(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mu(e));default:return null}}convertTimestamp(e){const t=to(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);lt(b1(r),9688,{name:e});const s=new Ou(r.get(1),r.get(3)),o=new ke(r.popFirst(5));return s.isEqual(t)||Xs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class cu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yo extends lN{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yo._jsonSchema={type:Ut("string",Yo._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class sf extends Yo{data(e={}){return super.data(e)}}class Rl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new cu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new sf(this._firestore,this._userDataWriter,r.key,r,new cu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new sf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new cu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new sf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new cu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,m=-1;return u.type!==0&&(p=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),m=l.indexOf(u.doc.key)),{type:EH(u.type),doc:d,oldIndex:p,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=L_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(n){n=qi(n,Mt);const e=qi(n.firestore,zu);return eH(iw(e),n._key).then((t=>hN(e,n,t)))}Rl._jsonSchemaVersion="firestore/querySnapshot/1.0",Rl._jsonSchema={type:Ut("string",Rl._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class uN extends _H{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function dN(n,e,t){n=qi(n,Mt);const r=qi(n.firestore,zu),s=wH(n.converter,e,t);return xH(r,[lH(rN(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Hs.none())])}function SH(n,...e){n=Gt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||WT(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(WT(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,l,u;if(n instanceof Mt)l=qi(n.firestore,zu),u=Wp(n._key.path),o={next:d=>{e[r]&&e[r](hN(l,n,d))},error:e[r+1],complete:e[r+2]};else{const d=qi(n,fo);l=qi(d.firestore,zu),u=d._query;const p=new uN(l);o={next:m=>{e[r]&&e[r](new Rl(l,p,d,m))},error:e[r+1],complete:e[r+2]},pH(n._query)}return(function(p,m,y,E){const I=new J1(E),A=new $1(m,I,y);return p.asyncQueue.enqueueAndForget((async()=>z1(await gv(p),A))),()=>{I.Nu(),p.asyncQueue.enqueueAndForget((async()=>B1(await gv(p),A)))}})(iw(l),u,s,o)}function xH(n,e){return(function(r,s){const o=new Gi;return r.asyncQueue.enqueueAndForget((async()=>BW(await ZW(r),s,o))),o.promise})(iw(n),e)}function hN(n,e,t){const r=t.docs.get(e._key),s=new uN(n);return new Yo(n,s,e._key,r,new cu(t.hasPendingWrites,t.fromCache),e.converter)}function fN(){return new cw("serverTimestamp")}(function(e,t=!0){(function(s){Jl=s})(ha),na(new Ji("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new zu(new lB(r.getProvider("auth-internal")),new dB(l,r.getProvider("app-check-internal")),(function(p,m){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ee(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(p.options.projectId,m)})(l,s),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),is(Kx,Qx,e),is(Kx,Qx,"esm2020")})();const TH={apiKey:"AIzaSyB1z04jNS4gnwWa4VI10cXinj2PBg3KHe0",authDomain:"boulder-gym.firebaseapp.com",projectId:"boulder-gym",storageBucket:"boulder-gym.firebasestorage.app",messagingSenderId:"837049852336",appId:"1:837049852336:web:73b74809c9f120dc75b675",measurementId:"G-PKT03CZKTN"},gw=Vb(TH);rB(gw);const Bu=rH(gw),ds=m6(gw),IH=new js;async function qT(){const n=ds.currentUser;if(!n)return;const e=em(Bu,"users",n.uid);(await rm(e)).exists()||await dN(e,{displayName:n.displayName||n.email?.split("@")[0]||"",email:n.email||null,photoURL:n.photoURL||null,roles:{},createdAt:fN()},{merge:!0})}function KT(n){switch(n){case"auth/invalid-email":return"Invalid email address.";case"auth/missing-password":return"Please enter your password.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/email-already-in-use":return"That email is already in use.";case"auth/invalid-credential":case"auth/wrong-password":return"Wrong email or password.";case"auth/popup-closed-by-user":return"Popup closed before completing sign in.";default:return"Something went wrong. Please try again."}}function CH({onLogin:n}){const[e,t]=S.useState("signin"),[r,s]=S.useState(""),[o,l]=S.useState(""),[u,d]=S.useState(""),[p,m]=S.useState(!1),[y,E]=S.useState(null);async function I(){try{m(!0),E(null);const T=await Tz(ds,IH);await qT(),n(T.user)}catch(T){E(KT(T?.code))}finally{m(!1)}}async function A(T){T.preventDefault();try{m(!0),E(null);let b;e==="signin"?b=await ez(ds,r,o):(b=await ZU(ds,r,o),u.trim()&&await nz(b.user,{displayName:u.trim()})),await qT(),n(b.user)}catch(b){E(KT(b?.code))}finally{m(!1)}}return v.jsxs("div",{className:"max-w-md mx-auto rounded-2xl shadow-sm border border-gray-200 dark:border-gray-800 bg-white dark:bg-zinc-900 p-6",children:[v.jsx("h1",{className:"text-xl font-semibold mb-1",children:e==="signin"?"Sign in":"Create an account"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Use Google or email/password."}),y&&v.jsx("div",{className:"mb-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 rounded-lg p-2",children:y}),v.jsx("button",{onClick:I,disabled:p,className:"w-full mb-4 px-3 py-2 rounded-xl text-sm font-medium border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"Continue with Google"}),v.jsxs("form",{onSubmit:A,className:"space-y-3",children:[e==="signup"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm mb-1",children:"Display name"}),v.jsx("input",{type:"text",value:u,onChange:T=>d(T.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"Jane Doe"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm mb-1",children:"Email"}),v.jsx("input",{type:"email",value:r,onChange:T=>s(T.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"you@example.com",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm mb-1",children:"Password"}),v.jsx("input",{type:"password",value:o,onChange:T=>l(T.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"",required:!0})]}),v.jsx("button",{type:"submit",disabled:p,className:"w-full px-3 py-2 rounded-xl text-sm font-medium bg-black text-white dark:bg-white dark:text-black",children:p?e==="signin"?"Signing in":"Creating":e==="signin"?"Sign in":"Create account"})]}),v.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-3",children:e==="signin"?v.jsxs(v.Fragment,{children:["No account yet?"," ",v.jsx("button",{className:"underline",onClick:()=>t("signup"),children:"Create one"})]}):v.jsxs(v.Fragment,{children:["Already have an account?"," ",v.jsx("button",{className:"underline",onClick:()=>t("signin"),children:"Sign in"})]})})]})}const QT={display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f5f6fa",fontFamily:"Arial, sans-serif"},YT={backgroundColor:"#fff",borderRadius:"12px",padding:"2rem",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"320px",transition:"transform 0.2s ease"},RH={width:"96px",height:"96px",borderRadius:"50%",objectFit:"cover",marginBottom:"1rem"},bH={fontSize:"1.4rem",fontWeight:600,marginBottom:"0.25rem",color:"#222"},AH={fontSize:"0.95rem",color:"#555",marginBottom:"1rem"},PH={fontSize:"0.9rem",color:"#666"},NH={fontWeight:500,color:"#333"},kH={color:"#555",fontSize:"1rem"};function DH(){const[n,e]=S.useState(null);return S.useEffect(()=>{const t=lA(ds,r=>{e(r)});return()=>t()},[]),n?v.jsx("div",{style:QT,children:v.jsxs("div",{style:{...YT,cursor:"default",transform:"translateY(0)"},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-3px)"},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)"},children:[v.jsx("img",{src:n.photoURL||"https://via.placeholder.com/96?text=User",alt:n.displayName??"User photo",style:RH}),v.jsx("h2",{style:bH,children:n.displayName}),v.jsx("p",{style:AH,children:n.email}),v.jsxs("div",{style:PH,children:[v.jsx("span",{style:NH,children:"Account created:"})," ",n.metadata.creationTime?new Date(n.metadata.creationTime).toLocaleString():"Unknown"]})]})}):v.jsx("div",{style:QT,children:v.jsx("div",{style:YT,children:v.jsx("p",{style:kH,children:"Loading user info..."})})})}function yv({children:n}){return v.jsx("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-zinc-900 p-4 shadow-sm",children:n})}function XT({title:n,right:e,children:t}){return v.jsxs("section",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h2",{className:"text-base font-semibold tracking-tight",children:n}),e]}),v.jsx(yv,{children:t})]})}function MH(){const[n,e]=S.useState(ds.currentUser),[t,r]=S.useState(!ds.currentUser);return S.useEffect(()=>{const s=lA(ds,o=>{e(o),r(!1)});return()=>s()},[]),{user:n,loading:t}}function OH(n){const[e,t]=S.useState(null);return S.useEffect(()=>{if(!n){t(null);return}const r=em(Bu,"users",n);rm(r).then(s=>t(s.exists()?s.data():null))},[n]),{profile:e}}function LH(n){const[e,t]=S.useState([]),[r,s]=S.useState(!!n);return S.useEffect(()=>{if(!n)return;const o=mH(nH(Bu,"signups"),gH("uid","==",n),yH("createdAt","desc"),vH(5)),l=SH(o,async u=>{const d=[];for(const p of u.docs){const m=p.get("assignmentId"),y=em(Bu,"assignments",m),E=await rm(y);E.exists()&&d.push({id:E.id,data:E.data()})}t(d),s(!1)});return()=>l()},[n]),{items:e,loading:r}}async function VH(n){const e=em(Bu,"users",n.uid);(await rm(e)).exists()||await dN(e,{displayName:n.displayName||n.email?.split("@")[0]||"",email:n.email||null,photoURL:n.photoURL||null,roles:{},createdAt:fN()},{merge:!0})}function jH({onLogin:n}={}){const{user:e,loading:t}=MH(),{profile:r}=OH(e?.uid),{items:s}=LH(e?.uid);Os.useEffect(()=>{e&&n&&n(e)},[e,n]);const[o,l]=S.useState(!1),[u,d]=S.useState(null),[p,m]=S.useState(!1);S.useEffect(()=>{e&&VH(e)},[e]);async function y(){try{d(null),l(!0),await cA(ds)}catch(I){d(I?.message??"Failed to sign out.")}finally{l(!1)}}if(t)return v.jsx("div",{className:"p-6 max-w-xl mx-auto",children:v.jsx(yv,{children:v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Loading your session"})})});if(!e)return v.jsx("div",{className:"p-6 max-w-xl mx-auto",children:v.jsx(CH,{onLogin:n??(()=>{})})});if(p)return v.jsxs("div",{className:"p-6 space-y-6",children:[v.jsxs("header",{className:"flex items-center justify-between",children:[v.jsx("h1",{className:"text-2xl font-bold",children:"Your Profile"}),v.jsx("button",{onClick:()=>m(!1),className:"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"Back"})]}),v.jsx(DH,{})]});const E=r?.displayName||e.displayName||e.email||"there";return v.jsxs("div",{className:"p-6 space-y-6",children:[v.jsxs("header",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",E," "]}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Youre signed in with Firebase Auth."})]}),v.jsx("button",{onClick:y,disabled:o,className:"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800 disabled:opacity-60","aria-label":"Sign out",children:o?"Signing out":"Sign out"})]}),u&&v.jsx(yv,{children:v.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:u})}),v.jsx(XT,{title:"Your account",children:v.jsx("button",{onClick:()=>m(!0),className:"w-full rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"View Profile"})}),v.jsx(XT,{title:"Your latest signups",children:s.length===0?v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No recent signups yet."}):v.jsx("ul",{className:"space-y-2",children:s.map(({id:I,data:A})=>v.jsx("li",{className:"flex items-center justify-between",children:v.jsxs("div",{children:[v.jsx("p",{className:"font-medium",children:A.title}),A.location&&v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:A.location})]})},I))})})]})}const FH=[{id:"1",name:"Rainbow Traverse",grade:"V4",color:"Multi-color",imageUrl:"https://images.unsplash.com/photo-1730659071194-4c833ac5da4e?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxpbmRvb3IlMjByb2NrJTIwY2xpbWJpbmclMjB3YWxsJTIwY29sb3JmdWwlMjBob2xkc3xlbnwxfHx8fDE3NTg3MDAyNTZ8MA&ixlib=rb-4.1.0&q=80&w=1080",description:"A challenging traverse across the main wall with colorful holds. Great for working on endurance and technique.",setter:"Mike Chen",dateSet:"2024-01-15",averageRating:4.2,totalReviews:8,reviews:[{id:"1",author:"Sarah K.",rating:5,comment:"Amazing route! The sequence is really fun and flows well.",date:"2024-01-20"},{id:"2",author:"Alex R.",rating:4,comment:"Good problem, but the crux move is quite tricky.",date:"2024-01-18"}]},{id:"2",name:"Overhang Crusher",grade:"V6",color:"Red",imageUrl:"https://images.unsplash.com/photo-1696105538708-6be6c90707a1?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxib3VsZGVyaW5nJTIwd2FsbCUyMGluZG9vciUyMGd5bXxlbnwxfHx8fDE3NTg3MDAyNTl8MA&ixlib=rb-4.1.0&q=80&w=1080",description:"Power problem on the steep overhang. Requires strong fingers and core strength.",setter:"Emma Liu",dateSet:"2024-01-10",averageRating:4.5,totalReviews:12,reviews:[{id:"3",author:"David M.",rating:5,comment:"Incredible route! Really pushes your limits.",date:"2024-01-25"}]},{id:"3",name:"Technical Corner",grade:"V3",color:"Blue",imageUrl:"https://images.unsplash.com/photo-1633859023075-fada2199a42e?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjbGltYmluZyUyMGhvbGRzJTIwYm91bGRlciUyMHByb2JsZW18ZW58MXx8fHwxNzU4NzAwMjY1fDA&ixlib=rb-4.1.0&q=80&w=1080",description:"Balancey corner problem that tests your footwork and body positioning.",setter:"Ryan Park",dateSet:"2024-01-08",averageRating:3.8,totalReviews:6,reviews:[]},{id:"4",name:"The Dynamo",grade:"V5",color:"Green",imageUrl:"https://images.unsplash.com/photo-1689775885252-0dccafbdb152?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHxyb2NrJTIwY2xpbWJpbmclMjBneW0lMjBjb2xvcmZ1bCUyMHJvdXRlc3xlbnwxfHx8fDE3NTg3MDAyNjh8MA&ixlib=rb-4.1.0&q=80&w=1080",description:"Dynamic problem with a big dyno move in the middle. Commit to the jump!",setter:"Jordan Smith",dateSet:"2024-01-12",averageRating:4,totalReviews:9,reviews:[{id:"4",author:"Lisa T.",rating:4,comment:"Fun dyno! Took me a few tries to stick the move.",date:"2024-01-22"}]}];function UH(){const[n,e]=S.useState(null),[t,r]=S.useState(FH),[s,o]=S.useState(null),[l,u]=S.useState("gallery"),[d,p]=S.useState(""),m=V=>{const B={...V,id:Date.now().toString(),averageRating:0,totalReviews:0,reviews:[]};r([B,...t]),u("gallery")},y=(V,B)=>{const K={...B,id:Date.now().toString(),author:n?.name||"Anonymous",date:new Date().toISOString().split("T")[0]};if(r(t.map(J=>{if(J.id===V){const Z=[...J.reviews,K],P=Z.reduce((R,k)=>R+k.rating,0)/Z.length;return{...J,reviews:Z,averageRating:Number(P.toFixed(1)),totalReviews:Z.length}}return J})),s&&s.id===V){const J=t.find(Z=>Z.id===V);J&&o(J)}},E=V=>{e(V)},I=()=>{cA(ds).then(()=>{e(null),u("gallery"),o(null)}).catch(V=>{console.error("Sign out error:",V)})},A=d?t.filter(V=>V.grade===d):t;if(!n)return v.jsx(jH,{onLogin:E});const T=V=>{o(V)},b=()=>{o(null)},j=()=>{o(null)};return l==="add"?v.jsxs("div",{className:"min-h-screen bg-background",children:[v.jsx("header",{className:"sticky top-0 z-50 bg-card border-b",children:v.jsx("div",{className:"container mx-auto px-4 py-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center",children:v.jsx(kg,{className:"size-4 text-primary-foreground"})}),v.jsx("h1",{className:"text-xl font-medium",children:"Boulder Routes"})]}),v.jsx("div",{className:"flex items-center gap-3",children:v.jsxs(S0,{children:[v.jsx(x0,{asChild:!0,children:v.jsxs(Rn,{variant:"ghost",className:"gap-2",size:"sm",children:[v.jsx(kh,{className:"size-6",children:v.jsx(Dh,{className:"text-xs",children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),v.jsx("span",{className:"hidden sm:inline",children:n.name})]})}),v.jsxs(T0,{align:"end",className:"w-56",children:[v.jsxs("div",{className:"flex items-center gap-2 p-2",children:[v.jsx(kh,{className:"size-8",children:v.jsx(Dh,{children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),v.jsxs("div",{className:"flex flex-col space-y-1",children:[v.jsx("p",{className:"text-sm font-medium",children:n.name}),v.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]}),v.jsx(C0,{}),v.jsxs(I0,{onClick:I,className:"gap-2 text-destructive",children:[v.jsx(OS,{className:"size-4"}),"Sign out"]})]})]})})]})})}),v.jsx("main",{className:"container mx-auto px-4 py-6",children:v.jsx(mV,{onSave:m,onCancel:()=>u("gallery")})})]}):v.jsxs("div",{className:"h-screen bg-background flex flex-col landscape:h-full",children:[v.jsx("header",{className:"flex-shrink-0 z-50 bg-card border-b landscape:sticky landscape:top-0",children:v.jsx("div",{className:"container mx-auto px-4 py-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center",children:v.jsx(kg,{className:"size-4 text-primary-foreground"})}),v.jsx("h1",{className:"text-xl font-medium",children:"Boulder Routes"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Rn,{onClick:()=>u("add"),size:"sm",className:"gap-2",children:[v.jsx(Qk,{className:"size-4"}),v.jsx("span",{className:"hidden sm:inline",children:"Add Route"})]}),v.jsxs(S0,{children:[v.jsx(x0,{asChild:!0,children:v.jsxs(Rn,{variant:"ghost",className:"gap-2",size:"sm",children:[v.jsx(kh,{className:"size-6",children:v.jsx(Dh,{className:"text-xs",children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),v.jsx("span",{className:"hidden sm:inline",children:n.name})]})}),v.jsxs(T0,{align:"end",className:"w-56",children:[v.jsxs("div",{className:"flex items-center gap-2 p-2",children:[v.jsx(kh,{className:"size-8",children:v.jsx(Dh,{children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),v.jsxs("div",{className:"flex flex-col space-y-1",children:[v.jsx("p",{className:"text-sm font-medium",children:n.name}),v.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]}),v.jsx(C0,{}),v.jsxs(I0,{onClick:I,className:"gap-2 text-destructive",children:[v.jsx(OS,{className:"size-4"}),"Sign out"]})]})]})]})]})})}),v.jsxs("main",{className:"flex-1 overflow-hidden",children:[v.jsx("div",{className:"landscape:block hidden h-full",children:v.jsxs(FF,{direction:"horizontal",className:"h-full w-full",children:[v.jsx(O0,{defaultSize:35,minSize:25,maxSize:50,className:"h-full",children:v.jsx("div",{className:"h-full overflow-hidden",children:v.jsx(eV,{routes:A,onRouteClick:T,filterGrade:d,onFilterChange:p,selectedRouteId:s?.id})})}),v.jsx(UF,{withHandle:!0}),v.jsx(O0,{defaultSize:65,minSize:50,className:"h-full",children:v.jsx("div",{className:"h-full overflow-hidden",children:s?v.jsx(QC,{className:"h-full w-full",children:v.jsx("div",{className:"px-6 py-6",children:v.jsx(g0,{route:s,onBack:j,onAddReview:V=>y(s.id,V),currentUser:n,showBackButton:!1})})},s.id):v.jsx("div",{className:"flex items-center justify-center h-full w-full",children:v.jsxs("div",{className:"text-center space-y-3",children:[v.jsx("div",{className:"size-16 bg-muted rounded-full flex items-center justify-center mx-auto",children:v.jsx(kg,{className:"size-8 text-muted-foreground"})}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("h3",{className:"font-medium",children:"No route selected"}),v.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a route from the list to view details"})]})]})})})})]})}),v.jsxs("div",{className:"landscape:hidden h-full",children:[v.jsx("div",{className:"h-full overflow-auto",children:v.jsx("div",{className:"container mx-auto px-4 py-6",children:v.jsx(ML,{routes:A,onRouteClick:T,filterGrade:d,onFilterChange:p,selectedRouteId:s?.id})})}),s&&v.jsx(u4,{open:!0,onOpenChange:V=>!V&&b(),children:v.jsxs(f4,{side:"right",className:"w-full sm:max-w-2xl p-0 overflow-auto landscape:hidden",children:[v.jsxs(p4,{className:"sr-only",children:[v.jsx(m4,{children:s.name}),v.jsxs(g4,{children:["Route details for ",s.name," - ",s.grade]})]}),v.jsx("div",{className:"p-6",children:v.jsx(g0,{route:s,onBack:b,onAddReview:V=>y(s.id,V),currentUser:n,showBackButton:!0})})]})})]})]})]})}bk.createRoot(document.getElementById("root")).render(v.jsx(S.StrictMode,{children:v.jsx(UH,{})}));
