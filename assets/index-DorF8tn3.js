function kN(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function aI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dg={exports:{}},Jc={},Og={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS;function NN(){if(OS)return qe;OS=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function E(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function A(B,ne,te){this.props=B,this.context=ne,this.refs=x,this.updater=te||I}A.prototype.isReactComponent={},A.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=A.prototype;function V(B,ne,te){this.props=B,this.context=ne,this.refs=x,this.updater=te||I}var z=V.prototype=new j;z.constructor=V,b(z,A.prototype),z.isPureReactComponent=!0;var G=Array.isArray,J=Object.prototype.hasOwnProperty,Z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(B,ne,te){var se,he={},ce=null,H=null;if(ne!=null)for(se in ne.ref!==void 0&&(H=ne.ref),ne.key!==void 0&&(ce=""+ne.key),ne)J.call(ne,se)&&!P.hasOwnProperty(se)&&(he[se]=ne[se]);var oe=arguments.length-2;if(oe===1)he.children=te;else if(1<oe){for(var ye=Array(oe),xe=0;xe<oe;xe++)ye[xe]=arguments[xe+2];he.children=ye}if(B&&B.defaultProps)for(se in oe=B.defaultProps,oe)he[se]===void 0&&(he[se]=oe[se]);return{$$typeof:n,type:B,key:ce,ref:H,props:he,_owner:Z.current}}function N(B,ne){return{$$typeof:n,type:B.type,key:ne,ref:B.ref,props:B.props,_owner:B._owner}}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function M(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return ne[te]})}var F=/\/+/g;function D(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):ne.toString(36)}function me(B,ne,te,se,he){var ce=typeof B;(ce==="undefined"||ce==="boolean")&&(B=null);var H=!1;if(B===null)H=!0;else switch(ce){case"string":case"number":H=!0;break;case"object":switch(B.$$typeof){case n:case e:H=!0}}if(H)return H=B,he=he(H),B=se===""?"."+D(H,0):se,G(he)?(te="",B!=null&&(te=B.replace(F,"$&/")+"/"),me(he,ne,te,"",function(xe){return xe})):he!=null&&(O(he)&&(he=N(he,te+(!he.key||H&&H.key===he.key?"":(""+he.key).replace(F,"$&/")+"/")+B)),ne.push(he)),1;if(H=0,se=se===""?".":se+":",G(B))for(var oe=0;oe<B.length;oe++){ce=B[oe];var ye=se+D(ce,oe);H+=me(ce,ne,te,ye,he)}else if(ye=E(B),typeof ye=="function")for(B=ye.call(B),oe=0;!(ce=B.next()).done;)ce=ce.value,ye=se+D(ce,oe++),H+=me(ce,ne,te,ye,he);else if(ce==="object")throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return H}function _e(B,ne,te){if(B==null)return B;var se=[],he=0;return me(B,se,"","",function(ce){return ne.call(te,ce,he++)}),se}function pe(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var Ee={current:null},W={transition:null},ee={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:W,ReactCurrentOwner:Z};function ue(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:_e,forEach:function(B,ne,te){_e(B,function(){ne.apply(this,arguments)},te)},count:function(B){var ne=0;return _e(B,function(){ne++}),ne},toArray:function(B){return _e(B,function(ne){return ne})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},qe.Component=A,qe.Fragment=t,qe.Profiler=s,qe.PureComponent=V,qe.StrictMode=r,qe.Suspense=d,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,qe.act=ue,qe.cloneElement=function(B,ne,te){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var se=b({},B.props),he=B.key,ce=B.ref,H=B._owner;if(ne!=null){if(ne.ref!==void 0&&(ce=ne.ref,H=Z.current),ne.key!==void 0&&(he=""+ne.key),B.type&&B.type.defaultProps)var oe=B.type.defaultProps;for(ye in ne)J.call(ne,ye)&&!P.hasOwnProperty(ye)&&(se[ye]=ne[ye]===void 0&&oe!==void 0?oe[ye]:ne[ye])}var ye=arguments.length-2;if(ye===1)se.children=te;else if(1<ye){oe=Array(ye);for(var xe=0;xe<ye;xe++)oe[xe]=arguments[xe+2];se.children=oe}return{$$typeof:n,type:B.type,key:he,ref:ce,props:se,_owner:H}},qe.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},qe.createElement=R,qe.createFactory=function(B){var ne=R.bind(null,B);return ne.type=B,ne},qe.createRef=function(){return{current:null}},qe.forwardRef=function(B){return{$$typeof:u,render:B}},qe.isValidElement=O,qe.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:pe}},qe.memo=function(B,ne){return{$$typeof:p,type:B,compare:ne===void 0?null:ne}},qe.startTransition=function(B){var ne=W.transition;W.transition={};try{B()}finally{W.transition=ne}},qe.unstable_act=ue,qe.useCallback=function(B,ne){return Ee.current.useCallback(B,ne)},qe.useContext=function(B){return Ee.current.useContext(B)},qe.useDebugValue=function(){},qe.useDeferredValue=function(B){return Ee.current.useDeferredValue(B)},qe.useEffect=function(B,ne){return Ee.current.useEffect(B,ne)},qe.useId=function(){return Ee.current.useId()},qe.useImperativeHandle=function(B,ne,te){return Ee.current.useImperativeHandle(B,ne,te)},qe.useInsertionEffect=function(B,ne){return Ee.current.useInsertionEffect(B,ne)},qe.useLayoutEffect=function(B,ne){return Ee.current.useLayoutEffect(B,ne)},qe.useMemo=function(B,ne){return Ee.current.useMemo(B,ne)},qe.useReducer=function(B,ne,te){return Ee.current.useReducer(B,ne,te)},qe.useRef=function(B){return Ee.current.useRef(B)},qe.useState=function(B){return Ee.current.useState(B)},qe.useSyncExternalStore=function(B,ne,te){return Ee.current.useSyncExternalStore(B,ne,te)},qe.useTransition=function(){return Ee.current.useTransition()},qe.version="18.3.1",qe}var MS;function sp(){return MS||(MS=1,Og.exports=NN()),Og.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS;function DN(){if(LS)return Jc;LS=1;var n=sp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var m,y={},E=null,I=null;p!==void 0&&(E=""+p),d.key!==void 0&&(E=""+d.key),d.ref!==void 0&&(I=d.ref);for(m in d)r.call(d,m)&&!o.hasOwnProperty(m)&&(y[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:u,key:E,ref:I,props:y,_owner:s.current}}return Jc.Fragment=t,Jc.jsx=l,Jc.jsxs=l,Jc}var VS;function ON(){return VS||(VS=1,Dg.exports=DN()),Dg.exports}var v=ON(),S=sp();const Vs=aI(S),ip=kN({__proto__:null,default:Vs},[S]);var Ch={},Mg={exports:{}},Mn={},Lg={exports:{}},Vg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function MN(){return jS||(jS=1,(function(n){function e(W,ee){var ue=W.length;W.push(ee);e:for(;0<ue;){var B=ue-1>>>1,ne=W[B];if(0<s(ne,ee))W[B]=ee,W[ue]=ne,ue=B;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ee=W[0],ue=W.pop();if(ue!==ee){W[0]=ue;e:for(var B=0,ne=W.length,te=ne>>>1;B<te;){var se=2*(B+1)-1,he=W[se],ce=se+1,H=W[ce];if(0>s(he,ue))ce<ne&&0>s(H,he)?(W[B]=H,W[ce]=ue,B=ce):(W[B]=he,W[se]=ue,B=se);else if(ce<ne&&0>s(H,ue))W[B]=H,W[ce]=ue,B=ce;else break e}}return ee}function s(W,ee){var ue=W.sortIndex-ee.sortIndex;return ue!==0?ue:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],m=1,y=null,E=3,I=!1,b=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(W){for(var ee=t(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=W)r(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function G(W){if(x=!1,z(W),!b)if(t(d)!==null)b=!0,pe(J);else{var ee=t(p);ee!==null&&Ee(G,ee.startTime-W)}}function J(W,ee){b=!1,x&&(x=!1,j(R),R=-1),I=!0;var ue=E;try{for(z(ee),y=t(d);y!==null&&(!(y.expirationTime>ee)||W&&!M());){var B=y.callback;if(typeof B=="function"){y.callback=null,E=y.priorityLevel;var ne=B(y.expirationTime<=ee);ee=n.unstable_now(),typeof ne=="function"?y.callback=ne:y===t(d)&&r(d),z(ee)}else r(d);y=t(d)}if(y!==null)var te=!0;else{var se=t(p);se!==null&&Ee(G,se.startTime-ee),te=!1}return te}finally{y=null,E=ue,I=!1}}var Z=!1,P=null,R=-1,N=5,O=-1;function M(){return!(n.unstable_now()-O<N)}function F(){if(P!==null){var W=n.unstable_now();O=W;var ee=!0;try{ee=P(!0,W)}finally{ee?D():(Z=!1,P=null)}}else Z=!1}var D;if(typeof V=="function")D=function(){V(F)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,_e=me.port2;me.port1.onmessage=F,D=function(){_e.postMessage(null)}}else D=function(){A(F,0)};function pe(W){P=W,Z||(Z=!0,D())}function Ee(W,ee){R=A(function(){W(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){b||I||(b=!0,pe(J))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(W){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var ue=E;E=ee;try{return W()}finally{E=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ue=E;E=W;try{return ee()}finally{E=ue}},n.unstable_scheduleCallback=function(W,ee,ue){var B=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?B+ue:B):ue=B,W){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ue+ne,W={id:m++,callback:ee,priorityLevel:W,startTime:ue,expirationTime:ne,sortIndex:-1},ue>B?(W.sortIndex=ue,e(p,W),t(d)===null&&W===t(p)&&(x?(j(R),R=-1):x=!0,Ee(G,ue-B))):(W.sortIndex=ne,e(d,W),b||I||(b=!0,pe(J))),W},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(W){var ee=E;return function(){var ue=E;E=ee;try{return W.apply(this,arguments)}finally{E=ue}}}})(Vg)),Vg}var FS;function LN(){return FS||(FS=1,Lg.exports=MN()),Lg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function VN(){if(US)return Mn;US=1;var n=sp(),e=LN();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function E(i){return d.call(y,i)?!0:d.call(m,i)?!1:p.test(i)?y[i]=!0:(m[i]=!0,!1)}function I(i,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,a,c,f){if(a===null||typeof a>"u"||I(i,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function x(i,a,c,f,g,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];A[a]=new x(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(j,V);A[a]=new x(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(j,V);A[a]=new x(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(j,V);A[a]=new x(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function z(i,a,c,f){var g=A.hasOwnProperty(a)?A[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,c,g,f)&&(c=null),f||g===null?E(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(a=g.attributeName,f=g.attributeNamespace,c===null?i.removeAttribute(a):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?i.setAttributeNS(f,a,c):i.setAttribute(a,c))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),Z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),M=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),W=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,B;function ne(i){if(B===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+i}var te=!1;function se(i,a){if(!i||te)return"";te=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){f=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}i()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var g=Y.stack.split(`
`),_=f.stack.split(`
`),C=g.length-1,L=_.length-1;1<=C&&0<=L&&g[C]!==_[L];)L--;for(;1<=C&&0<=L;C--,L--)if(g[C]!==_[L]){if(C!==1||L!==1)do if(C--,L--,0>L||g[C]!==_[L]){var U=`
`+g[C].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=C&&0<=L);break}}}finally{te=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ne(i):""}function he(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=se(i.type,!1),i;case 11:return i=se(i.type.render,!1),i;case 1:return i=se(i.type,!0),i;default:return""}}function ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case Z:return"Portal";case N:return"Profiler";case R:return"StrictMode";case D:return"Suspense";case me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case _e:return a=i.displayName||null,a!==null?a:ce(i.type)||"Memo";case pe:a=i._payload,i=i._init;try{return ce(i(a))}catch{}}return null}function H(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(a);case 8:return a===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ye(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function xe(i){var a=ye(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(C){f=""+C,_.call(this,C)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function je(i){i._valueTracker||(i._valueTracker=xe(i))}function $e(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=ye(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function Ue(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ht(i,a){var c=a.checked;return ue({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function bn(i,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=oe(a.value!=null?a.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Tn(i,a){a=a.checked,a!=null&&z(i,"checked",a,!1)}function xn(i,a){Tn(i,a);var c=oe(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Tt(i,a.type,c):a.hasOwnProperty("defaultValue")&&Tt(i,a.type,oe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Lt(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Tt(i,a,c){(a!=="number"||Ue(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var xt=Array.isArray;function en(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+oe(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ii(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function yo(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(xt(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:oe(c)}}function hd(i,a){var c=oe(a.value),f=oe(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function oi(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function lc(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ea(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?lc(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ai,fd=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,g){MSApp.execUnsafeLocalFunction(function(){return i(a,c,f,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(ai=ai||document.createElement("div"),ai.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ai.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function vo(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pd=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(i){pd.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),li[a]=li[i]})});function ci(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||li.hasOwnProperty(i)&&li[i]?(""+a).trim():a+"px"}function Sa(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=ci(c,a[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,g):i[c]=g}}var cc=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mr(i,a){if(a){if(cc[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Ta(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function xa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vs=null,_s=null,At=null;function uc(i){if(i=Vc(i)){if(typeof vs!="function")throw Error(t(280));var a=i.stateNode;a&&(a=zd(a),vs(i.stateNode,i.type,a))}}function di(i){_s?At?At.push(i):At=[i]:_s=i}function hi(){if(_s){var i=_s,a=At;if(At=_s=null,uc(i),a)for(i=0;i<a.length;i++)uc(a[i])}}function md(i,a){return i(a)}function gd(){}var Vr=!1;function yd(i,a,c){if(Vr)return i(a,c);Vr=!0;try{return md(i,a,c)}finally{Vr=!1,(_s!==null||At!==null)&&(gd(),hi())}}function _o(i,a){var c=i.stateNode;if(c===null)return null;var f=zd(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var fi=!1;if(u)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){fi=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{fi=!1}function vd(i,a,c,f,g,_,C,L,U){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(le){this.onError(le)}}var ws=!1,jr=null,Ia=!1,er=null,_d={onError:function(i){ws=!0,jr=i}};function wd(i,a,c,f,g,_,C,L,U){ws=!1,jr=null,vd.apply(_d,arguments)}function dc(i,a,c,f,g,_,C,L,U){if(wd.apply(this,arguments),ws){if(ws){var Y=jr;ws=!1,jr=null}else throw Error(t(198));Ia||(Ia=!0,er=Y)}}function gr(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function hc(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Ed(i){if(gr(i)!==i)throw Error(t(188))}function Sd(i){var a=i.alternate;if(!a){if(a=gr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return Ed(g),i;if(_===f)return Ed(g),a;_=_.sibling}throw Error(t(188))}if(c.return!==f.return)c=g,f=_;else{for(var C=!1,L=g.child;L;){if(L===c){C=!0,c=g,f=_;break}if(L===f){C=!0,f=g,c=_;break}L=L.sibling}if(!C){for(L=_.child;L;){if(L===c){C=!0,c=_,f=g;break}if(L===f){C=!0,f=_,c=g;break}L=L.sibling}if(!C)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:a}function Td(i){return i=Sd(i),i!==null?wo(i):null}function wo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=wo(i);if(a!==null)return a;i=i.sibling}return null}var fc=e.unstable_scheduleCallback,Ca=e.unstable_cancelCallback,Eo=e.unstable_shouldYield,Es=e.unstable_requestPaint,mt=e.unstable_now,um=e.unstable_getCurrentPriorityLevel,Ra=e.unstable_ImmediatePriority,pc=e.unstable_UserBlockingPriority,So=e.unstable_NormalPriority,mc=e.unstable_LowPriority,Aa=e.unstable_IdlePriority,To=null,Fn=null;function xd(i){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(To,i,void 0,(i.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:xo,Fr=Math.log,tr=Math.LN2;function xo(i){return i>>>=0,i===0?32:31-(Fr(i)/tr|0)|0}var Ur=64,mi=4194304;function it(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ss(i,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,_=i.pingedLanes,C=c&268435455;if(C!==0){var L=C&~g;L!==0?f=it(L):(_&=C,_!==0&&(f=it(_)))}else C=c&~g,C!==0?f=it(C):_!==0&&(f=it(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,_=a&-a,g>=_||g===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)c=31-Un(a),g=1<<c,f|=i[c],a&=~g;return f}function Io(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Co(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes;0<_;){var C=31-Un(_),L=1<<C,U=g[C];U===-1?((L&c)===0||(L&f)!==0)&&(g[C]=Io(L,a)):U<=a&&(i.expiredLanes|=L),_&=~L}}function gc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=Ur;return Ur<<=1,(Ur&4194240)===0&&(Ur=64),i}function vc(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ro(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Un(a),i[a]=c}function dm(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-Un(c),_=1<<g;a[g]=0,f[g]=-1,i[g]=-1,c&=~_}}function _c(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Un(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}var Xe=0;function zr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var wc,ba,Ec,Sc,Tc,Br=!1,Pa=[],$r=null,Wr=null,tn=null,Ao=new Map,Ts=new Map,zn=[],Id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gi(i,a){switch(i){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":Ao.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ts.delete(a.pointerId)}}function yr(i,a,c,f,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},a!==null&&(a=Vc(a),a!==null&&ba(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function Cd(i,a,c,f,g){switch(a){case"focusin":return $r=yr($r,i,a,c,f,g),!0;case"dragenter":return Wr=yr(Wr,i,a,c,f,g),!0;case"mouseover":return tn=yr(tn,i,a,c,f,g),!0;case"pointerover":var _=g.pointerId;return Ao.set(_,yr(Ao.get(_)||null,i,a,c,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Ts.set(_,yr(Ts.get(_)||null,i,a,c,f,g)),!0}return!1}function ka(i){var a=No(i.target);if(a!==null){var c=gr(a);if(c!==null){if(a=c.tag,a===13){if(a=hc(c),a!==null){i.blockedOn=a,Tc(i.priority,function(){Ec(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function dt(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Na(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);ui=f,c.target.dispatchEvent(f),ui=null}else return a=Vc(c),a!==null&&ba(a),i.blockedOn=c,!1;a.shift()}return!0}function Rd(i,a,c){dt(i)&&c.delete(a)}function hm(){Br=!1,$r!==null&&dt($r)&&($r=null),Wr!==null&&dt(Wr)&&(Wr=null),tn!==null&&dt(tn)&&(tn=null),Ao.forEach(Rd),Ts.forEach(Rd)}function yi(i,a){i.blockedOn===a&&(i.blockedOn=null,Br||(Br=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hm)))}function vi(i){function a(g){return yi(g,i)}if(0<Pa.length){yi(Pa[0],i);for(var c=1;c<Pa.length;c++){var f=Pa[c];f.blockedOn===i&&(f.blockedOn=null)}}for($r!==null&&yi($r,i),Wr!==null&&yi(Wr,i),tn!==null&&yi(tn,i),Ao.forEach(a),Ts.forEach(a),c=0;c<zn.length;c++)f=zn[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<zn.length&&(c=zn[0],c.blockedOn===null);)ka(c),c.blockedOn===null&&zn.shift()}var xs=G.ReactCurrentBatchConfig,Is=!0;function Hr(i,a,c,f){var g=Xe,_=xs.transition;xs.transition=null;try{Xe=1,xc(i,a,c,f)}finally{Xe=g,xs.transition=_}}function Ad(i,a,c,f){var g=Xe,_=xs.transition;xs.transition=null;try{Xe=4,xc(i,a,c,f)}finally{Xe=g,xs.transition=_}}function xc(i,a,c,f){if(Is){var g=Na(i,a,c,f);if(g===null)Tm(i,a,f,Gr,c),gi(i,f);else if(Cd(g,i,a,c,f))f.stopPropagation();else if(gi(i,f),a&4&&-1<Id.indexOf(i)){for(;g!==null;){var _=Vc(g);if(_!==null&&wc(_),_=Na(i,a,c,f),_===null&&Tm(i,a,f,Gr,c),_===g)break;g=_}g!==null&&f.stopPropagation()}else Tm(i,a,f,null,c)}}var Gr=null;function Na(i,a,c,f){if(Gr=null,i=xa(f),i=No(i),i!==null)if(a=gr(i),a===null)i=null;else if(c=a.tag,c===13){if(i=hc(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Gr=i,null}function Da(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(um()){case Ra:return 1;case pc:return 4;case So:case mc:return 16;case Aa:return 536870912;default:return 16}default:return 16}}var Bn=null,Oa=null,Cs=null;function bd(){if(Cs)return Cs;var i,a=Oa,c=a.length,f,g="value"in Bn?Bn.value:Bn.textContent,_=g.length;for(i=0;i<c&&a[i]===g[i];i++);var C=c-i;for(f=1;f<=C&&a[c-f]===g[_-f];f++);return Cs=g.slice(i,1<f?1-f:void 0)}function bo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function qr(){return!0}function Ic(){return!1}function un(i){function a(c,f,g,_,C){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?qr:Ic,this.isPropagationStopped=Ic,this}return ue(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),a}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=un(Kr),_i=ue({},Kr,{view:0,detail:0}),Ma=un(_i),La,Va,$n,ko=ue({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ze,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==$n&&($n&&i.type==="mousemove"?(La=i.screenX-$n.screenX,Va=i.screenY-$n.screenY):Va=La=0,$n=i),La)},movementY:function(i){return"movementY"in i?i.movementY:Va}}),Cc=un(ko),Pd=ue({},ko,{dataTransfer:0}),kd=un(Pd),ja=ue({},_i,{relatedTarget:0}),nn=un(ja),Nd=ue({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Dd=un(Nd),wi=ue({},Kr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=un(wi),w=ue({},Kr,{data:0}),T=un(w),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=X[i])?!!a[i]:!1}function ze(){return ge}var Dt=ue({},_i,{key:function(i){if(i.key){var a=k[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=bo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?K[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ze,charCode:function(i){return i.type==="keypress"?bo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?bo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ct=un(Dt),Vt=ue({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wn=un(Vt),Rs=ue({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ze}),Qr=un(Rs),Yr=ue({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fa=un(Yr),Rc=ue({},ko,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ik=un(Rc),Ck=[9,13,27,32],fm=u&&"CompositionEvent"in window,Ac=null;u&&"documentMode"in document&&(Ac=document.documentMode);var Rk=u&&"TextEvent"in window&&!Ac,Cw=u&&(!fm||Ac&&8<Ac&&11>=Ac),Rw=" ",Aw=!1;function bw(i,a){switch(i){case"keyup":return Ck.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ua=!1;function Ak(i,a){switch(i){case"compositionend":return Pw(a);case"keypress":return a.which!==32?null:(Aw=!0,Rw);case"textInput":return i=a.data,i===Rw&&Aw?null:i;default:return null}}function bk(i,a){if(Ua)return i==="compositionend"||!fm&&bw(i,a)?(i=bd(),Cs=Oa=Bn=null,Ua=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Cw&&a.locale!=="ko"?null:a.data;default:return null}}var Pk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kw(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Pk[i.type]:a==="textarea"}function Nw(i,a,c,f){di(f),a=jd(a,"onChange"),0<a.length&&(c=new Po("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var bc=null,Pc=null;function kk(i){Yw(i,0)}function Od(i){var a=Ha(i);if($e(a))return i}function Nk(i,a){if(i==="change")return a}var Dw=!1;if(u){var pm;if(u){var mm="oninput"in document;if(!mm){var Ow=document.createElement("div");Ow.setAttribute("oninput","return;"),mm=typeof Ow.oninput=="function"}pm=mm}else pm=!1;Dw=pm&&(!document.documentMode||9<document.documentMode)}function Mw(){bc&&(bc.detachEvent("onpropertychange",Lw),Pc=bc=null)}function Lw(i){if(i.propertyName==="value"&&Od(Pc)){var a=[];Nw(a,Pc,i,xa(i)),yd(kk,a)}}function Dk(i,a,c){i==="focusin"?(Mw(),bc=a,Pc=c,bc.attachEvent("onpropertychange",Lw)):i==="focusout"&&Mw()}function Ok(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Od(Pc)}function Mk(i,a){if(i==="click")return Od(a)}function Lk(i,a){if(i==="input"||i==="change")return Od(a)}function Vk(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var vr=typeof Object.is=="function"?Object.is:Vk;function kc(i,a){if(vr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!d.call(a,g)||!vr(i[g],a[g]))return!1}return!0}function Vw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function jw(i,a){var c=Vw(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Vw(c)}}function Fw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Fw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Uw(){for(var i=window,a=Ue();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=Ue(i.document)}return a}function gm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function jk(i){var a=Uw(),c=i.focusedElem,f=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&Fw(c.ownerDocument.documentElement,c)){if(f!==null&&gm(c)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!i.extend&&_>f&&(g=f,f=_,_=g),g=jw(c,_);var C=jw(c,f);g&&C&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),_>f?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Fk=u&&"documentMode"in document&&11>=document.documentMode,za=null,ym=null,Nc=null,vm=!1;function zw(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;vm||za==null||za!==Ue(f)||(f=za,"selectionStart"in f&&gm(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Nc&&kc(Nc,f)||(Nc=f,f=jd(ym,"onSelect"),0<f.length&&(a=new Po("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=za)))}function Md(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var Ba={animationend:Md("Animation","AnimationEnd"),animationiteration:Md("Animation","AnimationIteration"),animationstart:Md("Animation","AnimationStart"),transitionend:Md("Transition","TransitionEnd")},_m={},Bw={};u&&(Bw=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Ld(i){if(_m[i])return _m[i];if(!Ba[i])return i;var a=Ba[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in Bw)return _m[i]=a[c];return i}var $w=Ld("animationend"),Ww=Ld("animationiteration"),Hw=Ld("animationstart"),Gw=Ld("transitionend"),qw=new Map,Kw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(i,a){qw.set(i,a),o(a,[i])}for(var wm=0;wm<Kw.length;wm++){var Em=Kw[wm],Uk=Em.toLowerCase(),zk=Em[0].toUpperCase()+Em.slice(1);Ei(Uk,"on"+zk)}Ei($w,"onAnimationEnd"),Ei(Ww,"onAnimationIteration"),Ei(Hw,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Gw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dc));function Qw(i,a,c){var f=i.type||"unknown-event";i.currentTarget=c,dc(f,a,void 0,i),i.currentTarget=null}function Yw(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var C=f.length-1;0<=C;C--){var L=f[C],U=L.instance,Y=L.currentTarget;if(L=L.listener,U!==_&&g.isPropagationStopped())break e;Qw(g,L,Y),_=U}else for(C=0;C<f.length;C++){if(L=f[C],U=L.instance,Y=L.currentTarget,L=L.listener,U!==_&&g.isPropagationStopped())break e;Qw(g,L,Y),_=U}}}if(Ia)throw i=er,Ia=!1,er=null,i}function gt(i,a){var c=a[bm];c===void 0&&(c=a[bm]=new Set);var f=i+"__bubble";c.has(f)||(Xw(a,i,2,!1),c.add(f))}function Sm(i,a,c){var f=0;a&&(f|=4),Xw(c,i,f,a)}var Vd="_reactListening"+Math.random().toString(36).slice(2);function Oc(i){if(!i[Vd]){i[Vd]=!0,r.forEach(function(c){c!=="selectionchange"&&(Bk.has(c)||Sm(c,!1,i),Sm(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Vd]||(a[Vd]=!0,Sm("selectionchange",!1,a))}}function Xw(i,a,c,f){switch(Da(a)){case 1:var g=Hr;break;case 4:g=Ad;break;default:g=xc}c=g.bind(null,a,c,i),g=void 0,!fi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function Tm(i,a,c,f,g){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var L=f.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(C===4)for(C=f.return;C!==null;){var U=C.tag;if((U===3||U===4)&&(U=C.stateNode.containerInfo,U===g||U.nodeType===8&&U.parentNode===g))return;C=C.return}for(;L!==null;){if(C=No(L),C===null)return;if(U=C.tag,U===5||U===6){f=_=C;continue e}L=L.parentNode}}f=f.return}yd(function(){var Y=_,le=xa(c),de=[];e:{var ae=qw.get(i);if(ae!==void 0){var Se=Po,Ce=i;switch(i){case"keypress":if(bo(c)===0)break e;case"keydown":case"keyup":Se=ct;break;case"focusin":Ce="focus",Se=nn;break;case"focusout":Ce="blur",Se=nn;break;case"beforeblur":case"afterblur":Se=nn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=Qr;break;case $w:case Ww:case Hw:Se=Dd;break;case Gw:Se=Fa;break;case"scroll":Se=Ma;break;case"wheel":Se=Ik;break;case"copy":case"cut":case"paste":Se=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Wn}var Pe=(a&4)!==0,Ot=!Pe&&i==="scroll",q=Pe?ae!==null?ae+"Capture":null:ae;Pe=[];for(var $=Y,Q;$!==null;){Q=$;var fe=Q.stateNode;if(Q.tag===5&&fe!==null&&(Q=fe,q!==null&&(fe=_o($,q),fe!=null&&Pe.push(Mc($,fe,Q)))),Ot)break;$=$.return}0<Pe.length&&(ae=new Se(ae,Ce,null,c,le),de.push({event:ae,listeners:Pe}))}}if((a&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",Se=i==="mouseout"||i==="pointerout",ae&&c!==ui&&(Ce=c.relatedTarget||c.fromElement)&&(No(Ce)||Ce[As]))break e;if((Se||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,Se?(Ce=c.relatedTarget||c.toElement,Se=Y,Ce=Ce?No(Ce):null,Ce!==null&&(Ot=gr(Ce),Ce!==Ot||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Se=null,Ce=Y),Se!==Ce)){if(Pe=Cc,fe="onMouseLeave",q="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=Wn,fe="onPointerLeave",q="onPointerEnter",$="pointer"),Ot=Se==null?ae:Ha(Se),Q=Ce==null?ae:Ha(Ce),ae=new Pe(fe,$+"leave",Se,c,le),ae.target=Ot,ae.relatedTarget=Q,fe=null,No(le)===Y&&(Pe=new Pe(q,$+"enter",Ce,c,le),Pe.target=Q,Pe.relatedTarget=Ot,fe=Pe),Ot=fe,Se&&Ce)t:{for(Pe=Se,q=Ce,$=0,Q=Pe;Q;Q=$a(Q))$++;for(Q=0,fe=q;fe;fe=$a(fe))Q++;for(;0<$-Q;)Pe=$a(Pe),$--;for(;0<Q-$;)q=$a(q),Q--;for(;$--;){if(Pe===q||q!==null&&Pe===q.alternate)break t;Pe=$a(Pe),q=$a(q)}Pe=null}else Pe=null;Se!==null&&Jw(de,ae,Se,Pe,!1),Ce!==null&&Ot!==null&&Jw(de,Ot,Ce,Pe,!0)}}e:{if(ae=Y?Ha(Y):window,Se=ae.nodeName&&ae.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ae.type==="file")var ke=Nk;else if(kw(ae))if(Dw)ke=Lk;else{ke=Ok;var De=Dk}else(Se=ae.nodeName)&&Se.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(ke=Mk);if(ke&&(ke=ke(i,Y))){Nw(de,ke,c,le);break e}De&&De(i,ae,Y),i==="focusout"&&(De=ae._wrapperState)&&De.controlled&&ae.type==="number"&&Tt(ae,"number",ae.value)}switch(De=Y?Ha(Y):window,i){case"focusin":(kw(De)||De.contentEditable==="true")&&(za=De,ym=Y,Nc=null);break;case"focusout":Nc=ym=za=null;break;case"mousedown":vm=!0;break;case"contextmenu":case"mouseup":case"dragend":vm=!1,zw(de,c,le);break;case"selectionchange":if(Fk)break;case"keydown":case"keyup":zw(de,c,le)}var Oe;if(fm)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ua?bw(i,c)&&(Ve="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(Cw&&c.locale!=="ko"&&(Ua||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ua&&(Oe=bd()):(Bn=le,Oa="value"in Bn?Bn.value:Bn.textContent,Ua=!0)),De=jd(Y,Ve),0<De.length&&(Ve=new T(Ve,i,null,c,le),de.push({event:Ve,listeners:De}),Oe?Ve.data=Oe:(Oe=Pw(c),Oe!==null&&(Ve.data=Oe)))),(Oe=Rk?Ak(i,c):bk(i,c))&&(Y=jd(Y,"onBeforeInput"),0<Y.length&&(le=new T("onBeforeInput","beforeinput",null,c,le),de.push({event:le,listeners:Y}),le.data=Oe))}Yw(de,a)})}function Mc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function jd(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=_o(i,c),_!=null&&f.unshift(Mc(i,_,g)),_=_o(i,a),_!=null&&f.push(Mc(i,_,g))),i=i.return}return f}function $a(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Jw(i,a,c,f,g){for(var _=a._reactName,C=[];c!==null&&c!==f;){var L=c,U=L.alternate,Y=L.stateNode;if(U!==null&&U===f)break;L.tag===5&&Y!==null&&(L=Y,g?(U=_o(c,_),U!=null&&C.unshift(Mc(c,U,L))):g||(U=_o(c,_),U!=null&&C.push(Mc(c,U,L)))),c=c.return}C.length!==0&&i.push({event:a,listeners:C})}var $k=/\r\n?/g,Wk=/\u0000|\uFFFD/g;function Zw(i){return(typeof i=="string"?i:""+i).replace($k,`
`).replace(Wk,"")}function Fd(i,a,c){if(a=Zw(a),Zw(i)!==a&&c)throw Error(t(425))}function Ud(){}var xm=null,Im=null;function Cm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Rm=typeof setTimeout=="function"?setTimeout:void 0,Hk=typeof clearTimeout=="function"?clearTimeout:void 0,eE=typeof Promise=="function"?Promise:void 0,Gk=typeof queueMicrotask=="function"?queueMicrotask:typeof eE<"u"?function(i){return eE.resolve(null).then(i).catch(qk)}:Rm;function qk(i){setTimeout(function(){throw i})}function Am(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){i.removeChild(g),vi(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);vi(a)}function Si(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function tE(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Wa,Lc="__reactProps$"+Wa,As="__reactContainer$"+Wa,bm="__reactEvents$"+Wa,Kk="__reactListeners$"+Wa,Qk="__reactHandles$"+Wa;function No(i){var a=i[Xr];if(a)return a;for(var c=i.parentNode;c;){if(a=c[As]||c[Xr]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=tE(i);i!==null;){if(c=i[Xr])return c;i=tE(i)}return a}i=c,c=i.parentNode}return null}function Vc(i){return i=i[Xr]||i[As],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ha(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function zd(i){return i[Lc]||null}var Pm=[],Ga=-1;function Ti(i){return{current:i}}function yt(i){0>Ga||(i.current=Pm[Ga],Pm[Ga]=null,Ga--)}function ft(i,a){Ga++,Pm[Ga]=i.current,i.current=a}var xi={},dn=Ti(xi),Pn=Ti(!1),Do=xi;function qa(i,a){var c=i.type.contextTypes;if(!c)return xi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in c)g[_]=a[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function kn(i){return i=i.childContextTypes,i!=null}function Bd(){yt(Pn),yt(dn)}function nE(i,a,c){if(dn.current!==xi)throw Error(t(168));ft(dn,a),ft(Pn,c)}function rE(i,a,c){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(t(108,H(i)||"Unknown",g));return ue({},c,f)}function $d(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||xi,Do=dn.current,ft(dn,i),ft(Pn,Pn.current),!0}function sE(i,a,c){var f=i.stateNode;if(!f)throw Error(t(169));c?(i=rE(i,a,Do),f.__reactInternalMemoizedMergedChildContext=i,yt(Pn),yt(dn),ft(dn,i)):yt(Pn),ft(Pn,c)}var bs=null,Wd=!1,km=!1;function iE(i){bs===null?bs=[i]:bs.push(i)}function Yk(i){Wd=!0,iE(i)}function Ii(){if(!km&&bs!==null){km=!0;var i=0,a=Xe;try{var c=bs;for(Xe=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}bs=null,Wd=!1}catch(g){throw bs!==null&&(bs=bs.slice(i+1)),fc(Ra,Ii),g}finally{Xe=a,km=!1}}return null}var Ka=[],Qa=0,Hd=null,Gd=0,nr=[],rr=0,Oo=null,Ps=1,ks="";function Mo(i,a){Ka[Qa++]=Gd,Ka[Qa++]=Hd,Hd=i,Gd=a}function oE(i,a,c){nr[rr++]=Ps,nr[rr++]=ks,nr[rr++]=Oo,Oo=i;var f=Ps;i=ks;var g=32-Un(f)-1;f&=~(1<<g),c+=1;var _=32-Un(a)+g;if(30<_){var C=g-g%5;_=(f&(1<<C)-1).toString(32),f>>=C,g-=C,Ps=1<<32-Un(a)+g|c<<g|f,ks=_+i}else Ps=1<<_|c<<g|f,ks=i}function Nm(i){i.return!==null&&(Mo(i,1),oE(i,1,0))}function Dm(i){for(;i===Hd;)Hd=Ka[--Qa],Ka[Qa]=null,Gd=Ka[--Qa],Ka[Qa]=null;for(;i===Oo;)Oo=nr[--rr],nr[rr]=null,ks=nr[--rr],nr[rr]=null,Ps=nr[--rr],nr[rr]=null}var Hn=null,Gn=null,St=!1,_r=null;function aE(i,a){var c=ar(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function lE(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Hn=i,Gn=Si(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Hn=i,Gn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Oo!==null?{id:Ps,overflow:ks}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=ar(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,Hn=i,Gn=null,!0):!1;default:return!1}}function Om(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Mm(i){if(St){var a=Gn;if(a){var c=a;if(!lE(i,a)){if(Om(i))throw Error(t(418));a=Si(c.nextSibling);var f=Hn;a&&lE(i,a)?aE(f,c):(i.flags=i.flags&-4097|2,St=!1,Hn=i)}}else{if(Om(i))throw Error(t(418));i.flags=i.flags&-4097|2,St=!1,Hn=i}}}function cE(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Hn=i}function qd(i){if(i!==Hn)return!1;if(!St)return cE(i),St=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Cm(i.type,i.memoizedProps)),a&&(a=Gn)){if(Om(i))throw uE(),Error(t(418));for(;a;)aE(i,a),a=Si(a.nextSibling)}if(cE(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Gn=Si(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Gn=null}}else Gn=Hn?Si(i.stateNode.nextSibling):null;return!0}function uE(){for(var i=Gn;i;)i=Si(i.nextSibling)}function Ya(){Gn=Hn=null,St=!1}function Lm(i){_r===null?_r=[i]:_r.push(i)}var Xk=G.ReactCurrentBatchConfig;function jc(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,i));var g=f,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var L=g.refs;C===null?delete L[_]:L[_]=C},a._stringRef=_,a)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function Kd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function dE(i){var a=i._init;return a(i._payload)}function hE(i){function a(q,$){if(i){var Q=q.deletions;Q===null?(q.deletions=[$],q.flags|=16):Q.push($)}}function c(q,$){if(!i)return null;for(;$!==null;)a(q,$),$=$.sibling;return null}function f(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function g(q,$){return q=Di(q,$),q.index=0,q.sibling=null,q}function _(q,$,Q){return q.index=Q,i?(Q=q.alternate,Q!==null?(Q=Q.index,Q<$?(q.flags|=2,$):Q):(q.flags|=2,$)):(q.flags|=1048576,$)}function C(q){return i&&q.alternate===null&&(q.flags|=2),q}function L(q,$,Q,fe){return $===null||$.tag!==6?($=Rg(Q,q.mode,fe),$.return=q,$):($=g($,Q),$.return=q,$)}function U(q,$,Q,fe){var ke=Q.type;return ke===P?le(q,$,Q.props.children,fe,Q.key):$!==null&&($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===pe&&dE(ke)===$.type)?(fe=g($,Q.props),fe.ref=jc(q,$,Q),fe.return=q,fe):(fe=vh(Q.type,Q.key,Q.props,null,q.mode,fe),fe.ref=jc(q,$,Q),fe.return=q,fe)}function Y(q,$,Q,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=Ag(Q,q.mode,fe),$.return=q,$):($=g($,Q.children||[]),$.return=q,$)}function le(q,$,Q,fe,ke){return $===null||$.tag!==7?($=$o(Q,q.mode,fe,ke),$.return=q,$):($=g($,Q),$.return=q,$)}function de(q,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Rg(""+$,q.mode,Q),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case J:return Q=vh($.type,$.key,$.props,null,q.mode,Q),Q.ref=jc(q,null,$),Q.return=q,Q;case Z:return $=Ag($,q.mode,Q),$.return=q,$;case pe:var fe=$._init;return de(q,fe($._payload),Q)}if(xt($)||ee($))return $=$o($,q.mode,Q,null),$.return=q,$;Kd(q,$)}return null}function ae(q,$,Q,fe){var ke=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return ke!==null?null:L(q,$,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case J:return Q.key===ke?U(q,$,Q,fe):null;case Z:return Q.key===ke?Y(q,$,Q,fe):null;case pe:return ke=Q._init,ae(q,$,ke(Q._payload),fe)}if(xt(Q)||ee(Q))return ke!==null?null:le(q,$,Q,fe,null);Kd(q,Q)}return null}function Se(q,$,Q,fe,ke){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return q=q.get(Q)||null,L($,q,""+fe,ke);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case J:return q=q.get(fe.key===null?Q:fe.key)||null,U($,q,fe,ke);case Z:return q=q.get(fe.key===null?Q:fe.key)||null,Y($,q,fe,ke);case pe:var De=fe._init;return Se(q,$,Q,De(fe._payload),ke)}if(xt(fe)||ee(fe))return q=q.get(Q)||null,le($,q,fe,ke,null);Kd($,fe)}return null}function Ce(q,$,Q,fe){for(var ke=null,De=null,Oe=$,Ve=$=0,Qt=null;Oe!==null&&Ve<Q.length;Ve++){Oe.index>Ve?(Qt=Oe,Oe=null):Qt=Oe.sibling;var st=ae(q,Oe,Q[Ve],fe);if(st===null){Oe===null&&(Oe=Qt);break}i&&Oe&&st.alternate===null&&a(q,Oe),$=_(st,$,Ve),De===null?ke=st:De.sibling=st,De=st,Oe=Qt}if(Ve===Q.length)return c(q,Oe),St&&Mo(q,Ve),ke;if(Oe===null){for(;Ve<Q.length;Ve++)Oe=de(q,Q[Ve],fe),Oe!==null&&($=_(Oe,$,Ve),De===null?ke=Oe:De.sibling=Oe,De=Oe);return St&&Mo(q,Ve),ke}for(Oe=f(q,Oe);Ve<Q.length;Ve++)Qt=Se(Oe,q,Ve,Q[Ve],fe),Qt!==null&&(i&&Qt.alternate!==null&&Oe.delete(Qt.key===null?Ve:Qt.key),$=_(Qt,$,Ve),De===null?ke=Qt:De.sibling=Qt,De=Qt);return i&&Oe.forEach(function(Oi){return a(q,Oi)}),St&&Mo(q,Ve),ke}function Pe(q,$,Q,fe){var ke=ee(Q);if(typeof ke!="function")throw Error(t(150));if(Q=ke.call(Q),Q==null)throw Error(t(151));for(var De=ke=null,Oe=$,Ve=$=0,Qt=null,st=Q.next();Oe!==null&&!st.done;Ve++,st=Q.next()){Oe.index>Ve?(Qt=Oe,Oe=null):Qt=Oe.sibling;var Oi=ae(q,Oe,st.value,fe);if(Oi===null){Oe===null&&(Oe=Qt);break}i&&Oe&&Oi.alternate===null&&a(q,Oe),$=_(Oi,$,Ve),De===null?ke=Oi:De.sibling=Oi,De=Oi,Oe=Qt}if(st.done)return c(q,Oe),St&&Mo(q,Ve),ke;if(Oe===null){for(;!st.done;Ve++,st=Q.next())st=de(q,st.value,fe),st!==null&&($=_(st,$,Ve),De===null?ke=st:De.sibling=st,De=st);return St&&Mo(q,Ve),ke}for(Oe=f(q,Oe);!st.done;Ve++,st=Q.next())st=Se(Oe,q,Ve,st.value,fe),st!==null&&(i&&st.alternate!==null&&Oe.delete(st.key===null?Ve:st.key),$=_(st,$,Ve),De===null?ke=st:De.sibling=st,De=st);return i&&Oe.forEach(function(PN){return a(q,PN)}),St&&Mo(q,Ve),ke}function Ot(q,$,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===P&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case J:e:{for(var ke=Q.key,De=$;De!==null;){if(De.key===ke){if(ke=Q.type,ke===P){if(De.tag===7){c(q,De.sibling),$=g(De,Q.props.children),$.return=q,q=$;break e}}else if(De.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===pe&&dE(ke)===De.type){c(q,De.sibling),$=g(De,Q.props),$.ref=jc(q,De,Q),$.return=q,q=$;break e}c(q,De);break}else a(q,De);De=De.sibling}Q.type===P?($=$o(Q.props.children,q.mode,fe,Q.key),$.return=q,q=$):(fe=vh(Q.type,Q.key,Q.props,null,q.mode,fe),fe.ref=jc(q,$,Q),fe.return=q,q=fe)}return C(q);case Z:e:{for(De=Q.key;$!==null;){if($.key===De)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){c(q,$.sibling),$=g($,Q.children||[]),$.return=q,q=$;break e}else{c(q,$);break}else a(q,$);$=$.sibling}$=Ag(Q,q.mode,fe),$.return=q,q=$}return C(q);case pe:return De=Q._init,Ot(q,$,De(Q._payload),fe)}if(xt(Q))return Ce(q,$,Q,fe);if(ee(Q))return Pe(q,$,Q,fe);Kd(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,$!==null&&$.tag===6?(c(q,$.sibling),$=g($,Q),$.return=q,q=$):(c(q,$),$=Rg(Q,q.mode,fe),$.return=q,q=$),C(q)):c(q,$)}return Ot}var Xa=hE(!0),fE=hE(!1),Qd=Ti(null),Yd=null,Ja=null,Vm=null;function jm(){Vm=Ja=Yd=null}function Fm(i){var a=Qd.current;yt(Qd),i._currentValue=a}function Um(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function Za(i,a){Yd=i,Vm=Ja=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Nn=!0),i.firstContext=null)}function sr(i){var a=i._currentValue;if(Vm!==i)if(i={context:i,memoizedValue:a,next:null},Ja===null){if(Yd===null)throw Error(t(308));Ja=i,Yd.dependencies={lanes:0,firstContext:i}}else Ja=Ja.next=i;return a}var Lo=null;function zm(i){Lo===null?Lo=[i]:Lo.push(i)}function pE(i,a,c,f){var g=a.interleaved;return g===null?(c.next=c,zm(a)):(c.next=g.next,g.next=c),a.interleaved=c,Ns(i,f)}function Ns(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Ci=!1;function Bm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mE(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ds(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Ri(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(nt&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,Ns(i,c)}return g=f.interleaved,g===null?(a.next=a,zm(f)):(a.next=g.next,g.next=a),f.interleaved=a,Ns(i,c)}function Xd(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,_c(i,c)}}function gE(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var C={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?g=_=C:_=_.next=C,c=c.next}while(c!==null);_===null?g=_=a:_=_.next=a}else g=_=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function Jd(i,a,c,f){var g=i.updateQueue;Ci=!1;var _=g.firstBaseUpdate,C=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var U=L,Y=U.next;U.next=null,C===null?_=Y:C.next=Y,C=U;var le=i.alternate;le!==null&&(le=le.updateQueue,L=le.lastBaseUpdate,L!==C&&(L===null?le.firstBaseUpdate=Y:L.next=Y,le.lastBaseUpdate=U))}if(_!==null){var de=g.baseState;C=0,le=Y=U=null,L=_;do{var ae=L.lane,Se=L.eventTime;if((f&ae)===ae){le!==null&&(le=le.next={eventTime:Se,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Ce=i,Pe=L;switch(ae=a,Se=c,Pe.tag){case 1:if(Ce=Pe.payload,typeof Ce=="function"){de=Ce.call(Se,de,ae);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Pe.payload,ae=typeof Ce=="function"?Ce.call(Se,de,ae):Ce,ae==null)break e;de=ue({},de,ae);break e;case 2:Ci=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,ae=g.effects,ae===null?g.effects=[L]:ae.push(L))}else Se={eventTime:Se,lane:ae,tag:L.tag,payload:L.payload,callback:L.callback,next:null},le===null?(Y=le=Se,U=de):le=le.next=Se,C|=ae;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;ae=L,L=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(le===null&&(U=de),g.baseState=U,g.firstBaseUpdate=Y,g.lastBaseUpdate=le,a=g.shared.interleaved,a!==null){g=a;do C|=g.lane,g=g.next;while(g!==a)}else _===null&&(g.shared.lanes=0);Fo|=C,i.lanes=C,i.memoizedState=de}}function yE(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var Fc={},Jr=Ti(Fc),Uc=Ti(Fc),zc=Ti(Fc);function Vo(i){if(i===Fc)throw Error(t(174));return i}function $m(i,a){switch(ft(zc,a),ft(Uc,i),ft(Jr,Fc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ea(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Ea(a,i)}yt(Jr),ft(Jr,a)}function el(){yt(Jr),yt(Uc),yt(zc)}function vE(i){Vo(zc.current);var a=Vo(Jr.current),c=Ea(a,i.type);a!==c&&(ft(Uc,i),ft(Jr,c))}function Wm(i){Uc.current===i&&(yt(Jr),yt(Uc))}var It=Ti(0);function Zd(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Hm=[];function Gm(){for(var i=0;i<Hm.length;i++)Hm[i]._workInProgressVersionPrimary=null;Hm.length=0}var eh=G.ReactCurrentDispatcher,qm=G.ReactCurrentBatchConfig,jo=0,Ct=null,$t=null,qt=null,th=!1,Bc=!1,$c=0,Jk=0;function hn(){throw Error(t(321))}function Km(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!vr(i[c],a[c]))return!1;return!0}function Qm(i,a,c,f,g,_){if(jo=_,Ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,eh.current=i===null||i.memoizedState===null?nN:rN,i=c(f,g),Bc){_=0;do{if(Bc=!1,$c=0,25<=_)throw Error(t(301));_+=1,qt=$t=null,a.updateQueue=null,eh.current=sN,i=c(f,g)}while(Bc)}if(eh.current=sh,a=$t!==null&&$t.next!==null,jo=0,qt=$t=Ct=null,th=!1,a)throw Error(t(300));return i}function Ym(){var i=$c!==0;return $c=0,i}function Zr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Ct.memoizedState=qt=i:qt=qt.next=i,qt}function ir(){if($t===null){var i=Ct.alternate;i=i!==null?i.memoizedState:null}else i=$t.next;var a=qt===null?Ct.memoizedState:qt.next;if(a!==null)qt=a,$t=i;else{if(i===null)throw Error(t(310));$t=i,i={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},qt===null?Ct.memoizedState=qt=i:qt=qt.next=i}return qt}function Wc(i,a){return typeof a=="function"?a(i):a}function Xm(i){var a=ir(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=$t,g=f.baseQueue,_=c.pending;if(_!==null){if(g!==null){var C=g.next;g.next=_.next,_.next=C}f.baseQueue=g=_,c.pending=null}if(g!==null){_=g.next,f=f.baseState;var L=C=null,U=null,Y=_;do{var le=Y.lane;if((jo&le)===le)U!==null&&(U=U.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:i(f,Y.action);else{var de={lane:le,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};U===null?(L=U=de,C=f):U=U.next=de,Ct.lanes|=le,Fo|=le}Y=Y.next}while(Y!==null&&Y!==_);U===null?C=f:U.next=L,vr(f,a.memoizedState)||(Nn=!0),a.memoizedState=f,a.baseState=C,a.baseQueue=U,c.lastRenderedState=f}if(i=c.interleaved,i!==null){g=i;do _=g.lane,Ct.lanes|=_,Fo|=_,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Jm(i){var a=ir(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,_=a.memoizedState;if(g!==null){c.pending=null;var C=g=g.next;do _=i(_,C.action),C=C.next;while(C!==g);vr(_,a.memoizedState)||(Nn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),c.lastRenderedState=_}return[_,f]}function _E(){}function wE(i,a){var c=Ct,f=ir(),g=a(),_=!vr(f.memoizedState,g);if(_&&(f.memoizedState=g,Nn=!0),f=f.queue,Zm(TE.bind(null,c,f,i),[i]),f.getSnapshot!==a||_||qt!==null&&qt.memoizedState.tag&1){if(c.flags|=2048,Hc(9,SE.bind(null,c,f,g,a),void 0,null),Kt===null)throw Error(t(349));(jo&30)!==0||EE(c,a,g)}return g}function EE(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function SE(i,a,c,f){a.value=c,a.getSnapshot=f,xE(a)&&IE(i)}function TE(i,a,c){return c(function(){xE(a)&&IE(i)})}function xE(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!vr(i,c)}catch{return!0}}function IE(i){var a=Ns(i,1);a!==null&&Tr(a,i,1,-1)}function CE(i){var a=Zr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:i},a.queue=i,i=i.dispatch=tN.bind(null,Ct,i),[a.memoizedState,i]}function Hc(i,a,c,f){return i={tag:i,create:a,destroy:c,deps:f,next:null},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i)),i}function RE(){return ir().memoizedState}function nh(i,a,c,f){var g=Zr();Ct.flags|=i,g.memoizedState=Hc(1|a,c,void 0,f===void 0?null:f)}function rh(i,a,c,f){var g=ir();f=f===void 0?null:f;var _=void 0;if($t!==null){var C=$t.memoizedState;if(_=C.destroy,f!==null&&Km(f,C.deps)){g.memoizedState=Hc(a,c,_,f);return}}Ct.flags|=i,g.memoizedState=Hc(1|a,c,_,f)}function AE(i,a){return nh(8390656,8,i,a)}function Zm(i,a){return rh(2048,8,i,a)}function bE(i,a){return rh(4,2,i,a)}function PE(i,a){return rh(4,4,i,a)}function kE(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function NE(i,a,c){return c=c!=null?c.concat([i]):null,rh(4,4,kE.bind(null,a,i),c)}function eg(){}function DE(i,a){var c=ir();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Km(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function OE(i,a){var c=ir();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&Km(a,f[1])?f[0]:(i=i(),c.memoizedState=[i,a],i)}function ME(i,a,c){return(jo&21)===0?(i.baseState&&(i.baseState=!1,Nn=!0),i.memoizedState=c):(vr(c,a)||(c=yc(),Ct.lanes|=c,Fo|=c,i.baseState=!0),a)}function Zk(i,a){var c=Xe;Xe=c!==0&&4>c?c:4,i(!0);var f=qm.transition;qm.transition={};try{i(!1),a()}finally{Xe=c,qm.transition=f}}function LE(){return ir().memoizedState}function eN(i,a,c){var f=ki(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},VE(i))jE(a,c);else if(c=pE(i,a,c,f),c!==null){var g=Cn();Tr(c,i,f,g),FE(c,a,f)}}function tN(i,a,c){var f=ki(i),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(VE(i))jE(a,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,L=_(C,c);if(g.hasEagerState=!0,g.eagerState=L,vr(L,C)){var U=a.interleaved;U===null?(g.next=g,zm(a)):(g.next=U.next,U.next=g),a.interleaved=g;return}}catch{}finally{}c=pE(i,a,g,f),c!==null&&(g=Cn(),Tr(c,i,f,g),FE(c,a,f))}}function VE(i){var a=i.alternate;return i===Ct||a!==null&&a===Ct}function jE(i,a){Bc=th=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function FE(i,a,c){if((c&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,_c(i,c)}}var sh={readContext:sr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},nN={readContext:sr,useCallback:function(i,a){return Zr().memoizedState=[i,a===void 0?null:a],i},useContext:sr,useEffect:AE,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,nh(4194308,4,kE.bind(null,a,i),c)},useLayoutEffect:function(i,a){return nh(4194308,4,i,a)},useInsertionEffect:function(i,a){return nh(4,2,i,a)},useMemo:function(i,a){var c=Zr();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var f=Zr();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=eN.bind(null,Ct,i),[f.memoizedState,i]},useRef:function(i){var a=Zr();return i={current:i},a.memoizedState=i},useState:CE,useDebugValue:eg,useDeferredValue:function(i){return Zr().memoizedState=i},useTransition:function(){var i=CE(!1),a=i[0];return i=Zk.bind(null,i[1]),Zr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var f=Ct,g=Zr();if(St){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),Kt===null)throw Error(t(349));(jo&30)!==0||EE(f,a,c)}g.memoizedState=c;var _={value:c,getSnapshot:a};return g.queue=_,AE(TE.bind(null,f,_,i),[i]),f.flags|=2048,Hc(9,SE.bind(null,f,_,c,a),void 0,null),c},useId:function(){var i=Zr(),a=Kt.identifierPrefix;if(St){var c=ks,f=Ps;c=(f&~(1<<32-Un(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=$c++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=Jk++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},rN={readContext:sr,useCallback:DE,useContext:sr,useEffect:Zm,useImperativeHandle:NE,useInsertionEffect:bE,useLayoutEffect:PE,useMemo:OE,useReducer:Xm,useRef:RE,useState:function(){return Xm(Wc)},useDebugValue:eg,useDeferredValue:function(i){var a=ir();return ME(a,$t.memoizedState,i)},useTransition:function(){var i=Xm(Wc)[0],a=ir().memoizedState;return[i,a]},useMutableSource:_E,useSyncExternalStore:wE,useId:LE,unstable_isNewReconciler:!1},sN={readContext:sr,useCallback:DE,useContext:sr,useEffect:Zm,useImperativeHandle:NE,useInsertionEffect:bE,useLayoutEffect:PE,useMemo:OE,useReducer:Jm,useRef:RE,useState:function(){return Jm(Wc)},useDebugValue:eg,useDeferredValue:function(i){var a=ir();return $t===null?a.memoizedState=i:ME(a,$t.memoizedState,i)},useTransition:function(){var i=Jm(Wc)[0],a=ir().memoizedState;return[i,a]},useMutableSource:_E,useSyncExternalStore:wE,useId:LE,unstable_isNewReconciler:!1};function wr(i,a){if(i&&i.defaultProps){a=ue({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function tg(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:ue({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var ih={isMounted:function(i){return(i=i._reactInternals)?gr(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Cn(),g=ki(i),_=Ds(f,g);_.payload=a,c!=null&&(_.callback=c),a=Ri(i,_,g),a!==null&&(Tr(a,i,g,f),Xd(a,i,g))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Cn(),g=ki(i),_=Ds(f,g);_.tag=1,_.payload=a,c!=null&&(_.callback=c),a=Ri(i,_,g),a!==null&&(Tr(a,i,g,f),Xd(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Cn(),f=ki(i),g=Ds(c,f);g.tag=2,a!=null&&(g.callback=a),a=Ri(i,g,f),a!==null&&(Tr(a,i,f,c),Xd(a,i,f))}};function UE(i,a,c,f,g,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,C):a.prototype&&a.prototype.isPureReactComponent?!kc(c,f)||!kc(g,_):!0}function zE(i,a,c){var f=!1,g=xi,_=a.contextType;return typeof _=="object"&&_!==null?_=sr(_):(g=kn(a)?Do:dn.current,f=a.contextTypes,_=(f=f!=null)?qa(i,g):xi),a=new a(c,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ih,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=_),a}function BE(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&ih.enqueueReplaceState(a,a.state,null)}function ng(i,a,c,f){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},Bm(i);var _=a.contextType;typeof _=="object"&&_!==null?g.context=sr(_):(_=kn(a)?Do:dn.current,g.context=qa(i,_)),g.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(tg(i,a,_,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&ih.enqueueReplaceState(g,g.state,null),Jd(i,c,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function tl(i,a){try{var c="",f=a;do c+=he(f),f=f.return;while(f);var g=c}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:g,digest:null}}function rg(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function sg(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var iN=typeof WeakMap=="function"?WeakMap:Map;function $E(i,a,c){c=Ds(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){hh||(hh=!0,_g=f),sg(i,a)},c}function WE(i,a,c){c=Ds(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;c.payload=function(){return f(g)},c.callback=function(){sg(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){sg(i,a),typeof f!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),c}function HE(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new iN;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(g.add(c),i=_N.bind(null,i,a,c),a.then(i,i))}function GE(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function qE(i,a,c,f,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=Ds(-1,1),a.tag=2,Ri(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var oN=G.ReactCurrentOwner,Nn=!1;function In(i,a,c,f){a.child=i===null?fE(a,null,c,f):Xa(a,i.child,c,f)}function KE(i,a,c,f,g){c=c.render;var _=a.ref;return Za(a,g),f=Qm(i,a,c,f,_,g),c=Ym(),i!==null&&!Nn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,Os(i,a,g)):(St&&c&&Nm(a),a.flags|=1,In(i,a,f,g),a.child)}function QE(i,a,c,f,g){if(i===null){var _=c.type;return typeof _=="function"&&!Cg(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=_,YE(i,a,_,f,g)):(i=vh(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&g)===0){var C=_.memoizedProps;if(c=c.compare,c=c!==null?c:kc,c(C,f)&&i.ref===a.ref)return Os(i,a,g)}return a.flags|=1,i=Di(_,f),i.ref=a.ref,i.return=a,a.child=i}function YE(i,a,c,f,g){if(i!==null){var _=i.memoizedProps;if(kc(_,f)&&i.ref===a.ref)if(Nn=!1,a.pendingProps=f=_,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Nn=!0);else return a.lanes=i.lanes,Os(i,a,g)}return ig(i,a,c,f,g)}function XE(i,a,c){var f=a.pendingProps,g=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(rl,qn),qn|=c;else{if((c&1073741824)===0)return i=_!==null?_.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,ft(rl,qn),qn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:c,ft(rl,qn),qn|=f}else _!==null?(f=_.baseLanes|c,a.memoizedState=null):f=c,ft(rl,qn),qn|=f;return In(i,a,g,c),a.child}function JE(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function ig(i,a,c,f,g){var _=kn(c)?Do:dn.current;return _=qa(a,_),Za(a,g),c=Qm(i,a,c,f,_,g),f=Ym(),i!==null&&!Nn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,Os(i,a,g)):(St&&f&&Nm(a),a.flags|=1,In(i,a,c,g),a.child)}function ZE(i,a,c,f,g){if(kn(c)){var _=!0;$d(a)}else _=!1;if(Za(a,g),a.stateNode===null)ah(i,a),zE(a,c,f),ng(a,c,f,g),f=!0;else if(i===null){var C=a.stateNode,L=a.memoizedProps;C.props=L;var U=C.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=sr(Y):(Y=kn(c)?Do:dn.current,Y=qa(a,Y));var le=c.getDerivedStateFromProps,de=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==f||U!==Y)&&BE(a,C,f,Y),Ci=!1;var ae=a.memoizedState;C.state=ae,Jd(a,f,C,g),U=a.memoizedState,L!==f||ae!==U||Pn.current||Ci?(typeof le=="function"&&(tg(a,c,le,f),U=a.memoizedState),(L=Ci||UE(a,c,L,f,ae,U,Y))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=U),C.props=f,C.state=U,C.context=Y,f=L):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{C=a.stateNode,mE(i,a),L=a.memoizedProps,Y=a.type===a.elementType?L:wr(a.type,L),C.props=Y,de=a.pendingProps,ae=C.context,U=c.contextType,typeof U=="object"&&U!==null?U=sr(U):(U=kn(c)?Do:dn.current,U=qa(a,U));var Se=c.getDerivedStateFromProps;(le=typeof Se=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==de||ae!==U)&&BE(a,C,f,U),Ci=!1,ae=a.memoizedState,C.state=ae,Jd(a,f,C,g);var Ce=a.memoizedState;L!==de||ae!==Ce||Pn.current||Ci?(typeof Se=="function"&&(tg(a,c,Se,f),Ce=a.memoizedState),(Y=Ci||UE(a,c,Y,f,ae,Ce,U)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,Ce,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,Ce,U)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Ce),C.props=f,C.state=Ce,C.context=U,f=Y):(typeof C.componentDidUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),f=!1)}return og(i,a,c,f,_,g)}function og(i,a,c,f,g,_){JE(i,a);var C=(a.flags&128)!==0;if(!f&&!C)return g&&sE(a,c,!1),Os(i,a,_);f=a.stateNode,oN.current=a;var L=C&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&C?(a.child=Xa(a,i.child,null,_),a.child=Xa(a,null,L,_)):In(i,a,L,_),a.memoizedState=f.state,g&&sE(a,c,!0),a.child}function eS(i){var a=i.stateNode;a.pendingContext?nE(i,a.pendingContext,a.pendingContext!==a.context):a.context&&nE(i,a.context,!1),$m(i,a.containerInfo)}function tS(i,a,c,f,g){return Ya(),Lm(g),a.flags|=256,In(i,a,c,f),a.child}var ag={dehydrated:null,treeContext:null,retryLane:0};function lg(i){return{baseLanes:i,cachePool:null,transitions:null}}function nS(i,a,c){var f=a.pendingProps,g=It.current,_=!1,C=(a.flags&128)!==0,L;if((L=C)||(L=i!==null&&i.memoizedState===null?!1:(g&2)!==0),L?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),ft(It,g&1),i===null)return Mm(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=f.children,i=f.fallback,_?(f=a.mode,_=a.child,C={mode:"hidden",children:C},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=C):_=_h(C,f,0,null),i=$o(i,f,c,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=lg(c),a.memoizedState=ag,i):cg(a,C));if(g=i.memoizedState,g!==null&&(L=g.dehydrated,L!==null))return aN(i,a,C,f,L,g,c);if(_){_=f.fallback,C=a.mode,g=i.child,L=g.sibling;var U={mode:"hidden",children:f.children};return(C&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=U,a.deletions=null):(f=Di(g,U),f.subtreeFlags=g.subtreeFlags&14680064),L!==null?_=Di(L,_):(_=$o(_,C,c,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,C=i.child.memoizedState,C=C===null?lg(c):{baseLanes:C.baseLanes|c,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=i.childLanes&~c,a.memoizedState=ag,f}return _=i.child,i=_.sibling,f=Di(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=f,a.memoizedState=null,f}function cg(i,a){return a=_h({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function oh(i,a,c,f){return f!==null&&Lm(f),Xa(a,i.child,null,c),i=cg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function aN(i,a,c,f,g,_,C){if(c)return a.flags&256?(a.flags&=-257,f=rg(Error(t(422))),oh(i,a,C,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=f.fallback,g=a.mode,f=_h({mode:"visible",children:f.children},g,0,null),_=$o(_,g,C,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&Xa(a,i.child,null,C),a.child.memoizedState=lg(C),a.memoizedState=ag,_);if((a.mode&1)===0)return oh(i,a,C,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var L=f.dgst;return f=L,_=Error(t(419)),f=rg(_,f,void 0),oh(i,a,C,f)}if(L=(C&i.childLanes)!==0,Nn||L){if(f=Kt,f!==null){switch(C&-C){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|C))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Ns(i,g),Tr(f,i,g,-1))}return Ig(),f=rg(Error(t(421))),oh(i,a,C,f)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=wN.bind(null,i),g._reactRetry=a,null):(i=_.treeContext,Gn=Si(g.nextSibling),Hn=a,St=!0,_r=null,i!==null&&(nr[rr++]=Ps,nr[rr++]=ks,nr[rr++]=Oo,Ps=i.id,ks=i.overflow,Oo=a),a=cg(a,f.children),a.flags|=4096,a)}function rS(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),Um(i.return,a,c)}function ug(i,a,c,f,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=g)}function sS(i,a,c){var f=a.pendingProps,g=f.revealOrder,_=f.tail;if(In(i,a,f.children,c),f=It.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&rS(i,c,a);else if(i.tag===19)rS(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(ft(It,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&Zd(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),ug(a,!1,g,c,_);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Zd(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}ug(a,!0,c,null,_);break;case"together":ug(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ah(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Os(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Fo|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,c=Di(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Di(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function lN(i,a,c){switch(a.tag){case 3:eS(a),Ya();break;case 5:vE(a);break;case 1:kn(a.type)&&$d(a);break;case 4:$m(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;ft(Qd,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(ft(It,It.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?nS(i,a,c):(ft(It,It.current&1),i=Os(i,a,c),i!==null?i.sibling:null);ft(It,It.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(i.flags&128)!==0){if(f)return sS(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ft(It,It.current),f)break;return null;case 22:case 23:return a.lanes=0,XE(i,a,c)}return Os(i,a,c)}var iS,dg,oS,aS;iS=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},dg=function(){},oS=function(i,a,c,f){var g=i.memoizedProps;if(g!==f){i=a.stateNode,Vo(Jr.current);var _=null;switch(c){case"input":g=ht(i,g),f=ht(i,f),_=[];break;case"select":g=ue({},g,{value:void 0}),f=ue({},f,{value:void 0}),_=[];break;case"textarea":g=ii(i,g),f=ii(i,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Ud)}mr(c,f);var C;c=null;for(Y in g)if(!f.hasOwnProperty(Y)&&g.hasOwnProperty(Y)&&g[Y]!=null)if(Y==="style"){var L=g[Y];for(C in L)L.hasOwnProperty(C)&&(c||(c={}),c[C]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?_||(_=[]):(_=_||[]).push(Y,null));for(Y in f){var U=f[Y];if(L=g?.[Y],f.hasOwnProperty(Y)&&U!==L&&(U!=null||L!=null))if(Y==="style")if(L){for(C in L)!L.hasOwnProperty(C)||U&&U.hasOwnProperty(C)||(c||(c={}),c[C]="");for(C in U)U.hasOwnProperty(C)&&L[C]!==U[C]&&(c||(c={}),c[C]=U[C])}else c||(_||(_=[]),_.push(Y,c)),c=U;else Y==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,L=L?L.__html:void 0,U!=null&&L!==U&&(_=_||[]).push(Y,U)):Y==="children"?typeof U!="string"&&typeof U!="number"||(_=_||[]).push(Y,""+U):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(U!=null&&Y==="onScroll"&&gt("scroll",i),_||L===U||(_=[])):(_=_||[]).push(Y,U))}c&&(_=_||[]).push("style",c);var Y=_;(a.updateQueue=Y)&&(a.flags|=4)}},aS=function(i,a,c,f){c!==f&&(a.flags|=4)};function Gc(i,a){if(!St)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function fn(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function cN(i,a,c){var f=a.pendingProps;switch(Dm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(a),null;case 1:return kn(a.type)&&Bd(),fn(a),null;case 3:return f=a.stateNode,el(),yt(Pn),yt(dn),Gm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(qd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_r!==null&&(Sg(_r),_r=null))),dg(i,a),fn(a),null;case 5:Wm(a);var g=Vo(zc.current);if(c=a.type,i!==null&&a.stateNode!=null)oS(i,a,c,f,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return fn(a),null}if(i=Vo(Jr.current),qd(a)){f=a.stateNode,c=a.type;var _=a.memoizedProps;switch(f[Xr]=a,f[Lc]=_,i=(a.mode&1)!==0,c){case"dialog":gt("cancel",f),gt("close",f);break;case"iframe":case"object":case"embed":gt("load",f);break;case"video":case"audio":for(g=0;g<Dc.length;g++)gt(Dc[g],f);break;case"source":gt("error",f);break;case"img":case"image":case"link":gt("error",f),gt("load",f);break;case"details":gt("toggle",f);break;case"input":bn(f,_),gt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},gt("invalid",f);break;case"textarea":yo(f,_),gt("invalid",f)}mr(c,_),g=null;for(var C in _)if(_.hasOwnProperty(C)){var L=_[C];C==="children"?typeof L=="string"?f.textContent!==L&&(_.suppressHydrationWarning!==!0&&Fd(f.textContent,L,i),g=["children",L]):typeof L=="number"&&f.textContent!==""+L&&(_.suppressHydrationWarning!==!0&&Fd(f.textContent,L,i),g=["children",""+L]):s.hasOwnProperty(C)&&L!=null&&C==="onScroll"&&gt("scroll",f)}switch(c){case"input":je(f),Lt(f,_,!0);break;case"textarea":je(f),oi(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Ud)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{C=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=lc(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=C.createElement(c,{is:f.is}):(i=C.createElement(c),c==="select"&&(C=i,f.multiple?C.multiple=!0:f.size&&(C.size=f.size))):i=C.createElementNS(i,c),i[Xr]=a,i[Lc]=f,iS(i,a,!1,!1),a.stateNode=i;e:{switch(C=Ta(c,f),c){case"dialog":gt("cancel",i),gt("close",i),g=f;break;case"iframe":case"object":case"embed":gt("load",i),g=f;break;case"video":case"audio":for(g=0;g<Dc.length;g++)gt(Dc[g],i);g=f;break;case"source":gt("error",i),g=f;break;case"img":case"image":case"link":gt("error",i),gt("load",i),g=f;break;case"details":gt("toggle",i),g=f;break;case"input":bn(i,f),g=ht(i,f),gt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=ue({},f,{value:void 0}),gt("invalid",i);break;case"textarea":yo(i,f),g=ii(i,f),gt("invalid",i);break;default:g=f}mr(c,g),L=g;for(_ in L)if(L.hasOwnProperty(_)){var U=L[_];_==="style"?Sa(i,U):_==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&fd(i,U)):_==="children"?typeof U=="string"?(c!=="textarea"||U!=="")&&vo(i,U):typeof U=="number"&&vo(i,""+U):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?U!=null&&_==="onScroll"&&gt("scroll",i):U!=null&&z(i,_,U,C))}switch(c){case"input":je(i),Lt(i,f,!1);break;case"textarea":je(i),oi(i);break;case"option":f.value!=null&&i.setAttribute("value",""+oe(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?en(i,!!f.multiple,_,!1):f.defaultValue!=null&&en(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Ud)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return fn(a),null;case 6:if(i&&a.stateNode!=null)aS(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(c=Vo(zc.current),Vo(Jr.current),qd(a)){if(f=a.stateNode,c=a.memoizedProps,f[Xr]=a,(_=f.nodeValue!==c)&&(i=Hn,i!==null))switch(i.tag){case 3:Fd(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Fd(f.nodeValue,c,(i.mode&1)!==0)}_&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Xr]=a,a.stateNode=f}return fn(a),null;case 13:if(yt(It),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(St&&Gn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)uE(),Ya(),a.flags|=98560,_=!1;else if(_=qd(a),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Xr]=a}else Ya(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fn(a),_=!1}else _r!==null&&(Sg(_r),_r=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(It.current&1)!==0?Wt===0&&(Wt=3):Ig())),a.updateQueue!==null&&(a.flags|=4),fn(a),null);case 4:return el(),dg(i,a),i===null&&Oc(a.stateNode.containerInfo),fn(a),null;case 10:return Fm(a.type._context),fn(a),null;case 17:return kn(a.type)&&Bd(),fn(a),null;case 19:if(yt(It),_=a.memoizedState,_===null)return fn(a),null;if(f=(a.flags&128)!==0,C=_.rendering,C===null)if(f)Gc(_,!1);else{if(Wt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=Zd(i),C!==null){for(a.flags|=128,Gc(_,!1),f=C.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)_=c,i=f,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,i=C.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return ft(It,It.current&1|2),a.child}i=i.sibling}_.tail!==null&&mt()>sl&&(a.flags|=128,f=!0,Gc(_,!1),a.lanes=4194304)}else{if(!f)if(i=Zd(C),i!==null){if(a.flags|=128,f=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),Gc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!St)return fn(a),null}else 2*mt()-_.renderingStartTime>sl&&c!==1073741824&&(a.flags|=128,f=!0,Gc(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(c=_.last,c!==null?c.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=mt(),a.sibling=null,c=It.current,ft(It,f?c&1|2:c&1),a):(fn(a),null);case 22:case 23:return xg(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(qn&1073741824)!==0&&(fn(a),a.subtreeFlags&6&&(a.flags|=8192)):fn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function uN(i,a){switch(Dm(a),a.tag){case 1:return kn(a.type)&&Bd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return el(),yt(Pn),yt(dn),Gm(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Wm(a),null;case 13:if(yt(It),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ya()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return yt(It),null;case 4:return el(),null;case 10:return Fm(a.type._context),null;case 22:case 23:return xg(),null;case 24:return null;default:return null}}var lh=!1,pn=!1,dN=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function nl(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){bt(i,a,f)}else c.current=null}function hg(i,a,c){try{c()}catch(f){bt(i,a,f)}}var lS=!1;function hN(i,a){if(xm=Is,i=Uw(),gm(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var C=0,L=-1,U=-1,Y=0,le=0,de=i,ae=null;t:for(;;){for(var Se;de!==c||g!==0&&de.nodeType!==3||(L=C+g),de!==_||f!==0&&de.nodeType!==3||(U=C+f),de.nodeType===3&&(C+=de.nodeValue.length),(Se=de.firstChild)!==null;)ae=de,de=Se;for(;;){if(de===i)break t;if(ae===c&&++Y===g&&(L=C),ae===_&&++le===f&&(U=C),(Se=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=Se}c=L===-1||U===-1?null:{start:L,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(Im={focusedElem:i,selectionRange:c},Is=!1,Ie=a;Ie!==null;)if(a=Ie,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Ie=i;else for(;Ie!==null;){a=Ie;try{var Ce=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Pe=Ce.memoizedProps,Ot=Ce.memoizedState,q=a.stateNode,$=q.getSnapshotBeforeUpdate(a.elementType===a.type?Pe:wr(a.type,Pe),Ot);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){bt(a,a.return,fe)}if(i=a.sibling,i!==null){i.return=a.return,Ie=i;break}Ie=a.return}return Ce=lS,lS=!1,Ce}function qc(i,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var _=g.destroy;g.destroy=void 0,_!==void 0&&hg(a,c,_)}g=g.next}while(g!==f)}}function ch(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function fg(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function cS(i){var a=i.alternate;a!==null&&(i.alternate=null,cS(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Xr],delete a[Lc],delete a[bm],delete a[Kk],delete a[Qk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function uS(i){return i.tag===5||i.tag===3||i.tag===4}function dS(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||uS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function pg(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Ud));else if(f!==4&&(i=i.child,i!==null))for(pg(i,a,c),i=i.sibling;i!==null;)pg(i,a,c),i=i.sibling}function mg(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(mg(i,a,c),i=i.sibling;i!==null;)mg(i,a,c),i=i.sibling}var rn=null,Er=!1;function Ai(i,a,c){for(c=c.child;c!==null;)hS(i,a,c),c=c.sibling}function hS(i,a,c){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(To,c)}catch{}switch(c.tag){case 5:pn||nl(c,a);case 6:var f=rn,g=Er;rn=null,Ai(i,a,c),rn=f,Er=g,rn!==null&&(Er?(i=rn,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):rn.removeChild(c.stateNode));break;case 18:rn!==null&&(Er?(i=rn,c=c.stateNode,i.nodeType===8?Am(i.parentNode,c):i.nodeType===1&&Am(i,c),vi(i)):Am(rn,c.stateNode));break;case 4:f=rn,g=Er,rn=c.stateNode.containerInfo,Er=!0,Ai(i,a,c),rn=f,Er=g;break;case 0:case 11:case 14:case 15:if(!pn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,C=_.destroy;_=_.tag,C!==void 0&&((_&2)!==0||(_&4)!==0)&&hg(c,a,C),g=g.next}while(g!==f)}Ai(i,a,c);break;case 1:if(!pn&&(nl(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(L){bt(c,a,L)}Ai(i,a,c);break;case 21:Ai(i,a,c);break;case 22:c.mode&1?(pn=(f=pn)||c.memoizedState!==null,Ai(i,a,c),pn=f):Ai(i,a,c);break;default:Ai(i,a,c)}}function fS(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new dN),a.forEach(function(f){var g=EN.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}}function Sr(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var _=i,C=a,L=C;e:for(;L!==null;){switch(L.tag){case 5:rn=L.stateNode,Er=!1;break e;case 3:rn=L.stateNode.containerInfo,Er=!0;break e;case 4:rn=L.stateNode.containerInfo,Er=!0;break e}L=L.return}if(rn===null)throw Error(t(160));hS(_,C,g),rn=null,Er=!1;var U=g.alternate;U!==null&&(U.return=null),g.return=null}catch(Y){bt(g,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)pS(a,i),a=a.sibling}function pS(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Sr(a,i),es(i),f&4){try{qc(3,i,i.return),ch(3,i)}catch(Pe){bt(i,i.return,Pe)}try{qc(5,i,i.return)}catch(Pe){bt(i,i.return,Pe)}}break;case 1:Sr(a,i),es(i),f&512&&c!==null&&nl(c,c.return);break;case 5:if(Sr(a,i),es(i),f&512&&c!==null&&nl(c,c.return),i.flags&32){var g=i.stateNode;try{vo(g,"")}catch(Pe){bt(i,i.return,Pe)}}if(f&4&&(g=i.stateNode,g!=null)){var _=i.memoizedProps,C=c!==null?c.memoizedProps:_,L=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{L==="input"&&_.type==="radio"&&_.name!=null&&Tn(g,_),Ta(L,C);var Y=Ta(L,_);for(C=0;C<U.length;C+=2){var le=U[C],de=U[C+1];le==="style"?Sa(g,de):le==="dangerouslySetInnerHTML"?fd(g,de):le==="children"?vo(g,de):z(g,le,de,Y)}switch(L){case"input":xn(g,_);break;case"textarea":hd(g,_);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var Se=_.value;Se!=null?en(g,!!_.multiple,Se,!1):ae!==!!_.multiple&&(_.defaultValue!=null?en(g,!!_.multiple,_.defaultValue,!0):en(g,!!_.multiple,_.multiple?[]:"",!1))}g[Lc]=_}catch(Pe){bt(i,i.return,Pe)}}break;case 6:if(Sr(a,i),es(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,_=i.memoizedProps;try{g.nodeValue=_}catch(Pe){bt(i,i.return,Pe)}}break;case 3:if(Sr(a,i),es(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{vi(a.containerInfo)}catch(Pe){bt(i,i.return,Pe)}break;case 4:Sr(a,i),es(i);break;case 13:Sr(a,i),es(i),g=i.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(vg=mt())),f&4&&fS(i);break;case 22:if(le=c!==null&&c.memoizedState!==null,i.mode&1?(pn=(Y=pn)||le,Sr(a,i),pn=Y):Sr(a,i),es(i),f&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!le&&(i.mode&1)!==0)for(Ie=i,le=i.child;le!==null;){for(de=Ie=le;Ie!==null;){switch(ae=Ie,Se=ae.child,ae.tag){case 0:case 11:case 14:case 15:qc(4,ae,ae.return);break;case 1:nl(ae,ae.return);var Ce=ae.stateNode;if(typeof Ce.componentWillUnmount=="function"){f=ae,c=ae.return;try{a=f,Ce.props=a.memoizedProps,Ce.state=a.memoizedState,Ce.componentWillUnmount()}catch(Pe){bt(f,c,Pe)}}break;case 5:nl(ae,ae.return);break;case 22:if(ae.memoizedState!==null){yS(de);continue}}Se!==null?(Se.return=ae,Ie=Se):yS(de)}le=le.sibling}e:for(le=null,de=i;;){if(de.tag===5){if(le===null){le=de;try{g=de.stateNode,Y?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(L=de.stateNode,U=de.memoizedProps.style,C=U!=null&&U.hasOwnProperty("display")?U.display:null,L.style.display=ci("display",C))}catch(Pe){bt(i,i.return,Pe)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=Y?"":de.memoizedProps}catch(Pe){bt(i,i.return,Pe)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===i)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===i)break e;for(;de.sibling===null;){if(de.return===null||de.return===i)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Sr(a,i),es(i),f&4&&fS(i);break;case 21:break;default:Sr(a,i),es(i)}}function es(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(uS(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(vo(g,""),f.flags&=-33);var _=dS(i);mg(i,_,g);break;case 3:case 4:var C=f.stateNode.containerInfo,L=dS(i);pg(i,L,C);break;default:throw Error(t(161))}}catch(U){bt(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function fN(i,a,c){Ie=i,mS(i)}function mS(i,a,c){for(var f=(i.mode&1)!==0;Ie!==null;){var g=Ie,_=g.child;if(g.tag===22&&f){var C=g.memoizedState!==null||lh;if(!C){var L=g.alternate,U=L!==null&&L.memoizedState!==null||pn;L=lh;var Y=pn;if(lh=C,(pn=U)&&!Y)for(Ie=g;Ie!==null;)C=Ie,U=C.child,C.tag===22&&C.memoizedState!==null?vS(g):U!==null?(U.return=C,Ie=U):vS(g);for(;_!==null;)Ie=_,mS(_),_=_.sibling;Ie=g,lh=L,pn=Y}gS(i)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,Ie=_):gS(i)}}function gS(i){for(;Ie!==null;){var a=Ie;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:pn||ch(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!pn)if(c===null)f.componentDidMount();else{var g=a.elementType===a.type?c.memoizedProps:wr(a.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&yE(a,_,f);break;case 3:var C=a.updateQueue;if(C!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}yE(a,C,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&c.focus();break;case"img":U.src&&(c.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var le=Y.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&vi(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}pn||a.flags&512&&fg(a)}catch(ae){bt(a,a.return,ae)}}if(a===i){Ie=null;break}if(c=a.sibling,c!==null){c.return=a.return,Ie=c;break}Ie=a.return}}function yS(i){for(;Ie!==null;){var a=Ie;if(a===i){Ie=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Ie=c;break}Ie=a.return}}function vS(i){for(;Ie!==null;){var a=Ie;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{ch(4,a)}catch(U){bt(a,c,U)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(U){bt(a,g,U)}}var _=a.return;try{fg(a)}catch(U){bt(a,_,U)}break;case 5:var C=a.return;try{fg(a)}catch(U){bt(a,C,U)}}}catch(U){bt(a,a.return,U)}if(a===i){Ie=null;break}var L=a.sibling;if(L!==null){L.return=a.return,Ie=L;break}Ie=a.return}}var pN=Math.ceil,uh=G.ReactCurrentDispatcher,gg=G.ReactCurrentOwner,or=G.ReactCurrentBatchConfig,nt=0,Kt=null,jt=null,sn=0,qn=0,rl=Ti(0),Wt=0,Kc=null,Fo=0,dh=0,yg=0,Qc=null,Dn=null,vg=0,sl=1/0,Ms=null,hh=!1,_g=null,bi=null,fh=!1,Pi=null,ph=0,Yc=0,wg=null,mh=-1,gh=0;function Cn(){return(nt&6)!==0?mt():mh!==-1?mh:mh=mt()}function ki(i){return(i.mode&1)===0?1:(nt&2)!==0&&sn!==0?sn&-sn:Xk.transition!==null?(gh===0&&(gh=yc()),gh):(i=Xe,i!==0||(i=window.event,i=i===void 0?16:Da(i.type)),i)}function Tr(i,a,c,f){if(50<Yc)throw Yc=0,wg=null,Error(t(185));Ro(i,c,f),((nt&2)===0||i!==Kt)&&(i===Kt&&((nt&2)===0&&(dh|=c),Wt===4&&Ni(i,sn)),On(i,f),c===1&&nt===0&&(a.mode&1)===0&&(sl=mt()+500,Wd&&Ii()))}function On(i,a){var c=i.callbackNode;Co(i,a);var f=Ss(i,i===Kt?sn:0);if(f===0)c!==null&&Ca(c),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(c!=null&&Ca(c),a===1)i.tag===0?Yk(wS.bind(null,i)):iE(wS.bind(null,i)),Gk(function(){(nt&6)===0&&Ii()}),c=null;else{switch(zr(f)){case 1:c=Ra;break;case 4:c=pc;break;case 16:c=So;break;case 536870912:c=Aa;break;default:c=So}c=AS(c,_S.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function _S(i,a){if(mh=-1,gh=0,(nt&6)!==0)throw Error(t(327));var c=i.callbackNode;if(il()&&i.callbackNode!==c)return null;var f=Ss(i,i===Kt?sn:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=yh(i,f);else{a=f;var g=nt;nt|=2;var _=SS();(Kt!==i||sn!==a)&&(Ms=null,sl=mt()+500,zo(i,a));do try{yN();break}catch(L){ES(i,L)}while(!0);jm(),uh.current=_,nt=g,jt!==null?a=0:(Kt=null,sn=0,a=Wt)}if(a!==0){if(a===2&&(g=gc(i),g!==0&&(f=g,a=Eg(i,g))),a===1)throw c=Kc,zo(i,0),Ni(i,f),On(i,mt()),c;if(a===6)Ni(i,f);else{if(g=i.current.alternate,(f&30)===0&&!mN(g)&&(a=yh(i,f),a===2&&(_=gc(i),_!==0&&(f=_,a=Eg(i,_))),a===1))throw c=Kc,zo(i,0),Ni(i,f),On(i,mt()),c;switch(i.finishedWork=g,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Bo(i,Dn,Ms);break;case 3:if(Ni(i,f),(f&130023424)===f&&(a=vg+500-mt(),10<a)){if(Ss(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Cn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Rm(Bo.bind(null,i,Dn,Ms),a);break}Bo(i,Dn,Ms);break;case 4:if(Ni(i,f),(f&4194240)===f)break;for(a=i.eventTimes,g=-1;0<f;){var C=31-Un(f);_=1<<C,C=a[C],C>g&&(g=C),f&=~_}if(f=g,f=mt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*pN(f/1960))-f,10<f){i.timeoutHandle=Rm(Bo.bind(null,i,Dn,Ms),f);break}Bo(i,Dn,Ms);break;case 5:Bo(i,Dn,Ms);break;default:throw Error(t(329))}}}return On(i,mt()),i.callbackNode===c?_S.bind(null,i):null}function Eg(i,a){var c=Qc;return i.current.memoizedState.isDehydrated&&(zo(i,a).flags|=256),i=yh(i,a),i!==2&&(a=Dn,Dn=c,a!==null&&Sg(a)),i}function Sg(i){Dn===null?Dn=i:Dn.push.apply(Dn,i)}function mN(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],_=g.getSnapshot;g=g.value;try{if(!vr(_(),g))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ni(i,a){for(a&=~yg,a&=~dh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-Un(a),f=1<<c;i[c]=-1,a&=~f}}function wS(i){if((nt&6)!==0)throw Error(t(327));il();var a=Ss(i,0);if((a&1)===0)return On(i,mt()),null;var c=yh(i,a);if(i.tag!==0&&c===2){var f=gc(i);f!==0&&(a=f,c=Eg(i,f))}if(c===1)throw c=Kc,zo(i,0),Ni(i,a),On(i,mt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Bo(i,Dn,Ms),On(i,mt()),null}function Tg(i,a){var c=nt;nt|=1;try{return i(a)}finally{nt=c,nt===0&&(sl=mt()+500,Wd&&Ii())}}function Uo(i){Pi!==null&&Pi.tag===0&&(nt&6)===0&&il();var a=nt;nt|=1;var c=or.transition,f=Xe;try{if(or.transition=null,Xe=1,i)return i()}finally{Xe=f,or.transition=c,nt=a,(nt&6)===0&&Ii()}}function xg(){qn=rl.current,yt(rl)}function zo(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,Hk(c)),jt!==null)for(c=jt.return;c!==null;){var f=c;switch(Dm(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Bd();break;case 3:el(),yt(Pn),yt(dn),Gm();break;case 5:Wm(f);break;case 4:el();break;case 13:yt(It);break;case 19:yt(It);break;case 10:Fm(f.type._context);break;case 22:case 23:xg()}c=c.return}if(Kt=i,jt=i=Di(i.current,null),sn=qn=a,Wt=0,Kc=null,yg=dh=Fo=0,Dn=Qc=null,Lo!==null){for(a=0;a<Lo.length;a++)if(c=Lo[a],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,_=c.pending;if(_!==null){var C=_.next;_.next=g,f.next=C}c.pending=f}Lo=null}return i}function ES(i,a){do{var c=jt;try{if(jm(),eh.current=sh,th){for(var f=Ct.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}th=!1}if(jo=0,qt=$t=Ct=null,Bc=!1,$c=0,gg.current=null,c===null||c.return===null){Wt=1,Kc=a,jt=null;break}e:{var _=i,C=c.return,L=c,U=a;if(a=sn,L.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var Y=U,le=L,de=le.tag;if((le.mode&1)===0&&(de===0||de===11||de===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var Se=GE(C);if(Se!==null){Se.flags&=-257,qE(Se,C,L,_,a),Se.mode&1&&HE(_,Y,a),a=Se,U=Y;var Ce=a.updateQueue;if(Ce===null){var Pe=new Set;Pe.add(U),a.updateQueue=Pe}else Ce.add(U);break e}else{if((a&1)===0){HE(_,Y,a),Ig();break e}U=Error(t(426))}}else if(St&&L.mode&1){var Ot=GE(C);if(Ot!==null){(Ot.flags&65536)===0&&(Ot.flags|=256),qE(Ot,C,L,_,a),Lm(tl(U,L));break e}}_=U=tl(U,L),Wt!==4&&(Wt=2),Qc===null?Qc=[_]:Qc.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var q=$E(_,U,a);gE(_,q);break e;case 1:L=U;var $=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(bi===null||!bi.has(Q)))){_.flags|=65536,a&=-a,_.lanes|=a;var fe=WE(_,L,a);gE(_,fe);break e}}_=_.return}while(_!==null)}xS(c)}catch(ke){a=ke,jt===c&&c!==null&&(jt=c=c.return);continue}break}while(!0)}function SS(){var i=uh.current;return uh.current=sh,i===null?sh:i}function Ig(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Kt===null||(Fo&268435455)===0&&(dh&268435455)===0||Ni(Kt,sn)}function yh(i,a){var c=nt;nt|=2;var f=SS();(Kt!==i||sn!==a)&&(Ms=null,zo(i,a));do try{gN();break}catch(g){ES(i,g)}while(!0);if(jm(),nt=c,uh.current=f,jt!==null)throw Error(t(261));return Kt=null,sn=0,Wt}function gN(){for(;jt!==null;)TS(jt)}function yN(){for(;jt!==null&&!Eo();)TS(jt)}function TS(i){var a=RS(i.alternate,i,qn);i.memoizedProps=i.pendingProps,a===null?xS(i):jt=a,gg.current=null}function xS(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=cN(c,a,qn),c!==null){jt=c;return}}else{if(c=uN(c,a),c!==null){c.flags&=32767,jt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Wt=6,jt=null;return}}if(a=a.sibling,a!==null){jt=a;return}jt=a=i}while(a!==null);Wt===0&&(Wt=5)}function Bo(i,a,c){var f=Xe,g=or.transition;try{or.transition=null,Xe=1,vN(i,a,c,f)}finally{or.transition=g,Xe=f}return null}function vN(i,a,c,f){do il();while(Pi!==null);if((nt&6)!==0)throw Error(t(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=c.lanes|c.childLanes;if(dm(i,_),i===Kt&&(jt=Kt=null,sn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||fh||(fh=!0,AS(So,function(){return il(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=or.transition,or.transition=null;var C=Xe;Xe=1;var L=nt;nt|=4,gg.current=null,hN(i,c),pS(c,i),jk(Im),Is=!!xm,Im=xm=null,i.current=c,fN(c),Es(),nt=L,Xe=C,or.transition=_}else i.current=c;if(fh&&(fh=!1,Pi=i,ph=g),_=i.pendingLanes,_===0&&(bi=null),xd(c.stateNode),On(i,mt()),a!==null)for(f=i.onRecoverableError,c=0;c<a.length;c++)g=a[c],f(g.value,{componentStack:g.stack,digest:g.digest});if(hh)throw hh=!1,i=_g,_g=null,i;return(ph&1)!==0&&i.tag!==0&&il(),_=i.pendingLanes,(_&1)!==0?i===wg?Yc++:(Yc=0,wg=i):Yc=0,Ii(),null}function il(){if(Pi!==null){var i=zr(ph),a=or.transition,c=Xe;try{if(or.transition=null,Xe=16>i?16:i,Pi===null)var f=!1;else{if(i=Pi,Pi=null,ph=0,(nt&6)!==0)throw Error(t(331));var g=nt;for(nt|=4,Ie=i.current;Ie!==null;){var _=Ie,C=_.child;if((Ie.flags&16)!==0){var L=_.deletions;if(L!==null){for(var U=0;U<L.length;U++){var Y=L[U];for(Ie=Y;Ie!==null;){var le=Ie;switch(le.tag){case 0:case 11:case 15:qc(8,le,_)}var de=le.child;if(de!==null)de.return=le,Ie=de;else for(;Ie!==null;){le=Ie;var ae=le.sibling,Se=le.return;if(cS(le),le===Y){Ie=null;break}if(ae!==null){ae.return=Se,Ie=ae;break}Ie=Se}}}var Ce=_.alternate;if(Ce!==null){var Pe=Ce.child;if(Pe!==null){Ce.child=null;do{var Ot=Pe.sibling;Pe.sibling=null,Pe=Ot}while(Pe!==null)}}Ie=_}}if((_.subtreeFlags&2064)!==0&&C!==null)C.return=_,Ie=C;else e:for(;Ie!==null;){if(_=Ie,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:qc(9,_,_.return)}var q=_.sibling;if(q!==null){q.return=_.return,Ie=q;break e}Ie=_.return}}var $=i.current;for(Ie=$;Ie!==null;){C=Ie;var Q=C.child;if((C.subtreeFlags&2064)!==0&&Q!==null)Q.return=C,Ie=Q;else e:for(C=$;Ie!==null;){if(L=Ie,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:ch(9,L)}}catch(ke){bt(L,L.return,ke)}if(L===C){Ie=null;break e}var fe=L.sibling;if(fe!==null){fe.return=L.return,Ie=fe;break e}Ie=L.return}}if(nt=g,Ii(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(To,i)}catch{}f=!0}return f}finally{Xe=c,or.transition=a}}return!1}function IS(i,a,c){a=tl(c,a),a=$E(i,a,1),i=Ri(i,a,1),a=Cn(),i!==null&&(Ro(i,1,a),On(i,a))}function bt(i,a,c){if(i.tag===3)IS(i,i,c);else for(;a!==null;){if(a.tag===3){IS(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(bi===null||!bi.has(f))){i=tl(c,i),i=WE(a,i,1),a=Ri(a,i,1),i=Cn(),a!==null&&(Ro(a,1,i),On(a,i));break}}a=a.return}}function _N(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),a=Cn(),i.pingedLanes|=i.suspendedLanes&c,Kt===i&&(sn&c)===c&&(Wt===4||Wt===3&&(sn&130023424)===sn&&500>mt()-vg?zo(i,0):yg|=c),On(i,a)}function CS(i,a){a===0&&((i.mode&1)===0?a=1:(a=mi,mi<<=1,(mi&130023424)===0&&(mi=4194304)));var c=Cn();i=Ns(i,a),i!==null&&(Ro(i,a,c),On(i,c))}function wN(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),CS(i,c)}function EN(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),CS(i,c)}var RS;RS=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||Pn.current)Nn=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return Nn=!1,lN(i,a,c);Nn=(i.flags&131072)!==0}else Nn=!1,St&&(a.flags&1048576)!==0&&oE(a,Gd,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;ah(i,a),i=a.pendingProps;var g=qa(a,dn.current);Za(a,c),g=Qm(null,a,f,i,g,c);var _=Ym();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,kn(f)?(_=!0,$d(a)):_=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Bm(a),g.updater=ih,a.stateNode=g,g._reactInternals=a,ng(a,f,i,c),a=og(null,a,f,!0,_,c)):(a.tag=0,St&&_&&Nm(a),In(null,a,g,c),a=a.child),a;case 16:f=a.elementType;e:{switch(ah(i,a),i=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=TN(f),i=wr(f,i),g){case 0:a=ig(null,a,f,i,c);break e;case 1:a=ZE(null,a,f,i,c);break e;case 11:a=KE(null,a,f,i,c);break e;case 14:a=QE(null,a,f,wr(f.type,i),c);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:wr(f,g),ig(i,a,f,g,c);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:wr(f,g),ZE(i,a,f,g,c);case 3:e:{if(eS(a),i===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,g=_.element,mE(i,a),Jd(a,f,null,c);var C=a.memoizedState;if(f=C.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){g=tl(Error(t(423)),a),a=tS(i,a,f,c,g);break e}else if(f!==g){g=tl(Error(t(424)),a),a=tS(i,a,f,c,g);break e}else for(Gn=Si(a.stateNode.containerInfo.firstChild),Hn=a,St=!0,_r=null,c=fE(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ya(),f===g){a=Os(i,a,c);break e}In(i,a,f,c)}a=a.child}return a;case 5:return vE(a),i===null&&Mm(a),f=a.type,g=a.pendingProps,_=i!==null?i.memoizedProps:null,C=g.children,Cm(f,g)?C=null:_!==null&&Cm(f,_)&&(a.flags|=32),JE(i,a),In(i,a,C,c),a.child;case 6:return i===null&&Mm(a),null;case 13:return nS(i,a,c);case 4:return $m(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Xa(a,null,f,c):In(i,a,f,c),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:wr(f,g),KE(i,a,f,g,c);case 7:return In(i,a,a.pendingProps,c),a.child;case 8:return In(i,a,a.pendingProps.children,c),a.child;case 12:return In(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,_=a.memoizedProps,C=g.value,ft(Qd,f._currentValue),f._currentValue=C,_!==null)if(vr(_.value,C)){if(_.children===g.children&&!Pn.current){a=Os(i,a,c);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var L=_.dependencies;if(L!==null){C=_.child;for(var U=L.firstContext;U!==null;){if(U.context===f){if(_.tag===1){U=Ds(-1,c&-c),U.tag=2;var Y=_.updateQueue;if(Y!==null){Y=Y.shared;var le=Y.pending;le===null?U.next=U:(U.next=le.next,le.next=U),Y.pending=U}}_.lanes|=c,U=_.alternate,U!==null&&(U.lanes|=c),Um(_.return,c,a),L.lanes|=c;break}U=U.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(t(341));C.lanes|=c,L=C.alternate,L!==null&&(L.lanes|=c),Um(C,c,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}In(i,a,g.children,c),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,Za(a,c),g=sr(g),f=f(g),a.flags|=1,In(i,a,f,c),a.child;case 14:return f=a.type,g=wr(f,a.pendingProps),g=wr(f.type,g),QE(i,a,f,g,c);case 15:return YE(i,a,a.type,a.pendingProps,c);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:wr(f,g),ah(i,a),a.tag=1,kn(f)?(i=!0,$d(a)):i=!1,Za(a,c),zE(a,f,g),ng(a,f,g,c),og(null,a,f,!0,i,c);case 19:return sS(i,a,c);case 22:return XE(i,a,c)}throw Error(t(156,a.tag))};function AS(i,a){return fc(i,a)}function SN(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(i,a,c,f){return new SN(i,a,c,f)}function Cg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function TN(i){if(typeof i=="function")return Cg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===_e)return 14}return 2}function Di(i,a){var c=i.alternate;return c===null?(c=ar(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function vh(i,a,c,f,g,_){var C=2;if(f=i,typeof i=="function")Cg(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case P:return $o(c.children,g,_,a);case R:C=8,g|=8;break;case N:return i=ar(12,c,a,g|2),i.elementType=N,i.lanes=_,i;case D:return i=ar(13,c,a,g),i.elementType=D,i.lanes=_,i;case me:return i=ar(19,c,a,g),i.elementType=me,i.lanes=_,i;case Ee:return _h(c,g,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:C=10;break e;case M:C=9;break e;case F:C=11;break e;case _e:C=14;break e;case pe:C=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=ar(C,c,a,g),a.elementType=i,a.type=f,a.lanes=_,a}function $o(i,a,c,f){return i=ar(7,i,f,a),i.lanes=c,i}function _h(i,a,c,f){return i=ar(22,i,f,a),i.elementType=Ee,i.lanes=c,i.stateNode={isHidden:!1},i}function Rg(i,a,c){return i=ar(6,i,null,a),i.lanes=c,i}function Ag(i,a,c){return a=ar(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function xN(i,a,c,f,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vc(0),this.expirationTimes=vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vc(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function bg(i,a,c,f,g,_,C,L,U){return i=new xN(i,a,c,L,U),a===1?(a=1,_===!0&&(a|=8)):a=0,_=ar(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bm(_),i}function IN(i,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:f==null?null:""+f,children:i,containerInfo:a,implementation:c}}function bS(i){if(!i)return xi;i=i._reactInternals;e:{if(gr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(kn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(kn(c))return rE(i,c,a)}return a}function PS(i,a,c,f,g,_,C,L,U){return i=bg(c,f,!0,i,g,_,C,L,U),i.context=bS(null),c=i.current,f=Cn(),g=ki(c),_=Ds(f,g),_.callback=a??null,Ri(c,_,g),i.current.lanes=g,Ro(i,g,f),On(i,f),i}function wh(i,a,c,f){var g=a.current,_=Cn(),C=ki(g);return c=bS(c),a.context===null?a.context=c:a.pendingContext=c,a=Ds(_,C),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Ri(g,a,C),i!==null&&(Tr(i,g,C,_),Xd(i,g,C)),C}function Eh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function kS(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Pg(i,a){kS(i,a),(i=i.alternate)&&kS(i,a)}function CN(){return null}var NS=typeof reportError=="function"?reportError:function(i){console.error(i)};function kg(i){this._internalRoot=i}Sh.prototype.render=kg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));wh(i,a,null,null)},Sh.prototype.unmount=kg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Uo(function(){wh(null,i,null,null)}),a[As]=null}};function Sh(i){this._internalRoot=i}Sh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Sc();i={blockedOn:null,target:i,priority:a};for(var c=0;c<zn.length&&a!==0&&a<zn[c].priority;c++);zn.splice(c,0,i),c===0&&ka(i)}};function Ng(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Th(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function DS(){}function RN(i,a,c,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var Y=Eh(C);_.call(Y)}}var C=PS(a,f,i,0,null,!1,!1,"",DS);return i._reactRootContainer=C,i[As]=C.current,Oc(i.nodeType===8?i.parentNode:i),Uo(),C}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var L=f;f=function(){var Y=Eh(U);L.call(Y)}}var U=bg(i,0,!1,null,null,!1,!1,"",DS);return i._reactRootContainer=U,i[As]=U.current,Oc(i.nodeType===8?i.parentNode:i),Uo(function(){wh(a,U,c,f)}),U}function xh(i,a,c,f,g){var _=c._reactRootContainer;if(_){var C=_;if(typeof g=="function"){var L=g;g=function(){var U=Eh(C);L.call(U)}}wh(a,C,i,g)}else C=RN(c,a,i,g,f);return Eh(C)}wc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=it(a.pendingLanes);c!==0&&(_c(a,c|1),On(a,mt()),(nt&6)===0&&(sl=mt()+500,Ii()))}break;case 13:Uo(function(){var f=Ns(i,1);if(f!==null){var g=Cn();Tr(f,i,1,g)}}),Pg(i,1)}},ba=function(i){if(i.tag===13){var a=Ns(i,134217728);if(a!==null){var c=Cn();Tr(a,i,134217728,c)}Pg(i,134217728)}},Ec=function(i){if(i.tag===13){var a=ki(i),c=Ns(i,a);if(c!==null){var f=Cn();Tr(c,i,a,f)}Pg(i,a)}},Sc=function(){return Xe},Tc=function(i,a){var c=Xe;try{return Xe=i,a()}finally{Xe=c}},vs=function(i,a,c){switch(a){case"input":if(xn(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=zd(f);if(!g)throw Error(t(90));$e(f),xn(f,g)}}}break;case"textarea":hd(i,c);break;case"select":a=c.value,a!=null&&en(i,!!c.multiple,a,!1)}},md=Tg,gd=Uo;var AN={usingClientEntryPoint:!1,Events:[Vc,Ha,zd,di,hi,Tg]},Xc={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bN={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Td(i),i===null?null:i.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||CN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{To=Ih.inject(bN),Fn=Ih}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AN,Mn.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ng(a))throw Error(t(200));return IN(i,a,null,c)},Mn.createRoot=function(i,a){if(!Ng(i))throw Error(t(299));var c=!1,f="",g=NS;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=bg(i,1,!1,null,null,c,!1,f,g),i[As]=a.current,Oc(i.nodeType===8?i.parentNode:i),new kg(a)},Mn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Td(a),i=i===null?null:i.stateNode,i},Mn.flushSync=function(i){return Uo(i)},Mn.hydrate=function(i,a,c){if(!Th(a))throw Error(t(200));return xh(null,i,a,!0,c)},Mn.hydrateRoot=function(i,a,c){if(!Ng(i))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,g=!1,_="",C=NS;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),a=PS(a,null,i,1,c??null,g,!1,_,C),i[As]=a.current,Oc(i),f)for(i=0;i<f.length;i++)c=f[i],g=c._getVersion,g=g(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,g]:a.mutableSourceEagerHydrationData.push(c,g);return new Sh(a)},Mn.render=function(i,a,c){if(!Th(a))throw Error(t(200));return xh(null,i,a,!1,c)},Mn.unmountComponentAtNode=function(i){if(!Th(i))throw Error(t(40));return i._reactRootContainer?(Uo(function(){xh(null,null,i,!1,function(){i._reactRootContainer=null,i[As]=null})}),!0):!1},Mn.unstable_batchedUpdates=Tg,Mn.unstable_renderSubtreeIntoContainer=function(i,a,c,f){if(!Th(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return xh(i,a,c,!1,f)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var zS;function lI(){if(zS)return Mg.exports;zS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mg.exports=VN(),Mg.exports}var BS;function jN(){if(BS)return Ch;BS=1;var n=lI();return Ch.createRoot=n.createRoot,Ch.hydrateRoot=n.hydrateRoot,Ch}var FN=jN();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),$S=n=>{const e=zN(n);return e.charAt(0).toUpperCase()+e.slice(1)},cI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=S.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},d)=>S.createElement("svg",{ref:d,...BN,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:cI("lucide",s),...u},[...l.map(([p,m])=>S.createElement(p,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=(n,e)=>{const t=S.forwardRef(({className:r,...s},o)=>S.createElement($N,{ref:o,iconNode:e,className:cI(`lucide-${UN($S(n))}`,`lucide-${n}`,r),...s}));return t.displayName=$S(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],uI=Sn("arrow-left",WN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],dI=Sn("calendar",HN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],jg=Sn("camera",GN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],KN=Sn("check",qN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hI=Sn("chevron-down",QN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],XN=Sn("chevron-right",YN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZN=Sn("chevron-up",JN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fI=Sn("funnel",eD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],nD=Sn("grip-vertical",tD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],WS=Sn("log-out",rD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],pI=Sn("message-square",sD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oD=Sn("plus",iD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Iu=Sn("star",aD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],cD=Sn("upload",lD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],mI=Sn("user",uD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gI=Sn("x",dD);function yI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=yI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function vI(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=yI(n))&&(r&&(r+=" "),r+=e);return r}const hD=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},fD=(n,e)=>({classGroupId:n,validator:e}),_I=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),cf="-",HS=[],pD="arbitrary..",mD=n=>{const e=yD(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return gD(l);const u=l.split(cf),d=u[0]===""&&u.length>1?1:0;return wI(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],p=t[l];return d?p?hD(p,d):d:p||HS}return t[l]||HS}}},wI=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const s=n[e],o=t.nextPart.get(s);if(o){const p=wI(n,e+1,o);if(p)return p}const l=t.validators;if(l===null)return;const u=e===0?n.join(cf):n.slice(e).join(cf),d=l.length;for(let p=0;p<d;p++){const m=l[p];if(m.validator(u))return m.classGroupId}},gD=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?pD+r:void 0})(),yD=n=>{const{theme:e,classGroups:t}=n;return vD(t,e)},vD=(n,e)=>{const t=_I();for(const r in n){const s=n[r];Cv(s,t,r,e)}return t},Cv=(n,e,t,r)=>{const s=n.length;for(let o=0;o<s;o++){const l=n[o];_D(l,e,t,r)}},_D=(n,e,t,r)=>{if(typeof n=="string"){wD(n,e,t);return}if(typeof n=="function"){ED(n,e,t,r);return}SD(n,e,t,r)},wD=(n,e,t)=>{const r=n===""?e:EI(e,n);r.classGroupId=t},ED=(n,e,t,r)=>{if(TD(n)){Cv(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(fD(t,n))},SD=(n,e,t,r)=>{const s=Object.entries(n),o=s.length;for(let l=0;l<o;l++){const[u,d]=s[l];Cv(d,EI(e,u),t,r)}},EI=(n,e)=>{let t=n;const r=e.split(cf),s=r.length;for(let o=0;o<s;o++){const l=r[o];let u=t.nextPart.get(l);u||(u=_I(),t.nextPart.set(l,u)),t=u}return t},TD=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,xD=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const s=(o,l)=>{t[o]=l,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(o){let l=t[o];if(l!==void 0)return l;if((l=r[o])!==void 0)return s(o,l),l},set(o,l){o in t?t[o]=l:s(o,l)}}},Ty="!",GS=":",ID=[],qS=(n,e,t,r,s)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:s}),CD=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let l=0,u=0,d=0,p;const m=s.length;for(let x=0;x<m;x++){const A=s[x];if(l===0&&u===0){if(A===GS){o.push(s.slice(d,x)),d=x+1;continue}if(A==="/"){p=x;continue}}A==="["?l++:A==="]"?l--:A==="("?u++:A===")"&&u--}const y=o.length===0?s:s.slice(d);let E=y,I=!1;y.endsWith(Ty)?(E=y.slice(0,-1),I=!0):y.startsWith(Ty)&&(E=y.slice(1),I=!0);const b=p&&p>d?p-d:void 0;return qS(o,I,E,b)};if(e){const s=e+GS,o=r;r=l=>l.startsWith(s)?o(l.slice(s.length)):qS(ID,!1,l,void 0,!0)}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},RD=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let s=[];for(let o=0;o<t.length;o++){const l=t[o],u=l[0]==="[",d=e.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},AD=n=>({cache:xD(n.cacheSize),parseClassName:CD(n),sortModifiers:RD(n),...mD(n)}),bD=/\s+/,PD=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,l=[],u=n.trim().split(bD);let d="";for(let p=u.length-1;p>=0;p-=1){const m=u[p],{isExternal:y,modifiers:E,hasImportantModifier:I,baseClassName:b,maybePostfixModifierPosition:x}=t(m);if(y){d=m+(d.length>0?" "+d:d);continue}let A=!!x,j=r(A?b.substring(0,x):b);if(!j){if(!A){d=m+(d.length>0?" "+d:d);continue}if(j=r(b),!j){d=m+(d.length>0?" "+d:d);continue}A=!1}const V=E.length===0?"":E.length===1?E[0]:o(E).join(":"),z=I?V+Ty:V,G=z+j;if(l.indexOf(G)>-1)continue;l.push(G);const J=s(j,A);for(let Z=0;Z<J.length;++Z){const P=J[Z];l.push(z+P)}d=m+(d.length>0?" "+d:d)}return d},kD=(...n)=>{let e=0,t,r,s="";for(;e<n.length;)(t=n[e++])&&(r=SI(t))&&(s&&(s+=" "),s+=r);return s},SI=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=SI(n[r]))&&(t&&(t+=" "),t+=e);return t},ND=(n,...e)=>{let t,r,s,o;const l=d=>{const p=e.reduce((m,y)=>y(m),n());return t=AD(p),r=t.cache.get,s=t.cache.set,o=u,u(d)},u=d=>{const p=r(d);if(p)return p;const m=PD(d,t);return s(d,m),m};return o=l,(...d)=>o(kD(...d))},DD=[],Ht=n=>{const e=t=>t[n]||DD;return e.isThemeGetter=!0,e},TI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,xI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,OD=/^\d+\/\d+$/,MD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,jD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,FD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ol=n=>OD.test(n),He=n=>!!n&&!Number.isNaN(Number(n)),Mi=n=>!!n&&Number.isInteger(Number(n)),Fg=n=>n.endsWith("%")&&He(n.slice(0,-1)),Ls=n=>MD.test(n),UD=()=>!0,zD=n=>LD.test(n)&&!VD.test(n),II=()=>!1,BD=n=>jD.test(n),$D=n=>FD.test(n),WD=n=>!Re(n)&&!Ae(n),HD=n=>Wl(n,AI,II),Re=n=>TI.test(n),Wo=n=>Wl(n,bI,zD),Ug=n=>Wl(n,YD,He),KS=n=>Wl(n,CI,II),GD=n=>Wl(n,RI,$D),Rh=n=>Wl(n,PI,BD),Ae=n=>xI.test(n),Zc=n=>Hl(n,bI),qD=n=>Hl(n,XD),QS=n=>Hl(n,CI),KD=n=>Hl(n,AI),QD=n=>Hl(n,RI),Ah=n=>Hl(n,PI,!0),Wl=(n,e,t)=>{const r=TI.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Hl=(n,e,t=!1)=>{const r=xI.exec(n);return r?r[1]?e(r[1]):t:!1},CI=n=>n==="position"||n==="percentage",RI=n=>n==="image"||n==="url",AI=n=>n==="length"||n==="size"||n==="bg-size",bI=n=>n==="length",YD=n=>n==="number",XD=n=>n==="family-name",PI=n=>n==="shadow",JD=()=>{const n=Ht("color"),e=Ht("font"),t=Ht("text"),r=Ht("font-weight"),s=Ht("tracking"),o=Ht("leading"),l=Ht("breakpoint"),u=Ht("container"),d=Ht("spacing"),p=Ht("radius"),m=Ht("shadow"),y=Ht("inset-shadow"),E=Ht("text-shadow"),I=Ht("drop-shadow"),b=Ht("blur"),x=Ht("perspective"),A=Ht("aspect"),j=Ht("ease"),V=Ht("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...G(),Ae,Re],Z=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],R=()=>[Ae,Re,d],N=()=>[ol,"full","auto",...R()],O=()=>[Mi,"none","subgrid",Ae,Re],M=()=>["auto",{span:["full",Mi,Ae,Re]},Mi,Ae,Re],F=()=>[Mi,"auto",Ae,Re],D=()=>["auto","min","max","fr",Ae,Re],me=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_e=()=>["start","end","center","stretch","center-safe","end-safe"],pe=()=>["auto",...R()],Ee=()=>[ol,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],W=()=>[n,Ae,Re],ee=()=>[...G(),QS,KS,{position:[Ae,Re]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",KD,HD,{size:[Ae,Re]}],ne=()=>[Fg,Zc,Wo],te=()=>["","none","full",p,Ae,Re],se=()=>["",He,Zc,Wo],he=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>[He,Fg,QS,KS],oe=()=>["","none",b,Ae,Re],ye=()=>["none",He,Ae,Re],xe=()=>["none",He,Ae,Re],je=()=>[He,Ae,Re],$e=()=>[ol,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ls],breakpoint:[Ls],color:[UD],container:[Ls],"drop-shadow":[Ls],ease:["in","out","in-out"],font:[WD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ls],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ls],shadow:[Ls],spacing:["px",He],text:[Ls],"text-shadow":[Ls],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ol,Re,Ae,A]}],container:["container"],columns:[{columns:[He,Re,Ae,u]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Mi,"auto",Ae,Re]}],basis:[{basis:[ol,"full","auto",u,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,ol,"auto","initial","none",Re]}],grow:[{grow:["",He,Ae,Re]}],shrink:[{shrink:["",He,Ae,Re]}],order:[{order:[Mi,"first","last","none",Ae,Re]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...me(),"normal"]}],"justify-items":[{"justify-items":[..._e(),"normal"]}],"justify-self":[{"justify-self":["auto",..._e()]}],"align-content":[{content:["normal",...me()]}],"align-items":[{items:[..._e(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._e(),{baseline:["","last"]}]}],"place-content":[{"place-content":me()}],"place-items":[{"place-items":[..._e(),"baseline"]}],"place-self":[{"place-self":["auto",..._e()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:pe()}],mx:[{mx:pe()}],my:[{my:pe()}],ms:[{ms:pe()}],me:[{me:pe()}],mt:[{mt:pe()}],mr:[{mr:pe()}],mb:[{mb:pe()}],ml:[{ml:pe()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ee()}],w:[{w:[u,"screen",...Ee()]}],"min-w":[{"min-w":[u,"screen","none",...Ee()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Ee()]}],h:[{h:["screen","lh",...Ee()]}],"min-h":[{"min-h":["screen","lh","none",...Ee()]}],"max-h":[{"max-h":["screen","lh",...Ee()]}],"font-size":[{text:["base",t,Zc,Wo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ae,Ug]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fg,Re]}],"font-family":[{font:[qD,Re,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ae,Re]}],"line-clamp":[{"line-clamp":[He,"none",Ae,Ug]}],leading:[{leading:[o,...R()]}],"list-image":[{"list-image":["none",Ae,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",Ae,Wo]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[He,"auto",Ae,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mi,Ae,Re],radial:["",Ae,Re],conic:[Mi,Ae,Re]},QD,GD]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,Ae,Re]}],"outline-w":[{outline:["",He,Zc,Wo]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",m,Ah,Rh]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",y,Ah,Rh]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[He,Wo]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",E,Ah,Rh]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[He,Ae,Re]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":H()}],"mask-image-linear-to-pos":[{"mask-linear-to":H()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":H()}],"mask-image-t-to-pos":[{"mask-t-to":H()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":H()}],"mask-image-r-to-pos":[{"mask-r-to":H()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":H()}],"mask-image-b-to-pos":[{"mask-b-to":H()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":H()}],"mask-image-l-to-pos":[{"mask-l-to":H()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":H()}],"mask-image-x-to-pos":[{"mask-x-to":H()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":H()}],"mask-image-y-to-pos":[{"mask-y-to":H()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[Ae,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":H()}],"mask-image-radial-to-pos":[{"mask-radial-to":H()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":H()}],"mask-image-conic-to-pos":[{"mask-conic-to":H()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ae,Re]}],filter:[{filter:["","none",Ae,Re]}],blur:[{blur:oe()}],brightness:[{brightness:[He,Ae,Re]}],contrast:[{contrast:[He,Ae,Re]}],"drop-shadow":[{"drop-shadow":["","none",I,Ah,Rh]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",He,Ae,Re]}],"hue-rotate":[{"hue-rotate":[He,Ae,Re]}],invert:[{invert:["",He,Ae,Re]}],saturate:[{saturate:[He,Ae,Re]}],sepia:[{sepia:["",He,Ae,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,Re]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[He,Ae,Re]}],"backdrop-contrast":[{"backdrop-contrast":[He,Ae,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,Ae,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,Ae,Re]}],"backdrop-invert":[{"backdrop-invert":["",He,Ae,Re]}],"backdrop-opacity":[{"backdrop-opacity":[He,Ae,Re]}],"backdrop-saturate":[{"backdrop-saturate":[He,Ae,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",He,Ae,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",Ae,Re]}],ease:[{ease:["linear","initial",j,Ae,Re]}],delay:[{delay:[He,Ae,Re]}],animate:[{animate:["none",V,Ae,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Ae,Re]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:ye()}],"rotate-x":[{"rotate-x":ye()}],"rotate-y":[{"rotate-y":ye()}],"rotate-z":[{"rotate-z":ye()}],scale:[{scale:xe()}],"scale-x":[{"scale-x":xe()}],"scale-y":[{"scale-y":xe()}],"scale-z":[{"scale-z":xe()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[Ae,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,Re]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[He,Zc,Wo,Ug]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ZD=ND(JD);function ot(...n){return ZD(vI(n))}function uf({className:n,...e}){return v.jsx("div",{"data-slot":"card",className:ot("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function kI({className:n,...e}){return v.jsx("div",{"data-slot":"card-header",className:ot("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function eO({className:n,...e}){return v.jsx("h4",{"data-slot":"card-title",className:ot("leading-none",n),...e})}function Rv({className:n,...e}){return v.jsx("div",{"data-slot":"card-content",className:ot("px-6 [&:last-child]:pb-6",n),...e})}function YS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function ti(...n){return e=>{let t=!1;const r=n.map(s=>{const o=YS(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():YS(n[s],null)}}}}function rt(...n){return S.useCallback(ti(...n),n)}var tO=Symbol.for("react.lazy"),df=ip[" use ".trim().toString()];function nO(n){return typeof n=="object"&&n!==null&&"then"in n}function NI(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===tO&&"_payload"in n&&nO(n._payload)}function op(n){const e=rO(n),t=S.forwardRef((r,s)=>{let{children:o,...l}=r;NI(o)&&typeof df=="function"&&(o=df(o._payload));const u=S.Children.toArray(o),d=u.find(iO);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}var DI=op("Slot");function rO(n){const e=S.forwardRef((t,r)=>{let{children:s,...o}=t;if(NI(s)&&typeof df=="function"&&(s=df(s._payload)),S.isValidElement(s)){const l=aO(s),u=oO(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ti(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var sO=Symbol("radix.slottable");function iO(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===sO}function oO(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function aO(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const XS=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,JS=vI,OI=(n,e)=>t=>{var r;if(e?.variants==null)return JS(n,t?.class,t?.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(p=>{const m=t?.[p],y=o?.[p];if(m===null)return null;const E=XS(m)||XS(y);return s[p][E]}),u=t&&Object.entries(t).reduce((p,m)=>{let[y,E]=m;return E===void 0||(p[y]=E),p},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,m)=>{let{class:y,className:E,...I}=m;return Object.entries(I).every(b=>{let[x,A]=b;return Array.isArray(A)?A.includes({...o,...u}[x]):{...o,...u}[x]===A})?[...p,y,E]:p},[]);return JS(n,l,d,t?.class,t?.className)},lO=OI("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function js({className:n,variant:e,asChild:t=!1,...r}){const s=t?DI:"span";return v.jsx(s,{"data-slot":"badge",className:ot(lO({variant:e}),n),...r})}const cO=OI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Rn=S.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},o)=>{const l=r?DI:"button";return v.jsx(l,{"data-slot":"button",className:ot(cO({variant:e,size:t,className:n})),ref:o,...s})});Rn.displayName="Button";var Hu=lI();const uO=aI(Hu);function xy(n,[e,t]){return Math.min(t,Math.max(e,n))}function be(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function dO(n,e){const t=S.createContext(e),r=o=>{const{children:l,...u}=o,d=S.useMemo(()=>u,Object.values(u));return v.jsx(t.Provider,{value:d,children:l})};r.displayName=n+"Provider";function s(o){const l=S.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,s]}function ao(n,e=[]){let t=[];function r(o,l){const u=S.createContext(l),d=t.length;t=[...t,l];const p=y=>{const{scope:E,children:I,...b}=y,x=E?.[n]?.[d]||u,A=S.useMemo(()=>b,Object.values(b));return v.jsx(x.Provider,{value:A,children:I})};p.displayName=o+"Provider";function m(y,E){const I=E?.[n]?.[d]||u,b=S.useContext(I);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[p,m]}const s=()=>{const o=t.map(l=>S.createContext(l));return function(u){const d=u?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return s.scopeName=n,[r,hO(s,...e)]}function hO(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((u,{useScope:d,scopeName:p})=>{const y=d(o)[`__scope${p}`];return{...u,...y}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function ZS(n){const e=fO(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(mO);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function fO(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=yO(s),u=gO(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ti(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var pO=Symbol("radix.slottable");function mO(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===pO}function gO(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function yO(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Av(n){const e=n+"CollectionProvider",[t,r]=ao(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:A,children:j}=x,V=Vs.useRef(null),z=Vs.useRef(new Map).current;return v.jsx(s,{scope:A,itemMap:z,collectionRef:V,children:j})};l.displayName=e;const u=n+"CollectionSlot",d=ZS(u),p=Vs.forwardRef((x,A)=>{const{scope:j,children:V}=x,z=o(u,j),G=rt(A,z.collectionRef);return v.jsx(d,{ref:G,children:V})});p.displayName=u;const m=n+"CollectionItemSlot",y="data-radix-collection-item",E=ZS(m),I=Vs.forwardRef((x,A)=>{const{scope:j,children:V,...z}=x,G=Vs.useRef(null),J=rt(A,G),Z=o(m,j);return Vs.useEffect(()=>(Z.itemMap.set(G,{ref:G,...z}),()=>void Z.itemMap.delete(G))),v.jsx(E,{[y]:"",ref:J,children:V})});I.displayName=m;function b(x){const A=o(n+"CollectionConsumer",x);return Vs.useCallback(()=>{const V=A.collectionRef.current;if(!V)return[];const z=Array.from(V.querySelectorAll(`[${y}]`));return Array.from(A.itemMap.values()).sort((Z,P)=>z.indexOf(Z.ref.current)-z.indexOf(P.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:l,Slot:p,ItemSlot:I},b,r]}var vO=S.createContext(void 0);function ap(n){const e=S.useContext(vO);return n||e||"ltr"}function _O(n){const e=wO(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(SO);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function wO(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=xO(s),u=TO(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ti(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var EO=Symbol("radix.slottable");function SO(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===EO}function TO(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function xO(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var IO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=IO.reduce((n,e)=>{const t=_O(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function MI(n,e){n&&Hu.flushSync(()=>n.dispatchEvent(e))}function Jt(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>e.current?.(...t),[])}function CO(n,e=globalThis?.document){const t=Jt(n);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var RO="DismissableLayer",Iy="dismissableLayer.update",AO="dismissableLayer.pointerDownOutside",bO="dismissableLayer.focusOutside",e0,LI=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lp=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...d}=n,p=S.useContext(LI),[m,y]=S.useState(null),E=m?.ownerDocument??globalThis?.document,[,I]=S.useState({}),b=rt(e,P=>y(P)),x=Array.from(p.layers),[A]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),j=x.indexOf(A),V=m?x.indexOf(m):-1,z=p.layersWithOutsidePointerEventsDisabled.size>0,G=V>=j,J=NO(P=>{const R=P.target,N=[...p.branches].some(O=>O.contains(R));!G||N||(s?.(P),l?.(P),P.defaultPrevented||u?.())},E),Z=DO(P=>{const R=P.target;[...p.branches].some(O=>O.contains(R))||(o?.(P),l?.(P),P.defaultPrevented||u?.())},E);return CO(P=>{V===p.layers.size-1&&(r?.(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},E),S.useEffect(()=>{if(m)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(e0=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(m)),p.layers.add(m),t0(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=e0)}},[m,E,t,p]),S.useEffect(()=>()=>{m&&(p.layers.delete(m),p.layersWithOutsidePointerEventsDisabled.delete(m),t0())},[m,p]),S.useEffect(()=>{const P=()=>I({});return document.addEventListener(Iy,P),()=>document.removeEventListener(Iy,P)},[]),v.jsx(Ge.div,{...d,ref:b,style:{pointerEvents:z?G?"auto":"none":void 0,...n.style},onFocusCapture:be(n.onFocusCapture,Z.onFocusCapture),onBlurCapture:be(n.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:be(n.onPointerDownCapture,J.onPointerDownCapture)})});lp.displayName=RO;var PO="DismissableLayerBranch",kO=S.forwardRef((n,e)=>{const t=S.useContext(LI),r=S.useRef(null),s=rt(e,r);return S.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),v.jsx(Ge.div,{...n,ref:s})});kO.displayName=PO;function NO(n,e=globalThis?.document){const t=Jt(n),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let d=function(){VI(AO,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function DO(n,e=globalThis?.document){const t=Jt(n),r=S.useRef(!1);return S.useEffect(()=>{const s=o=>{o.target&&!r.current&&VI(bO,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function t0(){const n=new CustomEvent(Iy);document.dispatchEvent(n)}function VI(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?MI(s,o):s.dispatchEvent(o)}var zg=0;function bv(){S.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??n0()),document.body.insertAdjacentElement("beforeend",n[1]??n0()),zg++,()=>{zg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zg--}},[])}function n0(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Bg="focusScope.autoFocusOnMount",$g="focusScope.autoFocusOnUnmount",r0={bubbles:!1,cancelable:!0},OO="FocusScope",cp=S.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=n,[u,d]=S.useState(null),p=Jt(s),m=Jt(o),y=S.useRef(null),E=rt(e,x=>d(x)),I=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let x=function(z){if(I.paused||!u)return;const G=z.target;u.contains(G)?y.current=G:Vi(y.current,{select:!0})},A=function(z){if(I.paused||!u)return;const G=z.relatedTarget;G!==null&&(u.contains(G)||Vi(y.current,{select:!0}))},j=function(z){if(document.activeElement===document.body)for(const J of z)J.removedNodes.length>0&&Vi(u)};document.addEventListener("focusin",x),document.addEventListener("focusout",A);const V=new MutationObserver(j);return u&&V.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",A),V.disconnect()}}},[r,u,I.paused]),S.useEffect(()=>{if(u){i0.add(I);const x=document.activeElement;if(!u.contains(x)){const j=new CustomEvent(Bg,r0);u.addEventListener(Bg,p),u.dispatchEvent(j),j.defaultPrevented||(MO(UO(jI(u)),{select:!0}),document.activeElement===x&&Vi(u))}return()=>{u.removeEventListener(Bg,p),setTimeout(()=>{const j=new CustomEvent($g,r0);u.addEventListener($g,m),u.dispatchEvent(j),j.defaultPrevented||Vi(x??document.body,{select:!0}),u.removeEventListener($g,m),i0.remove(I)},0)}}},[u,p,m,I]);const b=S.useCallback(x=>{if(!t&&!r||I.paused)return;const A=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,j=document.activeElement;if(A&&j){const V=x.currentTarget,[z,G]=LO(V);z&&G?!x.shiftKey&&j===G?(x.preventDefault(),t&&Vi(z,{select:!0})):x.shiftKey&&j===z&&(x.preventDefault(),t&&Vi(G,{select:!0})):j===V&&x.preventDefault()}},[t,r,I.paused]);return v.jsx(Ge.div,{tabIndex:-1,...l,ref:E,onKeyDown:b})});cp.displayName=OO;function MO(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Vi(r,{select:e}),document.activeElement!==t)return}function LO(n){const e=jI(n),t=s0(e,n),r=s0(e.reverse(),n);return[t,r]}function jI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function s0(n,e){for(const t of n)if(!VO(t,{upTo:e}))return t}function VO(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function jO(n){return n instanceof HTMLInputElement&&"select"in n}function Vi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&jO(n)&&e&&n.select()}}var i0=FO();function FO(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=o0(n,e),n.unshift(e)},remove(e){n=o0(n,e),n[0]?.resume()}}}function o0(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function UO(n){return n.filter(e=>e.tagName!=="A")}var Bt=globalThis?.document?S.useLayoutEffect:()=>{},zO=ip[" useId ".trim().toString()]||(()=>{}),BO=0;function Ws(n){const[e,t]=S.useState(zO());return Bt(()=>{t(r=>r??String(BO++))},[n]),n||(e?`radix-${e}`:"")}const $O=["top","right","bottom","left"],Xi=Math.min,Yn=Math.max,hf=Math.round,bh=Math.floor,os=n=>({x:n,y:n}),WO={left:"right",right:"left",bottom:"top",top:"bottom"},HO={start:"end",end:"start"};function Cy(n,e,t){return Yn(n,Xi(e,t))}function qs(n,e){return typeof n=="function"?n(e):n}function Ks(n){return n.split("-")[0]}function Gl(n){return n.split("-")[1]}function Pv(n){return n==="x"?"y":"x"}function kv(n){return n==="y"?"height":"width"}const GO=new Set(["top","bottom"]);function rs(n){return GO.has(Ks(n))?"y":"x"}function Nv(n){return Pv(rs(n))}function qO(n,e,t){t===void 0&&(t=!1);const r=Gl(n),s=Nv(n),o=kv(s);let l=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=ff(l)),[l,ff(l)]}function KO(n){const e=ff(n);return[Ry(n),e,Ry(e)]}function Ry(n){return n.replace(/start|end/g,e=>HO[e])}const a0=["left","right"],l0=["right","left"],QO=["top","bottom"],YO=["bottom","top"];function XO(n,e,t){switch(n){case"top":case"bottom":return t?e?l0:a0:e?a0:l0;case"left":case"right":return e?QO:YO;default:return[]}}function JO(n,e,t,r){const s=Gl(n);let o=XO(Ks(n),t==="start",r);return s&&(o=o.map(l=>l+"-"+s),e&&(o=o.concat(o.map(Ry)))),o}function ff(n){return n.replace(/left|right|bottom|top/g,e=>WO[e])}function ZO(n){return{top:0,right:0,bottom:0,left:0,...n}}function FI(n){return typeof n!="number"?ZO(n):{top:n,right:n,bottom:n,left:n}}function pf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function c0(n,e,t){let{reference:r,floating:s}=n;const o=rs(e),l=Nv(e),u=kv(l),d=Ks(e),p=o==="y",m=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,E=r[u]/2-s[u]/2;let I;switch(d){case"top":I={x:m,y:r.y-s.height};break;case"bottom":I={x:m,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y};break;case"left":I={x:r.x-s.width,y};break;default:I={x:r.x,y:r.y}}switch(Gl(e)){case"start":I[l]-=E*(t&&p?-1:1);break;case"end":I[l]+=E*(t&&p?-1:1);break}return I}const eM=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:l}=t,u=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:n,floating:e,strategy:s}),{x:m,y}=c0(p,r,d),E=r,I={},b=0;for(let x=0;x<u.length;x++){const{name:A,fn:j}=u[x],{x:V,y:z,data:G,reset:J}=await j({x:m,y,initialPlacement:r,placement:E,strategy:s,middlewareData:I,rects:p,platform:l,elements:{reference:n,floating:e}});m=V??m,y=z??y,I={...I,[A]:{...I[A],...G}},J&&b<=50&&(b++,typeof J=="object"&&(J.placement&&(E=J.placement),J.rects&&(p=J.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:s}):J.rects),{x:m,y}=c0(p,E,d)),x=-1)}return{x:m,y,placement:E,strategy:s,middlewareData:I}};async function Cu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:l,elements:u,strategy:d}=n,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:E=!1,padding:I=0}=qs(e,n),b=FI(I),A=u[E?y==="floating"?"reference":"floating":y],j=pf(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(A)))==null||t?A:A.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:p,rootBoundary:m,strategy:d})),V=y==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,z=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),G=await(o.isElement==null?void 0:o.isElement(z))?await(o.getScale==null?void 0:o.getScale(z))||{x:1,y:1}:{x:1,y:1},J=pf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:V,offsetParent:z,strategy:d}):V);return{top:(j.top-J.top+b.top)/G.y,bottom:(J.bottom-j.bottom+b.bottom)/G.y,left:(j.left-J.left+b.left)/G.x,right:(J.right-j.right+b.right)/G.x}}const tM=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:l,elements:u,middlewareData:d}=e,{element:p,padding:m=0}=qs(n,e)||{};if(p==null)return{};const y=FI(m),E={x:t,y:r},I=Nv(s),b=kv(I),x=await l.getDimensions(p),A=I==="y",j=A?"top":"left",V=A?"bottom":"right",z=A?"clientHeight":"clientWidth",G=o.reference[b]+o.reference[I]-E[I]-o.floating[b],J=E[I]-o.reference[I],Z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let P=Z?Z[z]:0;(!P||!await(l.isElement==null?void 0:l.isElement(Z)))&&(P=u.floating[z]||o.floating[b]);const R=G/2-J/2,N=P/2-x[b]/2-1,O=Xi(y[j],N),M=Xi(y[V],N),F=O,D=P-x[b]-M,me=P/2-x[b]/2+R,_e=Cy(F,me,D),pe=!d.arrow&&Gl(s)!=null&&me!==_e&&o.reference[b]/2-(me<F?O:M)-x[b]/2<0,Ee=pe?me<F?me-F:me-D:0;return{[I]:E[I]+Ee,data:{[I]:_e,centerOffset:me-_e-Ee,...pe&&{alignmentOffset:Ee}},reset:pe}}}),nM=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:l,initialPlacement:u,platform:d,elements:p}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:E,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...A}=qs(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const j=Ks(s),V=rs(u),z=Ks(u)===u,G=await(d.isRTL==null?void 0:d.isRTL(p.floating)),J=E||(z||!x?[ff(u)]:KO(u)),Z=b!=="none";!E&&Z&&J.push(...JO(u,x,b,G));const P=[u,...J],R=await Cu(e,A),N=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&N.push(R[j]),y){const me=qO(s,l,G);N.push(R[me[0]],R[me[1]])}if(O=[...O,{placement:s,overflows:N}],!N.every(me=>me<=0)){var M,F;const me=(((M=o.flip)==null?void 0:M.index)||0)+1,_e=P[me];if(_e&&(!(y==="alignment"?V!==rs(_e):!1)||O.every(W=>rs(W.placement)===V?W.overflows[0]>0:!0)))return{data:{index:me,overflows:O},reset:{placement:_e}};let pe=(F=O.filter(Ee=>Ee.overflows[0]<=0).sort((Ee,W)=>Ee.overflows[1]-W.overflows[1])[0])==null?void 0:F.placement;if(!pe)switch(I){case"bestFit":{var D;const Ee=(D=O.filter(W=>{if(Z){const ee=rs(W.placement);return ee===V||ee==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(ee=>ee>0).reduce((ee,ue)=>ee+ue,0)]).sort((W,ee)=>W[1]-ee[1])[0])==null?void 0:D[0];Ee&&(pe=Ee);break}case"initialPlacement":pe=u;break}if(s!==pe)return{reset:{placement:pe}}}return{}}}};function u0(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function d0(n){return $O.some(e=>n[e]>=0)}const rM=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=qs(n,e);switch(r){case"referenceHidden":{const o=await Cu(e,{...s,elementContext:"reference"}),l=u0(o,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:d0(l)}}}case"escaped":{const o=await Cu(e,{...s,altBoundary:!0}),l=u0(o,t.floating);return{data:{escapedOffsets:l,escaped:d0(l)}}}default:return{}}}}},UI=new Set(["left","top"]);async function sM(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=Ks(t),u=Gl(t),d=rs(t)==="y",p=UI.has(l)?-1:1,m=o&&d?-1:1,y=qs(e,n);let{mainAxis:E,crossAxis:I,alignmentAxis:b}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof b=="number"&&(I=u==="end"?b*-1:b),d?{x:I*m,y:E*p}:{x:E*p,y:I*m}}const iM=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:l,middlewareData:u}=e,d=await sM(e,n);return l===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:l}}}}},oM=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:A=>{let{x:j,y:V}=A;return{x:j,y:V}}},...d}=qs(n,e),p={x:t,y:r},m=await Cu(e,d),y=rs(Ks(s)),E=Pv(y);let I=p[E],b=p[y];if(o){const A=E==="y"?"top":"left",j=E==="y"?"bottom":"right",V=I+m[A],z=I-m[j];I=Cy(V,I,z)}if(l){const A=y==="y"?"top":"left",j=y==="y"?"bottom":"right",V=b+m[A],z=b-m[j];b=Cy(V,b,z)}const x=u.fn({...e,[E]:I,[y]:b});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[E]:o,[y]:l}}}}}},aM=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:d=!0,crossAxis:p=!0}=qs(n,e),m={x:t,y:r},y=rs(s),E=Pv(y);let I=m[E],b=m[y];const x=qs(u,e),A=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const z=E==="y"?"height":"width",G=o.reference[E]-o.floating[z]+A.mainAxis,J=o.reference[E]+o.reference[z]-A.mainAxis;I<G?I=G:I>J&&(I=J)}if(p){var j,V;const z=E==="y"?"width":"height",G=UI.has(Ks(s)),J=o.reference[y]-o.floating[z]+(G&&((j=l.offset)==null?void 0:j[y])||0)+(G?0:A.crossAxis),Z=o.reference[y]+o.reference[z]+(G?0:((V=l.offset)==null?void 0:V[y])||0)-(G?A.crossAxis:0);b<J?b=J:b>Z&&(b=Z)}return{[E]:I,[y]:b}}}},lM=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:l,elements:u}=e,{apply:d=()=>{},...p}=qs(n,e),m=await Cu(e,p),y=Ks(s),E=Gl(s),I=rs(s)==="y",{width:b,height:x}=o.floating;let A,j;y==="top"||y==="bottom"?(A=y,j=E===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(j=y,A=E==="end"?"top":"bottom");const V=x-m.top-m.bottom,z=b-m.left-m.right,G=Xi(x-m[A],V),J=Xi(b-m[j],z),Z=!e.middlewareData.shift;let P=G,R=J;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=z),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=V),Z&&!E){const O=Yn(m.left,0),M=Yn(m.right,0),F=Yn(m.top,0),D=Yn(m.bottom,0);I?R=b-2*(O!==0||M!==0?O+M:Yn(m.left,m.right)):P=x-2*(F!==0||D!==0?F+D:Yn(m.top,m.bottom))}await d({...e,availableWidth:R,availableHeight:P});const N=await l.getDimensions(u.floating);return b!==N.width||x!==N.height?{reset:{rects:!0}}:{}}}};function up(){return typeof window<"u"}function ql(n){return zI(n)?(n.nodeName||"").toLowerCase():"#document"}function Jn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function gs(n){var e;return(e=(zI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function zI(n){return up()?n instanceof Node||n instanceof Jn(n).Node:!1}function Dr(n){return up()?n instanceof Element||n instanceof Jn(n).Element:!1}function ps(n){return up()?n instanceof HTMLElement||n instanceof Jn(n).HTMLElement:!1}function h0(n){return!up()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Jn(n).ShadowRoot}const cM=new Set(["inline","contents"]);function Gu(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Or(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!cM.has(s)}const uM=new Set(["table","td","th"]);function dM(n){return uM.has(ql(n))}const hM=[":popover-open",":modal"];function dp(n){return hM.some(e=>{try{return n.matches(e)}catch{return!1}})}const fM=["transform","translate","scale","rotate","perspective"],pM=["transform","translate","scale","rotate","perspective","filter"],mM=["paint","layout","strict","content"];function Dv(n){const e=Ov(),t=Dr(n)?Or(n):n;return fM.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||pM.some(r=>(t.willChange||"").includes(r))||mM.some(r=>(t.contain||"").includes(r))}function gM(n){let e=Ji(n);for(;ps(e)&&!Pl(e);){if(Dv(e))return e;if(dp(e))return null;e=Ji(e)}return null}function Ov(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const yM=new Set(["html","body","#document"]);function Pl(n){return yM.has(ql(n))}function Or(n){return Jn(n).getComputedStyle(n)}function hp(n){return Dr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ji(n){if(ql(n)==="html")return n;const e=n.assignedSlot||n.parentNode||h0(n)&&n.host||gs(n);return h0(e)?e.host:e}function BI(n){const e=Ji(n);return Pl(e)?n.ownerDocument?n.ownerDocument.body:n.body:ps(e)&&Gu(e)?e:BI(e)}function Ru(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=BI(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),l=Jn(s);if(o){const u=Ay(l);return e.concat(l,l.visualViewport||[],Gu(s)?s:[],u&&t?Ru(u):[])}return e.concat(s,Ru(s,[],t))}function Ay(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function $I(n){const e=Or(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ps(n),o=s?n.offsetWidth:t,l=s?n.offsetHeight:r,u=hf(t)!==o||hf(r)!==l;return u&&(t=o,r=l),{width:t,height:r,$:u}}function Mv(n){return Dr(n)?n:n.contextElement}function wl(n){const e=Mv(n);if(!ps(e))return os(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=$I(e);let l=(o?hf(t.width):t.width)/r,u=(o?hf(t.height):t.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const vM=os(0);function WI(n){const e=Jn(n);return!Ov()||!e.visualViewport?vM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _M(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Jn(n)?!1:e}function ea(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=Mv(n);let l=os(1);e&&(r?Dr(r)&&(l=wl(r)):l=wl(n));const u=_M(o,t,r)?WI(o):os(0);let d=(s.left+u.x)/l.x,p=(s.top+u.y)/l.y,m=s.width/l.x,y=s.height/l.y;if(o){const E=Jn(o),I=r&&Dr(r)?Jn(r):r;let b=E,x=Ay(b);for(;x&&r&&I!==b;){const A=wl(x),j=x.getBoundingClientRect(),V=Or(x),z=j.left+(x.clientLeft+parseFloat(V.paddingLeft))*A.x,G=j.top+(x.clientTop+parseFloat(V.paddingTop))*A.y;d*=A.x,p*=A.y,m*=A.x,y*=A.y,d+=z,p+=G,b=Jn(x),x=Ay(b)}}return pf({width:m,height:y,x:d,y:p})}function fp(n,e){const t=hp(n).scrollLeft;return e?e.left+t:ea(gs(n)).left+t}function HI(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-fp(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function wM(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",l=gs(r),u=e?dp(e.floating):!1;if(r===l||u&&o)return t;let d={scrollLeft:0,scrollTop:0},p=os(1);const m=os(0),y=ps(r);if((y||!y&&!o)&&((ql(r)!=="body"||Gu(l))&&(d=hp(r)),ps(r))){const I=ea(r);p=wl(r),m.x=I.x+r.clientLeft,m.y=I.y+r.clientTop}const E=l&&!y&&!o?HI(l,d):os(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-d.scrollLeft*p.x+m.x+E.x,y:t.y*p.y-d.scrollTop*p.y+m.y+E.y}}function EM(n){return Array.from(n.getClientRects())}function SM(n){const e=gs(n),t=hp(n),r=n.ownerDocument.body,s=Yn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Yn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+fp(n);const u=-t.scrollTop;return Or(r).direction==="rtl"&&(l+=Yn(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:l,y:u}}const f0=25;function TM(n,e){const t=Jn(n),r=gs(n),s=t.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;const m=Ov();(!m||m&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const p=fp(r);if(p<=0){const m=r.ownerDocument,y=m.body,E=getComputedStyle(y),I=m.compatMode==="CSS1Compat"&&parseFloat(E.marginLeft)+parseFloat(E.marginRight)||0,b=Math.abs(r.clientWidth-y.clientWidth-I);b<=f0&&(o-=b)}else p<=f0&&(o+=p);return{width:o,height:l,x:u,y:d}}const xM=new Set(["absolute","fixed"]);function IM(n,e){const t=ea(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=ps(n)?wl(n):os(1),l=n.clientWidth*o.x,u=n.clientHeight*o.y,d=s*o.x,p=r*o.y;return{width:l,height:u,x:d,y:p}}function p0(n,e,t){let r;if(e==="viewport")r=TM(n,t);else if(e==="document")r=SM(gs(n));else if(Dr(e))r=IM(e,t);else{const s=WI(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return pf(r)}function GI(n,e){const t=Ji(n);return t===e||!Dr(t)||Pl(t)?!1:Or(t).position==="fixed"||GI(t,e)}function CM(n,e){const t=e.get(n);if(t)return t;let r=Ru(n,[],!1).filter(u=>Dr(u)&&ql(u)!=="body"),s=null;const o=Or(n).position==="fixed";let l=o?Ji(n):n;for(;Dr(l)&&!Pl(l);){const u=Or(l),d=Dv(l);!d&&u.position==="fixed"&&(s=null),(o?!d&&!s:!d&&u.position==="static"&&!!s&&xM.has(s.position)||Gu(l)&&!d&&GI(n,l))?r=r.filter(m=>m!==l):s=u,l=Ji(l)}return e.set(n,r),r}function RM(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const l=[...t==="clippingAncestors"?dp(e)?[]:CM(e,this._c):[].concat(t),r],u=l[0],d=l.reduce((p,m)=>{const y=p0(e,m,s);return p.top=Yn(y.top,p.top),p.right=Xi(y.right,p.right),p.bottom=Xi(y.bottom,p.bottom),p.left=Yn(y.left,p.left),p},p0(e,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function AM(n){const{width:e,height:t}=$I(n);return{width:e,height:t}}function bM(n,e,t){const r=ps(e),s=gs(e),o=t==="fixed",l=ea(n,!0,o,e);let u={scrollLeft:0,scrollTop:0};const d=os(0);function p(){d.x=fp(s)}if(r||!r&&!o)if((ql(e)!=="body"||Gu(s))&&(u=hp(e)),r){const I=ea(e,!0,o,e);d.x=I.x+e.clientLeft,d.y=I.y+e.clientTop}else s&&p();o&&!r&&s&&p();const m=s&&!r&&!o?HI(s,u):os(0),y=l.left+u.scrollLeft-d.x-m.x,E=l.top+u.scrollTop-d.y-m.y;return{x:y,y:E,width:l.width,height:l.height}}function Wg(n){return Or(n).position==="static"}function m0(n,e){if(!ps(n)||Or(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return gs(n)===t&&(t=t.ownerDocument.body),t}function qI(n,e){const t=Jn(n);if(dp(n))return t;if(!ps(n)){let s=Ji(n);for(;s&&!Pl(s);){if(Dr(s)&&!Wg(s))return s;s=Ji(s)}return t}let r=m0(n,e);for(;r&&dM(r)&&Wg(r);)r=m0(r,e);return r&&Pl(r)&&Wg(r)&&!Dv(r)?t:r||gM(n)||t}const PM=async function(n){const e=this.getOffsetParent||qI,t=this.getDimensions,r=await t(n.floating);return{reference:bM(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function kM(n){return Or(n).direction==="rtl"}const NM={convertOffsetParentRelativeRectToViewportRelativeRect:wM,getDocumentElement:gs,getClippingRect:RM,getOffsetParent:qI,getElementRects:PM,getClientRects:EM,getDimensions:AM,getScale:wl,isElement:Dr,isRTL:kM};function KI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function DM(n,e){let t=null,r;const s=gs(n);function o(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),o();const p=n.getBoundingClientRect(),{left:m,top:y,width:E,height:I}=p;if(u||e(),!E||!I)return;const b=bh(y),x=bh(s.clientWidth-(m+E)),A=bh(s.clientHeight-(y+I)),j=bh(m),z={rootMargin:-b+"px "+-x+"px "+-A+"px "+-j+"px",threshold:Yn(0,Xi(1,d))||1};let G=!0;function J(Z){const P=Z[0].intersectionRatio;if(P!==d){if(!G)return l();P?l(!1,P):r=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!KI(p,n.getBoundingClientRect())&&l(),G=!1}try{t=new IntersectionObserver(J,{...z,root:s.ownerDocument})}catch{t=new IntersectionObserver(J,z)}t.observe(n)}return l(!0),o}function OM(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,p=Mv(n),m=s||o?[...p?Ru(p):[],...Ru(e)]:[];m.forEach(j=>{s&&j.addEventListener("scroll",t,{passive:!0}),o&&j.addEventListener("resize",t)});const y=p&&u?DM(p,t):null;let E=-1,I=null;l&&(I=new ResizeObserver(j=>{let[V]=j;V&&V.target===p&&I&&(I.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var z;(z=I)==null||z.observe(e)})),t()}),p&&!d&&I.observe(p),I.observe(e));let b,x=d?ea(n):null;d&&A();function A(){const j=ea(n);x&&!KI(x,j)&&t(),x=j,b=requestAnimationFrame(A)}return t(),()=>{var j;m.forEach(V=>{s&&V.removeEventListener("scroll",t),o&&V.removeEventListener("resize",t)}),y?.(),(j=I)==null||j.disconnect(),I=null,d&&cancelAnimationFrame(b)}}const MM=iM,LM=oM,VM=nM,jM=lM,FM=rM,g0=tM,UM=aM,zM=(n,e,t)=>{const r=new Map,s={platform:NM,...t},o={...s.platform,_c:r};return eM(n,e,{...s,platform:o})};var BM=typeof document<"u",$M=function(){},Gh=BM?S.useLayoutEffect:$M;function mf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!mf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!mf(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function QI(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function y0(n,e){const t=QI(n);return Math.round(e*t)/t}function Hg(n){const e=S.useRef(n);return Gh(()=>{e.current=n}),e}function WM(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:d,open:p}=n,[m,y]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[E,I]=S.useState(r);mf(E,r)||I(r);const[b,x]=S.useState(null),[A,j]=S.useState(null),V=S.useCallback(W=>{W!==Z.current&&(Z.current=W,x(W))},[]),z=S.useCallback(W=>{W!==P.current&&(P.current=W,j(W))},[]),G=o||b,J=l||A,Z=S.useRef(null),P=S.useRef(null),R=S.useRef(m),N=d!=null,O=Hg(d),M=Hg(s),F=Hg(p),D=S.useCallback(()=>{if(!Z.current||!P.current)return;const W={placement:e,strategy:t,middleware:E};M.current&&(W.platform=M.current),zM(Z.current,P.current,W).then(ee=>{const ue={...ee,isPositioned:F.current!==!1};me.current&&!mf(R.current,ue)&&(R.current=ue,Hu.flushSync(()=>{y(ue)}))})},[E,e,t,M,F]);Gh(()=>{p===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,y(W=>({...W,isPositioned:!1})))},[p]);const me=S.useRef(!1);Gh(()=>(me.current=!0,()=>{me.current=!1}),[]),Gh(()=>{if(G&&(Z.current=G),J&&(P.current=J),G&&J){if(O.current)return O.current(G,J,D);D()}},[G,J,D,O,N]);const _e=S.useMemo(()=>({reference:Z,floating:P,setReference:V,setFloating:z}),[V,z]),pe=S.useMemo(()=>({reference:G,floating:J}),[G,J]),Ee=S.useMemo(()=>{const W={position:t,left:0,top:0};if(!pe.floating)return W;const ee=y0(pe.floating,m.x),ue=y0(pe.floating,m.y);return u?{...W,transform:"translate("+ee+"px, "+ue+"px)",...QI(pe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:ue}},[t,u,pe.floating,m.x,m.y]);return S.useMemo(()=>({...m,update:D,refs:_e,elements:pe,floatingStyles:Ee}),[m,D,_e,pe,Ee])}const HM=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?g0({element:r.current,padding:s}).fn(t):{}:r?g0({element:r,padding:s}).fn(t):{}}}},GM=(n,e)=>({...MM(n),options:[n,e]}),qM=(n,e)=>({...LM(n),options:[n,e]}),KM=(n,e)=>({...UM(n),options:[n,e]}),QM=(n,e)=>({...VM(n),options:[n,e]}),YM=(n,e)=>({...jM(n),options:[n,e]}),XM=(n,e)=>({...FM(n),options:[n,e]}),JM=(n,e)=>({...HM(n),options:[n,e]});var ZM="Arrow",YI=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return v.jsx(Ge.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});YI.displayName=ZM;var e2=YI;function t2(n){const[e,t]=S.useState(void 0);return Bt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let l,u;if("borderBoxSize"in o){const d=o.borderBoxSize,p=Array.isArray(d)?d[0]:d;l=p.inlineSize,u=p.blockSize}else l=n.offsetWidth,u=n.offsetHeight;t({width:l,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Lv="Popper",[XI,pp]=ao(Lv),[n2,JI]=XI(Lv),ZI=n=>{const{__scopePopper:e,children:t}=n,[r,s]=S.useState(null);return v.jsx(n2,{scope:e,anchor:r,onAnchorChange:s,children:t})};ZI.displayName=Lv;var eC="PopperAnchor",tC=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=JI(eC,t),l=S.useRef(null),u=rt(e,l),d=S.useRef(null);return S.useEffect(()=>{const p=d.current;d.current=r?.current||l.current,p!==d.current&&o.onAnchorChange(d.current)}),r?null:v.jsx(Ge.div,{...s,ref:u})});tC.displayName=eC;var Vv="PopperContent",[r2,s2]=XI(Vv),nC=S.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:p=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:E=!1,updatePositionStrategy:I="optimized",onPlaced:b,...x}=n,A=JI(Vv,t),[j,V]=S.useState(null),z=rt(e,H=>V(H)),[G,J]=S.useState(null),Z=t2(G),P=Z?.width??0,R=Z?.height??0,N=r+(o!=="center"?"-"+o:""),O=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},M=Array.isArray(p)?p:[p],F=M.length>0,D={padding:O,boundary:M.filter(o2),altBoundary:F},{refs:me,floatingStyles:_e,placement:pe,isPositioned:Ee,middlewareData:W}=WM({strategy:"fixed",placement:N,whileElementsMounted:(...H)=>OM(...H,{animationFrame:I==="always"}),elements:{reference:A.anchor},middleware:[GM({mainAxis:s+R,alignmentAxis:l}),d&&qM({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?KM():void 0,...D}),d&&QM({...D}),YM({...D,apply:({elements:H,rects:oe,availableWidth:ye,availableHeight:xe})=>{const{width:je,height:$e}=oe.reference,Ue=H.floating.style;Ue.setProperty("--radix-popper-available-width",`${ye}px`),Ue.setProperty("--radix-popper-available-height",`${xe}px`),Ue.setProperty("--radix-popper-anchor-width",`${je}px`),Ue.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),G&&JM({element:G,padding:u}),a2({arrowWidth:P,arrowHeight:R}),E&&XM({strategy:"referenceHidden",...D})]}),[ee,ue]=iC(pe),B=Jt(b);Bt(()=>{Ee&&B?.()},[Ee,B]);const ne=W.arrow?.x,te=W.arrow?.y,se=W.arrow?.centerOffset!==0,[he,ce]=S.useState();return Bt(()=>{j&&ce(window.getComputedStyle(j).zIndex)},[j]),v.jsx("div",{ref:me.setFloating,"data-radix-popper-content-wrapper":"",style:{..._e,transform:Ee?_e.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:v.jsx(r2,{scope:t,placedSide:ee,onArrowChange:J,arrowX:ne,arrowY:te,shouldHideArrow:se,children:v.jsx(Ge.div,{"data-side":ee,"data-align":ue,...x,ref:z,style:{...x.style,animation:Ee?void 0:"none"}})})})});nC.displayName=Vv;var rC="PopperArrow",i2={top:"bottom",right:"left",bottom:"top",left:"right"},sC=S.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=s2(rC,r),l=i2[o.placedSide];return v.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:v.jsx(e2,{...s,ref:t,style:{...s.style,display:"block"}})})});sC.displayName=rC;function o2(n){return n!==null}var a2=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,l=s.arrow?.centerOffset!==0,u=l?0:n.arrowWidth,d=l?0:n.arrowHeight,[p,m]=iC(t),y={start:"0%",center:"50%",end:"100%"}[m],E=(s.arrow?.x??0)+u/2,I=(s.arrow?.y??0)+d/2;let b="",x="";return p==="bottom"?(b=l?y:`${E}px`,x=`${-d}px`):p==="top"?(b=l?y:`${E}px`,x=`${r.floating.height+d}px`):p==="right"?(b=`${-d}px`,x=l?y:`${I}px`):p==="left"&&(b=`${r.floating.width+d}px`,x=l?y:`${I}px`),{data:{x:b,y:x}}}});function iC(n){const[e,t="center"]=n.split("-");return[e,t]}var oC=ZI,aC=tC,lC=nC,cC=sC,l2="Portal",mp=S.forwardRef((n,e)=>{const{container:t,...r}=n,[s,o]=S.useState(!1);Bt(()=>o(!0),[]);const l=t||s&&globalThis?.document?.body;return l?uO.createPortal(v.jsx(Ge.div,{...r,ref:e}),l):null});mp.displayName=l2;function c2(n){const e=u2(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(h2);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function u2(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=p2(s),u=f2(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ti(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var d2=Symbol("radix.slottable");function h2(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===d2}function f2(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function p2(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var m2=ip[" useInsertionEffect ".trim().toString()]||Bt;function Au({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,o,l]=g2({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:s;{const m=S.useRef(n!==void 0);S.useEffect(()=>{const y=m.current;y!==u&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const p=S.useCallback(m=>{if(u){const y=y2(m)?m(n):m;y!==n&&l.current?.(y)}else o(m)},[u,n,o,l]);return[d,p]}function g2({defaultProp:n,onChange:e}){const[t,r]=S.useState(n),s=S.useRef(t),o=S.useRef(e);return m2(()=>{o.current=e},[e]),S.useEffect(()=>{s.current!==t&&(o.current?.(t),s.current=t)},[t,s]),[t,r,o]}function y2(n){return typeof n=="function"}function v2(n){const e=S.useRef({value:n,previous:n});return S.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var uC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_2="VisuallyHidden",w2=S.forwardRef((n,e)=>v.jsx(Ge.span,{...n,ref:e,style:{...uC,...n.style}}));w2.displayName=_2;var E2=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},al=new WeakMap,Ph=new WeakMap,kh={},Gg=0,dC=function(n){return n&&(n.host||dC(n.parentNode))},S2=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=dC(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},T2=function(n,e,t,r){var s=S2(e,Array.isArray(n)?n:[n]);kh[t]||(kh[t]=new WeakMap);var o=kh[t],l=[],u=new Set,d=new Set(s),p=function(y){!y||u.has(y)||(u.add(y),p(y.parentNode))};s.forEach(p);var m=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(E){if(u.has(E))m(E);else try{var I=E.getAttribute(r),b=I!==null&&I!=="false",x=(al.get(E)||0)+1,A=(o.get(E)||0)+1;al.set(E,x),o.set(E,A),l.push(E),x===1&&b&&Ph.set(E,!0),A===1&&E.setAttribute(t,"true"),b||E.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",E,j)}})};return m(e),u.clear(),Gg++,function(){l.forEach(function(y){var E=al.get(y)-1,I=o.get(y)-1;al.set(y,E),o.set(y,I),E||(Ph.has(y)||y.removeAttribute(r),Ph.delete(y)),I||y.removeAttribute(t)}),Gg--,Gg||(al=new WeakMap,al=new WeakMap,Ph=new WeakMap,kh={})}},jv=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=E2(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),T2(r,s,t,"aria-hidden")):function(){return null}},ns=function(){return ns=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ns.apply(this,arguments)};function hC(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function x2(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var qh="right-scroll-bar-position",Kh="width-before-scroll-bar",I2="with-scroll-bars-hidden",C2="--removed-body-scroll-bar-size";function qg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function R2(n,e){var t=S.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var A2=typeof window<"u"?S.useLayoutEffect:S.useEffect,v0=new WeakMap;function b2(n,e){var t=R2(null,function(r){return n.forEach(function(s){return qg(s,r)})});return A2(function(){var r=v0.get(t);if(r){var s=new Set(r),o=new Set(n),l=t.current;s.forEach(function(u){o.has(u)||qg(u,null)}),o.forEach(function(u){s.has(u)||qg(u,l)})}v0.set(t,n)},[n]),t}function P2(n){return n}function k2(n,e){e===void 0&&(e=P2);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var l=e(o,r);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(r=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){r=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(o),l=t}var d=function(){var m=l;l=[],m.forEach(o)},p=function(){return Promise.resolve().then(d)};p(),t={push:function(m){l.push(m),p()},filter:function(m){return l=l.filter(m),t}}}};return s}function N2(n){n===void 0&&(n={});var e=k2(null);return e.options=ns({async:!0,ssr:!1},n),e}var fC=function(n){var e=n.sideCar,t=hC(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,ns({},t))};fC.isSideCarExport=!0;function D2(n,e){return n.useMedium(e),fC}var pC=N2(),Kg=function(){},gp=S.forwardRef(function(n,e){var t=S.useRef(null),r=S.useState({onScrollCapture:Kg,onWheelCapture:Kg,onTouchMoveCapture:Kg}),s=r[0],o=r[1],l=n.forwardProps,u=n.children,d=n.className,p=n.removeScrollBar,m=n.enabled,y=n.shards,E=n.sideCar,I=n.noRelative,b=n.noIsolation,x=n.inert,A=n.allowPinchZoom,j=n.as,V=j===void 0?"div":j,z=n.gapMode,G=hC(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),J=E,Z=b2([t,e]),P=ns(ns({},G),s);return S.createElement(S.Fragment,null,m&&S.createElement(J,{sideCar:pC,removeScrollBar:p,shards:y,noRelative:I,noIsolation:b,inert:x,setCallbacks:o,allowPinchZoom:!!A,lockRef:t,gapMode:z}),l?S.cloneElement(S.Children.only(u),ns(ns({},P),{ref:Z})):S.createElement(V,ns({},P,{className:d,ref:Z}),u))});gp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gp.classNames={fullWidth:Kh,zeroRight:qh};var O2=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function M2(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=O2();return e&&n.setAttribute("nonce",e),n}function L2(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function V2(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var j2=function(){var n=0,e=null;return{add:function(t){n==0&&(e=M2())&&(L2(e,t),V2(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},F2=function(){var n=j2();return function(e,t){S.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},mC=function(){var n=F2(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},U2={left:0,top:0,right:0,gap:0},Qg=function(n){return parseInt(n||"",10)||0},z2=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Qg(t),Qg(r),Qg(s)]},B2=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return U2;var e=z2(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},$2=mC(),El="data-scroll-locked",W2=function(n,e,t,r){var s=n.left,o=n.top,l=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(I2,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(El,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qh,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Kh,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(qh," .").concat(qh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Kh," .").concat(Kh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(El,`] {
    `).concat(C2,": ").concat(u,`px;
  }
`)},_0=function(){var n=parseInt(document.body.getAttribute(El)||"0",10);return isFinite(n)?n:0},H2=function(){S.useEffect(function(){return document.body.setAttribute(El,(_0()+1).toString()),function(){var n=_0()-1;n<=0?document.body.removeAttribute(El):document.body.setAttribute(El,n.toString())}},[])},G2=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;H2();var o=S.useMemo(function(){return B2(s)},[s]);return S.createElement($2,{styles:W2(o,!e,s,t?"":"!important")})},by=!1;if(typeof window<"u")try{var Nh=Object.defineProperty({},"passive",{get:function(){return by=!0,!0}});window.addEventListener("test",Nh,Nh),window.removeEventListener("test",Nh,Nh)}catch{by=!1}var ll=by?{passive:!1}:!1,q2=function(n){return n.tagName==="TEXTAREA"},gC=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!q2(n)&&t[e]==="visible")},K2=function(n){return gC(n,"overflowY")},Q2=function(n){return gC(n,"overflowX")},w0=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=yC(n,r);if(s){var o=vC(n,r),l=o[1],u=o[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Y2=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},X2=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},yC=function(n,e){return n==="v"?K2(e):Q2(e)},vC=function(n,e){return n==="v"?Y2(e):X2(e)},J2=function(n,e){return n==="h"&&e==="rtl"?-1:1},Z2=function(n,e,t,r,s){var o=J2(n,window.getComputedStyle(e).direction),l=o*r,u=t.target,d=e.contains(u),p=!1,m=l>0,y=0,E=0;do{if(!u)break;var I=vC(n,u),b=I[0],x=I[1],A=I[2],j=x-A-o*b;(b||j)&&yC(n,u)&&(y+=j,E+=b);var V=u.parentNode;u=V&&V.nodeType===Node.DOCUMENT_FRAGMENT_NODE?V.host:V}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(m&&Math.abs(y)<1||!m&&Math.abs(E)<1)&&(p=!0),p},Dh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},E0=function(n){return[n.deltaX,n.deltaY]},S0=function(n){return n&&"current"in n?n.current:n},eL=function(n,e){return n[0]===e[0]&&n[1]===e[1]},tL=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},nL=0,cl=[];function rL(n){var e=S.useRef([]),t=S.useRef([0,0]),r=S.useRef(),s=S.useState(nL++)[0],o=S.useState(mC)[0],l=S.useRef(n);S.useEffect(function(){l.current=n},[n]),S.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var x=x2([n.lockRef.current],(n.shards||[]).map(S0),!0).filter(Boolean);return x.forEach(function(A){return A.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=S.useCallback(function(x,A){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var j=Dh(x),V=t.current,z="deltaX"in x?x.deltaX:V[0]-j[0],G="deltaY"in x?x.deltaY:V[1]-j[1],J,Z=x.target,P=Math.abs(z)>Math.abs(G)?"h":"v";if("touches"in x&&P==="h"&&Z.type==="range")return!1;var R=w0(P,Z);if(!R)return!0;if(R?J=P:(J=P==="v"?"h":"v",R=w0(P,Z)),!R)return!1;if(!r.current&&"changedTouches"in x&&(z||G)&&(r.current=J),!J)return!0;var N=r.current||J;return Z2(N,A,x,N==="h"?z:G)},[]),d=S.useCallback(function(x){var A=x;if(!(!cl.length||cl[cl.length-1]!==o)){var j="deltaY"in A?E0(A):Dh(A),V=e.current.filter(function(J){return J.name===A.type&&(J.target===A.target||A.target===J.shadowParent)&&eL(J.delta,j)})[0];if(V&&V.should){A.cancelable&&A.preventDefault();return}if(!V){var z=(l.current.shards||[]).map(S0).filter(Boolean).filter(function(J){return J.contains(A.target)}),G=z.length>0?u(A,z[0]):!l.current.noIsolation;G&&A.cancelable&&A.preventDefault()}}},[]),p=S.useCallback(function(x,A,j,V){var z={name:x,delta:A,target:j,should:V,shadowParent:sL(j)};e.current.push(z),setTimeout(function(){e.current=e.current.filter(function(G){return G!==z})},1)},[]),m=S.useCallback(function(x){t.current=Dh(x),r.current=void 0},[]),y=S.useCallback(function(x){p(x.type,E0(x),x.target,u(x,n.lockRef.current))},[]),E=S.useCallback(function(x){p(x.type,Dh(x),x.target,u(x,n.lockRef.current))},[]);S.useEffect(function(){return cl.push(o),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:E}),document.addEventListener("wheel",d,ll),document.addEventListener("touchmove",d,ll),document.addEventListener("touchstart",m,ll),function(){cl=cl.filter(function(x){return x!==o}),document.removeEventListener("wheel",d,ll),document.removeEventListener("touchmove",d,ll),document.removeEventListener("touchstart",m,ll)}},[]);var I=n.removeScrollBar,b=n.inert;return S.createElement(S.Fragment,null,b?S.createElement(o,{styles:tL(s)}):null,I?S.createElement(G2,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function sL(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const iL=D2(pC,rL);var yp=S.forwardRef(function(n,e){return S.createElement(gp,ns({},n,{ref:e,sideCar:iL}))});yp.classNames=gp.classNames;var oL=[" ","Enter","ArrowUp","ArrowDown"],aL=[" ","Enter"],ta="Select",[vp,_p,lL]=Av(ta),[Kl]=ao(ta,[lL,pp]),wp=pp(),[cL,lo]=Kl(ta),[uL,dL]=Kl(ta),_C=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:o,value:l,defaultValue:u,onValueChange:d,dir:p,name:m,autoComplete:y,disabled:E,required:I,form:b}=n,x=wp(e),[A,j]=S.useState(null),[V,z]=S.useState(null),[G,J]=S.useState(!1),Z=ap(p),[P,R]=Au({prop:r,defaultProp:s??!1,onChange:o,caller:ta}),[N,O]=Au({prop:l,defaultProp:u,onChange:d,caller:ta}),M=S.useRef(null),F=A?b||!!A.closest("form"):!0,[D,me]=S.useState(new Set),_e=Array.from(D).map(pe=>pe.props.value).join(";");return v.jsx(oC,{...x,children:v.jsxs(cL,{required:I,scope:e,trigger:A,onTriggerChange:j,valueNode:V,onValueNodeChange:z,valueNodeHasChildren:G,onValueNodeHasChildrenChange:J,contentId:Ws(),value:N,onValueChange:O,open:P,onOpenChange:R,dir:Z,triggerPointerDownPosRef:M,disabled:E,children:[v.jsx(vp.Provider,{scope:e,children:v.jsx(uL,{scope:n.__scopeSelect,onNativeOptionAdd:S.useCallback(pe=>{me(Ee=>new Set(Ee).add(pe))},[]),onNativeOptionRemove:S.useCallback(pe=>{me(Ee=>{const W=new Set(Ee);return W.delete(pe),W})},[]),children:t})}),F?v.jsxs(zC,{"aria-hidden":!0,required:I,tabIndex:-1,name:m,autoComplete:y,value:N,onChange:pe=>O(pe.target.value),disabled:E,form:b,children:[N===void 0?v.jsx("option",{value:""}):null,Array.from(D)]},_e):null]})})};_C.displayName=ta;var wC="SelectTrigger",EC=S.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,o=wp(t),l=lo(wC,t),u=l.disabled||r,d=rt(e,l.onTriggerChange),p=_p(t),m=S.useRef("touch"),[y,E,I]=$C(x=>{const A=p().filter(z=>!z.disabled),j=A.find(z=>z.value===l.value),V=WC(A,x,j);V!==void 0&&l.onValueChange(V.value)}),b=x=>{u||(l.onOpenChange(!0),I()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return v.jsx(aC,{asChild:!0,...o,children:v.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":BC(l.value)?"":void 0,...s,ref:d,onClick:be(s.onClick,x=>{x.currentTarget.focus(),m.current!=="mouse"&&b(x)}),onPointerDown:be(s.onPointerDown,x=>{m.current=x.pointerType;const A=x.target;A.hasPointerCapture(x.pointerId)&&A.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:be(s.onKeyDown,x=>{const A=y.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&E(x.key),!(A&&x.key===" ")&&oL.includes(x.key)&&(b(),x.preventDefault())})})})});EC.displayName=wC;var SC="SelectValue",TC=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:o,placeholder:l="",...u}=n,d=lo(SC,t),{onValueNodeHasChildrenChange:p}=d,m=o!==void 0,y=rt(e,d.onValueNodeChange);return Bt(()=>{p(m)},[p,m]),v.jsx(Ge.span,{...u,ref:y,style:{pointerEvents:"none"},children:BC(d.value)?v.jsx(v.Fragment,{children:l}):o})});TC.displayName=SC;var hL="SelectIcon",xC=S.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return v.jsx(Ge.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});xC.displayName=hL;var fL="SelectPortal",IC=n=>v.jsx(mp,{asChild:!0,...n});IC.displayName=fL;var na="SelectContent",CC=S.forwardRef((n,e)=>{const t=lo(na,n.__scopeSelect),[r,s]=S.useState();if(Bt(()=>{s(new DocumentFragment)},[]),!t.open){const o=r;return o?Hu.createPortal(v.jsx(RC,{scope:n.__scopeSelect,children:v.jsx(vp.Slot,{scope:n.__scopeSelect,children:v.jsx("div",{children:n.children})})}),o):null}return v.jsx(AC,{...n,ref:e})});CC.displayName=na;var xr=10,[RC,co]=Kl(na),pL="SelectContentImpl",mL=c2("SelectContent.RemoveScroll"),AC=S.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:l,side:u,sideOffset:d,align:p,alignOffset:m,arrowPadding:y,collisionBoundary:E,collisionPadding:I,sticky:b,hideWhenDetached:x,avoidCollisions:A,...j}=n,V=lo(na,t),[z,G]=S.useState(null),[J,Z]=S.useState(null),P=rt(e,H=>G(H)),[R,N]=S.useState(null),[O,M]=S.useState(null),F=_p(t),[D,me]=S.useState(!1),_e=S.useRef(!1);S.useEffect(()=>{if(z)return jv(z)},[z]),bv();const pe=S.useCallback(H=>{const[oe,...ye]=F().map($e=>$e.ref.current),[xe]=ye.slice(-1),je=document.activeElement;for(const $e of H)if($e===je||($e?.scrollIntoView({block:"nearest"}),$e===oe&&J&&(J.scrollTop=0),$e===xe&&J&&(J.scrollTop=J.scrollHeight),$e?.focus(),document.activeElement!==je))return},[F,J]),Ee=S.useCallback(()=>pe([R,z]),[pe,R,z]);S.useEffect(()=>{D&&Ee()},[D,Ee]);const{onOpenChange:W,triggerPointerDownPosRef:ee}=V;S.useEffect(()=>{if(z){let H={x:0,y:0};const oe=xe=>{H={x:Math.abs(Math.round(xe.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(xe.pageY)-(ee.current?.y??0))}},ye=xe=>{H.x<=10&&H.y<=10?xe.preventDefault():z.contains(xe.target)||W(!1),document.removeEventListener("pointermove",oe),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",ye,{capture:!0})}}},[z,W,ee]),S.useEffect(()=>{const H=()=>W(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[W]);const[ue,B]=$C(H=>{const oe=F().filter(je=>!je.disabled),ye=oe.find(je=>je.ref.current===document.activeElement),xe=WC(oe,H,ye);xe&&setTimeout(()=>xe.ref.current.focus())}),ne=S.useCallback((H,oe,ye)=>{const xe=!_e.current&&!ye;(V.value!==void 0&&V.value===oe||xe)&&(N(H),xe&&(_e.current=!0))},[V.value]),te=S.useCallback(()=>z?.focus(),[z]),se=S.useCallback((H,oe,ye)=>{const xe=!_e.current&&!ye;(V.value!==void 0&&V.value===oe||xe)&&M(H)},[V.value]),he=r==="popper"?Py:bC,ce=he===Py?{side:u,sideOffset:d,align:p,alignOffset:m,arrowPadding:y,collisionBoundary:E,collisionPadding:I,sticky:b,hideWhenDetached:x,avoidCollisions:A}:{};return v.jsx(RC,{scope:t,content:z,viewport:J,onViewportChange:Z,itemRefCallback:ne,selectedItem:R,onItemLeave:te,itemTextRefCallback:se,focusSelectedItem:Ee,selectedItemText:O,position:r,isPositioned:D,searchRef:ue,children:v.jsx(yp,{as:mL,allowPinchZoom:!0,children:v.jsx(cp,{asChild:!0,trapped:V.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:be(s,H=>{V.trigger?.focus({preventScroll:!0}),H.preventDefault()}),children:v.jsx(lp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>V.onOpenChange(!1),children:v.jsx(he,{role:"listbox",id:V.contentId,"data-state":V.open?"open":"closed",dir:V.dir,onContextMenu:H=>H.preventDefault(),...j,...ce,onPlaced:()=>me(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:be(j.onKeyDown,H=>{const oe=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!oe&&H.key.length===1&&B(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let xe=F().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(H.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const je=H.target,$e=xe.indexOf(je);xe=xe.slice($e+1)}setTimeout(()=>pe(xe)),H.preventDefault()}})})})})})})});AC.displayName=pL;var gL="SelectItemAlignedPosition",bC=S.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,o=lo(na,t),l=co(na,t),[u,d]=S.useState(null),[p,m]=S.useState(null),y=rt(e,P=>m(P)),E=_p(t),I=S.useRef(!1),b=S.useRef(!0),{viewport:x,selectedItem:A,selectedItemText:j,focusSelectedItem:V}=l,z=S.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&p&&x&&A&&j){const P=o.trigger.getBoundingClientRect(),R=p.getBoundingClientRect(),N=o.valueNode.getBoundingClientRect(),O=j.getBoundingClientRect();if(o.dir!=="rtl"){const je=O.left-R.left,$e=N.left-je,Ue=P.left-$e,ht=P.width+Ue,bn=Math.max(ht,R.width),Tn=window.innerWidth-xr,xn=xy($e,[xr,Math.max(xr,Tn-bn)]);u.style.minWidth=ht+"px",u.style.left=xn+"px"}else{const je=R.right-O.right,$e=window.innerWidth-N.right-je,Ue=window.innerWidth-P.right-$e,ht=P.width+Ue,bn=Math.max(ht,R.width),Tn=window.innerWidth-xr,xn=xy($e,[xr,Math.max(xr,Tn-bn)]);u.style.minWidth=ht+"px",u.style.right=xn+"px"}const M=E(),F=window.innerHeight-xr*2,D=x.scrollHeight,me=window.getComputedStyle(p),_e=parseInt(me.borderTopWidth,10),pe=parseInt(me.paddingTop,10),Ee=parseInt(me.borderBottomWidth,10),W=parseInt(me.paddingBottom,10),ee=_e+pe+D+W+Ee,ue=Math.min(A.offsetHeight*5,ee),B=window.getComputedStyle(x),ne=parseInt(B.paddingTop,10),te=parseInt(B.paddingBottom,10),se=P.top+P.height/2-xr,he=F-se,ce=A.offsetHeight/2,H=A.offsetTop+ce,oe=_e+pe+H,ye=ee-oe;if(oe<=se){const je=M.length>0&&A===M[M.length-1].ref.current;u.style.bottom="0px";const $e=p.clientHeight-x.offsetTop-x.offsetHeight,Ue=Math.max(he,ce+(je?te:0)+$e+Ee),ht=oe+Ue;u.style.height=ht+"px"}else{const je=M.length>0&&A===M[0].ref.current;u.style.top="0px";const Ue=Math.max(se,_e+x.offsetTop+(je?ne:0)+ce)+ye;u.style.height=Ue+"px",x.scrollTop=oe-se+x.offsetTop}u.style.margin=`${xr}px 0`,u.style.minHeight=ue+"px",u.style.maxHeight=F+"px",r?.(),requestAnimationFrame(()=>I.current=!0)}},[E,o.trigger,o.valueNode,u,p,x,A,j,o.dir,r]);Bt(()=>z(),[z]);const[G,J]=S.useState();Bt(()=>{p&&J(window.getComputedStyle(p).zIndex)},[p]);const Z=S.useCallback(P=>{P&&b.current===!0&&(z(),V?.(),b.current=!1)},[z,V]);return v.jsx(vL,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:I,onScrollButtonChange:Z,children:v.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:G},children:v.jsx(Ge.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});bC.displayName=gL;var yL="SelectPopperPosition",Py=S.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=xr,...o}=n,l=wp(t);return v.jsx(lC,{...l,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Py.displayName=yL;var[vL,Fv]=Kl(na,{}),ky="SelectViewport",PC=S.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,o=co(ky,t),l=Fv(ky,t),u=rt(e,o.onViewportChange),d=S.useRef(0);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),v.jsx(vp.Slot,{scope:t,children:v.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:be(s.onScroll,p=>{const m=p.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:E}=l;if(E?.current&&y){const I=Math.abs(d.current-m.scrollTop);if(I>0){const b=window.innerHeight-xr*2,x=parseFloat(y.style.minHeight),A=parseFloat(y.style.height),j=Math.max(x,A);if(j<b){const V=j+I,z=Math.min(b,V),G=V-z;y.style.height=z+"px",y.style.bottom==="0px"&&(m.scrollTop=G>0?G:0,y.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});PC.displayName=ky;var kC="SelectGroup",[_L,wL]=Kl(kC),EL=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Ws();return v.jsx(_L,{scope:t,id:s,children:v.jsx(Ge.div,{role:"group","aria-labelledby":s,...r,ref:e})})});EL.displayName=kC;var NC="SelectLabel",SL=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=wL(NC,t);return v.jsx(Ge.div,{id:s.id,...r,ref:e})});SL.displayName=NC;var gf="SelectItem",[TL,DC]=Kl(gf),OC=S.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:o,...l}=n,u=lo(gf,t),d=co(gf,t),p=u.value===r,[m,y]=S.useState(o??""),[E,I]=S.useState(!1),b=rt(e,V=>d.itemRefCallback?.(V,r,s)),x=Ws(),A=S.useRef("touch"),j=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.jsx(TL,{scope:t,value:r,disabled:s,textId:x,isSelected:p,onItemTextChange:S.useCallback(V=>{y(z=>z||(V?.textContent??"").trim())},[]),children:v.jsx(vp.ItemSlot,{scope:t,value:r,disabled:s,textValue:m,children:v.jsx(Ge.div,{role:"option","aria-labelledby":x,"data-highlighted":E?"":void 0,"aria-selected":p&&E,"data-state":p?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:b,onFocus:be(l.onFocus,()=>I(!0)),onBlur:be(l.onBlur,()=>I(!1)),onClick:be(l.onClick,()=>{A.current!=="mouse"&&j()}),onPointerUp:be(l.onPointerUp,()=>{A.current==="mouse"&&j()}),onPointerDown:be(l.onPointerDown,V=>{A.current=V.pointerType}),onPointerMove:be(l.onPointerMove,V=>{A.current=V.pointerType,s?d.onItemLeave?.():A.current==="mouse"&&V.currentTarget.focus({preventScroll:!0})}),onPointerLeave:be(l.onPointerLeave,V=>{V.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:be(l.onKeyDown,V=>{d.searchRef?.current!==""&&V.key===" "||(aL.includes(V.key)&&j(),V.key===" "&&V.preventDefault())})})})})});OC.displayName=gf;var su="SelectItemText",MC=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...o}=n,l=lo(su,t),u=co(su,t),d=DC(su,t),p=dL(su,t),[m,y]=S.useState(null),E=rt(e,j=>y(j),d.onItemTextChange,j=>u.itemTextRefCallback?.(j,d.value,d.disabled)),I=m?.textContent,b=S.useMemo(()=>v.jsx("option",{value:d.value,disabled:d.disabled,children:I},d.value),[d.disabled,d.value,I]),{onNativeOptionAdd:x,onNativeOptionRemove:A}=p;return Bt(()=>(x(b),()=>A(b)),[x,A,b]),v.jsxs(v.Fragment,{children:[v.jsx(Ge.span,{id:d.textId,...o,ref:E}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Hu.createPortal(o.children,l.valueNode):null]})});MC.displayName=su;var LC="SelectItemIndicator",VC=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return DC(LC,t).isSelected?v.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});VC.displayName=LC;var Ny="SelectScrollUpButton",jC=S.forwardRef((n,e)=>{const t=co(Ny,n.__scopeSelect),r=Fv(Ny,n.__scopeSelect),[s,o]=S.useState(!1),l=rt(e,r.onScrollButtonChange);return Bt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=d.scrollTop>0;o(p)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?v.jsx(UC,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});jC.displayName=Ny;var Dy="SelectScrollDownButton",FC=S.forwardRef((n,e)=>{const t=co(Dy,n.__scopeSelect),r=Fv(Dy,n.__scopeSelect),[s,o]=S.useState(!1),l=rt(e,r.onScrollButtonChange);return Bt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<p;o(m)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?v.jsx(UC,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});FC.displayName=Dy;var UC=S.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,o=co("SelectScrollButton",t),l=S.useRef(null),u=_p(t),d=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),Bt(()=>{u().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),v.jsx(Ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:be(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:be(s.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:be(s.onPointerLeave,()=>{d()})})}),xL="SelectSeparator",IL=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return v.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e})});IL.displayName=xL;var Oy="SelectArrow",CL=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=wp(t),o=lo(Oy,t),l=co(Oy,t);return o.open&&l.position==="popper"?v.jsx(cC,{...s,...r,ref:e}):null});CL.displayName=Oy;var RL="SelectBubbleInput",zC=S.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=S.useRef(null),o=rt(r,s),l=v2(e);return S.useEffect(()=>{const u=s.current;if(!u)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&m){const y=new Event("change",{bubbles:!0});m.call(u,e),u.dispatchEvent(y)}},[l,e]),v.jsx(Ge.select,{...t,style:{...uC,...t.style},ref:o,defaultValue:e})});zC.displayName=RL;function BC(n){return n===""||n===void 0}function $C(n){const e=Jt(n),t=S.useRef(""),r=S.useRef(0),s=S.useCallback(l=>{const u=t.current+l;e(u),(function d(p){t.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(u)},[e]),o=S.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,o]}function WC(n,e,t){const s=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=AL(n,Math.max(o,0));s.length===1&&(l=l.filter(p=>p!==t));const d=l.find(p=>p.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function AL(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var bL=_C,PL=EC,kL=TC,NL=xC,DL=IC,OL=CC,ML=PC,LL=OC,VL=MC,jL=VC,FL=jC,UL=FC;function yf({...n}){return v.jsx(bL,{"data-slot":"select",...n})}function vf({...n}){return v.jsx(kL,{"data-slot":"select-value",...n})}function _f({className:n,size:e="default",children:t,...r}){return v.jsxs(PL,{"data-slot":"select-trigger","data-size":e,className:ot("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,v.jsx(NL,{asChild:!0,children:v.jsx(hI,{className:"size-4 opacity-50"})})]})}function wf({className:n,children:e,position:t="popper",...r}){return v.jsx(DL,{children:v.jsxs(OL,{"data-slot":"select-content",className:ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[v.jsx(zL,{}),v.jsx(ML,{className:ot("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),v.jsx(BL,{})]})})}function kl({className:n,children:e,...t}){return v.jsxs(LL,{"data-slot":"select-item",className:ot("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[v.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:v.jsx(jL,{children:v.jsx(KN,{className:"size-4"})})}),v.jsx(VL,{children:e})]})}function zL({className:n,...e}){return v.jsx(FL,{"data-slot":"select-scroll-up-button",className:ot("flex cursor-default items-center justify-center py-1",n),...e,children:v.jsx(ZN,{className:"size-4"})})}function BL({className:n,...e}){return v.jsx(UL,{"data-slot":"select-scroll-down-button",className:ot("flex cursor-default items-center justify-center py-1",n),...e,children:v.jsx(hI,{className:"size-4"})})}const $L="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Ef(n){const[e,t]=S.useState(!1),r=()=>{t(!0)},{src:s,alt:o,style:l,className:u,...d}=n;return e?v.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${u??""}`,style:l,children:v.jsx("div",{className:"flex items-center justify-center w-full h-full",children:v.jsx("img",{src:$L,alt:"Error loading image",...d,"data-original-url":s})})}):v.jsx("img",{src:s,alt:o,className:u,style:l,...d,onError:r})}const WL=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],HL=({routes:n,onRouteClick:e,filterGrade:t,onFilterChange:r,selectedRouteId:s})=>v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(fI,{className:"size-4 text-muted-foreground"}),v.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by grade:"})]}),v.jsxs(yf,{value:t||"all",onValueChange:o=>r(o==="all"?"":o),children:[v.jsx(_f,{className:"w-32",children:v.jsx(vf,{placeholder:"All grades"})}),v.jsxs(wf,{children:[v.jsx(kl,{value:"all",children:"All grades"}),WL.map(o=>v.jsx(kl,{value:o,children:o},o))]})]}),t&&v.jsx(Rn,{variant:"outline",size:"sm",onClick:()=>r(""),children:"Clear filter"})]}),v.jsxs("div",{className:"landscape-mobile:space-y-4",children:[v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4 landscape-mobile:hidden",children:n.map(o=>v.jsxs(uf,{className:`cursor-pointer hover:shadow-lg transition-all overflow-hidden ${s===o.id?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>e(o),children:[v.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[v.jsx(Ef,{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"}),v.jsx("div",{className:"absolute top-3 left-3",children:v.jsx(js,{variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:o.grade})}),v.jsx("div",{className:"absolute top-3 right-3",children:v.jsx(js,{variant:"outline",className:"bg-background/90 backdrop-blur-sm border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-background)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff"},children:o.color})})]}),v.jsx(Rv,{className:"p-4",children:v.jsxs("div",{className:"space-y-3",children:[v.jsx("h3",{className:"font-medium truncate",children:o.name}),v.jsx("div",{className:"flex items-center justify-center",children:v.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:5},(l,u)=>v.jsx(Iu,{className:`size-4 ${u<Math.round(o.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},u)),v.jsx("span",{className:"text-sm font-medium ml-2",children:o.averageRating>0?o.averageRating.toFixed(1):""}),v.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",o.totalReviews,")"]})]})}),v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"text-xs text-muted-foreground",children:["Set by ",o.setter]})})]})})]},o.id))}),v.jsx("div",{className:"hidden landscape-mobile:block space-y-4",children:n.map(o=>{const l=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=p=>Array.from({length:5},(m,y)=>v.jsx(Iu,{className:`size-3 ${y<p?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},y)),d=p=>{const m=new Date(p),E=Math.abs(new Date().getTime()-m.getTime());return Math.ceil(E/(1e3*60*60*24))};return v.jsx(uf,{className:`cursor-pointer hover:shadow-lg transition-all overflow-hidden ${s===o.id?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>e(o),children:v.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-3",children:[v.jsx("h3",{className:"text-2xl font-medium",children:o.name}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(js,{variant:"secondary",className:"text-base px-3 py-1.5",children:o.grade}),v.jsxs(js,{variant:"outline",className:"text-base px-3 py-1.5 border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-background)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff",borderColor:"transparent"},children:[o.color," holds"]}),d(o.dateSet)<=7&&v.jsx(js,{variant:"outline",className:"text-xs px-2 py-1 bg-green-50 text-green-700 border-green-200",children:"New"})]})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(mI,{className:"size-4 text-muted-foreground"}),v.jsxs("span",{className:"text-sm",children:["Route setter: ",v.jsx("strong",{children:o.setter})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(dI,{className:"size-4 text-muted-foreground"}),v.jsxs("span",{className:"text-sm",children:["Set on ",l(o.dateSet)]}),v.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",d(o.dateSet)," days ago)"]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex items-center gap-1",children:u(Math.round(o.averageRating))}),v.jsx("span",{className:"font-medium",children:o.averageRating>0?o.averageRating.toFixed(1):""}),v.jsxs("span",{className:"text-muted-foreground",children:["(",o.totalReviews," review",o.totalReviews!==1?"s":"",")"]})]}),o.totalReviews>0&&v.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[v.jsx(pI,{className:"size-4"}),v.jsx("span",{children:o.totalReviews===1?"Latest review":`${o.totalReviews} climbers have reviewed this route`})]})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"aspect-[4/3] relative overflow-hidden rounded-lg",children:v.jsx(Ef,{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"})}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"font-medium text-sm",children:"Route Description"}),v.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:o.description||"No description available for this route."})]})]})]})},o.id)})})]}),n.length===0&&v.jsx("div",{className:"text-center py-12",children:v.jsx("p",{className:"text-muted-foreground",children:"No routes found matching your filter."})})]});function GL(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var fr=n=>{const{present:e,children:t}=n,r=qL(e),s=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),o=rt(r.ref,KL(s));return typeof t=="function"||r.isPresent?S.cloneElement(s,{ref:o}):null};fr.displayName="Presence";function qL(n){const[e,t]=S.useState(),r=S.useRef(null),s=S.useRef(n),o=S.useRef("none"),l=n?"mounted":"unmounted",[u,d]=GL(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const p=Oh(r.current);o.current=u==="mounted"?p:"none"},[u]),Bt(()=>{const p=r.current,m=s.current;if(m!==n){const E=o.current,I=Oh(p);n?d("MOUNT"):I==="none"||p?.display==="none"?d("UNMOUNT"):d(m&&E!==I?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),Bt(()=>{if(e){let p;const m=e.ownerDocument.defaultView??window,y=I=>{const x=Oh(r.current).includes(CSS.escape(I.animationName));if(I.target===e&&x&&(d("ANIMATION_END"),!s.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",p=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},E=I=>{I.target===e&&(o.current=Oh(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(p),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(p=>{r.current=p?getComputedStyle(p):null,t(p)},[])}}function Oh(n){return n?.animationName||"none"}function KL(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function QL(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var Uv="ScrollArea",[HC]=ao(Uv),[YL,pr]=HC(Uv),GC=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:o=600,...l}=n,[u,d]=S.useState(null),[p,m]=S.useState(null),[y,E]=S.useState(null),[I,b]=S.useState(null),[x,A]=S.useState(null),[j,V]=S.useState(0),[z,G]=S.useState(0),[J,Z]=S.useState(!1),[P,R]=S.useState(!1),N=rt(e,M=>d(M)),O=ap(s);return v.jsx(YL,{scope:t,type:r,dir:O,scrollHideDelay:o,scrollArea:u,viewport:p,onViewportChange:m,content:y,onContentChange:E,scrollbarX:I,onScrollbarXChange:b,scrollbarXEnabled:J,onScrollbarXEnabledChange:Z,scrollbarY:x,onScrollbarYChange:A,scrollbarYEnabled:P,onScrollbarYEnabledChange:R,onCornerWidthChange:V,onCornerHeightChange:G,children:v.jsx(Ge.div,{dir:O,...l,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":z+"px",...n.style}})})});GC.displayName=Uv;var qC="ScrollAreaViewport",KC=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...o}=n,l=pr(qC,t),u=S.useRef(null),d=rt(e,u,l.onViewportChange);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),v.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...n.style},children:v.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});KC.displayName=qC;var ys="ScrollAreaScrollbar",QC=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=pr(ys,n.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,u=n.orientation==="horizontal";return S.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),s.type==="hover"?v.jsx(XL,{...r,ref:e,forceMount:t}):s.type==="scroll"?v.jsx(JL,{...r,ref:e,forceMount:t}):s.type==="auto"?v.jsx(YC,{...r,ref:e,forceMount:t}):s.type==="always"?v.jsx(zv,{...r,ref:e}):null});QC.displayName=ys;var XL=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=pr(ys,n.__scopeScrollArea),[o,l]=S.useState(!1);return S.useEffect(()=>{const u=s.scrollArea;let d=0;if(u){const p=()=>{window.clearTimeout(d),l(!0)},m=()=>{d=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),v.jsx(fr,{present:t||o,children:v.jsx(YC,{"data-state":o?"visible":"hidden",...r,ref:e})})}),JL=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=pr(ys,n.__scopeScrollArea),o=n.orientation==="horizontal",l=Sp(()=>d("SCROLL_END"),100),[u,d]=QL("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,s.scrollHideDelay,d]),S.useEffect(()=>{const p=s.viewport,m=o?"scrollLeft":"scrollTop";if(p){let y=p[m];const E=()=>{const I=p[m];y!==I&&(d("SCROLL"),l()),y=I};return p.addEventListener("scroll",E),()=>p.removeEventListener("scroll",E)}},[s.viewport,o,d,l]),v.jsx(fr,{present:t||u!=="hidden",children:v.jsx(zv,{"data-state":u==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:be(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:be(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),YC=S.forwardRef((n,e)=>{const t=pr(ys,n.__scopeScrollArea),{forceMount:r,...s}=n,[o,l]=S.useState(!1),u=n.orientation==="horizontal",d=Sp(()=>{if(t.viewport){const p=t.viewport.offsetWidth<t.viewport.scrollWidth,m=t.viewport.offsetHeight<t.viewport.scrollHeight;l(u?p:m)}},10);return Nl(t.viewport,d),Nl(t.content,d),v.jsx(fr,{present:r||o,children:v.jsx(zv,{"data-state":o?"visible":"hidden",...s,ref:e})})}),zv=S.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=pr(ys,n.__scopeScrollArea),o=S.useRef(null),l=S.useRef(0),[u,d]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=tR(u.viewport,u.content),m={...r,sizes:u,onSizesChange:d,hasThumb:p>0&&p<1,onThumbChange:E=>o.current=E,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:E=>l.current=E};function y(E,I){return sV(E,l.current,u,I)}return t==="horizontal"?v.jsx(ZL,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const E=s.viewport.scrollLeft,I=T0(E,u,s.dir);o.current.style.transform=`translate3d(${I}px, 0, 0)`}},onWheelScroll:E=>{s.viewport&&(s.viewport.scrollLeft=E)},onDragScroll:E=>{s.viewport&&(s.viewport.scrollLeft=y(E,s.dir))}}):t==="vertical"?v.jsx(eV,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const E=s.viewport.scrollTop,I=T0(E,u);o.current.style.transform=`translate3d(0, ${I}px, 0)`}},onWheelScroll:E=>{s.viewport&&(s.viewport.scrollTop=E)},onDragScroll:E=>{s.viewport&&(s.viewport.scrollTop=y(E))}}):null}),ZL=S.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=pr(ys,n.__scopeScrollArea),[l,u]=S.useState(),d=S.useRef(null),p=rt(e,d,o.onScrollbarXChange);return S.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),v.jsx(JC,{"data-orientation":"horizontal",...s,ref:p,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ep(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.x),onDragScroll:m=>n.onDragScroll(m.x),onWheelScroll:(m,y)=>{if(o.viewport){const E=o.viewport.scrollLeft+m.deltaX;n.onWheelScroll(E),rR(E,y)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Tf(l.paddingLeft),paddingEnd:Tf(l.paddingRight)}})}})}),eV=S.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=pr(ys,n.__scopeScrollArea),[l,u]=S.useState(),d=S.useRef(null),p=rt(e,d,o.onScrollbarYChange);return S.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),v.jsx(JC,{"data-orientation":"vertical",...s,ref:p,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ep(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.y),onDragScroll:m=>n.onDragScroll(m.y),onWheelScroll:(m,y)=>{if(o.viewport){const E=o.viewport.scrollTop+m.deltaY;n.onWheelScroll(E),rR(E,y)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Tf(l.paddingTop),paddingEnd:Tf(l.paddingBottom)}})}})}),[tV,XC]=HC(ys),JC=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:p,onWheelScroll:m,onResize:y,...E}=n,I=pr(ys,t),[b,x]=S.useState(null),A=rt(e,N=>x(N)),j=S.useRef(null),V=S.useRef(""),z=I.viewport,G=r.content-r.viewport,J=Jt(m),Z=Jt(d),P=Sp(y,10);function R(N){if(j.current){const O=N.clientX-j.current.left,M=N.clientY-j.current.top;p({x:O,y:M})}}return S.useEffect(()=>{const N=O=>{const M=O.target;b?.contains(M)&&J(O,G)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[z,b,G,J]),S.useEffect(Z,[r,Z]),Nl(b,P),Nl(I.content,P),v.jsx(tV,{scope:t,scrollbar:b,hasThumb:s,onThumbChange:Jt(o),onThumbPointerUp:Jt(l),onThumbPositionChange:Z,onThumbPointerDown:Jt(u),children:v.jsx(Ge.div,{...E,ref:A,style:{position:"absolute",...E.style},onPointerDown:be(n.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),j.current=b.getBoundingClientRect(),V.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I.viewport&&(I.viewport.style.scrollBehavior="auto"),R(N))}),onPointerMove:be(n.onPointerMove,R),onPointerUp:be(n.onPointerUp,N=>{const O=N.target;O.hasPointerCapture(N.pointerId)&&O.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=V.current,I.viewport&&(I.viewport.style.scrollBehavior=""),j.current=null})})})}),Sf="ScrollAreaThumb",ZC=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=XC(Sf,n.__scopeScrollArea);return v.jsx(fr,{present:t||s.hasThumb,children:v.jsx(nV,{ref:e,...r})})}),nV=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,o=pr(Sf,t),l=XC(Sf,t),{onThumbPositionChange:u}=l,d=rt(e,y=>l.onThumbChange(y)),p=S.useRef(void 0),m=Sp(()=>{p.current&&(p.current(),p.current=void 0)},100);return S.useEffect(()=>{const y=o.viewport;if(y){const E=()=>{if(m(),!p.current){const I=iV(y,u);p.current=I,u()}};return u(),y.addEventListener("scroll",E),()=>y.removeEventListener("scroll",E)}},[o.viewport,m,u]),v.jsx(Ge.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:be(n.onPointerDownCapture,y=>{const I=y.target.getBoundingClientRect(),b=y.clientX-I.left,x=y.clientY-I.top;l.onThumbPointerDown({x:b,y:x})}),onPointerUp:be(n.onPointerUp,l.onThumbPointerUp)})});ZC.displayName=Sf;var Bv="ScrollAreaCorner",eR=S.forwardRef((n,e)=>{const t=pr(Bv,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?v.jsx(rV,{...n,ref:e}):null});eR.displayName=Bv;var rV=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=pr(Bv,t),[o,l]=S.useState(0),[u,d]=S.useState(0),p=!!(o&&u);return Nl(s.scrollbarX,()=>{const m=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(m),d(m)}),Nl(s.scrollbarY,()=>{const m=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(m),l(m)}),p?v.jsx(Ge.div,{...r,ref:e,style:{width:o,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Tf(n){return n?parseInt(n,10):0}function tR(n,e){const t=n/e;return isNaN(t)?0:t}function Ep(n){const e=tR(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function sV(n,e,t,r="ltr"){const s=Ep(t),o=s/2,l=e||o,u=s-l,d=t.scrollbar.paddingStart+l,p=t.scrollbar.size-t.scrollbar.paddingEnd-u,m=t.content-t.viewport,y=r==="ltr"?[0,m]:[m*-1,0];return nR([d,p],y)(n)}function T0(n,e,t="ltr"){const r=Ep(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,l=e.content-e.viewport,u=o-r,d=t==="ltr"?[0,l]:[l*-1,0],p=xy(n,d);return nR([0,l],[0,u])(p)}function nR(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function rR(n,e){return n>0&&n<e}var iV=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return(function s(){const o={left:n.scrollLeft,top:n.scrollTop},l=t.left!==o.left,u=t.top!==o.top;(l||u)&&e(),t=o,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function Sp(n,e){const t=Jt(n),r=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),S.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Nl(n,e){const t=Jt(e);Bt(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var oV=GC,aV=KC,lV=eR;function sR({className:n,children:e,...t}){return v.jsxs(oV,{"data-slot":"scroll-area",className:ot("relative",n),...t,children:[v.jsx(aV,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),v.jsx(cV,{}),v.jsx(lV,{})]})}function cV({className:n,orientation:e="vertical",...t}){return v.jsx(QC,{"data-slot":"scroll-area-scrollbar",orientation:e,className:ot("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:v.jsx(ZC,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const uV=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],dV=({routes:n,onRouteClick:e,filterGrade:t,onFilterChange:r,selectedRouteId:s})=>v.jsxs("div",{className:"h-full flex flex-col",children:[v.jsxs("div",{className:"p-4 border-b space-y-4 flex-shrink-0",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(fI,{className:"size-4 text-muted-foreground"}),v.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by grade"})]}),v.jsxs(yf,{value:t||"all",onValueChange:o=>r(o==="all"?"":o),children:[v.jsx(_f,{className:"w-full",children:v.jsx(vf,{placeholder:"All grades"})}),v.jsxs(wf,{children:[v.jsx(kl,{value:"all",children:"All grades"}),uV.map(o=>v.jsx(kl,{value:o,children:o},o))]})]}),t&&v.jsx(Rn,{variant:"outline",size:"sm",onClick:()=>r(""),className:"w-full",children:"Clear filter"})]}),v.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.length," route",n.length!==1?"s":""]})]}),v.jsxs(sR,{className:"flex-1",children:[v.jsx("div",{className:"divide-y divide-border",children:n.map(o=>v.jsx("button",{onClick:l=>{l.preventDefault(),e(o)},type:"button",className:`w-full text-left p-4 hover:bg-accent transition-colors ${s===o.id?"bg-accent border-l-4 border-l-primary":"border-l-4 border-l-transparent"}`,children:v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-start justify-between gap-2",children:[v.jsx("h3",{className:`font-medium line-clamp-1 ${s===o.id?"text-primary":""}`,children:o.name}),v.jsx(XN,{className:`size-4 flex-shrink-0 ${s===o.id?"text-primary":"text-muted-foreground"}`})]}),v.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[v.jsx(js,{variant:"secondary",className:"text-xs",children:o.grade}),v.jsx(js,{variant:"outline",className:"text-xs border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-muted)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":o.color.toLowerCase()==="yellow"?"#eab308":o.color.toLowerCase()==="purple"?"#a855f7":o.color.toLowerCase()==="orange"?"#f97316":"var(--color-muted)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff"},children:o.color})]}),v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(l,u)=>v.jsx(Iu,{className:`size-3 ${u<Math.round(o.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},u))}),v.jsx("span",{className:"text-xs text-muted-foreground",children:o.averageRating>0?o.averageRating.toFixed(1):""}),v.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",o.totalReviews,")"]})]}),v.jsxs("div",{className:"text-xs text-muted-foreground",children:["Set by ",o.setter]})]})},o.id))}),n.length===0&&v.jsx("div",{className:"p-8 text-center",children:v.jsx("p",{className:"text-sm text-muted-foreground",children:"No routes found matching your filter."})})]})]});var hV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fV=hV.reduce((n,e)=>{const t=op(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),pV="Separator",x0="horizontal",mV=["horizontal","vertical"],iR=S.forwardRef((n,e)=>{const{decorative:t,orientation:r=x0,...s}=n,o=gV(r)?r:x0,u=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return v.jsx(fV.div,{"data-orientation":o,...u,...s,ref:e})});iR.displayName=pV;function gV(n){return mV.includes(n)}var yV=iR;function vV({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return v.jsx(yV,{"data-slot":"separator-root",decorative:t,orientation:e,className:ot("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}function oR({className:n,...e}){return v.jsx("textarea",{"data-slot":"textarea",className:ot("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}var _V=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wV=_V.reduce((n,e)=>{const t=op(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),EV="Label",aR=S.forwardRef((n,e)=>v.jsx(wV.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));aR.displayName=EV;var SV=aR;function ji({className:n,...e}){return v.jsx(SV,{"data-slot":"label",className:ot("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}const TV=({onSubmit:n,onCancel:e,currentUser:t})=>{const[r,s]=S.useState(0),[o,l]=S.useState(""),[u,d]=S.useState(0),p=E=>{E.preventDefault(),!(r===0||!o.trim())&&(n({rating:r,comment:o.trim()}),s(0),l(""))},m=()=>v.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:5},(E,I)=>{const b=I+1,x=b<=(u||r);return v.jsx("button",{type:"button",className:"p-1 hover:scale-110 transition-transform",onClick:()=>s(b),onMouseEnter:()=>d(b),onMouseLeave:()=>d(0),children:v.jsx(Iu,{className:`size-6 transition-colors ${x?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-400"}`})},I)}),v.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:r>0?`${r} star${r!==1?"s":""}`:"Select rating"})]}),y=r>0&&o.trim();return v.jsxs("form",{onSubmit:p,className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("h3",{className:"font-medium",children:"Write a Review"}),v.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reviewing as ",t.displayName||t.email||"Anonymous"]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(ji,{children:"Rating"}),m()]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(ji,{htmlFor:"comment",children:"Comment"}),v.jsx(oR,{id:"comment",placeholder:"Share your thoughts about this route...",value:o,onChange:E=>l(E.target.value),rows:4})]}),v.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[v.jsx(Rn,{type:"submit",disabled:!y,children:"Submit Review"}),v.jsx(Rn,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})},I0=({route:n,onBack:e,onAddReview:t,currentUser:r,showBackButton:s=!0})=>{const[o,l]=S.useState(!1),u=m=>{t(m),l(!1)},d=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),p=m=>Array.from({length:5},(y,E)=>v.jsx(Iu,{className:`size-4 ${E<m?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},E));return v.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 bg-white p-6 rounded-xl shadow",children:[s&&v.jsxs(Rn,{variant:"ghost",onClick:e,className:"gap-2",children:[v.jsx(uI,{className:"size-4"}),"Back to Gallery"]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsx("div",{className:"space-y-6",children:v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsx("div",{className:"aspect-[4/3] relative overflow-hidden rounded-lg",children:v.jsx(Ef,{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"})}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("h1",{className:"text-3xl landscape-mobile:text-2xl xl:text-3xl font-medium",children:n.name}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(js,{variant:"secondary",className:"text-base px-3 py-1",children:n.grade}),v.jsx(js,{variant:"outline",style:{backgroundColor:n.color.toLowerCase()==="multi-color"?"var(--color-background)":n.color.toLowerCase()==="red"?"#ef4444":n.color.toLowerCase()==="blue"?"#3b82f6":n.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:n.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff",borderColor:"transparent"},children:n.color})]})]}),v.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(mI,{className:"size-4 text-muted-foreground"}),v.jsxs("span",{children:["Set by ",v.jsx("strong",{children:n.setter})]})]}),v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[v.jsx(dI,{className:"size-4 text-muted-foreground"}),v.jsxs("span",{children:["Set on ",d(n.dateSet)]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex items-center gap-1",children:p(Math.round(n.averageRating))}),v.jsx("span",{className:"font-medium",children:n.averageRating>0?n.averageRating.toFixed(1):""}),v.jsxs("span",{className:"text-muted-foreground",children:["(",n.totalReviews," review",n.totalReviews!==1?"s":"",")"]})]})]})]})]})}),v.jsx("div",{className:"landscape-mobile:max-h-[80vh] landscape-mobile:overflow-hidden landscape-mobile:flex landscape-mobile:flex-col",children:v.jsxs(uf,{className:"landscape-mobile:flex landscape-mobile:flex-col landscape-mobile:h-full landscape-mobile:min-h-0",children:[v.jsx(kI,{className:"landscape-mobile:flex-shrink-0",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(pI,{className:"size-5"}),v.jsx("h2",{children:"Reviews"})]}),v.jsx(Rn,{onClick:()=>l(!0),size:"sm",className:"landscape-mobile:text-sm",children:"Write a Review"})]})}),v.jsxs(Rv,{className:"space-y-4 landscape-mobile:flex-1 landscape-mobile:overflow-y-auto landscape-mobile:min-h-0",children:[o&&v.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:v.jsx(TV,{onSubmit:u,onCancel:()=>l(!1),currentUser:r})}),n.reviews.length>0?v.jsx("div",{className:"space-y-4",children:n.reviews.map((m,y)=>v.jsxs("div",{children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("div",{className:"flex items-start justify-between",children:v.jsxs("div",{className:"space-y-1",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"font-medium",children:m.author}),v.jsx("div",{className:"flex items-center gap-1",children:p(m.rating)})]}),v.jsx("p",{className:"text-sm text-muted-foreground",children:d(m.date)})]})}),v.jsx("p",{className:"text-sm leading-relaxed",children:m.comment})]}),y<n.reviews.length-1&&v.jsx(vV,{className:"mt-4"})]},m.id))}):v.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No reviews yet. Be the first to review this route!"})]})]})})]})]})};function C0({className:n,type:e,...t}){return v.jsx("input",{type:e,"data-slot":"input",className:ot("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}const xV=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],IV=["Red","Blue","Green","Yellow","Purple","Orange","Black","White","Multi-color"];function CV({onSave:n,onCancel:e}){const[t,r]=S.useState({name:"",grade:"",color:"",description:"",setter:"",imageUrl:""}),[s,o]=S.useState(""),[l,u]=S.useState(!1),d=(x,A)=>{r(j=>({...j,[x]:A}))},p=x=>{if(x&&x.type.startsWith("image/")){const A=new FileReader;A.onload=j=>{const V=j.target?.result;o(V),r(z=>({...z,imageUrl:V}))},A.readAsDataURL(x)}},m=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?u(!0):x.type==="dragleave"&&u(!1)},y=x=>{x.preventDefault(),x.stopPropagation(),u(!1);const A=x.dataTransfer.files;A&&A[0]&&p(A[0])},E=x=>{const A=x.target.files;A&&A[0]&&p(A[0])},I=x=>{if(x.preventDefault(),!t.name||!t.grade||!t.color||!t.setter)return;const A={...t,dateSet:new Date().toISOString().split("T")[0],imageUrl:t.imageUrl||"https://images.unsplash.com/photo-1730659071194-4c833ac5da4e?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxpbmRvb3IlMjByb2NrJTIwY2xpbWJpbmclMjB3YWxsJTIwY29sb3JmdWwlMjBob2xkc3xlbnwxfHx8fDE3NTg3MDAyNTZ8MA&ixlib=rb-4.1.0&q=80&w=1080"};n(A)},b=t.name&&t.grade&&t.color&&t.setter;return v.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[v.jsxs(Rn,{variant:"ghost",onClick:e,className:"gap-2",children:[v.jsx(uI,{className:"size-4"}),"Back to Gallery"]}),v.jsxs(uf,{children:[v.jsx(kI,{children:v.jsx(eO,{children:"Add New Route"})}),v.jsx(Rv,{children:v.jsxs("form",{onSubmit:I,className:"space-y-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(ji,{children:"Route Photo"}),v.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${l?"border-primary bg-primary/10":""}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:y,children:s?v.jsxs("div",{className:"relative",children:[v.jsx(Ef,{src:s,alt:"Route preview",className:"w-full h-48 object-cover rounded-lg"}),v.jsx(Rn,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{o(""),r(x=>({...x,imageUrl:""}))},children:v.jsx(gI,{className:"size-4"})})]}):v.jsxs("div",{className:"space-y-4",children:[v.jsx(cD,{className:"size-12 text-muted-foreground mx-auto"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop an image here, or click to select"}),v.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden",id:"image-upload"}),v.jsx(Rn,{type:"button",variant:"outline",asChild:!0,children:v.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:"Choose Image"})})]})]})})]}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(ji,{htmlFor:"name",children:"Route Name *"}),v.jsx(C0,{id:"name",type:"text",placeholder:"Enter route name",value:t.name,onChange:x=>d("name",x.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(ji,{htmlFor:"setter",children:"Route Setter *"}),v.jsx(C0,{id:"setter",type:"text",placeholder:"Who set this route?",value:t.setter,onChange:x=>d("setter",x.target.value)})]})]}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(ji,{children:"Grade *"}),v.jsxs(yf,{value:t.grade,onValueChange:x=>d("grade",x),children:[v.jsx(_f,{children:v.jsx(vf,{placeholder:"Select grade"})}),v.jsx(wf,{children:xV.map(x=>v.jsx(kl,{value:x,children:x},x))})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(ji,{children:"Hold Color *"}),v.jsxs(yf,{value:t.color,onValueChange:x=>d("color",x),children:[v.jsx(_f,{children:v.jsx(vf,{placeholder:"Select color"})}),v.jsx(wf,{children:IV.map(x=>v.jsx(kl,{value:x,children:x},x))})]})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(ji,{htmlFor:"description",children:"Description"}),v.jsx(oR,{id:"description",placeholder:"Describe the route, key moves, or tips...",value:t.description,onChange:x=>d("description",x.target.value),rows:4})]}),v.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[v.jsx(Rn,{type:"submit",disabled:!b,children:"Add Route"}),v.jsx(Rn,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})]})}function RV(n,e=[]){let t=[];function r(o,l){const u=S.createContext(l);u.displayName=o+"Context";const d=t.length;t=[...t,l];const p=y=>{const{scope:E,children:I,...b}=y,x=E?.[n]?.[d]||u,A=S.useMemo(()=>b,Object.values(b));return v.jsx(x.Provider,{value:A,children:I})};p.displayName=o+"Provider";function m(y,E){const I=E?.[n]?.[d]||u,b=S.useContext(I);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[p,m]}const s=()=>{const o=t.map(l=>S.createContext(l));return function(u){const d=u?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return s.scopeName=n,[r,AV(s,...e)]}function AV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((u,{useScope:d,scopeName:p})=>{const y=d(o)[`__scope${p}`];return{...u,...y}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var bV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$v=bV.reduce((n,e)=>{const t=op(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),Yg={exports:{}},Xg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function PV(){if(R0)return Xg;R0=1;var n=sp();function e(y,E){return y===E&&(y!==0||1/y===1/E)||y!==y&&E!==E}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(y,E){var I=E(),b=r({inst:{value:I,getSnapshot:E}}),x=b[0].inst,A=b[1];return o(function(){x.value=I,x.getSnapshot=E,d(x)&&A({inst:x})},[y,I,E]),s(function(){return d(x)&&A({inst:x}),y(function(){d(x)&&A({inst:x})})},[y]),l(I),I}function d(y){var E=y.getSnapshot;y=y.value;try{var I=E();return!t(y,I)}catch{return!0}}function p(y,E){return E()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return Xg.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Xg}var A0;function kV(){return A0||(A0=1,Yg.exports=PV()),Yg.exports}var NV=kV();function DV(){return NV.useSyncExternalStore(OV,()=>!0,()=>!1)}function OV(){return()=>{}}var Wv="Avatar",[MV]=RV(Wv),[LV,lR]=MV(Wv),cR=S.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,o]=S.useState("idle");return v.jsx(LV,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:v.jsx($v.span,{...r,ref:e})})});cR.displayName=Wv;var uR="AvatarImage",VV=S.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...o}=n,l=lR(uR,t),u=jV(r,o),d=Jt(p=>{s(p),l.onImageLoadingStatusChange(p)});return Bt(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?v.jsx($v.img,{...o,ref:e,src:r}):null});VV.displayName=uR;var dR="AvatarFallback",hR=S.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,o=lR(dR,t),[l,u]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&o.imageLoadingStatus!=="loaded"?v.jsx($v.span,{...s,ref:e}):null});hR.displayName=dR;function b0(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function jV(n,{referrerPolicy:e,crossOrigin:t}){const r=DV(),s=S.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[l,u]=S.useState(()=>b0(o,n));return Bt(()=>{u(b0(o,n))},[o,n]),Bt(()=>{const d=y=>()=>{u(y)};if(!o)return;const p=d("loaded"),m=d("error");return o.addEventListener("load",p),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof t=="string"&&(o.crossOrigin=t),()=>{o.removeEventListener("load",p),o.removeEventListener("error",m)}},[o,t,e]),l}var FV=cR,UV=hR;function Mh({className:n,...e}){return v.jsx(FV,{"data-slot":"avatar",className:ot("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function Lh({className:n,...e}){return v.jsx(UV,{"data-slot":"avatar-fallback",className:ot("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}var Jg="rovingFocusGroup.onEntryFocus",zV={bubbles:!1,cancelable:!0},qu="RovingFocusGroup",[My,fR,BV]=Av(qu),[$V,pR]=ao(qu,[BV]),[WV,HV]=$V(qu),mR=S.forwardRef((n,e)=>v.jsx(My.Provider,{scope:n.__scopeRovingFocusGroup,children:v.jsx(My.Slot,{scope:n.__scopeRovingFocusGroup,children:v.jsx(GV,{...n,ref:e})})}));mR.displayName=qu;var GV=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:p,preventScrollOnEntryFocus:m=!1,...y}=n,E=S.useRef(null),I=rt(e,E),b=ap(o),[x,A]=Au({prop:l,defaultProp:u??null,onChange:d,caller:qu}),[j,V]=S.useState(!1),z=Jt(p),G=fR(t),J=S.useRef(!1),[Z,P]=S.useState(0);return S.useEffect(()=>{const R=E.current;if(R)return R.addEventListener(Jg,z),()=>R.removeEventListener(Jg,z)},[z]),v.jsx(WV,{scope:t,orientation:r,dir:b,loop:s,currentTabStopId:x,onItemFocus:S.useCallback(R=>A(R),[A]),onItemShiftTab:S.useCallback(()=>V(!0),[]),onFocusableItemAdd:S.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:S.useCallback(()=>P(R=>R-1),[]),children:v.jsx(Ge.div,{tabIndex:j||Z===0?-1:0,"data-orientation":r,...y,ref:I,style:{outline:"none",...n.style},onMouseDown:be(n.onMouseDown,()=>{J.current=!0}),onFocus:be(n.onFocus,R=>{const N=!J.current;if(R.target===R.currentTarget&&N&&!j){const O=new CustomEvent(Jg,zV);if(R.currentTarget.dispatchEvent(O),!O.defaultPrevented){const M=G().filter(pe=>pe.focusable),F=M.find(pe=>pe.active),D=M.find(pe=>pe.id===x),_e=[F,D,...M].filter(Boolean).map(pe=>pe.ref.current);vR(_e,m)}}J.current=!1}),onBlur:be(n.onBlur,()=>V(!1))})})}),gR="RovingFocusGroupItem",yR=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,children:l,...u}=n,d=Ws(),p=o||d,m=HV(gR,t),y=m.currentTabStopId===p,E=fR(t),{onFocusableItemAdd:I,onFocusableItemRemove:b,currentTabStopId:x}=m;return S.useEffect(()=>{if(r)return I(),()=>b()},[r,I,b]),v.jsx(My.ItemSlot,{scope:t,id:p,focusable:r,active:s,children:v.jsx(Ge.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...u,ref:e,onMouseDown:be(n.onMouseDown,A=>{r?m.onItemFocus(p):A.preventDefault()}),onFocus:be(n.onFocus,()=>m.onItemFocus(p)),onKeyDown:be(n.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){m.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const j=QV(A,m.orientation,m.dir);if(j!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let z=E().filter(G=>G.focusable).map(G=>G.ref.current);if(j==="last")z.reverse();else if(j==="prev"||j==="next"){j==="prev"&&z.reverse();const G=z.indexOf(A.currentTarget);z=m.loop?YV(z,G+1):z.slice(G+1)}setTimeout(()=>vR(z))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:x!=null}):l})})});yR.displayName=gR;var qV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function KV(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function QV(n,e,t){const r=KV(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qV[r]}function vR(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function YV(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var XV=mR,JV=yR;function ZV(n){const e=ej(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(nj);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function ej(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=sj(s),u=rj(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ti(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var tj=Symbol("radix.slottable");function nj(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===tj}function rj(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function sj(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ly=["Enter"," "],ij=["ArrowDown","PageUp","Home"],_R=["ArrowUp","PageDown","End"],oj=[...ij,..._R],aj={ltr:[...Ly,"ArrowRight"],rtl:[...Ly,"ArrowLeft"]},lj={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ku="Menu",[bu,cj,uj]=Av(Ku),[pa,wR]=ao(Ku,[uj,pp,pR]),Tp=pp(),ER=pR(),[dj,ma]=pa(Ku),[hj,Qu]=pa(Ku),SR=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:o,modal:l=!0}=n,u=Tp(e),[d,p]=S.useState(null),m=S.useRef(!1),y=Jt(o),E=ap(s);return S.useEffect(()=>{const I=()=>{m.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>m.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),v.jsx(oC,{...u,children:v.jsx(dj,{scope:e,open:t,onOpenChange:y,content:d,onContentChange:p,children:v.jsx(hj,{scope:e,onClose:S.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:m,dir:E,modal:l,children:r})})})};SR.displayName=Ku;var fj="MenuAnchor",Hv=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Tp(t);return v.jsx(aC,{...s,...r,ref:e})});Hv.displayName=fj;var Gv="MenuPortal",[pj,TR]=pa(Gv,{forceMount:void 0}),xR=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,o=ma(Gv,e);return v.jsx(pj,{scope:e,forceMount:t,children:v.jsx(fr,{present:t||o.open,children:v.jsx(mp,{asChild:!0,container:s,children:r})})})};xR.displayName=Gv;var ur="MenuContent",[mj,qv]=pa(ur),IR=S.forwardRef((n,e)=>{const t=TR(ur,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=ma(ur,n.__scopeMenu),l=Qu(ur,n.__scopeMenu);return v.jsx(bu.Provider,{scope:n.__scopeMenu,children:v.jsx(fr,{present:r||o.open,children:v.jsx(bu.Slot,{scope:n.__scopeMenu,children:l.modal?v.jsx(gj,{...s,ref:e}):v.jsx(yj,{...s,ref:e})})})})}),gj=S.forwardRef((n,e)=>{const t=ma(ur,n.__scopeMenu),r=S.useRef(null),s=rt(e,r);return S.useEffect(()=>{const o=r.current;if(o)return jv(o)},[]),v.jsx(Kv,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:be(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),yj=S.forwardRef((n,e)=>{const t=ma(ur,n.__scopeMenu);return v.jsx(Kv,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),vj=ZV("MenuContent.ScrollLock"),Kv=S.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:E,onDismiss:I,disableOutsideScroll:b,...x}=n,A=ma(ur,t),j=Qu(ur,t),V=Tp(t),z=ER(t),G=cj(t),[J,Z]=S.useState(null),P=S.useRef(null),R=rt(e,P,A.onContentChange),N=S.useRef(0),O=S.useRef(""),M=S.useRef(0),F=S.useRef(null),D=S.useRef("right"),me=S.useRef(0),_e=b?yp:S.Fragment,pe=b?{as:vj,allowPinchZoom:!0}:void 0,Ee=ee=>{const ue=O.current+ee,B=G().filter(H=>!H.disabled),ne=document.activeElement,te=B.find(H=>H.ref.current===ne)?.textValue,se=B.map(H=>H.textValue),he=Pj(se,ue,te),ce=B.find(H=>H.textValue===he)?.ref.current;(function H(oe){O.current=oe,window.clearTimeout(N.current),oe!==""&&(N.current=window.setTimeout(()=>H(""),1e3))})(ue),ce&&setTimeout(()=>ce.focus())};S.useEffect(()=>()=>window.clearTimeout(N.current),[]),bv();const W=S.useCallback(ee=>D.current===F.current?.side&&Nj(ee,F.current?.area),[]);return v.jsx(mj,{scope:t,searchRef:O,onItemEnter:S.useCallback(ee=>{W(ee)&&ee.preventDefault()},[W]),onItemLeave:S.useCallback(ee=>{W(ee)||(P.current?.focus(),Z(null))},[W]),onTriggerLeave:S.useCallback(ee=>{W(ee)&&ee.preventDefault()},[W]),pointerGraceTimerRef:M,onPointerGraceIntentChange:S.useCallback(ee=>{F.current=ee},[]),children:v.jsx(_e,{...pe,children:v.jsx(cp,{asChild:!0,trapped:s,onMountAutoFocus:be(o,ee=>{ee.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:v.jsx(lp,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:E,onDismiss:I,children:v.jsx(XV,{asChild:!0,...z,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:J,onCurrentTabStopIdChange:Z,onEntryFocus:be(d,ee=>{j.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:v.jsx(lC,{role:"menu","aria-orientation":"vertical","data-state":zR(A.open),"data-radix-menu-content":"",dir:j.dir,...V,...x,ref:R,style:{outline:"none",...x.style},onKeyDown:be(x.onKeyDown,ee=>{const B=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,ne=ee.ctrlKey||ee.altKey||ee.metaKey,te=ee.key.length===1;B&&(ee.key==="Tab"&&ee.preventDefault(),!ne&&te&&Ee(ee.key));const se=P.current;if(ee.target!==se||!oj.includes(ee.key))return;ee.preventDefault();const ce=G().filter(H=>!H.disabled).map(H=>H.ref.current);_R.includes(ee.key)&&ce.reverse(),Aj(ce)}),onBlur:be(n.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(N.current),O.current="")}),onPointerMove:be(n.onPointerMove,Pu(ee=>{const ue=ee.target,B=me.current!==ee.clientX;if(ee.currentTarget.contains(ue)&&B){const ne=ee.clientX>me.current?"right":"left";D.current=ne,me.current=ee.clientX}}))})})})})})})});IR.displayName=ur;var _j="MenuGroup",Qv=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(Ge.div,{role:"group",...r,ref:e})});Qv.displayName=_j;var wj="MenuLabel",CR=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(Ge.div,{...r,ref:e})});CR.displayName=wj;var xf="MenuItem",P0="menu.itemSelect",xp=S.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,o=S.useRef(null),l=Qu(xf,n.__scopeMenu),u=qv(xf,n.__scopeMenu),d=rt(e,o),p=S.useRef(!1),m=()=>{const y=o.current;if(!t&&y){const E=new CustomEvent(P0,{bubbles:!0,cancelable:!0});y.addEventListener(P0,I=>r?.(I),{once:!0}),MI(y,E),E.defaultPrevented?p.current=!1:l.onClose()}};return v.jsx(RR,{...s,ref:d,disabled:t,onClick:be(n.onClick,m),onPointerDown:y=>{n.onPointerDown?.(y),p.current=!0},onPointerUp:be(n.onPointerUp,y=>{p.current||y.currentTarget?.click()}),onKeyDown:be(n.onKeyDown,y=>{const E=u.searchRef.current!=="";t||E&&y.key===" "||Ly.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});xp.displayName=xf;var RR=S.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...o}=n,l=qv(xf,t),u=ER(t),d=S.useRef(null),p=rt(e,d),[m,y]=S.useState(!1),[E,I]=S.useState("");return S.useEffect(()=>{const b=d.current;b&&I((b.textContent??"").trim())},[o.children]),v.jsx(bu.ItemSlot,{scope:t,disabled:r,textValue:s??E,children:v.jsx(JV,{asChild:!0,...u,focusable:!r,children:v.jsx(Ge.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:p,onPointerMove:be(n.onPointerMove,Pu(b=>{r?l.onItemLeave(b):(l.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:be(n.onPointerLeave,Pu(b=>l.onItemLeave(b))),onFocus:be(n.onFocus,()=>y(!0)),onBlur:be(n.onBlur,()=>y(!1))})})})}),Ej="MenuCheckboxItem",AR=S.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return v.jsx(DR,{scope:n.__scopeMenu,checked:t,children:v.jsx(xp,{role:"menuitemcheckbox","aria-checked":If(t)?"mixed":t,...s,ref:e,"data-state":Xv(t),onSelect:be(s.onSelect,()=>r?.(If(t)?!0:!t),{checkForDefaultPrevented:!1})})})});AR.displayName=Ej;var bR="MenuRadioGroup",[Sj,Tj]=pa(bR,{value:void 0,onValueChange:()=>{}}),PR=S.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,o=Jt(r);return v.jsx(Sj,{scope:n.__scopeMenu,value:t,onValueChange:o,children:v.jsx(Qv,{...s,ref:e})})});PR.displayName=bR;var kR="MenuRadioItem",NR=S.forwardRef((n,e)=>{const{value:t,...r}=n,s=Tj(kR,n.__scopeMenu),o=t===s.value;return v.jsx(DR,{scope:n.__scopeMenu,checked:o,children:v.jsx(xp,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":Xv(o),onSelect:be(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});NR.displayName=kR;var Yv="MenuItemIndicator",[DR,xj]=pa(Yv,{checked:!1}),OR=S.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,o=xj(Yv,t);return v.jsx(fr,{present:r||If(o.checked)||o.checked===!0,children:v.jsx(Ge.span,{...s,ref:e,"data-state":Xv(o.checked)})})});OR.displayName=Yv;var Ij="MenuSeparator",MR=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});MR.displayName=Ij;var Cj="MenuArrow",LR=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Tp(t);return v.jsx(cC,{...s,...r,ref:e})});LR.displayName=Cj;var Rj="MenuSub",[QH,VR]=pa(Rj),iu="MenuSubTrigger",jR=S.forwardRef((n,e)=>{const t=ma(iu,n.__scopeMenu),r=Qu(iu,n.__scopeMenu),s=VR(iu,n.__scopeMenu),o=qv(iu,n.__scopeMenu),l=S.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=o,p={__scopeMenu:n.__scopeMenu},m=S.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return S.useEffect(()=>m,[m]),S.useEffect(()=>{const y=u.current;return()=>{window.clearTimeout(y),d(null)}},[u,d]),v.jsx(Hv,{asChild:!0,...p,children:v.jsx(RR,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":zR(t.open),...n,ref:ti(e,s.onTriggerChange),onClick:y=>{n.onClick?.(y),!(n.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:be(n.onPointerMove,Pu(y=>{o.onItemEnter(y),!y.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),m()},100))})),onPointerLeave:be(n.onPointerLeave,Pu(y=>{m();const E=t.content?.getBoundingClientRect();if(E){const I=t.content?.dataset.side,b=I==="right",x=b?-5:5,A=E[b?"left":"right"],j=E[b?"right":"left"];o.onPointerGraceIntentChange({area:[{x:y.clientX+x,y:y.clientY},{x:A,y:E.top},{x:j,y:E.top},{x:j,y:E.bottom},{x:A,y:E.bottom}],side:I}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(y),y.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:be(n.onKeyDown,y=>{const E=o.searchRef.current!=="";n.disabled||E&&y.key===" "||aj[r.dir].includes(y.key)&&(t.onOpenChange(!0),t.content?.focus(),y.preventDefault())})})})});jR.displayName=iu;var FR="MenuSubContent",UR=S.forwardRef((n,e)=>{const t=TR(ur,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=ma(ur,n.__scopeMenu),l=Qu(ur,n.__scopeMenu),u=VR(FR,n.__scopeMenu),d=S.useRef(null),p=rt(e,d);return v.jsx(bu.Provider,{scope:n.__scopeMenu,children:v.jsx(fr,{present:r||o.open,children:v.jsx(bu.Slot,{scope:n.__scopeMenu,children:v.jsx(Kv,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{l.isUsingKeyboardRef.current&&d.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:be(n.onFocusOutside,m=>{m.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:be(n.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:be(n.onKeyDown,m=>{const y=m.currentTarget.contains(m.target),E=lj[l.dir].includes(m.key);y&&E&&(o.onOpenChange(!1),u.trigger?.focus(),m.preventDefault())})})})})})});UR.displayName=FR;function zR(n){return n?"open":"closed"}function If(n){return n==="indeterminate"}function Xv(n){return If(n)?"indeterminate":n?"checked":"unchecked"}function Aj(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function bj(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function Pj(n,e,t){const s=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=bj(n,Math.max(o,0));s.length===1&&(l=l.filter(p=>p!==t));const d=l.find(p=>p.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function kj(n,e){const{x:t,y:r}=n;let s=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],d=e[l],p=u.x,m=u.y,y=d.x,E=d.y;m>r!=E>r&&t<(y-p)*(r-m)/(E-m)+p&&(s=!s)}return s}function Nj(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return kj(t,e)}function Pu(n){return e=>e.pointerType==="mouse"?n(e):void 0}var Dj=SR,Oj=Hv,Mj=xR,Lj=IR,Vj=Qv,jj=CR,Fj=xp,Uj=AR,zj=PR,Bj=NR,$j=OR,Wj=MR,Hj=LR,Gj=jR,qj=UR,Ip="DropdownMenu",[Kj]=ao(Ip,[wR]),An=wR(),[Qj,BR]=Kj(Ip),$R=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:o,onOpenChange:l,modal:u=!0}=n,d=An(e),p=S.useRef(null),[m,y]=Au({prop:s,defaultProp:o??!1,onChange:l,caller:Ip});return v.jsx(Qj,{scope:e,triggerId:Ws(),triggerRef:p,contentId:Ws(),open:m,onOpenChange:y,onOpenToggle:S.useCallback(()=>y(E=>!E),[y]),modal:u,children:v.jsx(Dj,{...d,open:m,onOpenChange:y,dir:r,modal:u,children:t})})};$R.displayName=Ip;var WR="DropdownMenuTrigger",HR=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,o=BR(WR,t),l=An(t);return v.jsx(Oj,{asChild:!0,...l,children:v.jsx(Ge.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ti(e,o.triggerRef),onPointerDown:be(n.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:be(n.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});HR.displayName=WR;var Yj="DropdownMenuPortal",GR=n=>{const{__scopeDropdownMenu:e,...t}=n,r=An(e);return v.jsx(Mj,{...r,...t})};GR.displayName=Yj;var qR="DropdownMenuContent",KR=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=BR(qR,t),o=An(t),l=S.useRef(!1);return v.jsx(Lj,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:be(n.onCloseAutoFocus,u=>{l.current||s.triggerRef.current?.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:be(n.onInteractOutside,u=>{const d=u.detail.originalEvent,p=d.button===0&&d.ctrlKey===!0,m=d.button===2||p;(!s.modal||m)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});KR.displayName=qR;var Xj="DropdownMenuGroup",Jj=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(Vj,{...s,...r,ref:e})});Jj.displayName=Xj;var Zj="DropdownMenuLabel",eF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(jj,{...s,...r,ref:e})});eF.displayName=Zj;var tF="DropdownMenuItem",QR=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(Fj,{...s,...r,ref:e})});QR.displayName=tF;var nF="DropdownMenuCheckboxItem",rF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(Uj,{...s,...r,ref:e})});rF.displayName=nF;var sF="DropdownMenuRadioGroup",iF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(zj,{...s,...r,ref:e})});iF.displayName=sF;var oF="DropdownMenuRadioItem",aF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(Bj,{...s,...r,ref:e})});aF.displayName=oF;var lF="DropdownMenuItemIndicator",cF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx($j,{...s,...r,ref:e})});cF.displayName=lF;var uF="DropdownMenuSeparator",YR=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(Wj,{...s,...r,ref:e})});YR.displayName=uF;var dF="DropdownMenuArrow",hF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(Hj,{...s,...r,ref:e})});hF.displayName=dF;var fF="DropdownMenuSubTrigger",pF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(Gj,{...s,...r,ref:e})});pF.displayName=fF;var mF="DropdownMenuSubContent",gF=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return v.jsx(qj,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gF.displayName=mF;var yF=$R,vF=HR,_F=GR,wF=KR,EF=QR,SF=YR;function k0({...n}){return v.jsx(yF,{"data-slot":"dropdown-menu",...n})}function N0({...n}){return v.jsx(vF,{"data-slot":"dropdown-menu-trigger",...n})}function D0({className:n,sideOffset:e=4,...t}){return v.jsx(_F,{children:v.jsx(wF,{"data-slot":"dropdown-menu-content",sideOffset:e,className:ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function O0({className:n,inset:e,variant:t="default",...r}){return v.jsx(EF,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:ot("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function M0({className:n,...e}){return v.jsx(SF,{"data-slot":"dropdown-menu-separator",className:ot("bg-border -mx-1 my-1 h-px",n),...e})}const Cp=S.createContext(null);Cp.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Jv=10,Jo=S.useLayoutEffect,L0=ip.useId,TF=typeof L0=="function"?L0:()=>null;let xF=0;function Zv(n=null){const e=TF(),t=S.useRef(n||e||null);return t.current===null&&(t.current=""+xF++),n??t.current}function XR({children:n,className:e="",collapsedSize:t,collapsible:r,defaultSize:s,forwardedRef:o,id:l,maxSize:u,minSize:d,onCollapse:p,onExpand:m,onResize:y,order:E,style:I,tagName:b="div",...x}){const A=S.useContext(Cp);if(A===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:j,expandPanel:V,getPanelSize:z,getPanelStyle:G,groupId:J,isPanelCollapsed:Z,reevaluatePanelConstraints:P,registerPanel:R,resizePanel:N,unregisterPanel:O}=A,M=Zv(l),F=S.useRef({callbacks:{onCollapse:p,onExpand:m,onResize:y},constraints:{collapsedSize:t,collapsible:r,defaultSize:s,maxSize:u,minSize:d},id:M,idIsFromProps:l!==void 0,order:E});S.useRef({didLogMissingDefaultSizeWarning:!1}),Jo(()=>{const{callbacks:me,constraints:_e}=F.current,pe={..._e};F.current.id=M,F.current.idIsFromProps=l!==void 0,F.current.order=E,me.onCollapse=p,me.onExpand=m,me.onResize=y,_e.collapsedSize=t,_e.collapsible=r,_e.defaultSize=s,_e.maxSize=u,_e.minSize=d,(pe.collapsedSize!==_e.collapsedSize||pe.collapsible!==_e.collapsible||pe.maxSize!==_e.maxSize||pe.minSize!==_e.minSize)&&P(F.current,pe)}),Jo(()=>{const me=F.current;return R(me),()=>{O(me)}},[E,M,R,O]),S.useImperativeHandle(o,()=>({collapse:()=>{j(F.current)},expand:me=>{V(F.current,me)},getId(){return M},getSize(){return z(F.current)},isCollapsed(){return Z(F.current)},isExpanded(){return!Z(F.current)},resize:me=>{N(F.current,me)}}),[j,V,z,Z,M,N]);const D=G(F.current,s);return S.createElement(b,{...x,children:n,className:e,id:M,style:{...D,...I},[Pt.groupId]:J,[Pt.panel]:"",[Pt.panelCollapsible]:r||void 0,[Pt.panelId]:M,[Pt.panelSize]:parseFloat(""+D.flexGrow).toFixed(1)})}const JR=S.forwardRef((n,e)=>S.createElement(XR,{...n,forwardedRef:e}));XR.displayName="Panel";JR.displayName="forwardRef(Panel)";let Vy=null,Qh=-1,Fi=null;function IF(n,e){if(e){const t=(e&rA)!==0,r=(e&sA)!==0,s=(e&iA)!==0,o=(e&oA)!==0;if(t)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(n){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function CF(){Fi!==null&&(document.head.removeChild(Fi),Vy=null,Fi=null,Qh=-1)}function Zg(n,e){var t,r;const s=IF(n,e);if(Vy!==s){if(Vy=s,Fi===null&&(Fi=document.createElement("style"),document.head.appendChild(Fi)),Qh>=0){var o;(o=Fi.sheet)===null||o===void 0||o.removeRule(Qh)}Qh=(t=(r=Fi.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&t!==void 0?t:-1}}function ZR(n){return n.type==="keydown"}function eA(n){return n.type.startsWith("pointer")}function tA(n){return n.type.startsWith("mouse")}function Rp(n){if(eA(n)){if(n.isPrimary)return{x:n.clientX,y:n.clientY}}else if(tA(n))return{x:n.clientX,y:n.clientY};return{x:1/0,y:1/0}}function RF(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function AF(n,e,t){return n.x<e.x+e.width&&n.x+n.width>e.x&&n.y<e.y+e.height&&n.y+n.height>e.y}function bF(n,e){if(n===e)throw new Error("Cannot compare node with itself");const t={a:F0(n),b:F0(e)};let r;for(;t.a.at(-1)===t.b.at(-1);)n=t.a.pop(),e=t.b.pop(),r=n;We(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:j0(V0(t.a)),b:j0(V0(t.b))};if(s.a===s.b){const o=r.childNodes,l={a:t.a.at(-1),b:t.b.at(-1)};let u=o.length;for(;u--;){const d=o[u];if(d===l.a)return 1;if(d===l.b)return-1}}return Math.sign(s.a-s.b)}const PF=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function kF(n){var e;const t=getComputedStyle((e=nA(n))!==null&&e!==void 0?e:n).display;return t==="flex"||t==="inline-flex"}function NF(n){const e=getComputedStyle(n);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||kF(n))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||PF.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function V0(n){let e=n.length;for(;e--;){const t=n[e];if(We(t,"Missing node"),NF(t))return t}return null}function j0(n){return n&&Number(getComputedStyle(n).zIndex)||0}function F0(n){const e=[];for(;n;)e.push(n),n=nA(n);return e}function nA(n){const{parentNode:e}=n;return e&&e instanceof ShadowRoot?e.host:e}const rA=1,sA=2,iA=4,oA=8,DF=RF()==="coarse";let Ar=[],Sl=!1,Ko=new Map,Ap=new Map;const ku=new Set;function OF(n,e,t,r,s){var o;const{ownerDocument:l}=e,u={direction:t,element:e,hitAreaMargins:r,setResizeHandlerState:s},d=(o=Ko.get(l))!==null&&o!==void 0?o:0;return Ko.set(l,d+1),ku.add(u),Cf(),function(){var m;Ap.delete(n),ku.delete(u);const y=(m=Ko.get(l))!==null&&m!==void 0?m:1;if(Ko.set(l,y-1),Cf(),y===1&&Ko.delete(l),Ar.includes(u)){const E=Ar.indexOf(u);E>=0&&Ar.splice(E,1),t_(),s("up",!0,null)}}}function MF(n){const{target:e}=n,{x:t,y:r}=Rp(n);Sl=!0,e_({target:e,x:t,y:r}),Cf(),Ar.length>0&&(Rf("down",n),n.preventDefault(),aA(e)||n.stopImmediatePropagation())}function ey(n){const{x:e,y:t}=Rp(n);if(Sl&&n.buttons===0&&(Sl=!1,Rf("up",n)),!Sl){const{target:r}=n;e_({target:r,x:e,y:t})}Rf("move",n),t_(),Ar.length>0&&n.preventDefault()}function ty(n){const{target:e}=n,{x:t,y:r}=Rp(n);Ap.clear(),Sl=!1,Ar.length>0&&(n.preventDefault(),aA(e)||n.stopImmediatePropagation()),Rf("up",n),e_({target:e,x:t,y:r}),t_(),Cf()}function aA(n){let e=n;for(;e;){if(e.hasAttribute(Pt.resizeHandle))return!0;e=e.parentElement}return!1}function e_({target:n,x:e,y:t}){Ar.splice(0);let r=null;(n instanceof HTMLElement||n instanceof SVGElement)&&(r=n),ku.forEach(s=>{const{element:o,hitAreaMargins:l}=s,u=o.getBoundingClientRect(),{bottom:d,left:p,right:m,top:y}=u,E=DF?l.coarse:l.fine;if(e>=p-E&&e<=m+E&&t>=y-E&&t<=d+E){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&bF(r,o)>0){let b=r,x=!1;for(;b&&!b.contains(o);){if(AF(b.getBoundingClientRect(),u)){x=!0;break}b=b.parentElement}if(x)return}Ar.push(s)}})}function ny(n,e){Ap.set(n,e)}function t_(){let n=!1,e=!1;Ar.forEach(r=>{const{direction:s}=r;s==="horizontal"?n=!0:e=!0});let t=0;Ap.forEach(r=>{t|=r}),n&&e?Zg("intersection",t):n?Zg("horizontal",t):e?Zg("vertical",t):CF()}let ry=new AbortController;function Cf(){ry.abort(),ry=new AbortController;const n={capture:!0,signal:ry.signal};ku.size&&(Sl?(Ar.length>0&&Ko.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("contextmenu",ty,n),r.addEventListener("pointerleave",ey,n),r.addEventListener("pointermove",ey,n))}),window.addEventListener("pointerup",ty,n),window.addEventListener("pointercancel",ty,n)):Ko.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("pointerdown",MF,n),r.addEventListener("pointermove",ey,n))}))}function Rf(n,e){ku.forEach(t=>{const{setResizeHandlerState:r}=t,s=Ar.includes(t);r(n,s,e)})}function LF(){const[n,e]=S.useState(0);return S.useCallback(()=>e(t=>t+1),[])}function We(n,e){if(!n)throw console.error(e),Error(e)}function ra(n,e,t=Jv){return n.toFixed(t)===e.toFixed(t)?0:n>e?1:-1}function Fs(n,e,t=Jv){return ra(n,e,t)===0}function Kn(n,e,t){return ra(n,e,t)===0}function VF(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){const s=n[r],o=e[r];if(!Kn(s,o,t))return!1}return!0}function yl({panelConstraints:n,panelIndex:e,size:t}){const r=n[e];We(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:l=100,minSize:u=0}=r;if(ra(t,u)<0)if(o){const d=(s+u)/2;ra(t,d)<0?t=s:t=u}else t=u;return t=Math.min(l,t),t=parseFloat(t.toFixed(Jv)),t}function ou({delta:n,initialLayout:e,panelConstraints:t,pivotIndices:r,prevLayout:s,trigger:o}){if(Kn(n,0))return e;const l=[...e],[u,d]=r;We(u!=null,"Invalid first pivot index"),We(d!=null,"Invalid second pivot index");let p=0;if(o==="keyboard"){{const y=n<0?d:u,E=t[y];We(E,`Panel constraints not found for index ${y}`);const{collapsedSize:I=0,collapsible:b,minSize:x=0}=E;if(b){const A=e[y];if(We(A!=null,`Previous layout not found for panel index ${y}`),Kn(A,I)){const j=x-A;ra(j,Math.abs(n))>0&&(n=n<0?0-j:j)}}}{const y=n<0?u:d,E=t[y];We(E,`No panel constraints found for index ${y}`);const{collapsedSize:I=0,collapsible:b,minSize:x=0}=E;if(b){const A=e[y];if(We(A!=null,`Previous layout not found for panel index ${y}`),Kn(A,x)){const j=A-I;ra(j,Math.abs(n))>0&&(n=n<0?0-j:j)}}}}{const y=n<0?1:-1;let E=n<0?d:u,I=0;for(;;){const x=e[E];We(x!=null,`Previous layout not found for panel index ${E}`);const j=yl({panelConstraints:t,panelIndex:E,size:100})-x;if(I+=j,E+=y,E<0||E>=t.length)break}const b=Math.min(Math.abs(n),Math.abs(I));n=n<0?0-b:b}{let E=n<0?u:d;for(;E>=0&&E<t.length;){const I=Math.abs(n)-Math.abs(p),b=e[E];We(b!=null,`Previous layout not found for panel index ${E}`);const x=b-I,A=yl({panelConstraints:t,panelIndex:E,size:x});if(!Kn(b,A)&&(p+=b-A,l[E]=A,p.toPrecision(3).localeCompare(Math.abs(n).toPrecision(3),void 0,{numeric:!0})>=0))break;n<0?E--:E++}}if(VF(s,l))return s;{const y=n<0?d:u,E=e[y];We(E!=null,`Previous layout not found for panel index ${y}`);const I=E+p,b=yl({panelConstraints:t,panelIndex:y,size:I});if(l[y]=b,!Kn(b,I)){let x=I-b,j=n<0?d:u;for(;j>=0&&j<t.length;){const V=l[j];We(V!=null,`Previous layout not found for panel index ${j}`);const z=V+x,G=yl({panelConstraints:t,panelIndex:j,size:z});if(Kn(V,G)||(x-=G-V,l[j]=G),Kn(x,0))break;n>0?j--:j++}}}const m=l.reduce((y,E)=>E+y,0);return Kn(m,100)?l:s}function jF({layout:n,panelsArray:e,pivotIndices:t}){let r=0,s=100,o=0,l=0;const u=t[0];We(u!=null,"No pivot index found"),e.forEach((y,E)=>{const{constraints:I}=y,{maxSize:b=100,minSize:x=0}=I;E===u?(r=x,s=b):(o+=x,l+=b)});const d=Math.min(s,100-o),p=Math.max(r,100-l),m=n[u];return{valueMax:d,valueMin:p,valueNow:m}}function Nu(n,e=document){return Array.from(e.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${n}"]`))}function lA(n,e,t=document){const s=Nu(n,t).findIndex(o=>o.getAttribute(Pt.resizeHandleId)===e);return s??null}function cA(n,e,t){const r=lA(n,e,t);return r!=null?[r,r+1]:[-1,-1]}function uA(n,e=document){var t;if(e instanceof HTMLElement&&(e==null||(t=e.dataset)===null||t===void 0?void 0:t.panelGroupId)==n)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${n}"]`);return r||null}function bp(n,e=document){const t=e.querySelector(`[${Pt.resizeHandleId}="${n}"]`);return t||null}function FF(n,e,t,r=document){var s,o,l,u;const d=bp(e,r),p=Nu(n,r),m=d?p.indexOf(d):-1,y=(s=(o=t[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,E=(l=(u=t[m+1])===null||u===void 0?void 0:u.id)!==null&&l!==void 0?l:null;return[y,E]}function UF({committedValuesRef:n,eagerValuesRef:e,groupId:t,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:l}){S.useRef({didWarnAboutMissingResizeHandle:!1}),Jo(()=>{if(!o)return;const u=Nu(t,o);for(let d=0;d<s.length-1;d++){const{valueMax:p,valueMin:m,valueNow:y}=jF({layout:r,panelsArray:s,pivotIndices:[d,d+1]}),E=u[d];if(E!=null){const I=s[d];We(I,`No panel data found for index "${d}"`),E.setAttribute("aria-controls",I.id),E.setAttribute("aria-valuemax",""+Math.round(p)),E.setAttribute("aria-valuemin",""+Math.round(m)),E.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{u.forEach((d,p)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[t,r,s,o]),S.useEffect(()=>{if(!o)return;const u=e.current;We(u,"Eager values not found");const{panelDataArray:d}=u,p=uA(t,o);We(p!=null,`No group found for id "${t}"`);const m=Nu(t,o);We(m,`No resize handles found for group id "${t}"`);const y=m.map(E=>{const I=E.getAttribute(Pt.resizeHandleId);We(I,"Resize handle element has no handle id attribute");const[b,x]=FF(t,I,d,o);if(b==null||x==null)return()=>{};const A=j=>{if(!j.defaultPrevented)switch(j.key){case"Enter":{j.preventDefault();const V=d.findIndex(z=>z.id===b);if(V>=0){const z=d[V];We(z,`No panel data found for index ${V}`);const G=r[V],{collapsedSize:J=0,collapsible:Z,minSize:P=0}=z.constraints;if(G!=null&&Z){const R=ou({delta:Kn(G,J)?P-J:J-G,initialLayout:r,panelConstraints:d.map(N=>N.constraints),pivotIndices:cA(t,I,o),prevLayout:r,trigger:"keyboard"});r!==R&&l(R)}}break}}};return E.addEventListener("keydown",A),()=>{E.removeEventListener("keydown",A)}});return()=>{y.forEach(E=>E())}},[o,n,e,t,r,s,l])}function U0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function dA(n,e){const t=n==="horizontal",{x:r,y:s}=Rp(e);return t?r:s}function zF(n,e,t,r,s){const o=t==="horizontal",l=bp(e,s);We(l,`No resize handle element found for id "${e}"`);const u=l.getAttribute(Pt.groupId);We(u,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=r;const p=dA(t,n),m=uA(u,s);We(m,`No group element found for id "${u}"`);const y=m.getBoundingClientRect(),E=o?y.width:y.height;return(p-d)/E*100}function BF(n,e,t,r,s,o){if(ZR(n)){const l=t==="horizontal";let u=0;n.shiftKey?u=100:s!=null?u=s:u=10;let d=0;switch(n.key){case"ArrowDown":d=l?0:u;break;case"ArrowLeft":d=l?-u:0;break;case"ArrowRight":d=l?u:0;break;case"ArrowUp":d=l?0:-u;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return r==null?0:zF(n,e,t,r,o)}function $F({panelDataArray:n}){const e=Array(n.length),t=n.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<n.length;o++){const l=t[o];We(l,`Panel constraints not found for index ${o}`);const{defaultSize:u}=l;u!=null&&(r++,e[o]=u,s-=u)}for(let o=0;o<n.length;o++){const l=t[o];We(l,`Panel constraints not found for index ${o}`);const{defaultSize:u}=l;if(u!=null)continue;const d=n.length-r,p=s/d;r++,e[o]=p,s-=p}return e}function ul(n,e,t){e.forEach((r,s)=>{const o=n[s];We(o,`Panel data not found for index ${s}`);const{callbacks:l,constraints:u,id:d}=o,{collapsedSize:p=0,collapsible:m}=u,y=t[d];if(y==null||r!==y){t[d]=r;const{onCollapse:E,onExpand:I,onResize:b}=l;b&&b(r,y),m&&(E||I)&&(I&&(y==null||Fs(y,p))&&!Fs(r,p)&&I(),E&&(y==null||!Fs(y,p))&&Fs(r,p)&&E())}})}function Vh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t])return!1;return!0}function WF({defaultSize:n,dragState:e,layout:t,panelData:r,panelIndex:s,precision:o=3}){const l=t[s];let u;return l==null?u=n!=null?n.toPrecision(o):"1":r.length===1?u="1":u=l.toPrecision(o),{flexBasis:0,flexGrow:u,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function HF(n,e=10){let t=null;return(...s)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...s)},e)}}function z0(n){try{if(typeof localStorage<"u")n.getItem=e=>localStorage.getItem(e),n.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),n.getItem=()=>null,n.setItem=()=>{}}}function hA(n){return`react-resizable-panels:${n}`}function fA(n){return n.map(e=>{const{constraints:t,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function pA(n,e){try{const t=hA(n),r=e.getItem(t);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function GF(n,e,t){var r,s;const o=(r=pA(n,t))!==null&&r!==void 0?r:{},l=fA(e);return(s=o[l])!==null&&s!==void 0?s:null}function qF(n,e,t,r,s){var o;const l=hA(n),u=fA(e),d=(o=pA(n,s))!==null&&o!==void 0?o:{};d[u]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{s.setItem(l,JSON.stringify(d))}catch(p){console.error(p)}}function B0({layout:n,panelConstraints:e}){const t=[...n],r=t.reduce((o,l)=>o+l,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!Kn(r,100)&&t.length>0)for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=100/r*l;t[o]=u}let s=0;for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=yl({panelConstraints:e,panelIndex:o,size:l});l!=u&&(s+=l-u,t[o]=u)}if(!Kn(s,0))for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=l+s,d=yl({panelConstraints:e,panelIndex:o,size:u});if(l!==d&&(s-=d-l,t[o]=d,Kn(s,0)))break}return t}const KF=100,au={getItem:n=>(z0(au),au.getItem(n)),setItem:(n,e)=>{z0(au),au.setItem(n,e)}},$0={};function mA({autoSaveId:n=null,children:e,className:t="",direction:r,forwardedRef:s,id:o=null,onLayout:l=null,keyboardResizeBy:u=null,storage:d=au,style:p,tagName:m="div",...y}){const E=Zv(o),I=S.useRef(null),[b,x]=S.useState(null),[A,j]=S.useState([]),V=LF(),z=S.useRef({}),G=S.useRef(new Map),J=S.useRef(0),Z=S.useRef({autoSaveId:n,direction:r,dragState:b,id:E,keyboardResizeBy:u,onLayout:l,storage:d}),P=S.useRef({layout:A,panelDataArray:[],panelDataArrayChanged:!1});S.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),S.useImperativeHandle(s,()=>({getId:()=>Z.current.id,getLayout:()=>{const{layout:te}=P.current;return te},setLayout:te=>{const{onLayout:se}=Z.current,{layout:he,panelDataArray:ce}=P.current,H=B0({layout:te,panelConstraints:ce.map(oe=>oe.constraints)});U0(he,H)||(j(H),P.current.layout=H,se&&se(H),ul(ce,H,z.current))}}),[]),Jo(()=>{Z.current.autoSaveId=n,Z.current.direction=r,Z.current.dragState=b,Z.current.id=E,Z.current.onLayout=l,Z.current.storage=d}),UF({committedValuesRef:Z,eagerValuesRef:P,groupId:E,layout:A,panelDataArray:P.current.panelDataArray,setLayout:j,panelGroupElement:I.current}),S.useEffect(()=>{const{panelDataArray:te}=P.current;if(n){if(A.length===0||A.length!==te.length)return;let se=$0[n];se==null&&(se=HF(qF,KF),$0[n]=se);const he=[...te],ce=new Map(G.current);se(n,he,ce,A,d)}},[n,A,d]),S.useEffect(()=>{});const R=S.useCallback(te=>{const{onLayout:se}=Z.current,{layout:he,panelDataArray:ce}=P.current;if(te.constraints.collapsible){const H=ce.map(je=>je.constraints),{collapsedSize:oe=0,panelSize:ye,pivotIndices:xe}=Ho(ce,te,he);if(We(ye!=null,`Panel size not found for panel "${te.id}"`),!Fs(ye,oe)){G.current.set(te.id,ye);const $e=hl(ce,te)===ce.length-1?ye-oe:oe-ye,Ue=ou({delta:$e,initialLayout:he,panelConstraints:H,pivotIndices:xe,prevLayout:he,trigger:"imperative-api"});Vh(he,Ue)||(j(Ue),P.current.layout=Ue,se&&se(Ue),ul(ce,Ue,z.current))}}},[]),N=S.useCallback((te,se)=>{const{onLayout:he}=Z.current,{layout:ce,panelDataArray:H}=P.current;if(te.constraints.collapsible){const oe=H.map(ht=>ht.constraints),{collapsedSize:ye=0,panelSize:xe=0,minSize:je=0,pivotIndices:$e}=Ho(H,te,ce),Ue=se??je;if(Fs(xe,ye)){const ht=G.current.get(te.id),bn=ht!=null&&ht>=Ue?ht:Ue,xn=hl(H,te)===H.length-1?xe-bn:bn-xe,Lt=ou({delta:xn,initialLayout:ce,panelConstraints:oe,pivotIndices:$e,prevLayout:ce,trigger:"imperative-api"});Vh(ce,Lt)||(j(Lt),P.current.layout=Lt,he&&he(Lt),ul(H,Lt,z.current))}}},[]),O=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{panelSize:ce}=Ho(he,te,se);return We(ce!=null,`Panel size not found for panel "${te.id}"`),ce},[]),M=S.useCallback((te,se)=>{const{panelDataArray:he}=P.current,ce=hl(he,te);return WF({defaultSize:se,dragState:b,layout:A,panelData:he,panelIndex:ce})},[b,A]),F=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{collapsedSize:ce=0,collapsible:H,panelSize:oe}=Ho(he,te,se);return We(oe!=null,`Panel size not found for panel "${te.id}"`),H===!0&&Fs(oe,ce)},[]),D=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{collapsedSize:ce=0,collapsible:H,panelSize:oe}=Ho(he,te,se);return We(oe!=null,`Panel size not found for panel "${te.id}"`),!H||ra(oe,ce)>0},[]),me=S.useCallback(te=>{const{panelDataArray:se}=P.current;se.push(te),se.sort((he,ce)=>{const H=he.order,oe=ce.order;return H==null&&oe==null?0:H==null?-1:oe==null?1:H-oe}),P.current.panelDataArrayChanged=!0,V()},[V]);Jo(()=>{if(P.current.panelDataArrayChanged){P.current.panelDataArrayChanged=!1;const{autoSaveId:te,onLayout:se,storage:he}=Z.current,{layout:ce,panelDataArray:H}=P.current;let oe=null;if(te){const xe=GF(te,H,he);xe&&(G.current=new Map(Object.entries(xe.expandToSizes)),oe=xe.layout)}oe==null&&(oe=$F({panelDataArray:H}));const ye=B0({layout:oe,panelConstraints:H.map(xe=>xe.constraints)});U0(ce,ye)||(j(ye),P.current.layout=ye,se&&se(ye),ul(H,ye,z.current))}}),Jo(()=>{const te=P.current;return()=>{te.layout=[]}},[]);const _e=S.useCallback(te=>{let se=!1;const he=I.current;return he&&window.getComputedStyle(he,null).getPropertyValue("direction")==="rtl"&&(se=!0),function(H){H.preventDefault();const oe=I.current;if(!oe)return()=>null;const{direction:ye,dragState:xe,id:je,keyboardResizeBy:$e,onLayout:Ue}=Z.current,{layout:ht,panelDataArray:bn}=P.current,{initialLayout:Tn}=xe??{},xn=cA(je,te,oe);let Lt=BF(H,te,ye,xe,$e,oe);const Tt=ye==="horizontal";Tt&&se&&(Lt=-Lt);const xt=bn.map(yo=>yo.constraints),en=ou({delta:Lt,initialLayout:Tn??ht,panelConstraints:xt,pivotIndices:xn,prevLayout:ht,trigger:ZR(H)?"keyboard":"mouse-or-touch"}),ii=!Vh(ht,en);(eA(H)||tA(H))&&J.current!=Lt&&(J.current=Lt,!ii&&Lt!==0?Tt?ny(te,Lt<0?rA:sA):ny(te,Lt<0?iA:oA):ny(te,0)),ii&&(j(en),P.current.layout=en,Ue&&Ue(en),ul(bn,en,z.current))}},[]),pe=S.useCallback((te,se)=>{const{onLayout:he}=Z.current,{layout:ce,panelDataArray:H}=P.current,oe=H.map(ht=>ht.constraints),{panelSize:ye,pivotIndices:xe}=Ho(H,te,ce);We(ye!=null,`Panel size not found for panel "${te.id}"`);const $e=hl(H,te)===H.length-1?ye-se:se-ye,Ue=ou({delta:$e,initialLayout:ce,panelConstraints:oe,pivotIndices:xe,prevLayout:ce,trigger:"imperative-api"});Vh(ce,Ue)||(j(Ue),P.current.layout=Ue,he&&he(Ue),ul(H,Ue,z.current))},[]),Ee=S.useCallback((te,se)=>{const{layout:he,panelDataArray:ce}=P.current,{collapsedSize:H=0,collapsible:oe}=se,{collapsedSize:ye=0,collapsible:xe,maxSize:je=100,minSize:$e=0}=te.constraints,{panelSize:Ue}=Ho(ce,te,he);Ue!=null&&(oe&&xe&&Fs(Ue,H)?Fs(H,ye)||pe(te,ye):Ue<$e?pe(te,$e):Ue>je&&pe(te,je))},[pe]),W=S.useCallback((te,se)=>{const{direction:he}=Z.current,{layout:ce}=P.current;if(!I.current)return;const H=bp(te,I.current);We(H,`Drag handle element not found for id "${te}"`);const oe=dA(he,se);x({dragHandleId:te,dragHandleRect:H.getBoundingClientRect(),initialCursorPosition:oe,initialLayout:ce})},[]),ee=S.useCallback(()=>{x(null)},[]),ue=S.useCallback(te=>{const{panelDataArray:se}=P.current,he=hl(se,te);he>=0&&(se.splice(he,1),delete z.current[te.id],P.current.panelDataArrayChanged=!0,V())},[V]),B=S.useMemo(()=>({collapsePanel:R,direction:r,dragState:b,expandPanel:N,getPanelSize:O,getPanelStyle:M,groupId:E,isPanelCollapsed:F,isPanelExpanded:D,reevaluatePanelConstraints:Ee,registerPanel:me,registerResizeHandle:_e,resizePanel:pe,startDragging:W,stopDragging:ee,unregisterPanel:ue,panelGroupElement:I.current}),[R,b,r,N,O,M,E,F,D,Ee,me,_e,pe,W,ee,ue]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return S.createElement(Cp.Provider,{value:B},S.createElement(m,{...y,children:e,className:t,id:o,ref:I,style:{...ne,...p},[Pt.group]:"",[Pt.groupDirection]:r,[Pt.groupId]:E}))}const gA=S.forwardRef((n,e)=>S.createElement(mA,{...n,forwardedRef:e}));mA.displayName="PanelGroup";gA.displayName="forwardRef(PanelGroup)";function hl(n,e){return n.findIndex(t=>t===e||t.id===e.id)}function Ho(n,e,t){const r=hl(n,e),o=r===n.length-1?[r-1,r]:[r,r+1],l=t[r];return{...e.constraints,panelSize:l,pivotIndices:o}}function QF({disabled:n,handleId:e,resizeHandler:t,panelGroupElement:r}){S.useEffect(()=>{if(n||t==null||r==null)return;const s=bp(e,r);if(s==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),t(l);break}case"F6":{l.preventDefault();const u=s.getAttribute(Pt.groupId);We(u,`No group element found for id "${u}"`);const d=Nu(u,r),p=lA(u,e,r);We(p!==null,`No resize element found for id "${e}"`);const m=l.shiftKey?p>0?p-1:d.length-1:p+1<d.length?p+1:0;d[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,n,e,t])}function yA({children:n=null,className:e="",disabled:t=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:l,onDragging:u,onFocus:d,onPointerDown:p,onPointerUp:m,style:y={},tabIndex:E=0,tagName:I="div",...b}){var x,A;const j=S.useRef(null),V=S.useRef({onClick:l,onDragging:u,onPointerDown:p,onPointerUp:m});S.useEffect(()=>{V.current.onClick=l,V.current.onDragging=u,V.current.onPointerDown=p,V.current.onPointerUp=m});const z=S.useContext(Cp);if(z===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:G,groupId:J,registerResizeHandle:Z,startDragging:P,stopDragging:R,panelGroupElement:N}=z,O=Zv(s),[M,F]=S.useState("inactive"),[D,me]=S.useState(!1),[_e,pe]=S.useState(null),Ee=S.useRef({state:M});Jo(()=>{Ee.current.state=M}),S.useEffect(()=>{if(t)pe(null);else{const B=Z(O);pe(()=>B)}},[t,O,Z]);const W=(x=r?.coarse)!==null&&x!==void 0?x:15,ee=(A=r?.fine)!==null&&A!==void 0?A:5;S.useEffect(()=>{if(t||_e==null)return;const B=j.current;We(B,"Element ref not attached");let ne=!1;return OF(O,B,G,{coarse:W,fine:ee},(se,he,ce)=>{if(!he){F("inactive");return}switch(se){case"down":{F("drag"),ne=!1,We(ce,'Expected event to be defined for "down" action'),P(O,ce);const{onDragging:H,onPointerDown:oe}=V.current;H?.(!0),oe?.();break}case"move":{const{state:H}=Ee.current;ne=!0,H!=="drag"&&F("hover"),We(ce,'Expected event to be defined for "move" action'),_e(ce);break}case"up":{F("hover"),R();const{onClick:H,onDragging:oe,onPointerUp:ye}=V.current;oe?.(!1),ye?.(),ne||H?.();break}}})},[W,G,t,ee,Z,O,_e,P,R]),QF({disabled:t,handleId:O,resizeHandler:_e,panelGroupElement:N});const ue={touchAction:"none",userSelect:"none"};return S.createElement(I,{...b,children:n,className:e,id:s,onBlur:()=>{me(!1),o?.()},onFocus:()=>{me(!0),d?.()},ref:j,role:"separator",style:{...ue,...y},tabIndex:E,[Pt.groupDirection]:G,[Pt.groupId]:J,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:M==="drag"?"pointer":D?"keyboard":void 0,[Pt.resizeHandleEnabled]:!t,[Pt.resizeHandleId]:O,[Pt.resizeHandleState]:M})}yA.displayName="PanelResizeHandle";function YF({className:n,...e}){return v.jsx(gA,{"data-slot":"resizable-panel-group",className:ot("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),...e})}function W0({className:n,...e}){return v.jsx(JR,{"data-slot":"resizable-panel",className:ot("relative",n),...e})}function XF({withHandle:n,className:e,...t}){return v.jsx(yA,{"data-slot":"resizable-handle",className:ot("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...t,children:n&&v.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:v.jsx(nD,{className:"size-2.5"})})})}function JF(n){const e=ZF(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(t4);if(d){const p=d.props.children,m=u.map(y=>y===d?S.Children.count(p)>1?S.Children.only(null):S.isValidElement(p)?p.props.children:null:y);return v.jsx(e,{...l,ref:s,children:S.isValidElement(p)?S.cloneElement(p,void 0,m):null})}return v.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function ZF(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=r4(s),u=n4(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ti(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var e4=Symbol("radix.slottable");function t4(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===e4}function n4(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function r4(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Pp="Dialog",[vA]=ao(Pp),[s4,Lr]=vA(Pp),_A=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:o,modal:l=!0}=n,u=S.useRef(null),d=S.useRef(null),[p,m]=Au({prop:r,defaultProp:s??!1,onChange:o,caller:Pp});return v.jsx(s4,{scope:e,triggerRef:u,contentRef:d,contentId:Ws(),titleId:Ws(),descriptionId:Ws(),open:p,onOpenChange:m,onOpenToggle:S.useCallback(()=>m(y=>!y),[m]),modal:l,children:t})};_A.displayName=Pp;var wA="DialogTrigger",i4=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Lr(wA,t),o=rt(e,s.triggerRef);return v.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":s_(s.open),...r,ref:o,onClick:be(n.onClick,s.onOpenToggle)})});i4.displayName=wA;var n_="DialogPortal",[o4,EA]=vA(n_,{forceMount:void 0}),SA=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,o=Lr(n_,e);return v.jsx(o4,{scope:e,forceMount:t,children:S.Children.map(r,l=>v.jsx(fr,{present:t||o.open,children:v.jsx(mp,{asChild:!0,container:s,children:l})}))})};SA.displayName=n_;var Af="DialogOverlay",TA=S.forwardRef((n,e)=>{const t=EA(Af,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=Lr(Af,n.__scopeDialog);return o.modal?v.jsx(fr,{present:r||o.open,children:v.jsx(l4,{...s,ref:e})}):null});TA.displayName=Af;var a4=JF("DialogOverlay.RemoveScroll"),l4=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Lr(Af,t);return v.jsx(yp,{as:a4,allowPinchZoom:!0,shards:[s.contentRef],children:v.jsx(Ge.div,{"data-state":s_(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),sa="DialogContent",xA=S.forwardRef((n,e)=>{const t=EA(sa,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=Lr(sa,n.__scopeDialog);return v.jsx(fr,{present:r||o.open,children:o.modal?v.jsx(c4,{...s,ref:e}):v.jsx(u4,{...s,ref:e})})});xA.displayName=sa;var c4=S.forwardRef((n,e)=>{const t=Lr(sa,n.__scopeDialog),r=S.useRef(null),s=rt(e,t.contentRef,r);return S.useEffect(()=>{const o=r.current;if(o)return jv(o)},[]),v.jsx(IA,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(n.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:be(n.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:be(n.onFocusOutside,o=>o.preventDefault())})}),u4=S.forwardRef((n,e)=>{const t=Lr(sa,n.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return v.jsx(IA,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{n.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||t.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{n.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),IA=S.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=n,u=Lr(sa,t),d=S.useRef(null),p=rt(e,d);return bv(),v.jsxs(v.Fragment,{children:[v.jsx(cp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:v.jsx(lp,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":s_(u.open),...l,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(d4,{titleId:u.titleId}),v.jsx(f4,{contentRef:d,descriptionId:u.descriptionId})]})]})}),r_="DialogTitle",CA=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Lr(r_,t);return v.jsx(Ge.h2,{id:s.titleId,...r,ref:e})});CA.displayName=r_;var RA="DialogDescription",AA=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Lr(RA,t);return v.jsx(Ge.p,{id:s.descriptionId,...r,ref:e})});AA.displayName=RA;var bA="DialogClose",PA=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Lr(bA,t);return v.jsx(Ge.button,{type:"button",...r,ref:e,onClick:be(n.onClick,()=>s.onOpenChange(!1))})});PA.displayName=bA;function s_(n){return n?"open":"closed"}var kA="DialogTitleWarning",[YH,NA]=dO(kA,{contentName:sa,titleName:r_,docsSlug:"dialog"}),d4=({titleId:n})=>{const e=NA(kA),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},h4="DialogDescriptionWarning",f4=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NA(h4).contentName}}.`;return S.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},p4=_A,m4=SA,g4=TA,y4=xA,v4=CA,_4=AA,w4=PA;function E4({...n}){return v.jsx(p4,{"data-slot":"sheet",...n})}function S4({...n}){return v.jsx(m4,{"data-slot":"sheet-portal",...n})}function T4({className:n,...e}){return v.jsx(g4,{"data-slot":"sheet-overlay",className:ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function x4({className:n,children:e,side:t="right",...r}){return v.jsxs(S4,{children:[v.jsx(T4,{className:n?.includes("landscape:hidden")?"landscape:hidden":""}),v.jsxs(y4,{"data-slot":"sheet-content",className:ot("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",n),...r,children:[e,v.jsxs(w4,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[v.jsx(gI,{className:"size-4"}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function I4({className:n,...e}){return v.jsx("div",{"data-slot":"sheet-header",className:ot("flex flex-col gap-1.5 p-4",n),...e})}function C4({className:n,...e}){return v.jsx(v4,{"data-slot":"sheet-title",className:ot("text-foreground font-semibold",n),...e})}function R4({className:n,...e}){return v.jsx(_4,{"data-slot":"sheet-description",className:ot("text-muted-foreground text-sm",n),...e})}const A4=()=>{};var H0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve=function(n,e){if(!n)throw Ql(e)},Ql=function(n){return new Error("Firebase Database ("+DA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},b4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},i_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,m=o>>2,y=(o&3)<<4|u>>4;let E=(u&15)<<2|p>>6,I=p&63;d||(I=64,l||(E=64)),r.push(t[m],t[y],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(OA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):b4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||p==null||y==null)throw new P4;const E=o<<2|u>>4;if(r.push(E),p!==64){const I=u<<4&240|p>>2;if(r.push(I),y!==64){const b=p<<6&192|y;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class P4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MA=function(n){const e=OA(n);return i_.encodeByteArray(e,!0)},bf=function(n){return MA(n).replace(/\./g,"")},Pf=function(n){try{return i_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(n){return LA(void 0,n)}function LA(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!N4(t)||(n[t]=LA(n[t],e[t]));return n}function N4(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=()=>D4().__FIREBASE_DEFAULTS__,M4=()=>{if(typeof process>"u"||typeof H0>"u")return;const n=H0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},L4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Pf(n[1]);return e&&JSON.parse(e)},kp=()=>{try{return A4()||O4()||M4()||L4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},VA=n=>kp()?.emulatorHosts?.[n],jA=n=>{const e=VA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},FA=()=>kp()?.config,UA=n=>kp()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function a_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[bf(JSON.stringify(t)),bf(JSON.stringify(l)),""].join(".")}const mu={};function V4(){const n={prod:[],emulator:[]};for(const e of Object.keys(mu))mu[e]?n.emulator.push(e):n.prod.push(e);return n}function j4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let G0=!1;function l_(n,e){if(typeof window>"u"||typeof document>"u"||!uo(window.location.host)||mu[n]===e||mu[n]||G0)return;mu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",o=V4().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function u(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,I){E.setAttribute("width","24"),E.setAttribute("id",I),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{G0=!0,l()},E}function m(E,I){E.setAttribute("id",I),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function y(){const E=j4(r),I=t("text"),b=document.getElementById(I)||document.createElement("span"),x=t("learnmore"),A=document.getElementById(x)||document.createElement("a"),j=t("preprendIcon"),V=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const z=E.element;u(z),m(A,x);const G=p();d(V,j),z.append(V,b,A,G),document.body.appendChild(z)}o?(b.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function F4(){const n=kp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B4(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $4(){return DA.NODE_ADMIN===!0}function W4(){return!F4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H4(){try{return typeof indexedDB=="object"}catch{return!1}}function G4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="FirebaseError";class ni extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=q4,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yu.prototype.create)}}class Yu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?K4(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new ni(s,u,r)}}function K4(n,e){return n.replace(Q4,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Q4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){return JSON.parse(n)}function an(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=Du(Pf(o[0])||""),t=Du(Pf(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},Y4=function(n){const e=$A(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},X4=function(n){const e=$A(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Dl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function jy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kf(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function Qs(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(q0(o)&&q0(l)){if(!Qs(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function q0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function cu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)r[y]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let y=0;y<16;y++)r[y]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let y=16;y<80;y++){const E=r[y-3]^r[y-8]^r[y-14]^r[y-16];r[y]=(E<<1|E>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],d=this.chain_[4],p,m;for(let y=0;y<80;y++){y<40?y<20?(p=u^o&(l^u),m=1518500249):(p=o^l^u,m=1859775393):y<60?(p=o&l|u&(o|l),m=2400959708):(p=o^l^u,m=3395469782);const E=(s<<5|s>>>27)+p+d+m+r[y]&4294967295;d=u,u=l,l=(o<<30|o>>>2)&4294967295,o=s,s=E}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}else for(;s<t;)if(o[l]=e[s],++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function Z4(n,e){const t=new e3(n,e);return t.subscribe.bind(t)}class e3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");t3(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=sy),s.error===void 0&&(s.error=sy),s.complete===void 0&&(s.complete=sy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t3(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sy(){}function n3(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,ve(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(o<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Np=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n){return n&&n._delegate?n._delegate:n}class Zi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new o_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(o3(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:i3(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i3(n){return n===Go?void 0:n}function o3(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const l3={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},c3=Ke.INFO,u3={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},d3=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=u3[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dp{constructor(e){this.name=e,this._logLevel=c3,this._logHandler=d3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const h3=(n,e)=>e.some(t=>n instanceof t);let K0,Q0;function f3(){return K0||(K0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p3(){return Q0||(Q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WA=new WeakMap,Fy=new WeakMap,HA=new WeakMap,iy=new WeakMap,u_=new WeakMap;function m3(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Wi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&WA.set(t,n)}).catch(()=>{}),u_.set(e,n),e}function g3(n){if(Fy.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Fy.set(n,e)}let Uy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Fy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||HA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function y3(n){Uy=n(Uy)}function v3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(oy(this),e,...t);return HA.set(r,e.sort?e.sort():[e]),Wi(r)}:p3().includes(n)?function(...e){return n.apply(oy(this),e),Wi(WA.get(this))}:function(...e){return Wi(n.apply(oy(this),e))}}function _3(n){return typeof n=="function"?v3(n):(n instanceof IDBTransaction&&g3(n),h3(n,f3())?new Proxy(n,Uy):n)}function Wi(n){if(n instanceof IDBRequest)return m3(n);if(iy.has(n))return iy.get(n);const e=_3(n);return e!==n&&(iy.set(n,e),u_.set(e,n)),e}const oy=n=>u_.get(n);function w3(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=Wi(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Wi(l.result),d.oldVersion,d.newVersion,Wi(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const E3=["get","getKey","getAll","getAllKeys","count"],S3=["put","add","delete","clear"],ay=new Map;function Y0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ay.get(e))return ay.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=S3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||E3.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&d.done]))[0]};return ay.set(e,o),o}y3(n=>({...n,get:(e,t,r)=>Y0(e,t)||n.get(e,t,r),has:(e,t)=>!!Y0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(x3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function x3(n){return n.getComponent()?.type==="VERSION"}const zy="@firebase/app",X0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Dp("@firebase/app"),I3="@firebase/app-compat",C3="@firebase/analytics-compat",R3="@firebase/analytics",A3="@firebase/app-check-compat",b3="@firebase/app-check",P3="@firebase/auth",k3="@firebase/auth-compat",N3="@firebase/database",D3="@firebase/data-connect",O3="@firebase/database-compat",M3="@firebase/functions",L3="@firebase/functions-compat",V3="@firebase/installations",j3="@firebase/installations-compat",F3="@firebase/messaging",U3="@firebase/messaging-compat",z3="@firebase/performance",B3="@firebase/performance-compat",$3="@firebase/remote-config",W3="@firebase/remote-config-compat",H3="@firebase/storage",G3="@firebase/storage-compat",q3="@firebase/firestore",K3="@firebase/ai",Q3="@firebase/firestore-compat",Y3="firebase",X3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="[DEFAULT]",J3={[zy]:"fire-core",[I3]:"fire-core-compat",[R3]:"fire-analytics",[C3]:"fire-analytics-compat",[b3]:"fire-app-check",[A3]:"fire-app-check-compat",[P3]:"fire-auth",[k3]:"fire-auth-compat",[N3]:"fire-rtdb",[D3]:"fire-data-connect",[O3]:"fire-rtdb-compat",[M3]:"fire-fn",[L3]:"fire-fn-compat",[V3]:"fire-iid",[j3]:"fire-iid-compat",[F3]:"fire-fcm",[U3]:"fire-fcm-compat",[z3]:"fire-perf",[B3]:"fire-perf-compat",[$3]:"fire-rc",[W3]:"fire-rc-compat",[H3]:"fire-gcs",[G3]:"fire-gcs-compat",[q3]:"fire-fst",[Q3]:"fire-fst-compat",[K3]:"fire-vertex","fire-js":"fire-js",[Y3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new Map,Z3=new Map,$y=new Map;function J0(n,e){try{n.container.addComponent(e)}catch(t){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ia(n){const e=n.name;if($y.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;$y.set(e,n);for(const t of Nf.values())J0(t,n);for(const t of Z3.values())J0(t,n);return!0}function Op(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new Yu("app","Firebase",eU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=X3;function GA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:By,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Hi.create("bad-app-name",{appName:String(s)});if(t||(t=FA()),!t)throw Hi.create("no-options");const o=Nf.get(s);if(o){if(Qs(t,o.options)&&Qs(r,o.config))return o;throw Hi.create("duplicate-app",{appName:s})}const l=new a3(s);for(const d of $y.values())l.addComponent(d);const u=new tU(t,r,l);return Nf.set(s,u),u}function d_(n=By){const e=Nf.get(n);if(!e&&n===By&&FA())return GA();if(!e)throw Hi.create("no-app",{appName:n});return e}function as(n,e,t){let r=J3[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(l.join(" "));return}ia(new Zi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="firebase-heartbeat-database",rU=1,Ou="firebase-heartbeat-store";let ly=null;function qA(){return ly||(ly=w3(nU,rU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ou)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hi.create("idb-open",{originalErrorMessage:n.message})})),ly}async function sU(n){try{const t=(await qA()).transaction(Ou),r=await t.objectStore(Ou).get(KA(n));return await t.done,r}catch(e){if(e instanceof ni)Ys.warn(e.message);else{const t=Hi.create("idb-get",{originalErrorMessage:e?.message});Ys.warn(t.message)}}}async function Z0(n,e){try{const r=(await qA()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,KA(n)),await r.done}catch(t){if(t instanceof ni)Ys.warn(t.message);else{const r=Hi.create("idb-set",{originalErrorMessage:t?.message});Ys.warn(r.message)}}}function KA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=1024,oU=30;class aU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cU(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>oU){const s=uU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ys.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eT(),{heartbeatsToSend:t,unsentEntries:r}=lU(this._heartbeatsCache.heartbeats),s=bf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Ys.warn(e),""}}}function eT(){return new Date().toISOString().substring(0,10)}function lU(n,e=iU){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),tT(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),tT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class cU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H4()?G4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tT(n){return bf(JSON.stringify({version:2,heartbeats:n})).length}function uU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(n){ia(new Zi("platform-logger",e=>new T3(e),"PRIVATE")),ia(new Zi("heartbeat",e=>new aU(e),"PRIVATE")),as(zy,X0,n),as(zy,X0,"esm2020"),as("fire-js","")}dU("");function QA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hU=QA,YA=new Yu("auth","Firebase",QA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=new Dp("@firebase/auth");function fU(n,...e){Df.logLevel<=Ke.WARN&&Df.warn(`Auth (${ga}): ${n}`,...e)}function Yh(n,...e){Df.logLevel<=Ke.ERROR&&Df.error(`Auth (${ga}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,...e){throw f_(n,...e)}function br(n,...e){return f_(n,...e)}function h_(n,e,t){const r={...hU(),[e]:t};return new Yu("auth","Firebase",r).create(e,{appName:n.name})}function Hs(n){return h_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pU(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&dr(n,"argument-error"),h_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function f_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YA.create(n,...e)}function Me(n,e,...t){if(!n)throw f_(e,...t)}function zs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yh(e),new Error(e)}function Xs(n,e){n||zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(){return typeof self<"u"&&self.location?.href||""}function mU(){return nT()==="http:"||nT()==="https:"}function nT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mU()||z4()||"connection"in navigator)?navigator.onLine:!0}function yU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xs(t>e,"Short delay should be less than long delay!"),this.isMobile=c_()||BA()}get(){return gU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n,e){Xs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wU=new Xu(3e4,6e4);function ho(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function si(n,e,t,r,s={}){return JA(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Yl({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:d,...o};return U4()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&uo(n.emulatorConfig.host)&&(p.credentials="include"),XA.fetch()(await ZA(n,n.config.apiHost,t,u),p)})}async function JA(n,e,t){n._canInitEmulator=!1;const r={...vU,...e};try{const s=new SU(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw jh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw jh(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw jh(n,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw h_(n,m,p);dr(n,m)}}catch(s){if(s instanceof ni)throw s;dr(n,"network-request-failed",{message:String(s)})}}async function Ju(n,e,t,r,s={}){const o=await si(n,e,t,r,s);return"mfaPendingCredential"in o&&dr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function ZA(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?p_(n.config,s):`${n.config.apiScheme}://${s}`;return _U.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function EU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),wU.get())})}}function jh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=br(n,e,r);return s.customData._tokenResponse=t,s}function rT(n){return n!==void 0&&n.enterprise!==void 0}class TU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return EU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xU(n,e){return si(n,"GET","/v2/recaptchaConfig",ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(n,e){return si(n,"POST","/v1/accounts:delete",e)}async function Of(n,e){return si(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CU(n,e=!1){const t=Nt(n),r=await t.getIdToken(e),s=m_(r);Me(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:gu(cy(s.auth_time)),issuedAtTime:gu(cy(s.iat)),expirationTime:gu(cy(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function cy(n){return Number(n)*1e3}function m_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Pf(t);return s?JSON.parse(s):(Yh("Failed to decode base64 JWT payload"),null)}catch(s){return Yh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function sT(n){const e=m_(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ni&&RU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function RU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gu(this.lastLoginAt),this.creationTime=gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(n){const e=n.auth,t=await n.getIdToken(),r=await Ol(n,Of(e,{idToken:t}));Me(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?eb(s.providerUserInfo):[],l=PU(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,p=u?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)}async function bU(n){const e=Nt(n);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PU(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function eb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(n,e){const t=await JA(n,{},async()=>{const r=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await ZA(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&uo(n.emulatorConfig.host)&&(d.credentials="include"),XA.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function NU(n,e){return si(n,"POST","/v2/accounts:revokeToken",ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=sT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await kU(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Tl;return r&&(Me(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Me(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Cr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new AU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ol(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CU(this,e)}reload(){return bU(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(Hs(this.auth));const e=await this.getIdToken();return await Ol(this,IU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,p=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:E,isAnonymous:I,providerData:b,stsTokenManager:x}=t;Me(y&&x,e,"internal-error");const A=Tl.fromJSON(this.name,x);Me(typeof y=="string",e,"internal-error"),Li(r,e.name),Li(s,e.name),Me(typeof E=="boolean",e,"internal-error"),Me(typeof I=="boolean",e,"internal-error"),Li(o,e.name),Li(l,e.name),Li(u,e.name),Li(d,e.name),Li(p,e.name),Li(m,e.name);const j=new Cr({uid:y,auth:e,email:s,emailVerified:E,displayName:r,isAnonymous:I,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:A,createdAt:p,lastLoginAt:m});return b&&Array.isArray(b)&&(j.providerData=b.map(V=>({...V}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,r=!1){const s=new Tl;s.updateFromServerResponse(t);const o=new Cr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Mf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Me(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?eb(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new Tl;u.updateFromIdToken(r);const d=new Cr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Hy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new Map;function Bs(n){Xs(n instanceof Function,"Expected a class definition");let e=iT.get(n);return e?(Xs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tb.type="NONE";const oT=tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(n,e,t){return`firebase:${n}:${e}:${t}`}class xl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Xh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Xh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Of(this.auth,{idToken:e}).catch(()=>{});return t?Cr._fromGetAccountInfoResponse(this.auth,t,e):null}return Cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new xl(Bs(oT),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Bs(oT);const l=Xh(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const m=await p._get(l);if(m){let y;if(typeof m=="string"){const E=await Of(e,{idToken:m}).catch(()=>{});if(!E)break;y=await Cr._fromGetAccountInfoResponse(e,E,m)}else y=Cr._fromJSON(e,m);p!==o&&(u=y),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new xl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new xl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ib(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ab(e))return"Blackberry";if(lb(e))return"Webos";if(rb(e))return"Safari";if((e.includes("chrome/")||sb(e))&&!e.includes("edge/"))return"Chrome";if(ob(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function nb(n=En()){return/firefox\//i.test(n)}function rb(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sb(n=En()){return/crios\//i.test(n)}function ib(n=En()){return/iemobile/i.test(n)}function ob(n=En()){return/android/i.test(n)}function ab(n=En()){return/blackberry/i.test(n)}function lb(n=En()){return/webos/i.test(n)}function g_(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DU(n=En()){return g_(n)&&!!window.navigator?.standalone}function OU(){return B4()&&document.documentMode===10}function cb(n=En()){return g_(n)||ob(n)||lb(n)||ab(n)||/windows phone/i.test(n)||ib(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(n,e=[]){let t;switch(n){case"Browser":t=aT(En());break;case"Worker":t=`${aT(En())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(n,e={}){return si(n,"GET","/v2/passwordPolicy",ho(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU=6;class jU{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lT(this),this.idTokenSubscription=new lT(this),this.beforeStateQueue=new MU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Of(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(Hs(this));const t=e?Nt(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(Hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(Hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LU(this),t=new jU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await NU(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bs(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[Bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fU(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fo(n){return Nt(n)}class lT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z4(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UU(n){Mp=n}function db(n){return Mp.loadJS(n)}function zU(){return Mp.recaptchaEnterpriseScript}function BU(){return Mp.gapiScript}function $U(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class WU{constructor(){this.enterprise=new HU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class HU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const GU="recaptcha-enterprise",hb="NO_RECAPTCHA";class qU{constructor(e){this.type=GU,this.auth=fo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{xU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new TU(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;rT(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(hb)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&rT(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=zU();d.length!==0&&(d+=u),db(d).then(()=>{s(u,o,l)}).catch(p=>{l(p)})}}).catch(u=>{l(u)})})}}async function cT(n,e,t,r=!1,s=!1){const o=new qU(n);let l;if(s)l=hb;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,p=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Gy(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await cT(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await cT(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(n,e){const t=Op(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Qs(o,e??{}))return s;dr(s,"already-initialized")}return t.initialize({options:e})}function QU(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Bs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function YU(n,e,t){const r=fo(n);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=fb(e),{host:l,port:u}=XU(e),d=u===null?"":`:${u}`,p={url:`${o}//${l}${d}/`},m=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(Qs(p,r.config.emulator)&&Qs(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,uo(l)?(a_(`${o}//${l}${d}`),l_("Auth",!0)):JU()}function fb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XU(n){const e=fb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:uT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:uT(l)}}}function uT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function JU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,t){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}}async function ZU(n,e){return si(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(n,e){return Ju(n,"POST","/v1/accounts:signInWithPassword",ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(n,e){return Ju(n,"POST","/v1/accounts:signInWithEmailLink",ho(n,e))}async function nz(n,e){return Ju(n,"POST","/v1/accounts:signInWithEmailLink",ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends y_{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Mu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Mu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gy(e,t,"signInWithPassword",ez);case"emailLink":return tz(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gy(e,r,"signUpPassword",ZU);case"emailLink":return nz(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(n,e){return Ju(n,"POST","/v1/accounts:signInWithIdp",ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz="http://localhost";class oa extends y_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new oa(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Il(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Il(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Il(e,t)}buildRequest(){const e={requestUri:rz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iz(n){const e=lu(cu(n)).link,t=e?lu(cu(e)).deep_link_id:null,r=lu(cu(n)).deep_link_id;return(r?lu(cu(r)).link:null)||r||t||e||n}class v_{constructor(e){const t=lu(cu(e)),r=t.apiKey??null,s=t.oobCode??null,o=sz(t.mode??null);Me(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=iz(e);try{return new v_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(){this.providerId=Xl.PROVIDER_ID}static credential(e,t){return Mu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=v_.parseLink(t);return Me(r,"argument-error"),Mu._fromEmailAndCode(e,r.code,r.tenantId)}}Xl.PROVIDER_ID="password";Xl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends __{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Zu{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oa._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Us.credential(t,r)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Zu{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com";zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Zu{constructor(){super("twitter.com")}static credential(e,t){return oa._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Bi.credential(t,r)}catch{return null}}}Bi.TWITTER_SIGN_IN_METHOD="twitter.com";Bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oz(n,e){return Ju(n,"POST","/v1/accounts:signUp",ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Cr._fromIdTokenResponse(e,r,s),l=dT(r);return new aa({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=dT(r);return new aa({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function dT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends ni{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Lf(e,t,r,s)}}function pb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(n,o,e,r):o})}async function az(n,e,t=!1){const r=await Ol(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return aa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lz(n,e,t=!1){const{auth:r}=n;if(Vn(r.app))return Promise.reject(Hs(r));const s="reauthenticate";try{const o=await Ol(n,pb(r,s,e,n),t);Me(o.idToken,r,"internal-error");const l=m_(o.idToken);Me(l,r,"internal-error");const{sub:u}=l;return Me(n.uid===u,r,"user-mismatch"),aa._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&dr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(n,e,t=!1){if(Vn(n.app))return Promise.reject(Hs(n));const r="signIn",s=await pb(n,r,e),o=await aa._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function cz(n,e){return mb(fo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(n){const e=fo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uz(n,e,t){if(Vn(n.app))return Promise.reject(Hs(n));const r=fo(n),l=await Gy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oz).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&gb(n),d}),u=await aa._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function dz(n,e,t){return Vn(n.app)?Promise.reject(Hs(n)):cz(Nt(n),Xl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gb(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hz(n,e){return si(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fz(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Nt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Ol(r,hz(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function pz(n,e,t,r){return Nt(n).onIdTokenChanged(e,t,r)}function mz(n,e,t){return Nt(n).beforeAuthStateChanged(e,t)}function yb(n,e,t,r){return Nt(n).onAuthStateChanged(e,t,r)}function vb(n){return Nt(n).signOut()}const Vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vf,"1"),this.storage.removeItem(Vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz=1e3,yz=10;class wb extends _b{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);OU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,yz):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},gz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wb.type="LOCAL";const vz=wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb extends _b{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Eb.type="SESSION";const Sb=Eb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _z(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Lp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async p=>p(t.origin,o)),d=await _z(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const p=w_("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const E=y;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(){return window}function Ez(n){ls().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function Sz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tz(){return navigator?.serviceWorker?.controller||null}function xz(){return Tb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firebaseLocalStorageDb",Iz=1,jf="firebaseLocalStorage",Ib="fbase_key";class ed{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vp(n,e){return n.transaction([jf],e?"readwrite":"readonly").objectStore(jf)}function Cz(){const n=indexedDB.deleteDatabase(xb);return new ed(n).toPromise()}function qy(){const n=indexedDB.open(xb,Iz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(jf,{keyPath:Ib})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(jf)?e(r):(r.close(),await Cz(),e(await qy()))})})}async function hT(n,e,t){const r=Vp(n,!0).put({[Ib]:e,value:t});return new ed(r).toPromise()}async function Rz(n,e){const t=Vp(n,!1).get(e),r=await new ed(t).toPromise();return r===void 0?null:r.value}function fT(n,e){const t=Vp(n,!0).delete(e);return new ed(t).toPromise()}const Az=800,bz=3;class Cb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lp._getInstance(xz()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Sz(),!this.activeServiceWorker)return;this.sender=new wz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qy();return await hT(e,Vf,"1"),await fT(e,Vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Rz(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Vp(s,!1).getAll();return new ed(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Az)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cb.type="LOCAL";const Pz=Cb;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(n,e){return e?Bs(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends y_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Il(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Il(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Il(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kz(n){return mb(n.auth,new E_(n),n.bypassAuthState)}function Nz(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),lz(t,new E_(n),n.bypassAuthState)}async function Dz(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),az(t,new E_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kz;case"linkViaPopup":case"linkViaRedirect":return Dz;case"reauthViaPopup":case"reauthViaRedirect":return Nz;default:dr(this.auth,"internal-error")}}resolve(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=new Xu(2e3,1e4);async function Mz(n,e,t){if(Vn(n.app))return Promise.reject(br(n,"operation-not-supported-in-this-environment"));const r=fo(n);pU(n,e,__);const s=Rb(r,t);return new Qo(r,"signInViaPopup",e,s).executeNotNull()}class Qo extends Ab{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Qo.currentPopupAction&&Qo.currentPopupAction.cancel(),Qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Xs(this.filter.length===1,"Popup operations only handle one event");const e=w_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Oz.get())};e()}}Qo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz="pendingRedirect",Jh=new Map;class Vz extends Ab{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const r=await jz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jz(n,e){const t=zz(e),r=Uz(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function Fz(n,e){Jh.set(n._key(),e)}function Uz(n){return Bs(n._redirectPersistence)}function zz(n){return Xh(Lz,n.config.apiKey,n.name)}async function Bz(n,e,t=!1){if(Vn(n.app))return Promise.reject(Hs(n));const r=fo(n),s=Rb(r,e),l=await new Vz(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=600*1e3;class Wz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Hz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!bb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(br(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$z&&this.cachedEventUids.clear(),this.cachedEventUids.has(pT(e))}saveEventToCache(e){this.cachedEventUids.add(pT(e)),this.lastProcessedEventTime=Date.now()}}function pT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bb({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Hz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz(n,e={}){return si(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kz=/^https?/;async function Qz(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Gz(n);for(const t of e)try{if(Yz(t))return}catch{}dr(n,"unauthorized-domain")}function Yz(n){const e=Wy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!Kz.test(t))return!1;if(qz.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=new Xu(3e4,6e4);function mT(){const n=ls().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Jz(n){return new Promise((e,t)=>{function r(){mT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mT(),t(br(n,"network-request-failed"))},timeout:Xz.get()})}if(ls().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ls().gapi?.load)r();else{const s=$U("iframefcb");return ls()[s]=()=>{gapi.load?r():t(br(n,"network-request-failed"))},db(`${BU()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function Zz(n){return Zh=Zh||Jz(n),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=new Xu(5e3,15e3),t6="__/auth/iframe",n6="emulator/auth/iframe",r6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i6(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?p_(e,n6):`https://${n.config.authDomain}/${t6}`,r={apiKey:e.apiKey,appName:n.name,v:ga},s=s6.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Yl(r).slice(1)}`}async function o6(n){const e=await Zz(n),t=ls().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:i6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r6,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=br(n,"network-request-failed"),u=ls().setTimeout(()=>{o(l)},e6.get());function d(){ls().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l6=500,c6=600,u6="_blank",d6="http://localhost";class gT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h6(n,e,t,r=l6,s=c6){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...a6,width:r.toString(),height:s.toString(),top:o,left:l},p=En().toLowerCase();t&&(u=sb(p)?u6:t),nb(p)&&(e=e||d6,d.scrollbars="yes");const m=Object.entries(d).reduce((E,[I,b])=>`${E}${I}=${b},`,"");if(DU(p)&&u!=="_self")return f6(e||"",u),new gT(null);const y=window.open(e||"",u,m);Me(y,n,"popup-blocked");try{y.focus()}catch{}return new gT(y)}function f6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="__/auth/handler",m6="emulator/auth/handler",g6=encodeURIComponent("fac");async function yT(n,e,t,r,s,o){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ga,eventId:s};if(e instanceof __){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",jy(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof Zu){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),p=d?`#${g6}=${encodeURIComponent(d)}`:"";return`${y6(n)}?${Yl(u).slice(1)}${p}`}function y6({config:n}){return n.emulator?p_(n,m6):`https://${n.authDomain}/${p6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="webStorageSupport";class v6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sb,this._completeRedirectFn=Bz,this._overrideRedirectResult=Fz}async _openPopup(e,t,r,s){Xs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await yT(e,t,r,Wy(),s);return h6(e,o,w_())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await yT(e,t,r,Wy(),s);return Ez(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Xs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await o6(e),r=new Wz(e);return t.register("authEvent",s=>(Me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(uy,{type:uy},s=>{const o=s?.[0]?.[uy];o!==void 0&&t(!!o),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Qz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cb()||rb()||g_()}}const _6=v6;var vT="@firebase/auth",_T="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S6(n){ia(new Zi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Me(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ub(n)},p=new FU(r,s,o,d);return QU(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ia(new Zi("auth-internal",e=>{const t=fo(e.getProvider("auth").getImmediate());return(r=>new w6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(vT,_T,E6(n)),as(vT,_T,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=300,x6=UA("authIdTokenMaxAge")||T6;let wT=null;const I6=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>x6)return;const s=t?.token;wT!==s&&(wT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function C6(n=d_()){const e=Op(n,"auth");if(e.isInitialized())return e.getImmediate();const t=KU(n,{popupRedirectResolver:_6,persistence:[Pz,vz,Sb]}),r=UA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=I6(o.toString());mz(t,l,()=>l(t.currentUser)),pz(t,u=>l(u))}}const s=VA("auth");return s&&YU(t,`http://${s}`),t}function R6(){return document.getElementsByTagName("head")?.[0]??document}UU({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=br("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",R6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S6("Browser");var A6="firebase",b6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(A6,b6,"app");var ET={};const ST="@firebase/database",TT="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pb="";function P6(n){Pb=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),an(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Du(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ri(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new k6(e)}}catch{}return new N6},Yo=kb("localStorage"),D6=kb("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Dp("@firebase/database"),O6=(function(){let n=1;return function(){return n++}})(),Nb=function(n){const e=r3(n),t=new J4;t.update(e);const r=t.digest();return i_.encodeByteArray(r)},td=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=td.apply(null,r):typeof r=="object"?e+=an(r):e+=r,e+=" "}return e};let yu=null,xT=!0;const M6=function(n,e){ve(!0,"Can't turn on custom loggers persistently."),Cl.logLevel=Ke.VERBOSE,yu=Cl.log.bind(Cl)},yn=function(...n){if(xT===!0&&(xT=!1,yu===null&&D6.get("logging_enabled")===!0&&M6()),yu){const e=td.apply(null,n);yu(e)}},nd=function(n){return function(...e){yn(n,...e)}},Ky=function(...n){const e="FIREBASE INTERNAL ERROR: "+td(...n);Cl.error(e)},Js=function(...n){const e=`FIREBASE FATAL ERROR: ${td(...n)}`;throw Cl.error(e),new Error(e)},Zn=function(...n){const e="FIREBASE WARNING: "+td(...n);Cl.warn(e)},L6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Db=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},V6=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ml="[MIN_NAME]",la="[MAX_NAME]",Jl=function(n,e){if(n===e)return 0;if(n===Ml||e===la)return-1;if(e===Ml||n===la)return 1;{const t=IT(n),r=IT(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},j6=function(n,e){return n===e?0:n<e?-1:1},eu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+an(e))},S_=function(n){if(typeof n!="object"||n===null)return an(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=an(e[r]),t+=":",t+=S_(n[e[r]]);return t+="}",t},Ob=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function hr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Mb=function(n){ve(!Db(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,l,u,d;n===0?(o=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=u+r,l=Math.round(n*Math.pow(2,t-u)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const p=[];for(d=t;d;d-=1)p.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const m=p.join("");let y="";for(d=0;d<64;d+=8){let E=parseInt(m.substr(d,8),2).toString(16);E.length===1&&(E="0"+E),y=y+E}return y.toLowerCase()},F6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},U6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},z6=new RegExp("^-?(0*)\\d{1,10}$"),B6=-2147483648,$6=2147483647,IT=function(n){if(z6.test(n)){const e=Number(n);if(e>=B6&&e<=$6)return e}return null},rd=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Zn("Exception was thrown by user callback.",t),e},Math.floor(0))}},W6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Zn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(yn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zn(e)}}class ef{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ef.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="5",Lb="v",Vb="s",jb="r",Fb="f",Ub=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zb="ls",Bb="p",Qy="ac",$b="websocket",Wb="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t,r,s,o=!1,l="",u=!1,d=!1,p=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=d,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Yo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function q6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Gb(n,e,t){ve(typeof e=="string","typeof type must == string"),ve(typeof t=="object","typeof params must == object");let r;if(e===$b)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Wb)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);q6(n)&&(t.ns=n.namespace);const s=[];return hr(t,(o,l)=>{s.push(o+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(){this.counters_={}}incrementCounter(e,t=1){ri(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return k4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={},hy={};function x_(n){const e=n.toString();return dy[e]||(dy[e]=new K6),dy[e]}function Q6(n,e){const t=n.toString();return hy[t]||(hy[t]=e()),hy[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&rd(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="start",X6="close",J6="pLPCommand",Z6="pRTLPCB",qb="id",Kb="pw",Qb="ser",e5="cb",t5="seg",n5="ts",r5="d",s5="dframe",Yb=1870,Xb=30,i5=Yb-Xb,o5=25e3,a5=3e4;class vl{constructor(e,t,r,s,o,l,u){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nd(e),this.stats_=x_(t),this.urlFn=d=>(this.appCheckToken&&(d[Qy]=this.appCheckToken),Gb(t,Wb,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Y6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(a5)),V6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new I_((...o)=>{const[l,u,d,p,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===CT)this.id=u,this.password=d;else if(l===X6)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[CT]="t",r[Qb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[e5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Lb]=T_,this.transportSessionId&&(r[Vb]=this.transportSessionId),this.lastSessionId&&(r[zb]=this.lastSessionId),this.applicationId&&(r[Bb]=this.applicationId),this.appCheckToken&&(r[Qy]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ub.test(location.hostname)&&(r[jb]=Fb);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vl.forceAllow_=!0}static forceDisallow(){vl.forceDisallow_=!0}static isAvailable(){return vl.forceAllow_?!0:!vl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!F6()&&!U6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=an(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=MA(t),s=Ob(r,i5);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[s5]="t",r[qb]=e,r[Kb]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=an(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class I_{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=O6(),window[J6+this.uniqueCallbackIdentifier]=e,window[Z6+this.uniqueCallbackIdentifier]=t,this.myIFrame=I_.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){yn("frame writing exception"),u.stack&&yn(u.stack),yn(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||yn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[qb]=this.myID,e[Kb]=this.myPW,e[Qb]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Xb+r.length<=Yb;){const l=this.pendingSegs.shift();r=r+"&"+t5+s+"="+l.seg+"&"+n5+s+"="+l.ts+"&"+r5+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(o5)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{yn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=16384,c5=45e3;let Ff=null;typeof MozWebSocket<"u"?Ff=MozWebSocket:typeof WebSocket<"u"&&(Ff=WebSocket);class Ir{constructor(e,t,r,s,o,l,u){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nd(this.connId),this.stats_=x_(t),this.connURL=Ir.connectionURL_(t,l,u,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const l={};return l[Lb]=T_,typeof location<"u"&&location.hostname&&Ub.test(location.hostname)&&(l[jb]=Fb),t&&(l[Vb]=t),r&&(l[zb]=r),s&&(l[Qy]=s),o&&(l[Bb]=o),Gb(e,$b,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yo.set("previous_websocket_failure",!0);try{let r;$4(),this.mySock=new Ff(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ir.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ff!==null&&!Ir.forceDisallow_}static previouslyFailed(){return Yo.isInMemoryStorage||Yo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Yo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Du(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ve(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=an(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Ob(t,l5);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(c5))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ir.responsesRequiredToBeHealthy=2;Ir.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{static get ALL_TRANSPORTS(){return[vl,Ir]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Ir&&Ir.isAvailable();let r=t&&!Ir.previouslyFailed();if(e.webSocketOnly&&(t||Zn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ir];else{const s=this.transports_=[];for(const o of Lu.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Lu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Lu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=6e4,d5=5e3,h5=10*1024,f5=100*1024,fy="t",RT="d",p5="s",AT="r",m5="e",bT="o",PT="a",kT="n",NT="p",g5="h";class y5{constructor(e,t,r,s,o,l,u,d,p,m){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nd("c:"+this.id+":"),this.transportManager_=new Lu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=vu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>f5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>h5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fy in e){const t=e[fy];t===PT?this.upgradeIfSecondaryHealthy_():t===AT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===bT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=eu("t",e),r=eu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:NT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:PT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:kT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=eu("t",e),r=eu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=eu(fy,e);if(RT in e){const r=e[RT];if(t===g5){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===kT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===p5?this.onConnectionShutdown_(r):t===AT?this.onReset_(r):t===m5?Ky("Server Error: "+r):t===bT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ky("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),T_!==r&&Zn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),vu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(u5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(d5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:NT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.allowedEvents_=e,this.listeners_={},ve(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){ve(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends Zb{static getInstance(){return new Uf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!c_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ve(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=32,OT=768;class Et{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ut(){return new Et("")}function et(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function eo(n){return n.pieces_.length-n.pieceNum_}function _t(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Et(n.pieces_,e)}function eP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function v5(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function tP(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function nP(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Et(e,0)}function Zt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Et)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new Et(t,0)}function Je(n){return n.pieceNum_>=n.pieces_.length}function cr(n,e){const t=et(n),r=et(e);if(t===null)return e;if(t===r)return cr(_t(n),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function rP(n,e){if(eo(n)!==eo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Rr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(eo(n)>eo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class _5{constructor(e,t){this.errorPrefix_=t,this.parts_=tP(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Np(this.parts_[r]);sP(this)}}function w5(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Np(e),sP(n)}function E5(n){const e=n.parts_.pop();n.byteLength_-=Np(e),n.parts_.length>0&&(n.byteLength_-=1)}function sP(n){if(n.byteLength_>OT)throw new Error(n.errorPrefix_+"has a key path longer than "+OT+" bytes ("+n.byteLength_+").");if(n.parts_.length>DT)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+DT+") or object contains a cycle "+qo(n))}function qo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends Zb{static getInstance(){return new C_}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ve(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=1e3,S5=300*1e3,MT=30*1e3,T5=1.3,x5=3e4,I5="server_kill",LT=3;class Gs extends Jb{constructor(e,t,r,s,o,l,u,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=d,this.id=Gs.nextPersistentConnectionId_++,this.log_=nd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tu,this.maxReconnectDelay_=S5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");C_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Uf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(an(o)),ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new o_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?t.resolve(u):t.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ve(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const d=u.d,p=u.s;Gs.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",u),p!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(p,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ri(e,"w")){const r=Dl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Zn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||X4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=MT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=Y4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,l=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";s&&(o.q=r,o.t=s),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+an(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Ky("Unrecognized action received from server: "+an(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=tu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>x5&&(this.reconnectDelay_=tu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*T5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Gs.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const d=function(){u?u.close():(l=!0,r())},p=function(y){ve(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)};this.realtime_={close:d,sendRequest:p};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,E]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?yn("getToken() completed but was canceled"):(yn("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=E&&E.token,u=new y5(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,I=>{Zn(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(I5)},o))}catch(y){this.log_("Failed to get token: "+y),l||(this.repoInfo_.nodeAdmin&&Zn(y),d())}}}interrupt(e){yn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){yn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jy(this.interruptReasons_)&&(this.reconnectDelay_=tu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>S_(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new Et(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){yn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=LT&&(this.reconnectDelay_=MT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){yn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=LT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Pb.replace(/\./g,"-")]=1,c_()?e["framework.cordova"]=1:BA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Uf.getInstance().currentlyOnline();return jy(this.interruptReasons_)&&e}}Gs.nextPersistentConnectionId_=0;Gs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new tt(Ml,e),s=new tt(Ml,t);return this.compare(r,s)!==0}minPost(){return tt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh;class iP extends jp{static get __EMPTY_NODE(){return Fh}static set __EMPTY_NODE(e){Fh=e}compare(e,t){return Jl(e.name,t.name)}isDefinedOn(e){throw Ql("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tt.MIN}maxPost(){return new tt(la,Fh)}makePost(e,t){return ve(typeof e=="string","KeyIndex indexValue must always be a string."),new tt(e,Fh)}toString(){return".key"}}const Rl=new iP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh=class{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Qn=class uu{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??uu.RED,this.left=s??ss.EMPTY_NODE,this.right=o??ss.EMPTY_NODE}copy(e,t,r,s,o){return new uu(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ss.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return ss.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,uu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,uu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Qn.RED=!0;Qn.BLACK=!1;class C5{copy(e,t,r,s,o){return this}insert(e,t,r){return new Qn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ss=class tf{constructor(e,t=tf.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new tf(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Qn.BLACK,null,null))}remove(e){return new tf(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Uh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Uh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Uh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Uh(this.root_,null,this.comparator_,!0,e)}};ss.EMPTY_NODE=new C5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(n,e){return Jl(n.name,e.name)}function R_(n,e){return Jl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yy;function A5(n){Yy=n}const oP=function(n){return typeof n=="number"?"number:"+Mb(n):"string:"+n},aP=function(n){if(n.isLeafNode()){const e=n.val();ve(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ri(e,".sv"),"Priority must be a string or number.")}else ve(n===Yy||n.isEmpty(),"priority of unexpected type.");ve(n===Yy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VT;class Yt{static set __childrenNodeConstructor(e){VT=e}static get __childrenNodeConstructor(){return VT}constructor(e,t=Yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ve(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aP(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Yt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Je(e)?this:et(e)===".priority"?this.priorityNode_:Yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=et(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(ve(r!==".priority"||eo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oP(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Mb(this.value_):e+=this.value_,this.lazyHash_=Nb(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Yt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Yt.__childrenNodeConstructor?-1:(ve(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=Yt.VALUE_TYPE_ORDER.indexOf(t),o=Yt.VALUE_TYPE_ORDER.indexOf(r);return ve(s>=0,"Unknown leaf type: "+t),ve(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lP,cP;function b5(n){lP=n}function P5(n){cP=n}class k5 extends jp{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?Jl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tt.MIN}maxPost(){return new tt(la,new Yt("[PRIORITY-POST]",cP))}makePost(e,t){const r=lP(e);return new tt(t,new Yt("[PRIORITY-POST]",r))}toString(){return".priority"}}const wn=new k5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=Math.log(2);class D5{constructor(e){const t=o=>parseInt(Math.log(o)/N5,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zf=function(n,e,t,r){n.sort(e);const s=function(d,p){const m=p-d;let y,E;if(m===0)return null;if(m===1)return y=n[d],E=t?t(y):y,new Qn(E,y.node,Qn.BLACK,null,null);{const I=parseInt(m/2,10)+d,b=s(d,I),x=s(I+1,p);return y=n[I],E=t?t(y):y,new Qn(E,y.node,Qn.BLACK,b,x)}},o=function(d){let p=null,m=null,y=n.length;const E=function(b,x){const A=y-b,j=y;y-=b;const V=s(A+1,j),z=n[A],G=t?t(z):z;I(new Qn(G,z.node,x,null,V))},I=function(b){p?(p.left=b,p=b):(m=b,p=b)};for(let b=0;b<d.count;++b){const x=d.nextBitIsOne(),A=Math.pow(2,d.count-(b+1));x?E(A,Qn.BLACK):(E(A,Qn.BLACK),E(A,Qn.RED))}return m},l=new D5(n.length),u=o(l);return new ss(r||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let py;const dl={};class $s{static get Default(){return ve(dl&&wn,"ChildrenNode.ts has not been loaded"),py=py||new $s({".priority":dl},{".priority":wn}),py}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Dl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ss?t:null}hasIndex(e){return ri(this.indexSet_,e.toString())}addIndex(e,t){ve(e!==Rl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(tt.Wrap);let l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let u;s?u=zf(r,e.getCompare()):u=dl;const d=e.toString(),p={...this.indexSet_};p[d]=e;const m={...this.indexes_};return m[d]=u,new $s(m,p)}addToIndexes(e,t){const r=kf(this.indexes_,(s,o)=>{const l=Dl(this.indexSet_,o);if(ve(l,"Missing index implementation for "+o),s===dl)if(l.isDefinedOn(e.node)){const u=[],d=t.getIterator(tt.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&u.push(p),p=d.getNext();return u.push(e),zf(u,l.getCompare())}else return dl;else{const u=t.get(e.name);let d=s;return u&&(d=d.remove(new tt(e.name,u))),d.insert(e,e.node)}});return new $s(r,this.indexSet_)}removeFromIndexes(e,t){const r=kf(this.indexes_,s=>{if(s===dl)return s;{const o=t.get(e.name);return o?s.remove(new tt(e.name,o)):s}});return new $s(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu;class at{static get EMPTY_NODE(){return nu||(nu=new at(new ss(R_),null,$s.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aP(this.priorityNode_),this.children_.isEmpty()&&ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nu}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?nu:t}}getChild(e){const t=et(e);return t===null?this:this.getImmediateChild(t).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ve(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new tt(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?nu:this.priorityNode_;return new at(s,l,o)}}updateChild(e,t){const r=et(e);if(r===null)return t;{ve(et(e)!==".priority"||eo(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(_t(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(wn,(l,u)=>{t[l]=u.val(e),r++,o&&at.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!e&&o&&s<2*r){const l=[];for(const u in t)l[u]=t[u];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+oP(this.getPriority().val())+":"),this.forEachChild(wn,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":Nb(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new tt(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new tt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new tt(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,tt.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,tt.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sd?-1:0}withIndex(e){if(e===Rl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Rl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(wn),s=t.getIterator(wn);let o=r.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=s.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Rl?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class O5 extends at{constructor(){super(new ss(R_),at.EMPTY_NODE,$s.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const sd=new O5;Object.defineProperties(tt,{MIN:{value:new tt(Ml,at.EMPTY_NODE)},MAX:{value:new tt(la,sd)}});iP.__EMPTY_NODE=at.EMPTY_NODE;Yt.__childrenNodeConstructor=at;A5(sd);P5(sd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=!0;function vn(n,e=null){if(n===null)return at.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ve(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Yt(t,vn(e))}if(!(n instanceof Array)&&M5){const t=[];let r=!1;if(hr(n,(l,u)=>{if(l.substring(0,1)!=="."){const d=vn(u);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new tt(l,d)))}}),t.length===0)return at.EMPTY_NODE;const o=zf(t,R5,l=>l.name,R_);if(r){const l=zf(t,wn.getCompare());return new at(o,vn(e),new $s({".priority":l},{".priority":wn}))}else return new at(o,vn(e),$s.Default)}else{let t=at.EMPTY_NODE;return hr(n,(r,s)=>{if(ri(n,r)&&r.substring(0,1)!=="."){const o=vn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(vn(e))}}b5(vn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5 extends jp{constructor(e){super(),this.indexPath_=e,ve(!Je(e)&&et(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?Jl(e.name,t.name):o}makePost(e,t){const r=vn(e),s=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new tt(t,s)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,sd);return new tt(la,e)}toString(){return tP(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5 extends jp{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Jl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tt.MIN}maxPost(){return tt.MAX}makePost(e,t){const r=vn(e);return new tt(t,r)}toString(){return".value"}}const j5=new V5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(n){return{type:"value",snapshotNode:n}}function U5(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function z5(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function jT(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function B5(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ml}hasEnd(){return this.endSet_}getIndexEndValue(){return ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:la}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wn}copy(){const e=new A_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function FT(n){const e={};if(n.isDefault())return e;let t;if(n.index_===wn?t="$priority":n.index_===j5?t="$value":n.index_===Rl?t="$key":(ve(n.index_ instanceof L5,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=an(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=an(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+an(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=an(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+an(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function UT(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==wn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Jb{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=nd("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Bf.getListenId_(e,r),u={};this.listens_[l]=u;const d=FT(e._queryParams);this.restRequest_(o+".json",d,(p,m)=>{let y=m;if(p===404&&(y=null,p=null),p===null&&this.onDataUpdate_(o,y,!1,r),Dl(this.listens_,l)===u){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",s(E,null)}})}unlisten(e,t){const r=Bf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=FT(e._queryParams),r=e._path.toString(),s=new o_;return this.restRequest_(r+".json",t,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(r,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yl(t);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let d=null;if(u.status>=200&&u.status<300){try{d=Du(u.responseText)}catch{Zn("Failed to parse JSON response for "+l+": "+u.responseText)}r(null,d)}else u.status!==401&&u.status!==404&&Zn("Got unsuccessful REST response for "+l+" Status: "+u.status),r(u.status);r=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){return{value:null,children:new Map}}function uP(n,e,t){if(Je(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=et(e);n.children.has(r)||n.children.set(r,$f());const s=n.children.get(r);e=_t(e),uP(s,e,t)}}function Xy(n,e,t){n.value!==null?t(e,n.value):W5(n,(r,s)=>{const o=new Et(e.toString()+"/"+r);Xy(s,o,t)})}function W5(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&hr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=10*1e3,G5=30*1e3,q5=300*1e3;class K5{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new H5(e);const r=zT+(G5-zT)*Math.random();vu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;hr(e,(s,o)=>{o>0&&ri(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),vu(this.reportStats_.bind(this),Math.floor(Math.random()*2*q5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var is;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(is||(is={}));function dP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=is.ACK_USER_WRITE,this.source=dP()}operationForChild(e){if(Je(this.path)){if(this.affectedTree.value!=null)return ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Et(e));return new Wf(ut(),t,this.revert)}}else return ve(et(this.path)===e,"operationForChild called for unrelated child."),new Wf(_t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=is.OVERWRITE}operationForChild(e){return Je(this.path)?new ca(this.source,ut(),this.snap.getImmediateChild(e)):new ca(this.source,_t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=is.MERGE}operationForChild(e){if(Je(this.path)){const t=this.children.subtree(new Et(e));return t.isEmpty()?null:t.value?new ca(this.source,ut(),t.value):new Vu(this.source,ut(),t)}else return ve(et(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vu(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Je(e))return this.isFullyInitialized()&&!this.filtered_;const t=et(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Q5(n,e,t,r){const s=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(B5(l.childName,l.snapshotNode))}),ru(n,s,"child_removed",e,r,t),ru(n,s,"child_added",e,r,t),ru(n,s,"child_moved",o,r,t),ru(n,s,"child_changed",e,r,t),ru(n,s,"value",e,r,t),s}function ru(n,e,t,r,s,o){const l=r.filter(u=>u.type===t);l.sort((u,d)=>X5(n,u,d)),l.forEach(u=>{const d=Y5(n,u,o);s.forEach(p=>{p.respondsTo(u.type)&&e.push(p.createEvent(d,n.query_))})})}function Y5(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function X5(n,e,t){if(e.childName==null||t.childName==null)throw Ql("Should only compare child_ events.");const r=new tt(e.childName,e.snapshotNode),s=new tt(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n,e){return{eventCache:n,serverCache:e}}function _u(n,e,t,r){return pP(new b_(e,t,r),n.serverCache)}function mP(n,e,t,r){return pP(n.eventCache,new b_(e,t,r))}function Jy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ua(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let my;const J5=()=>(my||(my=new ss(j6)),my);class vt{static fromObject(e){let t=new vt(null);return hr(e,(r,s)=>{t=t.set(new Et(r),s)}),t}constructor(e,t=J5()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ut(),value:this.value};if(Je(e))return null;{const r=et(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(_t(e),t);return o!=null?{path:Zt(new Et(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Je(e))return this;{const t=et(e),r=this.children.get(t);return r!==null?r.subtree(_t(e)):new vt(null)}}set(e,t){if(Je(e))return new vt(t,this.children);{const r=et(e),o=(this.children.get(r)||new vt(null)).set(_t(e),t),l=this.children.insert(r,o);return new vt(this.value,l)}}remove(e){if(Je(e))return this.children.isEmpty()?new vt(null):new vt(null,this.children);{const t=et(e),r=this.children.get(t);if(r){const s=r.remove(_t(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new vt(null):new vt(this.value,o)}else return this}}get(e){if(Je(e))return this.value;{const t=et(e),r=this.children.get(t);return r?r.get(_t(e)):null}}setTree(e,t){if(Je(e))return t;{const r=et(e),o=(this.children.get(r)||new vt(null)).setTree(_t(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new vt(this.value,l)}}fold(e){return this.fold_(ut(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(Zt(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ut(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(Je(e))return null;{const o=et(e),l=this.children.get(o);return l?l.findOnPath_(_t(e),Zt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ut(),t)}foreachOnPath_(e,t,r){if(Je(e))return this;{this.value&&r(t,this.value);const s=et(e),o=this.children.get(s);return o?o.foreachOnPath_(_t(e),Zt(t,s),r):new vt(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Zt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.writeTree_=e}static empty(){return new Pr(new vt(null))}}function wu(n,e,t){if(Je(e))return new Pr(new vt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const l=cr(s,e);return o=o.updateChild(l,t),new Pr(n.writeTree_.set(s,o))}else{const s=new vt(t),o=n.writeTree_.setTree(e,s);return new Pr(o)}}}function BT(n,e,t){let r=n;return hr(t,(s,o)=>{r=wu(r,Zt(e,s),o)}),r}function $T(n,e){if(Je(e))return Pr.empty();{const t=n.writeTree_.setTree(e,new vt(null));return new Pr(t)}}function Zy(n,e){return ya(n,e)!=null}function ya(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(cr(t.path,e)):null}function WT(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(wn,(r,s)=>{e.push(new tt(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new tt(r,s.value))}),e}function Gi(n,e){if(Je(e))return n;{const t=ya(n,e);return t!=null?new Pr(new vt(t)):new Pr(n.writeTree_.subtree(e))}}function ev(n){return n.writeTree_.isEmpty()}function Ll(n,e){return gP(ut(),n.writeTree_,e)}function gP(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(ve(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=gP(Zt(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Zt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(n,e){return SP(e,n)}function Z5(n,e,t,r,s){ve(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=wu(n.visibleWrites,e,t)),n.lastWriteId=r}function e9(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function t9(n,e){const t=n.allWrites.findIndex(u=>u.writeId===e);ve(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const u=n.allWrites[l];u.visible&&(l>=t&&n9(u,r.path)?s=!1:Rr(r.path,u.path)&&(o=!0)),l--}if(s){if(o)return r9(n),!0;if(r.snap)n.visibleWrites=$T(n.visibleWrites,r.path);else{const u=r.children;hr(u,d=>{n.visibleWrites=$T(n.visibleWrites,Zt(r.path,d))})}return!0}else return!1}function n9(n,e){if(n.snap)return Rr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Rr(Zt(n.path,t),e))return!0;return!1}function r9(n){n.visibleWrites=vP(n.allWrites,s9,ut()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function s9(n){return n.visible}function vP(n,e,t){let r=Pr.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let u;if(o.snap)Rr(t,l)?(u=cr(t,l),r=wu(r,u,o.snap)):Rr(l,t)&&(u=cr(l,t),r=wu(r,ut(),o.snap.getChild(u)));else if(o.children){if(Rr(t,l))u=cr(t,l),r=BT(r,u,o.children);else if(Rr(l,t))if(u=cr(l,t),Je(u))r=BT(r,ut(),o.children);else{const d=Dl(o.children,et(u));if(d){const p=d.getChild(_t(u));r=wu(r,ut(),p)}}}else throw Ql("WriteRecord should have .snap or .children")}}return r}function _P(n,e,t,r,s){if(!r&&!s){const o=ya(n.visibleWrites,e);if(o!=null)return o;{const l=Gi(n.visibleWrites,e);if(ev(l))return t;if(t==null&&!Zy(l,ut()))return null;{const u=t||at.EMPTY_NODE;return Ll(l,u)}}}else{const o=Gi(n.visibleWrites,e);if(!s&&ev(o))return t;if(!s&&t==null&&!Zy(o,ut()))return null;{const l=function(p){return(p.visible||s)&&(!r||!~r.indexOf(p.writeId))&&(Rr(p.path,e)||Rr(e,p.path))},u=vP(n.allWrites,l,e),d=t||at.EMPTY_NODE;return Ll(u,d)}}}function i9(n,e,t){let r=at.EMPTY_NODE;const s=ya(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(wn,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=Gi(n.visibleWrites,e);return t.forEachChild(wn,(l,u)=>{const d=Ll(Gi(o,new Et(l)),u);r=r.updateImmediateChild(l,d)}),WT(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=Gi(n.visibleWrites,e);return WT(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function o9(n,e,t,r,s){ve(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=Zt(e,t);if(Zy(n.visibleWrites,o))return null;{const l=Gi(n.visibleWrites,o);return ev(l)?s.getChild(t):Ll(l,s.getChild(t))}}function a9(n,e,t,r){const s=Zt(e,t),o=ya(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=Gi(n.visibleWrites,s);return Ll(l,r.getNode().getImmediateChild(t))}else return null}function l9(n,e){return ya(n.visibleWrites,e)}function c9(n,e,t,r,s,o,l){let u;const d=Gi(n.visibleWrites,e),p=ya(d,ut());if(p!=null)u=p;else if(t!=null)u=Ll(d,t);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const m=[],y=l.getCompare(),E=o?u.getReverseIteratorFrom(r,l):u.getIteratorFrom(r,l);let I=E.getNext();for(;I&&m.length<s;)y(I,r)!==0&&m.push(I),I=E.getNext();return m}else return[]}function u9(){return{visibleWrites:Pr.empty(),allWrites:[],lastWriteId:-1}}function tv(n,e,t,r){return _P(n.writeTree,n.treePath,e,t,r)}function wP(n,e){return i9(n.writeTree,n.treePath,e)}function HT(n,e,t,r){return o9(n.writeTree,n.treePath,e,t,r)}function Hf(n,e){return l9(n.writeTree,Zt(n.treePath,e))}function d9(n,e,t,r,s,o){return c9(n.writeTree,n.treePath,e,t,r,s,o)}function P_(n,e,t){return a9(n.writeTree,n.treePath,e,t)}function EP(n,e){return SP(Zt(n.treePath,e),n.writeTree)}function SP(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;ve(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ve(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,jT(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,z5(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,U5(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,jT(r,e.snapshotNode,s.oldSnap));else throw Ql("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const TP=new f9;class k_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new b_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return P_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ua(this.viewCache_),o=d9(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function p9(n,e){ve(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ve(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function m9(n,e,t,r,s){const o=new h9;let l,u;if(t.type===is.OVERWRITE){const p=t;p.source.fromUser?l=nv(n,e,p.path,p.snap,r,s,o):(ve(p.source.fromServer,"Unknown source."),u=p.source.tagged||e.serverCache.isFiltered()&&!Je(p.path),l=Gf(n,e,p.path,p.snap,r,s,u,o))}else if(t.type===is.MERGE){const p=t;p.source.fromUser?l=y9(n,e,p.path,p.children,r,s,o):(ve(p.source.fromServer,"Unknown source."),u=p.source.tagged||e.serverCache.isFiltered(),l=rv(n,e,p.path,p.children,r,s,u,o))}else if(t.type===is.ACK_USER_WRITE){const p=t;p.revert?l=w9(n,e,p.path,r,s,o):l=v9(n,e,p.path,p.affectedTree,r,s,o)}else if(t.type===is.LISTEN_COMPLETE)l=_9(n,e,t.path,r,o);else throw Ql("Unknown operation type: "+t.type);const d=o.getChanges();return g9(e,l,d),{viewCache:l,changes:d}}function g9(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Jy(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(F5(Jy(e)))}}function xP(n,e,t,r,s,o){const l=e.eventCache;if(Hf(r,t)!=null)return e;{let u,d;if(Je(t))if(ve(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=ua(e),m=p instanceof at?p:at.EMPTY_NODE,y=wP(r,m);u=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const p=tv(r,ua(e));u=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=et(t);if(p===".priority"){ve(eo(t)===1,"Can't have a priority with additional path components");const m=l.getNode();d=e.serverCache.getNode();const y=HT(r,t,m,d);y!=null?u=n.filter.updatePriority(m,y):u=l.getNode()}else{const m=_t(t);let y;if(l.isCompleteForChild(p)){d=e.serverCache.getNode();const E=HT(r,t,l.getNode(),d);E!=null?y=l.getNode().getImmediateChild(p).updateChild(m,E):y=l.getNode().getImmediateChild(p)}else y=P_(r,p,e.serverCache);y!=null?u=n.filter.updateChild(l.getNode(),p,y,m,s,o):u=l.getNode()}}return _u(e,u,l.isFullyInitialized()||Je(t),n.filter.filtersNodes())}}function Gf(n,e,t,r,s,o,l,u){const d=e.serverCache;let p;const m=l?n.filter:n.filter.getIndexedFilter();if(Je(t))p=m.updateFullNode(d.getNode(),r,null);else if(m.filtersNodes()&&!d.isFiltered()){const I=d.getNode().updateChild(t,r);p=m.updateFullNode(d.getNode(),I,null)}else{const I=et(t);if(!d.isCompleteForPath(t)&&eo(t)>1)return e;const b=_t(t),A=d.getNode().getImmediateChild(I).updateChild(b,r);I===".priority"?p=m.updatePriority(d.getNode(),A):p=m.updateChild(d.getNode(),I,A,b,TP,null)}const y=mP(e,p,d.isFullyInitialized()||Je(t),m.filtersNodes()),E=new k_(s,y,o);return xP(n,y,t,s,E,u)}function nv(n,e,t,r,s,o,l){const u=e.eventCache;let d,p;const m=new k_(s,e,o);if(Je(t))p=n.filter.updateFullNode(e.eventCache.getNode(),r,l),d=_u(e,p,!0,n.filter.filtersNodes());else{const y=et(t);if(y===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),r),d=_u(e,p,u.isFullyInitialized(),u.isFiltered());else{const E=_t(t),I=u.getNode().getImmediateChild(y);let b;if(Je(E))b=r;else{const x=m.getCompleteChild(y);x!=null?eP(E)===".priority"&&x.getChild(nP(E)).isEmpty()?b=x:b=x.updateChild(E,r):b=at.EMPTY_NODE}if(I.equals(b))d=e;else{const x=n.filter.updateChild(u.getNode(),y,b,E,m,l);d=_u(e,x,u.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function GT(n,e){return n.eventCache.isCompleteForChild(e)}function y9(n,e,t,r,s,o,l){let u=e;return r.foreach((d,p)=>{const m=Zt(t,d);GT(e,et(m))&&(u=nv(n,u,m,p,s,o,l))}),r.foreach((d,p)=>{const m=Zt(t,d);GT(e,et(m))||(u=nv(n,u,m,p,s,o,l))}),u}function qT(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function rv(n,e,t,r,s,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,p;Je(t)?p=r:p=new vt(null).setTree(t,r);const m=e.serverCache.getNode();return p.children.inorderTraversal((y,E)=>{if(m.hasChild(y)){const I=e.serverCache.getNode().getImmediateChild(y),b=qT(n,I,E);d=Gf(n,d,new Et(y),b,s,o,l,u)}}),p.children.inorderTraversal((y,E)=>{const I=!e.serverCache.isCompleteForChild(y)&&E.value===null;if(!m.hasChild(y)&&!I){const b=e.serverCache.getNode().getImmediateChild(y),x=qT(n,b,E);d=Gf(n,d,new Et(y),x,s,o,l,u)}}),d}function v9(n,e,t,r,s,o,l){if(Hf(s,t)!=null)return e;const u=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(Je(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return Gf(n,e,t,d.getNode().getChild(t),s,o,u,l);if(Je(t)){let p=new vt(null);return d.getNode().forEachChild(Rl,(m,y)=>{p=p.set(new Et(m),y)}),rv(n,e,t,p,s,o,u,l)}else return e}else{let p=new vt(null);return r.foreach((m,y)=>{const E=Zt(t,m);d.isCompleteForPath(E)&&(p=p.set(m,d.getNode().getChild(E)))}),rv(n,e,t,p,s,o,u,l)}}function _9(n,e,t,r,s){const o=e.serverCache,l=mP(e,o.getNode(),o.isFullyInitialized()||Je(t),o.isFiltered());return xP(n,l,t,r,TP,s)}function w9(n,e,t,r,s,o){let l;if(Hf(r,t)!=null)return e;{const u=new k_(r,e,s),d=e.eventCache.getNode();let p;if(Je(t)||et(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=tv(r,ua(e));else{const y=e.serverCache.getNode();ve(y instanceof at,"serverChildren would be complete if leaf node"),m=wP(r,y)}m=m,p=n.filter.updateFullNode(d,m,o)}else{const m=et(t);let y=P_(r,m,e.serverCache);y==null&&e.serverCache.isCompleteForChild(m)&&(y=d.getImmediateChild(m)),y!=null?p=n.filter.updateChild(d,m,y,_t(t),u,o):e.eventCache.getNode().hasChild(m)?p=n.filter.updateChild(d,m,at.EMPTY_NODE,_t(t),u,o):p=d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=tv(r,ua(e)),l.isLeafNode()&&(p=n.filter.updateFullNode(p,l,o)))}return l=e.serverCache.isFullyInitialized()||Hf(r,ut())!=null,_u(e,p,l,n.filter.filtersNodes())}}function E9(n,e){const t=ua(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Je(e)&&!t.getImmediateChild(et(e)).isEmpty())?t.getChild(e):null}function KT(n,e,t,r){e.type===is.MERGE&&e.source.queryId!==null&&(ve(ua(n.viewCache_),"We should always have a full cache before handling merges"),ve(Jy(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=m9(n.processor_,s,e,t,r);return p9(n.processor_,o.viewCache),ve(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,S9(n,o.changes,o.viewCache.eventCache.getNode())}function S9(n,e,t,r){const s=n.eventRegistrations_;return Q5(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QT;function T9(n){ve(!QT,"__referenceConstructor has already been defined"),QT=n}function N_(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return ve(o!=null,"SyncTree gave us an op for an invalid query."),KT(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(KT(l,e,t,r));return o}}function D_(n,e){let t=null;for(const r of n.views.values())t=t||E9(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YT;function x9(n){ve(!YT,"__referenceConstructor has already been defined"),YT=n}class XT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=u9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function I9(n,e,t,r,s){return Z5(n.pendingWriteTree_,e,t,r,s),s?Up(n,new ca(dP(),e,t)):[]}function _l(n,e,t=!1){const r=e9(n.pendingWriteTree_,e);if(t9(n.pendingWriteTree_,e)){let o=new vt(null);return r.snap!=null?o=o.set(ut(),!0):hr(r.children,l=>{o=o.set(new Et(l),!0)}),Up(n,new Wf(r.path,o,t))}else return[]}function Fp(n,e,t){return Up(n,new ca(hP(),e,t))}function C9(n,e,t){const r=vt.fromObject(t);return Up(n,new Vu(hP(),e,r))}function R9(n,e,t,r){const s=AP(n,r);if(s!=null){const o=bP(s),l=o.path,u=o.queryId,d=cr(l,e),p=new ca(fP(u),d,t);return PP(n,l,p)}else return[]}function A9(n,e,t,r){const s=AP(n,r);if(s){const o=bP(s),l=o.path,u=o.queryId,d=cr(l,e),p=vt.fromObject(t),m=new Vu(fP(u),d,p);return PP(n,l,m)}else return[]}function IP(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,u)=>{const d=cr(l,e),p=D_(u,d);if(p)return p});return _P(s,e,o,t,!0)}function Up(n,e){return CP(e,n.syncPointTree_,null,yP(n.pendingWriteTree_,ut()))}function CP(n,e,t,r){if(Je(n.path))return RP(n,e,t,r);{const s=e.get(ut());t==null&&s!=null&&(t=D_(s,ut()));let o=[];const l=et(n.path),u=n.operationForChild(l),d=e.children.get(l);if(d&&u){const p=t?t.getImmediateChild(l):null,m=EP(r,l);o=o.concat(CP(u,d,p,m))}return s&&(o=o.concat(N_(s,n,r,t))),o}}function RP(n,e,t,r){const s=e.get(ut());t==null&&s!=null&&(t=D_(s,ut()));let o=[];return e.children.inorderTraversal((l,u)=>{const d=t?t.getImmediateChild(l):null,p=EP(r,l),m=n.operationForChild(l);m&&(o=o.concat(RP(m,u,d,p)))}),s&&(o=o.concat(N_(s,n,r,t))),o}function AP(n,e){return n.tagToQueryMap.get(e)}function bP(n){const e=n.indexOf("$");return ve(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Et(n.substr(0,e))}}function PP(n,e,t){const r=n.syncPointTree_.get(e);ve(r,"Missing sync point for query tag that we're tracking");const s=yP(n.pendingWriteTree_,e);return N_(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new O_(t)}node(){return this.node_}}class M_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Zt(this.path_,e);return new M_(this.syncTree_,t)}node(){return IP(this.syncTree_,this.path_)}}const b9=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},JT=function(n,e,t){if(!n||typeof n!="object")return n;if(ve(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return P9(n[".sv"],e,t);if(typeof n[".sv"]=="object")return k9(n[".sv"],e);ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},P9=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ve(!1,"Unexpected server value: "+n)}},k9=function(n,e,t){n.hasOwnProperty("increment")||ve(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&ve(!1,"Unexpected increment value: "+r);const s=e.node();if(ve(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},N9=function(n,e,t,r){return L_(e,new M_(t,n),r)},D9=function(n,e,t){return L_(n,new O_(e),t)};function L_(n,e,t){const r=n.getPriority().val(),s=JT(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,u=JT(l.getValue(),e,t);return u!==l.getValue()||s!==l.getPriority().val()?new Yt(u,vn(s)):n}else{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new Yt(s))),l.forEachChild(wn,(u,d)=>{const p=L_(d,e.getImmediateChild(u),t);p!==d&&(o=o.updateImmediateChild(u,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function j_(n,e){let t=e instanceof Et?e:new Et(e),r=n,s=et(t);for(;s!==null;){const o=Dl(r.node.children,s)||{children:{},childCount:0};r=new V_(s,r,o),t=_t(t),s=et(t)}return r}function Zl(n){return n.node.value}function kP(n,e){n.node.value=e,sv(n)}function NP(n){return n.node.childCount>0}function O9(n){return Zl(n)===void 0&&!NP(n)}function zp(n,e){hr(n.node.children,(t,r)=>{e(new V_(t,n,r))})}function DP(n,e,t,r){t&&e(n),zp(n,s=>{DP(s,e,!0)})}function M9(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function id(n){return new Et(n.parent===null?n.name:id(n.parent)+"/"+n.name)}function sv(n){n.parent!==null&&L9(n.parent,n.name,n)}function L9(n,e,t){const r=O9(t),s=ri(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,sv(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,sv(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=/[\[\].#$\/\u0000-\u001F\u007F]/,j9=/[\[\].#$\u0000-\u001F\u007F]/,gy=10*1024*1024,OP=function(n){return typeof n=="string"&&n.length!==0&&!V9.test(n)},F9=function(n){return typeof n=="string"&&n.length!==0&&!j9.test(n)},U9=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),F9(n)},MP=function(n,e,t){const r=t instanceof Et?new _5(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+qo(r));if(typeof e=="function")throw new Error(n+"contains a function "+qo(r)+" with contents = "+e.toString());if(Db(e))throw new Error(n+"contains "+e.toString()+" "+qo(r));if(typeof e=="string"&&e.length>gy/3&&Np(e)>gy)throw new Error(n+"contains a string greater than "+gy+" utf8 bytes "+qo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(hr(e,(l,u)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!OP(l)))throw new Error(n+" contains an invalid key ("+l+") "+qo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);w5(r,l),MP(n,u,r),E5(r)}),s&&o)throw new Error(n+' contains ".value" child '+qo(r)+" in addition to actual children.")}},z9=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!OP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!U9(t))throw new Error(n3(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $9(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!rP(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function va(n,e,t){$9(n,t),W9(n,r=>Rr(r,e)||Rr(e,r))}function W9(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(H9(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function H9(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();yu&&yn("event: "+t.toString()),rd(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9="repo_interrupt",q9=25;class K9{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new B9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$f(),this.transactionQueueTree_=new V_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Q9(n,e,t){if(n.stats_=x_(n.repoInfo_),n.forceRestClient_||W6())n.server_=new Bf(n.repoInfo_,(r,s,o,l)=>{ZT(n,r,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ex(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{an(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Gs(n.repoInfo_,e,(r,s,o,l)=>{ZT(n,r,s,o,l)},r=>{ex(n,r)},r=>{X9(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Q6(n.repoInfo_,()=>new K5(n.stats_,n.server_)),n.infoData_=new $5,n.infoSyncTree_=new XT({startListening:(r,s,o,l)=>{let u=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(u=Fp(n.infoSyncTree_,r._path,d),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),F_(n,"connected",!1),n.serverSyncTree_=new XT({startListening:(r,s,o,l)=>(n.server_.listen(r,o,s,(u,d)=>{const p=l(u,d);va(n.eventQueue_,r._path,p)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function Y9(n){const t=n.infoData_.getNode(new Et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function LP(n){return b9({timestamp:Y9(n)})}function ZT(n,e,t,r,s){n.dataUpdateCount++;const o=new Et(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const d=kf(t,p=>vn(p));l=A9(n.serverSyncTree_,o,d,s)}else{const d=vn(t);l=R9(n.serverSyncTree_,o,d,s)}else if(r){const d=kf(t,p=>vn(p));l=C9(n.serverSyncTree_,o,d)}else{const d=vn(t);l=Fp(n.serverSyncTree_,o,d)}let u=o;l.length>0&&(u=z_(n,o)),va(n.eventQueue_,u,l)}function ex(n,e){F_(n,"connected",e),e===!1&&Z9(n)}function X9(n,e){hr(e,(t,r)=>{F_(n,t,r)})}function F_(n,e,t){const r=new Et("/.info/"+e),s=vn(t);n.infoData_.updateSnapshot(r,s);const o=Fp(n.infoSyncTree_,r,s);va(n.eventQueue_,r,o)}function J9(n){return n.nextWriteId_++}function Z9(n){VP(n,"onDisconnectEvents");const e=LP(n),t=$f();Xy(n.onDisconnect_,ut(),(s,o)=>{const l=N9(s,o,n.serverSyncTree_,e);uP(t,s,l)});let r=[];Xy(t,ut(),(s,o)=>{r=r.concat(Fp(n.serverSyncTree_,s,o));const l=rB(n,s);z_(n,l)}),n.onDisconnect_=$f(),va(n.eventQueue_,ut(),r)}function eB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(G9)}function VP(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),yn(t,...e)}function jP(n,e,t){return IP(n.serverSyncTree_,e,t)||at.EMPTY_NODE}function U_(n,e=n.transactionQueueTree_){if(e||Bp(n,e),Zl(e)){const t=UP(n,e);ve(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&tB(n,id(e),t)}else NP(e)&&zp(e,t=>{U_(n,t)})}function tB(n,e,t){const r=t.map(p=>p.currentWriteId),s=jP(n,e,r);let o=s;const l=s.hash();for(let p=0;p<t.length;p++){const m=t[p];ve(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const y=cr(e,m.path);o=o.updateChild(y,m.currentOutputSnapshotRaw)}const u=o.val(!0),d=e;n.server_.put(d.toString(),u,p=>{VP(n,"transaction put response",{path:d.toString(),status:p});let m=[];if(p==="ok"){const y=[];for(let E=0;E<t.length;E++)t[E].status=2,m=m.concat(_l(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&y.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();Bp(n,j_(n.transactionQueueTree_,e)),U_(n,n.transactionQueueTree_),va(n.eventQueue_,e,m);for(let E=0;E<y.length;E++)rd(y[E])}else{if(p==="datastale")for(let y=0;y<t.length;y++)t[y].status===3?t[y].status=4:t[y].status=0;else{Zn("transaction at "+d.toString()+" failed: "+p);for(let y=0;y<t.length;y++)t[y].status=4,t[y].abortReason=p}z_(n,e)}},l)}function z_(n,e){const t=FP(n,e),r=id(t),s=UP(n,t);return nB(n,s,r),r}function nB(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const d=e[u],p=cr(t,d.path);let m=!1,y;if(ve(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,y=d.abortReason,s=s.concat(_l(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=q9)m=!0,y="maxretry",s=s.concat(_l(n.serverSyncTree_,d.currentWriteId,!0));else{const E=jP(n,d.path,l);d.currentInputSnapshot=E;const I=e[u].update(E.val());if(I!==void 0){MP("transaction failed: Data returned ",I,d.path);let b=vn(I);typeof I=="object"&&I!=null&&ri(I,".priority")||(b=b.updatePriority(E.getPriority()));const A=d.currentWriteId,j=LP(n),V=D9(b,E,j);d.currentOutputSnapshotRaw=b,d.currentOutputSnapshotResolved=V,d.currentWriteId=J9(n),l.splice(l.indexOf(A),1),s=s.concat(I9(n.serverSyncTree_,d.path,V,d.currentWriteId,d.applyLocally)),s=s.concat(_l(n.serverSyncTree_,A,!0))}else m=!0,y="nodata",s=s.concat(_l(n.serverSyncTree_,d.currentWriteId,!0))}va(n.eventQueue_,t,s),s=[],m&&(e[u].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[u].unwatcher),e[u].onComplete&&(y==="nodata"?r.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):r.push(()=>e[u].onComplete(new Error(y),!1,null))))}Bp(n,n.transactionQueueTree_);for(let u=0;u<r.length;u++)rd(r[u]);U_(n,n.transactionQueueTree_)}function FP(n,e){let t,r=n.transactionQueueTree_;for(t=et(e);t!==null&&Zl(r)===void 0;)r=j_(r,t),e=_t(e),t=et(e);return r}function UP(n,e){const t=[];return zP(n,e,t),t.sort((r,s)=>r.order-s.order),t}function zP(n,e,t){const r=Zl(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);zp(e,s=>{zP(n,s,t)})}function Bp(n,e){const t=Zl(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,kP(e,t.length>0?t:void 0)}zp(e,r=>{Bp(n,r)})}function rB(n,e){const t=id(FP(n,e)),r=j_(n.transactionQueueTree_,e);return M9(r,s=>{yy(n,s)}),yy(n,r),DP(r,s=>{yy(n,s)}),t}function yy(n,e){const t=Zl(e);if(t){const r=[];let s=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ve(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(ve(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(_l(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?kP(e,void 0):t.length=o+1,va(n.eventQueue_,id(e),s);for(let l=0;l<r.length;l++)rd(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function iB(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zn(`Invalid query segment '${t}' in query '${n}'`)}return e}const tx=function(n,e){const t=oB(n),r=t.namespace;t.domain==="firebase.com"&&Js(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Js("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||L6();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Hb(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new Et(t.pathString)}},oB=function(n){let e="",t="",r="",s="",o="",l=!0,u="https",d=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(u=n.substring(0,p-1),n=n.substring(p+2));let m=n.indexOf("/");m===-1&&(m=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),e=n.substring(0,Math.min(m,y)),m<y&&(s=sB(n.substring(m,y)));const E=iB(n.substring(Math.min(n.length,y)));p=e.indexOf(":"),p>=0?(l=u==="https"||u==="wss",d=parseInt(e.substring(p+1),10)):p=e.length;const I=e.slice(0,p);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),o=r}"ns"in E&&(o=E.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:l,scheme:u,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Je(this._path)?null:eP(this._path)}get ref(){return new ec(this._repo,this._path)}get _queryIdentifier(){const e=UT(this._queryParams),t=S_(e);return t==="{}"?"default":t}get _queryObject(){return UT(this._queryParams)}isEqual(e){if(e=Nt(e),!(e instanceof B_))return!1;const t=this._repo===e._repo,r=rP(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+v5(this._path)}}class ec extends B_{constructor(e,t){super(e,t,new A_,!1)}get parent(){const e=nP(this._path);return e===null?null:new ec(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}T9(ec);x9(ec);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB="FIREBASE_DATABASE_EMULATOR_HOST",iv={};let lB=!1;function cB(n,e,t,r){const s=e.lastIndexOf(":"),o=e.substring(0,s),l=uo(o);n.repoInfo_=new Hb(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function uB(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Js("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=tx(o,s),u=l.repoInfo,d;typeof process<"u"&&ET&&(d=ET[aB]),d?(o=`http://${d}?ns=${u.namespace}`,l=tx(o,s),u=l.repoInfo):l.repoInfo.secure;const p=new G6(n.name,n.options,e);z9("Invalid Firebase Database URL",l),Je(l.path)||Js("Database URL must point to the root of a Firebase Database (not including a child path).");const m=hB(u,n,p,new H6(n,t));return new fB(m,n)}function dB(n,e){const t=iv[e];(!t||t[n.key]!==n)&&Js(`Database ${e}(${n.repoInfo_}) has already been deleted.`),eB(n),delete t[n.key]}function hB(n,e,t,r){let s=iv[e.name];s||(s={},iv[e.name]=s);let o=s[n.toURLString()];return o&&Js("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new K9(n,lB,t,r),s[n.toURLString()]=o,o}class fB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Q9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ec(this._repo,ut())),this._rootInternal}_delete(){return this._rootInternal!==null&&(dB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Js("Cannot call "+e+" on a deleted database.")}}function pB(n=d_(),e){const t=Op(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=jA("database");r&&mB(t,...r)}return t}function mB(n,e,t,r={}){n=Nt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&Qs(r,o.repoInfo_.emulatorOptions))return;Js("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Js('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new ef(ef.OWNER);else if(r.mockUserToken){const u=typeof r.mockUserToken=="string"?r.mockUserToken:zA(r.mockUserToken,n.app.options.projectId);l=new ef(u)}uo(e)&&(a_(e),l_("Database",!0)),cB(o,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(n){P6(ga),ia(new Zi("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return uB(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),as(ST,TT,n),as(ST,TT,"esm2020")}Gs.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Gs.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};gB();var nx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qi,BP;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function N(){}N.prototype=R.prototype,P.F=R.prototype,P.prototype=new N,P.prototype.constructor=P,P.D=function(O,M,F){for(var D=Array(arguments.length-2),me=2;me<arguments.length;me++)D[me-2]=arguments[me];return R.prototype[M].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,N){N||(N=0);const O=Array(16);if(typeof R=="string")for(var M=0;M<16;++M)O[M]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(M=0;M<16;++M)O[M]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=P.g[0],N=P.g[1],M=P.g[2];let F=P.g[3],D;D=R+(F^N&(M^F))+O[0]+3614090360&4294967295,R=N+(D<<7&4294967295|D>>>25),D=F+(M^R&(N^M))+O[1]+3905402710&4294967295,F=R+(D<<12&4294967295|D>>>20),D=M+(N^F&(R^N))+O[2]+606105819&4294967295,M=F+(D<<17&4294967295|D>>>15),D=N+(R^M&(F^R))+O[3]+3250441966&4294967295,N=M+(D<<22&4294967295|D>>>10),D=R+(F^N&(M^F))+O[4]+4118548399&4294967295,R=N+(D<<7&4294967295|D>>>25),D=F+(M^R&(N^M))+O[5]+1200080426&4294967295,F=R+(D<<12&4294967295|D>>>20),D=M+(N^F&(R^N))+O[6]+2821735955&4294967295,M=F+(D<<17&4294967295|D>>>15),D=N+(R^M&(F^R))+O[7]+4249261313&4294967295,N=M+(D<<22&4294967295|D>>>10),D=R+(F^N&(M^F))+O[8]+1770035416&4294967295,R=N+(D<<7&4294967295|D>>>25),D=F+(M^R&(N^M))+O[9]+2336552879&4294967295,F=R+(D<<12&4294967295|D>>>20),D=M+(N^F&(R^N))+O[10]+4294925233&4294967295,M=F+(D<<17&4294967295|D>>>15),D=N+(R^M&(F^R))+O[11]+2304563134&4294967295,N=M+(D<<22&4294967295|D>>>10),D=R+(F^N&(M^F))+O[12]+1804603682&4294967295,R=N+(D<<7&4294967295|D>>>25),D=F+(M^R&(N^M))+O[13]+4254626195&4294967295,F=R+(D<<12&4294967295|D>>>20),D=M+(N^F&(R^N))+O[14]+2792965006&4294967295,M=F+(D<<17&4294967295|D>>>15),D=N+(R^M&(F^R))+O[15]+1236535329&4294967295,N=M+(D<<22&4294967295|D>>>10),D=R+(M^F&(N^M))+O[1]+4129170786&4294967295,R=N+(D<<5&4294967295|D>>>27),D=F+(N^M&(R^N))+O[6]+3225465664&4294967295,F=R+(D<<9&4294967295|D>>>23),D=M+(R^N&(F^R))+O[11]+643717713&4294967295,M=F+(D<<14&4294967295|D>>>18),D=N+(F^R&(M^F))+O[0]+3921069994&4294967295,N=M+(D<<20&4294967295|D>>>12),D=R+(M^F&(N^M))+O[5]+3593408605&4294967295,R=N+(D<<5&4294967295|D>>>27),D=F+(N^M&(R^N))+O[10]+38016083&4294967295,F=R+(D<<9&4294967295|D>>>23),D=M+(R^N&(F^R))+O[15]+3634488961&4294967295,M=F+(D<<14&4294967295|D>>>18),D=N+(F^R&(M^F))+O[4]+3889429448&4294967295,N=M+(D<<20&4294967295|D>>>12),D=R+(M^F&(N^M))+O[9]+568446438&4294967295,R=N+(D<<5&4294967295|D>>>27),D=F+(N^M&(R^N))+O[14]+3275163606&4294967295,F=R+(D<<9&4294967295|D>>>23),D=M+(R^N&(F^R))+O[3]+4107603335&4294967295,M=F+(D<<14&4294967295|D>>>18),D=N+(F^R&(M^F))+O[8]+1163531501&4294967295,N=M+(D<<20&4294967295|D>>>12),D=R+(M^F&(N^M))+O[13]+2850285829&4294967295,R=N+(D<<5&4294967295|D>>>27),D=F+(N^M&(R^N))+O[2]+4243563512&4294967295,F=R+(D<<9&4294967295|D>>>23),D=M+(R^N&(F^R))+O[7]+1735328473&4294967295,M=F+(D<<14&4294967295|D>>>18),D=N+(F^R&(M^F))+O[12]+2368359562&4294967295,N=M+(D<<20&4294967295|D>>>12),D=R+(N^M^F)+O[5]+4294588738&4294967295,R=N+(D<<4&4294967295|D>>>28),D=F+(R^N^M)+O[8]+2272392833&4294967295,F=R+(D<<11&4294967295|D>>>21),D=M+(F^R^N)+O[11]+1839030562&4294967295,M=F+(D<<16&4294967295|D>>>16),D=N+(M^F^R)+O[14]+4259657740&4294967295,N=M+(D<<23&4294967295|D>>>9),D=R+(N^M^F)+O[1]+2763975236&4294967295,R=N+(D<<4&4294967295|D>>>28),D=F+(R^N^M)+O[4]+1272893353&4294967295,F=R+(D<<11&4294967295|D>>>21),D=M+(F^R^N)+O[7]+4139469664&4294967295,M=F+(D<<16&4294967295|D>>>16),D=N+(M^F^R)+O[10]+3200236656&4294967295,N=M+(D<<23&4294967295|D>>>9),D=R+(N^M^F)+O[13]+681279174&4294967295,R=N+(D<<4&4294967295|D>>>28),D=F+(R^N^M)+O[0]+3936430074&4294967295,F=R+(D<<11&4294967295|D>>>21),D=M+(F^R^N)+O[3]+3572445317&4294967295,M=F+(D<<16&4294967295|D>>>16),D=N+(M^F^R)+O[6]+76029189&4294967295,N=M+(D<<23&4294967295|D>>>9),D=R+(N^M^F)+O[9]+3654602809&4294967295,R=N+(D<<4&4294967295|D>>>28),D=F+(R^N^M)+O[12]+3873151461&4294967295,F=R+(D<<11&4294967295|D>>>21),D=M+(F^R^N)+O[15]+530742520&4294967295,M=F+(D<<16&4294967295|D>>>16),D=N+(M^F^R)+O[2]+3299628645&4294967295,N=M+(D<<23&4294967295|D>>>9),D=R+(M^(N|~F))+O[0]+4096336452&4294967295,R=N+(D<<6&4294967295|D>>>26),D=F+(N^(R|~M))+O[7]+1126891415&4294967295,F=R+(D<<10&4294967295|D>>>22),D=M+(R^(F|~N))+O[14]+2878612391&4294967295,M=F+(D<<15&4294967295|D>>>17),D=N+(F^(M|~R))+O[5]+4237533241&4294967295,N=M+(D<<21&4294967295|D>>>11),D=R+(M^(N|~F))+O[12]+1700485571&4294967295,R=N+(D<<6&4294967295|D>>>26),D=F+(N^(R|~M))+O[3]+2399980690&4294967295,F=R+(D<<10&4294967295|D>>>22),D=M+(R^(F|~N))+O[10]+4293915773&4294967295,M=F+(D<<15&4294967295|D>>>17),D=N+(F^(M|~R))+O[1]+2240044497&4294967295,N=M+(D<<21&4294967295|D>>>11),D=R+(M^(N|~F))+O[8]+1873313359&4294967295,R=N+(D<<6&4294967295|D>>>26),D=F+(N^(R|~M))+O[15]+4264355552&4294967295,F=R+(D<<10&4294967295|D>>>22),D=M+(R^(F|~N))+O[6]+2734768916&4294967295,M=F+(D<<15&4294967295|D>>>17),D=N+(F^(M|~R))+O[13]+1309151649&4294967295,N=M+(D<<21&4294967295|D>>>11),D=R+(M^(N|~F))+O[4]+4149444226&4294967295,R=N+(D<<6&4294967295|D>>>26),D=F+(N^(R|~M))+O[11]+3174756917&4294967295,F=R+(D<<10&4294967295|D>>>22),D=M+(R^(F|~N))+O[2]+718787259&4294967295,M=F+(D<<15&4294967295|D>>>17),D=N+(F^(M|~R))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+F&4294967295}r.prototype.v=function(P,R){R===void 0&&(R=P.length);const N=R-this.blockSize,O=this.C;let M=this.h,F=0;for(;F<R;){if(M==0)for(;F<=N;)s(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<R;)if(O[M++]=P.charCodeAt(F++),M==this.blockSize){s(this,O),M=0;break}}else for(;F<R;)if(O[M++]=P[F++],M==this.blockSize){s(this,O),M=0;break}}this.h=M,this.o+=R},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;R=this.o*8;for(var N=P.length-8;N<P.length;++N)P[N]=R&255,R/=256;for(this.v(P),P=Array(16),R=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)P[R++]=this.g[N]>>>O&255;return P};function o(P,R){var N=u;return Object.prototype.hasOwnProperty.call(N,P)?N[P]:N[P]=R(P)}function l(P,R){this.h=R;const N=[];let O=!0;for(let M=P.length-1;M>=0;M--){const F=P[M]|0;O&&F==R||(N[M]=F,O=!1)}this.g=N}var u={};function d(P){return-128<=P&&P<128?o(P,function(R){return new l([R|0],R<0?-1:0)}):new l([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return y;if(P<0)return A(p(-P));const R=[];let N=1;for(let O=0;P>=N;O++)R[O]=P/N|0,N*=4294967296;return new l(R,0)}function m(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return A(m(P.substring(1),R));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(R,8));let O=y;for(let F=0;F<P.length;F+=8){var M=Math.min(8,P.length-F);const D=parseInt(P.substring(F,F+M),R);M<8?(M=p(Math.pow(R,M)),O=O.j(M).add(p(D))):(O=O.j(N),O=O.add(p(D)))}return O}var y=d(0),E=d(1),I=d(16777216);n=l.prototype,n.m=function(){if(x(this))return-A(this).m();let P=0,R=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);P+=(O>=0?O:4294967296+O)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(x(this))return"-"+A(this).toString(P);const R=p(Math.pow(P,6));var N=this;let O="";for(;;){const M=G(N,R).g;N=j(N,M.j(R));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(P);if(N=M,b(N))return F+O;for(;F.length<6;)F="0"+F;O=F+O}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(let R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function x(P){return P.h==-1}n.l=function(P){return P=j(this,P),x(P)?-1:b(P)?0:1};function A(P){const R=P.g.length,N=[];for(let O=0;O<R;O++)N[O]=~P.g[O];return new l(N,~P.h).add(E)}n.abs=function(){return x(this)?A(this):this},n.add=function(P){const R=Math.max(this.g.length,P.g.length),N=[];let O=0;for(let M=0;M<=R;M++){let F=O+(this.i(M)&65535)+(P.i(M)&65535),D=(F>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);O=D>>>16,F&=65535,D&=65535,N[M]=D<<16|F}return new l(N,N[N.length-1]&-2147483648?-1:0)};function j(P,R){return P.add(A(R))}n.j=function(P){if(b(this)||b(P))return y;if(x(this))return x(P)?A(this).j(A(P)):A(A(this).j(P));if(x(P))return A(this.j(A(P)));if(this.l(I)<0&&P.l(I)<0)return p(this.m()*P.m());const R=this.g.length+P.g.length,N=[];for(var O=0;O<2*R;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let M=0;M<P.g.length;M++){const F=this.i(O)>>>16,D=this.i(O)&65535,me=P.i(M)>>>16,_e=P.i(M)&65535;N[2*O+2*M]+=D*_e,V(N,2*O+2*M),N[2*O+2*M+1]+=F*_e,V(N,2*O+2*M+1),N[2*O+2*M+1]+=D*me,V(N,2*O+2*M+1),N[2*O+2*M+2]+=F*me,V(N,2*O+2*M+2)}for(P=0;P<R;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=R;P<2*R;P++)N[P]=0;return new l(N,0)};function V(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function z(P,R){this.g=P,this.h=R}function G(P,R){if(b(R))throw Error("division by zero");if(b(P))return new z(y,y);if(x(P))return R=G(A(P),R),new z(A(R.g),A(R.h));if(x(R))return R=G(P,A(R)),new z(A(R.g),R.h);if(P.g.length>30){if(x(P)||x(R))throw Error("slowDivide_ only works with positive integers.");for(var N=E,O=R;O.l(P)<=0;)N=J(N),O=J(O);var M=Z(N,1),F=Z(O,1);for(O=Z(O,2),N=Z(N,2);!b(O);){var D=F.add(O);D.l(P)<=0&&(M=M.add(N),F=D),O=Z(O,1),N=Z(N,1)}return R=j(P,M.j(R)),new z(M,R)}for(M=y;P.l(R)>=0;){for(N=Math.max(1,Math.floor(P.m()/R.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),F=p(N),D=F.j(R);x(D)||D.l(P)>0;)N-=O,F=p(N),D=F.j(R);b(F)&&(F=E),M=M.add(F),P=j(P,D)}return new z(M,P)}n.B=function(P){return G(this,P).h},n.and=function(P){const R=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<R;O++)N[O]=this.i(O)&P.i(O);return new l(N,this.h&P.h)},n.or=function(P){const R=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<R;O++)N[O]=this.i(O)|P.i(O);return new l(N,this.h|P.h)},n.xor=function(P){const R=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<R;O++)N[O]=this.i(O)^P.i(O);return new l(N,this.h^P.h)};function J(P){const R=P.g.length+1,N=[];for(let O=0;O<R;O++)N[O]=P.i(O)<<1|P.i(O-1)>>>31;return new l(N,P.h)}function Z(P,R){const N=R>>5;R%=32;const O=P.g.length-N,M=[];for(let F=0;F<O;F++)M[F]=R>0?P.i(F+N)>>>R|P.i(F+N+1)<<32-R:P.i(F+N);return new l(M,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,BP=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=m,qi=l}).apply(typeof nx<"u"?nx:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $P,du,WP,nf,ov,HP,GP,qP;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var w=0;w<h.length;++w){var T=h[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(h,w){if(w)e:{var T=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var K=h[k];if(!(K in T))break e;T=T[K]}h=h[h.length-1],k=T[h],w=w(k),w!=k&&w!=null&&e(T,h,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(w){var T=[],k;for(k in w)Object.prototype.hasOwnProperty.call(w,k)&&T.push([k,w[k]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function d(h,w,T){return h.call.apply(h.bind,arguments)}function p(h,w,T){return p=d,p.apply(null,arguments)}function m(h,w){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function y(h,w){function T(){}T.prototype=w.prototype,h.Z=w.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(k,K,X){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return w.prototype[K].apply(k,ge)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const w=h.length;if(w>0){const T=Array(w);for(let k=0;k<w;k++)T[k]=h[k];return T}return[]}function b(h,w){for(let k=1;k<arguments.length;k++){const K=arguments[k];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=h.length||0;const X=K.length||0;h.length=T+X;for(let ge=0;ge<X;ge++)h[T+ge]=K[ge]}else h.push(K)}}class x{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function A(h){l.setTimeout(()=>{throw h},0)}function j(){var h=P;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class V{constructor(){this.h=this.g=null}add(w,T){const k=z.get();k.set(w,T),this.h?this.h.next=k:this.g=k,this.h=k}}var z=new x(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let J,Z=!1,P=new V,R=()=>{const h=Promise.resolve(void 0);J=()=>{h.then(N)}};function N(){for(var h;h=j();){try{h.h.call(h.g)}catch(T){A(T)}var w=z;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}Z=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};l.addEventListener("test",T,w),l.removeEventListener("test",T,w)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function me(h,w){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}y(me,M),me.prototype.init=function(h,w){const T=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(T=="mouseover"?w=h.fromElement:T=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),pe=0;function Ee(h,w,T,k,K){this.listener=h,this.proxy=null,this.src=w,this.type=T,this.capture=!!k,this.ha=K,this.key=++pe,this.da=this.fa=!1}function W(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ee(h,w,T){for(const k in h)w.call(T,h[k],k,h)}function ue(h,w){for(const T in h)w.call(void 0,h[T],T,h)}function B(h){const w={};for(const T in h)w[T]=h[T];return w}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(h,w){let T,k;for(let K=1;K<arguments.length;K++){k=arguments[K];for(T in k)h[T]=k[T];for(let X=0;X<ne.length;X++)T=ne[X],Object.prototype.hasOwnProperty.call(k,T)&&(h[T]=k[T])}}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,w,T,k,K){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const ge=ce(h,w,k,K);return ge>-1?(w=h[ge],T||(w.fa=!1)):(w=new Ee(w,this.src,X,!!k,K),w.fa=T,h.push(w)),w};function he(h,w){const T=w.type;if(T in h.g){var k=h.g[T],K=Array.prototype.indexOf.call(k,w,void 0),X;(X=K>=0)&&Array.prototype.splice.call(k,K,1),X&&(W(w),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ce(h,w,T,k){for(let K=0;K<h.length;++K){const X=h[K];if(!X.da&&X.listener==w&&X.capture==!!T&&X.ha==k)return K}return-1}var H="closure_lm_"+(Math.random()*1e6|0),oe={};function ye(h,w,T,k,K){if(Array.isArray(w)){for(let X=0;X<w.length;X++)ye(h,w[X],T,k,K);return null}return T=Lt(T),h&&h[_e]?h.J(w,T,u(k)?!!k.capture:!1,K):xe(h,w,T,!1,k,K)}function xe(h,w,T,k,K,X){if(!w)throw Error("Invalid event type");const ge=u(K)?!!K.capture:!!K;let ze=Tn(h);if(ze||(h[H]=ze=new se(h)),T=ze.add(w,T,k,ge,X),T.proxy)return T;if(k=je(),T.proxy=k,k.src=h,k.listener=T,h.addEventListener)F||(K=ge),K===void 0&&(K=!1),h.addEventListener(w.toString(),k,K);else if(h.attachEvent)h.attachEvent(ht(w.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function je(){function h(T){return w.call(h.src,h.listener,T)}const w=bn;return h}function $e(h,w,T,k,K){if(Array.isArray(w))for(var X=0;X<w.length;X++)$e(h,w[X],T,k,K);else k=u(k)?!!k.capture:!!k,T=Lt(T),h&&h[_e]?(h=h.i,X=String(w).toString(),X in h.g&&(w=h.g[X],T=ce(w,T,k,K),T>-1&&(W(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete h.g[X],h.h--)))):h&&(h=Tn(h))&&(w=h.g[w.toString()],h=-1,w&&(h=ce(w,T,k,K)),(T=h>-1?w[h]:null)&&Ue(T))}function Ue(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[_e])he(w.i,h);else{var T=h.type,k=h.proxy;w.removeEventListener?w.removeEventListener(T,k,h.capture):w.detachEvent?w.detachEvent(ht(T),k):w.addListener&&w.removeListener&&w.removeListener(k),(T=Tn(w))?(he(T,h),T.h==0&&(T.src=null,w[H]=null)):W(h)}}}function ht(h){return h in oe?oe[h]:oe[h]="on"+h}function bn(h,w){if(h.da)h=!0;else{w=new me(w,this);const T=h.listener,k=h.ha||h.src;h.fa&&Ue(h),h=T.call(k,w)}return h}function Tn(h){return h=h[H],h instanceof se?h:null}var xn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lt(h){return typeof h=="function"?h:(h[xn]||(h[xn]=function(w){return h.handleEvent(w)}),h[xn])}function Tt(){O.call(this),this.i=new se(this),this.M=this,this.G=null}y(Tt,O),Tt.prototype[_e]=!0,Tt.prototype.removeEventListener=function(h,w,T,k){$e(this,h,w,T,k)};function xt(h,w){var T,k=h.G;if(k)for(T=[];k;k=k.G)T.push(k);if(h=h.M,k=w.type||w,typeof w=="string")w=new M(w,h);else if(w instanceof M)w.target=w.target||h;else{var K=w;w=new M(k,h),te(w,K)}K=!0;let X,ge;if(T)for(ge=T.length-1;ge>=0;ge--)X=w.g=T[ge],K=en(X,k,!0,w)&&K;if(X=w.g=h,K=en(X,k,!0,w)&&K,K=en(X,k,!1,w)&&K,T)for(ge=0;ge<T.length;ge++)X=w.g=T[ge],K=en(X,k,!1,w)&&K}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const T=h.g[w];for(let k=0;k<T.length;k++)W(T[k]);delete h.g[w],h.h--}}this.G=null},Tt.prototype.J=function(h,w,T,k){return this.i.add(String(h),w,!1,T,k)},Tt.prototype.K=function(h,w,T,k){return this.i.add(String(h),w,!0,T,k)};function en(h,w,T,k){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let K=!0;for(let X=0;X<w.length;++X){const ge=w[X];if(ge&&!ge.da&&ge.capture==T){const ze=ge.listener,Dt=ge.ha||ge.src;ge.fa&&he(h.i,ge),K=ze.call(Dt,k)!==!1&&K}}return K&&!k.defaultPrevented}function ii(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(h,w||0)}function yo(h){h.g=ii(()=>{h.g=null,h.i&&(h.i=!1,yo(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class hd extends O{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:yo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oi(h){O.call(this),this.h=h,this.g={}}y(oi,O);var lc=[];function Ea(h){ee(h.g,function(w,T){this.g.hasOwnProperty(T)&&Ue(w)},h),h.g={}}oi.prototype.N=function(){oi.Z.N.call(this),Ea(this)},oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ai=l.JSON.stringify,fd=l.JSON.parse,vo=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function li(){}function pd(){}var ci={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sa(){M.call(this,"d")}y(Sa,M);function cc(){M.call(this,"c")}y(cc,M);var mr={},Ta=null;function ui(){return Ta=Ta||new Tt}mr.Ia="serverreachability";function xa(h){M.call(this,mr.Ia,h)}y(xa,M);function vs(h){const w=ui();xt(w,new xa(w))}mr.STAT_EVENT="statevent";function _s(h,w){M.call(this,mr.STAT_EVENT,h),this.stat=w}y(_s,M);function At(h){const w=ui();xt(w,new _s(w,h))}mr.Ja="timingevent";function uc(h,w){M.call(this,mr.Ja,h),this.size=w}y(uc,M);function di(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},w)}function hi(){this.g=!0}hi.prototype.ua=function(){this.g=!1};function md(h,w,T,k,K,X){h.info(function(){if(h.g)if(X){var ge="",ze=X.split("&");for(let ct=0;ct<ze.length;ct++){var Dt=ze[ct].split("=");if(Dt.length>1){const Vt=Dt[0];Dt=Dt[1];const Wn=Vt.split("_");ge=Wn.length>=2&&Wn[1]=="type"?ge+(Vt+"="+Dt+"&"):ge+(Vt+"=redacted&")}}}else ge=null;else ge=X;return"XMLHTTP REQ ("+k+") [attempt "+K+"]: "+w+`
`+T+`
`+ge})}function gd(h,w,T,k,K,X,ge){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+K+"]: "+w+`
`+T+`
`+X+" "+ge})}function Vr(h,w,T,k){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+_o(h,T)+(k?" "+k:"")})}function yd(h,w){h.info(function(){return"TIMEOUT: "+w})}hi.prototype.info=function(){};function _o(h,w){if(!h.g)return w;if(!w)return null;try{const X=JSON.parse(w);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var T=X[h];if(!(T.length<2)){var k=T[1];if(Array.isArray(k)&&!(k.length<1)){var K=k[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ge=1;ge<k.length;ge++)k[ge]=""}}}}return ai(X)}catch{return w}}var fi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vd;function ws(){}y(ws,li),ws.prototype.g=function(){return new XMLHttpRequest},vd=new ws;function jr(h){return encodeURIComponent(String(h))}function Ia(h){var w=1;h=h.split(":");const T=[];for(;w>0&&h.length;)T.push(h.shift()),w--;return h.length&&T.push(h.join(":")),T}function er(h,w,T,k){this.j=h,this.i=w,this.l=T,this.S=k||1,this.V=new oi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _d}function _d(){this.i=null,this.g="",this.h=!1}var wd={},dc={};function gr(h,w,T){h.M=1,h.A=Ss(tr(w)),h.u=T,h.R=!0,hc(h,null)}function hc(h,w){h.F=Date.now(),wo(h),h.B=tr(h.A);var T=h.B,k=h.S;Array.isArray(k)||(k=[String(k)]),Sc(T.i,"t",k),h.C=0,T=h.j.L,h.h=new _d,h.g=Pd(h.j,T?w:null,!h.u),h.P>0&&(h.O=new hd(p(h.Y,h,h.g),h.P)),w=h.V,T=h.g,k=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(lc[0]=K.toString()),K=lc);for(let X=0;X<K.length;X++){const ge=ye(T,K[X],k||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=h.J?B(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),vs(),md(h.i,h.v,h.B,h.l,h.S,h.u)}er.prototype.ba=function(h){h=h.target;const w=this.O;w&&Hr(h)==3?w.j():this.Y(h)},er.prototype.Y=function(h){try{if(h==this.g)e:{const ze=Hr(this.g),Dt=this.g.ya(),ct=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Ad(this.g)))){this.K||ze!=4||Dt==7||(Dt==8||ct<=0?vs(3):vs(2)),Ca(this);var w=this.g.ca();this.X=w;var T=Ed(this);if(this.o=w==200,gd(this.i,this.v,this.B,this.l,this.S,ze,w),this.o){if(this.U&&!this.L){t:{if(this.g){var k,K=this.g;if((k=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(k)){var X=k;break t}}X=null}if(h=X)Vr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mt(this,h);else{this.o=!1,this.m=3,At(12),Es(this),Eo(this);break e}}if(this.R){h=!0;let Vt;for(;!this.K&&this.C<T.length;)if(Vt=Td(this,T),Vt==dc){ze==4&&(this.m=4,At(14),h=!1),Vr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==wd){this.m=4,At(15),Vr(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Vr(this.i,this.l,Vt,null),mt(this,Vt);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||T.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)Vr(this.i,this.l,T,"[Invalid Chunked Response]"),Es(this),Eo(this);else if(T.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Po(ge),ge.P=!0,At(11))}}else Vr(this.i,this.l,T,null),mt(this,T);ze==4&&Es(this),this.o&&!this.K&&(ze==4?La(this.j,this):(this.o=!1,wo(this)))}else xc(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Es(this),Eo(this)}}}catch{}finally{}};function Ed(h){if(!Sd(h))return h.g.la();const w=Ad(h.g);if(w==="")return"";let T="";const k=w.length,K=Hr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Es(h),Eo(h),"";h.h.i=new l.TextDecoder}for(let X=0;X<k;X++)h.h.h=!0,T+=h.h.i.decode(w[X],{stream:!(K&&X==k-1)});return w.length=0,h.h.g+=T,h.C=0,h.h.g}function Sd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Td(h,w){var T=h.C,k=w.indexOf(`
`,T);return k==-1?dc:(T=Number(w.substring(T,k)),isNaN(T)?wd:(k+=1,k+T>w.length?dc:(w=w.slice(k,k+T),h.C=k+T,w)))}er.prototype.cancel=function(){this.K=!0,Es(this)};function wo(h){h.T=Date.now()+h.H,fc(h,h.H)}function fc(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=di(p(h.aa,h),w)}function Ca(h){h.D&&(l.clearTimeout(h.D),h.D=null)}er.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(yd(this.i,this.B),this.M!=2&&(vs(),At(17)),Es(this),this.m=2,Eo(this)):fc(this,this.T-h)};function Eo(h){h.j.I==0||h.K||La(h.j,h)}function Es(h){Ca(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,Ea(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function mt(h,w){try{var T=h.j;if(T.I!=0&&(T.g==h||mc(T.h,h))){if(!h.L&&mc(T.h,h)&&T.I==3){try{var k=T.Ba.g.parse(w)}catch{k=null}if(Array.isArray(k)&&k.length==3){var K=k;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Ma(T),Bn(T);else break e;Kr(T),At(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=di(p(T.Va,T),6e3));So(T.h)<=1&&T.ta&&(T.ta=void 0)}else $n(T,11)}else if((h.L||T.g==h)&&Ma(T),!D(w))for(K=T.Ba.g.parse(w),w=0;w<K.length;w++){let ct=K[w];const Vt=ct[0];if(!(Vt<=T.K))if(T.K=Vt,ct=ct[1],T.I==2)if(ct[0]=="c"){T.M=ct[1],T.ba=ct[2];const Wn=ct[3];Wn!=null&&(T.ka=Wn,T.j.info("VER="+T.ka));const Rs=ct[4];Rs!=null&&(T.za=Rs,T.j.info("SVER="+T.za));const Qr=ct[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(k=1.5*Qr,T.O=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const Yr=h.g;if(Yr){const Fa=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var X=k.h;X.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Aa(X,X.h),X.h=null))}if(k.G){const Rc=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;Rc&&(k.wa=Rc,it(k.J,k.G,Rc))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),k=T;var ge=h;if(k.na=Cc(k,k.L?k.ba:null,k.W),ge.L){To(k.h,ge);var ze=ge,Dt=k.O;Dt&&(ze.H=Dt),ze.D&&(Ca(ze),wo(ze)),k.g=ge}else un(k);T.i.length>0&&Cs(T)}else ct[0]!="stop"&&ct[0]!="close"||$n(T,7);else T.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?$n(T,7):Da(T):ct[0]!="noop"&&T.l&&T.l.qa(ct),T.A=0)}}vs(4)}catch{}}var um=class{constructor(h,w){this.g=h,this.map=w}};function Ra(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function So(h){return h.h?1:h.g?h.g.size:0}function mc(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function Aa(h,w){h.g?h.g.add(w):h.h=w}function To(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}Ra.prototype.cancel=function(){if(this.i=Fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Fn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const T of h.g.values())w=w.concat(T.G);return w}return I(h.i)}var xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Un(h,w){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const k=h[T].indexOf("=");let K,X=null;k>=0?(K=h[T].substring(0,k),X=h[T].substring(k+1)):K=h[T],w(K,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Fr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof Fr?(this.l=h.l,xo(this,h.j),this.o=h.o,this.g=h.g,Ur(this,h.u),this.h=h.h,mi(this,Tc(h.i)),this.m=h.m):h&&(w=String(h).match(xd))?(this.l=!1,xo(this,w[1]||"",!0),this.o=Io(w[2]||""),this.g=Io(w[3]||"",!0),Ur(this,w[4]),this.h=Io(w[5]||"",!0),mi(this,w[6]||"",!0),this.m=Io(w[7]||"")):(this.l=!1,this.i=new Xe(null,this.l))}Fr.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(Co(w,yc,!0),":");var T=this.g;return(T||w=="file")&&(h.push("//"),(w=this.o)&&h.push(Co(w,yc,!0),"@"),h.push(jr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Co(T,T.charAt(0)=="/"?Ro:vc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Co(T,_c)),h.join("")},Fr.prototype.resolve=function(h){const w=tr(this);let T=!!h.j;T?xo(w,h.j):T=!!h.o,T?w.o=h.o:T=!!h.g,T?w.g=h.g:T=h.u!=null;var k=h.h;if(T)Ur(w,h.u);else if(T=!!h.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var K=w.h.lastIndexOf("/");K!=-1&&(k=w.h.slice(0,K+1)+k)}if(K=k,K==".."||K==".")k="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){k=K.lastIndexOf("/",0)==0,K=K.split("/");const X=[];for(let ge=0;ge<K.length;){const ze=K[ge++];ze=="."?k&&ge==K.length&&X.push(""):ze==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),k&&ge==K.length&&X.push("")):(X.push(ze),k=!0)}k=X.join("/")}else k=K}return T?w.h=k:T=h.i.toString()!=="",T?mi(w,Tc(h.i)):T=!!h.m,T&&(w.m=h.m),w};function tr(h){return new Fr(h)}function xo(h,w,T){h.j=T?Io(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function Ur(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function mi(h,w,T){w instanceof Xe?(h.i=w,Pa(h.i,h.l)):(T||(w=Co(w,dm)),h.i=new Xe(w,h.l))}function it(h,w,T){h.i.set(w,T)}function Ss(h){return it(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Io(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Co(h,w,T){return typeof h=="string"?(h=encodeURI(h).replace(w,gc),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function gc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yc=/[#\/\?@]/g,vc=/[#\?:]/g,Ro=/[#\?]/g,dm=/[#\?@]/g,_c=/#/g;function Xe(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function zr(h){h.g||(h.g=new Map,h.h=0,h.i&&Un(h.i,function(w,T){h.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=Xe.prototype,n.add=function(h,w){zr(this),this.i=null,h=Br(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(w),this.h+=1,this};function wc(h,w){zr(h),w=Br(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function ba(h,w){return zr(h),w=Br(h,w),h.g.has(w)}n.forEach=function(h,w){zr(this),this.g.forEach(function(T,k){T.forEach(function(K){h.call(w,K,k,this)},this)},this)};function Ec(h,w){zr(h);let T=[];if(typeof w=="string")ba(h,w)&&(T=T.concat(h.g.get(Br(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)T=T.concat(h[w]);return T}n.set=function(h,w){return zr(this),this.i=null,h=Br(this,h),ba(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=Ec(this,h),h.length>0?String(h[0]):w):w};function Sc(h,w,T){wc(h,w),T.length>0&&(h.i=null,h.g.set(Br(h,w),I(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let k=0;k<w.length;k++){var T=w[k];const K=jr(T);T=Ec(this,T);for(let X=0;X<T.length;X++){let ge=K;T[X]!==""&&(ge+="="+jr(T[X])),h.push(ge)}}return this.i=h.join("&")};function Tc(h){const w=new Xe;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function Br(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function Pa(h,w){w&&!h.j&&(zr(h),h.i=null,h.g.forEach(function(T,k){const K=k.toLowerCase();k!=K&&(wc(this,k),Sc(this,K,T))},h)),h.j=w}function $r(h,w){const T=new hi;if(l.Image){const k=new Image;k.onload=m(tn,T,"TestLoadImage: loaded",!0,w,k),k.onerror=m(tn,T,"TestLoadImage: error",!1,w,k),k.onabort=m(tn,T,"TestLoadImage: abort",!1,w,k),k.ontimeout=m(tn,T,"TestLoadImage: timeout",!1,w,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else w(!1)}function Wr(h,w){const T=new hi,k=new AbortController,K=setTimeout(()=>{k.abort(),tn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:k.signal}).then(X=>{clearTimeout(K),X.ok?tn(T,"TestPingServer: ok",!0,w):tn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(K),tn(T,"TestPingServer: error",!1,w)})}function tn(h,w,T,k,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),k(T)}catch{}}function Ao(){this.g=new vo}function Ts(h){this.i=h.Sb||null,this.h=h.ab||!1}y(Ts,li),Ts.prototype.g=function(){return new zn(this.i,this.h)};function zn(h,w){Tt.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(zn,Tt),n=zn.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,yr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,yr(this)),this.g&&(this.readyState=3,yr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Id(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Id(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?gi(this):yr(this),this.readyState==3&&Id(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,gi(this))},n.Na=function(h){this.g&&(this.response=h,gi(this))},n.ga=function(){this.g&&gi(this)};function gi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,yr(h)}n.setRequestHeader=function(h,w){this.A.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=w.next();return h.join(`\r
`)};function yr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Cd(h){let w="";return ee(h,function(T,k){w+=k,w+=":",w+=T,w+=`\r
`}),w}function ka(h,w,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=Cd(T),typeof h=="string"?T!=null&&jr(T):it(h,w,T))}function dt(h){Tt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(dt,Tt);var Rd=/^https?$/i,hm=["POST","PUT"];n=dt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,w,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vd.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(X){yi(this,X);return}if(h=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var K in k)T.set(K,k[K]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const X of k.keys())T.set(X,k.get(X));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(X=>X.toLowerCase()=="content-type"),K=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(hm,w,void 0)>=0)||k||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ge]of T)this.g.setRequestHeader(X,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){yi(this,X)}};function yi(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,vi(h),Is(h)}function vi(h){h.A||(h.A=!0,xt(h,"complete"),xt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,xt(this,"complete"),xt(this,"abort"),Is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Is(this,!0)),dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?xs(this):this.Xa())},n.Xa=function(){xs(this)};function xs(h){if(h.h&&typeof o<"u"){if(h.v&&Hr(h)==4)setTimeout(h.Ca.bind(h),0);else if(xt(h,"readystatechange"),Hr(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var k;if(k=X===0){let ge=String(h.D).match(xd)[1]||null;!ge&&l.self&&l.self.location&&(ge=l.self.location.protocol.slice(0,-1)),k=!Rd.test(ge?ge.toLowerCase():"")}T=k}if(T)xt(h,"complete"),xt(h,"success");else{h.o=6;try{var K=Hr(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",vi(h)}}finally{Is(h)}}}}function Is(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,w||xt(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Hr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Hr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),fd(w)}};function Ad(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function xc(h){const w={};h=(h.g&&Hr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(D(h[k]))continue;var T=Ia(h[k]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const X=w[K]||[];w[K]=X,X.push(T)}ue(w,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(h,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||w}function Na(h){this.za=0,this.i=[],this.j=new hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gr("baseRetryDelayMs",5e3,h),this.Za=Gr("retryDelaySeedMs",1e4,h),this.Ta=Gr("forwardChannelMaxRetries",2,h),this.va=Gr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ra(h&&h.concurrentRequestLimit),this.Ba=new Ao,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Na.prototype,n.ka=8,n.I=1,n.connect=function(h,w,T,k){At(0),this.W=h,this.H=w||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.J=Cc(this,null,this.W),Cs(this)};function Da(h){if(Oa(h),h.I==3){var w=h.V++,T=tr(h.J);if(it(T,"SID",h.M),it(T,"RID",w),it(T,"TYPE","terminate"),qr(h,T),w=new er(h,h.j,w),w.M=2,w.A=Ss(tr(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&l.Image&&(new Image().src=w.A,T=!0),T||(w.g=Pd(w.j,null),w.g.ea(w.A)),w.F=Date.now(),wo(w)}ko(h)}function Bn(h){h.g&&(Po(h),h.g.cancel(),h.g=null)}function Oa(h){Bn(h),h.v&&(l.clearTimeout(h.v),h.v=null),Ma(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function Cs(h){if(!pc(h.h)&&!h.m){h.m=!0;var w=h.Ea;J||R(),Z||(J(),Z=!0),P.add(w,h),h.D=0}}function bd(h,w){return So(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=di(p(h.Ea,h,w),Va(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new er(this,this.j,h);let X=this.o;if(this.U&&(X?(X=B(X),te(X,this.U)):X=this.U),this.u!==null||this.R||(K.J=X,X=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(w+=k,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Ic(this,K,w),T=tr(this.J),it(T,"RID",h),it(T,"CVER",22),this.G&&it(T,"X-HTTP-Session-Id",this.G),qr(this,T),X&&(this.R?w="headers="+jr(Cd(X))+"&"+w:this.u&&ka(T,this.u,X)),Aa(this.h,K),this.Ra&&it(T,"TYPE","init"),this.S?(it(T,"$req",w),it(T,"SID","null"),K.U=!0,gr(K,T,null)):gr(K,T,w),this.I=2}}else this.I==3&&(h?bo(this,h):this.i.length==0||pc(this.h)||bo(this))};function bo(h,w){var T;w?T=w.l:T=h.V++;const k=tr(h.J);it(k,"SID",h.M),it(k,"RID",T),it(k,"AID",h.K),qr(h,k),h.u&&h.o&&ka(k,h.u,h.o),T=new er(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),w&&(h.i=w.G.concat(h.i)),w=Ic(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Aa(h.h,T),gr(T,k,w)}function qr(h,w){h.H&&ee(h.H,function(T,k){it(w,k,T)}),h.l&&ee({},function(T,k){it(w,k,T)})}function Ic(h,w,T){T=Math.min(h.i.length,T);const k=h.l?p(h.l.Ka,h.l,h):null;e:{var K=h.i;let ze=-1;for(;;){const Dt=["count="+T];ze==-1?T>0?(ze=K[0].g,Dt.push("ofs="+ze)):ze=0:Dt.push("ofs="+ze);let ct=!0;for(let Vt=0;Vt<T;Vt++){var X=K[Vt].g;const Wn=K[Vt].map;if(X-=ze,X<0)ze=Math.max(0,K[Vt].g-100),ct=!1;else try{X="req"+X+"_"||"";try{var ge=Wn instanceof Map?Wn:Object.entries(Wn);for(const[Rs,Qr]of ge){let Yr=Qr;u(Qr)&&(Yr=ai(Qr)),Dt.push(X+Rs+"="+encodeURIComponent(Yr))}}catch(Rs){throw Dt.push(X+"type="+encodeURIComponent("_badmap")),Rs}}catch{k&&k(Wn)}}if(ct){ge=Dt.join("&");break e}}ge=void 0}return h=h.i.splice(0,T),w.G=h,ge}function un(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;J||R(),Z||(J(),Z=!0),P.add(w,h),h.A=0}}function Kr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=di(p(h.Da,h),Va(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,_i(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=di(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Bn(this),_i(this))};function Po(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function _i(h){h.g=new er(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=tr(h.na);it(w,"RID","rpc"),it(w,"SID",h.M),it(w,"AID",h.K),it(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&it(w,"TO",h.ia),it(w,"TYPE","xmlhttp"),qr(h,w),h.u&&h.o&&ka(w,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Ss(tr(w)),T.u=null,T.R=!0,hc(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Bn(this),Kr(this),At(19))};function Ma(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function La(h,w){var T=null;if(h.g==w){Ma(h),Po(h),h.g=null;var k=2}else if(mc(h.h,w))T=w.G,To(h.h,w),k=1;else return;if(h.I!=0){if(w.o)if(k==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var K=h.D;k=ui(),xt(k,new uc(k,T)),Cs(h)}else un(h);else if(K=w.m,K==3||K==0&&w.X>0||!(k==1&&bd(h,w)||k==2&&Kr(h)))switch(T&&T.length>0&&(w=h.h,w.i=w.i.concat(T)),K){case 1:$n(h,5);break;case 4:$n(h,10);break;case 3:$n(h,6);break;default:$n(h,2)}}}function Va(h,w){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*w}function $n(h,w){if(h.j.info("Error code "+w),w==2){var T=p(h.bb,h),k=h.Ua;const K=!k;k=new Fr(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||xo(k,"https"),Ss(k),K?$r(k.toString(),T):Wr(k.toString(),T)}else At(2);h.I=0,h.l&&h.l.pa(w),ko(h),Oa(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function ko(h){if(h.I=0,h.ja=[],h.l){const w=Fn(h.h);(w.length!=0||h.i.length!=0)&&(b(h.ja,w),b(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Cc(h,w,T){var k=T instanceof Fr?tr(T):new Fr(T);if(k.g!="")w&&(k.g=w+"."+k.g),Ur(k,k.u);else{var K=l.location;k=K.protocol,w=w?w+"."+K.hostname:K.hostname,K=+K.port;const X=new Fr(null);k&&xo(X,k),w&&(X.g=w),K&&Ur(X,K),T&&(X.h=T),k=X}return T=h.G,w=h.wa,T&&w&&it(k,T,w),it(k,"VER",h.ka),qr(h,k),k}function Pd(h,w,T){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new dt(new Ts({ab:T})):new dt(h.ma),w.Fa(h.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kd(){}n=kd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ja(){}ja.prototype.g=function(h,w){return new nn(h,w)};function nn(h,w){Tt.call(this),this.g=new Na(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!D(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!D(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new wi(this)}y(nn,Tt),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Da(this.g)},nn.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=ai(h),h=T);w.i.push(new um(w.Ya++,h)),w.I==3&&Cs(w)},nn.prototype.N=function(){this.g.l=null,delete this.j,Da(this.g),delete this.g,nn.Z.N.call(this)};function Nd(h){Sa.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const T in w){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}y(Nd,Sa);function Dd(){cc.call(this),this.status=1}y(Dd,cc);function wi(h){this.g=h}y(wi,kd),wi.prototype.ra=function(){xt(this.g,"a")},wi.prototype.qa=function(h){xt(this.g,new Nd(h))},wi.prototype.pa=function(h){xt(this.g,new Dd)},wi.prototype.oa=function(){xt(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,qP=function(){return new ja},GP=function(){return ui()},HP=mr,ov={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fi.NO_ERROR=0,fi.TIMEOUT=8,fi.HTTP_ERROR=6,nf=fi,pi.COMPLETE="complete",WP=pi,pd.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,du=pd,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,$P=dt}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const rx="@firebase/firestore",sx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new Dp("@firebase/firestore");function fl(){return da.logLevel}function Te(n,...e){if(da.logLevel<=Ke.DEBUG){const t=e.map($_);da.debug(`Firestore (${tc}): ${n}`,...t)}}function Zs(n,...e){if(da.logLevel<=Ke.ERROR){const t=e.map($_);da.error(`Firestore (${tc}): ${n}`,...t)}}function Vl(n,...e){if(da.logLevel<=Ke.WARN){const t=e.map($_);da.warn(`Firestore (${tc}): ${n}`,...t)}}function $_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,KP(n,r,t)}function KP(n,e,t){let r=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zs(r),new Error(r)}function lt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||KP(e,s,r)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gn.UNAUTHENTICATED)))}shutdown(){}}class vB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _B{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ki,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ki)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string",31837,{l:r}),new QP(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class wB{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EB{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new wB(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ix{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SB{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0,3512);const r=o=>{o.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Te("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ix(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(lt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ix(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=TB(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function av(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return vy(s)===vy(o)?Qe(s,o):vy(s)?1:-1}return Qe(n.length,e.length)}const xB=55296,IB=57343;function vy(n){const e=n.charCodeAt(0);return e>=xB&&e<=IB}function jl(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="__name__";class ts{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=ts.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Qe(e.length,t.length)}static compareSegments(e,t){const r=ts.isNumericId(e),s=ts.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ts.extractNumericId(e).compare(ts.extractNumericId(t)):av(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qi.fromString(e.substring(4,e.length-2))}}class pt extends ts{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const CB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends ts{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return CB.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ox}static keyField(){return new ln([ox])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new we(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new we(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new we(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(pt.fromString(e))}static fromName(e){return new Ne(pt.fromString(e).popFirst(5))}static empty(){return new Ne(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(n,e,t){if(!t)throw new we(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RB(n,e,t,r){if(e===!0&&r===!0)throw new we(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ax(n){if(!Ne.isDocumentKey(n))throw new we(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lx(n){if(Ne.isDocumentKey(n))throw new we(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $p(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function kr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$p(n);throw new we(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function od(n,e){if(!XP(n))throw new we(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new we(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=-62135596800,ux=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ux);return new wt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cx)throw new we(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ux}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(od(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:zt("string",wt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new wt(0,0))}static max(){return new Fe(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=-1;function AB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new to(s,Ne.empty(),e)}function bB(n){return new to(n.readTime,n.key,ju)}class to{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new to(Fe.min(),Ne.empty(),ju)}static max(){return new to(Fe.max(),Ne.empty(),ju)}}function PB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==kB)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>r(d)))})),l=!0,o===s&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((s=>s?ie.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next((m=>{l[p]=m,++u,u===o&&r(l)}),(m=>s(m)))}}))}static doWhile(e,t){return new ie(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function DB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=-1;function Hp(n){return n==null}function qf(n){return n===0&&1/n==-1/0}function OB(n){return typeof n=="number"&&Number.isInteger(n)&&!qf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="";function MB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dx(e)),e=LB(n.get(t),e);return dx(e)}function LB(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case JP:t+="";break;default:t+=o}}return t}function dx(n){return n+JP+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function po(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??on.RED,this.left=s??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new on(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return on.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fx(this.data.getIterator())}getIteratorFrom(e){return new fx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class fx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Xn([])}unionWith(e){let t=new Gt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new e1("Invalid base64 string: "+o):o}})(e);return new cn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const VB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(n){if(lt(!!n,39018),typeof n=="string"){let e=0;const t=VB.exec(n);if(lt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ro(n){return typeof n=="string"?cn.fromBase64String(n):cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="server_timestamp",n1="__type__",r1="__previous_value__",s1="__local_write_time__";function G_(n){return(n?.mapValue?.fields||{})[n1]?.stringValue===t1}function Gp(n){const e=n.mapValue.fields[r1];return G_(e)?Gp(e):e}function Fu(n){const e=no(n.mapValue.fields[s1].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,t,r,s,o,l,u,d,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=m}}const Kf="(default)";class Uu{constructor(e,t){this.projectId=e,this.database=t||Kf}static empty(){return new Uu("","")}get isDefaultDatabase(){return this.database===Kf}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="__type__",FB="__max__",$h={mapValue:{}},o1="__vector__",Qf="value";function so(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?G_(n)?4:zB(n)?9007199254740991:UB(n)?10:11:Le(28295,{value:n})}function ms(n,e){if(n===e)return!0;const t=so(n);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fu(n).isEqual(Fu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=no(s.timestampValue),u=no(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ro(s.bytesValue).isEqual(ro(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Mt(s.geoPointValue.latitude)===Mt(o.geoPointValue.latitude)&&Mt(s.geoPointValue.longitude)===Mt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Mt(s.integerValue)===Mt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Mt(s.doubleValue),u=Mt(o.doubleValue);return l===u?qf(l)===qf(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return jl(n.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(hx(l)!==hx(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!ms(l[d],u[d])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function zu(n,e){return(n.values||[]).find((t=>ms(t,e)))!==void 0}function Fl(n,e){if(n===e)return 0;const t=so(n),r=so(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Mt(o.integerValue||o.doubleValue),d=Mt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return px(n.timestampValue,e.timestampValue);case 4:return px(Fu(n),Fu(e));case 5:return av(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=ro(o),d=ro(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let p=0;p<u.length&&p<d.length;p++){const m=Qe(u[p],d[p]);if(m!==0)return m}return Qe(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Qe(Mt(o.latitude),Mt(l.latitude));return u!==0?u:Qe(Mt(o.longitude),Mt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mx(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},p=u[Qf]?.arrayValue,m=d[Qf]?.arrayValue,y=Qe(p?.values?.length||0,m?.values?.length||0);return y!==0?y:mx(p,m)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===$h.mapValue&&l===$h.mapValue)return 0;if(o===$h.mapValue)return 1;if(l===$h.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),p=l.fields||{},m=Object.keys(p);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const E=av(d[y],m[y]);if(E!==0)return E;const I=Fl(u[d[y]],p[m[y]]);if(I!==0)return I}return Qe(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function px(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=no(n),r=no(e),s=Qe(t.seconds,r.seconds);return s!==0?s:Qe(t.nanos,r.nanos)}function mx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Fl(t[s],r[s]);if(o)return o}return Qe(t.length,r.length)}function Ul(n){return lv(n)}function lv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=no(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ro(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=lv(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${lv(t.fields[l])}`;return s+"}"})(n.mapValue):Le(61005,{value:n})}function rf(n){switch(so(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gp(n);return e?16+rf(e):16;case 5:return 2*n.stringValue.length;case 6:return ro(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+rf(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return po(r.fields,((o,l)=>{s+=o.length+rf(l)})),s})(n.mapValue);default:throw Le(13486,{value:n})}}function gx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cv(n){return!!n&&"integerValue"in n}function q_(n){return!!n&&"arrayValue"in n}function yx(n){return!!n&&"nullValue"in n}function vx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sf(n){return!!n&&"mapValue"in n}function UB(n){return(n?.mapValue?.fields||{})[i1]?.stringValue===o1}function Eu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return po(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Eu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eu(n.arrayValue.values[t]);return e}return{...n}}function zB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(t)}setAll(e){let t=ln.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=Eu(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];sf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){po(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new jn(Eu(this.value))}}function a1(n){const e=[];return po(n.fields,((t,r)=>{const s=new ln([t]);if(sf(r)){const o=a1(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new _n(e,0,Fe.min(),Fe.min(),Fe.min(),jn.empty(),0)}static newFoundDocument(e,t,r,s){return new _n(e,1,t,Fe.min(),r,s,0)}static newNoDocument(e,t){return new _n(e,2,t,Fe.min(),Fe.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,Fe.min(),Fe.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t){this.position=e,this.inclusive=t}}function _x(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Ne.comparator(Ne.fromName(l.referenceValue),t.key):r=Fl(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function wx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ms(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function BB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{}class Ut extends l1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new WB(e,t,r):t==="array-contains"?new qB(e,r):t==="in"?new KB(e,r):t==="not-in"?new QB(e,r):t==="array-contains-any"?new YB(e,r):new Ut(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new HB(e,r):new GB(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fl(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(Fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends l1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Mr(e,t)}matches(e){return c1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function c1(n){return n.op==="and"}function u1(n){return $B(n)&&c1(n)}function $B(n){for(const e of n.filters)if(e instanceof Mr)return!1;return!0}function uv(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+Ul(n.value);if(u1(n))return n.filters.map((e=>uv(e))).join(",");{const e=n.filters.map((t=>uv(t))).join(",");return`${n.op}(${e})`}}function d1(n,e){return n instanceof Ut?(function(r,s){return s instanceof Ut&&r.op===s.op&&r.field.isEqual(s.field)&&ms(r.value,s.value)})(n,e):n instanceof Mr?(function(r,s){return s instanceof Mr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&d1(l,s.filters[u])),!0):!1})(n,e):void Le(19439)}function h1(n){return n instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ul(t.value)}`})(n):n instanceof Mr?(function(t){return t.op.toString()+" {"+t.getFilters().map(h1).join(" ,")+"}"})(n):"Filter"}class WB extends Ut{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class HB extends Ut{constructor(e,t){super(e,"in",t),this.keys=f1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GB extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=f1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function f1(n,e){return(e.arrayValue?.values||[]).map((t=>Ne.fromName(t.referenceValue)))}class qB extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return q_(t)&&zu(t.arrayValue,this.value)}}class KB extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zu(this.value.arrayValue,t)}}class QB extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zu(this.value.arrayValue,t)}}class YB extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!q_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>zu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function Ex(n,e=null,t=[],r=[],s=null,o=null,l=null){return new XB(n,e,t,r,s,o,l)}function K_(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>uv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Hp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ul(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ul(r))).join(",")),e.Te=t}return e.Te}function Q_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!d1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wx(n.startAt,e.startAt)&&wx(n.endAt,e.endAt)}function dv(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JB(n,e,t,r,s,o,l,u){return new sc(n,e,t,r,s,o,l,u)}function qp(n){return new sc(n)}function Sx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function p1(n){return n.collectionGroup!==null}function Su(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Gt(ln.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Bu(o,r))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new Bu(ln.keyField(),r))}return e.Ie}function cs(n){const e=Be(n);return e.Ee||(e.Ee=ZB(e,Su(n))),e.Ee}function ZB(n,e){if(n.limitType==="F")return Ex(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Bu(s.field,o)}));const t=n.endAt?new Yf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yf(n.startAt.position,n.startAt.inclusive):null;return Ex(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function hv(n,e){const t=n.filters.concat([e]);return new sc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xf(n,e,t){return new sc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kp(n,e){return Q_(cs(n),cs(e))&&n.limitType===e.limitType}function m1(n){return`${K_(cs(n))}|lt:${n.limitType}`}function pl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>h1(s))).join(", ")}]`),Hp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ul(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ul(s))).join(",")),`Target(${r})`})(cs(n))}; limitType=${n.limitType})`}function Qp(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Su(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const p=_x(l,u,d);return l.inclusive?p<=0:p<0})(r.startAt,Su(r),s)||r.endAt&&!(function(l,u,d){const p=_x(l,u,d);return l.inclusive?p>=0:p>0})(r.endAt,Su(r),s))})(n,e)}function e$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function g1(n){return(e,t)=>{let r=!1;for(const s of Su(n)){const o=t$(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function t$(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),p=u.data.field(o);return d!==null&&p!==null?Fl(d,p):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){po(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return ZP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=new Rt(Ne.comparator);function ei(){return n$}const y1=new Rt(Ne.comparator);function hu(...n){let e=y1;for(const t of n)e=e.insert(t.key,t);return e}function v1(n){let e=y1;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Xo(){return Tu()}function _1(){return Tu()}function Tu(){return new _a((n=>n.toString()),((n,e)=>n.isEqual(e)))}const r$=new Rt(Ne.comparator),s$=new Gt(Ne.comparator);function Ye(...n){let e=s$;for(const t of n)e=e.add(t);return e}const i$=new Gt(Qe);function o$(){return i$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(e)?"-0":e}}function w1(n){return{integerValue:""+n}}function a$(n,e){return OB(e)?w1(e):Y_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(){this._=void 0}}function l$(n,e,t){return n instanceof $u?(function(s,o){const l={fields:{[n1]:{stringValue:t1},[s1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&G_(o)&&(o=Gp(o)),o&&(l.fields[r1]=o),{mapValue:l}})(t,e):n instanceof zl?S1(n,e):n instanceof Wu?T1(n,e):(function(s,o){const l=E1(s,o),u=Tx(l)+Tx(s.Ae);return cv(l)&&cv(s.Ae)?w1(u):Y_(s.serializer,u)})(n,e)}function c$(n,e,t){return n instanceof zl?S1(n,e):n instanceof Wu?T1(n,e):t}function E1(n,e){return n instanceof Jf?(function(r){return cv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class $u extends Yp{}class zl extends Yp{constructor(e){super(),this.elements=e}}function S1(n,e){const t=x1(e);for(const r of n.elements)t.some((s=>ms(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Wu extends Yp{constructor(e){super(),this.elements=e}}function T1(n,e){let t=x1(e);for(const r of n.elements)t=t.filter((s=>!ms(s,r)));return{arrayValue:{values:t}}}class Jf extends Yp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Tx(n){return Mt(n.integerValue||n.doubleValue)}function x1(n){return q_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t){this.field=e,this.transform=t}}function u$(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof zl&&s instanceof zl||r instanceof Wu&&s instanceof Wu?jl(r.elements,s.elements,ms):r instanceof Jf&&s instanceof Jf?ms(r.Ae,s.Ae):r instanceof $u&&s instanceof $u})(n.transform,e.transform)}class d${constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function of(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xp{}function C1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new A1(n.key,Nr.none()):new ad(n.key,n.data,Nr.none());{const t=n.data,r=jn.empty();let s=new Gt(ln.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new mo(n.key,r,new Xn(s.toArray()),Nr.none())}}function h$(n,e,t){n instanceof ad?(function(s,o,l){const u=s.value.clone(),d=Ix(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof mo?(function(s,o,l){if(!of(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Ix(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(R1(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function xu(n,e,t,r){return n instanceof ad?(function(o,l,u,d){if(!of(o.precondition,l))return u;const p=o.value.clone(),m=Cx(o.fieldTransforms,d,l);return p.setAll(m),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof mo?(function(o,l,u,d){if(!of(o.precondition,l))return u;const p=Cx(o.fieldTransforms,d,l),m=l.data;return m.setAll(R1(o)),m.setAll(p),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,l,u){return of(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function f$(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=E1(r.transform,s||null);o!=null&&(t===null&&(t=jn.empty()),t.set(r.field,o))}return t||null}function xx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&jl(r,s,((o,l)=>u$(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ad extends Xp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class mo extends Xp{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function R1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Ix(n,e,t){const r=new Map;lt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,c$(l,u,t[s]))}return r}function Cx(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,l$(o,l,e))}return r}class A1 extends Xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p$ extends Xp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&h$(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_1();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=C1(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,((t,r)=>xx(t,r)))&&jl(this.baseMutations,e.baseMutations,((t,r)=>xx(t,r)))}}class X_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){lt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return r$})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new X_(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Ze;function v$(n){switch(n){case re.OK:return Le(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function b1(n){if(n===void 0)return Zs("GRPC error has no .code"),re.UNKNOWN;switch(n){case Ft.OK:return re.OK;case Ft.CANCELLED:return re.CANCELLED;case Ft.UNKNOWN:return re.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return re.INTERNAL;case Ft.UNAVAILABLE:return re.UNAVAILABLE;case Ft.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ft.NOT_FOUND:return re.NOT_FOUND;case Ft.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ft.ABORTED:return re.ABORTED;case Ft.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ft.DATA_LOSS:return re.DATA_LOSS;default:return Le(39323,{code:n})}}(Ze=Ft||(Ft={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=new qi([4294967295,4294967295],0);function Rx(n){const e=_$().encode(n),t=new BP;return t.update(e),new Uint8Array(t.digest())}function Ax(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new qi([t,r],0),new qi([s,o],0)]}class J_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(r<0)throw new fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qi.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(qi.fromNumber(r)));return s.compare(w$)===1&&(s=new qi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Rx(e),[r,s]=Ax(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new J_(o,s,t);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=Rx(e),[r,s]=Ax(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ld.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Jp(Fe.min(),s,new Rt(Qe),ei(),Ye())}}class ld{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ld(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class P1{constructor(e,t){this.targetId=e,this.Ce=t}}class k1{constructor(e,t,r=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class bx{constructor(){this.ve=0,this.Fe=Px(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Le(38017,{changeType:o})}})),new ld(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Px()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class E${constructor(e){this.Ge=e,this.ze=new Map,this.je=ei(),this.Je=Wh(),this.He=Wh(),this.Ye=new Rt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(dv(o))if(r===0){const l=new Ne(o.path);this.et(t,l,_n.newNoDocument(l,Fe.min()))}else lt(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=ro(r).toUint8Array()}catch(d){if(d instanceof e1)return Vl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new J_(l,s,o)}catch(d){return Vl(d instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&dv(u.target)){const d=new Ne(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,_n.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Ye();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Jp(e,t,this.Ye,this.je,r);return this.je=ei(),this.Je=Wh(),this.He=Wh(),this.Ye=new Rt(Qe),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new bx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wh(){return new Rt(Ne.comparator)}function Px(){return new Rt(Ne.comparator)}const S$={asc:"ASCENDING",desc:"DESCENDING"},T$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x$={and:"AND",or:"OR"};class I${constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fv(n,e){return n.useProto3Json||Hp(e)?e:{value:e}}function Zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function C$(n,e){return Zf(n,e.toTimestamp())}function us(n){return lt(!!n,49232),Fe.fromTimestamp((function(t){const r=no(t);return new wt(r.seconds,r.nanos)})(n))}function Z_(n,e){return pv(n,e).canonicalString()}function pv(n,e){const t=(function(s){return new pt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function D1(n){const e=pt.fromString(n);return lt(j1(e),10190,{key:e.toString()}),e}function mv(n,e){return Z_(n.databaseId,e.path)}function _y(n,e){const t=D1(e);if(t.get(1)!==n.databaseId.projectId)throw new we(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(M1(t))}function O1(n,e){return Z_(n.databaseId,e)}function R$(n){const e=D1(n);return e.length===4?pt.emptyPath():M1(e)}function gv(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M1(n){return lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kx(n,e,t){return{name:mv(n,e),fields:t.value.mapValue.fields}}function A$(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Le(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,m){return p.useProto3Json?(lt(m===void 0||typeof m=="string",58123),cn.fromBase64String(m||"")):(lt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),cn.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(p){const m=p.code===void 0?re.UNKNOWN:b1(p.code);return new we(m,p.message||"")})(l);t=new k1(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_y(n,r.document.name),o=us(r.document.updateTime),l=r.document.createTime?us(r.document.createTime):Fe.min(),u=new jn({mapValue:{fields:r.document.fields}}),d=_n.newFoundDocument(s,o,l,u),p=r.targetIds||[],m=r.removedTargetIds||[];t=new af(p,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_y(n,r.document),o=r.readTime?us(r.readTime):Fe.min(),l=_n.newNoDocument(s,o),u=r.removedTargetIds||[];t=new af([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_y(n,r.document),o=r.removedTargetIds||[];t=new af([],o,s,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new y$(s,o),u=r.targetId;t=new P1(u,l)}}return t}function b$(n,e){let t;if(e instanceof ad)t={update:kx(n,e.key,e.value)};else if(e instanceof A1)t={delete:mv(n,e.key)};else if(e instanceof mo)t={update:kx(n,e.key,e.data),updateMask:j$(e.fieldMask)};else{if(!(e instanceof p$))return Le(16599,{Vt:e.type});t={verify:mv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof $u)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof zl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Wu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Jf)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw Le(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:C$(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Le(27497)})(n,e.precondition)),t}function P$(n,e){return n&&n.length>0?(lt(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?us(s.updateTime):us(o);return l.isEqual(Fe.min())&&(l=us(o)),new d$(l,s.transformResults||[])})(t,e)))):[]}function k$(n,e){return{documents:[O1(n,e.path)]}}function N$(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=O1(n,s);const o=(function(p){if(p.length!==0)return V1(Mr.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((m=>(function(E){return{field:ml(E.field),direction:M$(E.dir)}})(m)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=fv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function D$(n){let e=R$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){lt(r===1,65062);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){const E=L1(y);return E instanceof Mr&&u1(E)?E.getFilters():[E]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((E=>(function(b){return new Bu(gl(b.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(E)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let E;return E=typeof y=="object"?y.value:y,Hp(E)?null:E})(t.limit));let d=null;t.startAt&&(d=(function(y){const E=!!y.before,I=y.values||[];return new Yf(I,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(y){const E=!y.before,I=y.values||[];return new Yf(I,E)})(t.endAt)),JB(e,s,l,o,u,"F",d,p)}function O$(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function L1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=gl(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gl(t.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=gl(t.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=gl(t.unaryFilter.field);return Ut.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ut.create(gl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Mr.create(t.compositeFilter.filters.map((r=>L1(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function M$(n){return S$[n]}function L$(n){return T$[n]}function V$(n){return x$[n]}function ml(n){return{fieldPath:n.canonicalString()}}function gl(n){return ln.fromServerFormat(n.fieldPath)}function V1(n){return n instanceof Ut?(function(t){if(t.op==="=="){if(vx(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NAN"}};if(yx(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vx(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NAN"}};if(yx(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(t.field),op:L$(t.op),value:t.value}}})(n):n instanceof Mr?(function(t){const r=t.getFilters().map((s=>V1(s)));return r.length===1?r[0]:{compositeFilter:{op:V$(t.op),filters:r}}})(n):Le(54877,{filter:n})}function j$(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function j1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t,r,s,o=Fe.min(),l=Fe.min(),u=cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new $i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e){this.yt=e}}function U$(n){const e=D$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this.Cn=new B$}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(to.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(to.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class B${constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Gt(pt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Gt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},F1=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(F1,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bl(0)}static cr(){return new Bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="LruGarbageCollector",$$=1048576;function Ox([n,e],[t,r]){const s=Qe(n,t);return s===0?Qe(e,r):s}class W${constructor(e){this.Ir=e,this.buffer=new Gt(Ox),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ox(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class H${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(Dx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){rc(t)?Te(Dx,"Ignoring IndexedDB error during garbage collection: ",t):await nc(t)}await this.Vr(3e5)}))}}class G${constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Wp.ce);const r=new W$(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Nx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,l,u,d,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(p=Date.now(),fl()<=Ke.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(p-d)+`ms
Total Duration: ${p-m}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function q$(n,e){return new G$(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(){this.changes=new _a((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&xu(r.mutation,s,Xn.empty(),wt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const s=Xo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=hu();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Xo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,r,s){let o=ei();const l=Tu(),u=(function(){return Tu()})();return t.forEach(((d,p)=>{const m=r.get(p.key);s.has(p.key)&&(m===void 0||m.mutation instanceof mo)?o=o.insert(p.key,p):m!==void 0?(l.set(p.key,m.mutation.getFieldMask()),xu(m.mutation,p,m.mutation.getFieldMask(),wt.now())):l.set(p.key,Xn.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((p,m)=>l.set(p,m))),t.forEach(((p,m)=>u.set(p,new Q$(m,l.get(p)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Tu();let s=new Rt(((l,u)=>l-u)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let m=r.get(d)||Xn.empty();m=u.applyToLocalView(p,m),r.set(d,m);const y=(s.get(u.batchId)||Ye()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,m=d.value,y=_1();m.forEach((E=>{if(!o.has(E)){const I=C1(t.get(E),r.get(E));I!==null&&y.set(E,I),o=o.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ie.resolve(Xo());let u=ju,d=o;return l.next((p=>ie.forEach(p,((m,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(m)?ie.resolve():this.remoteDocumentCache.getEntry(e,m).next((E=>{d=d.insert(m,E)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,d,p,Ye()))).next((m=>({batchId:u,changes:v1(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((r=>{let s=hu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=hu();return this.indexManager.getCollectionParents(e,o).next((u=>ie.forEach(u,(d=>{const p=(function(y,E){return new sc(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((m=>{m.forEach(((y,E)=>{l=l.insert(y,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((d,p)=>{const m=p.getKey();l.get(m)===null&&(l=l.insert(m,_n.newInvalidDocument(m)))}));let u=hu();return l.forEach(((d,p)=>{const m=o.get(d);m!==void 0&&xu(m.mutation,p,Xn.empty(),wt.now()),Qp(t,p)&&(u=u.insert(d,p))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:us(s.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:U$(s.bundledQuery),readTime:us(s.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(){this.overlays=new Rt(Ne.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xo();return ie.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=Xo(),o=t.length+1,l=new Ne(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Rt(((p,m)=>p-m));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let m=o.get(p.largestBatchId);m===null&&(m=Xo(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const u=Xo(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,m)=>u.set(p,m))),!(u.size()>=s)););return ie.resolve(u)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new g$(t,r));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.Qr=new Gt(Xt.$r),this.Ur=new Gt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Xt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ne(new pt([])),r=new Xt(t,e),s=new Xt(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new pt([])),r=new Xt(t,e),s=new Xt(t,e+1);let o=Ye();return this.Ur.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Xt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Xt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new m$(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new Xt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?H_:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xt(t,0),s=new Xt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Qe);return t.forEach((s=>{const o=new Xt(s,0),l=new Xt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{r=r.add(u.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const l=new Xt(new Ne(o),0);let u=new Gt(Qe);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.Yr)),!0)}),l),ie.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){lt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(s=>{const o=new Xt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Xt(t,0),s=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(e){this.ri=e,this.docs=(function(){return new Rt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=ei();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():_n.newInvalidDocument(s))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=ei();const l=t.path,u=new Ne(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:m}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||PB(bB(m),r)<=0||(s.has(m.key)||Qp(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Le(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new nW(this)}getSize(e){return ie.resolve(this.size)}}class nW extends K${constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e){this.persistence=e,this.si=new _a((t=>K_(t)),Q_),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new ew,this.targetCount=0,this.ai=Bl.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),ie.waitFor(o).next((()=>s))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wp(0),this.li=!1,this.li=!0,this.hi=new Z$,this.referenceDelegate=e(this),this.Pi=new rW(this),this.indexManager=new z$,this.remoteDocumentCache=(function(s){return new tW(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new F$(t),this.Ii=new X$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new eW(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const s=new sW(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class sW extends NB{constructor(e){super(),this.currentSequenceNumber=e}}class tw{constructor(e){this.persistence=e,this.Ri=new ew,this.Vi=null}static mi(e){return new tw(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const s=Ne.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ep{constructor(e,t){this.persistence=e,this.pi=new _a((r=>MB(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=q$(this,t)}static mi(e,t){return new ep(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?ie.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((u=>{u||(r++,o.removeEntry(l,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rf(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ie.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ye(),s=Ye();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new nw(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return W4()?8:DB(En())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new iW;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(fl()<=Ke.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(fl()<=Ke.DEBUG&&Te("QueryEngine","Query:",pl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(fl()<=Ke.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cs(t))):ie.resolve())}ys(e,t){if(Sx(t))return ie.resolve(null);let r=cs(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Xf(t,null,"F"),r=cs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ye(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.Ds(t,u);return this.Cs(t,p,l,d.readTime)?this.ys(e,Xf(t,null,"F")):this.vs(e,p,t,d)}))))})))))}ws(e,t,r,s){return Sx(t)||s.isEqual(Fe.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,s)?ie.resolve(null):(fl()<=Ke.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pl(t)),this.vs(e,l,t,AB(s,ju)).next((u=>u)))}))}Ds(e,t){let r=new Gt(g1(e));return t.forEach(((s,o)=>{Qp(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return fl()<=Ke.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",pl(t)),this.ps.getDocumentsMatchingQuery(e,t,to.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="LocalStore",aW=3e8;class lW{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Rt(Qe),this.xs=new _a((o=>K_(o)),Q_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function cW(n,e,t,r){return new lW(n,e,t,r)}async function z1(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Ye();for(const p of s){l.push(p.batchId);for(const m of p.mutations)d=d.add(m.key)}for(const p of o){u.push(p.batchId);for(const m of p.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:u})))}))}))}function uW(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,m){const y=p.batch,E=y.keys();let I=ie.resolve();return E.forEach((b=>{I=I.next((()=>m.getEntry(d,b))).next((x=>{const A=p.docVersions.get(b);lt(A!==null,48541),x.version.compareTo(A)<0&&(y.applyToRemoteDocument(x,p),x.isValidDocument()&&(x.setReadTime(p.commitVersion),m.addEntry(x)))}))})),I.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Ye();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function B1(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function dW(n,e){const t=Be(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((m,y)=>{const E=s.get(y);if(!E)return;u.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,m.addedDocuments,y))));let I=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?I=I.withResumeToken(cn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),s=s.insert(y,I),(function(x,A,j){return x.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=aW?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(E,I,m)&&u.push(t.Pi.updateTargetData(o,I))}));let d=ei(),p=Ye();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),u.push(hW(o,l,e.documentUpdates).next((m=>{d=m.ks,p=m.qs}))),!r.isEqual(Fe.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(m)}return ie.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,p))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function hW(n,e,t){let r=Ye(),s=Ye();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=ei();return t.forEach(((u,d)=>{const p=o.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Fe.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):Te(rw,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function fW(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=H_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pW(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,ie.resolve(s)):t.Pi.allocateTargetId(r).next((l=>(s=new $i(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function yv(n,e,t){const r=Be(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!rc(l))throw l;Te(rw,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Mx(n,e,t){const r=Be(n);let s=Fe.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,p,m){const y=Be(d),E=y.xs.get(m);return E!==void 0?ie.resolve(y.Ms.get(E)):y.Pi.getTargetData(p,m)})(r,l,cs(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?s:Fe.min(),t?o:Ye()))).next((u=>(mW(r,e$(e),u),{documents:u,Qs:o})))))}function mW(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class Lx{constructor(){this.activeTargetIds=o$()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gW{constructor(){this.Mo=new Lx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Lx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="ConnectivityMonitor";class jx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(Vx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(Vx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function vv(){return Hh===null?Hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hh++,"0x"+Hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="RestConnection",vW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _W{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Kf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const l=vv(),u=this.zo(e,t.toUriEncodedString());Te(wy,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(u),m=uo(p);return this.Jo(e,u,d,r,m).then((y=>(Te(wy,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw Vl(wy,`RPC '${e}' ${l} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,t,r,s,o,l){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=vW[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class EW extends _W{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const l=vv();return new Promise(((u,d)=>{const p=new $P;p.setWithCredentials(!0),p.listenOnce(WP.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case nf.NO_ERROR:const y=p.getResponseJson();Te(mn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),u(y);break;case nf.TIMEOUT:Te(mn,`RPC '${e}' ${l} timed out`),d(new we(re.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:const E=p.getStatus();if(Te(mn,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const b=I?.error;if(b&&b.status&&b.message){const x=(function(j){const V=j.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(V)>=0?V:re.UNKNOWN})(b.status);d(new we(x,b.message))}else d(new we(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new we(re.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Te(mn,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(s);Te(mn,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",m,r,15)}))}T_(e,t,r){const s=vv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=qP(),u=GP(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");Te(mn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const y=l.createWebChannel(m,d);this.I_(y);let E=!1,I=!1;const b=new wW({Yo:A=>{I?Te(mn,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(E||(Te(mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),E=!0),Te(mn,`RPC '${e}' stream ${s} sending:`,A),y.send(A))},Zo:()=>y.close()}),x=(A,j,V)=>{A.listen(j,(z=>{try{V(z)}catch(G){setTimeout((()=>{throw G}),0)}}))};return x(y,du.EventType.OPEN,(()=>{I||(Te(mn,`RPC '${e}' stream ${s} transport opened.`),b.o_())})),x(y,du.EventType.CLOSE,(()=>{I||(I=!0,Te(mn,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(y))})),x(y,du.EventType.ERROR,(A=>{I||(I=!0,Vl(mn,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),b.a_(new we(re.UNAVAILABLE,"The operation could not be completed")))})),x(y,du.EventType.MESSAGE,(A=>{if(!I){const j=A.data[0];lt(!!j,16349);const V=j,z=V?.error||V[0]?.error;if(z){Te(mn,`RPC '${e}' stream ${s} received error:`,z);const G=z.status;let J=(function(R){const N=Ft[R];if(N!==void 0)return b1(N)})(G),Z=z.message;J===void 0&&(J=re.INTERNAL,Z="Unknown error status: "+G+" with message "+z.message),I=!0,b.a_(new we(J,Z)),y.close()}else Te(mn,`RPC '${e}' stream ${s} received:`,j),b.u_(j)}})),x(u,HP.STAT_EVENT,(A=>{A.stat===ov.PROXY?Te(mn,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===ov.NOPROXY&&Te(mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ey(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(n){return new I$(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="PersistentStream";class W1{constructor(e,t,r,s,o,l,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Zs(t.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new we(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(Fx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(Fx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SW extends W1{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=A$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Fe.min():l.readTime?us(l.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=gv(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=dv(d)?{documents:k$(o,d)}:{query:N$(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=N1(o,l.resumeToken);const p=fv(o,l.expectedCount);p!==null&&(u.expectedCount=p)}else if(l.snapshotVersion.compareTo(Fe.min())>0){u.readTime=Zf(o,l.snapshotVersion.toTimestamp());const p=fv(o,l.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const r=O$(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=gv(this.serializer),t.removeTarget=e,this.q_(t)}}class TW extends W1{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=P$(e.writeResults,e.commitTime),r=us(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=gv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>b$(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{}class IW extends xW{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new we(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,pv(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(re.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,pv(t,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(re.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zs(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="RemoteStore";class RW{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{wa(this)&&(Te(ha,"Restarting streams for network reachability change."),await(async function(d){const p=Be(d);p.Ea.add(4),await cd(p),p.Ra.set("Unknown"),p.Ea.delete(4),await em(p)})(this))}))})),this.Ra=new CW(r,s)}}async function em(n){if(wa(n))for(const e of n.da)await e(!0)}async function cd(n){for(const e of n.da)await e(!1)}function H1(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),aw(t)?ow(t):ic(t).O_()&&iw(t,e))}function sw(n,e){const t=Be(n),r=ic(t);t.Ia.delete(e),r.O_()&&G1(t,e),t.Ia.size===0&&(r.O_()?r.L_():wa(t)&&t.Ra.set("Unknown"))}function iw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ic(n).Y_(e)}function G1(n,e){n.Va.Ue(e),ic(n).Z_(e)}function ow(n){n.Va=new E$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ic(n).start(),n.Ra.ua()}function aw(n){return wa(n)&&!ic(n).x_()&&n.Ia.size>0}function wa(n){return Be(n).Ea.size===0}function q1(n){n.Va=void 0}async function AW(n){n.Ra.set("Online")}async function bW(n){n.Ia.forEach(((e,t)=>{iw(n,e)}))}async function PW(n,e){q1(n),aw(n)?(n.Ra.ha(e),ow(n)):n.Ra.set("Unknown")}async function kW(n,e,t){if(n.Ra.set("Online"),e instanceof k1&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(r){Te(ha,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tp(n,r)}else if(e instanceof af?n.Va.Ze(e):e instanceof P1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await B1(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.Ia.get(p);m&&o.Ia.set(p,m.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,p)=>{const m=o.Ia.get(d);if(!m)return;o.Ia.set(d,m.withResumeToken(cn.EMPTY_BYTE_STRING,m.snapshotVersion)),G1(o,d);const y=new $i(m.target,d,p,m.sequenceNumber);iw(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){Te(ha,"Failed to raise snapshot:",r),await tp(n,r)}}async function tp(n,e,t){if(!rc(e))throw e;n.Ea.add(1),await cd(n),n.Ra.set("Offline"),t||(t=()=>B1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(ha,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await em(n)}))}function K1(n,e){return e().catch((t=>tp(n,t,e)))}async function tm(n){const e=Be(n),t=io(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:H_;for(;NW(e);)try{const s=await fW(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,DW(e,s)}catch(s){await tp(e,s)}Q1(e)&&Y1(e)}function NW(n){return wa(n)&&n.Ta.length<10}function DW(n,e){n.Ta.push(e);const t=io(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Q1(n){return wa(n)&&!io(n).x_()&&n.Ta.length>0}function Y1(n){io(n).start()}async function OW(n){io(n).ra()}async function MW(n){const e=io(n);for(const t of n.Ta)e.ea(t.mutations)}async function LW(n,e,t){const r=n.Ta.shift(),s=X_.from(r,e,t);await K1(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await tm(n)}async function VW(n,e){e&&io(n).X_&&await(async function(r,s){if((function(l){return v$(l)&&l!==re.ABORTED})(s.code)){const o=r.Ta.shift();io(r).B_(),await K1(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await tm(r)}})(n,e),Q1(n)&&Y1(n)}async function Ux(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Te(ha,"RemoteStore received new credentials");const r=wa(t);t.Ea.add(3),await cd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await em(t)}async function jW(n,e){const t=Be(n);e?(t.Ea.delete(2),await em(t)):e||(t.Ea.add(2),await cd(t),t.Ra.set("Unknown"))}function ic(n){return n.ma||(n.ma=(function(t,r,s){const o=Be(t);return o.sa(),new SW(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:AW.bind(null,n),t_:bW.bind(null,n),r_:PW.bind(null,n),H_:kW.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),aw(n)?ow(n):n.Ra.set("Unknown")):(await n.ma.stop(),q1(n))}))),n.ma}function io(n){return n.fa||(n.fa=(function(t,r,s){const o=Be(t);return o.sa(),new TW(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:OW.bind(null,n),r_:VW.bind(null,n),ta:MW.bind(null,n),na:LW.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await tm(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(ha,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new lw(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cw(n,e){if(Zs("AsyncQueue",`${e}: ${n}`),rc(n))return new we(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=hu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.ga=new Rt(Ne.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class $l{constructor(e,t,r,s,o,l,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new $l(e,t,Al.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UW{constructor(){this.queries=Bx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Be(t),o=s.queries;s.queries=Bx(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new we(re.ABORTED,"Firestore shutting down"))}}function Bx(){return new _a((n=>m1(n)),Kp)}async function X1(n,e){const t=Be(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new FW,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=cw(l,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&uw(t)}async function J1(n,e){const t=Be(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function zW(n,e){const t=Be(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(r=!0);l.wa=s}}r&&uw(t)}function BW(n,e,t){const r=Be(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function uw(n){n.Ca.forEach((e=>{e.next()}))}var _v,$x;($x=_v||(_v={})).Ma="default",$x.Cache="cache";class Z1{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $l(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=$l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_v.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.key=e}}class tk{constructor(e){this.key=e}}class $W{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=g1(e),this.tu=new Al(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new zx,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,y)=>{const E=s.get(m),I=Qp(this.query,y)?y:null,b=!!E&&this.mutatedKeys.has(E.key),x=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let A=!1;E&&I?E.data.isEqual(I.data)?b!==x&&(r.track({type:3,doc:I}),A=!0):this.su(E,I)||(r.track({type:2,doc:I}),A=!0,(d&&this.eu(I,d)>0||p&&this.eu(I,p)<0)&&(u=!0)):!E&&I?(r.track({type:0,doc:I}),A=!0):E&&!I&&(r.track({type:1,doc:E}),A=!0,(d||p)&&(u=!0)),A&&(I?(l=l.add(I),o=x?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,y)=>(function(I,b){const x=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:A})}};return x(I)-x(b)})(m.type,y.type)||this.eu(m.doc,y.doc))),this.ou(r),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new $l(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new tk(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new ek(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return $l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dw="SyncEngine";class WW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class HW{constructor(e){this.key=e,this.hu=!1}}class GW{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new _a((u=>m1(u)),Kp),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(Ne.comparator),this.Au=new Map,this.Ru=new ew,this.Vu={},this.mu=new Map,this.fu=Bl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qW(n,e,t=!0){const r=ak(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await nk(r,e,t,!0),s}async function KW(n,e){const t=ak(n);await nk(t,e,!0,!1)}async function nk(n,e,t,r){const s=await pW(n.localStore,cs(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await QW(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&H1(n.remoteStore,s),u}async function QW(n,e,t,r,s){n.pu=(y,E,I)=>(async function(x,A,j,V){let z=A.view.ru(j);z.Cs&&(z=await Mx(x.localStore,A.query,!1).then((({documents:P})=>A.view.ru(P,z))));const G=V&&V.targetChanges.get(A.targetId),J=V&&V.targetMismatches.get(A.targetId)!=null,Z=A.view.applyChanges(z,x.isPrimaryClient,G,J);return Hx(x,A.targetId,Z.au),Z.snapshot})(n,y,E,I);const o=await Mx(n.localStore,e,!0),l=new $W(e,o.Qs),u=l.ru(o.documents),d=ld.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(u,n.isPrimaryClient,d);Hx(n,t,p.au);const m=new WW(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function YW(n,e,t){const r=Be(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!Kp(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await yv(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&sw(r.remoteStore,s.targetId),wv(r,s.targetId)})).catch(nc)):(wv(r,s.targetId),await yv(r.localStore,s.targetId,!0))}async function XW(n,e){const t=Be(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),sw(t.remoteStore,r.targetId))}async function JW(n,e,t){const r=iH(n);try{const s=await(function(l,u){const d=Be(l),p=wt.now(),m=u.reduce(((I,b)=>I.add(b.key)),Ye());let y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let b=ei(),x=Ye();return d.Ns.getEntries(I,m).next((A=>{b=A,b.forEach(((j,V)=>{V.isValidDocument()||(x=x.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(I,b))).next((A=>{y=A;const j=[];for(const V of u){const z=f$(V,y.get(V.key).overlayedDocument);z!=null&&j.push(new mo(V.key,z,a1(z.value.mapValue),Nr.exists(!0)))}return d.mutationQueue.addMutationBatch(I,p,j,u)})).next((A=>{E=A;const j=A.applyToLocalDocumentSet(y,x);return d.documentOverlayCache.saveOverlays(I,A.batchId,j)}))})).then((()=>({batchId:E.batchId,changes:v1(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new Rt(Qe)),p=p.insert(u,d),l.Vu[l.currentUser.toKey()]=p})(r,s.batchId,t),await ud(r,s.changes),await tm(r.remoteStore)}catch(s){const o=cw(s,"Failed to persist write");t.reject(o)}}async function rk(n,e){const t=Be(n);try{const r=await dW(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?lt(l.hu,14607):s.removedDocuments.size>0&&(lt(l.hu,42227),l.hu=!1))})),await ud(t,r,e)}catch(r){await nc(r)}}function Wx(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=Be(l);d.onlineState=u;let p=!1;d.queries.forEach(((m,y)=>{for(const E of y.Sa)E.va(u)&&(p=!0)})),p&&uw(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZW(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new Rt(Ne.comparator);l=l.insert(o,_n.newNoDocument(o,Fe.min()));const u=Ye().add(o),d=new Jp(Fe.min(),new Map,new Rt(Qe),l,u);await rk(r,d),r.du=r.du.remove(o),r.Au.delete(e),hw(r)}else await yv(r.localStore,e,!1).then((()=>wv(r,e,t))).catch(nc)}async function eH(n,e){const t=Be(n),r=e.batch.batchId;try{const s=await uW(t.localStore,e);ik(t,r,null),sk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ud(t,s)}catch(s){await nc(s)}}async function tH(n,e,t){const r=Be(n);try{const s=await(function(l,u){const d=Be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let m;return d.mutationQueue.lookupMutationBatch(p,u).next((y=>(lt(y!==null,37113),m=y.keys(),d.mutationQueue.removeMutationBatch(p,y)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m))).next((()=>d.localDocuments.getDocuments(p,m)))}))})(r.localStore,e);ik(r,e,t),sk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ud(r,s)}catch(s){await nc(s)}}function sk(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ik(n,e,t){const r=Be(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function wv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||ok(n,r)}))}function ok(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(sw(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),hw(n))}function Hx(n,e,t){for(const r of t)r instanceof ek?(n.Ru.addReference(r.key,e),nH(n,r)):r instanceof tk?(Te(dw,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||ok(n,r.key)):Le(19791,{wu:r})}function nH(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Te(dw,"New document in limbo: "+t),n.Eu.add(r),hw(n))}function hw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ne(pt.fromString(e)),r=n.fu.next();n.Au.set(r,new HW(t)),n.du=n.du.insert(t,r),H1(n.remoteStore,new $i(cs(qp(t.path)),r,"TargetPurposeLimboResolution",Wp.ce))}}async function ud(n,e,t){const r=Be(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{l.push(r.pu(d,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const m=p?!p.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(p){s.push(p);const m=nw.As(d.targetId,p);o.push(m)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(d,p){const m=Be(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ie.forEach(p,(E=>ie.forEach(E.Es,(I=>m.persistence.referenceDelegate.addReference(y,E.targetId,I))).next((()=>ie.forEach(E.ds,(I=>m.persistence.referenceDelegate.removeReference(y,E.targetId,I)))))))))}catch(y){if(!rc(y))throw y;Te(rw,"Failed to update sequence numbers: "+y)}for(const y of p){const E=y.targetId;if(!y.fromCache){const I=m.Ms.get(E),b=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(E,x)}}})(r.localStore,o))}async function rH(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Te(dw,"User change. New user:",e.toKey());const r=await z1(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new we(re.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ud(t,r.Ls)}}function sH(n,e){const t=Be(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let s=Ye();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function ak(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZW.bind(null,e),e.Pu.H_=zW.bind(null,e.eventManager),e.Pu.yu=BW.bind(null,e.eventManager),e}function iH(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tH.bind(null,e),e}class np{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return cW(this.persistence,new oW,e.initialUser,this.serializer)}Cu(e){return new U1(tw.mi,this.serializer)}Du(e){return new gW}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}np.provider={build:()=>new np};class oH extends np{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){lt(this.persistence.referenceDelegate instanceof ep,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new H$(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new U1((r=>ep.mi(r,t)),this.serializer)}}class Ev{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rH.bind(null,this.syncEngine),await jW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UW})()}createDatastore(e){const t=Zp(e.databaseInfo.databaseId),r=(function(o){return new EW(o)})(e.databaseInfo);return(function(o,l,u,d){return new IW(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,u){return new RW(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>Wx(this.syncEngine,t,0)),(function(){return jx.v()?new jx:new yW})())}createSyncEngine(e,t){return(function(s,o,l,u,d,p,m){const y=new GW(s,o,l,u,d,p);return m&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Be(t);Te(ha,"RemoteStore shutting down."),r.Ea.add(5),await cd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ev.provider={build:()=>new Ev};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="FirestoreClient";class aH{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=gn.UNAUTHENTICATED,this.clientId=W_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{Te(oo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Te(oo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=cw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Sy(n,e){n.asyncQueue.verifyOperationInProgress(),Te(oo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await z1(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Gx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await lH(n);Te(oo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Ux(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Ux(e.remoteStore,s))),n._onlineComponents=e}async function lH(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(oo,"Using user provided OfflineComponentProvider");try{await Sy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Vl("Error using user provided cache. Falling back to memory cache: "+t),await Sy(n,new np)}}else Te(oo,"Using default OfflineComponentProvider"),await Sy(n,new oH(void 0));return n._offlineComponents}async function ck(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(oo,"Using user provided OnlineComponentProvider"),await Gx(n,n._uninitializedComponentsProvider._online)):(Te(oo,"Using default OnlineComponentProvider"),await Gx(n,new Ev))),n._onlineComponents}function cH(n){return ck(n).then((e=>e.syncEngine))}async function Sv(n){const e=await ck(n),t=e.eventManager;return t.onListen=qW.bind(null,e.syncEngine),t.onUnlisten=YW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XW.bind(null,e.syncEngine),t}function uH(n,e,t={}){const r=new Ki;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const m=new lk({next:E=>{m.Nu(),l.enqueueAndForget((()=>J1(o,y)));const I=E.docs.has(u);!I&&E.fromCache?p.reject(new we(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&d&&d.source==="server"?p.reject(new we(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),y=new Z1(qp(u.path),m,{includeMetadataChanges:!0,qa:!0});return X1(o,y)})(await Sv(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="firestore.googleapis.com",Kx=!0;class Qx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dk,this.ssl=Kx}else this.host=e.host,this.ssl=e.ssl??Kx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=F1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$$)throw new we(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uk(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yB;switch(r.type){case"firstParty":return new EB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=qx.get(t);r&&(Te("ComponentProvider","Removing Datastore"),qx.delete(t),r.terminate())})(this),Promise.resolve()}}function dH(n,e,t,r={}){n=kr(n,nm);const s=uo(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;s&&(a_(`https://${u}`),l_("Firestore",!0)),o.host!==dk&&o.host!==u&&Vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:r};if(!Qs(d,l)&&(n._setSettings(d),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=gn.MOCK_USER;else{p=zA(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new we(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gn(y)}n._authCredentials=new vB(new QP(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new go(this.firestore,e,this._query)}}class kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(od(t,kt._jsonSchema))return new kt(e,r||null,new Ne(pt.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:zt("string",kt._jsonSchemaVersion),referencePath:zt("string")};class Qi extends go{constructor(e,t,r){super(e,t,qp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Ne(e))}withConverter(e){return new Qi(this.firestore,e,this._path)}}function Tv(n,e,...t){if(n=Nt(n),YP("collection","path",e),n instanceof nm){const r=pt.fromString(e,...t);return lx(r),new Qi(n,null,r)}{if(!(n instanceof kt||n instanceof Qi))throw new we(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return lx(r),new Qi(n.firestore,null,r)}}function oc(n,e,...t){if(n=Nt(n),arguments.length===1&&(e=W_.newId()),YP("doc","path",e),n instanceof nm){const r=pt.fromString(e,...t);return ax(r),new kt(n,null,new Ne(r))}{if(!(n instanceof kt||n instanceof Qi))throw new we(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return ax(r),new kt(n.firestore,n instanceof Qi?n.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="AsyncQueue";class Xx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $1(this,"async_queue_retry"),this._c=()=>{const r=Ey();r&&Te(Yx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ey();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ey();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ki;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rc(e))throw e;Te(Yx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Zs("INTERNAL UNHANDLED ERROR: ",Jx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=lw.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Le(47125,{Pc:Jx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Jx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class fa extends nm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Xx,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xx(e),this._firestoreClient=void 0,await e}}}function hH(n,e){const t=typeof n=="object"?n:d_(),r=typeof n=="string"?n:Kf,s=Op(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=jA("firestore");o&&dH(s,...o)}return s}function fw(n){if(n._terminated)throw new we(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fH(n),n._firestoreClient}function fH(n){const e=n._freezeSettings(),t=(function(s,o,l,u){return new jB(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,uk(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new aH(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(cn.fromBase64String(e))}catch(t){throw new we(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lr(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(od(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:zt("string",lr._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ds._jsonSchemaVersion}}static fromJSON(e){if(od(e,ds._jsonSchema))return new ds(e.latitude,e.longitude)}}ds._jsonSchemaVersion="firestore/geoPoint/1.0",ds._jsonSchema={type:zt("string",ds._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(od(e,hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hs(e.vectorValues);throw new we(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hs._jsonSchemaVersion="firestore/vectorValue/1.0",hs._jsonSchema={type:zt("string",hs._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=/^__.*__$/;class mH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ad(e,this.data,t,this.fieldTransforms)}}class hk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new mo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:n})}}class sm{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fk(this.Ac)&&pH.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gH{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zp(e)}Cc(e,t,r,s=!1){return new sm({Ac:e,methodName:t,Dc:r,path:ln.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function im(n){const e=n._freezeSettings(),t=Zp(n._databaseId);return new gH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pk(n,e,t,r,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);gw("Data must be an object, but it was:",l,r);const u=mk(r,l);let d,p;if(o.merge)d=new Xn(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const E=xv(e,y,t);if(!l.contains(E))throw new we(re.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);yk(m,E)||m.push(E)}d=new Xn(m),p=l.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,p=l.fieldTransforms;return new mH(new jn(u),d,p)}class om extends dd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof om}}function yH(n,e,t){return new sm({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class pw extends dd{_toFieldTransform(e){return new I1(e.path,new $u)}isEqual(e){return e instanceof pw}}class mw extends dd{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=yH(this,e,!0),r=this.vc.map((o=>ac(o,t))),s=new zl(r);return new I1(e.path,s)}isEqual(e){return e instanceof mw&&Qs(this.vc,e.vc)}}function vH(n,e,t,r){const s=n.Cc(1,e,t);gw("Data must be an object, but it was:",s,r);const o=[],l=jn.empty();po(r,((d,p)=>{const m=yw(e,d,t);p=Nt(p);const y=s.yc(m);if(p instanceof om)o.push(m);else{const E=ac(p,y);E!=null&&(o.push(m),l.set(m,E))}}));const u=new Xn(o);return new hk(l,u,s.fieldTransforms)}function _H(n,e,t,r,s,o){const l=n.Cc(1,e,t),u=[xv(e,r,t)],d=[s];if(o.length%2!=0)throw new we(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)u.push(xv(e,o[E])),d.push(o[E+1]);const p=[],m=jn.empty();for(let E=u.length-1;E>=0;--E)if(!yk(p,u[E])){const I=u[E];let b=d[E];b=Nt(b);const x=l.yc(I);if(b instanceof om)p.push(I);else{const A=ac(b,x);A!=null&&(p.push(I),m.set(I,A))}}const y=new Xn(p);return new hk(m,y,l.fieldTransforms)}function wH(n,e,t,r=!1){return ac(t,n.Cc(r?4:3,e))}function ac(n,e){if(gk(n=Nt(n)))return gw("Unsupported field value:",e,n),mk(n,e);if(n instanceof dd)return(function(r,s){if(!fk(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=ac(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return a$(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:Zf(s.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zf(s.serializer,o)}}if(r instanceof ds)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lr)return{bytesValue:N1(s.serializer,r._byteString)};if(r instanceof kt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Z_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hs)return(function(l,u){return{mapValue:{fields:{[i1]:{stringValue:o1},[Qf]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw u.Sc("VectorValues must only contain numeric values.");return Y_(u.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${$p(r)}`)})(n,e)}function mk(n,e){const t={};return ZP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):po(n,((r,s)=>{const o=ac(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function gk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof ds||n instanceof lr||n instanceof kt||n instanceof dd||n instanceof hs)}function gw(n,e,t){if(!gk(t)||!XP(t)){const r=$p(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function xv(n,e,t){if((e=Nt(e))instanceof rm)return e._internalPath;if(typeof e=="string")return yw(n,e);throw rp("Field path arguments must be of type string or ",n,!1,void 0,t)}const EH=new RegExp("[~\\*/\\[\\]]");function yw(n,e,t){if(e.search(EH)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rm(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rp(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new we(re.INVALID_ARGUMENT,u+n+d)}function yk(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(am("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SH extends vk{data(){return super.data()}}function am(n,e){return typeof e=="string"?yw(n,e):e instanceof rm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vw{}class _w extends vw{}function xH(n,e,...t){let r=[];e instanceof vw&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((d=>d instanceof ww)).length,u=o.filter((d=>d instanceof lm)).length;if(l>1||l>0&&u>0)throw new we(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class lm extends _w{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lm(e,t,r)}_apply(e){const t=this._parse(e);return _k(e._query,t),new go(e.firestore,e.converter,hv(e._query,t))}_parse(e){const t=im(e.firestore);return(function(o,l,u,d,p,m,y){let E;if(p.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new we(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){tI(y,m);const b=[];for(const x of y)b.push(eI(d,o,x));E={arrayValue:{values:b}}}else E=eI(d,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||tI(y,m),E=wH(u,l,y,m==="in"||m==="not-in");return Ut.create(p,m,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function IH(n,e,t){const r=e,s=am("where",n);return lm._create(s,r,t)}class ww extends vw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ww(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Mr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)_k(l,d),l=hv(l,d)})(e._query,t),new go(e.firestore,e.converter,hv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ew extends _w{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ew(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new we(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(o,l)})(e._query,this._field,this._direction);return new go(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new sc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function CH(n,e="asc"){const t=e,r=am("orderBy",n);return Ew._create(r,t)}class Sw extends _w{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Sw(e,t,r)}_apply(e){return new go(e.firestore,e.converter,Xf(e._query,this._limit,this._limitType))}}function RH(n){return Sw._create("limit",n,"F")}function eI(n,e,t){if(typeof(t=Nt(t))=="string"){if(t==="")throw new we(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p1(e)&&t.indexOf("/")!==-1)throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!Ne.isDocumentKey(r))throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gx(n,new Ne(r))}if(t instanceof kt)return gx(n,t._key);throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$p(t)}.`)}function tI(n,e){if(!Array.isArray(n)||n.length===0)throw new we(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _k(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AH{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return po(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Qf].arrayValue?.values?.map((r=>Mt(r.doubleValue)));return new hs(t)}convertGeoPoint(e){return new ds(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const t=no(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);lt(j1(r),9688,{name:e});const s=new Uu(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return s.isEqual(t)||Zs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zo extends vk{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zo._jsonSchema={type:zt("string",Zo._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class lf extends Zo{data(e={}){return super.data(e)}}class bl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new pu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new lf(this._firestore,this._userDataWriter,r.key,r,new pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new lf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new pu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new lf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new pu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,m=-1;return u.type!==0&&(p=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),m=l.indexOf(u.doc.key)),{type:bH(u.type),doc:d,oldIndex:p,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=W_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(n){n=kr(n,kt);const e=kr(n.firestore,fa);return uH(fw(e),n._key).then((t=>xk(e,n,t)))}bl._jsonSchemaVersion="firestore/querySnapshot/1.0",bl._jsonSchema={type:zt("string",bl._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class Ek extends AH{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function Sk(n,e,t){n=kr(n,kt);const r=kr(n.firestore,fa),s=wk(n.converter,e,t);return Tw(r,[pk(im(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Nr.none())])}function PH(n,e,t,...r){n=kr(n,kt);const s=kr(n.firestore,fa),o=im(s);let l;return l=typeof(e=Nt(e))=="string"||e instanceof rm?_H(o,"updateDoc",n._key,e,t,r):vH(o,"updateDoc",n._key,e),Tw(s,[l.toMutation(n._key,Nr.exists(!0))])}function kH(n,e){const t=kr(n.firestore,fa),r=oc(n),s=wk(n.converter,e);return Tw(t,[pk(im(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Nr.exists(!1))]).then((()=>r))}function Tk(n,...e){n=Nt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Zx(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Zx(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,l,u;if(n instanceof kt)l=kr(n.firestore,fa),u=qp(n._key.path),o={next:d=>{e[r]&&e[r](xk(l,n,d))},error:e[r+1],complete:e[r+2]};else{const d=kr(n,go);l=kr(d.firestore,fa),u=d._query;const p=new Ek(l);o={next:m=>{e[r]&&e[r](new bl(l,p,d,m))},error:e[r+1],complete:e[r+2]},TH(n._query)}return(function(p,m,y,E){const I=new lk(E),b=new Z1(m,I,y);return p.asyncQueue.enqueueAndForget((async()=>X1(await Sv(p),b))),()=>{I.Nu(),p.asyncQueue.enqueueAndForget((async()=>J1(await Sv(p),b)))}})(fw(l),u,s,o)}function Tw(n,e){return(function(r,s){const o=new Ki;return r.asyncQueue.enqueueAndForget((async()=>JW(await cH(r),s,o))),o.promise})(fw(n),e)}function xk(n,e,t){const r=t.docs.get(e._key),s=new Ek(n);return new Zo(n,s,e._key,r,new pu(t.hasPendingWrites,t.fromCache),e.converter)}function xw(){return new pw("serverTimestamp")}function NH(...n){return new mw("arrayUnion",n)}(function(e,t=!0){(function(s){tc=s})(ga),ia(new Zi("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new fa(new _B(r.getProvider("auth-internal")),new SB(l,r.getProvider("app-check-internal")),(function(p,m){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(p.options.projectId,m)})(l,s),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),as(rx,sx,e),as(rx,sx,"esm2020")})();const DH={apiKey:"AIzaSyB1z04jNS4gnwWa4VI10cXinj2PBg3KHe0",authDomain:"boulder-gym.firebaseapp.com",projectId:"boulder-gym",storageBucket:"boulder-gym.firebasestorage.app",messagingSenderId:"837049852336",appId:"1:837049852336:web:73b74809c9f120dc75b675",measurementId:"G-PKT03CZKTN"},Iw=GA(DH);pB(Iw);const Yi=hH(Iw),fs=C6(Iw),OH=new Us;async function nI(){const n=fs.currentUser;if(!n)return;const e=oc(Yi,"users",n.uid);(await cm(e)).exists()||await Sk(e,{displayName:n.displayName||n.email?.split("@")[0]||"",email:n.email||null,photoURL:n.photoURL||null,roles:{},createdAt:xw()},{merge:!0})}function rI(n){switch(n){case"auth/invalid-email":return"Invalid email address.";case"auth/missing-password":return"Please enter your password.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/email-already-in-use":return"That email is already in use.";case"auth/invalid-credential":case"auth/wrong-password":return"Wrong email or password.";case"auth/popup-closed-by-user":return"Popup closed before completing sign in.";default:return"Something went wrong. Please try again."}}function MH({onLogin:n}){const[e,t]=S.useState("signin"),[r,s]=S.useState(""),[o,l]=S.useState(""),[u,d]=S.useState(""),[p,m]=S.useState(!1),[y,E]=S.useState(null);async function I(){try{m(!0),E(null);const x=await Mz(fs,OH);await nI(),n(x.user)}catch(x){E(rI(x?.code))}finally{m(!1)}}async function b(x){x.preventDefault();try{m(!0),E(null);let A;e==="signin"?A=await dz(fs,r,o):(A=await uz(fs,r,o),u.trim()&&await fz(A.user,{displayName:u.trim()})),await nI(),n(A.user)}catch(A){E(rI(A?.code))}finally{m(!1)}}return v.jsxs("div",{className:"max-w-md mx-auto rounded-2xl shadow-sm border border-gray-200 dark:border-gray-800 bg-white dark:bg-zinc-900 p-6",children:[v.jsx("h1",{className:"text-xl font-semibold mb-1",children:e==="signin"?"Sign in":"Create an account"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Use Google or email/password."}),y&&v.jsx("div",{className:"mb-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 rounded-lg p-2",children:y}),v.jsx("button",{onClick:I,disabled:p,className:"w-full mb-4 px-3 py-2 rounded-xl text-sm font-medium border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"Continue with Google"}),v.jsxs("form",{onSubmit:b,className:"space-y-3",children:[e==="signup"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm mb-1",children:"Display name"}),v.jsx("input",{type:"text",value:u,onChange:x=>d(x.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"Jane Doe"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm mb-1",children:"Email"}),v.jsx("input",{type:"email",value:r,onChange:x=>s(x.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"you@example.com",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm mb-1",children:"Password"}),v.jsx("input",{type:"password",value:o,onChange:x=>l(x.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"",required:!0})]}),v.jsx("button",{type:"submit",disabled:p,className:"w-full px-3 py-2 rounded-xl text-sm font-medium bg-black text-white dark:bg-white dark:text-black",children:p?e==="signin"?"Signing in":"Creating":e==="signin"?"Sign in":"Create account"})]}),v.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-3",children:e==="signin"?v.jsxs(v.Fragment,{children:["No account yet?"," ",v.jsx("button",{className:"underline",onClick:()=>t("signup"),children:"Create one"})]}):v.jsxs(v.Fragment,{children:["Already have an account?"," ",v.jsx("button",{className:"underline",onClick:()=>t("signin"),children:"Sign in"})]})})]})}const sI={display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f5f6fa",fontFamily:"Arial, sans-serif"},iI={backgroundColor:"#fff",borderRadius:"12px",padding:"2rem",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"320px",transition:"transform 0.2s ease"},LH={width:"96px",height:"96px",borderRadius:"50%",objectFit:"cover",marginBottom:"1rem"},VH={fontSize:"1.4rem",fontWeight:600,marginBottom:"0.25rem",color:"#222"},jH={fontSize:"0.95rem",color:"#555",marginBottom:"1rem"},FH={fontSize:"0.9rem",color:"#666"},UH={fontWeight:500,color:"#333"},zH={color:"#555",fontSize:"1rem"};function BH(){const[n,e]=S.useState(null);return S.useEffect(()=>{const t=yb(fs,r=>{e(r)});return()=>t()},[]),n?v.jsx("div",{style:sI,children:v.jsxs("div",{style:{...iI,cursor:"default",transform:"translateY(0)"},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-3px)"},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)"},children:[v.jsx("img",{src:n.photoURL||"https://via.placeholder.com/96?text=User",alt:n.displayName??"User photo",style:LH}),v.jsx("h2",{style:VH,children:n.displayName}),v.jsx("p",{style:jH,children:n.email}),v.jsxs("div",{style:FH,children:[v.jsx("span",{style:UH,children:"Account created:"})," ",n.metadata.creationTime?new Date(n.metadata.creationTime).toLocaleString():"Unknown"]})]})}):v.jsx("div",{style:sI,children:v.jsx("div",{style:iI,children:v.jsx("p",{style:zH,children:"Loading user info..."})})})}function Iv({children:n}){return v.jsx("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-zinc-900 p-4 shadow-sm",children:n})}function oI({title:n,right:e,children:t}){return v.jsxs("section",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h2",{className:"text-base font-semibold tracking-tight",children:n}),e]}),v.jsx(Iv,{children:t})]})}function $H(){const[n,e]=S.useState(fs.currentUser),[t,r]=S.useState(!fs.currentUser);return S.useEffect(()=>{const s=yb(fs,o=>{e(o),r(!1)});return()=>s()},[]),{user:n,loading:t}}function WH(n){const[e,t]=S.useState(null);return S.useEffect(()=>{if(!n){t(null);return}const r=oc(Yi,"users",n);cm(r).then(s=>t(s.exists()?s.data():null))},[n]),{profile:e}}function HH(n){const[e,t]=S.useState([]),[r,s]=S.useState(!!n);return S.useEffect(()=>{if(!n)return;const o=xH(Tv(Yi,"signups"),IH("uid","==",n),CH("createdAt","desc"),RH(5)),l=Tk(o,async u=>{const d=[];for(const p of u.docs){const m=p.get("assignmentId"),y=oc(Yi,"assignments",m),E=await cm(y);E.exists()&&d.push({id:E.id,data:E.data()})}t(d),s(!1)});return()=>l()},[n]),{items:e,loading:r}}async function GH(n){const e=oc(Yi,"users",n.uid);(await cm(e)).exists()||await Sk(e,{displayName:n.displayName||n.email?.split("@")[0]||"",email:n.email||null,photoURL:n.photoURL||null,roles:{},createdAt:xw()},{merge:!0})}function qH({onLogin:n}={}){const{user:e,loading:t}=$H(),{profile:r}=WH(e?.uid),{items:s}=HH(e?.uid);Vs.useEffect(()=>{e&&n&&n(e)},[e,n]);const[o,l]=S.useState(!1),[u,d]=S.useState(null),[p,m]=S.useState(!1);S.useEffect(()=>{e&&GH(e)},[e]);async function y(){try{d(null),l(!0),await vb(fs)}catch(I){d(I?.message??"Failed to sign out.")}finally{l(!1)}}if(t)return v.jsx("div",{className:"p-6 max-w-xl mx-auto",children:v.jsx(Iv,{children:v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Loading your session"})})});if(!e)return v.jsx("div",{className:"p-6 max-w-xl mx-auto",children:v.jsx(MH,{onLogin:n??(()=>{})})});if(p)return v.jsxs("div",{className:"p-6 space-y-6",children:[v.jsxs("header",{className:"flex items-center justify-between",children:[v.jsx("h1",{className:"text-2xl font-bold",children:"Your Profile"}),v.jsx("button",{onClick:()=>m(!1),className:"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"Back"})]}),v.jsx(BH,{})]});const E=r?.displayName||e.displayName||e.email||"there";return v.jsxs("div",{className:"p-6 space-y-6",children:[v.jsxs("header",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",E," "]}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Youre signed in with Firebase Auth."})]}),v.jsx("button",{onClick:y,disabled:o,className:"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800 disabled:opacity-60","aria-label":"Sign out",children:o?"Signing out":"Sign out"})]}),u&&v.jsx(Iv,{children:v.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:u})}),v.jsx(oI,{title:"Your account",children:v.jsx("button",{onClick:()=>m(!0),className:"w-full rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"View Profile"})}),v.jsx(oI,{title:"Your latest signups",children:s.length===0?v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No recent signups yet."}):v.jsx("ul",{className:"space-y-2",children:s.map(({id:I,data:b})=>v.jsx("li",{className:"flex items-center justify-between",children:v.jsxs("div",{children:[v.jsx("p",{className:"font-medium",children:b.title}),b.location&&v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.location})]})},I))})})]})}function KH(){const[n,e]=S.useState(null),[t,r]=S.useState([]),[s,o]=S.useState(null),[l,u]=S.useState("gallery"),[d,p]=S.useState("");S.useEffect(()=>{if(!n)return;const V=Tk(Tv(Yi,"routes"),z=>{const G=[];z.forEach(J=>{const Z=J.data(),P=Z.reviews||[],R=P.length,N=R===0?0:Number((P.reduce((O,M)=>O+M.rating,0)/R).toFixed(1));G.push({id:J.id,name:Z.name,grade:Z.grade,color:Z.color,imageUrl:Z.imageUrl,description:Z.description,setter:Z.setter,dateSet:Z.dateSet,reviews:P,totalReviews:R,averageRating:N})}),r(G)});return()=>V()},[n]);const m=async V=>{try{await kH(Tv(Yi,"routes"),{...V,createdAt:xw()}),u("gallery")}catch(z){console.error("Error adding route:",z)}},y=async(V,z)=>{if(n)try{const G={...z,id:Date.now().toString(),author:n.displayName||"Anonymous",date:new Date().toISOString()},J=oc(Yi,"routes",V);await PH(J,{reviews:NH(G)})}catch(G){console.error("Error adding review:",G)}},E=V=>{e(V)},I=()=>{vb(fs).then(()=>{e(null),u("gallery"),o(null)}).catch(V=>{console.error("Sign out error:",V)})},b=d?t.filter(V=>V.grade===d):t;if(!n)return v.jsx(qH,{onLogin:E});const x=V=>{o(V)},A=()=>{o(null)},j=()=>{o(null)};return l==="add"?v.jsxs("div",{className:"min-h-screen bg-background",children:[v.jsx("header",{className:"sticky top-0 z-50 bg-card border-b",children:v.jsx("div",{className:"container mx-auto px-4 py-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center",children:v.jsx(jg,{className:"size-4 text-primary-foreground"})}),v.jsx("h1",{className:"text-xl font-medium",children:"Boulder Routes"})]}),v.jsx("div",{className:"flex items-center gap-3",children:v.jsxs(k0,{children:[v.jsx(N0,{asChild:!0,children:v.jsxs(Rn,{variant:"ghost",className:"gap-2",size:"sm",children:[v.jsx(Mh,{className:"size-6",children:v.jsx(Lh,{className:"text-xs",children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),v.jsx("span",{className:"hidden sm:inline",children:n.name})]})}),v.jsxs(D0,{align:"end",className:"w-56",children:[v.jsxs("div",{className:"flex items-center gap-2 p-2",children:[v.jsx(Mh,{className:"size-8",children:v.jsx(Lh,{children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),v.jsxs("div",{className:"flex flex-col space-y-1",children:[v.jsx("p",{className:"text-sm font-medium",children:n.name}),v.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]}),v.jsx(M0,{}),v.jsxs(O0,{onClick:I,className:"gap-2 text-destructive",children:[v.jsx(WS,{className:"size-4"}),"Sign out"]})]})]})})]})})}),v.jsx("main",{className:"container mx-auto px-4 py-6",children:v.jsx(CV,{onSave:m,onCancel:()=>u("gallery")})})]}):v.jsxs("div",{className:"h-screen bg-background flex flex-col landscape:h-full",children:[v.jsx("header",{className:"flex-shrink-0 z-50 bg-card border-b landscape:sticky landscape:top-0",children:v.jsx("div",{className:"container mx-auto px-4 py-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center",children:v.jsx(jg,{className:"size-4 text-primary-foreground"})}),v.jsx("h1",{className:"text-xl font-medium",children:"Boulder Routes"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Rn,{onClick:()=>u("add"),size:"sm",className:"gap-2",children:[v.jsx(oD,{className:"size-4"}),v.jsx("span",{className:"hidden sm:inline",children:"Add Route"})]}),v.jsxs(k0,{children:[v.jsx(N0,{asChild:!0,children:v.jsxs(Rn,{variant:"ghost",className:"gap-2",size:"sm",children:[v.jsx(Mh,{className:"size-6",children:v.jsx(Lh,{className:"text-xs",children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),v.jsx("span",{className:"hidden sm:inline",children:n.name})]})}),v.jsxs(D0,{align:"end",className:"w-56",children:[v.jsxs("div",{className:"flex items-center gap-2 p-2",children:[v.jsx(Mh,{className:"size-8",children:v.jsx(Lh,{children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),v.jsxs("div",{className:"flex flex-col space-y-1",children:[v.jsx("p",{className:"text-sm font-medium",children:n.name}),v.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]}),v.jsx(M0,{}),v.jsxs(O0,{onClick:I,className:"gap-2 text-destructive",children:[v.jsx(WS,{className:"size-4"}),"Sign out"]})]})]})]})]})})}),v.jsxs("main",{className:"flex-1 overflow-hidden",children:[v.jsx("div",{className:"landscape:block hidden h-full",children:v.jsxs(YF,{direction:"horizontal",className:"h-full w-full",children:[v.jsx(W0,{defaultSize:35,minSize:25,maxSize:50,className:"h-full",children:v.jsx("div",{className:"h-full overflow-hidden",children:v.jsx(dV,{routes:b,onRouteClick:x,filterGrade:d,onFilterChange:p,selectedRouteId:s?.id})})}),v.jsx(XF,{withHandle:!0}),v.jsx(W0,{defaultSize:65,minSize:50,className:"h-full",children:v.jsx("div",{className:"h-full overflow-hidden",children:s?v.jsx(sR,{className:"h-full w-full",children:v.jsx("div",{className:"px-6 py-6",children:v.jsx(I0,{route:s,onBack:j,onAddReview:V=>y(s.id,V),currentUser:n,showBackButton:!1})})},s.id):v.jsx("div",{className:"flex items-center justify-center h-full w-full",children:v.jsxs("div",{className:"text-center space-y-3",children:[v.jsx("div",{className:"size-16 bg-muted rounded-full flex items-center justify-center mx-auto",children:v.jsx(jg,{className:"size-8"})}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("h3",{className:"font-medium",children:"No route selected"}),v.jsx("p",{className:"text-sm",children:"Select a route from the list to view details"})]})]})})})})]})}),v.jsxs("div",{className:"landscape:hidden h-full",children:[v.jsx("div",{className:"h-full overflow-auto",children:v.jsx("div",{className:"container mx-auto px-4 py-6",children:v.jsx(HL,{routes:b,onRouteClick:x,filterGrade:d,onFilterChange:p,selectedRouteId:s?.id})})}),s&&v.jsx(E4,{open:!0,onOpenChange:V=>!V&&A(),children:v.jsxs(x4,{side:"right",className:"w-full sm:max-w-2xl p-0 overflow-auto landscape:hidden",children:[v.jsxs(I4,{className:"sr-only",children:[v.jsx(C4,{children:s.name}),v.jsxs(R4,{children:["Route details for ",s.name," - ",s.grade]})]}),v.jsx("div",{className:"p-6",children:v.jsx(I0,{route:s,onBack:A,onAddReview:V=>y(s.id,V),currentUser:n,showBackButton:!0})})]})})]})]})]})}FN.createRoot(document.getElementById("root")).render(v.jsx(S.StrictMode,{children:v.jsx(KH,{})}));
