function jO(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function _C(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cy={exports:{}},pu={},uy={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT;function FO(){if(MT)return Ge;MT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function R(B,ne,te){this.props=B,this.context=ne,this.refs=x,this.updater=te||I}R.prototype.isReactComponent={},R.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},R.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function L(){}L.prototype=R.prototype;function V(B,ne,te){this.props=B,this.context=ne,this.refs=x,this.updater=te||I}var U=V.prototype=new L;U.constructor=V,b(U,R.prototype),U.isPureReactComponent=!0;var W=Array.isArray,Y=Object.prototype.hasOwnProperty,X={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(B,ne,te){var se,he={},ce=null,q=null;if(ne!=null)for(se in ne.ref!==void 0&&(q=ne.ref),ne.key!==void 0&&(ce=""+ne.key),ne)Y.call(ne,se)&&!k.hasOwnProperty(se)&&(he[se]=ne[se]);var oe=arguments.length-2;if(oe===1)he.children=te;else if(1<oe){for(var ye=Array(oe),Ie=0;Ie<oe;Ie++)ye[Ie]=arguments[Ie+2];he.children=ye}if(B&&B.defaultProps)for(se in oe=B.defaultProps,oe)he[se]===void 0&&(he[se]=oe[se]);return{$$typeof:n,type:B,key:ce,ref:q,props:he,_owner:X.current}}function N(B,ne){return{$$typeof:n,type:B.type,key:ne,ref:B.ref,props:B.props,_owner:B._owner}}function M(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function O(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return ne[te]})}var F=/\/+/g;function D(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?O(""+B.key):ne.toString(36)}function me(B,ne,te,se,he){var ce=typeof B;(ce==="undefined"||ce==="boolean")&&(B=null);var q=!1;if(B===null)q=!0;else switch(ce){case"string":case"number":q=!0;break;case"object":switch(B.$$typeof){case n:case e:q=!0}}if(q)return q=B,he=he(q),B=se===""?"."+D(q,0):se,W(he)?(te="",B!=null&&(te=B.replace(F,"$&/")+"/"),me(he,ne,te,"",function(Ie){return Ie})):he!=null&&(M(he)&&(he=N(he,te+(!he.key||q&&q.key===he.key?"":(""+he.key).replace(F,"$&/")+"/")+B)),ne.push(he)),1;if(q=0,se=se===""?".":se+":",W(B))for(var oe=0;oe<B.length;oe++){ce=B[oe];var ye=se+D(ce,oe);q+=me(ce,ne,te,ye,he)}else if(ye=v(B),typeof ye=="function")for(B=ye.call(B),oe=0;!(ce=B.next()).done;)ce=ce.value,ye=se+D(ce,oe++),q+=me(ce,ne,te,ye,he);else if(ce==="object")throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return q}function ve(B,ne,te){if(B==null)return B;var se=[],he=0;return me(B,se,"","",function(ce){return ne.call(te,ce,he++)}),se}function pe(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var Ee={current:null},H={transition:null},ee={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:H,ReactCurrentOwner:X};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Ge.Children={map:ve,forEach:function(B,ne,te){ve(B,function(){ne.apply(this,arguments)},te)},count:function(B){var ne=0;return ve(B,function(){ne++}),ne},toArray:function(B){return ve(B,function(ne){return ne})||[]},only:function(B){if(!M(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ge.Component=R,Ge.Fragment=t,Ge.Profiler=s,Ge.PureComponent=V,Ge.StrictMode=r,Ge.Suspense=d,Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Ge.act=ue,Ge.cloneElement=function(B,ne,te){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var se=b({},B.props),he=B.key,ce=B.ref,q=B._owner;if(ne!=null){if(ne.ref!==void 0&&(ce=ne.ref,q=X.current),ne.key!==void 0&&(he=""+ne.key),B.type&&B.type.defaultProps)var oe=B.type.defaultProps;for(ye in ne)Y.call(ne,ye)&&!k.hasOwnProperty(ye)&&(se[ye]=ne[ye]===void 0&&oe!==void 0?oe[ye]:ne[ye])}var ye=arguments.length-2;if(ye===1)se.children=te;else if(1<ye){oe=Array(ye);for(var Ie=0;Ie<ye;Ie++)oe[Ie]=arguments[Ie+2];se.children=oe}return{$$typeof:n,type:B.type,key:he,ref:ce,props:se,_owner:q}},Ge.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},Ge.createElement=A,Ge.createFactory=function(B){var ne=A.bind(null,B);return ne.type=B,ne},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(B){return{$$typeof:c,render:B}},Ge.isValidElement=M,Ge.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:pe}},Ge.memo=function(B,ne){return{$$typeof:f,type:B,compare:ne===void 0?null:ne}},Ge.startTransition=function(B){var ne=H.transition;H.transition={};try{B()}finally{H.transition=ne}},Ge.unstable_act=ue,Ge.useCallback=function(B,ne){return Ee.current.useCallback(B,ne)},Ge.useContext=function(B){return Ee.current.useContext(B)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(B){return Ee.current.useDeferredValue(B)},Ge.useEffect=function(B,ne){return Ee.current.useEffect(B,ne)},Ge.useId=function(){return Ee.current.useId()},Ge.useImperativeHandle=function(B,ne,te){return Ee.current.useImperativeHandle(B,ne,te)},Ge.useInsertionEffect=function(B,ne){return Ee.current.useInsertionEffect(B,ne)},Ge.useLayoutEffect=function(B,ne){return Ee.current.useLayoutEffect(B,ne)},Ge.useMemo=function(B,ne){return Ee.current.useMemo(B,ne)},Ge.useReducer=function(B,ne,te){return Ee.current.useReducer(B,ne,te)},Ge.useRef=function(B){return Ee.current.useRef(B)},Ge.useState=function(B){return Ee.current.useState(B)},Ge.useSyncExternalStore=function(B,ne,te){return Ee.current.useSyncExternalStore(B,ne,te)},Ge.useTransition=function(){return Ee.current.useTransition()},Ge.version="18.3.1",Ge}var LT;function kp(){return LT||(LT=1,uy.exports=FO()),uy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function UO(){if(VT)return pu;VT=1;var n=kp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,f){var m,g={},v=null,I=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(I=d.ref);for(m in d)r.call(d,m)&&!o.hasOwnProperty(m)&&(g[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:c,key:v,ref:I,props:g,_owner:s.current}}return pu.Fragment=t,pu.jsx=l,pu.jsxs=l,pu}var jT;function zO(){return jT||(jT=1,cy.exports=UO()),cy.exports}var _=zO(),S=kp();const Ks=_C(S),Pp=jO({__proto__:null,default:Ks},[S]);var Gh={},dy={exports:{}},zn={},hy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function BO(){return FT||(FT=1,(function(n){function e(H,ee){var ue=H.length;H.push(ee);e:for(;0<ue;){var B=ue-1>>>1,ne=H[B];if(0<s(ne,ee))H[B]=ee,H[ue]=ne,ue=B;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],ue=H.pop();if(ue!==ee){H[0]=ue;e:for(var B=0,ne=H.length,te=ne>>>1;B<te;){var se=2*(B+1)-1,he=H[se],ce=se+1,q=H[ce];if(0>s(he,ue))ce<ne&&0>s(q,he)?(H[B]=q,H[ce]=ue,B=ce):(H[B]=he,H[se]=ue,B=se);else if(ce<ne&&0>s(q,ue))H[B]=q,H[ce]=ue,B=ce;else break e}}return ee}function s(H,ee){var ue=H.sortIndex-ee.sortIndex;return ue!==0?ue:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],f=[],m=1,g=null,v=3,I=!1,b=!1,x=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(H){for(var ee=t(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=H)r(f),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(f)}}function W(H){if(x=!1,U(H),!b)if(t(d)!==null)b=!0,pe(Y);else{var ee=t(f);ee!==null&&Ee(W,ee.startTime-H)}}function Y(H,ee){b=!1,x&&(x=!1,L(A),A=-1),I=!0;var ue=v;try{for(U(ee),g=t(d);g!==null&&(!(g.expirationTime>ee)||H&&!O());){var B=g.callback;if(typeof B=="function"){g.callback=null,v=g.priorityLevel;var ne=B(g.expirationTime<=ee);ee=n.unstable_now(),typeof ne=="function"?g.callback=ne:g===t(d)&&r(d),U(ee)}else r(d);g=t(d)}if(g!==null)var te=!0;else{var se=t(f);se!==null&&Ee(W,se.startTime-ee),te=!1}return te}finally{g=null,v=ue,I=!1}}var X=!1,k=null,A=-1,N=5,M=-1;function O(){return!(n.unstable_now()-M<N)}function F(){if(k!==null){var H=n.unstable_now();M=H;var ee=!0;try{ee=k(!0,H)}finally{ee?D():(X=!1,k=null)}}else X=!1}var D;if(typeof V=="function")D=function(){V(F)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ve=me.port2;me.port1.onmessage=F,D=function(){ve.postMessage(null)}}else D=function(){R(F,0)};function pe(H){k=H,X||(X=!0,D())}function Ee(H,ee){A=R(function(){H(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){b||I||(b=!0,pe(Y))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(H){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var ue=v;v=ee;try{return H()}finally{v=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=v;v=H;try{return ee()}finally{v=ue}},n.unstable_scheduleCallback=function(H,ee,ue){var B=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?B+ue:B):ue=B,H){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ue+ne,H={id:m++,callback:ee,priorityLevel:H,startTime:ue,expirationTime:ne,sortIndex:-1},ue>B?(H.sortIndex=ue,e(f,H),t(d)===null&&H===t(f)&&(x?(L(A),A=-1):x=!0,Ee(W,ue-B))):(H.sortIndex=ne,e(d,H),b||I||(b=!0,pe(Y))),H},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(H){var ee=v;return function(){var ue=v;v=ee;try{return H.apply(this,arguments)}finally{v=ue}}}})(fy)),fy}var UT;function $O(){return UT||(UT=1,hy.exports=BO()),hy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function WO(){if(zT)return zn;zT=1;var n=kp(),e=$O();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function v(i){return d.call(g,i)?!0:d.call(m,i)?!1:f.test(i)?g[i]=!0:(m[i]=!0,!1)}function I(i,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,a,u,p){if(a===null||typeof a>"u"||I(i,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function x(i,a,u,p,y,w,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=C}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){R[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];R[a]=new x(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){R[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){R[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){R[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){R[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){R[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){R[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){R[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(L,V);R[a]=new x(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(L,V);R[a]=new x(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(L,V);R[a]=new x(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){R[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),R.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){R[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function U(i,a,u,p){var y=R.hasOwnProperty(a)?R[a]:null;(y!==null?y.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,u,y,p)&&(u=null),p||y===null?v(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):y.mustUseProperty?i[y.propertyName]=u===null?y.type===3?!1:"":u:(a=y.attributeName,p=y.attributeNamespace,u===null?i.removeAttribute(a):(y=y.type,u=y===3||y===4&&u===!0?"":""+u,p?i.setAttributeNS(p,a,u):i.setAttribute(a,u))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),X=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),H=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,B;function ne(i){if(B===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+i}var te=!1;function se(i,a){if(!i||te)return"";te=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(J){var p=J}Reflect.construct(i,[],a)}else{try{a.call()}catch(J){p=J}i.call(a.prototype)}else{try{throw Error()}catch(J){p=J}i()}}catch(J){if(J&&p&&typeof J.stack=="string"){for(var y=J.stack.split(`
`),w=p.stack.split(`
`),C=y.length-1,j=w.length-1;1<=C&&0<=j&&y[C]!==w[j];)j--;for(;1<=C&&0<=j;C--,j--)if(y[C]!==w[j]){if(C!==1||j!==1)do if(C--,j--,0>j||y[C]!==w[j]){var z=`
`+y[C].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=C&&0<=j);break}}}finally{te=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ne(i):""}function he(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=se(i.type,!1),i;case 11:return i=se(i.type.render,!1),i;case 1:return i=se(i.type,!0),i;default:return""}}function ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case X:return"Portal";case N:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case M:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ve:return a=i.displayName||null,a!==null?a:ce(i.type)||"Memo";case pe:a=i._payload,i=i._init;try{return ce(i(a))}catch{}}return null}function q(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(a);case 8:return a===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ye(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ie(i){var a=ye(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,w=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){p=""+C,w.call(this,C)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function je(i){i._valueTracker||(i._valueTracker=Ie(i))}function $e(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return i&&(p=ye(i)?i.checked?"true":"false":i.value),i=p,i!==u?(a.setValue(i),!0):!1}function Ue(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ft(i,a){var u=a.checked;return ue({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Mn(i,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=oe(a.value!=null?a.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Rn(i,a){a=a.checked,a!=null&&U(i,"checked",a,!1)}function bn(i,a){Rn(i,a);var u=oe(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?It(i,a.type,u):a.hasOwnProperty("defaultValue")&&It(i,a.type,oe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Ft(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function It(i,a,u){(a!=="number"||Ue(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var xt=Array.isArray;function rn(i,a,u,p){if(i=i.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=a.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&p&&(i[u].defaultSelected=!0)}else{for(u=""+oe(u),a=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function vi(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ao(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(xt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:oe(u)}}function Dd(i,a){var u=oe(a.value),p=oe(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function wi(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Ic(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Va(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Ic(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ei,Od=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,y){MSApp.execUnsafeLocalFunction(function(){return i(a,u,p,y)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Ei=Ei||document.createElement("div"),Ei.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Ei.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function ko(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Md=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(i){Md.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Si[a]=Si[i]})});function Ti(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Si.hasOwnProperty(i)&&Si[i]?(""+a).trim():a+"px"}function ja(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,y=Ti(u,a[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,y):i[u]=y}}var xc=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tr(i,a){if(a){if(xc[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Fa(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ii=null;function Ua(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var As=null,ks=null,At=null;function Cc(i){if(i=Zc(i)){if(typeof As!="function")throw Error(t(280));var a=i.stateNode;a&&(a=lh(a),As(i.stateNode,i.type,a))}}function xi(i){ks?At?At.push(i):At=[i]:ks=i}function Ci(){if(ks){var i=ks,a=At;if(At=ks=null,Cc(i),a)for(i=0;i<a.length;i++)Cc(a[i])}}function Ld(i,a){return i(a)}function Vd(){}var Gr=!1;function jd(i,a,u){if(Gr)return i(a,u);Gr=!0;try{return Ld(i,a,u)}finally{Gr=!1,(ks!==null||At!==null)&&(Vd(),Ci())}}function Po(i,a){var u=i.stateNode;if(u===null)return null;var p=lh(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Ri=!1;if(c)try{var bi={};Object.defineProperty(bi,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",bi,bi),window.removeEventListener("test",bi,bi)}catch{Ri=!1}function Fd(i,a,u,p,y,w,C,j,z){var J=Array.prototype.slice.call(arguments,3);try{a.apply(u,J)}catch(le){this.onError(le)}}var Ps=!1,Kr=null,za=!1,ar=null,Ud={onError:function(i){Ps=!0,Kr=i}};function zd(i,a,u,p,y,w,C,j,z){Ps=!1,Kr=null,Fd.apply(Ud,arguments)}function Rc(i,a,u,p,y,w,C,j,z){if(zd.apply(this,arguments),Ps){if(Ps){var J=Kr;Ps=!1,Kr=null}else throw Error(t(198));za||(za=!0,ar=J)}}function Ir(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function bc(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Bd(i){if(Ir(i)!==i)throw Error(t(188))}function $d(i){var a=i.alternate;if(!a){if(a=Ir(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,p=a;;){var y=u.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===u)return Bd(y),i;if(w===p)return Bd(y),a;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=y,p=w;else{for(var C=!1,j=y.child;j;){if(j===u){C=!0,u=y,p=w;break}if(j===p){C=!0,p=y,u=w;break}j=j.sibling}if(!C){for(j=w.child;j;){if(j===u){C=!0,u=w,p=y;break}if(j===p){C=!0,p=w,u=y;break}j=j.sibling}if(!C)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function Wd(i){return i=$d(i),i!==null?No(i):null}function No(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=No(i);if(a!==null)return a;i=i.sibling}return null}var Ac=e.unstable_scheduleCallback,Ba=e.unstable_cancelCallback,Do=e.unstable_shouldYield,Ns=e.unstable_requestPaint,gt=e.unstable_now,Um=e.unstable_getCurrentPriorityLevel,$a=e.unstable_ImmediatePriority,kc=e.unstable_UserBlockingPriority,Oo=e.unstable_NormalPriority,Pc=e.unstable_LowPriority,Wa=e.unstable_IdlePriority,Mo=null,Wn=null;function Hd(i){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(Mo,i,void 0,(i.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:Lo,Qr=Math.log,lr=Math.LN2;function Lo(i){return i>>>=0,i===0?32:31-(Qr(i)/lr|0)|0}var Yr=64,Ai=4194304;function ot(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ds(i,a){var u=i.pendingLanes;if(u===0)return 0;var p=0,y=i.suspendedLanes,w=i.pingedLanes,C=u&268435455;if(C!==0){var j=C&~y;j!==0?p=ot(j):(w&=C,w!==0&&(p=ot(w)))}else C=u&~y,C!==0?p=ot(C):w!==0&&(p=ot(w));if(p===0)return 0;if(a!==0&&a!==p&&(a&y)===0&&(y=p&-p,w=a&-a,y>=w||y===16&&(w&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)u=31-Hn(a),y=1<<u,p|=i[u],a&=~y;return p}function Vo(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jo(i,a){for(var u=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,w=i.pendingLanes;0<w;){var C=31-Hn(w),j=1<<C,z=y[C];z===-1?((j&u)===0||(j&p)!==0)&&(y[C]=Vo(j,a)):z<=a&&(i.expiredLanes|=j),w&=~j}}function Nc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Dc(){var i=Yr;return Yr<<=1,(Yr&4194240)===0&&(Yr=64),i}function Oc(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function Fo(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Hn(a),i[a]=u}function zm(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var y=31-Hn(u),w=1<<y;a[y]=0,p[y]=-1,i[y]=-1,u&=~w}}function Mc(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var p=31-Hn(u),y=1<<p;y&a|i[p]&a&&(i[p]|=a),u&=~y}}var Xe=0;function Xr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Lc,Ha,Vc,jc,Fc,Jr=!1,qa=[],Zr=null,es=null,sn=null,Uo=new Map,Os=new Map,qn=[],qd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ki(i,a){switch(i){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":Uo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(a.pointerId)}}function xr(i,a,u,p,y,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},a!==null&&(a=Zc(a),a!==null&&Ha(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function Gd(i,a,u,p,y){switch(a){case"focusin":return Zr=xr(Zr,i,a,u,p,y),!0;case"dragenter":return es=xr(es,i,a,u,p,y),!0;case"mouseover":return sn=xr(sn,i,a,u,p,y),!0;case"pointerover":var w=y.pointerId;return Uo.set(w,xr(Uo.get(w)||null,i,a,u,p,y)),!0;case"gotpointercapture":return w=y.pointerId,Os.set(w,xr(Os.get(w)||null,i,a,u,p,y)),!0}return!1}function Ga(i){var a=Wo(i.target);if(a!==null){var u=Ir(a);if(u!==null){if(a=u.tag,a===13){if(a=bc(u),a!==null){i.blockedOn=a,Fc(i.priority,function(){Vc(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ht(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Ka(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Ii=p,u.target.dispatchEvent(p),Ii=null}else return a=Zc(u),a!==null&&Ha(a),i.blockedOn=u,!1;a.shift()}return!0}function Kd(i,a,u){ht(i)&&u.delete(a)}function Bm(){Jr=!1,Zr!==null&&ht(Zr)&&(Zr=null),es!==null&&ht(es)&&(es=null),sn!==null&&ht(sn)&&(sn=null),Uo.forEach(Kd),Os.forEach(Kd)}function Pi(i,a){i.blockedOn===a&&(i.blockedOn=null,Jr||(Jr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bm)))}function Ni(i){function a(y){return Pi(y,i)}if(0<qa.length){Pi(qa[0],i);for(var u=1;u<qa.length;u++){var p=qa[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Zr!==null&&Pi(Zr,i),es!==null&&Pi(es,i),sn!==null&&Pi(sn,i),Uo.forEach(a),Os.forEach(a),u=0;u<qn.length;u++)p=qn[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<qn.length&&(u=qn[0],u.blockedOn===null);)Ga(u),u.blockedOn===null&&qn.shift()}var Ms=W.ReactCurrentBatchConfig,Ls=!0;function ts(i,a,u,p){var y=Xe,w=Ms.transition;Ms.transition=null;try{Xe=1,Uc(i,a,u,p)}finally{Xe=y,Ms.transition=w}}function Qd(i,a,u,p){var y=Xe,w=Ms.transition;Ms.transition=null;try{Xe=4,Uc(i,a,u,p)}finally{Xe=y,Ms.transition=w}}function Uc(i,a,u,p){if(Ls){var y=Ka(i,a,u,p);if(y===null)Zm(i,a,p,ns,u),ki(i,p);else if(Gd(y,i,a,u,p))p.stopPropagation();else if(ki(i,p),a&4&&-1<qd.indexOf(i)){for(;y!==null;){var w=Zc(y);if(w!==null&&Lc(w),w=Ka(i,a,u,p),w===null&&Zm(i,a,p,ns,u),w===y)break;y=w}y!==null&&p.stopPropagation()}else Zm(i,a,p,null,u)}}var ns=null;function Ka(i,a,u,p){if(ns=null,i=Ua(p),i=Wo(i),i!==null)if(a=Ir(i),a===null)i=null;else if(u=a.tag,u===13){if(i=bc(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return ns=i,null}function Qa(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Um()){case $a:return 1;case kc:return 4;case Oo:case Pc:return 16;case Wa:return 536870912;default:return 16}default:return 16}}var Gn=null,Ya=null,Vs=null;function Yd(){if(Vs)return Vs;var i,a=Ya,u=a.length,p,y="value"in Gn?Gn.value:Gn.textContent,w=y.length;for(i=0;i<u&&a[i]===y[i];i++);var C=u-i;for(p=1;p<=C&&a[u-p]===y[w-p];p++);return Vs=y.slice(i,1<p?1-p:void 0)}function zo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function rs(){return!0}function zc(){return!1}function pn(i){function a(u,p,y,w,C){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(u=i[j],this[j]=u?u(w):w[j]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?rs:zc,this.isPropagationStopped=zc,this}return ue(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),a}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=pn(ss),Di=ue({},ss,{view:0,detail:0}),Xa=pn(Di),Ja,Za,Kn,$o=ue({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ze,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Kn&&(Kn&&i.type==="mousemove"?(Ja=i.screenX-Kn.screenX,Za=i.screenY-Kn.screenY):Za=Ja=0,Kn=i),Ja)},movementY:function(i){return"movementY"in i?i.movementY:Za}}),Bc=pn($o),Xd=ue({},$o,{dataTransfer:0}),Jd=pn(Xd),el=ue({},Di,{relatedTarget:0}),on=pn(el),Zd=ue({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=pn(Zd),Oi=ue({},ss,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=pn(Oi),E=ue({},ss,{data:0}),T=pn(E),P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Z[i])?!!a[i]:!1}function ze(){return ge}var Mt=ue({},Di,{key:function(i){if(i.key){var a=P[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=zo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?K[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ze,charCode:function(i){return i.type==="keypress"?zo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ct=pn(Mt),Ut=ue({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qn=pn(Ut),js=ue({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ze}),is=pn(js),os=ue({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),tl=pn(os),$c=ue({},$o,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ND=pn($c),DD=[9,13,27,32],$m=c&&"CompositionEvent"in window,Wc=null;c&&"documentMode"in document&&(Wc=document.documentMode);var OD=c&&"TextEvent"in window&&!Wc,RE=c&&(!$m||Wc&&8<Wc&&11>=Wc),bE=" ",AE=!1;function kE(i,a){switch(i){case"keyup":return DD.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PE(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var nl=!1;function MD(i,a){switch(i){case"compositionend":return PE(a);case"keypress":return a.which!==32?null:(AE=!0,bE);case"textInput":return i=a.data,i===bE&&AE?null:i;default:return null}}function LD(i,a){if(nl)return i==="compositionend"||!$m&&kE(i,a)?(i=Yd(),Vs=Ya=Gn=null,nl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return RE&&a.locale!=="ko"?null:a.data;default:return null}}var VD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NE(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!VD[i.type]:a==="textarea"}function DE(i,a,u,p){xi(p),a=ih(a,"onChange"),0<a.length&&(u=new Bo("onChange","change",null,u,p),i.push({event:u,listeners:a}))}var Hc=null,qc=null;function jD(i){XE(i,0)}function th(i){var a=al(i);if($e(a))return i}function FD(i,a){if(i==="change")return a}var OE=!1;if(c){var Wm;if(c){var Hm="oninput"in document;if(!Hm){var ME=document.createElement("div");ME.setAttribute("oninput","return;"),Hm=typeof ME.oninput=="function"}Wm=Hm}else Wm=!1;OE=Wm&&(!document.documentMode||9<document.documentMode)}function LE(){Hc&&(Hc.detachEvent("onpropertychange",VE),qc=Hc=null)}function VE(i){if(i.propertyName==="value"&&th(qc)){var a=[];DE(a,qc,i,Ua(i)),jd(jD,a)}}function UD(i,a,u){i==="focusin"?(LE(),Hc=a,qc=u,Hc.attachEvent("onpropertychange",VE)):i==="focusout"&&LE()}function zD(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return th(qc)}function BD(i,a){if(i==="click")return th(a)}function $D(i,a){if(i==="input"||i==="change")return th(a)}function WD(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Cr=typeof Object.is=="function"?Object.is:WD;function Gc(i,a){if(Cr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!d.call(a,y)||!Cr(i[y],a[y]))return!1}return!0}function jE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function FE(i,a){var u=jE(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=a&&p>=a)return{node:u,offset:a-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=jE(u)}}function UE(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?UE(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function zE(){for(var i=window,a=Ue();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Ue(i.document)}return a}function qm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function HD(i){var a=zE(),u=i.focusedElem,p=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&UE(u.ownerDocument.documentElement,u)){if(p!==null&&qm(u)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=u.textContent.length,w=Math.min(p.start,y);p=p.end===void 0?w:Math.min(p.end,y),!i.extend&&w>p&&(y=p,p=w,w=y),y=FE(u,w);var C=FE(u,p);y&&C&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),w>p?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var qD=c&&"documentMode"in document&&11>=document.documentMode,rl=null,Gm=null,Kc=null,Km=!1;function BE(i,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Km||rl==null||rl!==Ue(p)||(p=rl,"selectionStart"in p&&qm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Kc&&Gc(Kc,p)||(Kc=p,p=ih(Gm,"onSelect"),0<p.length&&(a=new Bo("onSelect","select",null,a,u),i.push({event:a,listeners:p}),a.target=rl)))}function nh(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var sl={animationend:nh("Animation","AnimationEnd"),animationiteration:nh("Animation","AnimationIteration"),animationstart:nh("Animation","AnimationStart"),transitionend:nh("Transition","TransitionEnd")},Qm={},$E={};c&&($E=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function rh(i){if(Qm[i])return Qm[i];if(!sl[i])return i;var a=sl[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in $E)return Qm[i]=a[u];return i}var WE=rh("animationend"),HE=rh("animationiteration"),qE=rh("animationstart"),GE=rh("transitionend"),KE=new Map,QE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(i,a){KE.set(i,a),o(a,[i])}for(var Ym=0;Ym<QE.length;Ym++){var Xm=QE[Ym],GD=Xm.toLowerCase(),KD=Xm[0].toUpperCase()+Xm.slice(1);Mi(GD,"on"+KD)}Mi(WE,"onAnimationEnd"),Mi(HE,"onAnimationIteration"),Mi(qE,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(GE,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qc));function YE(i,a,u){var p=i.type||"unknown-event";i.currentTarget=u,Rc(p,a,void 0,i),i.currentTarget=null}function XE(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],y=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var C=p.length-1;0<=C;C--){var j=p[C],z=j.instance,J=j.currentTarget;if(j=j.listener,z!==w&&y.isPropagationStopped())break e;YE(y,j,J),w=z}else for(C=0;C<p.length;C++){if(j=p[C],z=j.instance,J=j.currentTarget,j=j.listener,z!==w&&y.isPropagationStopped())break e;YE(y,j,J),w=z}}}if(za)throw i=ar,za=!1,ar=null,i}function yt(i,a){var u=a[ig];u===void 0&&(u=a[ig]=new Set);var p=i+"__bubble";u.has(p)||(JE(a,i,2,!1),u.add(p))}function Jm(i,a,u){var p=0;a&&(p|=4),JE(u,i,p,a)}var sh="_reactListening"+Math.random().toString(36).slice(2);function Yc(i){if(!i[sh]){i[sh]=!0,r.forEach(function(u){u!=="selectionchange"&&(QD.has(u)||Jm(u,!1,i),Jm(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[sh]||(a[sh]=!0,Jm("selectionchange",!1,a))}}function JE(i,a,u,p){switch(Qa(a)){case 1:var y=ts;break;case 4:y=Qd;break;default:y=Uc}u=y.bind(null,a,u,i),y=void 0,!Ri||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(a,u,{capture:!0,passive:y}):i.addEventListener(a,u,!0):y!==void 0?i.addEventListener(a,u,{passive:y}):i.addEventListener(a,u,!1)}function Zm(i,a,u,p,y){var w=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var j=p.stateNode.containerInfo;if(j===y||j.nodeType===8&&j.parentNode===y)break;if(C===4)for(C=p.return;C!==null;){var z=C.tag;if((z===3||z===4)&&(z=C.stateNode.containerInfo,z===y||z.nodeType===8&&z.parentNode===y))return;C=C.return}for(;j!==null;){if(C=Wo(j),C===null)return;if(z=C.tag,z===5||z===6){p=w=C;continue e}j=j.parentNode}}p=p.return}jd(function(){var J=w,le=Ua(u),de=[];e:{var ae=KE.get(i);if(ae!==void 0){var Se=Bo,Ce=i;switch(i){case"keypress":if(zo(u)===0)break e;case"keydown":case"keyup":Se=ct;break;case"focusin":Ce="focus",Se=on;break;case"focusout":Ce="blur",Se=on;break;case"beforeblur":case"afterblur":Se=on;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=is;break;case WE:case HE:case qE:Se=eh;break;case GE:Se=tl;break;case"scroll":Se=Xa;break;case"wheel":Se=ND;break;case"copy":case"cut":case"paste":Se=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Qn}var ke=(a&4)!==0,Lt=!ke&&i==="scroll",G=ke?ae!==null?ae+"Capture":null:ae;ke=[];for(var $=J,Q;$!==null;){Q=$;var fe=Q.stateNode;if(Q.tag===5&&fe!==null&&(Q=fe,G!==null&&(fe=Po($,G),fe!=null&&ke.push(Xc($,fe,Q)))),Lt)break;$=$.return}0<ke.length&&(ae=new Se(ae,Ce,null,u,le),de.push({event:ae,listeners:ke}))}}if((a&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",Se=i==="mouseout"||i==="pointerout",ae&&u!==Ii&&(Ce=u.relatedTarget||u.fromElement)&&(Wo(Ce)||Ce[Fs]))break e;if((Se||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,Se?(Ce=u.relatedTarget||u.toElement,Se=J,Ce=Ce?Wo(Ce):null,Ce!==null&&(Lt=Ir(Ce),Ce!==Lt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Se=null,Ce=J),Se!==Ce)){if(ke=Bc,fe="onMouseLeave",G="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(ke=Qn,fe="onPointerLeave",G="onPointerEnter",$="pointer"),Lt=Se==null?ae:al(Se),Q=Ce==null?ae:al(Ce),ae=new ke(fe,$+"leave",Se,u,le),ae.target=Lt,ae.relatedTarget=Q,fe=null,Wo(le)===J&&(ke=new ke(G,$+"enter",Ce,u,le),ke.target=Q,ke.relatedTarget=Lt,fe=ke),Lt=fe,Se&&Ce)t:{for(ke=Se,G=Ce,$=0,Q=ke;Q;Q=il(Q))$++;for(Q=0,fe=G;fe;fe=il(fe))Q++;for(;0<$-Q;)ke=il(ke),$--;for(;0<Q-$;)G=il(G),Q--;for(;$--;){if(ke===G||G!==null&&ke===G.alternate)break t;ke=il(ke),G=il(G)}ke=null}else ke=null;Se!==null&&ZE(de,ae,Se,ke,!1),Ce!==null&&Lt!==null&&ZE(de,Lt,Ce,ke,!0)}}e:{if(ae=J?al(J):window,Se=ae.nodeName&&ae.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ae.type==="file")var Pe=FD;else if(NE(ae))if(OE)Pe=$D;else{Pe=zD;var De=UD}else(Se=ae.nodeName)&&Se.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Pe=BD);if(Pe&&(Pe=Pe(i,J))){DE(de,Pe,u,le);break e}De&&De(i,ae,J),i==="focusout"&&(De=ae._wrapperState)&&De.controlled&&ae.type==="number"&&It(ae,"number",ae.value)}switch(De=J?al(J):window,i){case"focusin":(NE(De)||De.contentEditable==="true")&&(rl=De,Gm=J,Kc=null);break;case"focusout":Kc=Gm=rl=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,BE(de,u,le);break;case"selectionchange":if(qD)break;case"keydown":case"keyup":BE(de,u,le)}var Oe;if($m)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else nl?kE(i,u)&&(Ve="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ve="onCompositionStart");Ve&&(RE&&u.locale!=="ko"&&(nl||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&nl&&(Oe=Yd()):(Gn=le,Ya="value"in Gn?Gn.value:Gn.textContent,nl=!0)),De=ih(J,Ve),0<De.length&&(Ve=new T(Ve,i,null,u,le),de.push({event:Ve,listeners:De}),Oe?Ve.data=Oe:(Oe=PE(u),Oe!==null&&(Ve.data=Oe)))),(Oe=OD?MD(i,u):LD(i,u))&&(J=ih(J,"onBeforeInput"),0<J.length&&(le=new T("onBeforeInput","beforeinput",null,u,le),de.push({event:le,listeners:J}),le.data=Oe))}XE(de,a)})}function Xc(i,a,u){return{instance:i,listener:a,currentTarget:u}}function ih(i,a){for(var u=a+"Capture",p=[];i!==null;){var y=i,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=Po(i,u),w!=null&&p.unshift(Xc(i,w,y)),w=Po(i,a),w!=null&&p.push(Xc(i,w,y))),i=i.return}return p}function il(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function ZE(i,a,u,p,y){for(var w=a._reactName,C=[];u!==null&&u!==p;){var j=u,z=j.alternate,J=j.stateNode;if(z!==null&&z===p)break;j.tag===5&&J!==null&&(j=J,y?(z=Po(u,w),z!=null&&C.unshift(Xc(u,z,j))):y||(z=Po(u,w),z!=null&&C.push(Xc(u,z,j)))),u=u.return}C.length!==0&&i.push({event:a,listeners:C})}var YD=/\r\n?/g,XD=/\u0000|\uFFFD/g;function eS(i){return(typeof i=="string"?i:""+i).replace(YD,`
`).replace(XD,"")}function oh(i,a,u){if(a=eS(a),eS(i)!==a&&u)throw Error(t(425))}function ah(){}var eg=null,tg=null;function ng(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rg=typeof setTimeout=="function"?setTimeout:void 0,JD=typeof clearTimeout=="function"?clearTimeout:void 0,tS=typeof Promise=="function"?Promise:void 0,ZD=typeof queueMicrotask=="function"?queueMicrotask:typeof tS<"u"?function(i){return tS.resolve(null).then(i).catch(eO)}:rg;function eO(i){setTimeout(function(){throw i})}function sg(i,a){var u=a,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(p===0){i.removeChild(y),Ni(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=y}while(u);Ni(a)}function Li(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function nS(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var ol=Math.random().toString(36).slice(2),as="__reactFiber$"+ol,Jc="__reactProps$"+ol,Fs="__reactContainer$"+ol,ig="__reactEvents$"+ol,tO="__reactListeners$"+ol,nO="__reactHandles$"+ol;function Wo(i){var a=i[as];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Fs]||u[as]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=nS(i);i!==null;){if(u=i[as])return u;i=nS(i)}return a}i=u,u=i.parentNode}return null}function Zc(i){return i=i[as]||i[Fs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function al(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function lh(i){return i[Jc]||null}var og=[],ll=-1;function Vi(i){return{current:i}}function _t(i){0>ll||(i.current=og[ll],og[ll]=null,ll--)}function pt(i,a){ll++,og[ll]=i.current,i.current=a}var ji={},mn=Vi(ji),Ln=Vi(!1),Ho=ji;function cl(i,a){var u=i.type.contextTypes;if(!u)return ji;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in u)y[w]=a[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function Vn(i){return i=i.childContextTypes,i!=null}function ch(){_t(Ln),_t(mn)}function rS(i,a,u){if(mn.current!==ji)throw Error(t(168));pt(mn,a),pt(Ln,u)}function sS(i,a,u){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var y in p)if(!(y in a))throw Error(t(108,q(i)||"Unknown",y));return ue({},u,p)}function uh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ji,Ho=mn.current,pt(mn,i),pt(Ln,Ln.current),!0}function iS(i,a,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=sS(i,a,Ho),p.__reactInternalMemoizedMergedChildContext=i,_t(Ln),_t(mn),pt(mn,i)):_t(Ln),pt(Ln,u)}var Us=null,dh=!1,ag=!1;function oS(i){Us===null?Us=[i]:Us.push(i)}function rO(i){dh=!0,oS(i)}function Fi(){if(!ag&&Us!==null){ag=!0;var i=0,a=Xe;try{var u=Us;for(Xe=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Us=null,dh=!1}catch(y){throw Us!==null&&(Us=Us.slice(i+1)),Ac($a,Fi),y}finally{Xe=a,ag=!1}}return null}var ul=[],dl=0,hh=null,fh=0,cr=[],ur=0,qo=null,zs=1,Bs="";function Go(i,a){ul[dl++]=fh,ul[dl++]=hh,hh=i,fh=a}function aS(i,a,u){cr[ur++]=zs,cr[ur++]=Bs,cr[ur++]=qo,qo=i;var p=zs;i=Bs;var y=32-Hn(p)-1;p&=~(1<<y),u+=1;var w=32-Hn(a)+y;if(30<w){var C=y-y%5;w=(p&(1<<C)-1).toString(32),p>>=C,y-=C,zs=1<<32-Hn(a)+y|u<<y|p,Bs=w+i}else zs=1<<w|u<<y|p,Bs=i}function lg(i){i.return!==null&&(Go(i,1),aS(i,1,0))}function cg(i){for(;i===hh;)hh=ul[--dl],ul[dl]=null,fh=ul[--dl],ul[dl]=null;for(;i===qo;)qo=cr[--ur],cr[ur]=null,Bs=cr[--ur],cr[ur]=null,zs=cr[--ur],cr[ur]=null}var Yn=null,Xn=null,Tt=!1,Rr=null;function lS(i,a){var u=pr(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function cS(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Yn=i,Xn=Li(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Yn=i,Xn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=qo!==null?{id:zs,overflow:Bs}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=pr(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,Yn=i,Xn=null,!0):!1;default:return!1}}function ug(i){return(i.mode&1)!==0&&(i.flags&128)===0}function dg(i){if(Tt){var a=Xn;if(a){var u=a;if(!cS(i,a)){if(ug(i))throw Error(t(418));a=Li(u.nextSibling);var p=Yn;a&&cS(i,a)?lS(p,u):(i.flags=i.flags&-4097|2,Tt=!1,Yn=i)}}else{if(ug(i))throw Error(t(418));i.flags=i.flags&-4097|2,Tt=!1,Yn=i}}}function uS(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Yn=i}function ph(i){if(i!==Yn)return!1;if(!Tt)return uS(i),Tt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!ng(i.type,i.memoizedProps)),a&&(a=Xn)){if(ug(i))throw dS(),Error(t(418));for(;a;)lS(i,a),a=Li(a.nextSibling)}if(uS(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){Xn=Li(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}Xn=null}}else Xn=Yn?Li(i.stateNode.nextSibling):null;return!0}function dS(){for(var i=Xn;i;)i=Li(i.nextSibling)}function hl(){Xn=Yn=null,Tt=!1}function hg(i){Rr===null?Rr=[i]:Rr.push(i)}var sO=W.ReactCurrentBatchConfig;function eu(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var y=p,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(C){var j=y.refs;C===null?delete j[w]:j[w]=C},a._stringRef=w,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function mh(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function hS(i){var a=i._init;return a(i._payload)}function fS(i){function a(G,$){if(i){var Q=G.deletions;Q===null?(G.deletions=[$],G.flags|=16):Q.push($)}}function u(G,$){if(!i)return null;for(;$!==null;)a(G,$),$=$.sibling;return null}function p(G,$){for(G=new Map;$!==null;)$.key!==null?G.set($.key,$):G.set($.index,$),$=$.sibling;return G}function y(G,$){return G=Gi(G,$),G.index=0,G.sibling=null,G}function w(G,$,Q){return G.index=Q,i?(Q=G.alternate,Q!==null?(Q=Q.index,Q<$?(G.flags|=2,$):Q):(G.flags|=2,$)):(G.flags|=1048576,$)}function C(G){return i&&G.alternate===null&&(G.flags|=2),G}function j(G,$,Q,fe){return $===null||$.tag!==6?($=ry(Q,G.mode,fe),$.return=G,$):($=y($,Q),$.return=G,$)}function z(G,$,Q,fe){var Pe=Q.type;return Pe===k?le(G,$,Q.props.children,fe,Q.key):$!==null&&($.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===pe&&hS(Pe)===$.type)?(fe=y($,Q.props),fe.ref=eu(G,$,Q),fe.return=G,fe):(fe=Fh(Q.type,Q.key,Q.props,null,G.mode,fe),fe.ref=eu(G,$,Q),fe.return=G,fe)}function J(G,$,Q,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=sy(Q,G.mode,fe),$.return=G,$):($=y($,Q.children||[]),$.return=G,$)}function le(G,$,Q,fe,Pe){return $===null||$.tag!==7?($=ta(Q,G.mode,fe,Pe),$.return=G,$):($=y($,Q),$.return=G,$)}function de(G,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=ry(""+$,G.mode,Q),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Y:return Q=Fh($.type,$.key,$.props,null,G.mode,Q),Q.ref=eu(G,null,$),Q.return=G,Q;case X:return $=sy($,G.mode,Q),$.return=G,$;case pe:var fe=$._init;return de(G,fe($._payload),Q)}if(xt($)||ee($))return $=ta($,G.mode,Q,null),$.return=G,$;mh(G,$)}return null}function ae(G,$,Q,fe){var Pe=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Pe!==null?null:j(G,$,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Y:return Q.key===Pe?z(G,$,Q,fe):null;case X:return Q.key===Pe?J(G,$,Q,fe):null;case pe:return Pe=Q._init,ae(G,$,Pe(Q._payload),fe)}if(xt(Q)||ee(Q))return Pe!==null?null:le(G,$,Q,fe,null);mh(G,Q)}return null}function Se(G,$,Q,fe,Pe){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return G=G.get(Q)||null,j($,G,""+fe,Pe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Y:return G=G.get(fe.key===null?Q:fe.key)||null,z($,G,fe,Pe);case X:return G=G.get(fe.key===null?Q:fe.key)||null,J($,G,fe,Pe);case pe:var De=fe._init;return Se(G,$,Q,De(fe._payload),Pe)}if(xt(fe)||ee(fe))return G=G.get(Q)||null,le($,G,fe,Pe,null);mh($,fe)}return null}function Ce(G,$,Q,fe){for(var Pe=null,De=null,Oe=$,Ve=$=0,Jt=null;Oe!==null&&Ve<Q.length;Ve++){Oe.index>Ve?(Jt=Oe,Oe=null):Jt=Oe.sibling;var it=ae(G,Oe,Q[Ve],fe);if(it===null){Oe===null&&(Oe=Jt);break}i&&Oe&&it.alternate===null&&a(G,Oe),$=w(it,$,Ve),De===null?Pe=it:De.sibling=it,De=it,Oe=Jt}if(Ve===Q.length)return u(G,Oe),Tt&&Go(G,Ve),Pe;if(Oe===null){for(;Ve<Q.length;Ve++)Oe=de(G,Q[Ve],fe),Oe!==null&&($=w(Oe,$,Ve),De===null?Pe=Oe:De.sibling=Oe,De=Oe);return Tt&&Go(G,Ve),Pe}for(Oe=p(G,Oe);Ve<Q.length;Ve++)Jt=Se(Oe,G,Ve,Q[Ve],fe),Jt!==null&&(i&&Jt.alternate!==null&&Oe.delete(Jt.key===null?Ve:Jt.key),$=w(Jt,$,Ve),De===null?Pe=Jt:De.sibling=Jt,De=Jt);return i&&Oe.forEach(function(Ki){return a(G,Ki)}),Tt&&Go(G,Ve),Pe}function ke(G,$,Q,fe){var Pe=ee(Q);if(typeof Pe!="function")throw Error(t(150));if(Q=Pe.call(Q),Q==null)throw Error(t(151));for(var De=Pe=null,Oe=$,Ve=$=0,Jt=null,it=Q.next();Oe!==null&&!it.done;Ve++,it=Q.next()){Oe.index>Ve?(Jt=Oe,Oe=null):Jt=Oe.sibling;var Ki=ae(G,Oe,it.value,fe);if(Ki===null){Oe===null&&(Oe=Jt);break}i&&Oe&&Ki.alternate===null&&a(G,Oe),$=w(Ki,$,Ve),De===null?Pe=Ki:De.sibling=Ki,De=Ki,Oe=Jt}if(it.done)return u(G,Oe),Tt&&Go(G,Ve),Pe;if(Oe===null){for(;!it.done;Ve++,it=Q.next())it=de(G,it.value,fe),it!==null&&($=w(it,$,Ve),De===null?Pe=it:De.sibling=it,De=it);return Tt&&Go(G,Ve),Pe}for(Oe=p(G,Oe);!it.done;Ve++,it=Q.next())it=Se(Oe,G,Ve,it.value,fe),it!==null&&(i&&it.alternate!==null&&Oe.delete(it.key===null?Ve:it.key),$=w(it,$,Ve),De===null?Pe=it:De.sibling=it,De=it);return i&&Oe.forEach(function(VO){return a(G,VO)}),Tt&&Go(G,Ve),Pe}function Lt(G,$,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===k&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Y:e:{for(var Pe=Q.key,De=$;De!==null;){if(De.key===Pe){if(Pe=Q.type,Pe===k){if(De.tag===7){u(G,De.sibling),$=y(De,Q.props.children),$.return=G,G=$;break e}}else if(De.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===pe&&hS(Pe)===De.type){u(G,De.sibling),$=y(De,Q.props),$.ref=eu(G,De,Q),$.return=G,G=$;break e}u(G,De);break}else a(G,De);De=De.sibling}Q.type===k?($=ta(Q.props.children,G.mode,fe,Q.key),$.return=G,G=$):(fe=Fh(Q.type,Q.key,Q.props,null,G.mode,fe),fe.ref=eu(G,$,Q),fe.return=G,G=fe)}return C(G);case X:e:{for(De=Q.key;$!==null;){if($.key===De)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){u(G,$.sibling),$=y($,Q.children||[]),$.return=G,G=$;break e}else{u(G,$);break}else a(G,$);$=$.sibling}$=sy(Q,G.mode,fe),$.return=G,G=$}return C(G);case pe:return De=Q._init,Lt(G,$,De(Q._payload),fe)}if(xt(Q))return Ce(G,$,Q,fe);if(ee(Q))return ke(G,$,Q,fe);mh(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,$!==null&&$.tag===6?(u(G,$.sibling),$=y($,Q),$.return=G,G=$):(u(G,$),$=ry(Q,G.mode,fe),$.return=G,G=$),C(G)):u(G,$)}return Lt}var fl=fS(!0),pS=fS(!1),gh=Vi(null),yh=null,pl=null,fg=null;function pg(){fg=pl=yh=null}function mg(i){var a=gh.current;_t(gh),i._currentValue=a}function gg(i,a,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===u)break;i=i.return}}function ml(i,a){yh=i,fg=pl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(jn=!0),i.firstContext=null)}function dr(i){var a=i._currentValue;if(fg!==i)if(i={context:i,memoizedValue:a,next:null},pl===null){if(yh===null)throw Error(t(308));pl=i,yh.dependencies={lanes:0,firstContext:i}}else pl=pl.next=i;return a}var Ko=null;function yg(i){Ko===null?Ko=[i]:Ko.push(i)}function mS(i,a,u,p){var y=a.interleaved;return y===null?(u.next=u,yg(a)):(u.next=y.next,y.next=u),a.interleaved=u,$s(i,p)}function $s(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ui=!1;function _g(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gS(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ws(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function zi(i,a,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(rt&2)!==0){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,$s(i,u)}return y=p.interleaved,y===null?(a.next=a,yg(p)):(a.next=y.next,y.next=a),p.interleaved=a,$s(i,u)}function _h(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Mc(i,u)}}function yS(i,a){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var C={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?y=w=C:w=w.next=C,u=u.next}while(u!==null);w===null?y=w=a:w=w.next=a}else y=w=a;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function vh(i,a,u,p){var y=i.updateQueue;Ui=!1;var w=y.firstBaseUpdate,C=y.lastBaseUpdate,j=y.shared.pending;if(j!==null){y.shared.pending=null;var z=j,J=z.next;z.next=null,C===null?w=J:C.next=J,C=z;var le=i.alternate;le!==null&&(le=le.updateQueue,j=le.lastBaseUpdate,j!==C&&(j===null?le.firstBaseUpdate=J:j.next=J,le.lastBaseUpdate=z))}if(w!==null){var de=y.baseState;C=0,le=J=z=null,j=w;do{var ae=j.lane,Se=j.eventTime;if((p&ae)===ae){le!==null&&(le=le.next={eventTime:Se,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Ce=i,ke=j;switch(ae=a,Se=u,ke.tag){case 1:if(Ce=ke.payload,typeof Ce=="function"){de=Ce.call(Se,de,ae);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=ke.payload,ae=typeof Ce=="function"?Ce.call(Se,de,ae):Ce,ae==null)break e;de=ue({},de,ae);break e;case 2:Ui=!0}}j.callback!==null&&j.lane!==0&&(i.flags|=64,ae=y.effects,ae===null?y.effects=[j]:ae.push(j))}else Se={eventTime:Se,lane:ae,tag:j.tag,payload:j.payload,callback:j.callback,next:null},le===null?(J=le=Se,z=de):le=le.next=Se,C|=ae;if(j=j.next,j===null){if(j=y.shared.pending,j===null)break;ae=j,j=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);if(le===null&&(z=de),y.baseState=z,y.firstBaseUpdate=J,y.lastBaseUpdate=le,a=y.shared.interleaved,a!==null){y=a;do C|=y.lane,y=y.next;while(y!==a)}else w===null&&(y.shared.lanes=0);Xo|=C,i.lanes=C,i.memoizedState=de}}function _S(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],y=p.callback;if(y!==null){if(p.callback=null,p=u,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var tu={},ls=Vi(tu),nu=Vi(tu),ru=Vi(tu);function Qo(i){if(i===tu)throw Error(t(174));return i}function vg(i,a){switch(pt(ru,a),pt(nu,i),pt(ls,tu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Va(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Va(a,i)}_t(ls),pt(ls,a)}function gl(){_t(ls),_t(nu),_t(ru)}function vS(i){Qo(ru.current);var a=Qo(ls.current),u=Va(a,i.type);a!==u&&(pt(nu,i),pt(ls,u))}function wg(i){nu.current===i&&(_t(ls),_t(nu))}var Ct=Vi(0);function wh(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Eg=[];function Sg(){for(var i=0;i<Eg.length;i++)Eg[i]._workInProgressVersionPrimary=null;Eg.length=0}var Eh=W.ReactCurrentDispatcher,Tg=W.ReactCurrentBatchConfig,Yo=0,Rt=null,qt=null,Yt=null,Sh=!1,su=!1,iu=0,iO=0;function gn(){throw Error(t(321))}function Ig(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!Cr(i[u],a[u]))return!1;return!0}function xg(i,a,u,p,y,w){if(Yo=w,Rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Eh.current=i===null||i.memoizedState===null?cO:uO,i=u(p,y),su){w=0;do{if(su=!1,iu=0,25<=w)throw Error(t(301));w+=1,Yt=qt=null,a.updateQueue=null,Eh.current=dO,i=u(p,y)}while(su)}if(Eh.current=xh,a=qt!==null&&qt.next!==null,Yo=0,Yt=qt=Rt=null,Sh=!1,a)throw Error(t(300));return i}function Cg(){var i=iu!==0;return iu=0,i}function cs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Rt.memoizedState=Yt=i:Yt=Yt.next=i,Yt}function hr(){if(qt===null){var i=Rt.alternate;i=i!==null?i.memoizedState:null}else i=qt.next;var a=Yt===null?Rt.memoizedState:Yt.next;if(a!==null)Yt=a,qt=i;else{if(i===null)throw Error(t(310));qt=i,i={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Yt===null?Rt.memoizedState=Yt=i:Yt=Yt.next=i}return Yt}function ou(i,a){return typeof a=="function"?a(i):a}function Rg(i){var a=hr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=qt,y=p.baseQueue,w=u.pending;if(w!==null){if(y!==null){var C=y.next;y.next=w.next,w.next=C}p.baseQueue=y=w,u.pending=null}if(y!==null){w=y.next,p=p.baseState;var j=C=null,z=null,J=w;do{var le=J.lane;if((Yo&le)===le)z!==null&&(z=z.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),p=J.hasEagerState?J.eagerState:i(p,J.action);else{var de={lane:le,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};z===null?(j=z=de,C=p):z=z.next=de,Rt.lanes|=le,Xo|=le}J=J.next}while(J!==null&&J!==w);z===null?C=p:z.next=j,Cr(p,a.memoizedState)||(jn=!0),a.memoizedState=p,a.baseState=C,a.baseQueue=z,u.lastRenderedState=p}if(i=u.interleaved,i!==null){y=i;do w=y.lane,Rt.lanes|=w,Xo|=w,y=y.next;while(y!==i)}else y===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function bg(i){var a=hr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,y=u.pending,w=a.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do w=i(w,C.action),C=C.next;while(C!==y);Cr(w,a.memoizedState)||(jn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,p]}function wS(){}function ES(i,a){var u=Rt,p=hr(),y=a(),w=!Cr(p.memoizedState,y);if(w&&(p.memoizedState=y,jn=!0),p=p.queue,Ag(IS.bind(null,u,p,i),[i]),p.getSnapshot!==a||w||Yt!==null&&Yt.memoizedState.tag&1){if(u.flags|=2048,au(9,TS.bind(null,u,p,y,a),void 0,null),Xt===null)throw Error(t(349));(Yo&30)!==0||SS(u,a,y)}return y}function SS(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=Rt.updateQueue,a===null?(a={lastEffect:null,stores:null},Rt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function TS(i,a,u,p){a.value=u,a.getSnapshot=p,xS(a)&&CS(i)}function IS(i,a,u){return u(function(){xS(a)&&CS(i)})}function xS(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!Cr(i,u)}catch{return!0}}function CS(i){var a=$s(i,1);a!==null&&Pr(a,i,1,-1)}function RS(i){var a=cs();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:i},a.queue=i,i=i.dispatch=lO.bind(null,Rt,i),[a.memoizedState,i]}function au(i,a,u,p){return i={tag:i,create:a,destroy:u,deps:p,next:null},a=Rt.updateQueue,a===null?(a={lastEffect:null,stores:null},Rt.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,a.lastEffect=i)),i}function bS(){return hr().memoizedState}function Th(i,a,u,p){var y=cs();Rt.flags|=i,y.memoizedState=au(1|a,u,void 0,p===void 0?null:p)}function Ih(i,a,u,p){var y=hr();p=p===void 0?null:p;var w=void 0;if(qt!==null){var C=qt.memoizedState;if(w=C.destroy,p!==null&&Ig(p,C.deps)){y.memoizedState=au(a,u,w,p);return}}Rt.flags|=i,y.memoizedState=au(1|a,u,w,p)}function AS(i,a){return Th(8390656,8,i,a)}function Ag(i,a){return Ih(2048,8,i,a)}function kS(i,a){return Ih(4,2,i,a)}function PS(i,a){return Ih(4,4,i,a)}function NS(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function DS(i,a,u){return u=u!=null?u.concat([i]):null,Ih(4,4,NS.bind(null,a,i),u)}function kg(){}function OS(i,a){var u=hr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Ig(a,p[1])?p[0]:(u.memoizedState=[i,a],i)}function MS(i,a){var u=hr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Ig(a,p[1])?p[0]:(i=i(),u.memoizedState=[i,a],i)}function LS(i,a,u){return(Yo&21)===0?(i.baseState&&(i.baseState=!1,jn=!0),i.memoizedState=u):(Cr(u,a)||(u=Dc(),Rt.lanes|=u,Xo|=u,i.baseState=!0),a)}function oO(i,a){var u=Xe;Xe=u!==0&&4>u?u:4,i(!0);var p=Tg.transition;Tg.transition={};try{i(!1),a()}finally{Xe=u,Tg.transition=p}}function VS(){return hr().memoizedState}function aO(i,a,u){var p=Hi(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},jS(i))FS(a,u);else if(u=mS(i,a,u,p),u!==null){var y=kn();Pr(u,i,p,y),US(u,a,p)}}function lO(i,a,u){var p=Hi(i),y={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(jS(i))FS(a,y);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var C=a.lastRenderedState,j=w(C,u);if(y.hasEagerState=!0,y.eagerState=j,Cr(j,C)){var z=a.interleaved;z===null?(y.next=y,yg(a)):(y.next=z.next,z.next=y),a.interleaved=y;return}}catch{}finally{}u=mS(i,a,y,p),u!==null&&(y=kn(),Pr(u,i,p,y),US(u,a,p))}}function jS(i){var a=i.alternate;return i===Rt||a!==null&&a===Rt}function FS(i,a){su=Sh=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function US(i,a,u){if((u&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Mc(i,u)}}var xh={readContext:dr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},cO={readContext:dr,useCallback:function(i,a){return cs().memoizedState=[i,a===void 0?null:a],i},useContext:dr,useEffect:AS,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Th(4194308,4,NS.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Th(4194308,4,i,a)},useInsertionEffect:function(i,a){return Th(4,2,i,a)},useMemo:function(i,a){var u=cs();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var p=cs();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=aO.bind(null,Rt,i),[p.memoizedState,i]},useRef:function(i){var a=cs();return i={current:i},a.memoizedState=i},useState:RS,useDebugValue:kg,useDeferredValue:function(i){return cs().memoizedState=i},useTransition:function(){var i=RS(!1),a=i[0];return i=oO.bind(null,i[1]),cs().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var p=Rt,y=cs();if(Tt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Xt===null)throw Error(t(349));(Yo&30)!==0||SS(p,a,u)}y.memoizedState=u;var w={value:u,getSnapshot:a};return y.queue=w,AS(IS.bind(null,p,w,i),[i]),p.flags|=2048,au(9,TS.bind(null,p,w,u,a),void 0,null),u},useId:function(){var i=cs(),a=Xt.identifierPrefix;if(Tt){var u=Bs,p=zs;u=(p&~(1<<32-Hn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=iu++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=iO++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},uO={readContext:dr,useCallback:OS,useContext:dr,useEffect:Ag,useImperativeHandle:DS,useInsertionEffect:kS,useLayoutEffect:PS,useMemo:MS,useReducer:Rg,useRef:bS,useState:function(){return Rg(ou)},useDebugValue:kg,useDeferredValue:function(i){var a=hr();return LS(a,qt.memoizedState,i)},useTransition:function(){var i=Rg(ou)[0],a=hr().memoizedState;return[i,a]},useMutableSource:wS,useSyncExternalStore:ES,useId:VS,unstable_isNewReconciler:!1},dO={readContext:dr,useCallback:OS,useContext:dr,useEffect:Ag,useImperativeHandle:DS,useInsertionEffect:kS,useLayoutEffect:PS,useMemo:MS,useReducer:bg,useRef:bS,useState:function(){return bg(ou)},useDebugValue:kg,useDeferredValue:function(i){var a=hr();return qt===null?a.memoizedState=i:LS(a,qt.memoizedState,i)},useTransition:function(){var i=bg(ou)[0],a=hr().memoizedState;return[i,a]},useMutableSource:wS,useSyncExternalStore:ES,useId:VS,unstable_isNewReconciler:!1};function br(i,a){if(i&&i.defaultProps){a=ue({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function Pg(i,a,u,p){a=i.memoizedState,u=u(p,a),u=u==null?a:ue({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Ch={isMounted:function(i){return(i=i._reactInternals)?Ir(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var p=kn(),y=Hi(i),w=Ws(p,y);w.payload=a,u!=null&&(w.callback=u),a=zi(i,w,y),a!==null&&(Pr(a,i,y,p),_h(a,i,y))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var p=kn(),y=Hi(i),w=Ws(p,y);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=zi(i,w,y),a!==null&&(Pr(a,i,y,p),_h(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=kn(),p=Hi(i),y=Ws(u,p);y.tag=2,a!=null&&(y.callback=a),a=zi(i,y,p),a!==null&&(Pr(a,i,p,u),_h(a,i,p))}};function zS(i,a,u,p,y,w,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,C):a.prototype&&a.prototype.isPureReactComponent?!Gc(u,p)||!Gc(y,w):!0}function BS(i,a,u){var p=!1,y=ji,w=a.contextType;return typeof w=="object"&&w!==null?w=dr(w):(y=Vn(a)?Ho:mn.current,p=a.contextTypes,w=(p=p!=null)?cl(i,y):ji),a=new a(u,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ch,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=w),a}function $S(i,a,u,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==i&&Ch.enqueueReplaceState(a,a.state,null)}function Ng(i,a,u,p){var y=i.stateNode;y.props=u,y.state=i.memoizedState,y.refs={},_g(i);var w=a.contextType;typeof w=="object"&&w!==null?y.context=dr(w):(w=Vn(a)?Ho:mn.current,y.context=cl(i,w)),y.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(Pg(i,a,w,u),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Ch.enqueueReplaceState(y,y.state,null),vh(i,u,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function yl(i,a){try{var u="",p=a;do u+=he(p),p=p.return;while(p);var y=u}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:y,digest:null}}function Dg(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function Og(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var hO=typeof WeakMap=="function"?WeakMap:Map;function WS(i,a,u){u=Ws(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Dh||(Dh=!0,Qg=p),Og(i,a)},u}function HS(i,a,u){u=Ws(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=a.value;u.payload=function(){return p(y)},u.callback=function(){Og(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Og(i,a),typeof p!="function"&&($i===null?$i=new Set([this]):$i.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),u}function qS(i,a,u){var p=i.pingCache;if(p===null){p=i.pingCache=new hO;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(u)||(y.add(u),i=CO.bind(null,i,a,u),a.then(i,i))}function GS(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function KS(i,a,u,p,y){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Ws(-1,1),a.tag=2,zi(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var fO=W.ReactCurrentOwner,jn=!1;function An(i,a,u,p){a.child=i===null?pS(a,null,u,p):fl(a,i.child,u,p)}function QS(i,a,u,p,y){u=u.render;var w=a.ref;return ml(a,y),p=xg(i,a,u,p,w,y),u=Cg(),i!==null&&!jn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Hs(i,a,y)):(Tt&&u&&lg(a),a.flags|=1,An(i,a,p,y),a.child)}function YS(i,a,u,p,y){if(i===null){var w=u.type;return typeof w=="function"&&!ny(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,XS(i,a,w,p,y)):(i=Fh(u.type,null,p,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,(i.lanes&y)===0){var C=w.memoizedProps;if(u=u.compare,u=u!==null?u:Gc,u(C,p)&&i.ref===a.ref)return Hs(i,a,y)}return a.flags|=1,i=Gi(w,p),i.ref=a.ref,i.return=a,a.child=i}function XS(i,a,u,p,y){if(i!==null){var w=i.memoizedProps;if(Gc(w,p)&&i.ref===a.ref)if(jn=!1,a.pendingProps=p=w,(i.lanes&y)!==0)(i.flags&131072)!==0&&(jn=!0);else return a.lanes=i.lanes,Hs(i,a,y)}return Mg(i,a,u,p,y)}function JS(i,a,u){var p=a.pendingProps,y=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(vl,Jn),Jn|=u;else{if((u&1073741824)===0)return i=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,pt(vl,Jn),Jn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,pt(vl,Jn),Jn|=p}else w!==null?(p=w.baseLanes|u,a.memoizedState=null):p=u,pt(vl,Jn),Jn|=p;return An(i,a,y,u),a.child}function ZS(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Mg(i,a,u,p,y){var w=Vn(u)?Ho:mn.current;return w=cl(a,w),ml(a,y),u=xg(i,a,u,p,w,y),p=Cg(),i!==null&&!jn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Hs(i,a,y)):(Tt&&p&&lg(a),a.flags|=1,An(i,a,u,y),a.child)}function eT(i,a,u,p,y){if(Vn(u)){var w=!0;uh(a)}else w=!1;if(ml(a,y),a.stateNode===null)bh(i,a),BS(a,u,p),Ng(a,u,p,y),p=!0;else if(i===null){var C=a.stateNode,j=a.memoizedProps;C.props=j;var z=C.context,J=u.contextType;typeof J=="object"&&J!==null?J=dr(J):(J=Vn(u)?Ho:mn.current,J=cl(a,J));var le=u.getDerivedStateFromProps,de=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(j!==p||z!==J)&&$S(a,C,p,J),Ui=!1;var ae=a.memoizedState;C.state=ae,vh(a,p,C,y),z=a.memoizedState,j!==p||ae!==z||Ln.current||Ui?(typeof le=="function"&&(Pg(a,u,le,p),z=a.memoizedState),(j=Ui||zS(a,u,j,p,ae,z,J))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=z),C.props=p,C.state=z,C.context=J,p=j):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{C=a.stateNode,gS(i,a),j=a.memoizedProps,J=a.type===a.elementType?j:br(a.type,j),C.props=J,de=a.pendingProps,ae=C.context,z=u.contextType,typeof z=="object"&&z!==null?z=dr(z):(z=Vn(u)?Ho:mn.current,z=cl(a,z));var Se=u.getDerivedStateFromProps;(le=typeof Se=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(j!==de||ae!==z)&&$S(a,C,p,z),Ui=!1,ae=a.memoizedState,C.state=ae,vh(a,p,C,y);var Ce=a.memoizedState;j!==de||ae!==Ce||Ln.current||Ui?(typeof Se=="function"&&(Pg(a,u,Se,p),Ce=a.memoizedState),(J=Ui||zS(a,u,J,p,ae,Ce,z)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,Ce,z),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,Ce,z)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||j===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Ce),C.props=p,C.state=Ce,C.context=z,p=J):(typeof C.componentDidUpdate!="function"||j===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),p=!1)}return Lg(i,a,u,p,w,y)}function Lg(i,a,u,p,y,w){ZS(i,a);var C=(a.flags&128)!==0;if(!p&&!C)return y&&iS(a,u,!1),Hs(i,a,w);p=a.stateNode,fO.current=a;var j=C&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&C?(a.child=fl(a,i.child,null,w),a.child=fl(a,null,j,w)):An(i,a,j,w),a.memoizedState=p.state,y&&iS(a,u,!0),a.child}function tT(i){var a=i.stateNode;a.pendingContext?rS(i,a.pendingContext,a.pendingContext!==a.context):a.context&&rS(i,a.context,!1),vg(i,a.containerInfo)}function nT(i,a,u,p,y){return hl(),hg(y),a.flags|=256,An(i,a,u,p),a.child}var Vg={dehydrated:null,treeContext:null,retryLane:0};function jg(i){return{baseLanes:i,cachePool:null,transitions:null}}function rT(i,a,u){var p=a.pendingProps,y=Ct.current,w=!1,C=(a.flags&128)!==0,j;if((j=C)||(j=i!==null&&i.memoizedState===null?!1:(y&2)!==0),j?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),pt(Ct,y&1),i===null)return dg(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=p.children,i=p.fallback,w?(p=a.mode,w=a.child,C={mode:"hidden",children:C},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=C):w=Uh(C,p,0,null),i=ta(i,p,u,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=jg(u),a.memoizedState=Vg,i):Fg(a,C));if(y=i.memoizedState,y!==null&&(j=y.dehydrated,j!==null))return pO(i,a,C,p,j,y,u);if(w){w=p.fallback,C=a.mode,y=i.child,j=y.sibling;var z={mode:"hidden",children:p.children};return(C&1)===0&&a.child!==y?(p=a.child,p.childLanes=0,p.pendingProps=z,a.deletions=null):(p=Gi(y,z),p.subtreeFlags=y.subtreeFlags&14680064),j!==null?w=Gi(j,w):(w=ta(w,C,u,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,C=i.child.memoizedState,C=C===null?jg(u):{baseLanes:C.baseLanes|u,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=i.childLanes&~u,a.memoizedState=Vg,p}return w=i.child,i=w.sibling,p=Gi(w,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=p,a.memoizedState=null,p}function Fg(i,a){return a=Uh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Rh(i,a,u,p){return p!==null&&hg(p),fl(a,i.child,null,u),i=Fg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function pO(i,a,u,p,y,w,C){if(u)return a.flags&256?(a.flags&=-257,p=Dg(Error(t(422))),Rh(i,a,C,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=p.fallback,y=a.mode,p=Uh({mode:"visible",children:p.children},y,0,null),w=ta(w,y,C,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,(a.mode&1)!==0&&fl(a,i.child,null,C),a.child.memoizedState=jg(C),a.memoizedState=Vg,w);if((a.mode&1)===0)return Rh(i,a,C,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var j=p.dgst;return p=j,w=Error(t(419)),p=Dg(w,p,void 0),Rh(i,a,C,p)}if(j=(C&i.childLanes)!==0,jn||j){if(p=Xt,p!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|C))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,$s(i,y),Pr(p,i,y,-1))}return ty(),p=Dg(Error(t(421))),Rh(i,a,C,p)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=RO.bind(null,i),y._reactRetry=a,null):(i=w.treeContext,Xn=Li(y.nextSibling),Yn=a,Tt=!0,Rr=null,i!==null&&(cr[ur++]=zs,cr[ur++]=Bs,cr[ur++]=qo,zs=i.id,Bs=i.overflow,qo=a),a=Fg(a,p.children),a.flags|=4096,a)}function sT(i,a,u){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),gg(i.return,a,u)}function Ug(i,a,u,p,y){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=y)}function iT(i,a,u){var p=a.pendingProps,y=p.revealOrder,w=p.tail;if(An(i,a,p.children,u),p=Ct.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&sT(i,u,a);else if(i.tag===19)sT(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(pt(Ct,p),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(u=a.child,y=null;u!==null;)i=u.alternate,i!==null&&wh(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),Ug(a,!1,y,u,w);break;case"backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&wh(i)===null){a.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}Ug(a,!0,u,null,w);break;case"together":Ug(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function bh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Hs(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Xo|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=Gi(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Gi(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function mO(i,a,u){switch(a.tag){case 3:tT(a),hl();break;case 5:vS(a);break;case 1:Vn(a.type)&&uh(a);break;case 4:vg(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,y=a.memoizedProps.value;pt(gh,p._currentValue),p._currentValue=y;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(pt(Ct,Ct.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?rT(i,a,u):(pt(Ct,Ct.current&1),i=Hs(i,a,u),i!==null?i.sibling:null);pt(Ct,Ct.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(i.flags&128)!==0){if(p)return iT(i,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),pt(Ct,Ct.current),p)break;return null;case 22:case 23:return a.lanes=0,JS(i,a,u)}return Hs(i,a,u)}var oT,zg,aT,lT;oT=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},zg=function(){},aT=function(i,a,u,p){var y=i.memoizedProps;if(y!==p){i=a.stateNode,Qo(ls.current);var w=null;switch(u){case"input":y=ft(i,y),p=ft(i,p),w=[];break;case"select":y=ue({},y,{value:void 0}),p=ue({},p,{value:void 0}),w=[];break;case"textarea":y=vi(i,y),p=vi(i,p),w=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=ah)}Tr(u,p);var C;u=null;for(J in y)if(!p.hasOwnProperty(J)&&y.hasOwnProperty(J)&&y[J]!=null)if(J==="style"){var j=y[J];for(C in j)j.hasOwnProperty(C)&&(u||(u={}),u[C]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(s.hasOwnProperty(J)?w||(w=[]):(w=w||[]).push(J,null));for(J in p){var z=p[J];if(j=y?.[J],p.hasOwnProperty(J)&&z!==j&&(z!=null||j!=null))if(J==="style")if(j){for(C in j)!j.hasOwnProperty(C)||z&&z.hasOwnProperty(C)||(u||(u={}),u[C]="");for(C in z)z.hasOwnProperty(C)&&j[C]!==z[C]&&(u||(u={}),u[C]=z[C])}else u||(w||(w=[]),w.push(J,u)),u=z;else J==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,j=j?j.__html:void 0,z!=null&&j!==z&&(w=w||[]).push(J,z)):J==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(J,""+z):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(s.hasOwnProperty(J)?(z!=null&&J==="onScroll"&&yt("scroll",i),w||j===z||(w=[])):(w=w||[]).push(J,z))}u&&(w=w||[]).push("style",u);var J=w;(a.updateQueue=J)&&(a.flags|=4)}},lT=function(i,a,u,p){u!==p&&(a.flags|=4)};function lu(i,a){if(!Tt)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function yn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(a)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=u,a}function gO(i,a,u){var p=a.pendingProps;switch(cg(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(a),null;case 1:return Vn(a.type)&&ch(),yn(a),null;case 3:return p=a.stateNode,gl(),_t(Ln),_t(mn),Sg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(ph(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Rr!==null&&(Jg(Rr),Rr=null))),zg(i,a),yn(a),null;case 5:wg(a);var y=Qo(ru.current);if(u=a.type,i!==null&&a.stateNode!=null)aT(i,a,u,p,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return yn(a),null}if(i=Qo(ls.current),ph(a)){p=a.stateNode,u=a.type;var w=a.memoizedProps;switch(p[as]=a,p[Jc]=w,i=(a.mode&1)!==0,u){case"dialog":yt("cancel",p),yt("close",p);break;case"iframe":case"object":case"embed":yt("load",p);break;case"video":case"audio":for(y=0;y<Qc.length;y++)yt(Qc[y],p);break;case"source":yt("error",p);break;case"img":case"image":case"link":yt("error",p),yt("load",p);break;case"details":yt("toggle",p);break;case"input":Mn(p,w),yt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},yt("invalid",p);break;case"textarea":Ao(p,w),yt("invalid",p)}Tr(u,w),y=null;for(var C in w)if(w.hasOwnProperty(C)){var j=w[C];C==="children"?typeof j=="string"?p.textContent!==j&&(w.suppressHydrationWarning!==!0&&oh(p.textContent,j,i),y=["children",j]):typeof j=="number"&&p.textContent!==""+j&&(w.suppressHydrationWarning!==!0&&oh(p.textContent,j,i),y=["children",""+j]):s.hasOwnProperty(C)&&j!=null&&C==="onScroll"&&yt("scroll",p)}switch(u){case"input":je(p),Ft(p,w,!0);break;case"textarea":je(p),wi(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=ah)}p=y,a.updateQueue=p,p!==null&&(a.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ic(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(u,{is:p.is}):(i=C.createElement(u),u==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,u),i[as]=a,i[Jc]=p,oT(i,a,!1,!1),a.stateNode=i;e:{switch(C=Fa(u,p),u){case"dialog":yt("cancel",i),yt("close",i),y=p;break;case"iframe":case"object":case"embed":yt("load",i),y=p;break;case"video":case"audio":for(y=0;y<Qc.length;y++)yt(Qc[y],i);y=p;break;case"source":yt("error",i),y=p;break;case"img":case"image":case"link":yt("error",i),yt("load",i),y=p;break;case"details":yt("toggle",i),y=p;break;case"input":Mn(i,p),y=ft(i,p),yt("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=ue({},p,{value:void 0}),yt("invalid",i);break;case"textarea":Ao(i,p),y=vi(i,p),yt("invalid",i);break;default:y=p}Tr(u,y),j=y;for(w in j)if(j.hasOwnProperty(w)){var z=j[w];w==="style"?ja(i,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Od(i,z)):w==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&ko(i,z):typeof z=="number"&&ko(i,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?z!=null&&w==="onScroll"&&yt("scroll",i):z!=null&&U(i,w,z,C))}switch(u){case"input":je(i),Ft(i,p,!1);break;case"textarea":je(i),wi(i);break;case"option":p.value!=null&&i.setAttribute("value",""+oe(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?rn(i,!!p.multiple,w,!1):p.defaultValue!=null&&rn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=ah)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return yn(a),null;case 6:if(i&&a.stateNode!=null)lT(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=Qo(ru.current),Qo(ls.current),ph(a)){if(p=a.stateNode,u=a.memoizedProps,p[as]=a,(w=p.nodeValue!==u)&&(i=Yn,i!==null))switch(i.tag){case 3:oh(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&oh(p.nodeValue,u,(i.mode&1)!==0)}w&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[as]=a,a.stateNode=p}return yn(a),null;case 13:if(_t(Ct),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Tt&&Xn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)dS(),hl(),a.flags|=98560,w=!1;else if(w=ph(a),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[as]=a}else hl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yn(a),w=!1}else Rr!==null&&(Jg(Rr),Rr=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Ct.current&1)!==0?Gt===0&&(Gt=3):ty())),a.updateQueue!==null&&(a.flags|=4),yn(a),null);case 4:return gl(),zg(i,a),i===null&&Yc(a.stateNode.containerInfo),yn(a),null;case 10:return mg(a.type._context),yn(a),null;case 17:return Vn(a.type)&&ch(),yn(a),null;case 19:if(_t(Ct),w=a.memoizedState,w===null)return yn(a),null;if(p=(a.flags&128)!==0,C=w.rendering,C===null)if(p)lu(w,!1);else{if(Gt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=wh(i),C!==null){for(a.flags|=128,lu(w,!1),p=C.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)w=u,i=p,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,i=C.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return pt(Ct,Ct.current&1|2),a.child}i=i.sibling}w.tail!==null&&gt()>wl&&(a.flags|=128,p=!0,lu(w,!1),a.lanes=4194304)}else{if(!p)if(i=wh(C),i!==null){if(a.flags|=128,p=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),lu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!Tt)return yn(a),null}else 2*gt()-w.renderingStartTime>wl&&u!==1073741824&&(a.flags|=128,p=!0,lu(w,!1),a.lanes=4194304);w.isBackwards?(C.sibling=a.child,a.child=C):(u=w.last,u!==null?u.sibling=C:a.child=C,w.last=C)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=gt(),a.sibling=null,u=Ct.current,pt(Ct,p?u&1|2:u&1),a):(yn(a),null);case 22:case 23:return ey(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Jn&1073741824)!==0&&(yn(a),a.subtreeFlags&6&&(a.flags|=8192)):yn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function yO(i,a){switch(cg(a),a.tag){case 1:return Vn(a.type)&&ch(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return gl(),_t(Ln),_t(mn),Sg(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return wg(a),null;case 13:if(_t(Ct),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));hl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return _t(Ct),null;case 4:return gl(),null;case 10:return mg(a.type._context),null;case 22:case 23:return ey(),null;case 24:return null;default:return null}}var Ah=!1,_n=!1,_O=typeof WeakSet=="function"?WeakSet:Set,xe=null;function _l(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){kt(i,a,p)}else u.current=null}function Bg(i,a,u){try{u()}catch(p){kt(i,a,p)}}var cT=!1;function vO(i,a){if(eg=Ls,i=zE(),qm(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var C=0,j=-1,z=-1,J=0,le=0,de=i,ae=null;t:for(;;){for(var Se;de!==u||y!==0&&de.nodeType!==3||(j=C+y),de!==w||p!==0&&de.nodeType!==3||(z=C+p),de.nodeType===3&&(C+=de.nodeValue.length),(Se=de.firstChild)!==null;)ae=de,de=Se;for(;;){if(de===i)break t;if(ae===u&&++J===y&&(j=C),ae===w&&++le===p&&(z=C),(Se=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=Se}u=j===-1||z===-1?null:{start:j,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(tg={focusedElem:i,selectionRange:u},Ls=!1,xe=a;xe!==null;)if(a=xe,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,xe=i;else for(;xe!==null;){a=xe;try{var Ce=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var ke=Ce.memoizedProps,Lt=Ce.memoizedState,G=a.stateNode,$=G.getSnapshotBeforeUpdate(a.elementType===a.type?ke:br(a.type,ke),Lt);G.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){kt(a,a.return,fe)}if(i=a.sibling,i!==null){i.return=a.return,xe=i;break}xe=a.return}return Ce=cT,cT=!1,Ce}function cu(i,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var w=y.destroy;y.destroy=void 0,w!==void 0&&Bg(a,u,w)}y=y.next}while(y!==p)}}function kh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function $g(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function uT(i){var a=i.alternate;a!==null&&(i.alternate=null,uT(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[as],delete a[Jc],delete a[ig],delete a[tO],delete a[nO])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function dT(i){return i.tag===5||i.tag===3||i.tag===4}function hT(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||dT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wg(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ah));else if(p!==4&&(i=i.child,i!==null))for(Wg(i,a,u),i=i.sibling;i!==null;)Wg(i,a,u),i=i.sibling}function Hg(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Hg(i,a,u),i=i.sibling;i!==null;)Hg(i,a,u),i=i.sibling}var an=null,Ar=!1;function Bi(i,a,u){for(u=u.child;u!==null;)fT(i,a,u),u=u.sibling}function fT(i,a,u){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(Mo,u)}catch{}switch(u.tag){case 5:_n||_l(u,a);case 6:var p=an,y=Ar;an=null,Bi(i,a,u),an=p,Ar=y,an!==null&&(Ar?(i=an,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):an.removeChild(u.stateNode));break;case 18:an!==null&&(Ar?(i=an,u=u.stateNode,i.nodeType===8?sg(i.parentNode,u):i.nodeType===1&&sg(i,u),Ni(i)):sg(an,u.stateNode));break;case 4:p=an,y=Ar,an=u.stateNode.containerInfo,Ar=!0,Bi(i,a,u),an=p,Ar=y;break;case 0:case 11:case 14:case 15:if(!_n&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var w=y,C=w.destroy;w=w.tag,C!==void 0&&((w&2)!==0||(w&4)!==0)&&Bg(u,a,C),y=y.next}while(y!==p)}Bi(i,a,u);break;case 1:if(!_n&&(_l(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(j){kt(u,a,j)}Bi(i,a,u);break;case 21:Bi(i,a,u);break;case 22:u.mode&1?(_n=(p=_n)||u.memoizedState!==null,Bi(i,a,u),_n=p):Bi(i,a,u);break;default:Bi(i,a,u)}}function pT(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new _O),a.forEach(function(p){var y=bO.bind(null,i,p);u.has(p)||(u.add(p),p.then(y,y))})}}function kr(i,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];try{var w=i,C=a,j=C;e:for(;j!==null;){switch(j.tag){case 5:an=j.stateNode,Ar=!1;break e;case 3:an=j.stateNode.containerInfo,Ar=!0;break e;case 4:an=j.stateNode.containerInfo,Ar=!0;break e}j=j.return}if(an===null)throw Error(t(160));fT(w,C,y),an=null,Ar=!1;var z=y.alternate;z!==null&&(z.return=null),y.return=null}catch(J){kt(y,a,J)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)mT(a,i),a=a.sibling}function mT(i,a){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(kr(a,i),us(i),p&4){try{cu(3,i,i.return),kh(3,i)}catch(ke){kt(i,i.return,ke)}try{cu(5,i,i.return)}catch(ke){kt(i,i.return,ke)}}break;case 1:kr(a,i),us(i),p&512&&u!==null&&_l(u,u.return);break;case 5:if(kr(a,i),us(i),p&512&&u!==null&&_l(u,u.return),i.flags&32){var y=i.stateNode;try{ko(y,"")}catch(ke){kt(i,i.return,ke)}}if(p&4&&(y=i.stateNode,y!=null)){var w=i.memoizedProps,C=u!==null?u.memoizedProps:w,j=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{j==="input"&&w.type==="radio"&&w.name!=null&&Rn(y,w),Fa(j,C);var J=Fa(j,w);for(C=0;C<z.length;C+=2){var le=z[C],de=z[C+1];le==="style"?ja(y,de):le==="dangerouslySetInnerHTML"?Od(y,de):le==="children"?ko(y,de):U(y,le,de,J)}switch(j){case"input":bn(y,w);break;case"textarea":Dd(y,w);break;case"select":var ae=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var Se=w.value;Se!=null?rn(y,!!w.multiple,Se,!1):ae!==!!w.multiple&&(w.defaultValue!=null?rn(y,!!w.multiple,w.defaultValue,!0):rn(y,!!w.multiple,w.multiple?[]:"",!1))}y[Jc]=w}catch(ke){kt(i,i.return,ke)}}break;case 6:if(kr(a,i),us(i),p&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,w=i.memoizedProps;try{y.nodeValue=w}catch(ke){kt(i,i.return,ke)}}break;case 3:if(kr(a,i),us(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Ni(a.containerInfo)}catch(ke){kt(i,i.return,ke)}break;case 4:kr(a,i),us(i);break;case 13:kr(a,i),us(i),y=i.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Kg=gt())),p&4&&pT(i);break;case 22:if(le=u!==null&&u.memoizedState!==null,i.mode&1?(_n=(J=_n)||le,kr(a,i),_n=J):kr(a,i),us(i),p&8192){if(J=i.memoizedState!==null,(i.stateNode.isHidden=J)&&!le&&(i.mode&1)!==0)for(xe=i,le=i.child;le!==null;){for(de=xe=le;xe!==null;){switch(ae=xe,Se=ae.child,ae.tag){case 0:case 11:case 14:case 15:cu(4,ae,ae.return);break;case 1:_l(ae,ae.return);var Ce=ae.stateNode;if(typeof Ce.componentWillUnmount=="function"){p=ae,u=ae.return;try{a=p,Ce.props=a.memoizedProps,Ce.state=a.memoizedState,Ce.componentWillUnmount()}catch(ke){kt(p,u,ke)}}break;case 5:_l(ae,ae.return);break;case 22:if(ae.memoizedState!==null){_T(de);continue}}Se!==null?(Se.return=ae,xe=Se):_T(de)}le=le.sibling}e:for(le=null,de=i;;){if(de.tag===5){if(le===null){le=de;try{y=de.stateNode,J?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(j=de.stateNode,z=de.memoizedProps.style,C=z!=null&&z.hasOwnProperty("display")?z.display:null,j.style.display=Ti("display",C))}catch(ke){kt(i,i.return,ke)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=J?"":de.memoizedProps}catch(ke){kt(i,i.return,ke)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===i)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===i)break e;for(;de.sibling===null;){if(de.return===null||de.return===i)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:kr(a,i),us(i),p&4&&pT(i);break;case 21:break;default:kr(a,i),us(i)}}function us(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(dT(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(ko(y,""),p.flags&=-33);var w=hT(i);Hg(i,w,y);break;case 3:case 4:var C=p.stateNode.containerInfo,j=hT(i);Wg(i,j,C);break;default:throw Error(t(161))}}catch(z){kt(i,i.return,z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function wO(i,a,u){xe=i,gT(i)}function gT(i,a,u){for(var p=(i.mode&1)!==0;xe!==null;){var y=xe,w=y.child;if(y.tag===22&&p){var C=y.memoizedState!==null||Ah;if(!C){var j=y.alternate,z=j!==null&&j.memoizedState!==null||_n;j=Ah;var J=_n;if(Ah=C,(_n=z)&&!J)for(xe=y;xe!==null;)C=xe,z=C.child,C.tag===22&&C.memoizedState!==null?vT(y):z!==null?(z.return=C,xe=z):vT(y);for(;w!==null;)xe=w,gT(w),w=w.sibling;xe=y,Ah=j,_n=J}yT(i)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,xe=w):yT(i)}}function yT(i){for(;xe!==null;){var a=xe;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:_n||kh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!_n)if(u===null)p.componentDidMount();else{var y=a.elementType===a.type?u.memoizedProps:br(a.type,u.memoizedProps);p.componentDidUpdate(y,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&_S(a,w,p);break;case 3:var C=a.updateQueue;if(C!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}_S(a,C,u)}break;case 5:var j=a.stateNode;if(u===null&&a.flags&4){u=j;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var J=a.alternate;if(J!==null){var le=J.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&Ni(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}_n||a.flags&512&&$g(a)}catch(ae){kt(a,a.return,ae)}}if(a===i){xe=null;break}if(u=a.sibling,u!==null){u.return=a.return,xe=u;break}xe=a.return}}function _T(i){for(;xe!==null;){var a=xe;if(a===i){xe=null;break}var u=a.sibling;if(u!==null){u.return=a.return,xe=u;break}xe=a.return}}function vT(i){for(;xe!==null;){var a=xe;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{kh(4,a)}catch(z){kt(a,u,z)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var y=a.return;try{p.componentDidMount()}catch(z){kt(a,y,z)}}var w=a.return;try{$g(a)}catch(z){kt(a,w,z)}break;case 5:var C=a.return;try{$g(a)}catch(z){kt(a,C,z)}}}catch(z){kt(a,a.return,z)}if(a===i){xe=null;break}var j=a.sibling;if(j!==null){j.return=a.return,xe=j;break}xe=a.return}}var EO=Math.ceil,Ph=W.ReactCurrentDispatcher,qg=W.ReactCurrentOwner,fr=W.ReactCurrentBatchConfig,rt=0,Xt=null,zt=null,ln=0,Jn=0,vl=Vi(0),Gt=0,uu=null,Xo=0,Nh=0,Gg=0,du=null,Fn=null,Kg=0,wl=1/0,qs=null,Dh=!1,Qg=null,$i=null,Oh=!1,Wi=null,Mh=0,hu=0,Yg=null,Lh=-1,Vh=0;function kn(){return(rt&6)!==0?gt():Lh!==-1?Lh:Lh=gt()}function Hi(i){return(i.mode&1)===0?1:(rt&2)!==0&&ln!==0?ln&-ln:sO.transition!==null?(Vh===0&&(Vh=Dc()),Vh):(i=Xe,i!==0||(i=window.event,i=i===void 0?16:Qa(i.type)),i)}function Pr(i,a,u,p){if(50<hu)throw hu=0,Yg=null,Error(t(185));Fo(i,u,p),((rt&2)===0||i!==Xt)&&(i===Xt&&((rt&2)===0&&(Nh|=u),Gt===4&&qi(i,ln)),Un(i,p),u===1&&rt===0&&(a.mode&1)===0&&(wl=gt()+500,dh&&Fi()))}function Un(i,a){var u=i.callbackNode;jo(i,a);var p=Ds(i,i===Xt?ln:0);if(p===0)u!==null&&Ba(u),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(u!=null&&Ba(u),a===1)i.tag===0?rO(ET.bind(null,i)):oS(ET.bind(null,i)),ZD(function(){(rt&6)===0&&Fi()}),u=null;else{switch(Xr(p)){case 1:u=$a;break;case 4:u=kc;break;case 16:u=Oo;break;case 536870912:u=Wa;break;default:u=Oo}u=AT(u,wT.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function wT(i,a){if(Lh=-1,Vh=0,(rt&6)!==0)throw Error(t(327));var u=i.callbackNode;if(El()&&i.callbackNode!==u)return null;var p=Ds(i,i===Xt?ln:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=jh(i,p);else{a=p;var y=rt;rt|=2;var w=TT();(Xt!==i||ln!==a)&&(qs=null,wl=gt()+500,Zo(i,a));do try{IO();break}catch(j){ST(i,j)}while(!0);pg(),Ph.current=w,rt=y,zt!==null?a=0:(Xt=null,ln=0,a=Gt)}if(a!==0){if(a===2&&(y=Nc(i),y!==0&&(p=y,a=Xg(i,y))),a===1)throw u=uu,Zo(i,0),qi(i,p),Un(i,gt()),u;if(a===6)qi(i,p);else{if(y=i.current.alternate,(p&30)===0&&!SO(y)&&(a=jh(i,p),a===2&&(w=Nc(i),w!==0&&(p=w,a=Xg(i,w))),a===1))throw u=uu,Zo(i,0),qi(i,p),Un(i,gt()),u;switch(i.finishedWork=y,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:ea(i,Fn,qs);break;case 3:if(qi(i,p),(p&130023424)===p&&(a=Kg+500-gt(),10<a)){if(Ds(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){kn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=rg(ea.bind(null,i,Fn,qs),a);break}ea(i,Fn,qs);break;case 4:if(qi(i,p),(p&4194240)===p)break;for(a=i.eventTimes,y=-1;0<p;){var C=31-Hn(p);w=1<<C,C=a[C],C>y&&(y=C),p&=~w}if(p=y,p=gt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*EO(p/1960))-p,10<p){i.timeoutHandle=rg(ea.bind(null,i,Fn,qs),p);break}ea(i,Fn,qs);break;case 5:ea(i,Fn,qs);break;default:throw Error(t(329))}}}return Un(i,gt()),i.callbackNode===u?wT.bind(null,i):null}function Xg(i,a){var u=du;return i.current.memoizedState.isDehydrated&&(Zo(i,a).flags|=256),i=jh(i,a),i!==2&&(a=Fn,Fn=u,a!==null&&Jg(a)),i}function Jg(i){Fn===null?Fn=i:Fn.push.apply(Fn,i)}function SO(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var y=u[p],w=y.getSnapshot;y=y.value;try{if(!Cr(w(),y))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function qi(i,a){for(a&=~Gg,a&=~Nh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-Hn(a),p=1<<u;i[u]=-1,a&=~p}}function ET(i){if((rt&6)!==0)throw Error(t(327));El();var a=Ds(i,0);if((a&1)===0)return Un(i,gt()),null;var u=jh(i,a);if(i.tag!==0&&u===2){var p=Nc(i);p!==0&&(a=p,u=Xg(i,p))}if(u===1)throw u=uu,Zo(i,0),qi(i,a),Un(i,gt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,ea(i,Fn,qs),Un(i,gt()),null}function Zg(i,a){var u=rt;rt|=1;try{return i(a)}finally{rt=u,rt===0&&(wl=gt()+500,dh&&Fi())}}function Jo(i){Wi!==null&&Wi.tag===0&&(rt&6)===0&&El();var a=rt;rt|=1;var u=fr.transition,p=Xe;try{if(fr.transition=null,Xe=1,i)return i()}finally{Xe=p,fr.transition=u,rt=a,(rt&6)===0&&Fi()}}function ey(){Jn=vl.current,_t(vl)}function Zo(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,JD(u)),zt!==null)for(u=zt.return;u!==null;){var p=u;switch(cg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ch();break;case 3:gl(),_t(Ln),_t(mn),Sg();break;case 5:wg(p);break;case 4:gl();break;case 13:_t(Ct);break;case 19:_t(Ct);break;case 10:mg(p.type._context);break;case 22:case 23:ey()}u=u.return}if(Xt=i,zt=i=Gi(i.current,null),ln=Jn=a,Gt=0,uu=null,Gg=Nh=Xo=0,Fn=du=null,Ko!==null){for(a=0;a<Ko.length;a++)if(u=Ko[a],p=u.interleaved,p!==null){u.interleaved=null;var y=p.next,w=u.pending;if(w!==null){var C=w.next;w.next=y,p.next=C}u.pending=p}Ko=null}return i}function ST(i,a){do{var u=zt;try{if(pg(),Eh.current=xh,Sh){for(var p=Rt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Sh=!1}if(Yo=0,Yt=qt=Rt=null,su=!1,iu=0,qg.current=null,u===null||u.return===null){Gt=1,uu=a,zt=null;break}e:{var w=i,C=u.return,j=u,z=a;if(a=ln,j.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var J=z,le=j,de=le.tag;if((le.mode&1)===0&&(de===0||de===11||de===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var Se=GS(C);if(Se!==null){Se.flags&=-257,KS(Se,C,j,w,a),Se.mode&1&&qS(w,J,a),a=Se,z=J;var Ce=a.updateQueue;if(Ce===null){var ke=new Set;ke.add(z),a.updateQueue=ke}else Ce.add(z);break e}else{if((a&1)===0){qS(w,J,a),ty();break e}z=Error(t(426))}}else if(Tt&&j.mode&1){var Lt=GS(C);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),KS(Lt,C,j,w,a),hg(yl(z,j));break e}}w=z=yl(z,j),Gt!==4&&(Gt=2),du===null?du=[w]:du.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var G=WS(w,z,a);yS(w,G);break e;case 1:j=z;var $=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&($i===null||!$i.has(Q)))){w.flags|=65536,a&=-a,w.lanes|=a;var fe=HS(w,j,a);yS(w,fe);break e}}w=w.return}while(w!==null)}xT(u)}catch(Pe){a=Pe,zt===u&&u!==null&&(zt=u=u.return);continue}break}while(!0)}function TT(){var i=Ph.current;return Ph.current=xh,i===null?xh:i}function ty(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Xt===null||(Xo&268435455)===0&&(Nh&268435455)===0||qi(Xt,ln)}function jh(i,a){var u=rt;rt|=2;var p=TT();(Xt!==i||ln!==a)&&(qs=null,Zo(i,a));do try{TO();break}catch(y){ST(i,y)}while(!0);if(pg(),rt=u,Ph.current=p,zt!==null)throw Error(t(261));return Xt=null,ln=0,Gt}function TO(){for(;zt!==null;)IT(zt)}function IO(){for(;zt!==null&&!Do();)IT(zt)}function IT(i){var a=bT(i.alternate,i,Jn);i.memoizedProps=i.pendingProps,a===null?xT(i):zt=a,qg.current=null}function xT(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=gO(u,a,Jn),u!==null){zt=u;return}}else{if(u=yO(u,a),u!==null){u.flags&=32767,zt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Gt=6,zt=null;return}}if(a=a.sibling,a!==null){zt=a;return}zt=a=i}while(a!==null);Gt===0&&(Gt=5)}function ea(i,a,u){var p=Xe,y=fr.transition;try{fr.transition=null,Xe=1,xO(i,a,u,p)}finally{fr.transition=y,Xe=p}return null}function xO(i,a,u,p){do El();while(Wi!==null);if((rt&6)!==0)throw Error(t(327));u=i.finishedWork;var y=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if(zm(i,w),i===Xt&&(zt=Xt=null,ln=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Oh||(Oh=!0,AT(Oo,function(){return El(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=fr.transition,fr.transition=null;var C=Xe;Xe=1;var j=rt;rt|=4,qg.current=null,vO(i,u),mT(u,i),HD(tg),Ls=!!eg,tg=eg=null,i.current=u,wO(u),Ns(),rt=j,Xe=C,fr.transition=w}else i.current=u;if(Oh&&(Oh=!1,Wi=i,Mh=y),w=i.pendingLanes,w===0&&($i=null),Hd(u.stateNode),Un(i,gt()),a!==null)for(p=i.onRecoverableError,u=0;u<a.length;u++)y=a[u],p(y.value,{componentStack:y.stack,digest:y.digest});if(Dh)throw Dh=!1,i=Qg,Qg=null,i;return(Mh&1)!==0&&i.tag!==0&&El(),w=i.pendingLanes,(w&1)!==0?i===Yg?hu++:(hu=0,Yg=i):hu=0,Fi(),null}function El(){if(Wi!==null){var i=Xr(Mh),a=fr.transition,u=Xe;try{if(fr.transition=null,Xe=16>i?16:i,Wi===null)var p=!1;else{if(i=Wi,Wi=null,Mh=0,(rt&6)!==0)throw Error(t(331));var y=rt;for(rt|=4,xe=i.current;xe!==null;){var w=xe,C=w.child;if((xe.flags&16)!==0){var j=w.deletions;if(j!==null){for(var z=0;z<j.length;z++){var J=j[z];for(xe=J;xe!==null;){var le=xe;switch(le.tag){case 0:case 11:case 15:cu(8,le,w)}var de=le.child;if(de!==null)de.return=le,xe=de;else for(;xe!==null;){le=xe;var ae=le.sibling,Se=le.return;if(uT(le),le===J){xe=null;break}if(ae!==null){ae.return=Se,xe=ae;break}xe=Se}}}var Ce=w.alternate;if(Ce!==null){var ke=Ce.child;if(ke!==null){Ce.child=null;do{var Lt=ke.sibling;ke.sibling=null,ke=Lt}while(ke!==null)}}xe=w}}if((w.subtreeFlags&2064)!==0&&C!==null)C.return=w,xe=C;else e:for(;xe!==null;){if(w=xe,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:cu(9,w,w.return)}var G=w.sibling;if(G!==null){G.return=w.return,xe=G;break e}xe=w.return}}var $=i.current;for(xe=$;xe!==null;){C=xe;var Q=C.child;if((C.subtreeFlags&2064)!==0&&Q!==null)Q.return=C,xe=Q;else e:for(C=$;xe!==null;){if(j=xe,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:kh(9,j)}}catch(Pe){kt(j,j.return,Pe)}if(j===C){xe=null;break e}var fe=j.sibling;if(fe!==null){fe.return=j.return,xe=fe;break e}xe=j.return}}if(rt=y,Fi(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(Mo,i)}catch{}p=!0}return p}finally{Xe=u,fr.transition=a}}return!1}function CT(i,a,u){a=yl(u,a),a=WS(i,a,1),i=zi(i,a,1),a=kn(),i!==null&&(Fo(i,1,a),Un(i,a))}function kt(i,a,u){if(i.tag===3)CT(i,i,u);else for(;a!==null;){if(a.tag===3){CT(a,i,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&($i===null||!$i.has(p))){i=yl(u,i),i=HS(a,i,1),a=zi(a,i,1),i=kn(),a!==null&&(Fo(a,1,i),Un(a,i));break}}a=a.return}}function CO(i,a,u){var p=i.pingCache;p!==null&&p.delete(a),a=kn(),i.pingedLanes|=i.suspendedLanes&u,Xt===i&&(ln&u)===u&&(Gt===4||Gt===3&&(ln&130023424)===ln&&500>gt()-Kg?Zo(i,0):Gg|=u),Un(i,a)}function RT(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ai,Ai<<=1,(Ai&130023424)===0&&(Ai=4194304)));var u=kn();i=$s(i,a),i!==null&&(Fo(i,a,u),Un(i,u))}function RO(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),RT(i,u)}function bO(i,a){var u=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),RT(i,u)}var bT;bT=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||Ln.current)jn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return jn=!1,mO(i,a,u);jn=(i.flags&131072)!==0}else jn=!1,Tt&&(a.flags&1048576)!==0&&aS(a,fh,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;bh(i,a),i=a.pendingProps;var y=cl(a,mn.current);ml(a,u),y=xg(null,a,p,i,y,u);var w=Cg();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Vn(p)?(w=!0,uh(a)):w=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,_g(a),y.updater=Ch,a.stateNode=y,y._reactInternals=a,Ng(a,p,i,u),a=Lg(null,a,p,!0,w,u)):(a.tag=0,Tt&&w&&lg(a),An(null,a,y,u),a=a.child),a;case 16:p=a.elementType;e:{switch(bh(i,a),i=a.pendingProps,y=p._init,p=y(p._payload),a.type=p,y=a.tag=kO(p),i=br(p,i),y){case 0:a=Mg(null,a,p,i,u);break e;case 1:a=eT(null,a,p,i,u);break e;case 11:a=QS(null,a,p,i,u);break e;case 14:a=YS(null,a,p,br(p.type,i),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:br(p,y),Mg(i,a,p,y,u);case 1:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:br(p,y),eT(i,a,p,y,u);case 3:e:{if(tT(a),i===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,y=w.element,gS(i,a),vh(a,p,null,u);var C=a.memoizedState;if(p=C.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){y=yl(Error(t(423)),a),a=nT(i,a,p,u,y);break e}else if(p!==y){y=yl(Error(t(424)),a),a=nT(i,a,p,u,y);break e}else for(Xn=Li(a.stateNode.containerInfo.firstChild),Yn=a,Tt=!0,Rr=null,u=pS(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(hl(),p===y){a=Hs(i,a,u);break e}An(i,a,p,u)}a=a.child}return a;case 5:return vS(a),i===null&&dg(a),p=a.type,y=a.pendingProps,w=i!==null?i.memoizedProps:null,C=y.children,ng(p,y)?C=null:w!==null&&ng(p,w)&&(a.flags|=32),ZS(i,a),An(i,a,C,u),a.child;case 6:return i===null&&dg(a),null;case 13:return rT(i,a,u);case 4:return vg(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=fl(a,null,p,u):An(i,a,p,u),a.child;case 11:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:br(p,y),QS(i,a,p,y,u);case 7:return An(i,a,a.pendingProps,u),a.child;case 8:return An(i,a,a.pendingProps.children,u),a.child;case 12:return An(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,y=a.pendingProps,w=a.memoizedProps,C=y.value,pt(gh,p._currentValue),p._currentValue=C,w!==null)if(Cr(w.value,C)){if(w.children===y.children&&!Ln.current){a=Hs(i,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var j=w.dependencies;if(j!==null){C=w.child;for(var z=j.firstContext;z!==null;){if(z.context===p){if(w.tag===1){z=Ws(-1,u&-u),z.tag=2;var J=w.updateQueue;if(J!==null){J=J.shared;var le=J.pending;le===null?z.next=z:(z.next=le.next,le.next=z),J.pending=z}}w.lanes|=u,z=w.alternate,z!==null&&(z.lanes|=u),gg(w.return,u,a),j.lanes|=u;break}z=z.next}}else if(w.tag===10)C=w.type===a.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(t(341));C.lanes|=u,j=C.alternate,j!==null&&(j.lanes|=u),gg(C,u,a),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===a){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}An(i,a,y.children,u),a=a.child}return a;case 9:return y=a.type,p=a.pendingProps.children,ml(a,u),y=dr(y),p=p(y),a.flags|=1,An(i,a,p,u),a.child;case 14:return p=a.type,y=br(p,a.pendingProps),y=br(p.type,y),YS(i,a,p,y,u);case 15:return XS(i,a,a.type,a.pendingProps,u);case 17:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:br(p,y),bh(i,a),a.tag=1,Vn(p)?(i=!0,uh(a)):i=!1,ml(a,u),BS(a,p,y),Ng(a,p,y,u),Lg(null,a,p,!0,i,u);case 19:return iT(i,a,u);case 22:return JS(i,a,u)}throw Error(t(156,a.tag))};function AT(i,a){return Ac(i,a)}function AO(i,a,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(i,a,u,p){return new AO(i,a,u,p)}function ny(i){return i=i.prototype,!(!i||!i.isReactComponent)}function kO(i){if(typeof i=="function")return ny(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===ve)return 14}return 2}function Gi(i,a){var u=i.alternate;return u===null?(u=pr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Fh(i,a,u,p,y,w){var C=2;if(p=i,typeof i=="function")ny(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case k:return ta(u.children,y,w,a);case A:C=8,y|=8;break;case N:return i=pr(12,u,a,y|2),i.elementType=N,i.lanes=w,i;case D:return i=pr(13,u,a,y),i.elementType=D,i.lanes=w,i;case me:return i=pr(19,u,a,y),i.elementType=me,i.lanes=w,i;case Ee:return Uh(u,y,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:C=10;break e;case O:C=9;break e;case F:C=11;break e;case ve:C=14;break e;case pe:C=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=pr(C,u,a,y),a.elementType=i,a.type=p,a.lanes=w,a}function ta(i,a,u,p){return i=pr(7,i,p,a),i.lanes=u,i}function Uh(i,a,u,p){return i=pr(22,i,p,a),i.elementType=Ee,i.lanes=u,i.stateNode={isHidden:!1},i}function ry(i,a,u){return i=pr(6,i,null,a),i.lanes=u,i}function sy(i,a,u){return a=pr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function PO(i,a,u,p,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oc(0),this.expirationTimes=Oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oc(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function iy(i,a,u,p,y,w,C,j,z){return i=new PO(i,a,u,j,z),a===1?(a=1,w===!0&&(a|=8)):a=0,w=pr(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},_g(w),i}function NO(i,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:p==null?null:""+p,children:i,containerInfo:a,implementation:u}}function kT(i){if(!i)return ji;i=i._reactInternals;e:{if(Ir(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Vn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Vn(u))return sS(i,u,a)}return a}function PT(i,a,u,p,y,w,C,j,z){return i=iy(u,p,!0,i,y,w,C,j,z),i.context=kT(null),u=i.current,p=kn(),y=Hi(u),w=Ws(p,y),w.callback=a??null,zi(u,w,y),i.current.lanes=y,Fo(i,y,p),Un(i,p),i}function zh(i,a,u,p){var y=a.current,w=kn(),C=Hi(y);return u=kT(u),a.context===null?a.context=u:a.pendingContext=u,a=Ws(w,C),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=zi(y,a,C),i!==null&&(Pr(i,y,C,w),_h(i,y,C)),C}function Bh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function NT(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function oy(i,a){NT(i,a),(i=i.alternate)&&NT(i,a)}function DO(){return null}var DT=typeof reportError=="function"?reportError:function(i){console.error(i)};function ay(i){this._internalRoot=i}$h.prototype.render=ay.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));zh(i,a,null,null)},$h.prototype.unmount=ay.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Jo(function(){zh(null,i,null,null)}),a[Fs]=null}};function $h(i){this._internalRoot=i}$h.prototype.unstable_scheduleHydration=function(i){if(i){var a=jc();i={blockedOn:null,target:i,priority:a};for(var u=0;u<qn.length&&a!==0&&a<qn[u].priority;u++);qn.splice(u,0,i),u===0&&Ga(i)}};function ly(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Wh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function OT(){}function OO(i,a,u,p,y){if(y){if(typeof p=="function"){var w=p;p=function(){var J=Bh(C);w.call(J)}}var C=PT(a,p,i,0,null,!1,!1,"",OT);return i._reactRootContainer=C,i[Fs]=C.current,Yc(i.nodeType===8?i.parentNode:i),Jo(),C}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var j=p;p=function(){var J=Bh(z);j.call(J)}}var z=iy(i,0,!1,null,null,!1,!1,"",OT);return i._reactRootContainer=z,i[Fs]=z.current,Yc(i.nodeType===8?i.parentNode:i),Jo(function(){zh(a,z,u,p)}),z}function Hh(i,a,u,p,y){var w=u._reactRootContainer;if(w){var C=w;if(typeof y=="function"){var j=y;y=function(){var z=Bh(C);j.call(z)}}zh(a,C,i,y)}else C=OO(u,a,i,y,p);return Bh(C)}Lc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=ot(a.pendingLanes);u!==0&&(Mc(a,u|1),Un(a,gt()),(rt&6)===0&&(wl=gt()+500,Fi()))}break;case 13:Jo(function(){var p=$s(i,1);if(p!==null){var y=kn();Pr(p,i,1,y)}}),oy(i,1)}},Ha=function(i){if(i.tag===13){var a=$s(i,134217728);if(a!==null){var u=kn();Pr(a,i,134217728,u)}oy(i,134217728)}},Vc=function(i){if(i.tag===13){var a=Hi(i),u=$s(i,a);if(u!==null){var p=kn();Pr(u,i,a,p)}oy(i,a)}},jc=function(){return Xe},Fc=function(i,a){var u=Xe;try{return Xe=i,a()}finally{Xe=u}},As=function(i,a,u){switch(a){case"input":if(bn(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==i&&p.form===i.form){var y=lh(p);if(!y)throw Error(t(90));$e(p),bn(p,y)}}}break;case"textarea":Dd(i,u);break;case"select":a=u.value,a!=null&&rn(i,!!u.multiple,a,!1)}},Ld=Zg,Vd=Jo;var MO={usingClientEntryPoint:!1,Events:[Zc,al,lh,xi,Ci,Zg]},fu={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LO={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wd(i),i===null?null:i.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||DO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{Mo=qh.inject(LO),Wn=qh}catch{}}return zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MO,zn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ly(a))throw Error(t(200));return NO(i,a,null,u)},zn.createRoot=function(i,a){if(!ly(i))throw Error(t(299));var u=!1,p="",y=DT;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=iy(i,1,!1,null,null,u,!1,p,y),i[Fs]=a.current,Yc(i.nodeType===8?i.parentNode:i),new ay(a)},zn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wd(a),i=i===null?null:i.stateNode,i},zn.flushSync=function(i){return Jo(i)},zn.hydrate=function(i,a,u){if(!Wh(a))throw Error(t(200));return Hh(null,i,a,!0,u)},zn.hydrateRoot=function(i,a,u){if(!ly(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,y=!1,w="",C=DT;if(u!=null&&(u.unstable_strictMode===!0&&(y=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),a=PT(a,null,i,1,u??null,y,!1,w,C),i[Fs]=a.current,Yc(i),p)for(i=0;i<p.length;i++)u=p[i],y=u._getVersion,y=y(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,y]:a.mutableSourceEagerHydrationData.push(u,y);return new $h(a)},zn.render=function(i,a,u){if(!Wh(a))throw Error(t(200));return Hh(null,i,a,!1,u)},zn.unmountComponentAtNode=function(i){if(!Wh(i))throw Error(t(40));return i._reactRootContainer?(Jo(function(){Hh(null,null,i,!1,function(){i._reactRootContainer=null,i[Fs]=null})}),!0):!1},zn.unstable_batchedUpdates=Zg,zn.unstable_renderSubtreeIntoContainer=function(i,a,u,p){if(!Wh(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Hh(i,a,u,!1,p)},zn.version="18.3.1-next-f1338f8080-20240426",zn}var BT;function vC(){if(BT)return dy.exports;BT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dy.exports=WO(),dy.exports}var $T;function HO(){if($T)return Gh;$T=1;var n=vC();return Gh.createRoot=n.createRoot,Gh.hydrateRoot=n.hydrateRoot,Gh}var qO=HO();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),WT=n=>{const e=KO(n);return e.charAt(0).toUpperCase()+e.slice(1)},wC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=S.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},d)=>S.createElement("svg",{ref:d,...QO,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:wC("lucide",s),...c},[...l.map(([f,m])=>S.createElement(f,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(n,e)=>{const t=S.forwardRef(({className:r,...s},o)=>S.createElement(YO,{ref:o,iconNode:e,className:wC(`lucide-${GO(WT(n))}`,`lucide-${n}`,r),...s}));return t.displayName=WT(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],EC=jt("arrow-left",XO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],ZO=jt("bell-off",JO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],tM=jt("bell",eM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],SC=jt("calendar",nM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],py=jt("camera",rM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iM=jt("check",sM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],TC=jt("chevron-down",oM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lM=jt("chevron-left",aM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],uM=jt("chevron-right",cM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hM=jt("chevron-up",dM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],IC=jt("funnel",fM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],mM=jt("grip-vertical",pM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],l_=jt("log-out",gM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],xC=jt("message-square",yM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],vM=jt("moon",_M);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],EM=jt("plus",wM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$u=jt("star",SM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],IM=jt("sun",TM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],CM=jt("upload",xM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],CC=jt("user",RM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],RC=jt("x",bM);function bC(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=bC(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function AC(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=bC(n))&&(r&&(r+=" "),r+=e);return r}const AM=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},kM=(n,e)=>({classGroupId:n,validator:e}),kC=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),Of="-",HT=[],PM="arbitrary..",NM=n=>{const e=OM(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return DM(l);const c=l.split(Of),d=c[0]===""&&c.length>1?1:0;return PC(c,d,e)},getConflictingClassGroupIds:(l,c)=>{if(c){const d=r[l],f=t[l];return d?f?AM(f,d):d:f||HT}return t[l]||HT}}},PC=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const s=n[e],o=t.nextPart.get(s);if(o){const f=PC(n,e+1,o);if(f)return f}const l=t.validators;if(l===null)return;const c=e===0?n.join(Of):n.slice(e).join(Of),d=l.length;for(let f=0;f<d;f++){const m=l[f];if(m.validator(c))return m.classGroupId}},DM=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?PM+r:void 0})(),OM=n=>{const{theme:e,classGroups:t}=n;return MM(t,e)},MM=(n,e)=>{const t=kC();for(const r in n){const s=n[r];gv(s,t,r,e)}return t},gv=(n,e,t,r)=>{const s=n.length;for(let o=0;o<s;o++){const l=n[o];LM(l,e,t,r)}},LM=(n,e,t,r)=>{if(typeof n=="string"){VM(n,e,t);return}if(typeof n=="function"){jM(n,e,t,r);return}FM(n,e,t,r)},VM=(n,e,t)=>{const r=n===""?e:NC(e,n);r.classGroupId=t},jM=(n,e,t,r)=>{if(UM(n)){gv(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(kM(t,n))},FM=(n,e,t,r)=>{const s=Object.entries(n),o=s.length;for(let l=0;l<o;l++){const[c,d]=s[l];gv(d,NC(e,c),t,r)}},NC=(n,e)=>{let t=n;const r=e.split(Of),s=r.length;for(let o=0;o<s;o++){const l=r[o];let c=t.nextPart.get(l);c||(c=kC(),t.nextPart.set(l,c)),t=c}return t},UM=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,zM=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const s=(o,l)=>{t[o]=l,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(o){let l=t[o];if(l!==void 0)return l;if((l=r[o])!==void 0)return s(o,l),l},set(o,l){o in t?t[o]=l:s(o,l)}}},c_="!",qT=":",BM=[],GT=(n,e,t,r,s)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:s}),$M=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let l=0,c=0,d=0,f;const m=s.length;for(let x=0;x<m;x++){const R=s[x];if(l===0&&c===0){if(R===qT){o.push(s.slice(d,x)),d=x+1;continue}if(R==="/"){f=x;continue}}R==="["?l++:R==="]"?l--:R==="("?c++:R===")"&&c--}const g=o.length===0?s:s.slice(d);let v=g,I=!1;g.endsWith(c_)?(v=g.slice(0,-1),I=!0):g.startsWith(c_)&&(v=g.slice(1),I=!0);const b=f&&f>d?f-d:void 0;return GT(o,I,v,b)};if(e){const s=e+qT,o=r;r=l=>l.startsWith(s)?o(l.slice(s.length)):GT(BM,!1,l,void 0,!0)}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},WM=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let s=[];for(let o=0;o<t.length;o++){const l=t[o],c=l[0]==="[",d=e.has(l);c||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},HM=n=>({cache:zM(n.cacheSize),parseClassName:$M(n),sortModifiers:WM(n),...NM(n)}),qM=/\s+/,GM=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,l=[],c=n.trim().split(qM);let d="";for(let f=c.length-1;f>=0;f-=1){const m=c[f],{isExternal:g,modifiers:v,hasImportantModifier:I,baseClassName:b,maybePostfixModifierPosition:x}=t(m);if(g){d=m+(d.length>0?" "+d:d);continue}let R=!!x,L=r(R?b.substring(0,x):b);if(!L){if(!R){d=m+(d.length>0?" "+d:d);continue}if(L=r(b),!L){d=m+(d.length>0?" "+d:d);continue}R=!1}const V=v.length===0?"":v.length===1?v[0]:o(v).join(":"),U=I?V+c_:V,W=U+L;if(l.indexOf(W)>-1)continue;l.push(W);const Y=s(L,R);for(let X=0;X<Y.length;++X){const k=Y[X];l.push(U+k)}d=m+(d.length>0?" "+d:d)}return d},KM=(...n)=>{let e=0,t,r,s="";for(;e<n.length;)(t=n[e++])&&(r=DC(t))&&(s&&(s+=" "),s+=r);return s},DC=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=DC(n[r]))&&(t&&(t+=" "),t+=e);return t},QM=(n,...e)=>{let t,r,s,o;const l=d=>{const f=e.reduce((m,g)=>g(m),n());return t=HM(f),r=t.cache.get,s=t.cache.set,o=c,c(d)},c=d=>{const f=r(d);if(f)return f;const m=GM(d,t);return s(d,m),m};return o=l,(...d)=>o(KM(...d))},YM=[],Kt=n=>{const e=t=>t[n]||YM;return e.isThemeGetter=!0,e},OC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,MC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,XM=/^\d+\/\d+$/,JM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sl=n=>XM.test(n),qe=n=>!!n&&!Number.isNaN(Number(n)),Qi=n=>!!n&&Number.isInteger(Number(n)),my=n=>n.endsWith("%")&&qe(n.slice(0,-1)),Gs=n=>JM.test(n),rL=()=>!0,sL=n=>ZM.test(n)&&!eL.test(n),LC=()=>!1,iL=n=>tL.test(n),oL=n=>nL.test(n),aL=n=>!Re(n)&&!be(n),lL=n=>ac(n,FC,LC),Re=n=>OC.test(n),na=n=>ac(n,UC,sL),gy=n=>ac(n,fL,qe),KT=n=>ac(n,VC,LC),cL=n=>ac(n,jC,oL),Kh=n=>ac(n,zC,iL),be=n=>MC.test(n),mu=n=>lc(n,UC),uL=n=>lc(n,pL),QT=n=>lc(n,VC),dL=n=>lc(n,FC),hL=n=>lc(n,jC),Qh=n=>lc(n,zC,!0),ac=(n,e,t)=>{const r=OC.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},lc=(n,e,t=!1)=>{const r=MC.exec(n);return r?r[1]?e(r[1]):t:!1},VC=n=>n==="position"||n==="percentage",jC=n=>n==="image"||n==="url",FC=n=>n==="length"||n==="size"||n==="bg-size",UC=n=>n==="length",fL=n=>n==="number",pL=n=>n==="family-name",zC=n=>n==="shadow",mL=()=>{const n=Kt("color"),e=Kt("font"),t=Kt("text"),r=Kt("font-weight"),s=Kt("tracking"),o=Kt("leading"),l=Kt("breakpoint"),c=Kt("container"),d=Kt("spacing"),f=Kt("radius"),m=Kt("shadow"),g=Kt("inset-shadow"),v=Kt("text-shadow"),I=Kt("drop-shadow"),b=Kt("blur"),x=Kt("perspective"),R=Kt("aspect"),L=Kt("ease"),V=Kt("animate"),U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Y=()=>[...W(),be,Re],X=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],A=()=>[be,Re,d],N=()=>[Sl,"full","auto",...A()],M=()=>[Qi,"none","subgrid",be,Re],O=()=>["auto",{span:["full",Qi,be,Re]},Qi,be,Re],F=()=>[Qi,"auto",be,Re],D=()=>["auto","min","max","fr",be,Re],me=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ve=()=>["start","end","center","stretch","center-safe","end-safe"],pe=()=>["auto",...A()],Ee=()=>[Sl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],H=()=>[n,be,Re],ee=()=>[...W(),QT,KT,{position:[be,Re]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",dL,lL,{size:[be,Re]}],ne=()=>[my,mu,na],te=()=>["","none","full",f,be,Re],se=()=>["",qe,mu,na],he=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>[qe,my,QT,KT],oe=()=>["","none",b,be,Re],ye=()=>["none",qe,be,Re],Ie=()=>["none",qe,be,Re],je=()=>[qe,be,Re],$e=()=>[Sl,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gs],breakpoint:[Gs],color:[rL],container:[Gs],"drop-shadow":[Gs],ease:["in","out","in-out"],font:[aL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gs],shadow:[Gs],spacing:["px",qe],text:[Gs],"text-shadow":[Gs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Sl,Re,be,R]}],container:["container"],columns:[{columns:[qe,Re,be,c]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Y()}],overflow:[{overflow:X()}],"overflow-x":[{"overflow-x":X()}],"overflow-y":[{"overflow-y":X()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Qi,"auto",be,Re]}],basis:[{basis:[Sl,"full","auto",c,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qe,Sl,"auto","initial","none",Re]}],grow:[{grow:["",qe,be,Re]}],shrink:[{shrink:["",qe,be,Re]}],order:[{order:[Qi,"first","last","none",be,Re]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...me(),"normal"]}],"justify-items":[{"justify-items":[...ve(),"normal"]}],"justify-self":[{"justify-self":["auto",...ve()]}],"align-content":[{content:["normal",...me()]}],"align-items":[{items:[...ve(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ve(),{baseline:["","last"]}]}],"place-content":[{"place-content":me()}],"place-items":[{"place-items":[...ve(),"baseline"]}],"place-self":[{"place-self":["auto",...ve()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:pe()}],mx:[{mx:pe()}],my:[{my:pe()}],ms:[{ms:pe()}],me:[{me:pe()}],mt:[{mt:pe()}],mr:[{mr:pe()}],mb:[{mb:pe()}],ml:[{ml:pe()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ee()}],w:[{w:[c,"screen",...Ee()]}],"min-w":[{"min-w":[c,"screen","none",...Ee()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...Ee()]}],h:[{h:["screen","lh",...Ee()]}],"min-h":[{"min-h":["screen","lh","none",...Ee()]}],"max-h":[{"max-h":["screen","lh",...Ee()]}],"font-size":[{text:["base",t,mu,na]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,be,gy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",my,Re]}],"font-family":[{font:[uL,Re,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,be,Re]}],"line-clamp":[{"line-clamp":[qe,"none",be,gy]}],leading:[{leading:[o,...A()]}],"list-image":[{"list-image":["none",be,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",be,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[qe,"from-font","auto",be,na]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[qe,"auto",be,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qi,be,Re],radial:["",be,Re],conic:[Qi,be,Re]},hL,cL]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qe,be,Re]}],"outline-w":[{outline:["",qe,mu,na]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",m,Qh,Kh]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",g,Qh,Kh]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[qe,na]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",v,Qh,Kh]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[qe,be,Re]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":q()}],"mask-image-linear-to-pos":[{"mask-linear-to":q()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":q()}],"mask-image-t-to-pos":[{"mask-t-to":q()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":q()}],"mask-image-r-to-pos":[{"mask-r-to":q()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":q()}],"mask-image-b-to-pos":[{"mask-b-to":q()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":q()}],"mask-image-l-to-pos":[{"mask-l-to":q()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":q()}],"mask-image-x-to-pos":[{"mask-x-to":q()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":q()}],"mask-image-y-to-pos":[{"mask-y-to":q()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[be,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":q()}],"mask-image-radial-to-pos":[{"mask-radial-to":q()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":W()}],"mask-image-conic-pos":[{"mask-conic":[qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":q()}],"mask-image-conic-to-pos":[{"mask-conic-to":q()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",be,Re]}],filter:[{filter:["","none",be,Re]}],blur:[{blur:oe()}],brightness:[{brightness:[qe,be,Re]}],contrast:[{contrast:[qe,be,Re]}],"drop-shadow":[{"drop-shadow":["","none",I,Qh,Kh]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",qe,be,Re]}],"hue-rotate":[{"hue-rotate":[qe,be,Re]}],invert:[{invert:["",qe,be,Re]}],saturate:[{saturate:[qe,be,Re]}],sepia:[{sepia:["",qe,be,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",be,Re]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[qe,be,Re]}],"backdrop-contrast":[{"backdrop-contrast":[qe,be,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qe,be,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qe,be,Re]}],"backdrop-invert":[{"backdrop-invert":["",qe,be,Re]}],"backdrop-opacity":[{"backdrop-opacity":[qe,be,Re]}],"backdrop-saturate":[{"backdrop-saturate":[qe,be,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",qe,be,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",be,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qe,"initial",be,Re]}],ease:[{ease:["linear","initial",L,be,Re]}],delay:[{delay:[qe,be,Re]}],animate:[{animate:["none",V,be,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,be,Re]}],"perspective-origin":[{"perspective-origin":Y()}],rotate:[{rotate:ye()}],"rotate-x":[{"rotate-x":ye()}],"rotate-y":[{"rotate-y":ye()}],"rotate-z":[{"rotate-z":ye()}],scale:[{scale:Ie()}],"scale-x":[{"scale-x":Ie()}],"scale-y":[{"scale-y":Ie()}],"scale-z":[{"scale-z":Ie()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[be,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:Y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be,Re]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[qe,mu,na,gy]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},gL=QM(mL);function st(...n){return gL(AC(n))}function Mf({className:n,...e}){return _.jsx("div",{"data-slot":"card",className:st("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function BC({className:n,...e}){return _.jsx("div",{"data-slot":"card-header",className:st("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function yL({className:n,...e}){return _.jsx("h4",{"data-slot":"card-title",className:st("leading-none",n),...e})}function yv({className:n,...e}){return _.jsx("div",{"data-slot":"card-content",className:st("px-6 [&:last-child]:pb-6",n),...e})}function YT(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function mi(...n){return e=>{let t=!1;const r=n.map(s=>{const o=YT(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():YT(n[s],null)}}}}function Ze(...n){return S.useCallback(mi(...n),n)}var _L=Symbol.for("react.lazy"),Lf=Pp[" use ".trim().toString()];function vL(n){return typeof n=="object"&&n!==null&&"then"in n}function $C(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===_L&&"_payload"in n&&vL(n._payload)}function Np(n){const e=wL(n),t=S.forwardRef((r,s)=>{let{children:o,...l}=r;$C(o)&&typeof Lf=="function"&&(o=Lf(o._payload));const c=S.Children.toArray(o),d=c.find(SL);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}var WC=Np("Slot");function wL(n){const e=S.forwardRef((t,r)=>{let{children:s,...o}=t;if($C(s)&&typeof Lf=="function"&&(s=Lf(s._payload)),S.isValidElement(s)){const l=IL(s),c=TL(o,s.props);return s.type!==S.Fragment&&(c.ref=r?mi(r,l):l),S.cloneElement(s,c)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var EL=Symbol("radix.slottable");function SL(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===EL}function TL(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function IL(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const XT=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,JT=AC,HC=(n,e)=>t=>{var r;if(e?.variants==null)return JT(n,t?.class,t?.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(f=>{const m=t?.[f],g=o?.[f];if(m===null)return null;const v=XT(m)||XT(g);return s[f][v]}),c=t&&Object.entries(t).reduce((f,m)=>{let[g,v]=m;return v===void 0||(f[g]=v),f},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:g,className:v,...I}=m;return Object.entries(I).every(b=>{let[x,R]=b;return Array.isArray(R)?R.includes({...o,...c}[x]):{...o,...c}[x]===R})?[...f,g,v]:f},[]);return JT(n,l,d,t?.class,t?.className)},xL=HC("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ys({className:n,variant:e,asChild:t=!1,...r}){const s=t?WC:"span";return _.jsx(s,{"data-slot":"badge",className:st(xL({variant:e}),n),...r})}const CL=HC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),un=S.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},o)=>{const l=r?WC:"button";return _.jsx(l,{"data-slot":"button",className:st(CL({variant:e,size:t,className:n})),ref:o,...s})});un.displayName="Button";var ud=vC();const RL=_C(ud);function u_(n,[e,t]){return Math.min(t,Math.max(e,n))}function Ae(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function bL(n,e){const t=S.createContext(e),r=o=>{const{children:l,...c}=o,d=S.useMemo(()=>c,Object.values(c));return _.jsx(t.Provider,{value:d,children:l})};r.displayName=n+"Provider";function s(o){const l=S.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,s]}function gi(n,e=[]){let t=[];function r(o,l){const c=S.createContext(l),d=t.length;t=[...t,l];const f=g=>{const{scope:v,children:I,...b}=g,x=v?.[n]?.[d]||c,R=S.useMemo(()=>b,Object.values(b));return _.jsx(x.Provider,{value:R,children:I})};f.displayName=o+"Provider";function m(g,v){const I=v?.[n]?.[d]||c,b=S.useContext(I);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[f,m]}const s=()=>{const o=t.map(l=>S.createContext(l));return function(c){const d=c?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return s.scopeName=n,[r,AL(s,...e)]}function AL(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((c,{useScope:d,scopeName:f})=>{const g=d(o)[`__scope${f}`];return{...c,...g}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function ZT(n){const e=kL(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,c=S.Children.toArray(o),d=c.find(NL);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function kL(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=OL(s),c=DL(o,s.props);return s.type!==S.Fragment&&(c.ref=r?mi(r,l):l),S.cloneElement(s,c)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var PL=Symbol("radix.slottable");function NL(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===PL}function DL(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function OL(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function _v(n){const e=n+"CollectionProvider",[t,r]=gi(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:R,children:L}=x,V=Ks.useRef(null),U=Ks.useRef(new Map).current;return _.jsx(s,{scope:R,itemMap:U,collectionRef:V,children:L})};l.displayName=e;const c=n+"CollectionSlot",d=ZT(c),f=Ks.forwardRef((x,R)=>{const{scope:L,children:V}=x,U=o(c,L),W=Ze(R,U.collectionRef);return _.jsx(d,{ref:W,children:V})});f.displayName=c;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=ZT(m),I=Ks.forwardRef((x,R)=>{const{scope:L,children:V,...U}=x,W=Ks.useRef(null),Y=Ze(R,W),X=o(m,L);return Ks.useEffect(()=>(X.itemMap.set(W,{ref:W,...U}),()=>void X.itemMap.delete(W))),_.jsx(v,{[g]:"",ref:Y,children:V})});I.displayName=m;function b(x){const R=o(n+"CollectionConsumer",x);return Ks.useCallback(()=>{const V=R.collectionRef.current;if(!V)return[];const U=Array.from(V.querySelectorAll(`[${g}]`));return Array.from(R.itemMap.values()).sort((X,k)=>U.indexOf(X.ref.current)-U.indexOf(k.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:l,Slot:f,ItemSlot:I},b,r]}var ML=S.createContext(void 0);function Dp(n){const e=S.useContext(ML);return n||e||"ltr"}function LL(n){const e=VL(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,c=S.Children.toArray(o),d=c.find(FL);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function VL(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=zL(s),c=UL(o,s.props);return s.type!==S.Fragment&&(c.ref=r?mi(r,l):l),S.cloneElement(s,c)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var jL=Symbol("radix.slottable");function FL(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===jL}function UL(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function zL(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var BL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],We=BL.reduce((n,e)=>{const t=LL(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...c}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(d,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function qC(n,e){n&&ud.flushSync(()=>n.dispatchEvent(e))}function tn(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>e.current?.(...t),[])}function $L(n,e=globalThis?.document){const t=tn(n);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var WL="DismissableLayer",d_="dismissableLayer.update",HL="dismissableLayer.pointerDownOutside",qL="dismissableLayer.focusOutside",eI,GC=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Op=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=n,f=S.useContext(GC),[m,g]=S.useState(null),v=m?.ownerDocument??globalThis?.document,[,I]=S.useState({}),b=Ze(e,k=>g(k)),x=Array.from(f.layers),[R]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),L=x.indexOf(R),V=m?x.indexOf(m):-1,U=f.layersWithOutsidePointerEventsDisabled.size>0,W=V>=L,Y=QL(k=>{const A=k.target,N=[...f.branches].some(M=>M.contains(A));!W||N||(s?.(k),l?.(k),k.defaultPrevented||c?.())},v),X=YL(k=>{const A=k.target;[...f.branches].some(M=>M.contains(A))||(o?.(k),l?.(k),k.defaultPrevented||c?.())},v);return $L(k=>{V===f.layers.size-1&&(r?.(k),!k.defaultPrevented&&c&&(k.preventDefault(),c()))},v),S.useEffect(()=>{if(m)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(eI=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),tI(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=eI)}},[m,v,t,f]),S.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),tI())},[m,f]),S.useEffect(()=>{const k=()=>I({});return document.addEventListener(d_,k),()=>document.removeEventListener(d_,k)},[]),_.jsx(We.div,{...d,ref:b,style:{pointerEvents:U?W?"auto":"none":void 0,...n.style},onFocusCapture:Ae(n.onFocusCapture,X.onFocusCapture),onBlurCapture:Ae(n.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Ae(n.onPointerDownCapture,Y.onPointerDownCapture)})});Op.displayName=WL;var GL="DismissableLayerBranch",KL=S.forwardRef((n,e)=>{const t=S.useContext(GC),r=S.useRef(null),s=Ze(e,r);return S.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),_.jsx(We.div,{...n,ref:s})});KL.displayName=GL;function QL(n,e=globalThis?.document){const t=tn(n),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let d=function(){KC(HL,t,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function YL(n,e=globalThis?.document){const t=tn(n),r=S.useRef(!1);return S.useEffect(()=>{const s=o=>{o.target&&!r.current&&KC(qL,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tI(){const n=new CustomEvent(d_);document.dispatchEvent(n)}function KC(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?qC(s,o):s.dispatchEvent(o)}var yy=0;function vv(){S.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??nI()),document.body.insertAdjacentElement("beforeend",n[1]??nI()),yy++,()=>{yy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),yy--}},[])}function nI(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var _y="focusScope.autoFocusOnMount",vy="focusScope.autoFocusOnUnmount",rI={bubbles:!1,cancelable:!0},XL="FocusScope",Mp=S.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=n,[c,d]=S.useState(null),f=tn(s),m=tn(o),g=S.useRef(null),v=Ze(e,x=>d(x)),I=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let x=function(U){if(I.paused||!c)return;const W=U.target;c.contains(W)?g.current=W:Xi(g.current,{select:!0})},R=function(U){if(I.paused||!c)return;const W=U.relatedTarget;W!==null&&(c.contains(W)||Xi(g.current,{select:!0}))},L=function(U){if(document.activeElement===document.body)for(const Y of U)Y.removedNodes.length>0&&Xi(c)};document.addEventListener("focusin",x),document.addEventListener("focusout",R);const V=new MutationObserver(L);return c&&V.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",R),V.disconnect()}}},[r,c,I.paused]),S.useEffect(()=>{if(c){iI.add(I);const x=document.activeElement;if(!c.contains(x)){const L=new CustomEvent(_y,rI);c.addEventListener(_y,f),c.dispatchEvent(L),L.defaultPrevented||(JL(r2(QC(c)),{select:!0}),document.activeElement===x&&Xi(c))}return()=>{c.removeEventListener(_y,f),setTimeout(()=>{const L=new CustomEvent(vy,rI);c.addEventListener(vy,m),c.dispatchEvent(L),L.defaultPrevented||Xi(x??document.body,{select:!0}),c.removeEventListener(vy,m),iI.remove(I)},0)}}},[c,f,m,I]);const b=S.useCallback(x=>{if(!t&&!r||I.paused)return;const R=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,L=document.activeElement;if(R&&L){const V=x.currentTarget,[U,W]=ZL(V);U&&W?!x.shiftKey&&L===W?(x.preventDefault(),t&&Xi(U,{select:!0})):x.shiftKey&&L===U&&(x.preventDefault(),t&&Xi(W,{select:!0})):L===V&&x.preventDefault()}},[t,r,I.paused]);return _.jsx(We.div,{tabIndex:-1,...l,ref:v,onKeyDown:b})});Mp.displayName=XL;function JL(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Xi(r,{select:e}),document.activeElement!==t)return}function ZL(n){const e=QC(n),t=sI(e,n),r=sI(e.reverse(),n);return[t,r]}function QC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function sI(n,e){for(const t of n)if(!e2(t,{upTo:e}))return t}function e2(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function t2(n){return n instanceof HTMLInputElement&&"select"in n}function Xi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&t2(n)&&e&&n.select()}}var iI=n2();function n2(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=oI(n,e),n.unshift(e)},remove(e){n=oI(n,e),n[0]?.resume()}}}function oI(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function r2(n){return n.filter(e=>e.tagName!=="A")}var Ht=globalThis?.document?S.useLayoutEffect:()=>{},s2=Pp[" useId ".trim().toString()]||(()=>{}),i2=0;function ni(n){const[e,t]=S.useState(s2());return Ht(()=>{t(r=>r??String(i2++))},[n]),n||(e?`radix-${e}`:"")}const o2=["top","right","bottom","left"],uo=Math.min,tr=Math.max,Vf=Math.round,Yh=Math.floor,ys=n=>({x:n,y:n}),a2={left:"right",right:"left",bottom:"top",top:"bottom"},l2={start:"end",end:"start"};function h_(n,e,t){return tr(n,uo(e,t))}function ai(n,e){return typeof n=="function"?n(e):n}function li(n){return n.split("-")[0]}function cc(n){return n.split("-")[1]}function wv(n){return n==="x"?"y":"x"}function Ev(n){return n==="y"?"height":"width"}const c2=new Set(["top","bottom"]);function fs(n){return c2.has(li(n))?"y":"x"}function Sv(n){return wv(fs(n))}function u2(n,e,t){t===void 0&&(t=!1);const r=cc(n),s=Sv(n),o=Ev(s);let l=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=jf(l)),[l,jf(l)]}function d2(n){const e=jf(n);return[f_(n),e,f_(e)]}function f_(n){return n.replace(/start|end/g,e=>l2[e])}const aI=["left","right"],lI=["right","left"],h2=["top","bottom"],f2=["bottom","top"];function p2(n,e,t){switch(n){case"top":case"bottom":return t?e?lI:aI:e?aI:lI;case"left":case"right":return e?h2:f2;default:return[]}}function m2(n,e,t,r){const s=cc(n);let o=p2(li(n),t==="start",r);return s&&(o=o.map(l=>l+"-"+s),e&&(o=o.concat(o.map(f_)))),o}function jf(n){return n.replace(/left|right|bottom|top/g,e=>a2[e])}function g2(n){return{top:0,right:0,bottom:0,left:0,...n}}function YC(n){return typeof n!="number"?g2(n):{top:n,right:n,bottom:n,left:n}}function Ff(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function cI(n,e,t){let{reference:r,floating:s}=n;const o=fs(e),l=Sv(e),c=Ev(l),d=li(e),f=o==="y",m=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,v=r[c]/2-s[c]/2;let I;switch(d){case"top":I={x:m,y:r.y-s.height};break;case"bottom":I={x:m,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:g};break;case"left":I={x:r.x-s.width,y:g};break;default:I={x:r.x,y:r.y}}switch(cc(e)){case"start":I[l]-=v*(t&&f?-1:1);break;case"end":I[l]+=v*(t&&f?-1:1);break}return I}const y2=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:l}=t,c=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:n,floating:e,strategy:s}),{x:m,y:g}=cI(f,r,d),v=r,I={},b=0;for(let x=0;x<c.length;x++){const{name:R,fn:L}=c[x],{x:V,y:U,data:W,reset:Y}=await L({x:m,y:g,initialPlacement:r,placement:v,strategy:s,middlewareData:I,rects:f,platform:l,elements:{reference:n,floating:e}});m=V??m,g=U??g,I={...I,[R]:{...I[R],...W}},Y&&b<=50&&(b++,typeof Y=="object"&&(Y.placement&&(v=Y.placement),Y.rects&&(f=Y.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:s}):Y.rects),{x:m,y:g}=cI(f,v,d)),x=-1)}return{x:m,y:g,placement:v,strategy:s,middlewareData:I}};async function Wu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:l,elements:c,strategy:d}=n,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:v=!1,padding:I=0}=ai(e,n),b=YC(I),R=c[v?g==="floating"?"reference":"floating":g],L=Ff(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(R)))==null||t?R:R.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:d})),V=g==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,U=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),W=await(o.isElement==null?void 0:o.isElement(U))?await(o.getScale==null?void 0:o.getScale(U))||{x:1,y:1}:{x:1,y:1},Y=Ff(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:V,offsetParent:U,strategy:d}):V);return{top:(L.top-Y.top+b.top)/W.y,bottom:(Y.bottom-L.bottom+b.bottom)/W.y,left:(L.left-Y.left+b.left)/W.x,right:(Y.right-L.right+b.right)/W.x}}const _2=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:l,elements:c,middlewareData:d}=e,{element:f,padding:m=0}=ai(n,e)||{};if(f==null)return{};const g=YC(m),v={x:t,y:r},I=Sv(s),b=Ev(I),x=await l.getDimensions(f),R=I==="y",L=R?"top":"left",V=R?"bottom":"right",U=R?"clientHeight":"clientWidth",W=o.reference[b]+o.reference[I]-v[I]-o.floating[b],Y=v[I]-o.reference[I],X=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let k=X?X[U]:0;(!k||!await(l.isElement==null?void 0:l.isElement(X)))&&(k=c.floating[U]||o.floating[b]);const A=W/2-Y/2,N=k/2-x[b]/2-1,M=uo(g[L],N),O=uo(g[V],N),F=M,D=k-x[b]-O,me=k/2-x[b]/2+A,ve=h_(F,me,D),pe=!d.arrow&&cc(s)!=null&&me!==ve&&o.reference[b]/2-(me<F?M:O)-x[b]/2<0,Ee=pe?me<F?me-F:me-D:0;return{[I]:v[I]+Ee,data:{[I]:ve,centerOffset:me-ve-Ee,...pe&&{alignmentOffset:Ee}},reset:pe}}}),v2=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:l,initialPlacement:c,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...R}=ai(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const L=li(s),V=fs(c),U=li(c)===c,W=await(d.isRTL==null?void 0:d.isRTL(f.floating)),Y=v||(U||!x?[jf(c)]:d2(c)),X=b!=="none";!v&&X&&Y.push(...m2(c,x,b,W));const k=[c,...Y],A=await Wu(e,R),N=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&N.push(A[L]),g){const me=u2(s,l,W);N.push(A[me[0]],A[me[1]])}if(M=[...M,{placement:s,overflows:N}],!N.every(me=>me<=0)){var O,F;const me=(((O=o.flip)==null?void 0:O.index)||0)+1,ve=k[me];if(ve&&(!(g==="alignment"?V!==fs(ve):!1)||M.every(H=>fs(H.placement)===V?H.overflows[0]>0:!0)))return{data:{index:me,overflows:M},reset:{placement:ve}};let pe=(F=M.filter(Ee=>Ee.overflows[0]<=0).sort((Ee,H)=>Ee.overflows[1]-H.overflows[1])[0])==null?void 0:F.placement;if(!pe)switch(I){case"bestFit":{var D;const Ee=(D=M.filter(H=>{if(X){const ee=fs(H.placement);return ee===V||ee==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(ee=>ee>0).reduce((ee,ue)=>ee+ue,0)]).sort((H,ee)=>H[1]-ee[1])[0])==null?void 0:D[0];Ee&&(pe=Ee);break}case"initialPlacement":pe=c;break}if(s!==pe)return{reset:{placement:pe}}}return{}}}};function uI(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function dI(n){return o2.some(e=>n[e]>=0)}const w2=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=ai(n,e);switch(r){case"referenceHidden":{const o=await Wu(e,{...s,elementContext:"reference"}),l=uI(o,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:dI(l)}}}case"escaped":{const o=await Wu(e,{...s,altBoundary:!0}),l=uI(o,t.floating);return{data:{escapedOffsets:l,escaped:dI(l)}}}default:return{}}}}},XC=new Set(["left","top"]);async function E2(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=li(t),c=cc(t),d=fs(t)==="y",f=XC.has(l)?-1:1,m=o&&d?-1:1,g=ai(e,n);let{mainAxis:v,crossAxis:I,alignmentAxis:b}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return c&&typeof b=="number"&&(I=c==="end"?b*-1:b),d?{x:I*m,y:v*f}:{x:v*f,y:I*m}}const S2=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:l,middlewareData:c}=e,d=await E2(e,n);return l===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:l}}}}},T2=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:R=>{let{x:L,y:V}=R;return{x:L,y:V}}},...d}=ai(n,e),f={x:t,y:r},m=await Wu(e,d),g=fs(li(s)),v=wv(g);let I=f[v],b=f[g];if(o){const R=v==="y"?"top":"left",L=v==="y"?"bottom":"right",V=I+m[R],U=I-m[L];I=h_(V,I,U)}if(l){const R=g==="y"?"top":"left",L=g==="y"?"bottom":"right",V=b+m[R],U=b-m[L];b=h_(V,b,U)}const x=c.fn({...e,[v]:I,[g]:b});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[v]:o,[g]:l}}}}}},I2=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:l}=e,{offset:c=0,mainAxis:d=!0,crossAxis:f=!0}=ai(n,e),m={x:t,y:r},g=fs(s),v=wv(g);let I=m[v],b=m[g];const x=ai(c,e),R=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const U=v==="y"?"height":"width",W=o.reference[v]-o.floating[U]+R.mainAxis,Y=o.reference[v]+o.reference[U]-R.mainAxis;I<W?I=W:I>Y&&(I=Y)}if(f){var L,V;const U=v==="y"?"width":"height",W=XC.has(li(s)),Y=o.reference[g]-o.floating[U]+(W&&((L=l.offset)==null?void 0:L[g])||0)+(W?0:R.crossAxis),X=o.reference[g]+o.reference[U]+(W?0:((V=l.offset)==null?void 0:V[g])||0)-(W?R.crossAxis:0);b<Y?b=Y:b>X&&(b=X)}return{[v]:I,[g]:b}}}},x2=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:l,elements:c}=e,{apply:d=()=>{},...f}=ai(n,e),m=await Wu(e,f),g=li(s),v=cc(s),I=fs(s)==="y",{width:b,height:x}=o.floating;let R,L;g==="top"||g==="bottom"?(R=g,L=v===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(L=g,R=v==="end"?"top":"bottom");const V=x-m.top-m.bottom,U=b-m.left-m.right,W=uo(x-m[R],V),Y=uo(b-m[L],U),X=!e.middlewareData.shift;let k=W,A=Y;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=U),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=V),X&&!v){const M=tr(m.left,0),O=tr(m.right,0),F=tr(m.top,0),D=tr(m.bottom,0);I?A=b-2*(M!==0||O!==0?M+O:tr(m.left,m.right)):k=x-2*(F!==0||D!==0?F+D:tr(m.top,m.bottom))}await d({...e,availableWidth:A,availableHeight:k});const N=await l.getDimensions(c.floating);return b!==N.width||x!==N.height?{reset:{rects:!0}}:{}}}};function Lp(){return typeof window<"u"}function uc(n){return JC(n)?(n.nodeName||"").toLowerCase():"#document"}function sr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Cs(n){var e;return(e=(JC(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function JC(n){return Lp()?n instanceof Node||n instanceof sr(n).Node:!1}function Br(n){return Lp()?n instanceof Element||n instanceof sr(n).Element:!1}function Is(n){return Lp()?n instanceof HTMLElement||n instanceof sr(n).HTMLElement:!1}function hI(n){return!Lp()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof sr(n).ShadowRoot}const C2=new Set(["inline","contents"]);function dd(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=$r(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!C2.has(s)}const R2=new Set(["table","td","th"]);function b2(n){return R2.has(uc(n))}const A2=[":popover-open",":modal"];function Vp(n){return A2.some(e=>{try{return n.matches(e)}catch{return!1}})}const k2=["transform","translate","scale","rotate","perspective"],P2=["transform","translate","scale","rotate","perspective","filter"],N2=["paint","layout","strict","content"];function Tv(n){const e=Iv(),t=Br(n)?$r(n):n;return k2.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||P2.some(r=>(t.willChange||"").includes(r))||N2.some(r=>(t.contain||"").includes(r))}function D2(n){let e=ho(n);for(;Is(e)&&!ql(e);){if(Tv(e))return e;if(Vp(e))return null;e=ho(e)}return null}function Iv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O2=new Set(["html","body","#document"]);function ql(n){return O2.has(uc(n))}function $r(n){return sr(n).getComputedStyle(n)}function jp(n){return Br(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ho(n){if(uc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||hI(n)&&n.host||Cs(n);return hI(e)?e.host:e}function ZC(n){const e=ho(n);return ql(e)?n.ownerDocument?n.ownerDocument.body:n.body:Is(e)&&dd(e)?e:ZC(e)}function Hu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=ZC(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),l=sr(s);if(o){const c=p_(l);return e.concat(l,l.visualViewport||[],dd(s)?s:[],c&&t?Hu(c):[])}return e.concat(s,Hu(s,[],t))}function p_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function eR(n){const e=$r(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Is(n),o=s?n.offsetWidth:t,l=s?n.offsetHeight:r,c=Vf(t)!==o||Vf(r)!==l;return c&&(t=o,r=l),{width:t,height:r,$:c}}function xv(n){return Br(n)?n:n.contextElement}function Ll(n){const e=xv(n);if(!Is(e))return ys(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=eR(e);let l=(o?Vf(t.width):t.width)/r,c=(o?Vf(t.height):t.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const M2=ys(0);function tR(n){const e=sr(n);return!Iv()||!e.visualViewport?M2:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function L2(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==sr(n)?!1:e}function pa(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=xv(n);let l=ys(1);e&&(r?Br(r)&&(l=Ll(r)):l=Ll(n));const c=L2(o,t,r)?tR(o):ys(0);let d=(s.left+c.x)/l.x,f=(s.top+c.y)/l.y,m=s.width/l.x,g=s.height/l.y;if(o){const v=sr(o),I=r&&Br(r)?sr(r):r;let b=v,x=p_(b);for(;x&&r&&I!==b;){const R=Ll(x),L=x.getBoundingClientRect(),V=$r(x),U=L.left+(x.clientLeft+parseFloat(V.paddingLeft))*R.x,W=L.top+(x.clientTop+parseFloat(V.paddingTop))*R.y;d*=R.x,f*=R.y,m*=R.x,g*=R.y,d+=U,f+=W,b=sr(x),x=p_(b)}}return Ff({width:m,height:g,x:d,y:f})}function Fp(n,e){const t=jp(n).scrollLeft;return e?e.left+t:pa(Cs(n)).left+t}function nR(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-Fp(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function V2(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",l=Cs(r),c=e?Vp(e.floating):!1;if(r===l||c&&o)return t;let d={scrollLeft:0,scrollTop:0},f=ys(1);const m=ys(0),g=Is(r);if((g||!g&&!o)&&((uc(r)!=="body"||dd(l))&&(d=jp(r)),Is(r))){const I=pa(r);f=Ll(r),m.x=I.x+r.clientLeft,m.y=I.y+r.clientTop}const v=l&&!g&&!o?nR(l,d):ys(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-d.scrollLeft*f.x+m.x+v.x,y:t.y*f.y-d.scrollTop*f.y+m.y+v.y}}function j2(n){return Array.from(n.getClientRects())}function F2(n){const e=Cs(n),t=jp(n),r=n.ownerDocument.body,s=tr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=tr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+Fp(n);const c=-t.scrollTop;return $r(r).direction==="rtl"&&(l+=tr(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:l,y:c}}const fI=25;function U2(n,e){const t=sr(n),r=Cs(n),s=t.visualViewport;let o=r.clientWidth,l=r.clientHeight,c=0,d=0;if(s){o=s.width,l=s.height;const m=Iv();(!m||m&&e==="fixed")&&(c=s.offsetLeft,d=s.offsetTop)}const f=Fp(r);if(f<=0){const m=r.ownerDocument,g=m.body,v=getComputedStyle(g),I=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,b=Math.abs(r.clientWidth-g.clientWidth-I);b<=fI&&(o-=b)}else f<=fI&&(o+=f);return{width:o,height:l,x:c,y:d}}const z2=new Set(["absolute","fixed"]);function B2(n,e){const t=pa(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=Is(n)?Ll(n):ys(1),l=n.clientWidth*o.x,c=n.clientHeight*o.y,d=s*o.x,f=r*o.y;return{width:l,height:c,x:d,y:f}}function pI(n,e,t){let r;if(e==="viewport")r=U2(n,t);else if(e==="document")r=F2(Cs(n));else if(Br(e))r=B2(e,t);else{const s=tR(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ff(r)}function rR(n,e){const t=ho(n);return t===e||!Br(t)||ql(t)?!1:$r(t).position==="fixed"||rR(t,e)}function $2(n,e){const t=e.get(n);if(t)return t;let r=Hu(n,[],!1).filter(c=>Br(c)&&uc(c)!=="body"),s=null;const o=$r(n).position==="fixed";let l=o?ho(n):n;for(;Br(l)&&!ql(l);){const c=$r(l),d=Tv(l);!d&&c.position==="fixed"&&(s=null),(o?!d&&!s:!d&&c.position==="static"&&!!s&&z2.has(s.position)||dd(l)&&!d&&rR(n,l))?r=r.filter(m=>m!==l):s=c,l=ho(l)}return e.set(n,r),r}function W2(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const l=[...t==="clippingAncestors"?Vp(e)?[]:$2(e,this._c):[].concat(t),r],c=l[0],d=l.reduce((f,m)=>{const g=pI(e,m,s);return f.top=tr(g.top,f.top),f.right=uo(g.right,f.right),f.bottom=uo(g.bottom,f.bottom),f.left=tr(g.left,f.left),f},pI(e,c,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function H2(n){const{width:e,height:t}=eR(n);return{width:e,height:t}}function q2(n,e,t){const r=Is(e),s=Cs(e),o=t==="fixed",l=pa(n,!0,o,e);let c={scrollLeft:0,scrollTop:0};const d=ys(0);function f(){d.x=Fp(s)}if(r||!r&&!o)if((uc(e)!=="body"||dd(s))&&(c=jp(e)),r){const I=pa(e,!0,o,e);d.x=I.x+e.clientLeft,d.y=I.y+e.clientTop}else s&&f();o&&!r&&s&&f();const m=s&&!r&&!o?nR(s,c):ys(0),g=l.left+c.scrollLeft-d.x-m.x,v=l.top+c.scrollTop-d.y-m.y;return{x:g,y:v,width:l.width,height:l.height}}function wy(n){return $r(n).position==="static"}function mI(n,e){if(!Is(n)||$r(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Cs(n)===t&&(t=t.ownerDocument.body),t}function sR(n,e){const t=sr(n);if(Vp(n))return t;if(!Is(n)){let s=ho(n);for(;s&&!ql(s);){if(Br(s)&&!wy(s))return s;s=ho(s)}return t}let r=mI(n,e);for(;r&&b2(r)&&wy(r);)r=mI(r,e);return r&&ql(r)&&wy(r)&&!Tv(r)?t:r||D2(n)||t}const G2=async function(n){const e=this.getOffsetParent||sR,t=this.getDimensions,r=await t(n.floating);return{reference:q2(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function K2(n){return $r(n).direction==="rtl"}const Q2={convertOffsetParentRelativeRectToViewportRelativeRect:V2,getDocumentElement:Cs,getClippingRect:W2,getOffsetParent:sR,getElementRects:G2,getClientRects:j2,getDimensions:H2,getScale:Ll,isElement:Br,isRTL:K2};function iR(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Y2(n,e){let t=null,r;const s=Cs(n);function o(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),o();const f=n.getBoundingClientRect(),{left:m,top:g,width:v,height:I}=f;if(c||e(),!v||!I)return;const b=Yh(g),x=Yh(s.clientWidth-(m+v)),R=Yh(s.clientHeight-(g+I)),L=Yh(m),U={rootMargin:-b+"px "+-x+"px "+-R+"px "+-L+"px",threshold:tr(0,uo(1,d))||1};let W=!0;function Y(X){const k=X[0].intersectionRatio;if(k!==d){if(!W)return l();k?l(!1,k):r=setTimeout(()=>{l(!1,1e-7)},1e3)}k===1&&!iR(f,n.getBoundingClientRect())&&l(),W=!1}try{t=new IntersectionObserver(Y,{...U,root:s.ownerDocument})}catch{t=new IntersectionObserver(Y,U)}t.observe(n)}return l(!0),o}function X2(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=xv(n),m=s||o?[...f?Hu(f):[],...Hu(e)]:[];m.forEach(L=>{s&&L.addEventListener("scroll",t,{passive:!0}),o&&L.addEventListener("resize",t)});const g=f&&c?Y2(f,t):null;let v=-1,I=null;l&&(I=new ResizeObserver(L=>{let[V]=L;V&&V.target===f&&I&&(I.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var U;(U=I)==null||U.observe(e)})),t()}),f&&!d&&I.observe(f),I.observe(e));let b,x=d?pa(n):null;d&&R();function R(){const L=pa(n);x&&!iR(x,L)&&t(),x=L,b=requestAnimationFrame(R)}return t(),()=>{var L;m.forEach(V=>{s&&V.removeEventListener("scroll",t),o&&V.removeEventListener("resize",t)}),g?.(),(L=I)==null||L.disconnect(),I=null,d&&cancelAnimationFrame(b)}}const J2=S2,Z2=T2,eV=v2,tV=x2,nV=w2,gI=_2,rV=I2,sV=(n,e,t)=>{const r=new Map,s={platform:Q2,...t},o={...s.platform,_c:r};return y2(n,e,{...s,platform:o})};var iV=typeof document<"u",oV=function(){},_f=iV?S.useLayoutEffect:oV;function Uf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Uf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!Uf(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function oR(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function yI(n,e){const t=oR(n);return Math.round(e*t)/t}function Ey(n){const e=S.useRef(n);return _f(()=>{e.current=n}),e}function aV(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:d,open:f}=n,[m,g]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,I]=S.useState(r);Uf(v,r)||I(r);const[b,x]=S.useState(null),[R,L]=S.useState(null),V=S.useCallback(H=>{H!==X.current&&(X.current=H,x(H))},[]),U=S.useCallback(H=>{H!==k.current&&(k.current=H,L(H))},[]),W=o||b,Y=l||R,X=S.useRef(null),k=S.useRef(null),A=S.useRef(m),N=d!=null,M=Ey(d),O=Ey(s),F=Ey(f),D=S.useCallback(()=>{if(!X.current||!k.current)return;const H={placement:e,strategy:t,middleware:v};O.current&&(H.platform=O.current),sV(X.current,k.current,H).then(ee=>{const ue={...ee,isPositioned:F.current!==!1};me.current&&!Uf(A.current,ue)&&(A.current=ue,ud.flushSync(()=>{g(ue)}))})},[v,e,t,O,F]);_f(()=>{f===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,g(H=>({...H,isPositioned:!1})))},[f]);const me=S.useRef(!1);_f(()=>(me.current=!0,()=>{me.current=!1}),[]),_f(()=>{if(W&&(X.current=W),Y&&(k.current=Y),W&&Y){if(M.current)return M.current(W,Y,D);D()}},[W,Y,D,M,N]);const ve=S.useMemo(()=>({reference:X,floating:k,setReference:V,setFloating:U}),[V,U]),pe=S.useMemo(()=>({reference:W,floating:Y}),[W,Y]),Ee=S.useMemo(()=>{const H={position:t,left:0,top:0};if(!pe.floating)return H;const ee=yI(pe.floating,m.x),ue=yI(pe.floating,m.y);return c?{...H,transform:"translate("+ee+"px, "+ue+"px)",...oR(pe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:ue}},[t,c,pe.floating,m.x,m.y]);return S.useMemo(()=>({...m,update:D,refs:ve,elements:pe,floatingStyles:Ee}),[m,D,ve,pe,Ee])}const lV=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?gI({element:r.current,padding:s}).fn(t):{}:r?gI({element:r,padding:s}).fn(t):{}}}},cV=(n,e)=>({...J2(n),options:[n,e]}),uV=(n,e)=>({...Z2(n),options:[n,e]}),dV=(n,e)=>({...rV(n),options:[n,e]}),hV=(n,e)=>({...eV(n),options:[n,e]}),fV=(n,e)=>({...tV(n),options:[n,e]}),pV=(n,e)=>({...nV(n),options:[n,e]}),mV=(n,e)=>({...lV(n),options:[n,e]});var gV="Arrow",aR=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return _.jsx(We.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});aR.displayName=gV;var yV=aR;function lR(n){const[e,t]=S.useState(void 0);return Ht(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let l,c;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;l=f.inlineSize,c=f.blockSize}else l=n.offsetWidth,c=n.offsetHeight;t({width:l,height:c})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Cv="Popper",[cR,Up]=gi(Cv),[_V,uR]=cR(Cv),dR=n=>{const{__scopePopper:e,children:t}=n,[r,s]=S.useState(null);return _.jsx(_V,{scope:e,anchor:r,onAnchorChange:s,children:t})};dR.displayName=Cv;var hR="PopperAnchor",fR=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=uR(hR,t),l=S.useRef(null),c=Ze(e,l),d=S.useRef(null);return S.useEffect(()=>{const f=d.current;d.current=r?.current||l.current,f!==d.current&&o.onAnchorChange(d.current)}),r?null:_.jsx(We.div,{...s,ref:c})});fR.displayName=hR;var Rv="PopperContent",[vV,wV]=cR(Rv),pR=S.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:I="optimized",onPlaced:b,...x}=n,R=uR(Rv,t),[L,V]=S.useState(null),U=Ze(e,q=>V(q)),[W,Y]=S.useState(null),X=lR(W),k=X?.width??0,A=X?.height??0,N=r+(o!=="center"?"-"+o:""),M=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},O=Array.isArray(f)?f:[f],F=O.length>0,D={padding:M,boundary:O.filter(SV),altBoundary:F},{refs:me,floatingStyles:ve,placement:pe,isPositioned:Ee,middlewareData:H}=aV({strategy:"fixed",placement:N,whileElementsMounted:(...q)=>X2(...q,{animationFrame:I==="always"}),elements:{reference:R.anchor},middleware:[cV({mainAxis:s+A,alignmentAxis:l}),d&&uV({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?dV():void 0,...D}),d&&hV({...D}),fV({...D,apply:({elements:q,rects:oe,availableWidth:ye,availableHeight:Ie})=>{const{width:je,height:$e}=oe.reference,Ue=q.floating.style;Ue.setProperty("--radix-popper-available-width",`${ye}px`),Ue.setProperty("--radix-popper-available-height",`${Ie}px`),Ue.setProperty("--radix-popper-anchor-width",`${je}px`),Ue.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),W&&mV({element:W,padding:c}),TV({arrowWidth:k,arrowHeight:A}),v&&pV({strategy:"referenceHidden",...D})]}),[ee,ue]=yR(pe),B=tn(b);Ht(()=>{Ee&&B?.()},[Ee,B]);const ne=H.arrow?.x,te=H.arrow?.y,se=H.arrow?.centerOffset!==0,[he,ce]=S.useState();return Ht(()=>{L&&ce(window.getComputedStyle(L).zIndex)},[L]),_.jsx("div",{ref:me.setFloating,"data-radix-popper-content-wrapper":"",style:{...ve,transform:Ee?ve.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:_.jsx(vV,{scope:t,placedSide:ee,onArrowChange:Y,arrowX:ne,arrowY:te,shouldHideArrow:se,children:_.jsx(We.div,{"data-side":ee,"data-align":ue,...x,ref:U,style:{...x.style,animation:Ee?void 0:"none"}})})})});pR.displayName=Rv;var mR="PopperArrow",EV={top:"bottom",right:"left",bottom:"top",left:"right"},gR=S.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=wV(mR,r),l=EV[o.placedSide];return _.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:_.jsx(yV,{...s,ref:t,style:{...s.style,display:"block"}})})});gR.displayName=mR;function SV(n){return n!==null}var TV=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,l=s.arrow?.centerOffset!==0,c=l?0:n.arrowWidth,d=l?0:n.arrowHeight,[f,m]=yR(t),g={start:"0%",center:"50%",end:"100%"}[m],v=(s.arrow?.x??0)+c/2,I=(s.arrow?.y??0)+d/2;let b="",x="";return f==="bottom"?(b=l?g:`${v}px`,x=`${-d}px`):f==="top"?(b=l?g:`${v}px`,x=`${r.floating.height+d}px`):f==="right"?(b=`${-d}px`,x=l?g:`${I}px`):f==="left"&&(b=`${r.floating.width+d}px`,x=l?g:`${I}px`),{data:{x:b,y:x}}}});function yR(n){const[e,t="center"]=n.split("-");return[e,t]}var _R=dR,vR=fR,wR=pR,ER=gR,IV="Portal",zp=S.forwardRef((n,e)=>{const{container:t,...r}=n,[s,o]=S.useState(!1);Ht(()=>o(!0),[]);const l=t||s&&globalThis?.document?.body;return l?RL.createPortal(_.jsx(We.div,{...r,ref:e}),l):null});zp.displayName=IV;function xV(n){const e=CV(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,c=S.Children.toArray(o),d=c.find(bV);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function CV(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=kV(s),c=AV(o,s.props);return s.type!==S.Fragment&&(c.ref=r?mi(r,l):l),S.cloneElement(s,c)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var RV=Symbol("radix.slottable");function bV(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===RV}function AV(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function kV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var PV=Pp[" useInsertionEffect ".trim().toString()]||Ht;function Gl({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,o,l]=NV({defaultProp:e,onChange:t}),c=n!==void 0,d=c?n:s;{const m=S.useRef(n!==void 0);S.useEffect(()=>{const g=m.current;g!==c&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const f=S.useCallback(m=>{if(c){const g=DV(m)?m(n):m;g!==n&&l.current?.(g)}else o(m)},[c,n,o,l]);return[d,f]}function NV({defaultProp:n,onChange:e}){const[t,r]=S.useState(n),s=S.useRef(t),o=S.useRef(e);return PV(()=>{o.current=e},[e]),S.useEffect(()=>{s.current!==t&&(o.current?.(t),s.current=t)},[t,s]),[t,r,o]}function DV(n){return typeof n=="function"}function SR(n){const e=S.useRef({value:n,previous:n});return S.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var TR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),OV="VisuallyHidden",MV=S.forwardRef((n,e)=>_.jsx(We.span,{...n,ref:e,style:{...TR,...n.style}}));MV.displayName=OV;var LV=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Tl=new WeakMap,Xh=new WeakMap,Jh={},Sy=0,IR=function(n){return n&&(n.host||IR(n.parentNode))},VV=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=IR(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},jV=function(n,e,t,r){var s=VV(e,Array.isArray(n)?n:[n]);Jh[t]||(Jh[t]=new WeakMap);var o=Jh[t],l=[],c=new Set,d=new Set(s),f=function(g){!g||c.has(g)||(c.add(g),f(g.parentNode))};s.forEach(f);var m=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(c.has(v))m(v);else try{var I=v.getAttribute(r),b=I!==null&&I!=="false",x=(Tl.get(v)||0)+1,R=(o.get(v)||0)+1;Tl.set(v,x),o.set(v,R),l.push(v),x===1&&b&&Xh.set(v,!0),R===1&&v.setAttribute(t,"true"),b||v.setAttribute(r,"true")}catch(L){console.error("aria-hidden: cannot operate on ",v,L)}})};return m(e),c.clear(),Sy++,function(){l.forEach(function(g){var v=Tl.get(g)-1,I=o.get(g)-1;Tl.set(g,v),o.set(g,I),v||(Xh.has(g)||g.removeAttribute(r),Xh.delete(g)),I||g.removeAttribute(t)}),Sy--,Sy||(Tl=new WeakMap,Tl=new WeakMap,Xh=new WeakMap,Jh={})}},bv=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=LV(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),jV(r,s,t,"aria-hidden")):function(){return null}},hs=function(){return hs=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},hs.apply(this,arguments)};function xR(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function FV(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var vf="right-scroll-bar-position",wf="width-before-scroll-bar",UV="with-scroll-bars-hidden",zV="--removed-body-scroll-bar-size";function Ty(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function BV(n,e){var t=S.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var $V=typeof window<"u"?S.useLayoutEffect:S.useEffect,_I=new WeakMap;function WV(n,e){var t=BV(null,function(r){return n.forEach(function(s){return Ty(s,r)})});return $V(function(){var r=_I.get(t);if(r){var s=new Set(r),o=new Set(n),l=t.current;s.forEach(function(c){o.has(c)||Ty(c,null)}),o.forEach(function(c){s.has(c)||Ty(c,l)})}_I.set(t,n)},[n]),t}function HV(n){return n}function qV(n,e){e===void 0&&(e=HV);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var l=e(o,r);return t.push(l),function(){t=t.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(r=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(c){return o(c)},filter:function(){return t}}},assignMedium:function(o){r=!0;var l=[];if(t.length){var c=t;t=[],c.forEach(o),l=t}var d=function(){var m=l;l=[],m.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),t={push:function(m){l.push(m),f()},filter:function(m){return l=l.filter(m),t}}}};return s}function GV(n){n===void 0&&(n={});var e=qV(null);return e.options=hs({async:!0,ssr:!1},n),e}var CR=function(n){var e=n.sideCar,t=xR(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,hs({},t))};CR.isSideCarExport=!0;function KV(n,e){return n.useMedium(e),CR}var RR=GV(),Iy=function(){},Bp=S.forwardRef(function(n,e){var t=S.useRef(null),r=S.useState({onScrollCapture:Iy,onWheelCapture:Iy,onTouchMoveCapture:Iy}),s=r[0],o=r[1],l=n.forwardProps,c=n.children,d=n.className,f=n.removeScrollBar,m=n.enabled,g=n.shards,v=n.sideCar,I=n.noRelative,b=n.noIsolation,x=n.inert,R=n.allowPinchZoom,L=n.as,V=L===void 0?"div":L,U=n.gapMode,W=xR(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Y=v,X=WV([t,e]),k=hs(hs({},W),s);return S.createElement(S.Fragment,null,m&&S.createElement(Y,{sideCar:RR,removeScrollBar:f,shards:g,noRelative:I,noIsolation:b,inert:x,setCallbacks:o,allowPinchZoom:!!R,lockRef:t,gapMode:U}),l?S.cloneElement(S.Children.only(c),hs(hs({},k),{ref:X})):S.createElement(V,hs({},k,{className:d,ref:X}),c))});Bp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bp.classNames={fullWidth:wf,zeroRight:vf};var QV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YV(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=QV();return e&&n.setAttribute("nonce",e),n}function XV(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function JV(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var ZV=function(){var n=0,e=null;return{add:function(t){n==0&&(e=YV())&&(XV(e,t),JV(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ej=function(){var n=ZV();return function(e,t){S.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},bR=function(){var n=ej(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},tj={left:0,top:0,right:0,gap:0},xy=function(n){return parseInt(n||"",10)||0},nj=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[xy(t),xy(r),xy(s)]},rj=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return tj;var e=nj(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},sj=bR(),Vl="data-scroll-locked",ij=function(n,e,t,r){var s=n.left,o=n.top,l=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(UV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Vl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vf,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(wf,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(vf," .").concat(vf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wf," .").concat(wf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Vl,`] {
    `).concat(zV,": ").concat(c,`px;
  }
`)},vI=function(){var n=parseInt(document.body.getAttribute(Vl)||"0",10);return isFinite(n)?n:0},oj=function(){S.useEffect(function(){return document.body.setAttribute(Vl,(vI()+1).toString()),function(){var n=vI()-1;n<=0?document.body.removeAttribute(Vl):document.body.setAttribute(Vl,n.toString())}},[])},aj=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;oj();var o=S.useMemo(function(){return rj(s)},[s]);return S.createElement(sj,{styles:ij(o,!e,s,t?"":"!important")})},m_=!1;if(typeof window<"u")try{var Zh=Object.defineProperty({},"passive",{get:function(){return m_=!0,!0}});window.addEventListener("test",Zh,Zh),window.removeEventListener("test",Zh,Zh)}catch{m_=!1}var Il=m_?{passive:!1}:!1,lj=function(n){return n.tagName==="TEXTAREA"},AR=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!lj(n)&&t[e]==="visible")},cj=function(n){return AR(n,"overflowY")},uj=function(n){return AR(n,"overflowX")},wI=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=kR(n,r);if(s){var o=PR(n,r),l=o[1],c=o[2];if(l>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},dj=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},hj=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},kR=function(n,e){return n==="v"?cj(e):uj(e)},PR=function(n,e){return n==="v"?dj(e):hj(e)},fj=function(n,e){return n==="h"&&e==="rtl"?-1:1},pj=function(n,e,t,r,s){var o=fj(n,window.getComputedStyle(e).direction),l=o*r,c=t.target,d=e.contains(c),f=!1,m=l>0,g=0,v=0;do{if(!c)break;var I=PR(n,c),b=I[0],x=I[1],R=I[2],L=x-R-o*b;(b||L)&&kR(n,c)&&(g+=L,v+=b);var V=c.parentNode;c=V&&V.nodeType===Node.DOCUMENT_FRAGMENT_NODE?V.host:V}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(m&&Math.abs(g)<1||!m&&Math.abs(v)<1)&&(f=!0),f},ef=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},EI=function(n){return[n.deltaX,n.deltaY]},SI=function(n){return n&&"current"in n?n.current:n},mj=function(n,e){return n[0]===e[0]&&n[1]===e[1]},gj=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},yj=0,xl=[];function _j(n){var e=S.useRef([]),t=S.useRef([0,0]),r=S.useRef(),s=S.useState(yj++)[0],o=S.useState(bR)[0],l=S.useRef(n);S.useEffect(function(){l.current=n},[n]),S.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var x=FV([n.lockRef.current],(n.shards||[]).map(SI),!0).filter(Boolean);return x.forEach(function(R){return R.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var c=S.useCallback(function(x,R){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var L=ef(x),V=t.current,U="deltaX"in x?x.deltaX:V[0]-L[0],W="deltaY"in x?x.deltaY:V[1]-L[1],Y,X=x.target,k=Math.abs(U)>Math.abs(W)?"h":"v";if("touches"in x&&k==="h"&&X.type==="range")return!1;var A=wI(k,X);if(!A)return!0;if(A?Y=k:(Y=k==="v"?"h":"v",A=wI(k,X)),!A)return!1;if(!r.current&&"changedTouches"in x&&(U||W)&&(r.current=Y),!Y)return!0;var N=r.current||Y;return pj(N,R,x,N==="h"?U:W)},[]),d=S.useCallback(function(x){var R=x;if(!(!xl.length||xl[xl.length-1]!==o)){var L="deltaY"in R?EI(R):ef(R),V=e.current.filter(function(Y){return Y.name===R.type&&(Y.target===R.target||R.target===Y.shadowParent)&&mj(Y.delta,L)})[0];if(V&&V.should){R.cancelable&&R.preventDefault();return}if(!V){var U=(l.current.shards||[]).map(SI).filter(Boolean).filter(function(Y){return Y.contains(R.target)}),W=U.length>0?c(R,U[0]):!l.current.noIsolation;W&&R.cancelable&&R.preventDefault()}}},[]),f=S.useCallback(function(x,R,L,V){var U={name:x,delta:R,target:L,should:V,shadowParent:vj(L)};e.current.push(U),setTimeout(function(){e.current=e.current.filter(function(W){return W!==U})},1)},[]),m=S.useCallback(function(x){t.current=ef(x),r.current=void 0},[]),g=S.useCallback(function(x){f(x.type,EI(x),x.target,c(x,n.lockRef.current))},[]),v=S.useCallback(function(x){f(x.type,ef(x),x.target,c(x,n.lockRef.current))},[]);S.useEffect(function(){return xl.push(o),n.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",d,Il),document.addEventListener("touchmove",d,Il),document.addEventListener("touchstart",m,Il),function(){xl=xl.filter(function(x){return x!==o}),document.removeEventListener("wheel",d,Il),document.removeEventListener("touchmove",d,Il),document.removeEventListener("touchstart",m,Il)}},[]);var I=n.removeScrollBar,b=n.inert;return S.createElement(S.Fragment,null,b?S.createElement(o,{styles:gj(s)}):null,I?S.createElement(aj,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function vj(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const wj=KV(RR,_j);var $p=S.forwardRef(function(n,e){return S.createElement(Bp,hs({},n,{ref:e,sideCar:wj}))});$p.classNames=Bp.classNames;var Ej=[" ","Enter","ArrowUp","ArrowDown"],Sj=[" ","Enter"],ma="Select",[Wp,Hp,Tj]=_v(ma),[dc]=gi(ma,[Tj,Up]),qp=Up(),[Ij,wo]=dc(ma),[xj,Cj]=dc(ma),NR=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:o,value:l,defaultValue:c,onValueChange:d,dir:f,name:m,autoComplete:g,disabled:v,required:I,form:b}=n,x=qp(e),[R,L]=S.useState(null),[V,U]=S.useState(null),[W,Y]=S.useState(!1),X=Dp(f),[k,A]=Gl({prop:r,defaultProp:s??!1,onChange:o,caller:ma}),[N,M]=Gl({prop:l,defaultProp:c,onChange:d,caller:ma}),O=S.useRef(null),F=R?b||!!R.closest("form"):!0,[D,me]=S.useState(new Set),ve=Array.from(D).map(pe=>pe.props.value).join(";");return _.jsx(_R,{...x,children:_.jsxs(Ij,{required:I,scope:e,trigger:R,onTriggerChange:L,valueNode:V,onValueNodeChange:U,valueNodeHasChildren:W,onValueNodeHasChildrenChange:Y,contentId:ni(),value:N,onValueChange:M,open:k,onOpenChange:A,dir:X,triggerPointerDownPosRef:O,disabled:v,children:[_.jsx(Wp.Provider,{scope:e,children:_.jsx(xj,{scope:n.__scopeSelect,onNativeOptionAdd:S.useCallback(pe=>{me(Ee=>new Set(Ee).add(pe))},[]),onNativeOptionRemove:S.useCallback(pe=>{me(Ee=>{const H=new Set(Ee);return H.delete(pe),H})},[]),children:t})}),F?_.jsxs(eb,{"aria-hidden":!0,required:I,tabIndex:-1,name:m,autoComplete:g,value:N,onChange:pe=>M(pe.target.value),disabled:v,form:b,children:[N===void 0?_.jsx("option",{value:""}):null,Array.from(D)]},ve):null]})})};NR.displayName=ma;var DR="SelectTrigger",OR=S.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,o=qp(t),l=wo(DR,t),c=l.disabled||r,d=Ze(e,l.onTriggerChange),f=Hp(t),m=S.useRef("touch"),[g,v,I]=nb(x=>{const R=f().filter(U=>!U.disabled),L=R.find(U=>U.value===l.value),V=rb(R,x,L);V!==void 0&&l.onValueChange(V.value)}),b=x=>{c||(l.onOpenChange(!0),I()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return _.jsx(vR,{asChild:!0,...o,children:_.jsx(We.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":tb(l.value)?"":void 0,...s,ref:d,onClick:Ae(s.onClick,x=>{x.currentTarget.focus(),m.current!=="mouse"&&b(x)}),onPointerDown:Ae(s.onPointerDown,x=>{m.current=x.pointerType;const R=x.target;R.hasPointerCapture(x.pointerId)&&R.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:Ae(s.onKeyDown,x=>{const R=g.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&v(x.key),!(R&&x.key===" ")&&Ej.includes(x.key)&&(b(),x.preventDefault())})})})});OR.displayName=DR;var MR="SelectValue",LR=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:o,placeholder:l="",...c}=n,d=wo(MR,t),{onValueNodeHasChildrenChange:f}=d,m=o!==void 0,g=Ze(e,d.onValueNodeChange);return Ht(()=>{f(m)},[f,m]),_.jsx(We.span,{...c,ref:g,style:{pointerEvents:"none"},children:tb(d.value)?_.jsx(_.Fragment,{children:l}):o})});LR.displayName=MR;var Rj="SelectIcon",VR=S.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return _.jsx(We.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});VR.displayName=Rj;var bj="SelectPortal",jR=n=>_.jsx(zp,{asChild:!0,...n});jR.displayName=bj;var ga="SelectContent",FR=S.forwardRef((n,e)=>{const t=wo(ga,n.__scopeSelect),[r,s]=S.useState();if(Ht(()=>{s(new DocumentFragment)},[]),!t.open){const o=r;return o?ud.createPortal(_.jsx(UR,{scope:n.__scopeSelect,children:_.jsx(Wp.Slot,{scope:n.__scopeSelect,children:_.jsx("div",{children:n.children})})}),o):null}return _.jsx(zR,{...n,ref:e})});FR.displayName=ga;var Nr=10,[UR,Eo]=dc(ga),Aj="SelectContentImpl",kj=xV("SelectContent.RemoveScroll"),zR=S.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:l,side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:g,collisionBoundary:v,collisionPadding:I,sticky:b,hideWhenDetached:x,avoidCollisions:R,...L}=n,V=wo(ga,t),[U,W]=S.useState(null),[Y,X]=S.useState(null),k=Ze(e,q=>W(q)),[A,N]=S.useState(null),[M,O]=S.useState(null),F=Hp(t),[D,me]=S.useState(!1),ve=S.useRef(!1);S.useEffect(()=>{if(U)return bv(U)},[U]),vv();const pe=S.useCallback(q=>{const[oe,...ye]=F().map($e=>$e.ref.current),[Ie]=ye.slice(-1),je=document.activeElement;for(const $e of q)if($e===je||($e?.scrollIntoView({block:"nearest"}),$e===oe&&Y&&(Y.scrollTop=0),$e===Ie&&Y&&(Y.scrollTop=Y.scrollHeight),$e?.focus(),document.activeElement!==je))return},[F,Y]),Ee=S.useCallback(()=>pe([A,U]),[pe,A,U]);S.useEffect(()=>{D&&Ee()},[D,Ee]);const{onOpenChange:H,triggerPointerDownPosRef:ee}=V;S.useEffect(()=>{if(U){let q={x:0,y:0};const oe=Ie=>{q={x:Math.abs(Math.round(Ie.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(Ie.pageY)-(ee.current?.y??0))}},ye=Ie=>{q.x<=10&&q.y<=10?Ie.preventDefault():U.contains(Ie.target)||H(!1),document.removeEventListener("pointermove",oe),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",ye,{capture:!0})}}},[U,H,ee]),S.useEffect(()=>{const q=()=>H(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[H]);const[ue,B]=nb(q=>{const oe=F().filter(je=>!je.disabled),ye=oe.find(je=>je.ref.current===document.activeElement),Ie=rb(oe,q,ye);Ie&&setTimeout(()=>Ie.ref.current.focus())}),ne=S.useCallback((q,oe,ye)=>{const Ie=!ve.current&&!ye;(V.value!==void 0&&V.value===oe||Ie)&&(N(q),Ie&&(ve.current=!0))},[V.value]),te=S.useCallback(()=>U?.focus(),[U]),se=S.useCallback((q,oe,ye)=>{const Ie=!ve.current&&!ye;(V.value!==void 0&&V.value===oe||Ie)&&O(q)},[V.value]),he=r==="popper"?g_:BR,ce=he===g_?{side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:g,collisionBoundary:v,collisionPadding:I,sticky:b,hideWhenDetached:x,avoidCollisions:R}:{};return _.jsx(UR,{scope:t,content:U,viewport:Y,onViewportChange:X,itemRefCallback:ne,selectedItem:A,onItemLeave:te,itemTextRefCallback:se,focusSelectedItem:Ee,selectedItemText:M,position:r,isPositioned:D,searchRef:ue,children:_.jsx($p,{as:kj,allowPinchZoom:!0,children:_.jsx(Mp,{asChild:!0,trapped:V.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:Ae(s,q=>{V.trigger?.focus({preventScroll:!0}),q.preventDefault()}),children:_.jsx(Op,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>V.onOpenChange(!1),children:_.jsx(he,{role:"listbox",id:V.contentId,"data-state":V.open?"open":"closed",dir:V.dir,onContextMenu:q=>q.preventDefault(),...L,...ce,onPlaced:()=>me(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...L.style},onKeyDown:Ae(L.onKeyDown,q=>{const oe=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!oe&&q.key.length===1&&B(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let Ie=F().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(q.key)&&(Ie=Ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const je=q.target,$e=Ie.indexOf(je);Ie=Ie.slice($e+1)}setTimeout(()=>pe(Ie)),q.preventDefault()}})})})})})})});zR.displayName=Aj;var Pj="SelectItemAlignedPosition",BR=S.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,o=wo(ga,t),l=Eo(ga,t),[c,d]=S.useState(null),[f,m]=S.useState(null),g=Ze(e,k=>m(k)),v=Hp(t),I=S.useRef(!1),b=S.useRef(!0),{viewport:x,selectedItem:R,selectedItemText:L,focusSelectedItem:V}=l,U=S.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&f&&x&&R&&L){const k=o.trigger.getBoundingClientRect(),A=f.getBoundingClientRect(),N=o.valueNode.getBoundingClientRect(),M=L.getBoundingClientRect();if(o.dir!=="rtl"){const je=M.left-A.left,$e=N.left-je,Ue=k.left-$e,ft=k.width+Ue,Mn=Math.max(ft,A.width),Rn=window.innerWidth-Nr,bn=u_($e,[Nr,Math.max(Nr,Rn-Mn)]);c.style.minWidth=ft+"px",c.style.left=bn+"px"}else{const je=A.right-M.right,$e=window.innerWidth-N.right-je,Ue=window.innerWidth-k.right-$e,ft=k.width+Ue,Mn=Math.max(ft,A.width),Rn=window.innerWidth-Nr,bn=u_($e,[Nr,Math.max(Nr,Rn-Mn)]);c.style.minWidth=ft+"px",c.style.right=bn+"px"}const O=v(),F=window.innerHeight-Nr*2,D=x.scrollHeight,me=window.getComputedStyle(f),ve=parseInt(me.borderTopWidth,10),pe=parseInt(me.paddingTop,10),Ee=parseInt(me.borderBottomWidth,10),H=parseInt(me.paddingBottom,10),ee=ve+pe+D+H+Ee,ue=Math.min(R.offsetHeight*5,ee),B=window.getComputedStyle(x),ne=parseInt(B.paddingTop,10),te=parseInt(B.paddingBottom,10),se=k.top+k.height/2-Nr,he=F-se,ce=R.offsetHeight/2,q=R.offsetTop+ce,oe=ve+pe+q,ye=ee-oe;if(oe<=se){const je=O.length>0&&R===O[O.length-1].ref.current;c.style.bottom="0px";const $e=f.clientHeight-x.offsetTop-x.offsetHeight,Ue=Math.max(he,ce+(je?te:0)+$e+Ee),ft=oe+Ue;c.style.height=ft+"px"}else{const je=O.length>0&&R===O[0].ref.current;c.style.top="0px";const Ue=Math.max(se,ve+x.offsetTop+(je?ne:0)+ce)+ye;c.style.height=Ue+"px",x.scrollTop=oe-se+x.offsetTop}c.style.margin=`${Nr}px 0`,c.style.minHeight=ue+"px",c.style.maxHeight=F+"px",r?.(),requestAnimationFrame(()=>I.current=!0)}},[v,o.trigger,o.valueNode,c,f,x,R,L,o.dir,r]);Ht(()=>U(),[U]);const[W,Y]=S.useState();Ht(()=>{f&&Y(window.getComputedStyle(f).zIndex)},[f]);const X=S.useCallback(k=>{k&&b.current===!0&&(U(),V?.(),b.current=!1)},[U,V]);return _.jsx(Dj,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:I,onScrollButtonChange:X,children:_.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:W},children:_.jsx(We.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});BR.displayName=Pj;var Nj="SelectPopperPosition",g_=S.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Nr,...o}=n,l=qp(t);return _.jsx(wR,{...l,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});g_.displayName=Nj;var[Dj,Av]=dc(ga,{}),y_="SelectViewport",$R=S.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,o=Eo(y_,t),l=Av(y_,t),c=Ze(e,o.onViewportChange),d=S.useRef(0);return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),_.jsx(Wp.Slot,{scope:t,children:_.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ae(s.onScroll,f=>{const m=f.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=l;if(v?.current&&g){const I=Math.abs(d.current-m.scrollTop);if(I>0){const b=window.innerHeight-Nr*2,x=parseFloat(g.style.minHeight),R=parseFloat(g.style.height),L=Math.max(x,R);if(L<b){const V=L+I,U=Math.min(b,V),W=V-U;g.style.height=U+"px",g.style.bottom==="0px"&&(m.scrollTop=W>0?W:0,g.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});$R.displayName=y_;var WR="SelectGroup",[Oj,Mj]=dc(WR),Lj=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=ni();return _.jsx(Oj,{scope:t,id:s,children:_.jsx(We.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Lj.displayName=WR;var HR="SelectLabel",Vj=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Mj(HR,t);return _.jsx(We.div,{id:s.id,...r,ref:e})});Vj.displayName=HR;var zf="SelectItem",[jj,qR]=dc(zf),GR=S.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:o,...l}=n,c=wo(zf,t),d=Eo(zf,t),f=c.value===r,[m,g]=S.useState(o??""),[v,I]=S.useState(!1),b=Ze(e,V=>d.itemRefCallback?.(V,r,s)),x=ni(),R=S.useRef("touch"),L=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return _.jsx(jj,{scope:t,value:r,disabled:s,textId:x,isSelected:f,onItemTextChange:S.useCallback(V=>{g(U=>U||(V?.textContent??"").trim())},[]),children:_.jsx(Wp.ItemSlot,{scope:t,value:r,disabled:s,textValue:m,children:_.jsx(We.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:b,onFocus:Ae(l.onFocus,()=>I(!0)),onBlur:Ae(l.onBlur,()=>I(!1)),onClick:Ae(l.onClick,()=>{R.current!=="mouse"&&L()}),onPointerUp:Ae(l.onPointerUp,()=>{R.current==="mouse"&&L()}),onPointerDown:Ae(l.onPointerDown,V=>{R.current=V.pointerType}),onPointerMove:Ae(l.onPointerMove,V=>{R.current=V.pointerType,s?d.onItemLeave?.():R.current==="mouse"&&V.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(l.onPointerLeave,V=>{V.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Ae(l.onKeyDown,V=>{d.searchRef?.current!==""&&V.key===" "||(Sj.includes(V.key)&&L(),V.key===" "&&V.preventDefault())})})})})});GR.displayName=zf;var Eu="SelectItemText",KR=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...o}=n,l=wo(Eu,t),c=Eo(Eu,t),d=qR(Eu,t),f=Cj(Eu,t),[m,g]=S.useState(null),v=Ze(e,L=>g(L),d.onItemTextChange,L=>c.itemTextRefCallback?.(L,d.value,d.disabled)),I=m?.textContent,b=S.useMemo(()=>_.jsx("option",{value:d.value,disabled:d.disabled,children:I},d.value),[d.disabled,d.value,I]),{onNativeOptionAdd:x,onNativeOptionRemove:R}=f;return Ht(()=>(x(b),()=>R(b)),[x,R,b]),_.jsxs(_.Fragment,{children:[_.jsx(We.span,{id:d.textId,...o,ref:v}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?ud.createPortal(o.children,l.valueNode):null]})});KR.displayName=Eu;var QR="SelectItemIndicator",YR=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return qR(QR,t).isSelected?_.jsx(We.span,{"aria-hidden":!0,...r,ref:e}):null});YR.displayName=QR;var __="SelectScrollUpButton",XR=S.forwardRef((n,e)=>{const t=Eo(__,n.__scopeSelect),r=Av(__,n.__scopeSelect),[s,o]=S.useState(!1),l=Ze(e,r.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let c=function(){const f=d.scrollTop>0;o(f)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?_.jsx(ZR,{...n,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});XR.displayName=__;var v_="SelectScrollDownButton",JR=S.forwardRef((n,e)=>{const t=Eo(v_,n.__scopeSelect),r=Av(v_,n.__scopeSelect),[s,o]=S.useState(!1),l=Ze(e,r.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;o(m)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?_.jsx(ZR,{...n,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});JR.displayName=v_;var ZR=S.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,o=Eo("SelectScrollButton",t),l=S.useRef(null),c=Hp(t),d=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),Ht(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),_.jsx(We.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ae(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Ae(s.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Ae(s.onPointerLeave,()=>{d()})})}),Fj="SelectSeparator",Uj=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return _.jsx(We.div,{"aria-hidden":!0,...r,ref:e})});Uj.displayName=Fj;var w_="SelectArrow",zj=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=qp(t),o=wo(w_,t),l=Eo(w_,t);return o.open&&l.position==="popper"?_.jsx(ER,{...s,...r,ref:e}):null});zj.displayName=w_;var Bj="SelectBubbleInput",eb=S.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=S.useRef(null),o=Ze(r,s),l=SR(e);return S.useEffect(()=>{const c=s.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&m){const g=new Event("change",{bubbles:!0});m.call(c,e),c.dispatchEvent(g)}},[l,e]),_.jsx(We.select,{...t,style:{...TR,...t.style},ref:o,defaultValue:e})});eb.displayName=Bj;function tb(n){return n===""||n===void 0}function nb(n){const e=tn(n),t=S.useRef(""),r=S.useRef(0),s=S.useCallback(l=>{const c=t.current+l;e(c),(function d(f){t.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(c)},[e]),o=S.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,o]}function rb(n,e,t){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=$j(n,Math.max(o,0));s.length===1&&(l=l.filter(f=>f!==t));const d=l.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function $j(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Wj=NR,Hj=OR,qj=LR,Gj=VR,Kj=jR,Qj=FR,Yj=$R,Xj=GR,Jj=KR,Zj=YR,eF=XR,tF=JR;function Bf({...n}){return _.jsx(Wj,{"data-slot":"select",...n})}function $f({...n}){return _.jsx(qj,{"data-slot":"select-value",...n})}function Wf({className:n,size:e="default",children:t,...r}){return _.jsxs(Hj,{"data-slot":"select-trigger","data-size":e,className:st("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,_.jsx(Gj,{asChild:!0,children:_.jsx(TC,{className:"size-4 opacity-50"})})]})}function Hf({className:n,children:e,position:t="popper",...r}){return _.jsx(Kj,{children:_.jsxs(Qj,{"data-slot":"select-content",className:st("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[_.jsx(nF,{}),_.jsx(Yj,{className:st("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),_.jsx(rF,{})]})})}function Kl({className:n,children:e,...t}){return _.jsxs(Xj,{"data-slot":"select-item",className:st("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[_.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:_.jsx(Zj,{children:_.jsx(iM,{className:"size-4"})})}),_.jsx(Jj,{children:e})]})}function nF({className:n,...e}){return _.jsx(eF,{"data-slot":"select-scroll-up-button",className:st("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(hM,{className:"size-4"})})}function rF({className:n,...e}){return _.jsx(tF,{"data-slot":"select-scroll-down-button",className:st("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(TC,{className:"size-4"})})}const sF="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function qf(n){const[e,t]=S.useState(!1),r=()=>{t(!0)},{src:s,alt:o,style:l,className:c,...d}=n;return e?_.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${c??""}`,style:l,children:_.jsx("div",{className:"flex items-center justify-center w-full h-full",children:_.jsx("img",{src:sF,alt:"Error loading image",...d,"data-original-url":s})})}):_.jsx("img",{src:s,alt:o,className:c,style:l,...d,onError:r})}const iF=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],oF=({routes:n,onRouteClick:e,filterGrade:t,onFilterChange:r,selectedRouteId:s})=>_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(IC,{className:"size-4 text-muted-foreground"}),_.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by grade:"})]}),_.jsxs(Bf,{value:t||"all",onValueChange:o=>r(o==="all"?"":o),children:[_.jsx(Wf,{className:"w-32",children:_.jsx($f,{placeholder:"All grades"})}),_.jsxs(Hf,{children:[_.jsx(Kl,{value:"all",children:"All grades"}),iF.map(o=>_.jsx(Kl,{value:o,children:o},o))]})]}),t&&_.jsx(un,{variant:"outline",size:"sm",onClick:()=>r(""),children:"Clear filter"})]}),_.jsxs("div",{className:"landscape-mobile:space-y-4",children:[_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4 landscape-mobile:hidden",children:n.map(o=>_.jsxs(Mf,{className:`cursor-pointer hover:shadow-lg transition-all overflow-hidden ${s===o.id?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>e(o),children:[_.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[_.jsx(qf,{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"}),_.jsx("div",{className:"absolute top-3 left-3",children:_.jsx(Ys,{variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:o.grade})}),_.jsx("div",{className:"absolute top-3 right-3",children:_.jsx(Ys,{variant:o.color.toLowerCase()==="red"?"destructive":o.color.toLowerCase()==="blue"?"default":o.color.toLowerCase()==="multi-color"?"secondary":"outline",children:o.color})})]}),_.jsx(yv,{className:"p-4",children:_.jsxs("div",{className:"space-y-3",children:[_.jsx("h3",{className:"font-medium truncate",children:o.name}),_.jsx("div",{className:"flex items-center justify-center",children:_.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:5},(l,c)=>_.jsx($u,{className:`size-4 ${c<Math.round(o.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},c)),_.jsx("span",{className:"text-sm font-medium ml-2",children:o.averageRating>0?o.averageRating.toFixed(1):""}),_.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",o.totalReviews,")"]})]})}),_.jsx("div",{className:"text-center",children:_.jsxs("div",{className:"text-xs text-muted-foreground",children:["Set by ",o.setter]})})]})})]},o.id))}),_.jsx("div",{className:"hidden landscape-mobile:block space-y-4",children:n.map(o=>{const l=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),c=f=>Array.from({length:5},(m,g)=>_.jsx($u,{className:`size-3 ${g<f?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},g)),d=f=>{const m=new Date(f),v=Math.abs(new Date().getTime()-m.getTime());return Math.ceil(v/(1e3*60*60*24))};return _.jsx(Mf,{className:`cursor-pointer hover:shadow-lg transition-all overflow-hidden ${s===o.id?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>e(o),children:_.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"space-y-3",children:[_.jsx("h3",{className:"text-2xl font-medium",children:o.name}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(Ys,{variant:"secondary",className:"text-base px-3 py-1.5",children:o.grade}),_.jsxs(Ys,{variant:o.color.toLowerCase()==="red"?"destructive":o.color.toLowerCase()==="blue"?"default":o.color.toLowerCase()==="multi-color"?"secondary":"outline",children:[o.color," holds"]}),d(o.dateSet)<=7&&_.jsx(Ys,{variant:"secondary",className:"text-xs px-2 py-1",children:"New"})]})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(CC,{className:"size-4 text-muted-foreground"}),_.jsxs("span",{className:"text-sm",children:["Route setter: ",_.jsx("strong",{children:o.setter})]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(SC,{className:"size-4 text-muted-foreground"}),_.jsxs("span",{className:"text-sm",children:["Set on ",l(o.dateSet)]}),_.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",d(o.dateSet)," days ago)"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"flex items-center gap-1",children:c(Math.round(o.averageRating))}),_.jsx("span",{className:"font-medium",children:o.averageRating>0?o.averageRating.toFixed(1):""}),_.jsxs("span",{className:"text-muted-foreground",children:["(",o.totalReviews," review",o.totalReviews!==1?"s":"",")"]})]}),o.totalReviews>0&&_.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[_.jsx(xC,{className:"size-4"}),_.jsx("span",{children:o.totalReviews===1?"Latest review":`${o.totalReviews} climbers have reviewed this route`})]})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"aspect-[4/3] relative overflow-hidden rounded-lg",children:_.jsx(qf,{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("h4",{className:"font-medium text-sm",children:"Route Description"}),_.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:o.description||"No description available for this route."})]})]})]})},o.id)})})]}),n.length===0&&_.jsx("div",{className:"text-center py-12",children:_.jsx("p",{className:"text-muted-foreground",children:"No routes found matching your filter."})})]});function aF(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var Er=n=>{const{present:e,children:t}=n,r=lF(e),s=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),o=Ze(r.ref,cF(s));return typeof t=="function"||r.isPresent?S.cloneElement(s,{ref:o}):null};Er.displayName="Presence";function lF(n){const[e,t]=S.useState(),r=S.useRef(null),s=S.useRef(n),o=S.useRef("none"),l=n?"mounted":"unmounted",[c,d]=aF(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const f=tf(r.current);o.current=c==="mounted"?f:"none"},[c]),Ht(()=>{const f=r.current,m=s.current;if(m!==n){const v=o.current,I=tf(f);n?d("MOUNT"):I==="none"||f?.display==="none"?d("UNMOUNT"):d(m&&v!==I?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),Ht(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,g=I=>{const x=tf(r.current).includes(CSS.escape(I.animationName));if(I.target===e&&x&&(d("ANIMATION_END"),!s.current)){const R=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=R)})}},v=I=>{I.target===e&&(o.current=tf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:S.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function tf(n){return n?.animationName||"none"}function cF(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function uF(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var kv="ScrollArea",[sb]=gi(kv),[dF,Sr]=sb(kv),ib=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:o=600,...l}=n,[c,d]=S.useState(null),[f,m]=S.useState(null),[g,v]=S.useState(null),[I,b]=S.useState(null),[x,R]=S.useState(null),[L,V]=S.useState(0),[U,W]=S.useState(0),[Y,X]=S.useState(!1),[k,A]=S.useState(!1),N=Ze(e,O=>d(O)),M=Dp(s);return _.jsx(dF,{scope:t,type:r,dir:M,scrollHideDelay:o,scrollArea:c,viewport:f,onViewportChange:m,content:g,onContentChange:v,scrollbarX:I,onScrollbarXChange:b,scrollbarXEnabled:Y,onScrollbarXEnabledChange:X,scrollbarY:x,onScrollbarYChange:R,scrollbarYEnabled:k,onScrollbarYEnabledChange:A,onCornerWidthChange:V,onCornerHeightChange:W,children:_.jsx(We.div,{dir:M,...l,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":L+"px","--radix-scroll-area-corner-height":U+"px",...n.style}})})});ib.displayName=kv;var ob="ScrollAreaViewport",ab=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...o}=n,l=Sr(ob,t),c=S.useRef(null),d=Ze(e,c,l.onViewportChange);return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),_.jsx(We.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...n.style},children:_.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});ab.displayName=ob;var Rs="ScrollAreaScrollbar",lb=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Sr(Rs,n.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,c=n.orientation==="horizontal";return S.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),s.type==="hover"?_.jsx(hF,{...r,ref:e,forceMount:t}):s.type==="scroll"?_.jsx(fF,{...r,ref:e,forceMount:t}):s.type==="auto"?_.jsx(cb,{...r,ref:e,forceMount:t}):s.type==="always"?_.jsx(Pv,{...r,ref:e}):null});lb.displayName=Rs;var hF=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Sr(Rs,n.__scopeScrollArea),[o,l]=S.useState(!1);return S.useEffect(()=>{const c=s.scrollArea;let d=0;if(c){const f=()=>{window.clearTimeout(d),l(!0)},m=()=>{d=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),_.jsx(Er,{present:t||o,children:_.jsx(cb,{"data-state":o?"visible":"hidden",...r,ref:e})})}),fF=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Sr(Rs,n.__scopeScrollArea),o=n.orientation==="horizontal",l=Kp(()=>d("SCROLL_END"),100),[c,d]=uF("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,s.scrollHideDelay,d]),S.useEffect(()=>{const f=s.viewport,m=o?"scrollLeft":"scrollTop";if(f){let g=f[m];const v=()=>{const I=f[m];g!==I&&(d("SCROLL"),l()),g=I};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[s.viewport,o,d,l]),_.jsx(Er,{present:t||c!=="hidden",children:_.jsx(Pv,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ae(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Ae(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),cb=S.forwardRef((n,e)=>{const t=Sr(Rs,n.__scopeScrollArea),{forceMount:r,...s}=n,[o,l]=S.useState(!1),c=n.orientation==="horizontal",d=Kp(()=>{if(t.viewport){const f=t.viewport.offsetWidth<t.viewport.scrollWidth,m=t.viewport.offsetHeight<t.viewport.scrollHeight;l(c?f:m)}},10);return Ql(t.viewport,d),Ql(t.content,d),_.jsx(Er,{present:r||o,children:_.jsx(Pv,{"data-state":o?"visible":"hidden",...s,ref:e})})}),Pv=S.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=Sr(Rs,n.__scopeScrollArea),o=S.useRef(null),l=S.useRef(0),[c,d]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=pb(c.viewport,c.content),m={...r,sizes:c,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:v=>o.current=v,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:v=>l.current=v};function g(v,I){return vF(v,l.current,c,I)}return t==="horizontal"?_.jsx(pF,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollLeft,I=TI(v,c,s.dir);o.current.style.transform=`translate3d(${I}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=g(v,s.dir))}}):t==="vertical"?_.jsx(mF,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollTop,I=TI(v,c);o.current.style.transform=`translate3d(0, ${I}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=g(v))}}):null}),pF=S.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=Sr(Rs,n.__scopeScrollArea),[l,c]=S.useState(),d=S.useRef(null),f=Ze(e,d,o.onScrollbarXChange);return S.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),_.jsx(db,{"data-orientation":"horizontal",...s,ref:f,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Gp(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.x),onDragScroll:m=>n.onDragScroll(m.x),onWheelScroll:(m,g)=>{if(o.viewport){const v=o.viewport.scrollLeft+m.deltaX;n.onWheelScroll(v),gb(v,g)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Kf(l.paddingLeft),paddingEnd:Kf(l.paddingRight)}})}})}),mF=S.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=Sr(Rs,n.__scopeScrollArea),[l,c]=S.useState(),d=S.useRef(null),f=Ze(e,d,o.onScrollbarYChange);return S.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),_.jsx(db,{"data-orientation":"vertical",...s,ref:f,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Gp(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.y),onDragScroll:m=>n.onDragScroll(m.y),onWheelScroll:(m,g)=>{if(o.viewport){const v=o.viewport.scrollTop+m.deltaY;n.onWheelScroll(v),gb(v,g)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Kf(l.paddingTop),paddingEnd:Kf(l.paddingBottom)}})}})}),[gF,ub]=sb(Rs),db=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:m,onResize:g,...v}=n,I=Sr(Rs,t),[b,x]=S.useState(null),R=Ze(e,N=>x(N)),L=S.useRef(null),V=S.useRef(""),U=I.viewport,W=r.content-r.viewport,Y=tn(m),X=tn(d),k=Kp(g,10);function A(N){if(L.current){const M=N.clientX-L.current.left,O=N.clientY-L.current.top;f({x:M,y:O})}}return S.useEffect(()=>{const N=M=>{const O=M.target;b?.contains(O)&&Y(M,W)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[U,b,W,Y]),S.useEffect(X,[r,X]),Ql(b,k),Ql(I.content,k),_.jsx(gF,{scope:t,scrollbar:b,hasThumb:s,onThumbChange:tn(o),onThumbPointerUp:tn(l),onThumbPositionChange:X,onThumbPointerDown:tn(c),children:_.jsx(We.div,{...v,ref:R,style:{position:"absolute",...v.style},onPointerDown:Ae(n.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),L.current=b.getBoundingClientRect(),V.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I.viewport&&(I.viewport.style.scrollBehavior="auto"),A(N))}),onPointerMove:Ae(n.onPointerMove,A),onPointerUp:Ae(n.onPointerUp,N=>{const M=N.target;M.hasPointerCapture(N.pointerId)&&M.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=V.current,I.viewport&&(I.viewport.style.scrollBehavior=""),L.current=null})})})}),Gf="ScrollAreaThumb",hb=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=ub(Gf,n.__scopeScrollArea);return _.jsx(Er,{present:t||s.hasThumb,children:_.jsx(yF,{ref:e,...r})})}),yF=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,o=Sr(Gf,t),l=ub(Gf,t),{onThumbPositionChange:c}=l,d=Ze(e,g=>l.onThumbChange(g)),f=S.useRef(void 0),m=Kp(()=>{f.current&&(f.current(),f.current=void 0)},100);return S.useEffect(()=>{const g=o.viewport;if(g){const v=()=>{if(m(),!f.current){const I=wF(g,c);f.current=I,c()}};return c(),g.addEventListener("scroll",v),()=>g.removeEventListener("scroll",v)}},[o.viewport,m,c]),_.jsx(We.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ae(n.onPointerDownCapture,g=>{const I=g.target.getBoundingClientRect(),b=g.clientX-I.left,x=g.clientY-I.top;l.onThumbPointerDown({x:b,y:x})}),onPointerUp:Ae(n.onPointerUp,l.onThumbPointerUp)})});hb.displayName=Gf;var Nv="ScrollAreaCorner",fb=S.forwardRef((n,e)=>{const t=Sr(Nv,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?_.jsx(_F,{...n,ref:e}):null});fb.displayName=Nv;var _F=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=Sr(Nv,t),[o,l]=S.useState(0),[c,d]=S.useState(0),f=!!(o&&c);return Ql(s.scrollbarX,()=>{const m=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(m),d(m)}),Ql(s.scrollbarY,()=>{const m=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(m),l(m)}),f?_.jsx(We.div,{...r,ref:e,style:{width:o,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Kf(n){return n?parseInt(n,10):0}function pb(n,e){const t=n/e;return isNaN(t)?0:t}function Gp(n){const e=pb(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function vF(n,e,t,r="ltr"){const s=Gp(t),o=s/2,l=e||o,c=s-l,d=t.scrollbar.paddingStart+l,f=t.scrollbar.size-t.scrollbar.paddingEnd-c,m=t.content-t.viewport,g=r==="ltr"?[0,m]:[m*-1,0];return mb([d,f],g)(n)}function TI(n,e,t="ltr"){const r=Gp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,l=e.content-e.viewport,c=o-r,d=t==="ltr"?[0,l]:[l*-1,0],f=u_(n,d);return mb([0,l],[0,c])(f)}function mb(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function gb(n,e){return n>0&&n<e}var wF=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return(function s(){const o={left:n.scrollLeft,top:n.scrollTop},l=t.left!==o.left,c=t.top!==o.top;(l||c)&&e(),t=o,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function Kp(n,e){const t=tn(n),r=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),S.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Ql(n,e){const t=tn(e);Ht(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var EF=ib,SF=ab,TF=fb;function yb({className:n,children:e,...t}){return _.jsxs(EF,{"data-slot":"scroll-area",className:st("relative",n),...t,children:[_.jsx(SF,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),_.jsx(IF,{}),_.jsx(TF,{})]})}function IF({className:n,orientation:e="vertical",...t}){return _.jsx(lb,{"data-slot":"scroll-area-scrollbar",orientation:e,className:st("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:_.jsx(hb,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const xF=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],CF=({routes:n,onRouteClick:e,filterGrade:t,onFilterChange:r,selectedRouteId:s})=>_.jsxs("div",{className:"h-full flex flex-col",children:[_.jsxs("div",{className:"p-4 border-b space-y-4 flex-shrink-0",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(IC,{className:"size-4 text-muted-foreground"}),_.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by grade"})]}),_.jsxs(Bf,{value:t||"all",onValueChange:o=>r(o==="all"?"":o),children:[_.jsx(Wf,{className:"w-full",children:_.jsx($f,{placeholder:"All grades"})}),_.jsxs(Hf,{children:[_.jsx(Kl,{value:"all",children:"All grades"}),xF.map(o=>_.jsx(Kl,{value:o,children:o},o))]})]}),t&&_.jsx(un,{variant:"outline",size:"sm",onClick:()=>r(""),className:"w-full",children:"Clear filter"})]}),_.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.length," route",n.length!==1?"s":""]})]}),_.jsxs(yb,{className:"flex-1",children:[_.jsx("div",{className:"divide-y divide-border",children:n.map(o=>_.jsx("button",{onClick:l=>{l.preventDefault(),e(o)},type:"button",className:`w-full text-left p-4 hover:bg-accent transition-colors ${s===o.id?"bg-accent border-l-4 border-l-primary":"border-l-4 border-l-transparent"}`,children:_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-start justify-between gap-2",children:[_.jsx("h3",{className:`font-medium line-clamp-1 ${s===o.id?"text-primary":""}`,children:o.name}),_.jsx(uM,{className:`size-4 flex-shrink-0 ${s===o.id?"text-primary":"text-muted-foreground"}`})]}),_.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[_.jsx(Ys,{variant:"secondary",className:"text-xs",children:o.grade}),_.jsx(Ys,{variant:o.color.toLowerCase()==="red"?"destructive":o.color.toLowerCase()==="blue"?"default":o.color.toLowerCase()==="multi-color"?"secondary":"outline",children:o.color})]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(l,c)=>_.jsx($u,{className:`size-3 ${c<Math.round(o.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},c))}),_.jsx("span",{className:"text-xs text-muted-foreground",children:o.averageRating>0?o.averageRating.toFixed(1):""}),_.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",o.totalReviews,")"]})]}),_.jsxs("div",{className:"text-xs text-muted-foreground",children:["Set by ",o.setter]})]})},o.id))}),n.length===0&&_.jsx("div",{className:"p-8 text-center",children:_.jsx("p",{className:"text-sm text-muted-foreground",children:"No routes found matching your filter."})})]})]});var RF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bF=RF.reduce((n,e)=>{const t=Np(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...c}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(d,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),AF="Separator",II="horizontal",kF=["horizontal","vertical"],_b=S.forwardRef((n,e)=>{const{decorative:t,orientation:r=II,...s}=n,o=PF(r)?r:II,c=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return _.jsx(bF.div,{"data-orientation":o,...c,...s,ref:e})});_b.displayName=AF;function PF(n){return kF.includes(n)}var NF=_b;function DF({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return _.jsx(NF,{"data-slot":"separator-root",decorative:t,orientation:e,className:st("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}function vb({className:n,...e}){return _.jsx("textarea",{"data-slot":"textarea",className:st("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}var OF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],MF=OF.reduce((n,e)=>{const t=Np(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...c}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(d,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),LF="Label",wb=S.forwardRef((n,e)=>_.jsx(MF.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));wb.displayName=LF;var VF=wb;function Ji({className:n,...e}){return _.jsx(VF,{"data-slot":"label",className:st("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}const jF=({onSubmit:n,onCancel:e,currentUser:t})=>{const[r,s]=S.useState(0),[o,l]=S.useState(""),[c,d]=S.useState(0),f=v=>{v.preventDefault(),!(r===0||!o.trim())&&(n({rating:r,comment:o.trim()}),s(0),l(""))},m=()=>_.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(v,I)=>{const b=I+1,x=b<=(c||r);return _.jsx("button",{type:"button",className:"p-1 hover:scale-110 transition-transform",onClick:()=>s(b),onMouseEnter:()=>d(b),onMouseLeave:()=>d(0),children:_.jsx($u,{className:`size-6 transition-colors ${x?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-400"}`})},I)})}),g=r>0&&o.trim();return _.jsxs("form",{onSubmit:f,className:"space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("h3",{className:"font-medium",children:"Write a Review"}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reviewing as ",t.displayName||t.email||"Anonymous"]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ji,{children:"Rating"}),m()]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ji,{htmlFor:"comment",children:"Comment"}),_.jsx(vb,{id:"comment",placeholder:"Share your thoughts about this route...",value:o,onChange:v=>l(v.target.value),rows:4})]}),_.jsxs("div",{className:"flex gap-1 pt-2",children:[_.jsx(un,{type:"submit",disabled:!g,children:"Submit Review"}),_.jsx(un,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})},xI=({route:n,onBack:e,onAddReview:t,currentUser:r,showBackButton:s=!0})=>{const[o,l]=S.useState(!1),c=m=>{t(m),l(!1)},d=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),f=m=>Array.from({length:5},(g,v)=>_.jsx($u,{className:`size-4 ${v<m?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},v));return _.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 bg-background p-6 rounded-xl",children:[s&&_.jsxs(un,{variant:"ghost",onClick:e,className:"gap-2",children:[_.jsx(EC,{className:"size-4"}),"Back to Gallery"]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsx("div",{className:"space-y-6",children:_.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[_.jsx("div",{className:"aspect-[4/3] relative overflow-hidden rounded-lg",children:_.jsx(qf,{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("h1",{className:"text-3xl landscape-mobile:text-2xl xl:text-3xl font-medium",children:n.name}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(Ys,{variant:"secondary",className:"text-base px-3 py-1",children:n.grade}),_.jsx(Ys,{variant:n.color.toLowerCase()==="red"?"destructive":n.color.toLowerCase()==="blue"?"default":n.color.toLowerCase()==="multi-color"?"secondary":"outline",children:n.color})]})]}),_.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_.jsx(CC,{className:"size-4 text-muted-foreground"}),_.jsxs("span",{children:["Set by ",_.jsx("strong",{children:n.setter})]})]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_.jsx(SC,{className:"size-4 text-muted-foreground"}),_.jsxs("span",{children:["Set on ",d(n.dateSet)]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"flex items-center gap-1",children:f(Math.round(n.averageRating))}),_.jsx("span",{className:"font-medium",children:n.averageRating>0?n.averageRating.toFixed(1):""}),_.jsxs("span",{className:"text-muted-foreground",children:["(",n.totalReviews," review",n.totalReviews!==1?"s":"",")"]})]})]})]})]})}),_.jsx("div",{className:"landscape-mobile:max-h-[80vh] landscape-mobile:overflow-hidden landscape-mobile:flex landscape-mobile:flex-col",children:_.jsxs(Mf,{className:"landscape-mobile:flex landscape-mobile:flex-col landscape-mobile:h-full landscape-mobile:min-h-0",children:[_.jsx(BC,{className:"landscape-mobile:flex-shrink-0",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(xC,{className:"size-5"}),_.jsx("h2",{children:"Reviews"})]}),_.jsx(un,{onClick:()=>l(!0),size:"sm",className:"landscape-mobile:text-sm",children:"Write a Review"})]})}),_.jsxs(yv,{className:"space-y-4 landscape-mobile:flex-1 landscape-mobile:overflow-y-auto landscape-mobile:min-h-0",children:[o&&_.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:_.jsx(jF,{onSubmit:c,onCancel:()=>l(!1),currentUser:r})}),n.reviews.length>0?_.jsx("div",{className:"space-y-4",children:n.reviews.map((m,g)=>_.jsxs("div",{children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("div",{className:"flex items-start justify-between",children:_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"font-medium",children:m.author}),_.jsx("div",{className:"flex items-center gap-1",children:f(m.rating)})]}),_.jsx("p",{className:"text-sm text-muted-foreground",children:d(m.date)})]})}),_.jsx("p",{className:"text-sm leading-relaxed",children:m.comment})]}),g<n.reviews.length-1&&_.jsx(DF,{className:"mt-4"})]},m.id))}):_.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No reviews yet. Be the first to review this route!"})]})]})})]})]})};function CI({className:n,type:e,...t}){return _.jsx("input",{type:e,"data-slot":"input",className:st("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}const FF=()=>{};var RI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e=function(n,e){if(!n)throw hc(e)},hc=function(n){return new Error("Firebase Database ("+Eb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},UF=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Dv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,m=o>>2,g=(o&3)<<4|c>>4;let v=(c&15)<<2|f>>6,I=f&63;d||(I=64,l||(v=64)),r.push(t[m],t[g],t[v],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Sb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const g=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||f==null||g==null)throw new zF;const v=o<<2|c>>4;if(r.push(v),f!==64){const I=c<<4&240|f>>2;if(r.push(I),g!==64){const b=f<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tb=function(n){const e=Sb(n);return Dv.encodeByteArray(e,!0)},Qf=function(n){return Tb(n).replace(/\./g,"")},Yf=function(n){try{return Dv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(n){return Ib(void 0,n)}function Ib(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!$F(t)||(n[t]=Ib(n[t],e[t]));return n}function $F(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=()=>WF().__FIREBASE_DEFAULTS__,qF=()=>{if(typeof process>"u"||typeof RI>"u")return;const n=RI.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Yf(n[1]);return e&&JSON.parse(e)},Qp=()=>{try{return FF()||HF()||qF()||GF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xb=n=>Qp()?.emulatorHosts?.[n],Ov=n=>{const e=xb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Cb=()=>Qp()?.config,Rb=n=>Qp()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yp(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Qf(JSON.stringify(t)),Qf(JSON.stringify(l)),""].join(".")}const Nu={};function KF(){const n={prod:[],emulator:[]};for(const e of Object.keys(Nu))Nu[e]?n.emulator.push(e):n.prod.push(e);return n}function QF(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let bI=!1;function Xp(n,e){if(typeof window>"u"||typeof document>"u"||!bs(window.location.host)||Nu[n]===e||Nu[n]||bI)return;Nu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=KF().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,I){v.setAttribute("width","24"),v.setAttribute("id",I),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{bI=!0,l()},v}function m(v,I){v.setAttribute("id",I),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=QF(r),I=t("text"),b=document.getElementById(I)||document.createElement("span"),x=t("learnmore"),R=document.getElementById(x)||document.createElement("a"),L=t("preprendIcon"),V=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const U=v.element;c(U),m(R,x);const W=f();d(V,L),U.append(V,b,R,W),document.body.appendChild(U)}o?(b.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function YF(){const n=Qp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JF(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZF(){const n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function e4(){return Eb.NODE_ADMIN===!0}function t4(){return!YF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ab(){try{return typeof indexedDB=="object"}catch{return!1}}function kb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function n4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="FirebaseError";class Hr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=r4,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ka.prototype.create)}}class ka{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?s4(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Hr(s,c,r)}}function s4(n,e){return n.replace(i4,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const i4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n){return JSON.parse(n)}function dn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=qu(Yf(o[0])||""),t=qu(Yf(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},o4=function(n){const e=Pb(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},a4=function(n){const e=Pb(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Yl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function E_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xf(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function ci(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(AI(o)&&AI(l)){if(!ci(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function AI(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Su(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Tu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)r[g]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let g=0;g<16;g++)r[g]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let g=16;g<80;g++){const v=r[g-3]^r[g-8]^r[g-14]^r[g-16];r[g]=(v<<1|v>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],d=this.chain_[4],f,m;for(let g=0;g<80;g++){g<40?g<20?(f=c^o&(l^c),m=1518500249):(f=o^l^c,m=1859775393):g<60?(f=o&l|c&(o|l),m=2400959708):(f=o^l^c,m=3395469782);const v=(s<<5|s>>>27)+f+d+m+r[g]&4294967295;d=c,c=l,l=(o<<30|o>>>2)&4294967295,o=s,s=v}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}else for(;s<t;)if(o[l]=e[s],++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function c4(n,e){const t=new u4(n,e);return t.subscribe.bind(t)}class u4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");d4(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Cy),s.error===void 0&&(s.error=Cy),s.complete===void 0&&(s.complete=Cy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cy(){}function h4(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,_e(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(o<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Jp=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(n){return n&&n._delegate?n._delegate:n}class or{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Mv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g4(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m4(n){return n===sa?void 0:n}function g4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new p4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const _4={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},v4=Ke.INFO,w4={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},E4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=w4[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zp{constructor(e){this.name=e,this._logLevel=v4,this._logHandler=E4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const S4=(n,e)=>e.some(t=>n instanceof t);let kI,PI;function T4(){return kI||(kI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I4(){return PI||(PI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nb=new WeakMap,S_=new WeakMap,Db=new WeakMap,Ry=new WeakMap,jv=new WeakMap;function x4(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ri(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Nb.set(t,n)}).catch(()=>{}),jv.set(e,n),e}function C4(n){if(S_.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});S_.set(n,e)}let T_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return S_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Db.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function R4(n){T_=n(T_)}function b4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(by(this),e,...t);return Db.set(r,e.sort?e.sort():[e]),ri(r)}:I4().includes(n)?function(...e){return n.apply(by(this),e),ri(Nb.get(this))}:function(...e){return ri(n.apply(by(this),e))}}function A4(n){return typeof n=="function"?b4(n):(n instanceof IDBTransaction&&C4(n),S4(n,T4())?new Proxy(n,T_):n)}function ri(n){if(n instanceof IDBRequest)return x4(n);if(Ry.has(n))return Ry.get(n);const e=A4(n);return e!==n&&(Ry.set(n,e),jv.set(e,n)),e}const by=n=>jv.get(n);function em(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=ri(l);return r&&l.addEventListener("upgradeneeded",d=>{r(ri(l.result),d.oldVersion,d.newVersion,ri(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}function Ay(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),ri(t).then(()=>{})}const k4=["get","getKey","getAll","getAllKeys","count"],P4=["put","add","delete","clear"],ky=new Map;function NI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ky.get(e))return ky.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=P4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||k4.includes(t)))return;const o=async function(l,...c){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),s&&d.done]))[0]};return ky.set(e,o),o}R4(n=>({...n,get:(e,t,r)=>NI(e,t)||n.get(e,t,r),has:(e,t)=>!!NI(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(D4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function D4(n){return n.getComponent()?.type==="VERSION"}const I_="@firebase/app",DI="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Zp("@firebase/app"),O4="@firebase/app-compat",M4="@firebase/analytics-compat",L4="@firebase/analytics",V4="@firebase/app-check-compat",j4="@firebase/app-check",F4="@firebase/auth",U4="@firebase/auth-compat",z4="@firebase/database",B4="@firebase/data-connect",$4="@firebase/database-compat",W4="@firebase/functions",H4="@firebase/functions-compat",q4="@firebase/installations",G4="@firebase/installations-compat",K4="@firebase/messaging",Q4="@firebase/messaging-compat",Y4="@firebase/performance",X4="@firebase/performance-compat",J4="@firebase/remote-config",Z4="@firebase/remote-config-compat",eU="@firebase/storage",tU="@firebase/storage-compat",nU="@firebase/firestore",rU="@firebase/ai",sU="@firebase/firestore-compat",iU="firebase",oU="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="[DEFAULT]",aU={[I_]:"fire-core",[O4]:"fire-core-compat",[L4]:"fire-analytics",[M4]:"fire-analytics-compat",[j4]:"fire-app-check",[V4]:"fire-app-check-compat",[F4]:"fire-auth",[U4]:"fire-auth-compat",[z4]:"fire-rtdb",[B4]:"fire-data-connect",[$4]:"fire-rtdb-compat",[W4]:"fire-fn",[H4]:"fire-fn-compat",[q4]:"fire-iid",[G4]:"fire-iid-compat",[K4]:"fire-fcm",[Q4]:"fire-fcm-compat",[Y4]:"fire-perf",[X4]:"fire-perf-compat",[J4]:"fire-rc",[Z4]:"fire-rc-compat",[eU]:"fire-gcs",[tU]:"fire-gcs-compat",[nU]:"fire-fst",[sU]:"fire-fst-compat",[rU]:"fire-vertex","fire-js":"fire-js",[iU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new Map,lU=new Map,C_=new Map;function OI(n,e){try{n.container.addComponent(e)}catch(t){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _r(n){const e=n.name;if(C_.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;C_.set(e,n);for(const t of Jf.values())OI(t,n);for(const t of lU.values())OI(t,n);return!0}function So(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},io=new ka("app","Firebase",cU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw io.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=oU;function Ob(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:x_,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw io.create("bad-app-name",{appName:String(s)});if(t||(t=Cb()),!t)throw io.create("no-options");const o=Jf.get(s);if(o){if(ci(t,o.options)&&ci(r,o.config))return o;throw io.create("duplicate-app",{appName:s})}const l=new y4(s);for(const d of C_.values())l.addComponent(d);const c=new uU(t,r,l);return Jf.set(s,c),c}function hd(n=x_){const e=Jf.get(n);if(!e&&n===x_&&Cb())return Ob();if(!e)throw io.create("no-app",{appName:n});return e}function xn(n,e,t){let r=aU[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(l.join(" "));return}_r(new or(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU="firebase-heartbeat-database",hU=1,Gu="firebase-heartbeat-store";let Py=null;function Mb(){return Py||(Py=em(dU,hU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gu)}catch(t){console.warn(t)}}}}).catch(n=>{throw io.create("idb-open",{originalErrorMessage:n.message})})),Py}async function fU(n){try{const t=(await Mb()).transaction(Gu),r=await t.objectStore(Gu).get(Lb(n));return await t.done,r}catch(e){if(e instanceof Hr)ui.warn(e.message);else{const t=io.create("idb-get",{originalErrorMessage:e?.message});ui.warn(t.message)}}}async function MI(n,e){try{const r=(await Mb()).transaction(Gu,"readwrite");await r.objectStore(Gu).put(e,Lb(n)),await r.done}catch(t){if(t instanceof Hr)ui.warn(t.message);else{const r=io.create("idb-set",{originalErrorMessage:t?.message});ui.warn(r.message)}}}function Lb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=1024,mU=30;class gU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _U(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=LI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>mU){const s=vU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ui.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=LI(),{heartbeatsToSend:t,unsentEntries:r}=yU(this._heartbeatsCache.heartbeats),s=Qf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ui.warn(e),""}}}function LI(){return new Date().toISOString().substring(0,10)}function yU(n,e=pU){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),VI(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),VI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _U{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ab()?kb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return MI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return MI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function VI(n){return Qf(JSON.stringify({version:2,heartbeats:n})).length}function vU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(n){_r(new or("platform-logger",e=>new N4(e),"PRIVATE")),_r(new or("heartbeat",e=>new gU(e),"PRIVATE")),xn(I_,DI,n),xn(I_,DI,"esm2020"),xn("fire-js","")}wU("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firebasestorage.googleapis.com",jb="storageBucket",EU=120*1e3,SU=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Hr{constructor(e,t,r=0){super(Ny(e),`Firebase Storage: ${t} (${Ny(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ny(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function Ny(n){return"storage/"+n}function Fv(){const n="An unknown error occurred, please check the error payload for server response.";return new Ot(Dt.UNKNOWN,n)}function TU(n){return new Ot(Dt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function IU(n){return new Ot(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xU(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Dt.UNAUTHENTICATED,n)}function CU(){return new Ot(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function RU(n){return new Ot(Dt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function bU(){return new Ot(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AU(){return new Ot(Dt.CANCELED,"User canceled the upload/download.")}function kU(n){return new Ot(Dt.INVALID_URL,"Invalid URL '"+n+"'.")}function PU(n){return new Ot(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function NU(){return new Ot(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jb+"' property when initializing the app?")}function DU(){return new Ot(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function OU(){return new Ot(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function MU(n){return new Ot(Dt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function R_(n){return new Ot(Dt.INVALID_ARGUMENT,n)}function Fb(){return new Ot(Dt.APP_DELETED,"The Firebase app was deleted.")}function LU(n){return new Ot(Dt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Du(n,e){return new Ot(Dt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function gu(n){throw new Ot(Dt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=nr.makeFromUrl(e,t)}catch{return new nr(e,"")}if(r.path==="")return r;throw PU(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function f(W){W.path_=decodeURIComponent(W.path)}const m="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",I=new RegExp(`^https?://${g}/${m}/b/${s}/o${v}`,"i"),b={bucket:1,path:3},x=t===Vb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",L=new RegExp(`^https?://${x}/${s}/${R}`,"i"),U=[{regex:c,indices:d,postModify:o},{regex:I,indices:b,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let W=0;W<U.length;W++){const Y=U[W],X=Y.regex.exec(e);if(X){const k=X[Y.indices.bucket];let A=X[Y.indices.path];A||(A=""),r=new nr(k,A),Y.postModify(r);break}}if(r==null)throw kU(e);return r}}class VU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(n,e,t){let r=1,s=null,o=null,l=!1,c=0;function d(){return c===2}let f=!1;function m(...R){f||(f=!0,e.apply(null,R))}function g(R){s=setTimeout(()=>{s=null,n(I,d())},R)}function v(){o&&clearTimeout(o)}function I(R,...L){if(f){v();return}if(R){v(),m.call(null,R,...L);return}if(d()||l){v(),m.call(null,R,...L);return}r<64&&(r*=2);let U;c===1?(c=2,U=0):U=(r+Math.random())*1e3,g(U)}let b=!1;function x(R){b||(b=!0,v(),!f&&(s!==null?(R||(c=2),clearTimeout(s),g(0)):R||(c=1)))}return g(0),o=setTimeout(()=>{l=!0,x(!0)},t),x}function FU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(n){return n!==void 0}function zU(n){return typeof n=="object"&&!Array.isArray(n)}function Uv(n){return typeof n=="string"||n instanceof String}function jI(n){return zv()&&n instanceof Blob}function zv(){return typeof Blob<"u"}function FI(n,e,t,r){if(r<e)throw R_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw R_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Ub(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var da;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(da||(da={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,t,r,s,o,l,c,d,f,m,g,v=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,x)=>{this.resolve_=b,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new nf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===da.NO_ERROR,d=o.getStatus();if(!c||BU(d,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===da.ABORT;r(!1,new nf(!1,null,m));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new nf(f,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());UU(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=Fv();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(s.canceled){const d=this.appDelete_?Fb():AU();l(d)}else{const d=bU();l(d)}};this.canceled_?t(!1,new nf(!1,null,!0)):this.backoffId_=jU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function WU(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function HU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function GU(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function KU(n,e,t,r,s,o,l=!0,c=!1){const d=Ub(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return qU(m,e),WU(m,t),HU(m,o),GU(m,r),new $U(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YU(...n){const e=QU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(zv())return new Blob(n);throw new Ot(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function XU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(n){if(typeof atob>"u")throw MU("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dy{constructor(e,t){this.data=e,this.contentType=t||null}}function ZU(n,e){switch(n){case ps.RAW:return new Dy(zb(e));case ps.BASE64:case ps.BASE64URL:return new Dy(Bb(n,e));case ps.DATA_URL:return new Dy(t3(e),n3(e))}throw Fv()}function zb(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function e3(n){let e;try{e=decodeURIComponent(n)}catch{throw Du(ps.DATA_URL,"Malformed data URL.")}return zb(e)}function Bb(n,e){switch(n){case ps.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw Du(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ps.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw Du(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=JU(e)}catch(s){throw s.message.includes("polyfill")?s:Du(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class $b{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Du(ps.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=r3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function t3(n){const e=new $b(n);return e.base64?Bb(ps.BASE64,e.rest):e3(e.rest)}function n3(n){return new $b(n).contentType}function r3(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){let r=0,s="";jI(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(jI(this.data_)){const r=this.data_,s=XU(r,e,t);return s===null?null:new Zi(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Zi(r,!0)}}static getBlob(...e){if(zv()){const t=e.map(r=>r instanceof Zi?r.data_:r);return new Zi(YU.apply(null,t))}else{const t=e.map(l=>Uv(l)?ZU(ps.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)s[o++]=l[c]}),new Zi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n){let e;try{e=JSON.parse(n)}catch{return null}return zU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function i3(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Hb(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(n,e){return e}class Pn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||o3}}let rf=null;function a3(n){return!Uv(n)||n.length<2?n:Hb(n)}function qb(){if(rf)return rf;const n=[];n.push(new Pn("bucket")),n.push(new Pn("generation")),n.push(new Pn("metageneration")),n.push(new Pn("name","fullPath",!0));function e(o,l){return a3(l)}const t=new Pn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new Pn("size");return s.xform=r,n.push(s),n.push(new Pn("timeCreated")),n.push(new Pn("updated")),n.push(new Pn("md5Hash",null,!0)),n.push(new Pn("cacheControl",null,!0)),n.push(new Pn("contentDisposition",null,!0)),n.push(new Pn("contentEncoding",null,!0)),n.push(new Pn("contentLanguage",null,!0)),n.push(new Pn("contentType",null,!0)),n.push(new Pn("metadata","customMetadata",!0)),rf=n,rf}function l3(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new nr(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function c3(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return l3(r,n),r}function Gb(n,e,t){const r=Wb(e);return r===null?null:c3(n,r,t)}function u3(n,e,t,r){const s=Wb(e);if(s===null||!Uv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const m=n.bucket,g=n.fullPath,v="/b/"+l(m)+"/o/"+l(g),I=Bv(v,t,r),b=Ub({alt:"media",token:f});return I+b})[0]}function d3(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class Kb{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n){if(!n)throw Fv()}function h3(n,e){function t(r,s){const o=Gb(n,s,e);return Qb(o!==null),o}return t}function f3(n,e){function t(r,s){const o=Gb(n,s,e);return Qb(o!==null),u3(o,s,n.host,n._protocol)}return t}function Yb(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=CU():s=xU():t.getStatus()===402?s=IU(n.bucket):t.getStatus()===403?s=RU(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function p3(n){const e=Yb(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=TU(n.path)),o.serverResponse=s.serverResponse,o}return t}function m3(n,e,t){const r=e.fullServerUrl(),s=Bv(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new Kb(s,o,f3(n,t),l);return c.errorHandler=p3(e),c}function g3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function y3(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=g3(null,e)),r}function _3(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let U="";for(let W=0;W<2;W++)U=U+Math.random().toString().slice(2);return U}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const f=y3(e,r,s),m=d3(f,t),g="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+d+"--",I=Zi.getBlob(g,r,v);if(I===null)throw DU();const b={name:f.fullPath},x=Bv(o,n.host,n._protocol),R="POST",L=n.maxUploadRetryTime,V=new Kb(x,R,h3(n,t),L);return V.urlParams=b,V.headers=l,V.body=I.uploadData(),V.errorHandler=Yb(e),V}class v3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=da.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=da.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=da.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,o){if(this.sent_)throw gu("cannot .send() more than once");if(bs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw gu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class w3 extends v3{initXhr(){this.xhr_.responseType="text"}}function Xb(){return new w3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this._service=e,t instanceof nr?this._location=t:this._location=nr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ya(e,t)}get root(){const e=new nr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hb(this._location.path)}get storage(){return this._service}get parent(){const e=s3(this._location.path);if(e===null)return null;const t=new nr(this._location.bucket,e);return new ya(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw LU(e)}}function E3(n,e,t){n._throwIfRoot("uploadBytes");const r=_3(n.storage,n._location,qb(),new Zi(e,!0),t);return n.storage.makeRequestWithTokens(r,Xb).then(s=>({metadata:s,ref:n}))}function S3(n){n._throwIfRoot("getDownloadURL");const e=m3(n.storage,n._location,qb());return n.storage.makeRequestWithTokens(e,Xb).then(t=>{if(t===null)throw OU();return t})}function T3(n,e){const t=i3(n._location.path,e),r=new nr(n._location.bucket,t);return new ya(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(n){return/^[A-Za-z]+:\/\//.test(n)}function x3(n,e){return new ya(n,e)}function Jb(n,e){if(n instanceof $v){const t=n;if(t._bucket==null)throw NU();const r=new ya(t,t._bucket);return e!=null?Jb(r,e):r}else return e!==void 0?T3(n,e):n}function C3(n,e){if(e&&I3(e)){if(n instanceof $v)return x3(n,e);throw R_("To use ref(service, url), the first argument must be a Storage instance.")}else return Jb(n,e)}function UI(n,e){const t=e?.[jb];return t==null?null:nr.makeFromBucketSpec(t,n)}function R3(n,e,t,r={}){n.host=`${e}:${t}`;const s=bs(e);s&&(Yp(`https://${n.host}/b`),Xp("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:Lv(o,n.app.options.projectId))}class $v{constructor(e,t,r,s,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=Vb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EU,this._maxUploadRetryTime=SU,this._requests=new Set,s!=null?this._bucket=nr.makeFromBucketSpec(s,this._host):this._bucket=UI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nr.makeFromBucketSpec(this._url,e):this._bucket=UI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ya(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new VU(Fb());{const l=KU(e,this._appId,r,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const zI="@firebase/storage",BI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="storage";function b3(n,e,t){return n=dt(n),E3(n,e,t)}function A3(n){return n=dt(n),S3(n)}function k3(n,e){return n=dt(n),C3(n,e)}function P3(n=hd(),e){n=dt(n);const r=So(n,Zb).getImmediate({identifier:e}),s=Ov("storage");return s&&N3(r,...s),r}function N3(n,e,t,r={}){R3(n,e,t,r)}function D3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new $v(t,r,s,e,To)}function O3(){_r(new or(Zb,D3,"PUBLIC").setMultipleInstances(!0)),xn(zI,BI,""),xn(zI,BI,"esm2020")}O3();var M3="firebase",L3="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(M3,L3,"app");var $I={};const WI="@firebase/database",HI="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eA="";function V3(n){eA=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),dn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:qu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return yi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new j3(e)}}catch{}return new F3},aa=tA("localStorage"),U3=tA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new Zp("@firebase/database"),z3=(function(){let n=1;return function(){return n++}})(),nA=function(n){const e=f4(n),t=new l4;t.update(e);const r=t.digest();return Dv.encodeByteArray(r)},fd=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=fd.apply(null,r):typeof r=="object"?e+=dn(r):e+=r,e+=" "}return e};let Ou=null,qI=!0;const B3=function(n,e){_e(!0,"Can't turn on custom loggers persistently."),jl.logLevel=Ke.VERBOSE,Ou=jl.log.bind(jl)},En=function(...n){if(qI===!0&&(qI=!1,Ou===null&&U3.get("logging_enabled")===!0&&B3()),Ou){const e=fd.apply(null,n);Ou(e)}},pd=function(n){return function(...e){En(n,...e)}},b_=function(...n){const e="FIREBASE INTERNAL ERROR: "+fd(...n);jl.error(e)},di=function(...n){const e=`FIREBASE FATAL ERROR: ${fd(...n)}`;throw jl.error(e),new Error(e)},ir=function(...n){const e="FIREBASE WARNING: "+fd(...n);jl.warn(e)},$3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ir("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},rA=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},W3=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Xl="[MIN_NAME]",_a="[MAX_NAME]",pc=function(n,e){if(n===e)return 0;if(n===Xl||e===_a)return-1;if(e===Xl||n===_a)return 1;{const t=GI(n),r=GI(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},H3=function(n,e){return n===e?0:n<e?-1:1},yu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+dn(e))},Wv=function(n){if(typeof n!="object"||n===null)return dn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=dn(e[r]),t+=":",t+=Wv(n[e[r]]);return t+="}",t},sA=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function vr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const iA=function(n){_e(!rA(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,l,c,d;n===0?(o=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,l=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const f=[];for(d=t;d;d-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(s?1:0),f.reverse();const m=f.join("");let g="";for(d=0;d<64;d+=8){let v=parseInt(m.substr(d,8),2).toString(16);v.length===1&&(v="0"+v),g=g+v}return g.toLowerCase()},q3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},G3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},K3=new RegExp("^-?(0*)\\d{1,10}$"),Q3=-2147483648,Y3=2147483647,GI=function(n){if(K3.test(n)){const e=Number(n);if(e>=Q3&&e<=Y3)return e}return null},md=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ir("Exception was thrown by user callback.",t),e},Math.floor(0))}},X3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Mu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Nn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){ir(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(En("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ir(e)}}class Ef{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ef.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="5",oA="v",aA="s",lA="r",cA="f",uA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dA="ls",hA="p",A_="ac",fA="websocket",pA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t,r,s,o=!1,l="",c=!1,d=!1,f=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=d,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=aa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&aa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function e6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function gA(n,e,t){_e(typeof e=="string","typeof type must == string"),_e(typeof t=="object","typeof params must == object");let r;if(e===fA)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===pA)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);e6(n)&&(t.ns=n.namespace);const s=[];return vr(t,(o,l)=>{s.push(o+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(){this.counters_={}}incrementCounter(e,t=1){yi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return BF(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy={},My={};function qv(n){const e=n.toString();return Oy[e]||(Oy[e]=new t6),Oy[e]}function n6(n,e){const t=n.toString();return My[t]||(My[t]=e()),My[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&md(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="start",s6="close",i6="pLPCommand",o6="pRTLPCB",yA="id",_A="pw",vA="ser",a6="cb",l6="seg",c6="ts",u6="d",d6="dframe",wA=1870,EA=30,h6=wA-EA,f6=25e3,p6=3e4;class Dl{constructor(e,t,r,s,o,l,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pd(e),this.stats_=qv(t),this.urlFn=d=>(this.appCheckToken&&(d[A_]=this.appCheckToken),gA(t,pA,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new r6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(p6)),W3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gv((...o)=>{const[l,c,d,f,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===KI)this.id=c,this.password=d;else if(l===s6)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[KI]="t",r[vA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[a6]=this.scriptTagHolder.uniqueCallbackIdentifier),r[oA]=Hv,this.transportSessionId&&(r[aA]=this.transportSessionId),this.lastSessionId&&(r[dA]=this.lastSessionId),this.applicationId&&(r[hA]=this.applicationId),this.appCheckToken&&(r[A_]=this.appCheckToken),typeof location<"u"&&location.hostname&&uA.test(location.hostname)&&(r[lA]=cA);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Dl.forceAllow_=!0}static forceDisallow(){Dl.forceDisallow_=!0}static isAvailable(){return Dl.forceAllow_?!0:!Dl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!q3()&&!G3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Tb(t),s=sA(r,h6);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[d6]="t",r[yA]=e,r[_A]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=dn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Gv{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=z3(),window[i6+this.uniqueCallbackIdentifier]=e,window[o6+this.uniqueCallbackIdentifier]=t,this.myIFrame=Gv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){En("frame writing exception"),c.stack&&En(c.stack),En(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||En("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[yA]=this.myID,e[_A]=this.myPW,e[vA]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+EA+r.length<=wA;){const l=this.pendingSegs.shift();r=r+"&"+l6+s+"="+l.seg+"&"+c6+s+"="+l.ts+"&"+u6+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(f6)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{En("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=16384,g6=45e3;let Zf=null;typeof MozWebSocket<"u"?Zf=MozWebSocket:typeof WebSocket<"u"&&(Zf=WebSocket);class Dr{constructor(e,t,r,s,o,l,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pd(this.connId),this.stats_=qv(t),this.connURL=Dr.connectionURL_(t,l,c,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const l={};return l[oA]=Hv,typeof location<"u"&&location.hostname&&uA.test(location.hostname)&&(l[lA]=cA),t&&(l[aA]=t),r&&(l[dA]=r),s&&(l[A_]=s),o&&(l[hA]=o),gA(e,fA,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,aa.set("previous_websocket_failure",!0);try{let r;e4(),this.mySock=new Zf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Dr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Zf!==null&&!Dr.forceDisallow_}static previouslyFailed(){return aa.isInMemoryStorage||aa.get("previous_websocket_failure")===!0}markConnectionHealthy(){aa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=qu(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(_e(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=sA(t,m6);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(g6))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Dr.responsesRequiredToBeHealthy=2;Dr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{static get ALL_TRANSPORTS(){return[Dl,Dr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Dr&&Dr.isAvailable();let r=t&&!Dr.previouslyFailed();if(e.webSocketOnly&&(t||ir("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Dr];else{const s=this.transports_=[];for(const o of Ku.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Ku.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ku.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=6e4,_6=5e3,v6=10*1024,w6=100*1024,Ly="t",QI="d",E6="s",YI="r",S6="e",XI="o",JI="a",ZI="n",ex="p",T6="h";class I6{constructor(e,t,r,s,o,l,c,d,f,m){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=d,this.onKill_=f,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pd("c:"+this.id+":"),this.transportManager_=new Ku(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Mu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>w6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>v6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ly in e){const t=e[Ly];t===JI?this.upgradeIfSecondaryHealthy_():t===YI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===XI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=yu("t",e),r=yu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ex,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:JI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ZI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=yu("t",e),r=yu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=yu(Ly,e);if(QI in e){const r=e[QI];if(t===T6){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===ZI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===E6?this.onConnectionShutdown_(r):t===YI?this.onReset_(r):t===S6?b_("Server Error: "+r):t===XI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):b_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Hv!==r&&ir("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Mu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(y6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ex,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(aa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.allowedEvents_=e,this.listeners_={},_e(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){_e(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends TA{static getInstance(){return new ep}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return _e(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=32,nx=768;class St{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ut(){return new St("")}function tt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function fo(n){return n.pieces_.length-n.pieceNum_}function wt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new St(n.pieces_,e)}function IA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function x6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function xA(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function CA(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new St(e,0)}function nn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof St)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new St(t,0)}function Je(n){return n.pieceNum_>=n.pieces_.length}function gr(n,e){const t=tt(n),r=tt(e);if(t===null)return e;if(t===r)return gr(wt(n),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function RA(n,e){if(fo(n)!==fo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Or(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(fo(n)>fo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class C6{constructor(e,t){this.errorPrefix_=t,this.parts_=xA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Jp(this.parts_[r]);bA(this)}}function R6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Jp(e),bA(n)}function b6(n){const e=n.parts_.pop();n.byteLength_-=Jp(e),n.parts_.length>0&&(n.byteLength_-=1)}function bA(n){if(n.byteLength_>nx)throw new Error(n.errorPrefix_+"has a key path longer than "+nx+" bytes ("+n.byteLength_+").");if(n.parts_.length>tx)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tx+") or object contains a cycle "+ia(n))}function ia(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends TA{static getInstance(){return new Kv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return _e(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=1e3,A6=300*1e3,rx=30*1e3,k6=1.3,P6=3e4,N6="server_kill",sx=3;class si extends SA{constructor(e,t,r,s,o,l,c,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=si.nextPersistentConnectionId_++,this.log_=pd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_u,this.maxReconnectDelay_=A6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Kv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ep.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(dn(o)),_e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new Mv,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?t.resolve(c):t.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_e(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const d=c.d,f=c.s;si.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(f,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&yi(e,"w")){const r=Yl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();ir(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||a4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=o4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,l=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";s&&(o.q=r,o.t=s),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+dn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):b_("Unrecognized action received from server: "+dn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){_e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_u,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_u,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>P6&&(this.reconnectDelay_=_u),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*k6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+si.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,r())},f=function(g){_e(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:d,sendRequest:f};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,v]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?En("getToken() completed but was canceled"):(En("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=v&&v.token,c=new I6(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,I=>{ir(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(N6)},o))}catch(g){this.log_("Failed to get token: "+g),l||(this.repoInfo_.nodeAdmin&&ir(g),d())}}}interrupt(e){En("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){En("Resuming connection for reason: "+e),delete this.interruptReasons_[e],E_(this.interruptReasons_)&&(this.reconnectDelay_=_u,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>Wv(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new St(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){En("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sx&&(this.reconnectDelay_=rx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){En("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+eA.replace(/\./g,"-")]=1,Vv()?e["framework.cordova"]=1:bb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ep.getInstance().currentlyOnline();return E_(this.interruptReasons_)&&e}}si.nextPersistentConnectionId_=0;si.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new nt(Xl,e),s=new nt(Xl,t);return this.compare(r,s)!==0}minPost(){return nt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf;class AA extends tm{static get __EMPTY_NODE(){return sf}static set __EMPTY_NODE(e){sf=e}compare(e,t){return pc(e.name,t.name)}isDefinedOn(e){throw hc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nt.MIN}maxPost(){return new nt(_a,sf)}makePost(e,t){return _e(typeof e=="string","KeyIndex indexValue must always be a string."),new nt(e,sf)}toString(){return".key"}}const Fl=new AA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=class{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Zn=class Iu{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Iu.RED,this.left=s??ms.EMPTY_NODE,this.right=o??ms.EMPTY_NODE}copy(e,t,r,s,o){return new Iu(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ms.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return ms.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Iu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Iu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Zn.RED=!0;Zn.BLACK=!1;class D6{copy(e,t,r,s,o){return this}insert(e,t,r){return new Zn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ms=class Sf{constructor(e,t=Sf.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Sf(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Zn.BLACK,null,null))}remove(e){return new Sf(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new of(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new of(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new of(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new of(this.root_,null,this.comparator_,!0,e)}};ms.EMPTY_NODE=new D6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(n,e){return pc(n.name,e.name)}function Qv(n,e){return pc(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k_;function M6(n){k_=n}const kA=function(n){return typeof n=="number"?"number:"+iA(n):"string:"+n},PA=function(n){if(n.isLeafNode()){const e=n.val();_e(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yi(e,".sv"),"Priority must be a string or number.")}else _e(n===k_||n.isEmpty(),"priority of unexpected type.");_e(n===k_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ix;class Zt{static set __childrenNodeConstructor(e){ix=e}static get __childrenNodeConstructor(){return ix}constructor(e,t=Zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,_e(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),PA(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Zt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Zt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Je(e)?this:tt(e)===".priority"?this.priorityNode_:Zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=tt(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(_e(r!==".priority"||fo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+kA(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=iA(this.value_):e+=this.value_,this.lazyHash_=nA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Zt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Zt.__childrenNodeConstructor?-1:(_e(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=Zt.VALUE_TYPE_ORDER.indexOf(t),o=Zt.VALUE_TYPE_ORDER.indexOf(r);return _e(s>=0,"Unknown leaf type: "+t),_e(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NA,DA;function L6(n){NA=n}function V6(n){DA=n}class j6 extends tm{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?pc(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nt.MIN}maxPost(){return new nt(_a,new Zt("[PRIORITY-POST]",DA))}makePost(e,t){const r=NA(e);return new nt(t,new Zt("[PRIORITY-POST]",r))}toString(){return".priority"}}const In=new j6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=Math.log(2);class U6{constructor(e){const t=o=>parseInt(Math.log(o)/F6,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tp=function(n,e,t,r){n.sort(e);const s=function(d,f){const m=f-d;let g,v;if(m===0)return null;if(m===1)return g=n[d],v=t?t(g):g,new Zn(v,g.node,Zn.BLACK,null,null);{const I=parseInt(m/2,10)+d,b=s(d,I),x=s(I+1,f);return g=n[I],v=t?t(g):g,new Zn(v,g.node,Zn.BLACK,b,x)}},o=function(d){let f=null,m=null,g=n.length;const v=function(b,x){const R=g-b,L=g;g-=b;const V=s(R+1,L),U=n[R],W=t?t(U):U;I(new Zn(W,U.node,x,null,V))},I=function(b){f?(f.left=b,f=b):(m=b,f=b)};for(let b=0;b<d.count;++b){const x=d.nextBitIsOne(),R=Math.pow(2,d.count-(b+1));x?v(R,Zn.BLACK):(v(R,Zn.BLACK),v(R,Zn.RED))}return m},l=new U6(n.length),c=o(l);return new ms(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vy;const Cl={};class Zs{static get Default(){return _e(Cl&&In,"ChildrenNode.ts has not been loaded"),Vy=Vy||new Zs({".priority":Cl},{".priority":In}),Vy}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Yl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ms?t:null}hasIndex(e){return yi(this.indexSet_,e.toString())}addIndex(e,t){_e(e!==Fl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(nt.Wrap);let l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let c;s?c=tp(r,e.getCompare()):c=Cl;const d=e.toString(),f={...this.indexSet_};f[d]=e;const m={...this.indexes_};return m[d]=c,new Zs(m,f)}addToIndexes(e,t){const r=Xf(this.indexes_,(s,o)=>{const l=Yl(this.indexSet_,o);if(_e(l,"Missing index implementation for "+o),s===Cl)if(l.isDefinedOn(e.node)){const c=[],d=t.getIterator(nt.Wrap);let f=d.getNext();for(;f;)f.name!==e.name&&c.push(f),f=d.getNext();return c.push(e),tp(c,l.getCompare())}else return Cl;else{const c=t.get(e.name);let d=s;return c&&(d=d.remove(new nt(e.name,c))),d.insert(e,e.node)}});return new Zs(r,this.indexSet_)}removeFromIndexes(e,t){const r=Xf(this.indexes_,s=>{if(s===Cl)return s;{const o=t.get(e.name);return o?s.remove(new nt(e.name,o)):s}});return new Zs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu;class at{static get EMPTY_NODE(){return vu||(vu=new at(new ms(Qv),null,Zs.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&PA(this.priorityNode_),this.children_.isEmpty()&&_e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vu}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?vu:t}}getChild(e){const t=tt(e);return t===null?this:this.getImmediateChild(t).getChild(wt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(_e(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new nt(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?vu:this.priorityNode_;return new at(s,l,o)}}updateChild(e,t){const r=tt(e);if(r===null)return t;{_e(tt(e)!==".priority"||fo(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(wt(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(In,(l,c)=>{t[l]=c.val(e),r++,o&&at.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!e&&o&&s<2*r){const l=[];for(const c in t)l[c]=t[c];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+kA(this.getPriority().val())+":"),this.forEachChild(In,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":nA(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new nt(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new nt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new nt(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,nt.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,nt.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gd?-1:0}withIndex(e){if(e===Fl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Fl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(In),s=t.getIterator(In);let o=r.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=s.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Fl?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class z6 extends at{constructor(){super(new ms(Qv),at.EMPTY_NODE,Zs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const gd=new z6;Object.defineProperties(nt,{MIN:{value:new nt(Xl,at.EMPTY_NODE)},MAX:{value:new nt(_a,gd)}});AA.__EMPTY_NODE=at.EMPTY_NODE;Zt.__childrenNodeConstructor=at;M6(gd);V6(gd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=!0;function Sn(n,e=null){if(n===null)return at.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),_e(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Zt(t,Sn(e))}if(!(n instanceof Array)&&B6){const t=[];let r=!1;if(vr(n,(l,c)=>{if(l.substring(0,1)!=="."){const d=Sn(c);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new nt(l,d)))}}),t.length===0)return at.EMPTY_NODE;const o=tp(t,O6,l=>l.name,Qv);if(r){const l=tp(t,In.getCompare());return new at(o,Sn(e),new Zs({".priority":l},{".priority":In}))}else return new at(o,Sn(e),Zs.Default)}else{let t=at.EMPTY_NODE;return vr(n,(r,s)=>{if(yi(n,r)&&r.substring(0,1)!=="."){const o=Sn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Sn(e))}}L6(Sn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6 extends tm{constructor(e){super(),this.indexPath_=e,_e(!Je(e)&&tt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?pc(e.name,t.name):o}makePost(e,t){const r=Sn(e),s=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new nt(t,s)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,gd);return new nt(_a,e)}toString(){return xA(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6 extends tm{compare(e,t){const r=e.node.compareTo(t.node);return r===0?pc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nt.MIN}maxPost(){return nt.MAX}makePost(e,t){const r=Sn(e);return new nt(t,r)}toString(){return".value"}}const H6=new W6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(n){return{type:"value",snapshotNode:n}}function G6(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function K6(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ox(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Q6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=In}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xl}hasEnd(){return this.endSet_}getIndexEndValue(){return _e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_a}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===In}copy(){const e=new Yv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ax(n){const e={};if(n.isDefault())return e;let t;if(n.index_===In?t="$priority":n.index_===H6?t="$value":n.index_===Fl?t="$key":(_e(n.index_ instanceof $6,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=dn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=dn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+dn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=dn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+dn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function lx(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==In&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends SA{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(_e(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=pd("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=np.getListenId_(e,r),c={};this.listens_[l]=c;const d=ax(e._queryParams);this.restRequest_(o+".json",d,(f,m)=>{let g=m;if(f===404&&(g=null,f=null),f===null&&this.onDataUpdate_(o,g,!1,r),Yl(this.listens_,l)===c){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",s(v,null)}})}unlisten(e,t){const r=np.getListenId_(e,t);delete this.listens_[r]}get(e){const t=ax(e._queryParams),r=e._path.toString(),s=new Mv;return this.restRequest_(r+".json",t,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fc(t);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let d=null;if(c.status>=200&&c.status<300){try{d=qu(c.responseText)}catch{ir("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,d)}else c.status!==401&&c.status!==404&&ir("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(){return{value:null,children:new Map}}function OA(n,e,t){if(Je(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=tt(e);n.children.has(r)||n.children.set(r,rp());const s=n.children.get(r);e=wt(e),OA(s,e,t)}}function P_(n,e,t){n.value!==null?t(e,n.value):X6(n,(r,s)=>{const o=new St(e.toString()+"/"+r);P_(s,o,t)})}function X6(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&vr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=10*1e3,Z6=30*1e3,ez=300*1e3;class tz{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new J6(e);const r=cx+(Z6-cx)*Math.random();Mu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;vr(e,(s,o)=>{o>0&&yi(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),Mu(this.reportStats_.bind(this),Math.floor(Math.random()*2*ez))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gs;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(gs||(gs={}));function MA(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function LA(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function VA(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=gs.ACK_USER_WRITE,this.source=MA()}operationForChild(e){if(Je(this.path)){if(this.affectedTree.value!=null)return _e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new St(e));return new sp(ut(),t,this.revert)}}else return _e(tt(this.path)===e,"operationForChild called for unrelated child."),new sp(wt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=gs.OVERWRITE}operationForChild(e){return Je(this.path)?new va(this.source,ut(),this.snap.getImmediateChild(e)):new va(this.source,wt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=gs.MERGE}operationForChild(e){if(Je(this.path)){const t=this.children.subtree(new St(e));return t.isEmpty()?null:t.value?new va(this.source,ut(),t.value):new Qu(this.source,ut(),t)}else return _e(tt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qu(this.source,wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Je(e))return this.isFullyInitialized()&&!this.filtered_;const t=tt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function nz(n,e,t,r){const s=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(Q6(l.childName,l.snapshotNode))}),wu(n,s,"child_removed",e,r,t),wu(n,s,"child_added",e,r,t),wu(n,s,"child_moved",o,r,t),wu(n,s,"child_changed",e,r,t),wu(n,s,"value",e,r,t),s}function wu(n,e,t,r,s,o){const l=r.filter(c=>c.type===t);l.sort((c,d)=>sz(n,c,d)),l.forEach(c=>{const d=rz(n,c,o);s.forEach(f=>{f.respondsTo(c.type)&&e.push(f.createEvent(d,n.query_))})})}function rz(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function sz(n,e,t){if(e.childName==null||t.childName==null)throw hc("Should only compare child_ events.");const r=new nt(e.childName,e.snapshotNode),s=new nt(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n,e){return{eventCache:n,serverCache:e}}function Lu(n,e,t,r){return jA(new Xv(e,t,r),n.serverCache)}function FA(n,e,t,r){return jA(n.eventCache,new Xv(e,t,r))}function N_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jy;const iz=()=>(jy||(jy=new ms(H3)),jy);class vt{static fromObject(e){let t=new vt(null);return vr(e,(r,s)=>{t=t.set(new St(r),s)}),t}constructor(e,t=iz()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ut(),value:this.value};if(Je(e))return null;{const r=tt(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(wt(e),t);return o!=null?{path:nn(new St(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Je(e))return this;{const t=tt(e),r=this.children.get(t);return r!==null?r.subtree(wt(e)):new vt(null)}}set(e,t){if(Je(e))return new vt(t,this.children);{const r=tt(e),o=(this.children.get(r)||new vt(null)).set(wt(e),t),l=this.children.insert(r,o);return new vt(this.value,l)}}remove(e){if(Je(e))return this.children.isEmpty()?new vt(null):new vt(null,this.children);{const t=tt(e),r=this.children.get(t);if(r){const s=r.remove(wt(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new vt(null):new vt(this.value,o)}else return this}}get(e){if(Je(e))return this.value;{const t=tt(e),r=this.children.get(t);return r?r.get(wt(e)):null}}setTree(e,t){if(Je(e))return t;{const r=tt(e),o=(this.children.get(r)||new vt(null)).setTree(wt(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new vt(this.value,l)}}fold(e){return this.fold_(ut(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(nn(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ut(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(Je(e))return null;{const o=tt(e),l=this.children.get(o);return l?l.findOnPath_(wt(e),nn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ut(),t)}foreachOnPath_(e,t,r){if(Je(e))return this;{this.value&&r(t,this.value);const s=tt(e),o=this.children.get(s);return o?o.foreachOnPath_(wt(e),nn(t,s),r):new vt(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(nn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.writeTree_=e}static empty(){return new Lr(new vt(null))}}function Vu(n,e,t){if(Je(e))return new Lr(new vt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const l=gr(s,e);return o=o.updateChild(l,t),new Lr(n.writeTree_.set(s,o))}else{const s=new vt(t),o=n.writeTree_.setTree(e,s);return new Lr(o)}}}function ux(n,e,t){let r=n;return vr(t,(s,o)=>{r=Vu(r,nn(e,s),o)}),r}function dx(n,e){if(Je(e))return Lr.empty();{const t=n.writeTree_.setTree(e,new vt(null));return new Lr(t)}}function D_(n,e){return Pa(n,e)!=null}function Pa(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(gr(t.path,e)):null}function hx(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(In,(r,s)=>{e.push(new nt(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new nt(r,s.value))}),e}function oo(n,e){if(Je(e))return n;{const t=Pa(n,e);return t!=null?new Lr(new vt(t)):new Lr(n.writeTree_.subtree(e))}}function O_(n){return n.writeTree_.isEmpty()}function Jl(n,e){return UA(ut(),n.writeTree_,e)}function UA(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(_e(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=UA(nn(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(nn(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n,e){return qA(e,n)}function oz(n,e,t,r,s){_e(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=Vu(n.visibleWrites,e,t)),n.lastWriteId=r}function az(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function lz(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);_e(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const c=n.allWrites[l];c.visible&&(l>=t&&cz(c,r.path)?s=!1:Or(r.path,c.path)&&(o=!0)),l--}if(s){if(o)return uz(n),!0;if(r.snap)n.visibleWrites=dx(n.visibleWrites,r.path);else{const c=r.children;vr(c,d=>{n.visibleWrites=dx(n.visibleWrites,nn(r.path,d))})}return!0}else return!1}function cz(n,e){if(n.snap)return Or(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Or(nn(n.path,t),e))return!0;return!1}function uz(n){n.visibleWrites=BA(n.allWrites,dz,ut()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function dz(n){return n.visible}function BA(n,e,t){let r=Lr.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let c;if(o.snap)Or(t,l)?(c=gr(t,l),r=Vu(r,c,o.snap)):Or(l,t)&&(c=gr(l,t),r=Vu(r,ut(),o.snap.getChild(c)));else if(o.children){if(Or(t,l))c=gr(t,l),r=ux(r,c,o.children);else if(Or(l,t))if(c=gr(l,t),Je(c))r=ux(r,ut(),o.children);else{const d=Yl(o.children,tt(c));if(d){const f=d.getChild(wt(c));r=Vu(r,ut(),f)}}}else throw hc("WriteRecord should have .snap or .children")}}return r}function $A(n,e,t,r,s){if(!r&&!s){const o=Pa(n.visibleWrites,e);if(o!=null)return o;{const l=oo(n.visibleWrites,e);if(O_(l))return t;if(t==null&&!D_(l,ut()))return null;{const c=t||at.EMPTY_NODE;return Jl(l,c)}}}else{const o=oo(n.visibleWrites,e);if(!s&&O_(o))return t;if(!s&&t==null&&!D_(o,ut()))return null;{const l=function(f){return(f.visible||s)&&(!r||!~r.indexOf(f.writeId))&&(Or(f.path,e)||Or(e,f.path))},c=BA(n.allWrites,l,e),d=t||at.EMPTY_NODE;return Jl(c,d)}}}function hz(n,e,t){let r=at.EMPTY_NODE;const s=Pa(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(In,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=oo(n.visibleWrites,e);return t.forEachChild(In,(l,c)=>{const d=Jl(oo(o,new St(l)),c);r=r.updateImmediateChild(l,d)}),hx(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=oo(n.visibleWrites,e);return hx(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function fz(n,e,t,r,s){_e(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=nn(e,t);if(D_(n.visibleWrites,o))return null;{const l=oo(n.visibleWrites,o);return O_(l)?s.getChild(t):Jl(l,s.getChild(t))}}function pz(n,e,t,r){const s=nn(e,t),o=Pa(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=oo(n.visibleWrites,s);return Jl(l,r.getNode().getImmediateChild(t))}else return null}function mz(n,e){return Pa(n.visibleWrites,e)}function gz(n,e,t,r,s,o,l){let c;const d=oo(n.visibleWrites,e),f=Pa(d,ut());if(f!=null)c=f;else if(t!=null)c=Jl(d,t);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const m=[],g=l.getCompare(),v=o?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let I=v.getNext();for(;I&&m.length<s;)g(I,r)!==0&&m.push(I),I=v.getNext();return m}else return[]}function yz(){return{visibleWrites:Lr.empty(),allWrites:[],lastWriteId:-1}}function M_(n,e,t,r){return $A(n.writeTree,n.treePath,e,t,r)}function WA(n,e){return hz(n.writeTree,n.treePath,e)}function fx(n,e,t,r){return fz(n.writeTree,n.treePath,e,t,r)}function ip(n,e){return mz(n.writeTree,nn(n.treePath,e))}function _z(n,e,t,r,s,o){return gz(n.writeTree,n.treePath,e,t,r,s,o)}function Jv(n,e,t){return pz(n.writeTree,n.treePath,e,t)}function HA(n,e){return qA(nn(n.treePath,e),n.writeTree)}function qA(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;_e(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),_e(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,ox(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,K6(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,G6(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,ox(r,e.snapshotNode,s.oldSnap));else throw hc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const GA=new wz;class Zv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Xv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Jv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wa(this.viewCache_),o=_z(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function Ez(n,e){_e(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),_e(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Sz(n,e,t,r,s){const o=new vz;let l,c;if(t.type===gs.OVERWRITE){const f=t;f.source.fromUser?l=L_(n,e,f.path,f.snap,r,s,o):(_e(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered()&&!Je(f.path),l=op(n,e,f.path,f.snap,r,s,c,o))}else if(t.type===gs.MERGE){const f=t;f.source.fromUser?l=Iz(n,e,f.path,f.children,r,s,o):(_e(f.source.fromServer,"Unknown source."),c=f.source.tagged||e.serverCache.isFiltered(),l=V_(n,e,f.path,f.children,r,s,c,o))}else if(t.type===gs.ACK_USER_WRITE){const f=t;f.revert?l=Rz(n,e,f.path,r,s,o):l=xz(n,e,f.path,f.affectedTree,r,s,o)}else if(t.type===gs.LISTEN_COMPLETE)l=Cz(n,e,t.path,r,o);else throw hc("Unknown operation type: "+t.type);const d=o.getChanges();return Tz(e,l,d),{viewCache:l,changes:d}}function Tz(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=N_(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(q6(N_(e)))}}function KA(n,e,t,r,s,o){const l=e.eventCache;if(ip(r,t)!=null)return e;{let c,d;if(Je(t))if(_e(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=wa(e),m=f instanceof at?f:at.EMPTY_NODE,g=WA(r,m);c=n.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{const f=M_(r,wa(e));c=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const f=tt(t);if(f===".priority"){_e(fo(t)===1,"Can't have a priority with additional path components");const m=l.getNode();d=e.serverCache.getNode();const g=fx(r,t,m,d);g!=null?c=n.filter.updatePriority(m,g):c=l.getNode()}else{const m=wt(t);let g;if(l.isCompleteForChild(f)){d=e.serverCache.getNode();const v=fx(r,t,l.getNode(),d);v!=null?g=l.getNode().getImmediateChild(f).updateChild(m,v):g=l.getNode().getImmediateChild(f)}else g=Jv(r,f,e.serverCache);g!=null?c=n.filter.updateChild(l.getNode(),f,g,m,s,o):c=l.getNode()}}return Lu(e,c,l.isFullyInitialized()||Je(t),n.filter.filtersNodes())}}function op(n,e,t,r,s,o,l,c){const d=e.serverCache;let f;const m=l?n.filter:n.filter.getIndexedFilter();if(Je(t))f=m.updateFullNode(d.getNode(),r,null);else if(m.filtersNodes()&&!d.isFiltered()){const I=d.getNode().updateChild(t,r);f=m.updateFullNode(d.getNode(),I,null)}else{const I=tt(t);if(!d.isCompleteForPath(t)&&fo(t)>1)return e;const b=wt(t),R=d.getNode().getImmediateChild(I).updateChild(b,r);I===".priority"?f=m.updatePriority(d.getNode(),R):f=m.updateChild(d.getNode(),I,R,b,GA,null)}const g=FA(e,f,d.isFullyInitialized()||Je(t),m.filtersNodes()),v=new Zv(s,g,o);return KA(n,g,t,s,v,c)}function L_(n,e,t,r,s,o,l){const c=e.eventCache;let d,f;const m=new Zv(s,e,o);if(Je(t))f=n.filter.updateFullNode(e.eventCache.getNode(),r,l),d=Lu(e,f,!0,n.filter.filtersNodes());else{const g=tt(t);if(g===".priority")f=n.filter.updatePriority(e.eventCache.getNode(),r),d=Lu(e,f,c.isFullyInitialized(),c.isFiltered());else{const v=wt(t),I=c.getNode().getImmediateChild(g);let b;if(Je(v))b=r;else{const x=m.getCompleteChild(g);x!=null?IA(v)===".priority"&&x.getChild(CA(v)).isEmpty()?b=x:b=x.updateChild(v,r):b=at.EMPTY_NODE}if(I.equals(b))d=e;else{const x=n.filter.updateChild(c.getNode(),g,b,v,m,l);d=Lu(e,x,c.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function px(n,e){return n.eventCache.isCompleteForChild(e)}function Iz(n,e,t,r,s,o,l){let c=e;return r.foreach((d,f)=>{const m=nn(t,d);px(e,tt(m))&&(c=L_(n,c,m,f,s,o,l))}),r.foreach((d,f)=>{const m=nn(t,d);px(e,tt(m))||(c=L_(n,c,m,f,s,o,l))}),c}function mx(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function V_(n,e,t,r,s,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,f;Je(t)?f=r:f=new vt(null).setTree(t,r);const m=e.serverCache.getNode();return f.children.inorderTraversal((g,v)=>{if(m.hasChild(g)){const I=e.serverCache.getNode().getImmediateChild(g),b=mx(n,I,v);d=op(n,d,new St(g),b,s,o,l,c)}}),f.children.inorderTraversal((g,v)=>{const I=!e.serverCache.isCompleteForChild(g)&&v.value===null;if(!m.hasChild(g)&&!I){const b=e.serverCache.getNode().getImmediateChild(g),x=mx(n,b,v);d=op(n,d,new St(g),x,s,o,l,c)}}),d}function xz(n,e,t,r,s,o,l){if(ip(s,t)!=null)return e;const c=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(Je(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return op(n,e,t,d.getNode().getChild(t),s,o,c,l);if(Je(t)){let f=new vt(null);return d.getNode().forEachChild(Fl,(m,g)=>{f=f.set(new St(m),g)}),V_(n,e,t,f,s,o,c,l)}else return e}else{let f=new vt(null);return r.foreach((m,g)=>{const v=nn(t,m);d.isCompleteForPath(v)&&(f=f.set(m,d.getNode().getChild(v)))}),V_(n,e,t,f,s,o,c,l)}}function Cz(n,e,t,r,s){const o=e.serverCache,l=FA(e,o.getNode(),o.isFullyInitialized()||Je(t),o.isFiltered());return KA(n,l,t,r,GA,s)}function Rz(n,e,t,r,s,o){let l;if(ip(r,t)!=null)return e;{const c=new Zv(r,e,s),d=e.eventCache.getNode();let f;if(Je(t)||tt(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=M_(r,wa(e));else{const g=e.serverCache.getNode();_e(g instanceof at,"serverChildren would be complete if leaf node"),m=WA(r,g)}m=m,f=n.filter.updateFullNode(d,m,o)}else{const m=tt(t);let g=Jv(r,m,e.serverCache);g==null&&e.serverCache.isCompleteForChild(m)&&(g=d.getImmediateChild(m)),g!=null?f=n.filter.updateChild(d,m,g,wt(t),c,o):e.eventCache.getNode().hasChild(m)?f=n.filter.updateChild(d,m,at.EMPTY_NODE,wt(t),c,o):f=d,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=M_(r,wa(e)),l.isLeafNode()&&(f=n.filter.updateFullNode(f,l,o)))}return l=e.serverCache.isFullyInitialized()||ip(r,ut())!=null,Lu(e,f,l,n.filter.filtersNodes())}}function bz(n,e){const t=wa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Je(e)&&!t.getImmediateChild(tt(e)).isEmpty())?t.getChild(e):null}function gx(n,e,t,r){e.type===gs.MERGE&&e.source.queryId!==null&&(_e(wa(n.viewCache_),"We should always have a full cache before handling merges"),_e(N_(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=Sz(n.processor_,s,e,t,r);return Ez(n.processor_,o.viewCache),_e(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Az(n,o.changes,o.viewCache.eventCache.getNode())}function Az(n,e,t,r){const s=n.eventRegistrations_;return nz(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yx;function kz(n){_e(!yx,"__referenceConstructor has already been defined"),yx=n}function ew(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return _e(o!=null,"SyncTree gave us an op for an invalid query."),gx(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(gx(l,e,t,r));return o}}function tw(n,e){let t=null;for(const r of n.views.values())t=t||bz(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _x;function Pz(n){_e(!_x,"__referenceConstructor has already been defined"),_x=n}class vx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=yz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Nz(n,e,t,r,s){return oz(n.pendingWriteTree_,e,t,r,s),s?rm(n,new va(MA(),e,t)):[]}function Ol(n,e,t=!1){const r=az(n.pendingWriteTree_,e);if(lz(n.pendingWriteTree_,e)){let o=new vt(null);return r.snap!=null?o=o.set(ut(),!0):vr(r.children,l=>{o=o.set(new St(l),!0)}),rm(n,new sp(r.path,o,t))}else return[]}function nm(n,e,t){return rm(n,new va(LA(),e,t))}function Dz(n,e,t){const r=vt.fromObject(t);return rm(n,new Qu(LA(),e,r))}function Oz(n,e,t,r){const s=JA(n,r);if(s!=null){const o=ZA(s),l=o.path,c=o.queryId,d=gr(l,e),f=new va(VA(c),d,t);return ek(n,l,f)}else return[]}function Mz(n,e,t,r){const s=JA(n,r);if(s){const o=ZA(s),l=o.path,c=o.queryId,d=gr(l,e),f=vt.fromObject(t),m=new Qu(VA(c),d,f);return ek(n,l,m)}else return[]}function QA(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,c)=>{const d=gr(l,e),f=tw(c,d);if(f)return f});return $A(s,e,o,t,!0)}function rm(n,e){return YA(e,n.syncPointTree_,null,zA(n.pendingWriteTree_,ut()))}function YA(n,e,t,r){if(Je(n.path))return XA(n,e,t,r);{const s=e.get(ut());t==null&&s!=null&&(t=tw(s,ut()));let o=[];const l=tt(n.path),c=n.operationForChild(l),d=e.children.get(l);if(d&&c){const f=t?t.getImmediateChild(l):null,m=HA(r,l);o=o.concat(YA(c,d,f,m))}return s&&(o=o.concat(ew(s,n,r,t))),o}}function XA(n,e,t,r){const s=e.get(ut());t==null&&s!=null&&(t=tw(s,ut()));let o=[];return e.children.inorderTraversal((l,c)=>{const d=t?t.getImmediateChild(l):null,f=HA(r,l),m=n.operationForChild(l);m&&(o=o.concat(XA(m,c,d,f)))}),s&&(o=o.concat(ew(s,n,r,t))),o}function JA(n,e){return n.tagToQueryMap.get(e)}function ZA(n){const e=n.indexOf("$");return _e(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new St(n.substr(0,e))}}function ek(n,e,t){const r=n.syncPointTree_.get(e);_e(r,"Missing sync point for query tag that we're tracking");const s=zA(n.pendingWriteTree_,e);return ew(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new nw(t)}node(){return this.node_}}class rw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=nn(this.path_,e);return new rw(this.syncTree_,t)}node(){return QA(this.syncTree_,this.path_)}}const Lz=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},wx=function(n,e,t){if(!n||typeof n!="object")return n;if(_e(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Vz(n[".sv"],e,t);if(typeof n[".sv"]=="object")return jz(n[".sv"],e);_e(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Vz=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:_e(!1,"Unexpected server value: "+n)}},jz=function(n,e,t){n.hasOwnProperty("increment")||_e(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&_e(!1,"Unexpected increment value: "+r);const s=e.node();if(_e(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},Fz=function(n,e,t,r){return sw(e,new rw(t,n),r)},Uz=function(n,e,t){return sw(n,new nw(e),t)};function sw(n,e,t){const r=n.getPriority().val(),s=wx(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,c=wx(l.getValue(),e,t);return c!==l.getValue()||s!==l.getPriority().val()?new Zt(c,Sn(s)):n}else{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new Zt(s))),l.forEachChild(In,(c,d)=>{const f=sw(d,e.getImmediateChild(c),t);f!==d&&(o=o.updateImmediateChild(c,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ow(n,e){let t=e instanceof St?e:new St(e),r=n,s=tt(t);for(;s!==null;){const o=Yl(r.node.children,s)||{children:{},childCount:0};r=new iw(s,r,o),t=wt(t),s=tt(t)}return r}function mc(n){return n.node.value}function tk(n,e){n.node.value=e,j_(n)}function nk(n){return n.node.childCount>0}function zz(n){return mc(n)===void 0&&!nk(n)}function sm(n,e){vr(n.node.children,(t,r)=>{e(new iw(t,n,r))})}function rk(n,e,t,r){t&&e(n),sm(n,s=>{rk(s,e,!0)})}function Bz(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function yd(n){return new St(n.parent===null?n.name:yd(n.parent)+"/"+n.name)}function j_(n){n.parent!==null&&$z(n.parent,n.name,n)}function $z(n,e,t){const r=zz(t),s=yi(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,j_(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,j_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=/[\[\].#$\/\u0000-\u001F\u007F]/,Hz=/[\[\].#$\u0000-\u001F\u007F]/,Fy=10*1024*1024,sk=function(n){return typeof n=="string"&&n.length!==0&&!Wz.test(n)},qz=function(n){return typeof n=="string"&&n.length!==0&&!Hz.test(n)},Gz=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qz(n)},ik=function(n,e,t){const r=t instanceof St?new C6(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ia(r));if(typeof e=="function")throw new Error(n+"contains a function "+ia(r)+" with contents = "+e.toString());if(rA(e))throw new Error(n+"contains "+e.toString()+" "+ia(r));if(typeof e=="string"&&e.length>Fy/3&&Jp(e)>Fy)throw new Error(n+"contains a string greater than "+Fy+" utf8 bytes "+ia(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(vr(e,(l,c)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!sk(l)))throw new Error(n+" contains an invalid key ("+l+") "+ia(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);R6(r,l),ik(n,c,r),b6(r)}),s&&o)throw new Error(n+' contains ".value" child '+ia(r)+" in addition to actual children.")}},Kz=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!sk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Gz(t))throw new Error(h4(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Yz(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!RA(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function Na(n,e,t){Yz(n,t),Xz(n,r=>Or(r,e)||Or(e,r))}function Xz(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(Jz(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Jz(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Ou&&En("event: "+t.toString()),md(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz="repo_interrupt",e5=25;class t5{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qz,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rp(),this.transactionQueueTree_=new iw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function n5(n,e,t){if(n.stats_=qv(n.repoInfo_),n.forceRestClient_||X3())n.server_=new np(n.repoInfo_,(r,s,o,l)=>{Ex(n,r,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Sx(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{dn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new si(n.repoInfo_,e,(r,s,o,l)=>{Ex(n,r,s,o,l)},r=>{Sx(n,r)},r=>{s5(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=n6(n.repoInfo_,()=>new tz(n.stats_,n.server_)),n.infoData_=new Y6,n.infoSyncTree_=new vx({startListening:(r,s,o,l)=>{let c=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(c=nm(n.infoSyncTree_,r._path,d),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),aw(n,"connected",!1),n.serverSyncTree_=new vx({startListening:(r,s,o,l)=>(n.server_.listen(r,o,s,(c,d)=>{const f=l(c,d);Na(n.eventQueue_,r._path,f)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function r5(n){const t=n.infoData_.getNode(new St(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function ok(n){return Lz({timestamp:r5(n)})}function Ex(n,e,t,r,s){n.dataUpdateCount++;const o=new St(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const d=Xf(t,f=>Sn(f));l=Mz(n.serverSyncTree_,o,d,s)}else{const d=Sn(t);l=Oz(n.serverSyncTree_,o,d,s)}else if(r){const d=Xf(t,f=>Sn(f));l=Dz(n.serverSyncTree_,o,d)}else{const d=Sn(t);l=nm(n.serverSyncTree_,o,d)}let c=o;l.length>0&&(c=cw(n,o)),Na(n.eventQueue_,c,l)}function Sx(n,e){aw(n,"connected",e),e===!1&&o5(n)}function s5(n,e){vr(e,(t,r)=>{aw(n,t,r)})}function aw(n,e,t){const r=new St("/.info/"+e),s=Sn(t);n.infoData_.updateSnapshot(r,s);const o=nm(n.infoSyncTree_,r,s);Na(n.eventQueue_,r,o)}function i5(n){return n.nextWriteId_++}function o5(n){ak(n,"onDisconnectEvents");const e=ok(n),t=rp();P_(n.onDisconnect_,ut(),(s,o)=>{const l=Fz(s,o,n.serverSyncTree_,e);OA(t,s,l)});let r=[];P_(t,ut(),(s,o)=>{r=r.concat(nm(n.serverSyncTree_,s,o));const l=u5(n,s);cw(n,l)}),n.onDisconnect_=rp(),Na(n.eventQueue_,ut(),r)}function a5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Zz)}function ak(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),En(t,...e)}function lk(n,e,t){return QA(n.serverSyncTree_,e,t)||at.EMPTY_NODE}function lw(n,e=n.transactionQueueTree_){if(e||im(n,e),mc(e)){const t=uk(n,e);_e(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&l5(n,yd(e),t)}else nk(e)&&sm(e,t=>{lw(n,t)})}function l5(n,e,t){const r=t.map(f=>f.currentWriteId),s=lk(n,e,r);let o=s;const l=s.hash();for(let f=0;f<t.length;f++){const m=t[f];_e(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const g=gr(e,m.path);o=o.updateChild(g,m.currentOutputSnapshotRaw)}const c=o.val(!0),d=e;n.server_.put(d.toString(),c,f=>{ak(n,"transaction put response",{path:d.toString(),status:f});let m=[];if(f==="ok"){const g=[];for(let v=0;v<t.length;v++)t[v].status=2,m=m.concat(Ol(n.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&g.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();im(n,ow(n.transactionQueueTree_,e)),lw(n,n.transactionQueueTree_),Na(n.eventQueue_,e,m);for(let v=0;v<g.length;v++)md(g[v])}else{if(f==="datastale")for(let g=0;g<t.length;g++)t[g].status===3?t[g].status=4:t[g].status=0;else{ir("transaction at "+d.toString()+" failed: "+f);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=f}cw(n,e)}},l)}function cw(n,e){const t=ck(n,e),r=yd(t),s=uk(n,t);return c5(n,s,r),r}function c5(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const d=e[c],f=gr(t,d.path);let m=!1,g;if(_e(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,g=d.abortReason,s=s.concat(Ol(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=e5)m=!0,g="maxretry",s=s.concat(Ol(n.serverSyncTree_,d.currentWriteId,!0));else{const v=lk(n,d.path,l);d.currentInputSnapshot=v;const I=e[c].update(v.val());if(I!==void 0){ik("transaction failed: Data returned ",I,d.path);let b=Sn(I);typeof I=="object"&&I!=null&&yi(I,".priority")||(b=b.updatePriority(v.getPriority()));const R=d.currentWriteId,L=ok(n),V=Uz(b,v,L);d.currentOutputSnapshotRaw=b,d.currentOutputSnapshotResolved=V,d.currentWriteId=i5(n),l.splice(l.indexOf(R),1),s=s.concat(Nz(n.serverSyncTree_,d.path,V,d.currentWriteId,d.applyLocally)),s=s.concat(Ol(n.serverSyncTree_,R,!0))}else m=!0,g="nodata",s=s.concat(Ol(n.serverSyncTree_,d.currentWriteId,!0))}Na(n.eventQueue_,t,s),s=[],m&&(e[c].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[c].unwatcher),e[c].onComplete&&(g==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(g),!1,null))))}im(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)md(r[c]);lw(n,n.transactionQueueTree_)}function ck(n,e){let t,r=n.transactionQueueTree_;for(t=tt(e);t!==null&&mc(r)===void 0;)r=ow(r,t),e=wt(e),t=tt(e);return r}function uk(n,e){const t=[];return dk(n,e,t),t.sort((r,s)=>r.order-s.order),t}function dk(n,e,t){const r=mc(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);sm(e,s=>{dk(n,s,t)})}function im(n,e){const t=mc(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,tk(e,t.length>0?t:void 0)}sm(e,r=>{im(n,r)})}function u5(n,e){const t=yd(ck(n,e)),r=ow(n.transactionQueueTree_,e);return Bz(r,s=>{Uy(n,s)}),Uy(n,r),rk(r,s=>{Uy(n,s)}),t}function Uy(n,e){const t=mc(e);if(t){const r=[];let s=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(_e(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(_e(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(Ol(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?tk(e,void 0):t.length=o+1,Na(n.eventQueue_,yd(e),s);for(let l=0;l<r.length;l++)md(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function h5(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ir(`Invalid query segment '${t}' in query '${n}'`)}return e}const Tx=function(n,e){const t=f5(n),r=t.namespace;t.domain==="firebase.com"&&di(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&di("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||$3();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new mA(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new St(t.pathString)}},f5=function(n){let e="",t="",r="",s="",o="",l=!0,c="https",d=443;if(typeof n=="string"){let f=n.indexOf("//");f>=0&&(c=n.substring(0,f-1),n=n.substring(f+2));let m=n.indexOf("/");m===-1&&(m=n.length);let g=n.indexOf("?");g===-1&&(g=n.length),e=n.substring(0,Math.min(m,g)),m<g&&(s=d5(n.substring(m,g)));const v=h5(n.substring(Math.min(n.length,g)));f=e.indexOf(":"),f>=0?(l=c==="https"||c==="wss",d=parseInt(e.substring(f+1),10)):f=e.length;const I=e.slice(0,f);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),o=r}"ns"in v&&(o=v.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:l,scheme:c,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Je(this._path)?null:IA(this._path)}get ref(){return new gc(this._repo,this._path)}get _queryIdentifier(){const e=lx(this._queryParams),t=Wv(e);return t==="{}"?"default":t}get _queryObject(){return lx(this._queryParams)}isEqual(e){if(e=dt(e),!(e instanceof uw))return!1;const t=this._repo===e._repo,r=RA(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+x6(this._path)}}class gc extends uw{constructor(e,t){super(e,t,new Yv,!1)}get parent(){const e=CA(this._path);return e===null?null:new gc(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}kz(gc);Pz(gc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="FIREBASE_DATABASE_EMULATOR_HOST",F_={};let m5=!1;function g5(n,e,t,r){const s=e.lastIndexOf(":"),o=e.substring(0,s),l=bs(o);n.repoInfo_=new mA(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function y5(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||di("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),En("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=Tx(o,s),c=l.repoInfo,d;typeof process<"u"&&$I&&(d=$I[p5]),d?(o=`http://${d}?ns=${c.namespace}`,l=Tx(o,s),c=l.repoInfo):l.repoInfo.secure;const f=new Z3(n.name,n.options,e);Kz("Invalid Firebase Database URL",l),Je(l.path)||di("Database URL must point to the root of a Firebase Database (not including a child path).");const m=v5(c,n,f,new J3(n,t));return new w5(m,n)}function _5(n,e){const t=F_[e];(!t||t[n.key]!==n)&&di(`Database ${e}(${n.repoInfo_}) has already been deleted.`),a5(n),delete t[n.key]}function v5(n,e,t,r){let s=F_[e.name];s||(s={},F_[e.name]=s);let o=s[n.toURLString()];return o&&di("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new t5(n,m5,t,r),s[n.toURLString()]=o,o}class w5{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(n5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gc(this._repo,ut())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&di("Cannot call "+e+" on a deleted database.")}}function E5(n=hd(),e){const t=So(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Ov("database");r&&S5(t,...r)}return t}function S5(n,e,t,r={}){n=dt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ci(r,o.repoInfo_.emulatorOptions))return;di("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&di('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Ef(Ef.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Lv(r.mockUserToken,n.app.options.projectId);l=new Ef(c)}bs(e)&&(Yp(e),Xp("Database",!0)),g5(o,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(n){V3(To),_r(new or("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return y5(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),xn(WI,HI,n),xn(WI,HI,"esm2020")}si.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};si.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};T5();var Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,hk;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function N(){}N.prototype=A.prototype,k.F=A.prototype,k.prototype=new N,k.prototype.constructor=k,k.D=function(M,O,F){for(var D=Array(arguments.length-2),me=2;me<arguments.length;me++)D[me-2]=arguments[me];return A.prototype[O].apply(M,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,A,N){N||(N=0);const M=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)M[O]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(O=0;O<16;++O)M[O]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=k.g[0],N=k.g[1],O=k.g[2];let F=k.g[3],D;D=A+(F^N&(O^F))+M[0]+3614090360&4294967295,A=N+(D<<7&4294967295|D>>>25),D=F+(O^A&(N^O))+M[1]+3905402710&4294967295,F=A+(D<<12&4294967295|D>>>20),D=O+(N^F&(A^N))+M[2]+606105819&4294967295,O=F+(D<<17&4294967295|D>>>15),D=N+(A^O&(F^A))+M[3]+3250441966&4294967295,N=O+(D<<22&4294967295|D>>>10),D=A+(F^N&(O^F))+M[4]+4118548399&4294967295,A=N+(D<<7&4294967295|D>>>25),D=F+(O^A&(N^O))+M[5]+1200080426&4294967295,F=A+(D<<12&4294967295|D>>>20),D=O+(N^F&(A^N))+M[6]+2821735955&4294967295,O=F+(D<<17&4294967295|D>>>15),D=N+(A^O&(F^A))+M[7]+4249261313&4294967295,N=O+(D<<22&4294967295|D>>>10),D=A+(F^N&(O^F))+M[8]+1770035416&4294967295,A=N+(D<<7&4294967295|D>>>25),D=F+(O^A&(N^O))+M[9]+2336552879&4294967295,F=A+(D<<12&4294967295|D>>>20),D=O+(N^F&(A^N))+M[10]+4294925233&4294967295,O=F+(D<<17&4294967295|D>>>15),D=N+(A^O&(F^A))+M[11]+2304563134&4294967295,N=O+(D<<22&4294967295|D>>>10),D=A+(F^N&(O^F))+M[12]+1804603682&4294967295,A=N+(D<<7&4294967295|D>>>25),D=F+(O^A&(N^O))+M[13]+4254626195&4294967295,F=A+(D<<12&4294967295|D>>>20),D=O+(N^F&(A^N))+M[14]+2792965006&4294967295,O=F+(D<<17&4294967295|D>>>15),D=N+(A^O&(F^A))+M[15]+1236535329&4294967295,N=O+(D<<22&4294967295|D>>>10),D=A+(O^F&(N^O))+M[1]+4129170786&4294967295,A=N+(D<<5&4294967295|D>>>27),D=F+(N^O&(A^N))+M[6]+3225465664&4294967295,F=A+(D<<9&4294967295|D>>>23),D=O+(A^N&(F^A))+M[11]+643717713&4294967295,O=F+(D<<14&4294967295|D>>>18),D=N+(F^A&(O^F))+M[0]+3921069994&4294967295,N=O+(D<<20&4294967295|D>>>12),D=A+(O^F&(N^O))+M[5]+3593408605&4294967295,A=N+(D<<5&4294967295|D>>>27),D=F+(N^O&(A^N))+M[10]+38016083&4294967295,F=A+(D<<9&4294967295|D>>>23),D=O+(A^N&(F^A))+M[15]+3634488961&4294967295,O=F+(D<<14&4294967295|D>>>18),D=N+(F^A&(O^F))+M[4]+3889429448&4294967295,N=O+(D<<20&4294967295|D>>>12),D=A+(O^F&(N^O))+M[9]+568446438&4294967295,A=N+(D<<5&4294967295|D>>>27),D=F+(N^O&(A^N))+M[14]+3275163606&4294967295,F=A+(D<<9&4294967295|D>>>23),D=O+(A^N&(F^A))+M[3]+4107603335&4294967295,O=F+(D<<14&4294967295|D>>>18),D=N+(F^A&(O^F))+M[8]+1163531501&4294967295,N=O+(D<<20&4294967295|D>>>12),D=A+(O^F&(N^O))+M[13]+2850285829&4294967295,A=N+(D<<5&4294967295|D>>>27),D=F+(N^O&(A^N))+M[2]+4243563512&4294967295,F=A+(D<<9&4294967295|D>>>23),D=O+(A^N&(F^A))+M[7]+1735328473&4294967295,O=F+(D<<14&4294967295|D>>>18),D=N+(F^A&(O^F))+M[12]+2368359562&4294967295,N=O+(D<<20&4294967295|D>>>12),D=A+(N^O^F)+M[5]+4294588738&4294967295,A=N+(D<<4&4294967295|D>>>28),D=F+(A^N^O)+M[8]+2272392833&4294967295,F=A+(D<<11&4294967295|D>>>21),D=O+(F^A^N)+M[11]+1839030562&4294967295,O=F+(D<<16&4294967295|D>>>16),D=N+(O^F^A)+M[14]+4259657740&4294967295,N=O+(D<<23&4294967295|D>>>9),D=A+(N^O^F)+M[1]+2763975236&4294967295,A=N+(D<<4&4294967295|D>>>28),D=F+(A^N^O)+M[4]+1272893353&4294967295,F=A+(D<<11&4294967295|D>>>21),D=O+(F^A^N)+M[7]+4139469664&4294967295,O=F+(D<<16&4294967295|D>>>16),D=N+(O^F^A)+M[10]+3200236656&4294967295,N=O+(D<<23&4294967295|D>>>9),D=A+(N^O^F)+M[13]+681279174&4294967295,A=N+(D<<4&4294967295|D>>>28),D=F+(A^N^O)+M[0]+3936430074&4294967295,F=A+(D<<11&4294967295|D>>>21),D=O+(F^A^N)+M[3]+3572445317&4294967295,O=F+(D<<16&4294967295|D>>>16),D=N+(O^F^A)+M[6]+76029189&4294967295,N=O+(D<<23&4294967295|D>>>9),D=A+(N^O^F)+M[9]+3654602809&4294967295,A=N+(D<<4&4294967295|D>>>28),D=F+(A^N^O)+M[12]+3873151461&4294967295,F=A+(D<<11&4294967295|D>>>21),D=O+(F^A^N)+M[15]+530742520&4294967295,O=F+(D<<16&4294967295|D>>>16),D=N+(O^F^A)+M[2]+3299628645&4294967295,N=O+(D<<23&4294967295|D>>>9),D=A+(O^(N|~F))+M[0]+4096336452&4294967295,A=N+(D<<6&4294967295|D>>>26),D=F+(N^(A|~O))+M[7]+1126891415&4294967295,F=A+(D<<10&4294967295|D>>>22),D=O+(A^(F|~N))+M[14]+2878612391&4294967295,O=F+(D<<15&4294967295|D>>>17),D=N+(F^(O|~A))+M[5]+4237533241&4294967295,N=O+(D<<21&4294967295|D>>>11),D=A+(O^(N|~F))+M[12]+1700485571&4294967295,A=N+(D<<6&4294967295|D>>>26),D=F+(N^(A|~O))+M[3]+2399980690&4294967295,F=A+(D<<10&4294967295|D>>>22),D=O+(A^(F|~N))+M[10]+4293915773&4294967295,O=F+(D<<15&4294967295|D>>>17),D=N+(F^(O|~A))+M[1]+2240044497&4294967295,N=O+(D<<21&4294967295|D>>>11),D=A+(O^(N|~F))+M[8]+1873313359&4294967295,A=N+(D<<6&4294967295|D>>>26),D=F+(N^(A|~O))+M[15]+4264355552&4294967295,F=A+(D<<10&4294967295|D>>>22),D=O+(A^(F|~N))+M[6]+2734768916&4294967295,O=F+(D<<15&4294967295|D>>>17),D=N+(F^(O|~A))+M[13]+1309151649&4294967295,N=O+(D<<21&4294967295|D>>>11),D=A+(O^(N|~F))+M[4]+4149444226&4294967295,A=N+(D<<6&4294967295|D>>>26),D=F+(N^(A|~O))+M[11]+3174756917&4294967295,F=A+(D<<10&4294967295|D>>>22),D=O+(A^(F|~N))+M[2]+718787259&4294967295,O=F+(D<<15&4294967295|D>>>17),D=N+(F^(O|~A))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+F&4294967295}r.prototype.v=function(k,A){A===void 0&&(A=k.length);const N=A-this.blockSize,M=this.C;let O=this.h,F=0;for(;F<A;){if(O==0)for(;F<=N;)s(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<A;)if(M[O++]=k.charCodeAt(F++),O==this.blockSize){s(this,M),O=0;break}}else for(;F<A;)if(M[O++]=k[F++],O==this.blockSize){s(this,M),O=0;break}}this.h=O,this.o+=A},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;A=this.o*8;for(var N=k.length-8;N<k.length;++N)k[N]=A&255,A/=256;for(this.v(k),k=Array(16),A=0,N=0;N<4;++N)for(let M=0;M<32;M+=8)k[A++]=this.g[N]>>>M&255;return k};function o(k,A){var N=c;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=A(k)}function l(k,A){this.h=A;const N=[];let M=!0;for(let O=k.length-1;O>=0;O--){const F=k[O]|0;M&&F==A||(N[O]=F,M=!1)}this.g=N}var c={};function d(k){return-128<=k&&k<128?o(k,function(A){return new l([A|0],A<0?-1:0)}):new l([k|0],k<0?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return g;if(k<0)return R(f(-k));const A=[];let N=1;for(let M=0;k>=N;M++)A[M]=k/N|0,N*=4294967296;return new l(A,0)}function m(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return R(m(k.substring(1),A));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(A,8));let M=g;for(let F=0;F<k.length;F+=8){var O=Math.min(8,k.length-F);const D=parseInt(k.substring(F,F+O),A);O<8?(O=f(Math.pow(A,O)),M=M.j(O).add(f(D))):(M=M.j(N),M=M.add(f(D)))}return M}var g=d(0),v=d(1),I=d(16777216);n=l.prototype,n.m=function(){if(x(this))return-R(this).m();let k=0,A=1;for(let N=0;N<this.g.length;N++){const M=this.i(N);k+=(M>=0?M:4294967296+M)*A,A*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(x(this))return"-"+R(this).toString(k);const A=f(Math.pow(k,6));var N=this;let M="";for(;;){const O=W(N,A).g;N=L(N,O.j(A));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(k);if(N=O,b(N))return F+M;for(;F.length<6;)F="0"+F;M=F+M}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(let A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function x(k){return k.h==-1}n.l=function(k){return k=L(this,k),x(k)?-1:b(k)?0:1};function R(k){const A=k.g.length,N=[];for(let M=0;M<A;M++)N[M]=~k.g[M];return new l(N,~k.h).add(v)}n.abs=function(){return x(this)?R(this):this},n.add=function(k){const A=Math.max(this.g.length,k.g.length),N=[];let M=0;for(let O=0;O<=A;O++){let F=M+(this.i(O)&65535)+(k.i(O)&65535),D=(F>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);M=D>>>16,F&=65535,D&=65535,N[O]=D<<16|F}return new l(N,N[N.length-1]&-2147483648?-1:0)};function L(k,A){return k.add(R(A))}n.j=function(k){if(b(this)||b(k))return g;if(x(this))return x(k)?R(this).j(R(k)):R(R(this).j(k));if(x(k))return R(this.j(R(k)));if(this.l(I)<0&&k.l(I)<0)return f(this.m()*k.m());const A=this.g.length+k.g.length,N=[];for(var M=0;M<2*A;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<k.g.length;O++){const F=this.i(M)>>>16,D=this.i(M)&65535,me=k.i(O)>>>16,ve=k.i(O)&65535;N[2*M+2*O]+=D*ve,V(N,2*M+2*O),N[2*M+2*O+1]+=F*ve,V(N,2*M+2*O+1),N[2*M+2*O+1]+=D*me,V(N,2*M+2*O+1),N[2*M+2*O+2]+=F*me,V(N,2*M+2*O+2)}for(k=0;k<A;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=A;k<2*A;k++)N[k]=0;return new l(N,0)};function V(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function U(k,A){this.g=k,this.h=A}function W(k,A){if(b(A))throw Error("division by zero");if(b(k))return new U(g,g);if(x(k))return A=W(R(k),A),new U(R(A.g),R(A.h));if(x(A))return A=W(k,R(A)),new U(R(A.g),A.h);if(k.g.length>30){if(x(k)||x(A))throw Error("slowDivide_ only works with positive integers.");for(var N=v,M=A;M.l(k)<=0;)N=Y(N),M=Y(M);var O=X(N,1),F=X(M,1);for(M=X(M,2),N=X(N,2);!b(M);){var D=F.add(M);D.l(k)<=0&&(O=O.add(N),F=D),M=X(M,1),N=X(N,1)}return A=L(k,O.j(A)),new U(O,A)}for(O=g;k.l(A)>=0;){for(N=Math.max(1,Math.floor(k.m()/A.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),F=f(N),D=F.j(A);x(D)||D.l(k)>0;)N-=M,F=f(N),D=F.j(A);b(F)&&(F=v),O=O.add(F),k=L(k,D)}return new U(O,k)}n.B=function(k){return W(this,k).h},n.and=function(k){const A=Math.max(this.g.length,k.g.length),N=[];for(let M=0;M<A;M++)N[M]=this.i(M)&k.i(M);return new l(N,this.h&k.h)},n.or=function(k){const A=Math.max(this.g.length,k.g.length),N=[];for(let M=0;M<A;M++)N[M]=this.i(M)|k.i(M);return new l(N,this.h|k.h)},n.xor=function(k){const A=Math.max(this.g.length,k.g.length),N=[];for(let M=0;M<A;M++)N[M]=this.i(M)^k.i(M);return new l(N,this.h^k.h)};function Y(k){const A=k.g.length+1,N=[];for(let M=0;M<A;M++)N[M]=k.i(M)<<1|k.i(M-1)>>>31;return new l(N,k.h)}function X(k,A){const N=A>>5;A%=32;const M=k.g.length-N,O=[];for(let F=0;F<M;F++)O[F]=A>0?k.i(F+N)>>>A|k.i(F+N+1)<<32-A:k.i(F+N);return new l(O,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,hk=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,ao=l}).apply(typeof Ix<"u"?Ix:typeof self<"u"?self:typeof window<"u"?window:{});var af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fk,xu,pk,Tf,U_,mk,gk,yk;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof af=="object"&&af];for(var E=0;E<h.length;++E){var T=h[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(h,E){if(E)e:{var T=r;h=h.split(".");for(var P=0;P<h.length-1;P++){var K=h[P];if(!(K in T))break e;T=T[K]}h=h[h.length-1],P=T[h],E=E(P),E!=P&&E!=null&&e(T,h,{configurable:!0,writable:!0,value:E})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(E){var T=[],P;for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&T.push([P,E[P]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function d(h,E,T){return h.call.apply(h.bind,arguments)}function f(h,E,T){return f=d,f.apply(null,arguments)}function m(h,E){var T=Array.prototype.slice.call(arguments,1);return function(){var P=T.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function g(h,E){function T(){}T.prototype=E.prototype,h.Z=E.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(P,K,Z){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return E.prototype[K].apply(P,ge)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const E=h.length;if(E>0){const T=Array(E);for(let P=0;P<E;P++)T[P]=h[P];return T}return[]}function b(h,E){for(let P=1;P<arguments.length;P++){const K=arguments[P];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=h.length||0;const Z=K.length||0;h.length=T+Z;for(let ge=0;ge<Z;ge++)h[T+ge]=K[ge]}else h.push(K)}}class x{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function R(h){l.setTimeout(()=>{throw h},0)}function L(){var h=k;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class V{constructor(){this.h=this.g=null}add(E,T){const P=U.get();P.set(E,T),this.h?this.h.next=P:this.g=P,this.h=P}}var U=new x(()=>new W,h=>h.reset());class W{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,X=!1,k=new V,A=()=>{const h=Promise.resolve(void 0);Y=()=>{h.then(N)}};function N(){for(var h;h=L();){try{h.h.call(h.g)}catch(T){R(T)}var E=U;E.j(h),E.h<100&&(E.h++,h.next=E.g,E.g=h)}X=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};l.addEventListener("test",T,E),l.removeEventListener("test",T,E)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function me(h,E){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,E)}g(me,O),me.prototype.init=function(h,E){const T=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget,E||(T=="mouseover"?E=h.fromElement:T=="mouseout"&&(E=h.toElement)),this.relatedTarget=E,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ve="closure_listenable_"+(Math.random()*1e6|0),pe=0;function Ee(h,E,T,P,K){this.listener=h,this.proxy=null,this.src=E,this.type=T,this.capture=!!P,this.ha=K,this.key=++pe,this.da=this.fa=!1}function H(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ee(h,E,T){for(const P in h)E.call(T,h[P],P,h)}function ue(h,E){for(const T in h)E.call(void 0,h[T],T,h)}function B(h){const E={};for(const T in h)E[T]=h[T];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(h,E){let T,P;for(let K=1;K<arguments.length;K++){P=arguments[K];for(T in P)h[T]=P[T];for(let Z=0;Z<ne.length;Z++)T=ne[Z],Object.prototype.hasOwnProperty.call(P,T)&&(h[T]=P[T])}}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,E,T,P,K){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const ge=ce(h,E,P,K);return ge>-1?(E=h[ge],T||(E.fa=!1)):(E=new Ee(E,this.src,Z,!!P,K),E.fa=T,h.push(E)),E};function he(h,E){const T=E.type;if(T in h.g){var P=h.g[T],K=Array.prototype.indexOf.call(P,E,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(P,K,1),Z&&(H(E),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ce(h,E,T,P){for(let K=0;K<h.length;++K){const Z=h[K];if(!Z.da&&Z.listener==E&&Z.capture==!!T&&Z.ha==P)return K}return-1}var q="closure_lm_"+(Math.random()*1e6|0),oe={};function ye(h,E,T,P,K){if(Array.isArray(E)){for(let Z=0;Z<E.length;Z++)ye(h,E[Z],T,P,K);return null}return T=Ft(T),h&&h[ve]?h.J(E,T,c(P)?!!P.capture:!1,K):Ie(h,E,T,!1,P,K)}function Ie(h,E,T,P,K,Z){if(!E)throw Error("Invalid event type");const ge=c(K)?!!K.capture:!!K;let ze=Rn(h);if(ze||(h[q]=ze=new se(h)),T=ze.add(E,T,P,ge,Z),T.proxy)return T;if(P=je(),T.proxy=P,P.src=h,P.listener=T,h.addEventListener)F||(K=ge),K===void 0&&(K=!1),h.addEventListener(E.toString(),P,K);else if(h.attachEvent)h.attachEvent(ft(E.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return T}function je(){function h(T){return E.call(h.src,h.listener,T)}const E=Mn;return h}function $e(h,E,T,P,K){if(Array.isArray(E))for(var Z=0;Z<E.length;Z++)$e(h,E[Z],T,P,K);else P=c(P)?!!P.capture:!!P,T=Ft(T),h&&h[ve]?(h=h.i,Z=String(E).toString(),Z in h.g&&(E=h.g[Z],T=ce(E,T,P,K),T>-1&&(H(E[T]),Array.prototype.splice.call(E,T,1),E.length==0&&(delete h.g[Z],h.h--)))):h&&(h=Rn(h))&&(E=h.g[E.toString()],h=-1,E&&(h=ce(E,T,P,K)),(T=h>-1?E[h]:null)&&Ue(T))}function Ue(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[ve])he(E.i,h);else{var T=h.type,P=h.proxy;E.removeEventListener?E.removeEventListener(T,P,h.capture):E.detachEvent?E.detachEvent(ft(T),P):E.addListener&&E.removeListener&&E.removeListener(P),(T=Rn(E))?(he(T,h),T.h==0&&(T.src=null,E[q]=null)):H(h)}}}function ft(h){return h in oe?oe[h]:oe[h]="on"+h}function Mn(h,E){if(h.da)h=!0;else{E=new me(E,this);const T=h.listener,P=h.ha||h.src;h.fa&&Ue(h),h=T.call(P,E)}return h}function Rn(h){return h=h[q],h instanceof se?h:null}var bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ft(h){return typeof h=="function"?h:(h[bn]||(h[bn]=function(E){return h.handleEvent(E)}),h[bn])}function It(){M.call(this),this.i=new se(this),this.M=this,this.G=null}g(It,M),It.prototype[ve]=!0,It.prototype.removeEventListener=function(h,E,T,P){$e(this,h,E,T,P)};function xt(h,E){var T,P=h.G;if(P)for(T=[];P;P=P.G)T.push(P);if(h=h.M,P=E.type||E,typeof E=="string")E=new O(E,h);else if(E instanceof O)E.target=E.target||h;else{var K=E;E=new O(P,h),te(E,K)}K=!0;let Z,ge;if(T)for(ge=T.length-1;ge>=0;ge--)Z=E.g=T[ge],K=rn(Z,P,!0,E)&&K;if(Z=E.g=h,K=rn(Z,P,!0,E)&&K,K=rn(Z,P,!1,E)&&K,T)for(ge=0;ge<T.length;ge++)Z=E.g=T[ge],K=rn(Z,P,!1,E)&&K}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var h=this.i;for(const E in h.g){const T=h.g[E];for(let P=0;P<T.length;P++)H(T[P]);delete h.g[E],h.h--}}this.G=null},It.prototype.J=function(h,E,T,P){return this.i.add(String(h),E,!1,T,P)},It.prototype.K=function(h,E,T,P){return this.i.add(String(h),E,!0,T,P)};function rn(h,E,T,P){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();let K=!0;for(let Z=0;Z<E.length;++Z){const ge=E[Z];if(ge&&!ge.da&&ge.capture==T){const ze=ge.listener,Mt=ge.ha||ge.src;ge.fa&&he(h.i,ge),K=ze.call(Mt,P)!==!1&&K}}return K&&!P.defaultPrevented}function vi(h,E){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:l.setTimeout(h,E||0)}function Ao(h){h.g=vi(()=>{h.g=null,h.i&&(h.i=!1,Ao(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class Dd extends M{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ao(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(h){M.call(this),this.h=h,this.g={}}g(wi,M);var Ic=[];function Va(h){ee(h.g,function(E,T){this.g.hasOwnProperty(T)&&Ue(E)},h),h.g={}}wi.prototype.N=function(){wi.Z.N.call(this),Va(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ei=l.JSON.stringify,Od=l.JSON.parse,ko=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Si(){}function Md(){}var Ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ja(){O.call(this,"d")}g(ja,O);function xc(){O.call(this,"c")}g(xc,O);var Tr={},Fa=null;function Ii(){return Fa=Fa||new It}Tr.Ia="serverreachability";function Ua(h){O.call(this,Tr.Ia,h)}g(Ua,O);function As(h){const E=Ii();xt(E,new Ua(E))}Tr.STAT_EVENT="statevent";function ks(h,E){O.call(this,Tr.STAT_EVENT,h),this.stat=E}g(ks,O);function At(h){const E=Ii();xt(E,new ks(E,h))}Tr.Ja="timingevent";function Cc(h,E){O.call(this,Tr.Ja,h),this.size=E}g(Cc,O);function xi(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},E)}function Ci(){this.g=!0}Ci.prototype.ua=function(){this.g=!1};function Ld(h,E,T,P,K,Z){h.info(function(){if(h.g)if(Z){var ge="",ze=Z.split("&");for(let ct=0;ct<ze.length;ct++){var Mt=ze[ct].split("=");if(Mt.length>1){const Ut=Mt[0];Mt=Mt[1];const Qn=Ut.split("_");ge=Qn.length>=2&&Qn[1]=="type"?ge+(Ut+"="+Mt+"&"):ge+(Ut+"=redacted&")}}}else ge=null;else ge=Z;return"XMLHTTP REQ ("+P+") [attempt "+K+"]: "+E+`
`+T+`
`+ge})}function Vd(h,E,T,P,K,Z,ge){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+K+"]: "+E+`
`+T+`
`+Z+" "+ge})}function Gr(h,E,T,P){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+Po(h,T)+(P?" "+P:"")})}function jd(h,E){h.info(function(){return"TIMEOUT: "+E})}Ci.prototype.info=function(){};function Po(h,E){if(!h.g)return E;if(!E)return null;try{const Z=JSON.parse(E);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var T=Z[h];if(!(T.length<2)){var P=T[1];if(Array.isArray(P)&&!(P.length<1)){var K=P[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ge=1;ge<P.length;ge++)P[ge]=""}}}}return Ei(Z)}catch{return E}}var Ri={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fd;function Ps(){}g(Ps,Si),Ps.prototype.g=function(){return new XMLHttpRequest},Fd=new Ps;function Kr(h){return encodeURIComponent(String(h))}function za(h){var E=1;h=h.split(":");const T=[];for(;E>0&&h.length;)T.push(h.shift()),E--;return h.length&&T.push(h.join(":")),T}function ar(h,E,T,P){this.j=h,this.i=E,this.l=T,this.S=P||1,this.V=new wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ud}function Ud(){this.i=null,this.g="",this.h=!1}var zd={},Rc={};function Ir(h,E,T){h.M=1,h.A=Ds(lr(E)),h.u=T,h.R=!0,bc(h,null)}function bc(h,E){h.F=Date.now(),No(h),h.B=lr(h.A);var T=h.B,P=h.S;Array.isArray(P)||(P=[String(P)]),jc(T.i,"t",P),h.C=0,T=h.j.L,h.h=new Ud,h.g=Xd(h.j,T?E:null,!h.u),h.P>0&&(h.O=new Dd(f(h.Y,h,h.g),h.P)),E=h.V,T=h.g,P=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(Ic[0]=K.toString()),K=Ic);for(let Z=0;Z<K.length;Z++){const ge=ye(T,K[Z],P||E.handleEvent,!1,E.h||E);if(!ge)break;E.g[ge.key]=ge}E=h.J?B(h.J):{},h.u?(h.v||(h.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,E)):(h.v="GET",h.g.ea(h.B,h.v,null,E)),As(),Ld(h.i,h.v,h.B,h.l,h.S,h.u)}ar.prototype.ba=function(h){h=h.target;const E=this.O;E&&ts(h)==3?E.j():this.Y(h)},ar.prototype.Y=function(h){try{if(h==this.g)e:{const ze=ts(this.g),Mt=this.g.ya(),ct=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Qd(this.g)))){this.K||ze!=4||Mt==7||(Mt==8||ct<=0?As(3):As(2)),Ba(this);var E=this.g.ca();this.X=E;var T=Bd(this);if(this.o=E==200,Vd(this.i,this.v,this.B,this.l,this.S,ze,E),this.o){if(this.U&&!this.L){t:{if(this.g){var P,K=this.g;if((P=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(P)){var Z=P;break t}}Z=null}if(h=Z)Gr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gt(this,h);else{this.o=!1,this.m=3,At(12),Ns(this),Do(this);break e}}if(this.R){h=!0;let Ut;for(;!this.K&&this.C<T.length;)if(Ut=Wd(this,T),Ut==Rc){ze==4&&(this.m=4,At(14),h=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==zd){this.m=4,At(15),Gr(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Gr(this.i,this.l,Ut,null),gt(this,Ut);if($d(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||T.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)Gr(this.i,this.l,T,"[Invalid Chunked Response]"),Ns(this),Do(this);else if(T.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Bo(ge),ge.P=!0,At(11))}}else Gr(this.i,this.l,T,null),gt(this,T);ze==4&&Ns(this),this.o&&!this.K&&(ze==4?Ja(this.j,this):(this.o=!1,No(this)))}else Uc(this.g),E==400&&T.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Ns(this),Do(this)}}}catch{}finally{}};function Bd(h){if(!$d(h))return h.g.la();const E=Qd(h.g);if(E==="")return"";let T="";const P=E.length,K=ts(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ns(h),Do(h),"";h.h.i=new l.TextDecoder}for(let Z=0;Z<P;Z++)h.h.h=!0,T+=h.h.i.decode(E[Z],{stream:!(K&&Z==P-1)});return E.length=0,h.h.g+=T,h.C=0,h.h.g}function $d(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Wd(h,E){var T=h.C,P=E.indexOf(`
`,T);return P==-1?Rc:(T=Number(E.substring(T,P)),isNaN(T)?zd:(P+=1,P+T>E.length?Rc:(E=E.slice(P,P+T),h.C=P+T,E)))}ar.prototype.cancel=function(){this.K=!0,Ns(this)};function No(h){h.T=Date.now()+h.H,Ac(h,h.H)}function Ac(h,E){if(h.D!=null)throw Error("WatchDog timer not null");h.D=xi(f(h.aa,h),E)}function Ba(h){h.D&&(l.clearTimeout(h.D),h.D=null)}ar.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(jd(this.i,this.B),this.M!=2&&(As(),At(17)),Ns(this),this.m=2,Do(this)):Ac(this,this.T-h)};function Do(h){h.j.I==0||h.K||Ja(h.j,h)}function Ns(h){Ba(h);var E=h.O;E&&typeof E.dispose=="function"&&E.dispose(),h.O=null,Va(h.V),h.g&&(E=h.g,h.g=null,E.abort(),E.dispose())}function gt(h,E){try{var T=h.j;if(T.I!=0&&(T.g==h||Pc(T.h,h))){if(!h.L&&Pc(T.h,h)&&T.I==3){try{var P=T.Ba.g.parse(E)}catch{P=null}if(Array.isArray(P)&&P.length==3){var K=P;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Xa(T),Gn(T);else break e;ss(T),At(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=xi(f(T.Va,T),6e3));Oo(T.h)<=1&&T.ta&&(T.ta=void 0)}else Kn(T,11)}else if((h.L||T.g==h)&&Xa(T),!D(E))for(K=T.Ba.g.parse(E),E=0;E<K.length;E++){let ct=K[E];const Ut=ct[0];if(!(Ut<=T.K))if(T.K=Ut,ct=ct[1],T.I==2)if(ct[0]=="c"){T.M=ct[1],T.ba=ct[2];const Qn=ct[3];Qn!=null&&(T.ka=Qn,T.j.info("VER="+T.ka));const js=ct[4];js!=null&&(T.za=js,T.j.info("SVER="+T.za));const is=ct[5];is!=null&&typeof is=="number"&&is>0&&(P=1.5*is,T.O=P,T.j.info("backChannelRequestTimeoutMs_="+P)),P=T;const os=h.g;if(os){const tl=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var Z=P.h;Z.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Wa(Z,Z.h),Z.h=null))}if(P.G){const $c=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;$c&&(P.wa=$c,ot(P.J,P.G,$c))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),P=T;var ge=h;if(P.na=Bc(P,P.L?P.ba:null,P.W),ge.L){Mo(P.h,ge);var ze=ge,Mt=P.O;Mt&&(ze.H=Mt),ze.D&&(Ba(ze),No(ze)),P.g=ge}else pn(P);T.i.length>0&&Vs(T)}else ct[0]!="stop"&&ct[0]!="close"||Kn(T,7);else T.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Kn(T,7):Qa(T):ct[0]!="noop"&&T.l&&T.l.qa(ct),T.A=0)}}As(4)}catch{}}var Um=class{constructor(h,E){this.g=h,this.map=E}};function $a(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Oo(h){return h.h?1:h.g?h.g.size:0}function Pc(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Wa(h,E){h.g?h.g.add(E):h.h=E}function Mo(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}$a.prototype.cancel=function(){if(this.i=Wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Wn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const T of h.g.values())E=E.concat(T.G);return E}return I(h.i)}var Hd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hn(h,E){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const P=h[T].indexOf("=");let K,Z=null;P>=0?(K=h[T].substring(0,P),Z=h[T].substring(P+1)):K=h[T],E(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Qr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;h instanceof Qr?(this.l=h.l,Lo(this,h.j),this.o=h.o,this.g=h.g,Yr(this,h.u),this.h=h.h,Ai(this,Fc(h.i)),this.m=h.m):h&&(E=String(h).match(Hd))?(this.l=!1,Lo(this,E[1]||"",!0),this.o=Vo(E[2]||""),this.g=Vo(E[3]||"",!0),Yr(this,E[4]),this.h=Vo(E[5]||"",!0),Ai(this,E[6]||"",!0),this.m=Vo(E[7]||"")):(this.l=!1,this.i=new Xe(null,this.l))}Qr.prototype.toString=function(){const h=[];var E=this.j;E&&h.push(jo(E,Dc,!0),":");var T=this.g;return(T||E=="file")&&(h.push("//"),(E=this.o)&&h.push(jo(E,Dc,!0),"@"),h.push(Kr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(jo(T,T.charAt(0)=="/"?Fo:Oc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",jo(T,Mc)),h.join("")},Qr.prototype.resolve=function(h){const E=lr(this);let T=!!h.j;T?Lo(E,h.j):T=!!h.o,T?E.o=h.o:T=!!h.g,T?E.g=h.g:T=h.u!=null;var P=h.h;if(T)Yr(E,h.u);else if(T=!!h.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var K=E.h.lastIndexOf("/");K!=-1&&(P=E.h.slice(0,K+1)+P)}if(K=P,K==".."||K==".")P="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){P=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let ge=0;ge<K.length;){const ze=K[ge++];ze=="."?P&&ge==K.length&&Z.push(""):ze==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),P&&ge==K.length&&Z.push("")):(Z.push(ze),P=!0)}P=Z.join("/")}else P=K}return T?E.h=P:T=h.i.toString()!=="",T?Ai(E,Fc(h.i)):T=!!h.m,T&&(E.m=h.m),E};function lr(h){return new Qr(h)}function Lo(h,E,T){h.j=T?Vo(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function Yr(h,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);h.u=E}else h.u=null}function Ai(h,E,T){E instanceof Xe?(h.i=E,qa(h.i,h.l)):(T||(E=jo(E,zm)),h.i=new Xe(E,h.l))}function ot(h,E,T){h.i.set(E,T)}function Ds(h){return ot(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Vo(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function jo(h,E,T){return typeof h=="string"?(h=encodeURI(h).replace(E,Nc),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Nc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Dc=/[#\/\?@]/g,Oc=/[#\?:]/g,Fo=/[#\?]/g,zm=/[#\?@]/g,Mc=/#/g;function Xe(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Xr(h){h.g||(h.g=new Map,h.h=0,h.i&&Hn(h.i,function(E,T){h.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}n=Xe.prototype,n.add=function(h,E){Xr(this),this.i=null,h=Jr(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(E),this.h+=1,this};function Lc(h,E){Xr(h),E=Jr(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Ha(h,E){return Xr(h),E=Jr(h,E),h.g.has(E)}n.forEach=function(h,E){Xr(this),this.g.forEach(function(T,P){T.forEach(function(K){h.call(E,K,P,this)},this)},this)};function Vc(h,E){Xr(h);let T=[];if(typeof E=="string")Ha(h,E)&&(T=T.concat(h.g.get(Jr(h,E))));else for(h=Array.from(h.g.values()),E=0;E<h.length;E++)T=T.concat(h[E]);return T}n.set=function(h,E){return Xr(this),this.i=null,h=Jr(this,h),Ha(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=Vc(this,h),h.length>0?String(h[0]):E):E};function jc(h,E,T){Lc(h,E),T.length>0&&(h.i=null,h.g.set(Jr(h,E),I(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(let P=0;P<E.length;P++){var T=E[P];const K=Kr(T);T=Vc(this,T);for(let Z=0;Z<T.length;Z++){let ge=K;T[Z]!==""&&(ge+="="+Kr(T[Z])),h.push(ge)}}return this.i=h.join("&")};function Fc(h){const E=new Xe;return E.i=h.i,h.g&&(E.g=new Map(h.g),E.h=h.h),E}function Jr(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function qa(h,E){E&&!h.j&&(Xr(h),h.i=null,h.g.forEach(function(T,P){const K=P.toLowerCase();P!=K&&(Lc(this,P),jc(this,K,T))},h)),h.j=E}function Zr(h,E){const T=new Ci;if(l.Image){const P=new Image;P.onload=m(sn,T,"TestLoadImage: loaded",!0,E,P),P.onerror=m(sn,T,"TestLoadImage: error",!1,E,P),P.onabort=m(sn,T,"TestLoadImage: abort",!1,E,P),P.ontimeout=m(sn,T,"TestLoadImage: timeout",!1,E,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else E(!1)}function es(h,E){const T=new Ci,P=new AbortController,K=setTimeout(()=>{P.abort(),sn(T,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:P.signal}).then(Z=>{clearTimeout(K),Z.ok?sn(T,"TestPingServer: ok",!0,E):sn(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),sn(T,"TestPingServer: error",!1,E)})}function sn(h,E,T,P,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),P(T)}catch{}}function Uo(){this.g=new ko}function Os(h){this.i=h.Sb||null,this.h=h.ab||!1}g(Os,Si),Os.prototype.g=function(){return new qn(this.i,this.h)};function qn(h,E){It.call(this),this.H=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(qn,It),n=qn.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=E,this.readyState=1,xr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(E.body=h),(this.H||l).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qd(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function qd(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?ki(this):xr(this),this.readyState==3&&qd(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ki(this))},n.Na=function(h){this.g&&(this.response=h,ki(this))},n.ga=function(){this.g&&ki(this)};function ki(h){h.readyState=4,h.l=null,h.j=null,h.B=null,xr(h)}n.setRequestHeader=function(h,E){this.A.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=E.next();return h.join(`\r
`)};function xr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Gd(h){let E="";return ee(h,function(T,P){E+=P,E+=":",E+=T,E+=`\r
`}),E}function Ga(h,E,T){e:{for(P in T){var P=!1;break e}P=!0}P||(T=Gd(T),typeof h=="string"?T!=null&&Kr(T):ot(h,E,T))}function ht(h){It.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ht,It);var Kd=/^https?$/i,Bm=["POST","PUT"];n=ht.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,E,T,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fd.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(Z){Pi(this,Z);return}if(h=T||"",T=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var K in P)T.set(K,P[K]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const Z of P.keys())T.set(Z,P.get(Z));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(Bm,E,void 0)>=0)||P||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ge]of T)this.g.setRequestHeader(Z,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){Pi(this,Z)}};function Pi(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.o=5,Ni(h),Ls(h)}function Ni(h){h.A||(h.A=!0,xt(h,"complete"),xt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,xt(this,"complete"),xt(this,"abort"),Ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ms(this):this.Xa())},n.Xa=function(){Ms(this)};function Ms(h){if(h.h&&typeof o<"u"){if(h.v&&ts(h)==4)setTimeout(h.Ca.bind(h),0);else if(xt(h,"readystatechange"),ts(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var T;if(!(T=E)){var P;if(P=Z===0){let ge=String(h.D).match(Hd)[1]||null;!ge&&l.self&&l.self.location&&(ge=l.self.location.protocol.slice(0,-1)),P=!Kd.test(ge?ge.toLowerCase():"")}T=P}if(T)xt(h,"complete"),xt(h,"success");else{h.o=6;try{var K=ts(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",Ni(h)}}finally{Ls(h)}}}}function Ls(h,E){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,E||xt(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ts(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ts(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),Od(E)}};function Qd(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Uc(h){const E={};h=(h.g&&ts(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(D(h[P]))continue;var T=za(h[P]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=E[K]||[];E[K]=Z,Z.push(T)}ue(E,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(h,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||E}function Ka(h){this.za=0,this.i=[],this.j=new Ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ns("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ns("baseRetryDelayMs",5e3,h),this.Za=ns("retryDelaySeedMs",1e4,h),this.Ta=ns("forwardChannelMaxRetries",2,h),this.va=ns("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new $a(h&&h.concurrentRequestLimit),this.Ba=new Uo,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ka.prototype,n.ka=8,n.I=1,n.connect=function(h,E,T,P){At(0),this.W=h,this.H=E||{},T&&P!==void 0&&(this.H.OSID=T,this.H.OAID=P),this.F=this.X,this.J=Bc(this,null,this.W),Vs(this)};function Qa(h){if(Ya(h),h.I==3){var E=h.V++,T=lr(h.J);if(ot(T,"SID",h.M),ot(T,"RID",E),ot(T,"TYPE","terminate"),rs(h,T),E=new ar(h,h.j,E),E.M=2,E.A=Ds(lr(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(E.A.toString(),"")}catch{}!T&&l.Image&&(new Image().src=E.A,T=!0),T||(E.g=Xd(E.j,null),E.g.ea(E.A)),E.F=Date.now(),No(E)}$o(h)}function Gn(h){h.g&&(Bo(h),h.g.cancel(),h.g=null)}function Ya(h){Gn(h),h.v&&(l.clearTimeout(h.v),h.v=null),Xa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function Vs(h){if(!kc(h.h)&&!h.m){h.m=!0;var E=h.Ea;Y||A(),X||(Y(),X=!0),k.add(E,h),h.D=0}}function Yd(h,E){return Oo(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=E.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=xi(f(h.Ea,h,E),Za(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new ar(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=B(Z),te(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var E=0,T=0;T<this.i.length;T++){t:{var P=this.i[T];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(E+=P,E>4096){E=T;break e}if(E===4096||T===this.i.length-1){E=T+1;break e}}E=1e3}else E=1e3;E=zc(this,K,E),T=lr(this.J),ot(T,"RID",h),ot(T,"CVER",22),this.G&&ot(T,"X-HTTP-Session-Id",this.G),rs(this,T),Z&&(this.R?E="headers="+Kr(Gd(Z))+"&"+E:this.u&&Ga(T,this.u,Z)),Wa(this.h,K),this.Ra&&ot(T,"TYPE","init"),this.S?(ot(T,"$req",E),ot(T,"SID","null"),K.U=!0,Ir(K,T,null)):Ir(K,T,E),this.I=2}}else this.I==3&&(h?zo(this,h):this.i.length==0||kc(this.h)||zo(this))};function zo(h,E){var T;E?T=E.l:T=h.V++;const P=lr(h.J);ot(P,"SID",h.M),ot(P,"RID",T),ot(P,"AID",h.K),rs(h,P),h.u&&h.o&&Ga(P,h.u,h.o),T=new ar(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),E&&(h.i=E.G.concat(h.i)),E=zc(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Wa(h.h,T),Ir(T,P,E)}function rs(h,E){h.H&&ee(h.H,function(T,P){ot(E,P,T)}),h.l&&ee({},function(T,P){ot(E,P,T)})}function zc(h,E,T){T=Math.min(h.i.length,T);const P=h.l?f(h.l.Ka,h.l,h):null;e:{var K=h.i;let ze=-1;for(;;){const Mt=["count="+T];ze==-1?T>0?(ze=K[0].g,Mt.push("ofs="+ze)):ze=0:Mt.push("ofs="+ze);let ct=!0;for(let Ut=0;Ut<T;Ut++){var Z=K[Ut].g;const Qn=K[Ut].map;if(Z-=ze,Z<0)ze=Math.max(0,K[Ut].g-100),ct=!1;else try{Z="req"+Z+"_"||"";try{var ge=Qn instanceof Map?Qn:Object.entries(Qn);for(const[js,is]of ge){let os=is;c(is)&&(os=Ei(is)),Mt.push(Z+js+"="+encodeURIComponent(os))}}catch(js){throw Mt.push(Z+"type="+encodeURIComponent("_badmap")),js}}catch{P&&P(Qn)}}if(ct){ge=Mt.join("&");break e}}ge=void 0}return h=h.i.splice(0,T),E.G=h,ge}function pn(h){if(!h.g&&!h.v){h.Y=1;var E=h.Da;Y||A(),X||(Y(),X=!0),k.add(E,h),h.A=0}}function ss(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=xi(f(h.Da,h),Za(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Di(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=xi(f(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Gn(this),Di(this))};function Bo(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function Di(h){h.g=new ar(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var E=lr(h.na);ot(E,"RID","rpc"),ot(E,"SID",h.M),ot(E,"AID",h.K),ot(E,"CI",h.F?"0":"1"),!h.F&&h.ia&&ot(E,"TO",h.ia),ot(E,"TYPE","xmlhttp"),rs(h,E),h.u&&h.o&&Ga(E,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Ds(lr(E)),T.u=null,T.R=!0,bc(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Gn(this),ss(this),At(19))};function Xa(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Ja(h,E){var T=null;if(h.g==E){Xa(h),Bo(h),h.g=null;var P=2}else if(Pc(h.h,E))T=E.G,Mo(h.h,E),P=1;else return;if(h.I!=0){if(E.o)if(P==1){T=E.u?E.u.length:0,E=Date.now()-E.F;var K=h.D;P=Ii(),xt(P,new Cc(P,T)),Vs(h)}else pn(h);else if(K=E.m,K==3||K==0&&E.X>0||!(P==1&&Yd(h,E)||P==2&&ss(h)))switch(T&&T.length>0&&(E=h.h,E.i=E.i.concat(T)),K){case 1:Kn(h,5);break;case 4:Kn(h,10);break;case 3:Kn(h,6);break;default:Kn(h,2)}}}function Za(h,E){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*E}function Kn(h,E){if(h.j.info("Error code "+E),E==2){var T=f(h.bb,h),P=h.Ua;const K=!P;P=new Qr(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Lo(P,"https"),Ds(P),K?Zr(P.toString(),T):es(P.toString(),T)}else At(2);h.I=0,h.l&&h.l.pa(E),$o(h),Ya(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function $o(h){if(h.I=0,h.ja=[],h.l){const E=Wn(h.h);(E.length!=0||h.i.length!=0)&&(b(h.ja,E),b(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Bc(h,E,T){var P=T instanceof Qr?lr(T):new Qr(T);if(P.g!="")E&&(P.g=E+"."+P.g),Yr(P,P.u);else{var K=l.location;P=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;const Z=new Qr(null);P&&Lo(Z,P),E&&(Z.g=E),K&&Yr(Z,K),T&&(Z.h=T),P=Z}return T=h.G,E=h.wa,T&&E&&ot(P,T,E),ot(P,"VER",h.ka),rs(h,P),P}function Xd(h,E,T){if(E&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Aa&&!h.ma?new ht(new Os({ab:T})):new ht(h.ma),E.Fa(h.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jd(){}n=Jd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function el(){}el.prototype.g=function(h,E){return new on(h,E)};function on(h,E){It.call(this),this.g=new Ka(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(h?h["X-WebChannel-Client-Profile"]=E.sa:h={"X-WebChannel-Client-Profile":E.sa}),this.g.U=h,(h=E&&E.Qb)&&!D(h)&&(this.g.u=h),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new Oi(this)}g(on,It),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Qa(this.g)},on.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Ei(h),h=T);E.i.push(new Um(E.Ya++,h)),E.I==3&&Vs(E)},on.prototype.N=function(){this.g.l=null,delete this.j,Qa(this.g),delete this.g,on.Z.N.call(this)};function Zd(h){ja.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const T in E){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}g(Zd,ja);function eh(){xc.call(this),this.status=1}g(eh,xc);function Oi(h){this.g=h}g(Oi,Jd),Oi.prototype.ra=function(){xt(this.g,"a")},Oi.prototype.qa=function(h){xt(this.g,new Zd(h))},Oi.prototype.pa=function(h){xt(this.g,new eh)},Oi.prototype.oa=function(){xt(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,yk=function(){return new el},gk=function(){return Ii()},mk=Tr,U_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,Tf=Ri,bi.COMPLETE="complete",pk=bi,Md.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",It.prototype.listen=It.prototype.J,xu=Md,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,fk=ht}).apply(typeof af<"u"?af:typeof self<"u"?self:typeof window<"u"?window:{});const xx="@firebase/firestore",Cx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Zp("@firebase/firestore");function bl(){return Ea.logLevel}function Te(n,...e){if(Ea.logLevel<=Ke.DEBUG){const t=e.map(dw);Ea.debug(`Firestore (${yc}): ${n}`,...t)}}function hi(n,...e){if(Ea.logLevel<=Ke.ERROR){const t=e.map(dw);Ea.error(`Firestore (${yc}): ${n}`,...t)}}function Zl(n,...e){if(Ea.logLevel<=Ke.WARN){const t=e.map(dw);Ea.warn(`Firestore (${yc}): ${n}`,...t)}}function dw(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,_k(n,r,t)}function _k(n,e,t){let r=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw hi(r),new Error(r)}function lt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||_k(e,s,r)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(wn.UNAUTHENTICATED)))}shutdown(){}}class x5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class C5{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new lo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lo,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lo)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string",31837,{l:r}),new vk(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class R5{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b5{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new R5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0,3512);const r=o=>{o.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Te("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Rx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(lt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Rx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=k5(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function z_(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return zy(s)===zy(o)?Qe(s,o):zy(s)?1:-1}return Qe(n.length,e.length)}const P5=55296,N5=57343;function zy(n){const e=n.charCodeAt(0);return e>=P5&&e<=N5}function ec(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="__name__";class ds{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ds.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ds?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=ds.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Qe(e.length,t.length)}static compareSegments(e,t){const r=ds.isNumericId(e),s=ds.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ds.extractNumericId(e).compare(ds.extractNumericId(t)):z_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ao.fromString(e.substring(4,e.length-2))}}class mt extends ds{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const D5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends ds{construct(e,t,r){return new hn(e,t,r)}static isValidIdentifier(e){return D5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bx}static keyField(){return new hn([bx])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new we(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new we(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new we(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(mt.fromString(e))}static fromName(e){return new Ne(mt.fromString(e).popFirst(5))}static empty(){return new Ne(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(n,e,t){if(!t)throw new we(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function O5(n,e,t,r){if(e===!0&&r===!0)throw new we(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ax(n){if(!Ne.isDocumentKey(n))throw new we(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kx(n){if(Ne.isDocumentKey(n))throw new we(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ek(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function om(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function Vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=om(n);throw new we(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function _d(n,e){if(!Ek(n))throw new we(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new we(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=-62135596800,Nx=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Nx);return new Et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Px)throw new we(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nx}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_d(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Px;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:Wt("string",Et._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Et(0,0))}static max(){return new Fe(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=-1;function M5(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new Et(t+1,0):new Et(t,r));return new po(s,Ne.empty(),e)}function L5(n){return new po(n.readTime,n.key,Yu)}class po{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new po(Fe.min(),Ne.empty(),Yu)}static max(){return new po(Fe.max(),Ne.empty(),Yu)}}function V5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==j5)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let s=0,o=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++o,l&&o===s&&t()}),(d=>r(d)))})),l=!0,o===s&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((s=>s?ie.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((m=>{l[f]=m,++c,c===o&&r(l)}),(m=>s(m)))}}))}static doWhile(e,t){return new ie(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function U5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}am.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=-1;function lm(n){return n==null}function ap(n){return n===0&&1/n==-1/0}function z5(n){return typeof n=="number"&&Number.isInteger(n)&&!ap(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="";function B5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dx(e)),e=$5(n.get(t),e);return Dx(e)}function $5(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Sk:t+="";break;default:t+=o}}return t}function Dx(n){return n+Sk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Io(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lf(this.root,e,this.comparator,!0)}}class lf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??cn.RED,this.left=s??cn.EMPTY,this.right=o??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new cn(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return cn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mx(this.data.getIterator())}getIteratorFrom(e){return new Mx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class Mx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new rr([])}unionWith(e){let t=new Qt(hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ik("Invalid base64 string: "+o):o}})(e);return new fn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const W5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(n){if(lt(!!n,39018),typeof n=="string"){let e=0;const t=W5.exec(n);if(lt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function go(n){return typeof n=="string"?fn.fromBase64String(n):fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="server_timestamp",Ck="__type__",Rk="__previous_value__",bk="__local_write_time__";function pw(n){return(n?.mapValue?.fields||{})[Ck]?.stringValue===xk}function cm(n){const e=n.mapValue.fields[Rk];return pw(e)?cm(e):e}function Xu(n){const e=mo(n.mapValue.fields[bk].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,t,r,s,o,l,c,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}}const lp="(default)";class Ju{constructor(e,t){this.projectId=e,this.database=t||lp}static empty(){return new Ju("","")}get isDefaultDatabase(){return this.database===lp}isEqual(e){return e instanceof Ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="__type__",q5="__max__",cf={mapValue:{}},kk="__vector__",cp="value";function yo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pw(n)?4:K5(n)?9007199254740991:G5(n)?10:11:Le(28295,{value:n})}function xs(n,e){if(n===e)return!0;const t=yo(n);if(t!==yo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xu(n).isEqual(Xu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=mo(s.timestampValue),c=mo(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return go(s.bytesValue).isEqual(go(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Vt(s.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Vt(s.integerValue)===Vt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Vt(s.doubleValue),c=Vt(o.doubleValue);return l===c?ap(l)===ap(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return ec(n.arrayValue.values||[],e.arrayValue.values||[],xs);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(Ox(l)!==Ox(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!xs(l[d],c[d])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function Zu(n,e){return(n.values||[]).find((t=>xs(t,e)))!==void 0}function tc(n,e){if(n===e)return 0;const t=yo(n),r=yo(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=Vt(o.integerValue||o.doubleValue),d=Vt(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(n,e);case 3:return Lx(n.timestampValue,e.timestampValue);case 4:return Lx(Xu(n),Xu(e));case 5:return z_(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=go(o),d=go(l);return c.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),d=l.split("/");for(let f=0;f<c.length&&f<d.length;f++){const m=Qe(c[f],d[f]);if(m!==0)return m}return Qe(c.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Qe(Vt(o.latitude),Vt(l.latitude));return c!==0?c:Qe(Vt(o.longitude),Vt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Vx(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const c=o.fields||{},d=l.fields||{},f=c[cp]?.arrayValue,m=d[cp]?.arrayValue,g=Qe(f?.values?.length||0,m?.values?.length||0);return g!==0?g:Vx(f,m)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===cf.mapValue&&l===cf.mapValue)return 0;if(o===cf.mapValue)return 1;if(l===cf.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=l.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const v=z_(d[g],m[g]);if(v!==0)return v;const I=tc(c[d[g]],f[m[g]]);if(I!==0)return I}return Qe(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function Lx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=mo(n),r=mo(e),s=Qe(t.seconds,r.seconds);return s!==0?s:Qe(t.nanos,r.nanos)}function Vx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=tc(t[s],r[s]);if(o)return o}return Qe(t.length,r.length)}function nc(n){return B_(n)}function B_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=mo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return go(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=B_(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${B_(t.fields[l])}`;return s+"}"})(n.mapValue):Le(61005,{value:n})}function If(n){switch(yo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cm(n);return e?16+If(e):16;case 5:return 2*n.stringValue.length;case 6:return go(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+If(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Io(r.fields,((o,l)=>{s+=o.length+If(l)})),s})(n.mapValue);default:throw Le(13486,{value:n})}}function jx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $_(n){return!!n&&"integerValue"in n}function mw(n){return!!n&&"arrayValue"in n}function Fx(n){return!!n&&"nullValue"in n}function Ux(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xf(n){return!!n&&"mapValue"in n}function G5(n){return(n?.mapValue?.fields||{})[Ak]?.stringValue===kk}function ju(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Io(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ju(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ju(n.arrayValue.values[t]);return e}return{...n}}function K5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===q5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ju(t)}setAll(e){let t=hn.emptyPath(),r={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=ju(l):s.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());xf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];xf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Io(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new $n(ju(this.value))}}function Pk(n){const e=[];return Io(n.fields,((t,r)=>{const s=new hn([t]);if(xf(r)){const o=Pk(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Tn(e,0,Fe.min(),Fe.min(),Fe.min(),$n.empty(),0)}static newFoundDocument(e,t,r,s){return new Tn(e,1,t,Fe.min(),r,s,0)}static newNoDocument(e,t){return new Tn(e,2,t,Fe.min(),Fe.min(),$n.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Fe.min(),Fe.min(),$n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t){this.position=e,this.inclusive=t}}function zx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Ne.comparator(Ne.fromName(l.referenceValue),t.key):r=tc(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{}class $t extends Nk{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new X5(e,t,r):t==="array-contains"?new e9(e,r):t==="in"?new t9(e,r):t==="not-in"?new n9(e,r):t==="array-contains-any"?new r9(e,r):new $t(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new J5(e,r):new Z5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tc(t,this.value)):t!==null&&yo(this.value)===yo(t)&&this.matchesComparison(tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends Nk{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wr(e,t)}matches(e){return Dk(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dk(n){return n.op==="and"}function Ok(n){return Y5(n)&&Dk(n)}function Y5(n){for(const e of n.filters)if(e instanceof Wr)return!1;return!0}function W_(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+nc(n.value);if(Ok(n))return n.filters.map((e=>W_(e))).join(",");{const e=n.filters.map((t=>W_(t))).join(",");return`${n.op}(${e})`}}function Mk(n,e){return n instanceof $t?(function(r,s){return s instanceof $t&&r.op===s.op&&r.field.isEqual(s.field)&&xs(r.value,s.value)})(n,e):n instanceof Wr?(function(r,s){return s instanceof Wr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,c)=>o&&Mk(l,s.filters[c])),!0):!1})(n,e):void Le(19439)}function Lk(n){return n instanceof $t?(function(t){return`${t.field.canonicalString()} ${t.op} ${nc(t.value)}`})(n):n instanceof Wr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Lk).join(" ,")+"}"})(n):"Filter"}class X5 extends $t{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class J5 extends $t{constructor(e,t){super(e,"in",t),this.keys=Vk("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Z5 extends $t{constructor(e,t){super(e,"not-in",t),this.keys=Vk("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Vk(n,e){return(e.arrayValue?.values||[]).map((t=>Ne.fromName(t.referenceValue)))}class e9 extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mw(t)&&Zu(t.arrayValue,this.value)}}class t9 extends $t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zu(this.value.arrayValue,t)}}class n9 extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zu(this.value.arrayValue,t)}}class r9 extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mw(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Zu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function $x(n,e=null,t=[],r=[],s=null,o=null,l=null){return new s9(n,e,t,r,s,o,l)}function gw(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>W_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),lm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>nc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>nc(r))).join(",")),e.Te=t}return e.Te}function yw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Q5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Mk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bx(n.startAt,e.startAt)&&Bx(n.endAt,e.endAt)}function H_(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function i9(n,e,t,r,s,o,l,c){return new wc(n,e,t,r,s,o,l,c)}function um(n){return new wc(n)}function Wx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jk(n){return n.collectionGroup!==null}function Fu(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Qt(hn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ed(o,r))})),t.has(hn.keyField().canonicalString())||e.Ie.push(new ed(hn.keyField(),r))}return e.Ie}function _s(n){const e=Be(n);return e.Ee||(e.Ee=o9(e,Fu(n))),e.Ee}function o9(n,e){if(n.limitType==="F")return $x(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new ed(s.field,o)}));const t=n.endAt?new up(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new up(n.startAt.position,n.startAt.inclusive):null;return $x(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function q_(n,e){const t=n.filters.concat([e]);return new wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dp(n,e,t){return new wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dm(n,e){return yw(_s(n),_s(e))&&n.limitType===e.limitType}function Fk(n){return`${gw(_s(n))}|lt:${n.limitType}`}function Al(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>Lk(s))).join(", ")}]`),lm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>nc(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>nc(s))).join(",")),`Target(${r})`})(_s(n))}; limitType=${n.limitType})`}function hm(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Fu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,c,d){const f=zx(l,c,d);return l.inclusive?f<=0:f<0})(r.startAt,Fu(r),s)||r.endAt&&!(function(l,c,d){const f=zx(l,c,d);return l.inclusive?f>=0:f>0})(r.endAt,Fu(r),s))})(n,e)}function a9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Uk(n){return(e,t)=>{let r=!1;for(const s of Fu(n)){const o=l9(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function l9(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(o,l,c){const d=l.data.field(o),f=c.data.field(o);return d!==null&&f!==null?tc(d,f):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return Tk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9=new bt(Ne.comparator);function fi(){return c9}const zk=new bt(Ne.comparator);function Cu(...n){let e=zk;for(const t of n)e=e.insert(t.key,t);return e}function Bk(n){let e=zk;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function la(){return Uu()}function $k(){return Uu()}function Uu(){return new Da((n=>n.toString()),((n,e)=>n.isEqual(e)))}const u9=new bt(Ne.comparator),d9=new Qt(Ne.comparator);function Ye(...n){let e=d9;for(const t of n)e=e.add(t);return e}const h9=new Qt(Qe);function f9(){return h9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ap(e)?"-0":e}}function Wk(n){return{integerValue:""+n}}function p9(n,e){return z5(e)?Wk(e):_w(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this._=void 0}}function m9(n,e,t){return n instanceof td?(function(s,o){const l={fields:{[Ck]:{stringValue:xk},[bk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&pw(o)&&(o=cm(o)),o&&(l.fields[Rk]=o),{mapValue:l}})(t,e):n instanceof rc?qk(n,e):n instanceof nd?Gk(n,e):(function(s,o){const l=Hk(s,o),c=Hx(l)+Hx(s.Ae);return $_(l)&&$_(s.Ae)?Wk(c):_w(s.serializer,c)})(n,e)}function g9(n,e,t){return n instanceof rc?qk(n,e):n instanceof nd?Gk(n,e):t}function Hk(n,e){return n instanceof hp?(function(r){return $_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class td extends fm{}class rc extends fm{constructor(e){super(),this.elements=e}}function qk(n,e){const t=Kk(e);for(const r of n.elements)t.some((s=>xs(s,r)))||t.push(r);return{arrayValue:{values:t}}}class nd extends fm{constructor(e){super(),this.elements=e}}function Gk(n,e){let t=Kk(e);for(const r of n.elements)t=t.filter((s=>!xs(s,r)));return{arrayValue:{values:t}}}class hp extends fm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Hx(n){return Vt(n.integerValue||n.doubleValue)}function Kk(n){return mw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t){this.field=e,this.transform=t}}function y9(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof rc&&s instanceof rc||r instanceof nd&&s instanceof nd?ec(r.elements,s.elements,xs):r instanceof hp&&s instanceof hp?xs(r.Ae,s.Ae):r instanceof td&&s instanceof td})(n.transform,e.transform)}class _9{constructor(e,t){this.version=e,this.transformResults=t}}class jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class pm{}function Yk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jk(n.key,jr.none()):new vd(n.key,n.data,jr.none());{const t=n.data,r=$n.empty();let s=new Qt(hn.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new xo(n.key,r,new rr(s.toArray()),jr.none())}}function v9(n,e,t){n instanceof vd?(function(s,o,l){const c=s.value.clone(),d=Gx(s.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof xo?(function(s,o,l){if(!Cf(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Gx(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(Xk(s)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function zu(n,e,t,r){return n instanceof vd?(function(o,l,c,d){if(!Cf(o.precondition,l))return c;const f=o.value.clone(),m=Kx(o.fieldTransforms,d,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof xo?(function(o,l,c,d){if(!Cf(o.precondition,l))return c;const f=Kx(o.fieldTransforms,d,l),m=l.data;return m.setAll(Xk(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(o,l,c){return Cf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function w9(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=Hk(r.transform,s||null);o!=null&&(t===null&&(t=$n.empty()),t.set(r.field,o))}return t||null}function qx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ec(r,s,((o,l)=>y9(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vd extends pm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xo extends pm{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Xk(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Gx(n,e,t){const r=new Map;lt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,g9(l,c,t[s]))}return r}function Kx(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,m9(o,l,e))}return r}class Jk extends pm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E9 extends pm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&v9(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$k();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const d=Yk(l,c);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,((t,r)=>qx(t,r)))&&ec(this.baseMutations,e.baseMutations,((t,r)=>qx(t,r)))}}class vw{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){lt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return u9})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new vw(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T9=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,et;function x9(n){switch(n){case re.OK:return Le(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function Zk(n){if(n===void 0)return hi("GRPC error has no .code"),re.UNKNOWN;switch(n){case Bt.OK:return re.OK;case Bt.CANCELLED:return re.CANCELLED;case Bt.UNKNOWN:return re.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return re.INTERNAL;case Bt.UNAVAILABLE:return re.UNAVAILABLE;case Bt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Bt.NOT_FOUND:return re.NOT_FOUND;case Bt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Bt.ABORTED:return re.ABORTED;case Bt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Bt.DATA_LOSS:return re.DATA_LOSS;default:return Le(39323,{code:n})}}(et=Bt||(Bt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=new ao([4294967295,4294967295],0);function Qx(n){const e=C9().encode(n),t=new hk;return t.update(e),new Uint8Array(t.digest())}function Yx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ao([t,r],0),new ao([s,o],0)]}class ww{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ru(`Invalid padding: ${t}`);if(r<0)throw new Ru(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ao.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(ao.fromNumber(r)));return s.compare(R9)===1&&(s=new ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Qx(e),[r,s]=Yx(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new ww(o,s,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=Qx(e),[r,s]=Yx(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,wd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new mm(Fe.min(),s,new bt(Qe),fi(),Ye())}}class wd{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wd(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class eP{constructor(e,t){this.targetId=e,this.Ce=t}}class tP{constructor(e,t,r=fn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Xx{constructor(){this.ve=0,this.Fe=Jx(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Le(38017,{changeType:o})}})),new wd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Jx()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class b9{constructor(e){this.Ge=e,this.ze=new Map,this.je=fi(),this.Je=uf(),this.He=uf(),this.Ye=new bt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(H_(o))if(r===0){const l=new Ne(o.path);this.et(t,l,Tn.newNoDocument(l,Fe.min()))}else lt(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),d=c?this.ct(c,e,l):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=go(r).toUint8Array()}catch(d){if(d instanceof Ik)return Zl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new ww(l,s,o)}catch(d){return Zl(d instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&H_(c.target)){const d=new Ne(c.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Tn.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Ye();this.He.forEach(((o,l)=>{let c=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new mm(e,t,this.Ye,this.je,r);return this.je=fi(),this.Je=uf(),this.He=uf(),this.Ye=new bt(Qe),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Xx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qt(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qt(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function uf(){return new bt(Ne.comparator)}function Jx(){return new bt(Ne.comparator)}const A9={asc:"ASCENDING",desc:"DESCENDING"},k9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P9={and:"AND",or:"OR"};class N9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function G_(n,e){return n.useProto3Json||lm(e)?e:{value:e}}function fp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function D9(n,e){return fp(n,e.toTimestamp())}function vs(n){return lt(!!n,49232),Fe.fromTimestamp((function(t){const r=mo(t);return new Et(r.seconds,r.nanos)})(n))}function Ew(n,e){return K_(n,e).canonicalString()}function K_(n,e){const t=(function(s){return new mt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function rP(n){const e=mt.fromString(n);return lt(lP(e),10190,{key:e.toString()}),e}function Q_(n,e){return Ew(n.databaseId,e.path)}function By(n,e){const t=rP(e);if(t.get(1)!==n.databaseId.projectId)throw new we(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(iP(t))}function sP(n,e){return Ew(n.databaseId,e)}function O9(n){const e=rP(n);return e.length===4?mt.emptyPath():iP(e)}function Y_(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iP(n){return lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Zx(n,e,t){return{name:Q_(n,e),fields:t.value.mapValue.fields}}function M9(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Le(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(lt(m===void 0||typeof m=="string",58123),fn.fromBase64String(m||"")):(lt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),fn.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const m=f.code===void 0?re.UNKNOWN:Zk(f.code);return new we(m,f.message||"")})(l);t=new tP(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=By(n,r.document.name),o=vs(r.document.updateTime),l=r.document.createTime?vs(r.document.createTime):Fe.min(),c=new $n({mapValue:{fields:r.document.fields}}),d=Tn.newFoundDocument(s,o,l,c),f=r.targetIds||[],m=r.removedTargetIds||[];t=new Rf(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=By(n,r.document),o=r.readTime?vs(r.readTime):Fe.min(),l=Tn.newNoDocument(s,o),c=r.removedTargetIds||[];t=new Rf([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=By(n,r.document),o=r.removedTargetIds||[];t=new Rf([],o,s,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new I9(s,o),c=r.targetId;t=new eP(c,l)}}return t}function L9(n,e){let t;if(e instanceof vd)t={update:Zx(n,e.key,e.value)};else if(e instanceof Jk)t={delete:Q_(n,e.key)};else if(e instanceof xo)t={update:Zx(n,e.key,e.data),updateMask:H9(e.fieldMask)};else{if(!(e instanceof E9))return Le(16599,{Vt:e.type});t={verify:Q_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof td)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof rc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof nd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof hp)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Le(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:D9(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Le(27497)})(n,e.precondition)),t}function V9(n,e){return n&&n.length>0?(lt(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?vs(s.updateTime):vs(o);return l.isEqual(Fe.min())&&(l=vs(o)),new _9(l,s.transformResults||[])})(t,e)))):[]}function j9(n,e){return{documents:[sP(n,e.path)]}}function F9(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sP(n,s);const o=(function(f){if(f.length!==0)return aP(Wr.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((m=>(function(v){return{field:kl(v.field),direction:B9(v.dir)}})(m)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=G_(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function U9(n){let e=O9(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){lt(r===1,65062);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(g){const v=oP(g);return v instanceof Wr&&Ok(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(g){return g.map((v=>(function(b){return new ed(Pl(b.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let v;return v=typeof g=="object"?g.value:g,lm(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(g){const v=!!g.before,I=g.values||[];return new up(I,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(g){const v=!g.before,I=g.values||[];return new up(I,v)})(t.endAt)),i9(e,s,l,o,c,"F",d,f)}function z9(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oP(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pl(t.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Pl(t.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Pl(t.unaryFilter.field);return $t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Pl(t.unaryFilter.field);return $t.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $t.create(Pl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wr.create(t.compositeFilter.filters.map((r=>oP(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function B9(n){return A9[n]}function $9(n){return k9[n]}function W9(n){return P9[n]}function kl(n){return{fieldPath:n.canonicalString()}}function Pl(n){return hn.fromServerFormat(n.fieldPath)}function aP(n){return n instanceof $t?(function(t){if(t.op==="=="){if(Ux(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NAN"}};if(Fx(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ux(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NAN"}};if(Fx(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(t.field),op:$9(t.op),value:t.value}}})(n):n instanceof Wr?(function(t){const r=t.getFilters().map((s=>aP(s)));return r.length===1?r[0]:{compositeFilter:{op:W9(t.op),filters:r}}})(n):Le(54877,{filter:n})}function H9(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,r,s,o=Fe.min(),l=Fe.min(),c=fn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new so(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e){this.yt=e}}function G9(n){const e=U9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(){this.Cn=new Q9}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(po.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(po.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Q9{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Qt(mt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cP=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(cP,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sc(0)}static cr(){return new sc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="LruGarbageCollector",Y9=1048576;function n0([n,e],[t,r]){const s=Qe(n,t);return s===0?Qe(e,r):s}class X9{constructor(e){this.Ir=e,this.buffer=new Qt(n0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();n0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class J9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(t0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vc(t)?Te(t0,"Ignoring IndexedDB error during garbage collection: ",t):await _c(t)}await this.Vr(3e5)}))}}class Z9{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(am.ce);const r=new X9(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(e0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,l,c,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,l=Date.now(),this.nthSequenceNumber(e,s)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(o=g,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),bl()<=Ke.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${g} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:g}))))}}function eB(n,e){return new Z9(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(){this.changes=new Da((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&zu(r.mutation,s,rr.empty(),Et.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const s=la();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=Cu();return o.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=la();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,s){let o=fi();const l=Uu(),c=(function(){return Uu()})();return t.forEach(((d,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof xo)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),zu(m.mutation,f,m.mutation.getFieldMask(),Et.now())):l.set(f.key,rr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,m)=>l.set(f,m))),t.forEach(((f,m)=>c.set(f,new nB(m,l.get(f)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Uu();let s=new bt(((l,c)=>l-c)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let m=r.get(d)||rr.empty();m=c.applyToLocalView(f,m),r.set(d,m);const g=(s.get(c.batchId)||Ye()).add(d);s=s.insert(c.batchId,g)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,m=d.value,g=$k();m.forEach((v=>{if(!o.has(v)){const I=Yk(t.get(v),r.get(v));I!==null&&g.set(v,I),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,g))}return ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ie.resolve(la());let c=Yu,d=o;return l.next((f=>ie.forEach(f,((m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(m)?ie.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{d=d.insert(m,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ye()))).next((m=>({batchId:c,changes:Bk(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((r=>{let s=Cu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Cu();return this.indexManager.getCollectionParents(e,o).next((c=>ie.forEach(c,(d=>{const f=(function(g,v){return new wc(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((m=>{m.forEach(((g,v)=>{l=l.insert(g,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((d,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,Tn.newInvalidDocument(m)))}));let c=Cu();return l.forEach(((d,f)=>{const m=o.get(d);m!==void 0&&zu(m.mutation,f,rr.empty(),Et.now()),hm(t,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:vs(s.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:G9(s.bundledQuery),readTime:vs(s.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(){this.overlays=new bt(Ne.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=la();return ie.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=la(),o=t.length+1,l=new Ne(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new bt(((f,m)=>f-m));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=la(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=la(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,m)=>c.set(f,m))),!(c.size()>=s)););return ie.resolve(c)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new T9(t,r));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.Qr=new Qt(en.$r),this.Ur=new Qt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new en(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new en(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ne(new mt([])),r=new en(t,e),s=new en(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new mt([])),r=new en(t,e),s=new en(t,e+1);let o=Ye();return this.Ur.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new en(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(en.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new S9(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Zr=this.Zr.add(new en(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?fw:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new en(t,0),s=new en(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(l=>{const c=this.Xr(l.Yr);o.push(c)})),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qt(Qe);return t.forEach((s=>{const o=new en(s,0),l=new en(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(c=>{r=r.add(c.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const l=new en(new Ne(o),0);let c=new Qt(Qe);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(d.Yr)),!0)}),l),ie.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){lt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(s=>{const o=new en(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new en(t,0),s=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.ri=e,this.docs=(function(){return new bt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=fi();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Tn.newInvalidDocument(s))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=fi();const l=t.path,c=new Ne(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||V5(L5(m),r)<=0||(s.has(m.key)||hm(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Le(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new cB(this)}getSize(e){return ie.resolve(this.size)}}class cB extends tB{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.persistence=e,this.si=new Da((t=>gw(t)),yw),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new Sw,this.targetCount=0,this.ai=sc.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new sc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ie.waitFor(o).next((()=>s))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t){this.ui={},this.overlays={},this.ci=new am(0),this.li=!1,this.li=!0,this.hi=new oB,this.referenceDelegate=e(this),this.Pi=new uB(this),this.indexManager=new K9,this.remoteDocumentCache=(function(s){return new lB(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new q9(t),this.Ii=new sB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new aB(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const s=new dB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class dB extends F5{constructor(e){super(),this.currentSequenceNumber=e}}class Tw{constructor(e){this.persistence=e,this.Ri=new Sw,this.Vi=null}static mi(e){return new Tw(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const s=Ne.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pp{constructor(e,t){this.persistence=e,this.pi=new Da((r=>B5(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=eB(this,t)}static mi(e,t){return new pp(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?ie.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((c=>{c||(r++,o.removeEntry(l,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=If(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ie.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ye(),s=Ye();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Iw(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return t4()?8:U5(Cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new hB;return this.Ss(e,t,l).next((c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(bl()<=Ke.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(bl()<=Ke.DEBUG&&Te("QueryEngine","Query:",Al(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(bl()<=Ke.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_s(t))):ie.resolve())}ys(e,t){if(Wx(t))return ie.resolve(null);let r=_s(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=dp(t,null,"F"),r=_s(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ye(...o);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((d=>{const f=this.Ds(t,c);return this.Cs(t,f,l,d.readTime)?this.ys(e,dp(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,r,s){return Wx(t)||s.isEqual(Fe.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,s)?ie.resolve(null):(bl()<=Ke.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Al(t)),this.vs(e,l,t,M5(s,Yu)).next((c=>c)))}))}Ds(e,t){let r=new Qt(Uk(e));return t.forEach(((s,o)=>{hm(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return bl()<=Ke.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Al(t)),this.ps.getDocumentsMatchingQuery(e,t,po.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="LocalStore",pB=3e8;class mB{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new bt(Qe),this.xs=new Da((o=>gw(o)),yw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rB(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function gB(n,e,t,r){return new mB(n,e,t,r)}async function dP(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let d=Ye();for(const f of s){l.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function yB(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,m){const g=f.batch,v=g.keys();let I=ie.resolve();return v.forEach((b=>{I=I.next((()=>m.getEntry(d,b))).next((x=>{const R=f.docVersions.get(b);lt(R!==null,48541),x.version.compareTo(R)<0&&(g.applyToRemoteDocument(x,f),x.isValidDocument()&&(x.setReadTime(f.commitVersion),m.addEntry(x)))}))})),I.next((()=>c.mutationQueue.removeMutationBatch(d,g)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let d=Ye();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function hP(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _B(n,e){const t=Be(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach(((m,g)=>{const v=s.get(g);if(!v)return;c.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(o,m.addedDocuments,g))));let I=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(fn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),s=s.insert(g,I),(function(x,R,L){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=pB?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(v,I,m)&&c.push(t.Pi.updateTargetData(o,I))}));let d=fi(),f=Ye();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),c.push(vB(o,l,e.documentUpdates).next((m=>{d=m.ks,f=m.qs}))),!r.isEqual(Fe.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next((g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(m)}return ie.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function vB(n,e,t){let r=Ye(),s=Ye();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=fi();return t.forEach(((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Fe.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):Te(xw,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function wB(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=fw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function EB(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,ie.resolve(s)):t.Pi.allocateTargetId(r).next((l=>(s=new so(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function X_(n,e,t){const r=Be(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!vc(l))throw l;Te(xw,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function r0(n,e,t){const r=Be(n);let s=Fe.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,m){const g=Be(d),v=g.xs.get(m);return v!==void 0?ie.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,m)})(r,l,_s(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?s:Fe.min(),t?o:Ye()))).next((c=>(SB(r,a9(e),c),{documents:c,Qs:o})))))}function SB(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class s0{constructor(){this.activeTargetIds=f9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TB{constructor(){this.Mo=new s0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new s0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="ConnectivityMonitor";class o0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(i0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(i0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function J_(){return df===null?df=(function(){return 268435456+Math.round(2147483648*Math.random())})():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="RestConnection",xB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===lp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const l=J_(),c=this.zo(e,t.toUriEncodedString());Te($y,`Sending RPC '${e}' ${l}:`,c,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(c),m=bs(f);return this.Jo(e,c,d,r,m).then((g=>(Te($y,`Received RPC '${e}' ${l}: `,g),g)),(g=>{throw Zl($y,`RPC '${e}' ${l} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,t,r,s,o,l){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=xB[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class bB extends CB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const l=J_();return new Promise(((c,d)=>{const f=new fk;f.setWithCredentials(!0),f.listenOnce(pk.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Tf.NO_ERROR:const g=f.getResponseJson();Te(vn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(g)),c(g);break;case Tf.TIMEOUT:Te(vn,`RPC '${e}' ${l} timed out`),d(new we(re.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const v=f.getStatus();if(Te(vn,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const b=I?.error;if(b&&b.status&&b.message){const x=(function(L){const V=L.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(V)>=0?V:re.UNKNOWN})(b.status);d(new we(x,b.message))}else d(new we(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new we(re.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Te(vn,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(s);Te(vn,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",m,r,15)}))}T_(e,t,r){const s=J_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=yk(),c=gk(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");Te(vn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const g=l.createWebChannel(m,d);this.I_(g);let v=!1,I=!1;const b=new RB({Yo:R=>{I?Te(vn,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(v||(Te(vn,`Opening RPC '${e}' stream ${s} transport.`),g.open(),v=!0),Te(vn,`RPC '${e}' stream ${s} sending:`,R),g.send(R))},Zo:()=>g.close()}),x=(R,L,V)=>{R.listen(L,(U=>{try{V(U)}catch(W){setTimeout((()=>{throw W}),0)}}))};return x(g,xu.EventType.OPEN,(()=>{I||(Te(vn,`RPC '${e}' stream ${s} transport opened.`),b.o_())})),x(g,xu.EventType.CLOSE,(()=>{I||(I=!0,Te(vn,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(g))})),x(g,xu.EventType.ERROR,(R=>{I||(I=!0,Zl(vn,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),b.a_(new we(re.UNAVAILABLE,"The operation could not be completed")))})),x(g,xu.EventType.MESSAGE,(R=>{if(!I){const L=R.data[0];lt(!!L,16349);const V=L,U=V?.error||V[0]?.error;if(U){Te(vn,`RPC '${e}' stream ${s} received error:`,U);const W=U.status;let Y=(function(A){const N=Bt[A];if(N!==void 0)return Zk(N)})(W),X=U.message;Y===void 0&&(Y=re.INTERNAL,X="Unknown error status: "+W+" with message "+U.message),I=!0,b.a_(new we(Y,X)),g.close()}else Te(vn,`RPC '${e}' stream ${s} received:`,L),b.u_(L)}})),x(c,mk.STAT_EVENT,(R=>{R.stat===U_.PROXY?Te(vn,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===U_.NOPROXY&&Te(vn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Wy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n){return new N9(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="PersistentStream";class pP{constructor(e,t,r,s,o,l,c,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fP(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new we(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(a0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(a0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class AB extends pP{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=M9(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Fe.min():l.readTime?vs(l.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Y_(this.serializer),t.addTarget=(function(o,l){let c;const d=l.target;if(c=H_(d)?{documents:j9(o,d)}:{query:F9(o,d).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=nP(o,l.resumeToken);const f=G_(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(Fe.min())>0){c.readTime=fp(o,l.snapshotVersion.toTimestamp());const f=G_(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const r=z9(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Y_(this.serializer),t.removeTarget=e,this.q_(t)}}class kB extends pP{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=V9(e.writeResults,e.commitTime),r=vs(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Y_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>L9(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{}class NB extends PB{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new we(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,K_(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(re.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,K_(t,r),s,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(re.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class DB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class OB{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Oa(this)&&(Te(Sa,"Restarting streams for network reachability change."),await(async function(d){const f=Be(d);f.Ea.add(4),await Ed(f),f.Ra.set("Unknown"),f.Ea.delete(4),await ym(f)})(this))}))})),this.Ra=new DB(r,s)}}async function ym(n){if(Oa(n))for(const e of n.da)await e(!0)}async function Ed(n){for(const e of n.da)await e(!1)}function mP(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Aw(t)?bw(t):Ec(t).O_()&&Rw(t,e))}function Cw(n,e){const t=Be(n),r=Ec(t);t.Ia.delete(e),r.O_()&&gP(t,e),t.Ia.size===0&&(r.O_()?r.L_():Oa(t)&&t.Ra.set("Unknown"))}function Rw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ec(n).Y_(e)}function gP(n,e){n.Va.Ue(e),Ec(n).Z_(e)}function bw(n){n.Va=new b9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ec(n).start(),n.Ra.ua()}function Aw(n){return Oa(n)&&!Ec(n).x_()&&n.Ia.size>0}function Oa(n){return Be(n).Ea.size===0}function yP(n){n.Va=void 0}async function MB(n){n.Ra.set("Online")}async function LB(n){n.Ia.forEach(((e,t)=>{Rw(n,e)}))}async function VB(n,e){yP(n),Aw(n)?(n.Ra.ha(e),bw(n)):n.Ra.set("Unknown")}async function jB(n,e,t){if(n.Ra.set("Online"),e instanceof tP&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(r){Te(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mp(n,r)}else if(e instanceof Rf?n.Va.Ze(e):e instanceof eP?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await hP(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,f)=>{const m=o.Ia.get(d);if(!m)return;o.Ia.set(d,m.withResumeToken(fn.EMPTY_BYTE_STRING,m.snapshotVersion)),gP(o,d);const g=new so(m.target,d,f,m.sequenceNumber);Rw(o,g)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){Te(Sa,"Failed to raise snapshot:",r),await mp(n,r)}}async function mp(n,e,t){if(!vc(e))throw e;n.Ea.add(1),await Ed(n),n.Ra.set("Offline"),t||(t=()=>hP(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(Sa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ym(n)}))}function _P(n,e){return e().catch((t=>mp(n,t,e)))}async function _m(n){const e=Be(n),t=_o(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fw;for(;FB(e);)try{const s=await wB(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,UB(e,s)}catch(s){await mp(e,s)}vP(e)&&wP(e)}function FB(n){return Oa(n)&&n.Ta.length<10}function UB(n,e){n.Ta.push(e);const t=_o(n);t.O_()&&t.X_&&t.ea(e.mutations)}function vP(n){return Oa(n)&&!_o(n).x_()&&n.Ta.length>0}function wP(n){_o(n).start()}async function zB(n){_o(n).ra()}async function BB(n){const e=_o(n);for(const t of n.Ta)e.ea(t.mutations)}async function $B(n,e,t){const r=n.Ta.shift(),s=vw.from(r,e,t);await _P(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await _m(n)}async function WB(n,e){e&&_o(n).X_&&await(async function(r,s){if((function(l){return x9(l)&&l!==re.ABORTED})(s.code)){const o=r.Ta.shift();_o(r).B_(),await _P(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await _m(r)}})(n,e),vP(n)&&wP(n)}async function l0(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Te(Sa,"RemoteStore received new credentials");const r=Oa(t);t.Ea.add(3),await Ed(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ym(t)}async function HB(n,e){const t=Be(n);e?(t.Ea.delete(2),await ym(t)):e||(t.Ea.add(2),await Ed(t),t.Ra.set("Unknown"))}function Ec(n){return n.ma||(n.ma=(function(t,r,s){const o=Be(t);return o.sa(),new AB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:MB.bind(null,n),t_:LB.bind(null,n),r_:VB.bind(null,n),H_:jB.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Aw(n)?bw(n):n.Ra.set("Unknown")):(await n.ma.stop(),yP(n))}))),n.ma}function _o(n){return n.fa||(n.fa=(function(t,r,s){const o=Be(t);return o.sa(),new kB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:zB.bind(null,n),r_:WB.bind(null,n),ta:BB.bind(null,n),na:$B.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await _m(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(Sa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new kw(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pw(n,e){if(hi("AsyncQueue",`${e}: ${n}`),vc(n))return new we(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=Cu(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.ga=new bt(Ne.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ic{constructor(e,t,r,s,o,l,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new ic(e,t,Ul.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class GB{constructor(){this.queries=u0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Be(t),o=s.queries;s.queries=u0(),o.forEach(((l,c)=>{for(const d of c.Sa)d.onError(r)}))})(this,new we(re.ABORTED,"Firestore shutting down"))}}function u0(){return new Da((n=>Fk(n)),dm)}async function EP(n,e){const t=Be(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new qB,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=Pw(l,`Initialization of query '${Al(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Nw(t)}async function SP(n,e){const t=Be(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function KB(n,e){const t=Be(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(s)&&(r=!0);l.wa=s}}r&&Nw(t)}function QB(n,e,t){const r=Be(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function Nw(n){n.Ca.forEach((e=>{e.next()}))}var Z_,d0;(d0=Z_||(Z_={})).Ma="default",d0.Cache="cache";class TP{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Z_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.key=e}}class xP{constructor(e){this.key=e}}class YB{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=Uk(e),this.tu=new Ul(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new c0,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,g)=>{const v=s.get(m),I=hm(this.query,g)?g:null,b=!!v&&this.mutatedKeys.has(v.key),x=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let R=!1;v&&I?v.data.isEqual(I.data)?b!==x&&(r.track({type:3,doc:I}),R=!0):this.su(v,I)||(r.track({type:2,doc:I}),R=!0,(d&&this.eu(I,d)>0||f&&this.eu(I,f)<0)&&(c=!0)):!v&&I?(r.track({type:0,doc:I}),R=!0):v&&!I&&(r.track({type:1,doc:v}),R=!0,(d||f)&&(c=!0)),R&&(I?(l=l.add(I),o=x?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,g)=>(function(I,b){const x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:R})}};return x(I)-x(b)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new ic(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new xP(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new IP(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dw="SyncEngine";class XB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JB{constructor(e){this.key=e,this.hu=!1}}class ZB{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Da((c=>Fk(c)),dm),this.Iu=new Map,this.Eu=new Set,this.du=new bt(Ne.comparator),this.Au=new Map,this.Ru=new Sw,this.Vu={},this.mu=new Map,this.fu=sc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function e$(n,e,t=!0){const r=PP(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await CP(r,e,t,!0),s}async function t$(n,e){const t=PP(n);await CP(t,e,!0,!1)}async function CP(n,e,t,r){const s=await EB(n.localStore,_s(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await n$(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&mP(n.remoteStore,s),c}async function n$(n,e,t,r,s){n.pu=(g,v,I)=>(async function(x,R,L,V){let U=R.view.ru(L);U.Cs&&(U=await r0(x.localStore,R.query,!1).then((({documents:k})=>R.view.ru(k,U))));const W=V&&V.targetChanges.get(R.targetId),Y=V&&V.targetMismatches.get(R.targetId)!=null,X=R.view.applyChanges(U,x.isPrimaryClient,W,Y);return f0(x,R.targetId,X.au),X.snapshot})(n,g,v,I);const o=await r0(n.localStore,e,!0),l=new YB(e,o.Qs),c=l.ru(o.documents),d=wd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=l.applyChanges(c,n.isPrimaryClient,d);f0(n,t,f.au);const m=new XB(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function r$(n,e,t){const r=Be(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!dm(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await X_(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Cw(r.remoteStore,s.targetId),ev(r,s.targetId)})).catch(_c)):(ev(r,s.targetId),await X_(r.localStore,s.targetId,!0))}async function s$(n,e){const t=Be(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Cw(t.remoteStore,r.targetId))}async function i$(n,e,t){const r=h$(n);try{const s=await(function(l,c){const d=Be(l),f=Et.now(),m=c.reduce(((I,b)=>I.add(b.key)),Ye());let g,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let b=fi(),x=Ye();return d.Ns.getEntries(I,m).next((R=>{b=R,b.forEach(((L,V)=>{V.isValidDocument()||(x=x.add(L))}))})).next((()=>d.localDocuments.getOverlayedDocuments(I,b))).next((R=>{g=R;const L=[];for(const V of c){const U=w9(V,g.get(V.key).overlayedDocument);U!=null&&L.push(new xo(V.key,U,Pk(U.value.mapValue),jr.exists(!0)))}return d.mutationQueue.addMutationBatch(I,f,L,c)})).next((R=>{v=R;const L=R.applyToLocalDocumentSet(g,x);return d.documentOverlayCache.saveOverlays(I,R.batchId,L)}))})).then((()=>({batchId:v.batchId,changes:Bk(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,c,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new bt(Qe)),f=f.insert(c,d),l.Vu[l.currentUser.toKey()]=f})(r,s.batchId,t),await Sd(r,s.changes),await _m(r.remoteStore)}catch(s){const o=Pw(s,"Failed to persist write");t.reject(o)}}async function RP(n,e){const t=Be(n);try{const r=await _B(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?lt(l.hu,14607):s.removedDocuments.size>0&&(lt(l.hu,42227),l.hu=!1))})),await Sd(t,r,e)}catch(r){await _c(r)}}function h0(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const d=Be(l);d.onlineState=c;let f=!1;d.queries.forEach(((m,g)=>{for(const v of g.Sa)v.va(c)&&(f=!0)})),f&&Nw(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function o$(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new bt(Ne.comparator);l=l.insert(o,Tn.newNoDocument(o,Fe.min()));const c=Ye().add(o),d=new mm(Fe.min(),new Map,new bt(Qe),l,c);await RP(r,d),r.du=r.du.remove(o),r.Au.delete(e),Ow(r)}else await X_(r.localStore,e,!1).then((()=>ev(r,e,t))).catch(_c)}async function a$(n,e){const t=Be(n),r=e.batch.batchId;try{const s=await yB(t.localStore,e);AP(t,r,null),bP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Sd(t,s)}catch(s){await _c(s)}}async function l$(n,e,t){const r=Be(n);try{const s=await(function(l,c){const d=Be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return d.mutationQueue.lookupMutationBatch(f,c).next((g=>(lt(g!==null,37113),m=g.keys(),d.mutationQueue.removeMutationBatch(f,g)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>d.localDocuments.getDocuments(f,m)))}))})(r.localStore,e);AP(r,e,t),bP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Sd(r,s)}catch(s){await _c(s)}}function bP(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function AP(n,e,t){const r=Be(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function ev(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||kP(n,r)}))}function kP(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Cw(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ow(n))}function f0(n,e,t){for(const r of t)r instanceof IP?(n.Ru.addReference(r.key,e),c$(n,r)):r instanceof xP?(Te(Dw,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||kP(n,r.key)):Le(19791,{wu:r})}function c$(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Te(Dw,"New document in limbo: "+t),n.Eu.add(r),Ow(n))}function Ow(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ne(mt.fromString(e)),r=n.fu.next();n.Au.set(r,new JB(t)),n.du=n.du.insert(t,r),mP(n.remoteStore,new so(_s(um(t.path)),r,"TargetPurposeLimboResolution",am.ce))}}async function Sd(n,e,t){const r=Be(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,d)=>{l.push(r.pu(d,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const m=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(f){s.push(f);const m=Iw.As(d.targetId,f);o.push(m)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(d,f){const m=Be(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>ie.forEach(f,(v=>ie.forEach(v.Es,(I=>m.persistence.referenceDelegate.addReference(g,v.targetId,I))).next((()=>ie.forEach(v.ds,(I=>m.persistence.referenceDelegate.removeReference(g,v.targetId,I)))))))))}catch(g){if(!vc(g))throw g;Te(xw,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const I=m.Ms.get(v),b=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(v,x)}}})(r.localStore,o))}async function u$(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Te(Dw,"User change. New user:",e.toKey());const r=await dP(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((d=>{d.reject(new we(re.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sd(t,r.Ls)}}function d$(n,e){const t=Be(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let s=Ye();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const c=t.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function PP(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o$.bind(null,e),e.Pu.H_=KB.bind(null,e.eventManager),e.Pu.yu=QB.bind(null,e.eventManager),e}function h$(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l$.bind(null,e),e}class gp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return gB(this.persistence,new fB,e.initialUser,this.serializer)}Cu(e){return new uP(Tw.mi,this.serializer)}Du(e){return new TB}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gp.provider={build:()=>new gp};class f$ extends gp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){lt(this.persistence.referenceDelegate instanceof pp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new J9(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new uP((r=>pp.mi(r,t)),this.serializer)}}class tv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u$.bind(null,this.syncEngine),await HB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GB})()}createDatastore(e){const t=gm(e.databaseInfo.databaseId),r=(function(o){return new bB(o)})(e.databaseInfo);return(function(o,l,c,d){return new NB(o,l,c,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,c){return new OB(r,s,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>h0(this.syncEngine,t,0)),(function(){return o0.v()?new o0:new IB})())}createSyncEngine(e,t){return(function(s,o,l,c,d,f,m){const g=new ZB(s,o,l,c,d,f);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Be(t);Te(Sa,"RemoteStore shutting down."),r.Ea.add(5),await Ed(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tv.provider={build:()=>new tv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="FirestoreClient";class p${constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=wn.UNAUTHENTICATED,this.clientId=hw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{Te(vo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Te(vo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Pw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Hy(n,e){n.asyncQueue.verifyOperationInProgress(),Te(vo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await dP(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function p0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await m$(n);Te(vo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>l0(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>l0(e.remoteStore,s))),n._onlineComponents=e}async function m$(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(vo,"Using user provided OfflineComponentProvider");try{await Hy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Zl("Error using user provided cache. Falling back to memory cache: "+t),await Hy(n,new gp)}}else Te(vo,"Using default OfflineComponentProvider"),await Hy(n,new f$(void 0));return n._offlineComponents}async function DP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(vo,"Using user provided OnlineComponentProvider"),await p0(n,n._uninitializedComponentsProvider._online)):(Te(vo,"Using default OnlineComponentProvider"),await p0(n,new tv))),n._onlineComponents}function g$(n){return DP(n).then((e=>e.syncEngine))}async function nv(n){const e=await DP(n),t=e.eventManager;return t.onListen=e$.bind(null,e.syncEngine),t.onUnlisten=r$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=t$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=s$.bind(null,e.syncEngine),t}function y$(n,e,t={}){const r=new lo;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,d,f){const m=new NP({next:v=>{m.Nu(),l.enqueueAndForget((()=>SP(o,g)));const I=v.docs.has(c);!I&&v.fromCache?f.reject(new we(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&d&&d.source==="server"?f.reject(new we(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new TP(um(c.path),m,{includeMetadataChanges:!0,qa:!0});return EP(o,g)})(await nv(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="firestore.googleapis.com",g0=!0;class y0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MP,this.ssl=g0}else this.host=e.host,this.ssl=e.ssl??g0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y9)throw new we(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OP(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new I5;switch(r.type){case"firstParty":return new b5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=m0.get(t);r&&(Te("ComponentProvider","Removing Datastore"),m0.delete(t),r.terminate())})(this),Promise.resolve()}}function _$(n,e,t,r={}){n=Vr(n,vm);const s=bs(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Yp(`https://${c}`),Xp("Firestore",!0)),o.host!==MP&&o.host!==c&&Zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:c,ssl:s,emulatorOptions:r};if(!ci(d,l)&&(n._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=wn.MOCK_USER;else{f=Lv(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new we(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new wn(g)}n._authCredentials=new x5(new vk(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Co(this.firestore,e,this._query)}}class Nt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(_d(t,Nt._jsonSchema))return new Nt(e,r||null,new Ne(mt.fromString(t.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Wt("string",Nt._jsonSchemaVersion),referencePath:Wt("string")};class co extends Co{constructor(e,t,r){super(e,t,um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Ne(e))}withConverter(e){return new co(this.firestore,e,this._path)}}function rv(n,e,...t){if(n=dt(n),wk("collection","path",e),n instanceof vm){const r=mt.fromString(e,...t);return kx(r),new co(n,null,r)}{if(!(n instanceof Nt||n instanceof co))throw new we(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return kx(r),new co(n.firestore,null,r)}}function ii(n,e,...t){if(n=dt(n),arguments.length===1&&(e=hw.newId()),wk("doc","path",e),n instanceof vm){const r=mt.fromString(e,...t);return Ax(r),new Nt(n,null,new Ne(r))}{if(!(n instanceof Nt||n instanceof co))throw new we(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return Ax(r),new Nt(n.firestore,n instanceof co?n.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="AsyncQueue";class v0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fP(this,"async_queue_retry"),this._c=()=>{const r=Wy();r&&Te(_0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Wy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new lo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vc(e))throw e;Te(_0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",w0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=kw.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Le(47125,{Pc:w0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function w0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Ta extends vm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new v0,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v0(e),this._firestoreClient=void 0,await e}}}function v$(n,e){const t=typeof n=="object"?n:hd(),r=typeof n=="string"?n:lp,s=So(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Ov("firestore");o&&_$(s,...o)}return s}function Mw(n){if(n._terminated)throw new we(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||w$(n),n._firestoreClient}function w$(n){const e=n._freezeSettings(),t=(function(s,o,l,c){return new H5(s,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,OP(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new p$(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mr(fn.fromBase64String(e))}catch(t){throw new we(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mr(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_d(e,mr._jsonSchema))return mr.fromBase64String(e.bytes)}}mr._jsonSchemaVersion="firestore/bytes/1.0",mr._jsonSchema={type:Wt("string",mr._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ws._jsonSchemaVersion}}static fromJSON(e){if(_d(e,ws._jsonSchema))return new ws(e.latitude,e.longitude)}}ws._jsonSchemaVersion="firestore/geoPoint/1.0",ws._jsonSchema={type:Wt("string",ws._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_d(e,Es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Es(e.vectorValues);throw new we(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Es._jsonSchemaVersion="firestore/vectorValue/1.0",Es._jsonSchema={type:Wt("string",Es._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=/^__.*__$/;class S${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new vd(e,this.data,t,this.fieldTransforms)}}class LP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:n})}}class Em{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Em({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VP(this.Ac)&&E$.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gm(e)}Cc(e,t,r,s=!1){return new Em({Ac:e,methodName:t,Dc:r,path:hn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sm(n){const e=n._freezeSettings(),t=gm(n._databaseId);return new T$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jP(n,e,t,r,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);jw("Data must be an object, but it was:",l,r);const c=FP(r,l);let d,f;if(o.merge)d=new rr(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const v=sv(e,g,t);if(!l.contains(v))throw new we(re.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);zP(m,v)||m.push(v)}d=new rr(m),f=l.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,f=l.fieldTransforms;return new S$(new $n(c),d,f)}class Tm extends Td{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tm}}function I$(n,e,t){return new Em({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lw extends Td{_toFieldTransform(e){return new Qk(e.path,new td)}isEqual(e){return e instanceof Lw}}class Vw extends Td{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=I$(this,e,!0),r=this.vc.map((o=>Sc(o,t))),s=new rc(r);return new Qk(e.path,s)}isEqual(e){return e instanceof Vw&&ci(this.vc,e.vc)}}function x$(n,e,t,r){const s=n.Cc(1,e,t);jw("Data must be an object, but it was:",s,r);const o=[],l=$n.empty();Io(r,((d,f)=>{const m=Fw(e,d,t);f=dt(f);const g=s.yc(m);if(f instanceof Tm)o.push(m);else{const v=Sc(f,g);v!=null&&(o.push(m),l.set(m,v))}}));const c=new rr(o);return new LP(l,c,s.fieldTransforms)}function C$(n,e,t,r,s,o){const l=n.Cc(1,e,t),c=[sv(e,r,t)],d=[s];if(o.length%2!=0)throw new we(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)c.push(sv(e,o[v])),d.push(o[v+1]);const f=[],m=$n.empty();for(let v=c.length-1;v>=0;--v)if(!zP(f,c[v])){const I=c[v];let b=d[v];b=dt(b);const x=l.yc(I);if(b instanceof Tm)f.push(I);else{const R=Sc(b,x);R!=null&&(f.push(I),m.set(I,R))}}const g=new rr(f);return new LP(m,g,l.fieldTransforms)}function R$(n,e,t,r=!1){return Sc(t,n.Cc(r?4:3,e))}function Sc(n,e){if(UP(n=dt(n)))return jw("Unsupported field value:",e,n),FP(n,e);if(n instanceof Td)return(function(r,s){if(!VP(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const c of r){let d=Sc(c,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return p9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Et.fromDate(r);return{timestampValue:fp(s.serializer,o)}}if(r instanceof Et){const o=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fp(s.serializer,o)}}if(r instanceof ws)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mr)return{bytesValue:nP(s.serializer,r._byteString)};if(r instanceof Nt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ew(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Es)return(function(l,c){return{mapValue:{fields:{[Ak]:{stringValue:kk},[cp]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return _w(c.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${om(r)}`)})(n,e)}function FP(n,e){const t={};return Tk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(n,((r,s)=>{const o=Sc(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function UP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof ws||n instanceof mr||n instanceof Nt||n instanceof Td||n instanceof Es)}function jw(n,e,t){if(!UP(t)||!Ek(t)){const r=om(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function sv(n,e,t){if((e=dt(e))instanceof wm)return e._internalPath;if(typeof e=="string")return Fw(n,e);throw yp("Field path arguments must be of type string or ",n,!1,void 0,t)}const b$=new RegExp("[~\\*/\\[\\]]");function Fw(n,e,t){if(e.search(b$)>=0)throw yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wm(...e.split("."))._internalPath}catch{throw yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yp(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new we(re.INVALID_ARGUMENT,c+n+d)}function zP(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Im("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class A$ extends BP{data(){return super.data()}}function Im(n,e){return typeof e=="string"?Fw(n,e):e instanceof wm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uw{}class zw extends Uw{}function P$(n,e,...t){let r=[];e instanceof Uw&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((d=>d instanceof Bw)).length,c=o.filter((d=>d instanceof xm)).length;if(l>1||l>0&&c>0)throw new we(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class xm extends zw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new xm(e,t,r)}_apply(e){const t=this._parse(e);return $P(e._query,t),new Co(e.firestore,e.converter,q_(e._query,t))}_parse(e){const t=Sm(e.firestore);return(function(o,l,c,d,f,m,g){let v;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new we(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){T0(g,m);const b=[];for(const x of g)b.push(S0(d,o,x));v={arrayValue:{values:b}}}else v=S0(d,o,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||T0(g,m),v=R$(c,l,g,m==="in"||m==="not-in");return $t.create(f,m,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function N$(n,e,t){const r=e,s=Im("where",n);return xm._create(s,r,t)}class Bw extends Uw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bw(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Wr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const c=o.getFlattenedFilters();for(const d of c)$P(l,d),l=q_(l,d)})(e._query,t),new Co(e.firestore,e.converter,q_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $w extends zw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $w(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new we(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ed(o,l)})(e._query,this._field,this._direction);return new Co(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new wc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function D$(n,e="asc"){const t=e,r=Im("orderBy",n);return $w._create(r,t)}class Ww extends zw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ww(e,t,r)}_apply(e){return new Co(e.firestore,e.converter,dp(e._query,this._limit,this._limitType))}}function O$(n){return Ww._create("limit",n,"F")}function S0(n,e,t){if(typeof(t=dt(t))=="string"){if(t==="")throw new we(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jk(e)&&t.indexOf("/")!==-1)throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mt.fromString(t));if(!Ne.isDocumentKey(r))throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jx(n,new Ne(r))}if(t instanceof Nt)return jx(n,t._key);throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${om(t)}.`)}function T0(n,e){if(!Array.isArray(n)||n.length===0)throw new we(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $P(n,e){const t=(function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class M${convertValue(e,t="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Io(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[cp].arrayValue?.values?.map((r=>Vt(r.doubleValue)));return new Es(t)}convertGeoPoint(e){return new ws(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const t=mo(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);lt(lP(r),9688,{name:e});const s=new Ju(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return s.isEqual(t)||hi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends BP{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Im("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ha._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:Wt("string",ha._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class bf extends ha{data(e={}){return super.data(e)}}class zl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new bu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new bf(this._firestore,this._userDataWriter,r.key,r,new bu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const d=new bf(s._firestore,s._userDataWriter,c.doc.key,c.doc,new bu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const d=new bf(s._firestore,s._userDataWriter,c.doc.key,c.doc,new bu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:L$(c.type),doc:d,oldIndex:f,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function L$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(n){n=Vr(n,Nt);const e=Vr(n.firestore,Ta);return y$(Mw(e),n._key).then((t=>KP(e,n,t)))}zl._jsonSchemaVersion="firestore/querySnapshot/1.0",zl._jsonSchema={type:Wt("string",zl._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class HP extends M${constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}function qP(n,e,t){n=Vr(n,Nt);const r=Vr(n.firestore,Ta),s=WP(n.converter,e,t);return Hw(r,[jP(Sm(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,jr.none())])}function iv(n,e,t,...r){n=Vr(n,Nt);const s=Vr(n.firestore,Ta),o=Sm(s);let l;return l=typeof(e=dt(e))=="string"||e instanceof wm?C$(o,"updateDoc",n._key,e,t,r):x$(o,"updateDoc",n._key,e),Hw(s,[l.toMutation(n._key,jr.exists(!0))])}function V$(n,e){const t=Vr(n.firestore,Ta),r=ii(n),s=WP(n.converter,e);return Hw(t,[jP(Sm(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,jr.exists(!1))]).then((()=>r))}function GP(n,...e){n=dt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||E0(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(E0(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,l,c;if(n instanceof Nt)l=Vr(n.firestore,Ta),c=um(n._key.path),o={next:d=>{e[r]&&e[r](KP(l,n,d))},error:e[r+1],complete:e[r+2]};else{const d=Vr(n,Co);l=Vr(d.firestore,Ta),c=d._query;const f=new HP(l);o={next:m=>{e[r]&&e[r](new zl(l,f,d,m))},error:e[r+1],complete:e[r+2]},k$(n._query)}return(function(f,m,g,v){const I=new NP(v),b=new TP(m,I,g);return f.asyncQueue.enqueueAndForget((async()=>EP(await nv(f),b))),()=>{I.Nu(),f.asyncQueue.enqueueAndForget((async()=>SP(await nv(f),b)))}})(Mw(l),c,s,o)}function Hw(n,e){return(function(r,s){const o=new lo;return r.asyncQueue.enqueueAndForget((async()=>i$(await g$(r),s,o))),o.promise})(Mw(n),e)}function KP(n,e,t){const r=t.docs.get(e._key),s=new HP(n);return new ha(n,s,e._key,r,new bu(t.hasPendingWrites,t.fromCache),e.converter)}function qw(){return new Lw("serverTimestamp")}function j$(...n){return new Vw("arrayUnion",n)}(function(e,t=!0){(function(s){yc=s})(To),_r(new or("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Ta(new C5(r.getProvider("auth-internal")),new A5(l,r.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new we(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ju(f.options.projectId,m)})(l,s),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),xn(xx,Cx,e),xn(xx,Cx,"esm2020")})();function QP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F$=QP,YP=new ka("auth","Firebase",QP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new Zp("@firebase/auth");function U$(n,...e){_p.logLevel<=Ke.WARN&&_p.warn(`Auth (${To}): ${n}`,...e)}function Af(n,...e){_p.logLevel<=Ke.ERROR&&_p.error(`Auth (${To}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n,...e){throw Kw(n,...e)}function Fr(n,...e){return Kw(n,...e)}function Gw(n,e,t){const r={...F$(),[e]:t};return new ka("auth","Firebase",r).create(e,{appName:n.name})}function oi(n){return Gw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z$(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&wr(n,"argument-error"),Gw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YP.create(n,...e)}function Me(n,e,...t){if(!n)throw Kw(e,...t)}function ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Af(e),new Error(e)}function pi(n,e){n||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(){return typeof self<"u"&&self.location?.href||""}function B$(){return I0()==="http:"||I0()==="https:"}function I0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B$()||JF()||"connection"in navigator)?navigator.onLine:!0}function W$(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=Vv()||bb()}get(){return $$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(n,e){pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G$=new xd(3e4,6e4);function Ro(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function _i(n,e,t,r,s={}){return JP(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=fc({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return XF()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&bs(n.emulatorConfig.host)&&(f.credentials="include"),XP.fetch()(await ZP(n,n.config.apiHost,t,c),f)})}async function JP(n,e,t){n._canInitEmulator=!1;const r={...H$,...e};try{const s=new Q$(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw hf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw hf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw hf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw hf(n,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Gw(n,m,f);wr(n,m)}}catch(s){if(s instanceof Hr)throw s;wr(n,"network-request-failed",{message:String(s)})}}async function Cd(n,e,t,r,s={}){const o=await _i(n,e,t,r,s);return"mfaPendingCredential"in o&&wr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function ZP(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?Qw(n.config,s):`${n.config.apiScheme}://${s}`;return q$.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function K$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),G$.get())})}}function hf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Fr(n,e,r);return s.customData._tokenResponse=t,s}function x0(n){return n!==void 0&&n.enterprise!==void 0}class Y${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return K$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function X$(n,e){return _i(n,"GET","/v2/recaptchaConfig",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J$(n,e){return _i(n,"POST","/v1/accounts:delete",e)}async function vp(n,e){return _i(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Z$(n,e=!1){const t=dt(n),r=await t.getIdToken(e),s=Yw(r);Me(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:Bu(qy(s.auth_time)),issuedAtTime:Bu(qy(s.iat)),expirationTime:Bu(qy(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function qy(n){return Number(n)*1e3}function Yw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Af("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yf(t);return s?JSON.parse(s):(Af("Failed to decode base64 JWT payload"),null)}catch(s){return Af("Caught error parsing JWT payload as JSON",s?.toString()),null}}function C0(n){const e=Yw(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Hr&&eW(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function eW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wp(n){const e=n.auth,t=await n.getIdToken(),r=await oc(n,vp(e,{idToken:t}));Me(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?eN(s.providerUserInfo):[],l=rW(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=c?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new av(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function nW(n){const e=dt(n);await wp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rW(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function eN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sW(n,e){const t=await JP(n,{},async()=>{const r=fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await ZP(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:r};return n.emulatorConfig&&bs(n.emulatorConfig.host)&&(d.credentials="include"),XP.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function iW(n,e){return _i(n,"POST","/v2/accounts:revokeToken",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=C0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await sW(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Bl;return r&&(Me(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Me(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bl,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new tW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new av(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await oc(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Z$(this,e)}reload(){return nW(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await wp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(oi(this.auth));const e=await this.getIdToken();return await oc(this,J$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:I,providerData:b,stsTokenManager:x}=t;Me(g&&x,e,"internal-error");const R=Bl.fromJSON(this.name,x);Me(typeof g=="string",e,"internal-error"),Yi(r,e.name),Yi(s,e.name),Me(typeof v=="boolean",e,"internal-error"),Me(typeof I=="boolean",e,"internal-error"),Yi(o,e.name),Yi(l,e.name),Yi(c,e.name),Yi(d,e.name),Yi(f,e.name),Yi(m,e.name);const L=new Mr({uid:g,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:I,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:R,createdAt:f,lastLoginAt:m});return b&&Array.isArray(b)&&(L.providerData=b.map(V=>({...V}))),d&&(L._redirectEventId=d),L}static async _fromIdTokenResponse(e,t,r=!1){const s=new Bl;s.updateFromServerResponse(t);const o=new Mr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await wp(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Me(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?eN(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,c=new Bl;c.updateFromIdToken(r);const d=new Mr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new av(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;function ti(n){pi(n instanceof Function,"Expected a class definition");let e=R0.get(n);return e?(pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,R0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tN.type="NONE";const b0=tN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n,e,t){return`firebase:${n}:${e}:${t}`}class $l{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=kf(this.userKey,s.apiKey,o),this.fullPersistenceKey=kf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vp(this.auth,{idToken:e}).catch(()=>{});return t?Mr._fromGetAccountInfoResponse(this.auth,t,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new $l(ti(b0),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||ti(b0);const l=kf(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(l);if(m){let g;if(typeof m=="string"){const v=await vp(e,{idToken:m}).catch(()=>{});if(!v)break;g=await Mr._fromGetAccountInfoResponse(e,v,m)}else g=Mr._fromJSON(e,m);f!==o&&(c=g),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new $l(o,e,r):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new $l(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aN(e))return"Blackberry";if(lN(e))return"Webos";if(rN(e))return"Safari";if((e.includes("chrome/")||sN(e))&&!e.includes("edge/"))return"Chrome";if(oN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function nN(n=Cn()){return/firefox\//i.test(n)}function rN(n=Cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sN(n=Cn()){return/crios\//i.test(n)}function iN(n=Cn()){return/iemobile/i.test(n)}function oN(n=Cn()){return/android/i.test(n)}function aN(n=Cn()){return/blackberry/i.test(n)}function lN(n=Cn()){return/webos/i.test(n)}function Xw(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oW(n=Cn()){return Xw(n)&&!!window.navigator?.standalone}function aW(){return ZF()&&document.documentMode===10}function cN(n=Cn()){return Xw(n)||oN(n)||lN(n)||aN(n)||/windows phone/i.test(n)||iN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(n,e=[]){let t;switch(n){case"Browser":t=A0(Cn());break;case"Worker":t=`${A0(Cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${To}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cW(n,e={}){return _i(n,"GET","/v2/passwordPolicy",Ro(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=6;class dW{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??uW,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k0(this),this.idTokenSubscription=new k0(this),this.beforeStateQueue=new lW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ti(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $l.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vp(this,{idToken:e}),r=await Mr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=W$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(oi(this));const t=e?dt(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cW(this),t=new dW(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ka("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await iW(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ti(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await $l.create(this,[ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&U$(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bo(n){return dt(n)}class k0{constructor(e){this.auth=e,this.observer=null,this.addObserver=c4(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fW(n){Cm=n}function dN(n){return Cm.loadJS(n)}function pW(){return Cm.recaptchaEnterpriseScript}function mW(){return Cm.gapiScript}function gW(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class yW{constructor(){this.enterprise=new _W}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _W{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vW="recaptcha-enterprise",hN="NO_RECAPTCHA";class wW{constructor(e){this.type=vW,this.auth=bo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{X$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new Y$(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{c(d)})})}function s(o,l,c){const d=window.grecaptcha;x0(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(hN)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yW().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&x0(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=pW();d.length!==0&&(d+=c),dN(d).then(()=>{s(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function P0(n,e,t,r=!1,s=!1){const o=new wW(n);let l;if(s)l=hN;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function lv(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await P0(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await P0(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EW(n,e){const t=So(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ci(o,e??{}))return s;wr(s,"already-initialized")}return t.initialize({options:e})}function SW(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ti);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function TW(n,e,t){const r=bo(n);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=fN(e),{host:l,port:c}=IW(e),d=c===null?"":`:${c}`,f={url:`${o}//${l}${d}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(ci(f,r.config.emulator)&&ci(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,bs(l)?(Yp(`${o}//${l}${d}`),Xp("Auth",!0)):xW()}function fN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IW(n){const e=fN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:N0(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:N0(l)}}}function N0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xW(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,t){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function CW(n,e){return _i(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RW(n,e){return Cd(n,"POST","/v1/accounts:signInWithPassword",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bW(n,e){return Cd(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))}async function AW(n,e){return Cd(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends Jw{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new rd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new rd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lv(e,t,"signInWithPassword",RW);case"emailLink":return bW(e,{email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lv(e,r,"signUpPassword",CW);case"emailLink":return AW(e,{idToken:t,email:this._email,oobCode:this._password});default:wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n,e){return Cd(n,"POST","/v1/accounts:signInWithIdp",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW="http://localhost";class Ia extends Jw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new Ia(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Wl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Wl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wl(e,t)}buildRequest(){const e={requestUri:kW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NW(n){const e=Su(Tu(n)).link,t=e?Su(Tu(e)).deep_link_id:null,r=Su(Tu(n)).deep_link_id;return(r?Su(Tu(r)).link:null)||r||t||e||n}class Zw{constructor(e){const t=Su(Tu(e)),r=t.apiKey??null,s=t.oobCode??null,o=PW(t.mode??null);Me(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=NW(e);try{return new Zw(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this.providerId=Tc.PROVIDER_ID}static credential(e,t){return rd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Zw.parseLink(t);return Me(r,"argument-error"),rd._fromEmailAndCode(e,r.code,r.tenantId)}}Tc.PROVIDER_ID="password";Tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends eE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Rd{constructor(){super("facebook.com")}static credential(e){return Ia._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Rd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ia._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Xs.credential(t,r)}catch{return null}}}Xs.GOOGLE_SIGN_IN_METHOD="google.com";Xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Rd{constructor(){super("github.com")}static credential(e){return Ia._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.GITHUB_SIGN_IN_METHOD="github.com";to.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Rd{constructor(){super("twitter.com")}static credential(e,t){return Ia._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return no.credential(t,r)}catch{return null}}}no.TWITTER_SIGN_IN_METHOD="twitter.com";no.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DW(n,e){return Cd(n,"POST","/v1/accounts:signUp",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Mr._fromIdTokenResponse(e,r,s),l=D0(r);return new xa({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=D0(r);return new xa({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function D0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends Hr{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ep.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Ep(e,t,r,s)}}function pN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ep._fromErrorAndOperation(n,o,e,r):o})}async function OW(n,e,t=!1){const r=await oc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return xa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MW(n,e,t=!1){const{auth:r}=n;if(Nn(r.app))return Promise.reject(oi(r));const s="reauthenticate";try{const o=await oc(n,pN(r,s,e,n),t);Me(o.idToken,r,"internal-error");const l=Yw(o.idToken);Me(l,r,"internal-error");const{sub:c}=l;return Me(n.uid===c,r,"user-mismatch"),xa._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&wr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(n,e,t=!1){if(Nn(n.app))return Promise.reject(oi(n));const r="signIn",s=await pN(n,r,e),o=await xa._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function LW(n,e){return mN(bo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(n){const e=bo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VW(n,e,t){if(Nn(n.app))return Promise.reject(oi(n));const r=bo(n),l=await lv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DW).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&gN(n),d}),c=await xa._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function jW(n,e,t){return Nn(n.app)?Promise.reject(oi(n)):LW(dt(n),Tc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gN(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FW(n,e){return _i(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UW(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=dt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await oc(r,FW(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function zW(n,e,t,r){return dt(n).onIdTokenChanged(e,t,r)}function BW(n,e,t){return dt(n).beforeAuthStateChanged(e,t)}function yN(n,e,t,r){return dt(n).onAuthStateChanged(e,t,r)}function _N(n){return dt(n).signOut()}const Sp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sp,"1"),this.storage.removeItem(Sp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $W=1e3,WW=10;class wN extends vN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);aW()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,WW):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},$W)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wN.type="LOCAL";const HW=wN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN extends vN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}EN.type="SESSION";const SN=EN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Rm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async f=>f(t.origin,o)),d=await qW(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const f=tE("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){return window}function KW(n){Ss().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function QW(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YW(){return navigator?.serviceWorker?.controller||null}function XW(){return TN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="firebaseLocalStorageDb",JW=1,Tp="firebaseLocalStorage",xN="fbase_key";class bd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bm(n,e){return n.transaction([Tp],e?"readwrite":"readonly").objectStore(Tp)}function ZW(){const n=indexedDB.deleteDatabase(IN);return new bd(n).toPromise()}function cv(){const n=indexedDB.open(IN,JW);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Tp,{keyPath:xN})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Tp)?e(r):(r.close(),await ZW(),e(await cv()))})})}async function O0(n,e,t){const r=bm(n,!0).put({[xN]:e,value:t});return new bd(r).toPromise()}async function eH(n,e){const t=bm(n,!1).get(e),r=await new bd(t).toPromise();return r===void 0?null:r.value}function M0(n,e){const t=bm(n,!0).delete(e);return new bd(t).toPromise()}const tH=800,nH=3;class CN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>nH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rm._getInstance(XW()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QW(),!this.activeServiceWorker)return;this.sender=new GW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cv();return await O0(e,Sp,"1"),await M0(e,Sp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>O0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>eH(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>M0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=bm(s,!1).getAll();return new bd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CN.type="LOCAL";const rH=CN;new xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(n,e){return e?ti(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE extends Jw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sH(n){return mN(n.auth,new nE(n),n.bypassAuthState)}function iH(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),MW(t,new nE(n),n.bypassAuthState)}async function oH(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),OW(t,new nE(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sH;case"linkViaPopup":case"linkViaRedirect":return oH;case"reauthViaPopup":case"reauthViaRedirect":return iH;default:wr(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=new xd(2e3,1e4);async function lH(n,e,t){if(Nn(n.app))return Promise.reject(Fr(n,"operation-not-supported-in-this-environment"));const r=bo(n);z$(n,e,eE);const s=RN(r,t);return new ca(r,"signInViaPopup",e,s).executeNotNull()}class ca extends bN{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=tE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aH.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH="pendingRedirect",Pf=new Map;class uH extends bN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Pf.get(this.auth._key());if(!e){try{const r=await dH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Pf.set(this.auth._key(),e)}return this.bypassAuthState||Pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dH(n,e){const t=pH(e),r=fH(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function hH(n,e){Pf.set(n._key(),e)}function fH(n){return ti(n._redirectPersistence)}function pH(n){return kf(cH,n.config.apiKey,n.name)}async function mH(n,e,t=!1){if(Nn(n.app))return Promise.reject(oi(n));const r=bo(n),s=RN(r,e),l=await new uH(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=600*1e3;class yH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_H(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!AN(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gH&&this.cachedEventUids.clear(),this.cachedEventUids.has(L0(e))}saveEventToCache(e){this.cachedEventUids.add(L0(e)),this.lastProcessedEventTime=Date.now()}}function L0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function _H(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vH(n,e={}){return _i(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EH=/^https?/;async function SH(n){if(n.config.emulator)return;const{authorizedDomains:e}=await vH(n);for(const t of e)try{if(TH(t))return}catch{}wr(n,"unauthorized-domain")}function TH(n){const e=ov(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!EH.test(t))return!1;if(wH.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH=new xd(3e4,6e4);function V0(){const n=Ss().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xH(n){return new Promise((e,t)=>{function r(){V0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V0(),t(Fr(n,"network-request-failed"))},timeout:IH.get()})}if(Ss().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ss().gapi?.load)r();else{const s=gW("iframefcb");return Ss()[s]=()=>{gapi.load?r():t(Fr(n,"network-request-failed"))},dN(`${mW()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Nf=null,e})}let Nf=null;function CH(n){return Nf=Nf||xH(n),Nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=new xd(5e3,15e3),bH="__/auth/iframe",AH="emulator/auth/iframe",kH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NH(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Qw(e,AH):`https://${n.config.authDomain}/${bH}`,r={apiKey:e.apiKey,appName:n.name,v:To},s=PH.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${fc(r).slice(1)}`}async function DH(n){const e=await CH(n),t=Ss().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:NH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kH,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Fr(n,"network-request-failed"),c=Ss().setTimeout(()=>{o(l)},RH.get());function d(){Ss().clearTimeout(c),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MH=500,LH=600,VH="_blank",jH="http://localhost";class j0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FH(n,e,t,r=MH,s=LH){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d={...OH,width:r.toString(),height:s.toString(),top:o,left:l},f=Cn().toLowerCase();t&&(c=sN(f)?VH:t),nN(f)&&(e=e||jH,d.scrollbars="yes");const m=Object.entries(d).reduce((v,[I,b])=>`${v}${I}=${b},`,"");if(oW(f)&&c!=="_self")return UH(e||"",c),new j0(null);const g=window.open(e||"",c,m);Me(g,n,"popup-blocked");try{g.focus()}catch{}return new j0(g)}function UH(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH="__/auth/handler",BH="emulator/auth/handler",$H=encodeURIComponent("fac");async function F0(n,e,t,r,s,o){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:To,eventId:s};if(e instanceof eE){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",E_(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))l[m]=g}if(e instanceof Rd){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await n._getAppCheckToken(),f=d?`#${$H}=${encodeURIComponent(d)}`:"";return`${WH(n)}?${fc(c).slice(1)}${f}`}function WH({config:n}){return n.emulator?Qw(n,BH):`https://${n.authDomain}/${zH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="webStorageSupport";class HH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SN,this._completeRedirectFn=mH,this._overrideRedirectResult=hH}async _openPopup(e,t,r,s){pi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await F0(e,t,r,ov(),s);return FH(e,o,tE())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await F0(e,t,r,ov(),s);return KW(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(pi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await DH(e),r=new yH(e);return t.register("authEvent",s=>(Me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gy,{type:Gy},s=>{const o=s?.[0]?.[Gy];o!==void 0&&t(!!o),wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cN()||rN()||Xw()}}const qH=HH;var U0="@firebase/auth",z0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QH(n){_r(new or("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Me(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uN(n)},f=new hW(r,s,o,d);return SW(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_r(new or("auth-internal",e=>{const t=bo(e.getProvider("auth").getImmediate());return(r=>new GH(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(U0,z0,KH(n)),xn(U0,z0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=300,XH=Rb("authIdTokenMaxAge")||YH;let B0=null;const JH=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>XH)return;const s=t?.token;B0!==s&&(B0=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZH(n=hd()){const e=So(n,"auth");if(e.isInitialized())return e.getImmediate();const t=EW(n,{popupRedirectResolver:qH,persistence:[rH,HW,SN]}),r=Rb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=JH(o.toString());BW(t,l,()=>l(t.currentUser)),zW(t,c=>l(c))}}const s=xb("auth");return s&&TW(t,`http://${s}`),t}function e8(){return document.getElementsByTagName("head")?.[0]??document}fW({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Fr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",e8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QH("Browser");const kN="@firebase/installations",rE="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=1e4,NN=`w:${rE}`,DN="FIS_v2",t8="https://firebaseinstallations.googleapis.com/v1",n8=3600*1e3,r8="installations",s8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ca=new ka(r8,s8,i8);function ON(n){return n instanceof Hr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN({projectId:n}){return`${t8}/projects/${n}/installations`}function LN(n){return{token:n.token,requestStatus:2,expiresIn:a8(n.expiresIn),creationTime:Date.now()}}async function VN(n,e){const r=(await e.json()).error;return Ca.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function jN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function o8(n,{refreshToken:e}){const t=jN(n);return t.append("Authorization",l8(e)),t}async function FN(n){const e=await n();return e.status>=500&&e.status<600?n():e}function a8(n){return Number(n.replace("s","000"))}function l8(n){return`${DN} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=MN(n),s=jN(n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const l={fid:t,authVersion:DN,appId:n.appId,sdkVersion:NN},c={method:"POST",headers:s,body:JSON.stringify(l)},d=await FN(()=>fetch(r,c));if(d.ok){const f=await d.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:LN(f.authToken)}}else throw await VN("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=/^[cdef][\w-]{21}$/,uv="";function h8(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=f8(n);return d8.test(t)?t:uv}catch{return uv}}function f8(n){return u8(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Map;function BN(n,e){const t=Am(n);$N(t,e),p8(t,e)}function $N(n,e){const t=zN.get(n);if(t)for(const r of t)r(e)}function p8(n,e){const t=m8();t&&t.postMessage({key:n,fid:e}),g8()}let ua=null;function m8(){return!ua&&"BroadcastChannel"in self&&(ua=new BroadcastChannel("[Firebase] FID Change"),ua.onmessage=n=>{$N(n.data.key,n.data.fid)}),ua}function g8(){zN.size===0&&ua&&(ua.close(),ua=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8="firebase-installations-database",_8=1,Ra="firebase-installations-store";let Ky=null;function sE(){return Ky||(Ky=em(y8,_8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ra)}}})),Ky}async function Ip(n,e){const t=Am(n),s=(await sE()).transaction(Ra,"readwrite"),o=s.objectStore(Ra),l=await o.get(t);return await o.put(e,t),await s.done,(!l||l.fid!==e.fid)&&BN(n,e.fid),e}async function WN(n){const e=Am(n),r=(await sE()).transaction(Ra,"readwrite");await r.objectStore(Ra).delete(e),await r.done}async function km(n,e){const t=Am(n),s=(await sE()).transaction(Ra,"readwrite"),o=s.objectStore(Ra),l=await o.get(t),c=e(l);return c===void 0?await o.delete(t):await o.put(c,t),await s.done,c&&(!l||l.fid!==c.fid)&&BN(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(n){let e;const t=await km(n.appConfig,r=>{const s=v8(r),o=w8(n,s);return e=o.registrationPromise,o.installationEntry});return t.fid===uv?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function v8(n){const e=n||{fid:h8(),registrationStatus:0};return HN(e)}function w8(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ca.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=E8(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:S8(n)}:{installationEntry:e}}async function E8(n,e){try{const t=await c8(n,e);return Ip(n.appConfig,t)}catch(t){throw ON(t)&&t.customData.serverCode===409?await WN(n.appConfig):await Ip(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function S8(n){let e=await $0(n.appConfig);for(;e.registrationStatus===1;)await UN(100),e=await $0(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await iE(n);return r||t}return e}function $0(n){return km(n,e=>{if(!e)throw Ca.create("installation-not-found");return HN(e)})}function HN(n){return T8(n)?{fid:n.fid,registrationStatus:0}:n}function T8(n){return n.registrationStatus===1&&n.registrationTime+PN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8({appConfig:n,heartbeatServiceProvider:e},t){const r=x8(n,t),s=o8(n,t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const l={installation:{sdkVersion:NN,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},d=await FN(()=>fetch(r,c));if(d.ok){const f=await d.json();return LN(f)}else throw await VN("Generate Auth Token",d)}function x8(n,{fid:e}){return`${MN(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(n,e=!1){let t;const r=await km(n.appConfig,o=>{if(!qN(o))throw Ca.create("not-registered");const l=o.authToken;if(!e&&b8(l))return o;if(l.requestStatus===1)return t=C8(n,e),o;{if(!navigator.onLine)throw Ca.create("app-offline");const c=k8(o);return t=R8(n,c),c}});return t?await t:r.authToken}async function C8(n,e){let t=await W0(n.appConfig);for(;t.authToken.requestStatus===1;)await UN(100),t=await W0(n.appConfig);const r=t.authToken;return r.requestStatus===0?oE(n,e):r}function W0(n){return km(n,e=>{if(!qN(e))throw Ca.create("not-registered");const t=e.authToken;return P8(t)?{...e,authToken:{requestStatus:0}}:e})}async function R8(n,e){try{const t=await I8(n,e),r={...e,authToken:t};return await Ip(n.appConfig,r),t}catch(t){if(ON(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await WN(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ip(n.appConfig,r)}throw t}}function qN(n){return n!==void 0&&n.registrationStatus===2}function b8(n){return n.requestStatus===2&&!A8(n)}function A8(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+n8}function k8(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function P8(n){return n.requestStatus===1&&n.requestTime+PN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N8(n){const e=n,{installationEntry:t,registrationPromise:r}=await iE(e);return r?r.catch(console.error):oE(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D8(n,e=!1){const t=n;return await O8(t),(await oE(t,e)).token}async function O8(n){const{registrationPromise:e}=await iE(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(n){if(!n||!n.options)throw Qy("App Configuration");if(!n.name)throw Qy("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Qy(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Qy(n){return Ca.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="installations",L8="installations-internal",V8=n=>{const e=n.getProvider("app").getImmediate(),t=M8(e),r=So(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},j8=n=>{const e=n.getProvider("app").getImmediate(),t=So(e,GN).getImmediate();return{getId:()=>N8(t),getToken:s=>D8(t,s)}};function F8(){_r(new or(GN,V8,"PUBLIC")),_r(new or(L8,j8,"PRIVATE"))}F8();xn(kN,rE);xn(kN,rE,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8="/firebase-messaging-sw.js",z8="/firebase-cloud-messaging-push-scope",KN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",B8="https://fcmregistrations.googleapis.com/v1",QN="google.c.a.c_id",$8="google.c.a.c_l",W8="google.c.a.ts",H8="google.c.a.e",H0=1e4;var q0;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(q0||(q0={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var sd;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(sd||(sd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function q8(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),s=new Uint8Array(r.length);for(let o=0;o<r.length;++o)s[o]=r.charCodeAt(o);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="fcm_token_details_db",G8=5,G0="fcm_token_object_Store";async function K8(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(Yy))return null;let e=null;return(await em(Yy,G8,{upgrade:async(r,s,o,l)=>{if(s<2||!r.objectStoreNames.contains(G0))return;const c=l.objectStore(G0),d=await c.index("fcmSenderId").get(n);if(await c.clear(),!!d){if(s===2){const f=d;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:f.createTime??Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:Qs(f.vapidKey)}}}else if(s===3){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Qs(f.auth),p256dh:Qs(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Qs(f.vapidKey)}}}else if(s===4){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Qs(f.auth),p256dh:Qs(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Qs(f.vapidKey)}}}}}})).close(),await Ay(Yy),await Ay("fcm_vapid_details_db"),await Ay("undefined"),Q8(e)?e:null}function Q8(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8="firebase-messaging-database",X8=1,id="firebase-messaging-store";let Xy=null;function YN(){return Xy||(Xy=em(Y8,X8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(id)}}})),Xy}async function J8(n){const e=XN(n),r=await(await YN()).transaction(id).objectStore(id).get(e);if(r)return r;{const s=await K8(n.appConfig.senderId);if(s)return await aE(n,s),s}}async function aE(n,e){const t=XN(n),s=(await YN()).transaction(id,"readwrite");return await s.objectStore(id).put(e,t),await s.done,e}function XN({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Dn=new ka("messaging","Messaging",Z8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e7(n,e){const t=await cE(n),r=JN(e),s={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=await(await fetch(lE(n.appConfig),s)).json()}catch(l){throw Dn.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(o.error){const l=o.error.message;throw Dn.create("token-subscribe-failed",{errorInfo:l})}if(!o.token)throw Dn.create("token-subscribe-no-token");return o.token}async function t7(n,e){const t=await cE(n),r=JN(e.subscriptionOptions),s={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${lE(n.appConfig)}/${e.token}`,s)).json()}catch(l){throw Dn.create("token-update-failed",{errorInfo:l?.toString()})}if(o.error){const l=o.error.message;throw Dn.create("token-update-failed",{errorInfo:l})}if(!o.token)throw Dn.create("token-update-no-token");return o.token}async function n7(n,e){const r={method:"DELETE",headers:await cE(n)};try{const o=await(await fetch(`${lE(n.appConfig)}/${e}`,r)).json();if(o.error){const l=o.error.message;throw Dn.create("token-unsubscribe-failed",{errorInfo:l})}}catch(s){throw Dn.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function lE({projectId:n}){return`${B8}/projects/${n}/registrations`}async function cE({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function JN({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const s={web:{endpoint:t,auth:e,p256dh:n}};return r!==KN&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=10080*60*1e3;async function s7(n){const e=await o7(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Qs(e.getKey("auth")),p256dh:Qs(e.getKey("p256dh"))},r=await J8(n.firebaseDependencies);if(r){if(a7(r.subscriptionOptions,t))return Date.now()>=r.createTime+r7?i7(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await n7(n.firebaseDependencies,r.token)}catch(s){console.warn(s)}return K0(n.firebaseDependencies,t)}else return K0(n.firebaseDependencies,t)}async function i7(n,e){try{const t=await t7(n.firebaseDependencies,e),r={...e,token:t,createTime:Date.now()};return await aE(n.firebaseDependencies,r),t}catch(t){throw t}}async function K0(n,e){const r={token:await e7(n,e),createTime:Date.now(),subscriptionOptions:e};return await aE(n,r),r.token}async function o7(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:q8(e)})}function a7(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,s=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&s&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return l7(e,n),c7(e,n),u7(e,n),e}function l7(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const s=e.notification.image;s&&(n.notification.image=s);const o=e.notification.icon;o&&(n.notification.icon=o)}function c7(n,e){e.data&&(n.data=e.data)}function u7(n,e){if(!e.fcmOptions&&!e.notification?.click_action)return;n.fcmOptions={};const t=e.fcmOptions?.link??e.notification?.click_action;t&&(n.fcmOptions.link=t);const r=e.fcmOptions?.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(n){return typeof n=="object"&&!!n&&QN in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(n){if(!n||!n.options)throw Jy("App Configuration Object");if(!n.name)throw Jy("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Jy(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Jy(n){return Dn.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=h7(e);this.firebaseDependencies={app:e,appConfig:s,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p7(n){try{n.swRegistration=await navigator.serviceWorker.register(U8,{scope:z8}),n.swRegistration.update().catch(()=>{}),await m7(n.swRegistration)}catch(e){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function m7(n){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${H0} ms`)),H0),s=n.installing||n.waiting;n.active?(clearTimeout(r),e()):s?s.onstatechange=o=>{o.target?.state==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g7(n,e){if(!e&&!n.swRegistration&&await p7(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y7(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=KN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(n,e){if(!navigator)throw Dn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Dn.create("permission-blocked");return await y7(n,e?.vapidKey),await g7(n,e?.serviceWorkerRegistration),s7(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _7(n,e,t){const r=v7(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[QN],message_name:t[$8],message_time:t[W8],message_device_time:Math.floor(Date.now()/1e3)})}function v7(n){switch(n){case sd.NOTIFICATION_CLICKED:return"notification_open";case sd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w7(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===sd.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(Q0(t)):n.onMessageHandler.next(Q0(t)));const r=t.data;d7(r)&&r[H8]==="1"&&await _7(n,t.messageType,r)}const Y0="@firebase/messaging",X0="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=n=>{const e=new f7(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>w7(e,t)),e},S7=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>ZN(e,r)}};function T7(){_r(new or("messaging",E7,"PUBLIC")),_r(new or("messaging-internal",S7,"PRIVATE")),xn(Y0,X0),xn(Y0,X0,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I7(){try{await kb()}catch{return!1}return typeof window<"u"&&Ab()&&n4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(n=hd()){return I7().then(e=>{if(!e)throw Dn.create("unsupported-browser")},e=>{throw Dn.create("indexed-db-unsupported")}),So(dt(n),"messaging").getImmediate()}async function C7(n,e){return n=dt(n),ZN(n,e)}T7();const R7={apiKey:"AIzaSyB1z04jNS4gnwWa4VI10cXinj2PBg3KHe0",authDomain:"boulder-gym.firebaseapp.com",projectId:"boulder-gym",storageBucket:"boulder-gym.firebasestorage.app",messagingSenderId:"837049852336",appId:"1:837049852336:web:73b74809c9f120dc75b675",measurementId:"G-PKT03CZKTN"},Ad=Ob(R7);E5(Ad);const Ur=v$(Ad),Ts=ZH(Ad),b7=new Xs,A7=x7(Ad),k7=async()=>{try{return await C7(A7,{vapidKey:"BIAZQRSYVFYYP8PsZJjeuKi2yehanJSQuU4xFs79kyHwTpigIIwepfzLMLXbh6awKyRUuMevgYHT1NncjJW4eug"})}catch(n){return console.error("An error occurred while retrieving token. ",n),null}},P7=P3(Ad),N7=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],D7=["Red","Blue","Green","Yellow","Purple","Orange","Black","White","Multi-color"];function O7({onSave:n,onCancel:e}){const[t,r]=S.useState({name:"",grade:"",color:"",description:"",setter:"",imageUrl:""}),[s,o]=S.useState(""),[l,c]=S.useState(!1),d=(x,R)=>{r(L=>({...L,[x]:R}))},f=async x=>{if(x.type.startsWith("image/"))try{const R=k3(P7,`routes/${Date.now()}-${x.name}`);await b3(R,x);const L=await A3(R);o(L),r(V=>({...V,imageUrl:L}))}catch(R){console.error("Image upload failed:",R)}},m=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?c(!0):x.type==="dragleave"&&c(!1)},g=x=>{x.preventDefault(),x.stopPropagation(),c(!1);const R=x.dataTransfer.files;R&&R[0]&&f(R[0])},v=x=>{const R=x.target.files;R&&R[0]&&f(R[0])},I=x=>{x.preventDefault(),b&&(console.log(t.imageUrl),n({name:t.name,grade:t.grade,color:t.color,description:t.description,setter:t.setter,imageUrl:t.imageUrl||"https://images.unsplash.com/photo-1730659071194-4c833ac5da4e",dateSet:new Date().toISOString().split("T")[0]}))},b=t.name&&t.grade&&t.color&&t.setter;return _.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[_.jsxs(un,{variant:"ghost",onClick:e,className:"gap-2",children:[_.jsx(EC,{className:"size-4"}),"Back to Gallery"]}),_.jsxs(Mf,{children:[_.jsx(BC,{children:_.jsx(yL,{children:"Add New Route"})}),_.jsx(yv,{children:_.jsxs("form",{onSubmit:I,className:"space-y-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ji,{children:"Route Photo"}),_.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${l?"border-primary bg-primary/10":""}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:g,children:s?_.jsxs("div",{className:"relative",children:[_.jsx(qf,{src:s,alt:"Route preview",className:"w-full h-48 object-cover rounded-lg"}),_.jsx(un,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{o(""),r(x=>({...x,imageUrl:""}))},children:_.jsx(RC,{className:"size-4"})})]}):_.jsxs("div",{className:"space-y-4",children:[_.jsx(CM,{className:"size-12 text-muted-foreground mx-auto"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop an image here, or click to select"}),_.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",id:"image-upload"}),_.jsx(un,{type:"button",variant:"outline",asChild:!0,children:_.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:"Choose Image"})})]})]})})]}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ji,{htmlFor:"name",children:"Route Name *"}),_.jsx(CI,{id:"name",type:"text",placeholder:"Enter route name",value:t.name,onChange:x=>d("name",x.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ji,{htmlFor:"setter",children:"Route Setter *"}),_.jsx(CI,{id:"setter",type:"text",placeholder:"Who set this route?",value:t.setter,onChange:x=>d("setter",x.target.value)})]})]}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ji,{children:"Grade *"}),_.jsxs(Bf,{value:t.grade,onValueChange:x=>d("grade",x),children:[_.jsx(Wf,{children:_.jsx($f,{placeholder:"Select grade"})}),_.jsx(Hf,{children:N7.map(x=>_.jsx(Kl,{value:x,children:x},x))})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ji,{children:"Hold Color *"}),_.jsxs(Bf,{value:t.color,onValueChange:x=>d("color",x),children:[_.jsx(Wf,{children:_.jsx($f,{placeholder:"Select color"})}),_.jsx(Hf,{children:D7.map(x=>_.jsx(Kl,{value:x,children:x},x))})]})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ji,{htmlFor:"description",children:"Description"}),_.jsx(vb,{id:"description",placeholder:"Describe the route, key moves, or tips...",value:t.description,onChange:x=>d("description",x.target.value),rows:4})]}),_.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[_.jsx(un,{type:"submit",disabled:!b,children:"Add Route"}),_.jsx(un,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})]})}function M7(n,e=[]){let t=[];function r(o,l){const c=S.createContext(l);c.displayName=o+"Context";const d=t.length;t=[...t,l];const f=g=>{const{scope:v,children:I,...b}=g,x=v?.[n]?.[d]||c,R=S.useMemo(()=>b,Object.values(b));return _.jsx(x.Provider,{value:R,children:I})};f.displayName=o+"Provider";function m(g,v){const I=v?.[n]?.[d]||c,b=S.useContext(I);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${o}\``)}return[f,m]}const s=()=>{const o=t.map(l=>S.createContext(l));return function(c){const d=c?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return s.scopeName=n,[r,L7(s,...e)]}function L7(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((c,{useScope:d,scopeName:f})=>{const g=d(o)[`__scope${f}`];return{...c,...g}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var V7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],uE=V7.reduce((n,e)=>{const t=Np(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...c}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(d,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),Zy={exports:{}},e_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function j7(){if(J0)return e_;J0=1;var n=kp();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function c(g,v){var I=v(),b=r({inst:{value:I,getSnapshot:v}}),x=b[0].inst,R=b[1];return o(function(){x.value=I,x.getSnapshot=v,d(x)&&R({inst:x})},[g,I,v]),s(function(){return d(x)&&R({inst:x}),g(function(){d(x)&&R({inst:x})})},[g]),l(I),I}function d(g){var v=g.getSnapshot;g=g.value;try{var I=v();return!t(g,I)}catch{return!0}}function f(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return e_.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,e_}var Z0;function F7(){return Z0||(Z0=1,Zy.exports=j7()),Zy.exports}var U7=F7();function z7(){return U7.useSyncExternalStore(B7,()=>!0,()=>!1)}function B7(){return()=>{}}var dE="Avatar",[$7]=M7(dE),[W7,e1]=$7(dE),t1=S.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,o]=S.useState("idle");return _.jsx(W7,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:_.jsx(uE.span,{...r,ref:e})})});t1.displayName=dE;var n1="AvatarImage",H7=S.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...o}=n,l=e1(n1,t),c=q7(r,o),d=tn(f=>{s(f),l.onImageLoadingStatusChange(f)});return Ht(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?_.jsx(uE.img,{...o,ref:e,src:r}):null});H7.displayName=n1;var r1="AvatarFallback",s1=S.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,o=e1(r1,t),[l,c]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&o.imageLoadingStatus!=="loaded"?_.jsx(uE.span,{...s,ref:e}):null});s1.displayName=r1;function eC(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function q7(n,{referrerPolicy:e,crossOrigin:t}){const r=z7(),s=S.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[l,c]=S.useState(()=>eC(o,n));return Ht(()=>{c(eC(o,n))},[o,n]),Ht(()=>{const d=g=>()=>{c(g)};if(!o)return;const f=d("loaded"),m=d("error");return o.addEventListener("load",f),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof t=="string"&&(o.crossOrigin=t),()=>{o.removeEventListener("load",f),o.removeEventListener("error",m)}},[o,t,e]),l}var G7=t1,K7=s1;function ff({className:n,...e}){return _.jsx(G7,{"data-slot":"avatar",className:st("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function pf({className:n,...e}){return _.jsx(K7,{"data-slot":"avatar-fallback",className:st("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}var t_="rovingFocusGroup.onEntryFocus",Q7={bubbles:!1,cancelable:!0},kd="RovingFocusGroup",[dv,i1,Y7]=_v(kd),[X7,o1]=gi(kd,[Y7]),[J7,Z7]=X7(kd),a1=S.forwardRef((n,e)=>_.jsx(dv.Provider,{scope:n.__scopeRovingFocusGroup,children:_.jsx(dv.Slot,{scope:n.__scopeRovingFocusGroup,children:_.jsx(eq,{...n,ref:e})})}));a1.displayName=kd;var eq=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...g}=n,v=S.useRef(null),I=Ze(e,v),b=Dp(o),[x,R]=Gl({prop:l,defaultProp:c??null,onChange:d,caller:kd}),[L,V]=S.useState(!1),U=tn(f),W=i1(t),Y=S.useRef(!1),[X,k]=S.useState(0);return S.useEffect(()=>{const A=v.current;if(A)return A.addEventListener(t_,U),()=>A.removeEventListener(t_,U)},[U]),_.jsx(J7,{scope:t,orientation:r,dir:b,loop:s,currentTabStopId:x,onItemFocus:S.useCallback(A=>R(A),[R]),onItemShiftTab:S.useCallback(()=>V(!0),[]),onFocusableItemAdd:S.useCallback(()=>k(A=>A+1),[]),onFocusableItemRemove:S.useCallback(()=>k(A=>A-1),[]),children:_.jsx(We.div,{tabIndex:L||X===0?-1:0,"data-orientation":r,...g,ref:I,style:{outline:"none",...n.style},onMouseDown:Ae(n.onMouseDown,()=>{Y.current=!0}),onFocus:Ae(n.onFocus,A=>{const N=!Y.current;if(A.target===A.currentTarget&&N&&!L){const M=new CustomEvent(t_,Q7);if(A.currentTarget.dispatchEvent(M),!M.defaultPrevented){const O=W().filter(pe=>pe.focusable),F=O.find(pe=>pe.active),D=O.find(pe=>pe.id===x),ve=[F,D,...O].filter(Boolean).map(pe=>pe.ref.current);u1(ve,m)}}Y.current=!1}),onBlur:Ae(n.onBlur,()=>V(!1))})})}),l1="RovingFocusGroupItem",c1=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,children:l,...c}=n,d=ni(),f=o||d,m=Z7(l1,t),g=m.currentTabStopId===f,v=i1(t),{onFocusableItemAdd:I,onFocusableItemRemove:b,currentTabStopId:x}=m;return S.useEffect(()=>{if(r)return I(),()=>b()},[r,I,b]),_.jsx(dv.ItemSlot,{scope:t,id:f,focusable:r,active:s,children:_.jsx(We.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:Ae(n.onMouseDown,R=>{r?m.onItemFocus(f):R.preventDefault()}),onFocus:Ae(n.onFocus,()=>m.onItemFocus(f)),onKeyDown:Ae(n.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){m.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const L=rq(R,m.orientation,m.dir);if(L!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let U=v().filter(W=>W.focusable).map(W=>W.ref.current);if(L==="last")U.reverse();else if(L==="prev"||L==="next"){L==="prev"&&U.reverse();const W=U.indexOf(R.currentTarget);U=m.loop?sq(U,W+1):U.slice(W+1)}setTimeout(()=>u1(U))}}),children:typeof l=="function"?l({isCurrentTabStop:g,hasTabStop:x!=null}):l})})});c1.displayName=l1;var tq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nq(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function rq(n,e,t){const r=nq(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return tq[r]}function u1(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function sq(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var iq=a1,oq=c1;function aq(n){const e=lq(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,c=S.Children.toArray(o),d=c.find(uq);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function lq(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=hq(s),c=dq(o,s.props);return s.type!==S.Fragment&&(c.ref=r?mi(r,l):l),S.cloneElement(s,c)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var cq=Symbol("radix.slottable");function uq(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===cq}function dq(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function hq(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var hv=["Enter"," "],fq=["ArrowDown","PageUp","Home"],d1=["ArrowUp","PageDown","End"],pq=[...fq,...d1],mq={ltr:[...hv,"ArrowRight"],rtl:[...hv,"ArrowLeft"]},gq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pd="Menu",[od,yq,_q]=_v(Pd),[Ma,h1]=gi(Pd,[_q,Up,o1]),Pm=Up(),f1=o1(),[vq,La]=Ma(Pd),[wq,Nd]=Ma(Pd),p1=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:o,modal:l=!0}=n,c=Pm(e),[d,f]=S.useState(null),m=S.useRef(!1),g=tn(o),v=Dp(s);return S.useEffect(()=>{const I=()=>{m.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>m.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),_.jsx(_R,{...c,children:_.jsx(vq,{scope:e,open:t,onOpenChange:g,content:d,onContentChange:f,children:_.jsx(wq,{scope:e,onClose:S.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:m,dir:v,modal:l,children:r})})})};p1.displayName=Pd;var Eq="MenuAnchor",hE=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Pm(t);return _.jsx(vR,{...s,...r,ref:e})});hE.displayName=Eq;var fE="MenuPortal",[Sq,m1]=Ma(fE,{forceMount:void 0}),g1=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,o=La(fE,e);return _.jsx(Sq,{scope:e,forceMount:t,children:_.jsx(Er,{present:t||o.open,children:_.jsx(zp,{asChild:!0,container:s,children:r})})})};g1.displayName=fE;var yr="MenuContent",[Tq,pE]=Ma(yr),y1=S.forwardRef((n,e)=>{const t=m1(yr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=La(yr,n.__scopeMenu),l=Nd(yr,n.__scopeMenu);return _.jsx(od.Provider,{scope:n.__scopeMenu,children:_.jsx(Er,{present:r||o.open,children:_.jsx(od.Slot,{scope:n.__scopeMenu,children:l.modal?_.jsx(Iq,{...s,ref:e}):_.jsx(xq,{...s,ref:e})})})})}),Iq=S.forwardRef((n,e)=>{const t=La(yr,n.__scopeMenu),r=S.useRef(null),s=Ze(e,r);return S.useEffect(()=>{const o=r.current;if(o)return bv(o)},[]),_.jsx(mE,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Ae(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),xq=S.forwardRef((n,e)=>{const t=La(yr,n.__scopeMenu);return _.jsx(mE,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Cq=aq("MenuContent.ScrollLock"),mE=S.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:v,onDismiss:I,disableOutsideScroll:b,...x}=n,R=La(yr,t),L=Nd(yr,t),V=Pm(t),U=f1(t),W=yq(t),[Y,X]=S.useState(null),k=S.useRef(null),A=Ze(e,k,R.onContentChange),N=S.useRef(0),M=S.useRef(""),O=S.useRef(0),F=S.useRef(null),D=S.useRef("right"),me=S.useRef(0),ve=b?$p:S.Fragment,pe=b?{as:Cq,allowPinchZoom:!0}:void 0,Ee=ee=>{const ue=M.current+ee,B=W().filter(q=>!q.disabled),ne=document.activeElement,te=B.find(q=>q.ref.current===ne)?.textValue,se=B.map(q=>q.textValue),he=jq(se,ue,te),ce=B.find(q=>q.textValue===he)?.ref.current;(function q(oe){M.current=oe,window.clearTimeout(N.current),oe!==""&&(N.current=window.setTimeout(()=>q(""),1e3))})(ue),ce&&setTimeout(()=>ce.focus())};S.useEffect(()=>()=>window.clearTimeout(N.current),[]),vv();const H=S.useCallback(ee=>D.current===F.current?.side&&Uq(ee,F.current?.area),[]);return _.jsx(Tq,{scope:t,searchRef:M,onItemEnter:S.useCallback(ee=>{H(ee)&&ee.preventDefault()},[H]),onItemLeave:S.useCallback(ee=>{H(ee)||(k.current?.focus(),X(null))},[H]),onTriggerLeave:S.useCallback(ee=>{H(ee)&&ee.preventDefault()},[H]),pointerGraceTimerRef:O,onPointerGraceIntentChange:S.useCallback(ee=>{F.current=ee},[]),children:_.jsx(ve,{...pe,children:_.jsx(Mp,{asChild:!0,trapped:s,onMountAutoFocus:Ae(o,ee=>{ee.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:_.jsx(Op,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:v,onDismiss:I,children:_.jsx(iq,{asChild:!0,...U,dir:L.dir,orientation:"vertical",loop:r,currentTabStopId:Y,onCurrentTabStopIdChange:X,onEntryFocus:Ae(d,ee=>{L.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:_.jsx(wR,{role:"menu","aria-orientation":"vertical","data-state":D1(R.open),"data-radix-menu-content":"",dir:L.dir,...V,...x,ref:A,style:{outline:"none",...x.style},onKeyDown:Ae(x.onKeyDown,ee=>{const B=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,ne=ee.ctrlKey||ee.altKey||ee.metaKey,te=ee.key.length===1;B&&(ee.key==="Tab"&&ee.preventDefault(),!ne&&te&&Ee(ee.key));const se=k.current;if(ee.target!==se||!pq.includes(ee.key))return;ee.preventDefault();const ce=W().filter(q=>!q.disabled).map(q=>q.ref.current);d1.includes(ee.key)&&ce.reverse(),Lq(ce)}),onBlur:Ae(n.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(N.current),M.current="")}),onPointerMove:Ae(n.onPointerMove,ad(ee=>{const ue=ee.target,B=me.current!==ee.clientX;if(ee.currentTarget.contains(ue)&&B){const ne=ee.clientX>me.current?"right":"left";D.current=ne,me.current=ee.clientX}}))})})})})})})});y1.displayName=yr;var Rq="MenuGroup",gE=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(We.div,{role:"group",...r,ref:e})});gE.displayName=Rq;var bq="MenuLabel",_1=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(We.div,{...r,ref:e})});_1.displayName=bq;var xp="MenuItem",tC="menu.itemSelect",Nm=S.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,o=S.useRef(null),l=Nd(xp,n.__scopeMenu),c=pE(xp,n.__scopeMenu),d=Ze(e,o),f=S.useRef(!1),m=()=>{const g=o.current;if(!t&&g){const v=new CustomEvent(tC,{bubbles:!0,cancelable:!0});g.addEventListener(tC,I=>r?.(I),{once:!0}),qC(g,v),v.defaultPrevented?f.current=!1:l.onClose()}};return _.jsx(v1,{...s,ref:d,disabled:t,onClick:Ae(n.onClick,m),onPointerDown:g=>{n.onPointerDown?.(g),f.current=!0},onPointerUp:Ae(n.onPointerUp,g=>{f.current||g.currentTarget?.click()}),onKeyDown:Ae(n.onKeyDown,g=>{const v=c.searchRef.current!=="";t||v&&g.key===" "||hv.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Nm.displayName=xp;var v1=S.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...o}=n,l=pE(xp,t),c=f1(t),d=S.useRef(null),f=Ze(e,d),[m,g]=S.useState(!1),[v,I]=S.useState("");return S.useEffect(()=>{const b=d.current;b&&I((b.textContent??"").trim())},[o.children]),_.jsx(od.ItemSlot,{scope:t,disabled:r,textValue:s??v,children:_.jsx(oq,{asChild:!0,...c,focusable:!r,children:_.jsx(We.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:f,onPointerMove:Ae(n.onPointerMove,ad(b=>{r?l.onItemLeave(b):(l.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ae(n.onPointerLeave,ad(b=>l.onItemLeave(b))),onFocus:Ae(n.onFocus,()=>g(!0)),onBlur:Ae(n.onBlur,()=>g(!1))})})})}),Aq="MenuCheckboxItem",w1=S.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return _.jsx(x1,{scope:n.__scopeMenu,checked:t,children:_.jsx(Nm,{role:"menuitemcheckbox","aria-checked":Cp(t)?"mixed":t,...s,ref:e,"data-state":_E(t),onSelect:Ae(s.onSelect,()=>r?.(Cp(t)?!0:!t),{checkForDefaultPrevented:!1})})})});w1.displayName=Aq;var E1="MenuRadioGroup",[kq,Pq]=Ma(E1,{value:void 0,onValueChange:()=>{}}),S1=S.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,o=tn(r);return _.jsx(kq,{scope:n.__scopeMenu,value:t,onValueChange:o,children:_.jsx(gE,{...s,ref:e})})});S1.displayName=E1;var T1="MenuRadioItem",I1=S.forwardRef((n,e)=>{const{value:t,...r}=n,s=Pq(T1,n.__scopeMenu),o=t===s.value;return _.jsx(x1,{scope:n.__scopeMenu,checked:o,children:_.jsx(Nm,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":_E(o),onSelect:Ae(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});I1.displayName=T1;var yE="MenuItemIndicator",[x1,Nq]=Ma(yE,{checked:!1}),C1=S.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,o=Nq(yE,t);return _.jsx(Er,{present:r||Cp(o.checked)||o.checked===!0,children:_.jsx(We.span,{...s,ref:e,"data-state":_E(o.checked)})})});C1.displayName=yE;var Dq="MenuSeparator",R1=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(We.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});R1.displayName=Dq;var Oq="MenuArrow",b1=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Pm(t);return _.jsx(ER,{...s,...r,ref:e})});b1.displayName=Oq;var Mq="MenuSub",[uQ,A1]=Ma(Mq),Au="MenuSubTrigger",k1=S.forwardRef((n,e)=>{const t=La(Au,n.__scopeMenu),r=Nd(Au,n.__scopeMenu),s=A1(Au,n.__scopeMenu),o=pE(Au,n.__scopeMenu),l=S.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=o,f={__scopeMenu:n.__scopeMenu},m=S.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return S.useEffect(()=>m,[m]),S.useEffect(()=>{const g=c.current;return()=>{window.clearTimeout(g),d(null)}},[c,d]),_.jsx(hE,{asChild:!0,...f,children:_.jsx(v1,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":D1(t.open),...n,ref:mi(e,s.onTriggerChange),onClick:g=>{n.onClick?.(g),!(n.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Ae(n.onPointerMove,ad(g=>{o.onItemEnter(g),!g.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),m()},100))})),onPointerLeave:Ae(n.onPointerLeave,ad(g=>{m();const v=t.content?.getBoundingClientRect();if(v){const I=t.content?.dataset.side,b=I==="right",x=b?-5:5,R=v[b?"left":"right"],L=v[b?"right":"left"];o.onPointerGraceIntentChange({area:[{x:g.clientX+x,y:g.clientY},{x:R,y:v.top},{x:L,y:v.top},{x:L,y:v.bottom},{x:R,y:v.bottom}],side:I}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(g),g.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(n.onKeyDown,g=>{const v=o.searchRef.current!=="";n.disabled||v&&g.key===" "||mq[r.dir].includes(g.key)&&(t.onOpenChange(!0),t.content?.focus(),g.preventDefault())})})})});k1.displayName=Au;var P1="MenuSubContent",N1=S.forwardRef((n,e)=>{const t=m1(yr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=La(yr,n.__scopeMenu),l=Nd(yr,n.__scopeMenu),c=A1(P1,n.__scopeMenu),d=S.useRef(null),f=Ze(e,d);return _.jsx(od.Provider,{scope:n.__scopeMenu,children:_.jsx(Er,{present:r||o.open,children:_.jsx(od.Slot,{scope:n.__scopeMenu,children:_.jsx(mE,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{l.isUsingKeyboardRef.current&&d.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Ae(n.onFocusOutside,m=>{m.target!==c.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ae(n.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:Ae(n.onKeyDown,m=>{const g=m.currentTarget.contains(m.target),v=gq[l.dir].includes(m.key);g&&v&&(o.onOpenChange(!1),c.trigger?.focus(),m.preventDefault())})})})})})});N1.displayName=P1;function D1(n){return n?"open":"closed"}function Cp(n){return n==="indeterminate"}function _E(n){return Cp(n)?"indeterminate":n?"checked":"unchecked"}function Lq(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function Vq(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function jq(n,e,t){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=Vq(n,Math.max(o,0));s.length===1&&(l=l.filter(f=>f!==t));const d=l.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function Fq(n,e){const{x:t,y:r}=n;let s=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const c=e[o],d=e[l],f=c.x,m=c.y,g=d.x,v=d.y;m>r!=v>r&&t<(g-f)*(r-m)/(v-m)+f&&(s=!s)}return s}function Uq(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Fq(t,e)}function ad(n){return e=>e.pointerType==="mouse"?n(e):void 0}var zq=p1,Bq=hE,$q=g1,Wq=y1,Hq=gE,qq=_1,Gq=Nm,Kq=w1,Qq=S1,Yq=I1,Xq=C1,Jq=R1,Zq=b1,eG=k1,tG=N1,Dm="DropdownMenu",[nG]=gi(Dm,[h1]),On=h1(),[rG,O1]=nG(Dm),M1=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:o,onOpenChange:l,modal:c=!0}=n,d=On(e),f=S.useRef(null),[m,g]=Gl({prop:s,defaultProp:o??!1,onChange:l,caller:Dm});return _.jsx(rG,{scope:e,triggerId:ni(),triggerRef:f,contentId:ni(),open:m,onOpenChange:g,onOpenToggle:S.useCallback(()=>g(v=>!v),[g]),modal:c,children:_.jsx(zq,{...d,open:m,onOpenChange:g,dir:r,modal:c,children:t})})};M1.displayName=Dm;var L1="DropdownMenuTrigger",V1=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,o=O1(L1,t),l=On(t);return _.jsx(Bq,{asChild:!0,...l,children:_.jsx(We.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:mi(e,o.triggerRef),onPointerDown:Ae(n.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(o.onOpenToggle(),o.open||c.preventDefault())}),onKeyDown:Ae(n.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&o.onOpenToggle(),c.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});V1.displayName=L1;var sG="DropdownMenuPortal",j1=n=>{const{__scopeDropdownMenu:e,...t}=n,r=On(e);return _.jsx($q,{...r,...t})};j1.displayName=sG;var F1="DropdownMenuContent",U1=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=O1(F1,t),o=On(t),l=S.useRef(!1);return _.jsx(Wq,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:Ae(n.onCloseAutoFocus,c=>{l.current||s.triggerRef.current?.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:Ae(n.onInteractOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,m=d.button===2||f;(!s.modal||m)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});U1.displayName=F1;var iG="DropdownMenuGroup",oG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(Hq,{...s,...r,ref:e})});oG.displayName=iG;var aG="DropdownMenuLabel",lG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(qq,{...s,...r,ref:e})});lG.displayName=aG;var cG="DropdownMenuItem",z1=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(Gq,{...s,...r,ref:e})});z1.displayName=cG;var uG="DropdownMenuCheckboxItem",dG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(Kq,{...s,...r,ref:e})});dG.displayName=uG;var hG="DropdownMenuRadioGroup",fG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(Qq,{...s,...r,ref:e})});fG.displayName=hG;var pG="DropdownMenuRadioItem",mG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(Yq,{...s,...r,ref:e})});mG.displayName=pG;var gG="DropdownMenuItemIndicator",yG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(Xq,{...s,...r,ref:e})});yG.displayName=gG;var _G="DropdownMenuSeparator",B1=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(Jq,{...s,...r,ref:e})});B1.displayName=_G;var vG="DropdownMenuArrow",wG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(Zq,{...s,...r,ref:e})});wG.displayName=vG;var EG="DropdownMenuSubTrigger",SG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(eG,{...s,...r,ref:e})});SG.displayName=EG;var TG="DropdownMenuSubContent",IG=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=On(t);return _.jsx(tG,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IG.displayName=TG;var xG=M1,CG=V1,RG=j1,bG=U1,AG=z1,kG=B1;function nC({...n}){return _.jsx(xG,{"data-slot":"dropdown-menu",...n})}function rC({...n}){return _.jsx(CG,{"data-slot":"dropdown-menu-trigger",...n})}function sC({className:n,sideOffset:e=4,...t}){return _.jsx(RG,{children:_.jsx(bG,{"data-slot":"dropdown-menu-content",sideOffset:e,className:st("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function mf({className:n,inset:e,variant:t="default",...r}){return _.jsx(AG,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:st("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function gf({className:n,...e}){return _.jsx(kG,{"data-slot":"dropdown-menu-separator",className:st("bg-border -mx-1 my-1 h-px",n),...e})}const Om=S.createContext(null);Om.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},vE=10,fa=S.useLayoutEffect,iC=Pp.useId,PG=typeof iC=="function"?iC:()=>null;let NG=0;function wE(n=null){const e=PG(),t=S.useRef(n||e||null);return t.current===null&&(t.current=""+NG++),n??t.current}function $1({children:n,className:e="",collapsedSize:t,collapsible:r,defaultSize:s,forwardedRef:o,id:l,maxSize:c,minSize:d,onCollapse:f,onExpand:m,onResize:g,order:v,style:I,tagName:b="div",...x}){const R=S.useContext(Om);if(R===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:L,expandPanel:V,getPanelSize:U,getPanelStyle:W,groupId:Y,isPanelCollapsed:X,reevaluatePanelConstraints:k,registerPanel:A,resizePanel:N,unregisterPanel:M}=R,O=wE(l),F=S.useRef({callbacks:{onCollapse:f,onExpand:m,onResize:g},constraints:{collapsedSize:t,collapsible:r,defaultSize:s,maxSize:c,minSize:d},id:O,idIsFromProps:l!==void 0,order:v});S.useRef({didLogMissingDefaultSizeWarning:!1}),fa(()=>{const{callbacks:me,constraints:ve}=F.current,pe={...ve};F.current.id=O,F.current.idIsFromProps=l!==void 0,F.current.order=v,me.onCollapse=f,me.onExpand=m,me.onResize=g,ve.collapsedSize=t,ve.collapsible=r,ve.defaultSize=s,ve.maxSize=c,ve.minSize=d,(pe.collapsedSize!==ve.collapsedSize||pe.collapsible!==ve.collapsible||pe.maxSize!==ve.maxSize||pe.minSize!==ve.minSize)&&k(F.current,pe)}),fa(()=>{const me=F.current;return A(me),()=>{M(me)}},[v,O,A,M]),S.useImperativeHandle(o,()=>({collapse:()=>{L(F.current)},expand:me=>{V(F.current,me)},getId(){return O},getSize(){return U(F.current)},isCollapsed(){return X(F.current)},isExpanded(){return!X(F.current)},resize:me=>{N(F.current,me)}}),[L,V,U,X,O,N]);const D=W(F.current,s);return S.createElement(b,{...x,children:n,className:e,id:O,style:{...D,...I},[Pt.groupId]:Y,[Pt.panel]:"",[Pt.panelCollapsible]:r||void 0,[Pt.panelId]:O,[Pt.panelSize]:parseFloat(""+D.flexGrow).toFixed(1)})}const W1=S.forwardRef((n,e)=>S.createElement($1,{...n,forwardedRef:e}));$1.displayName="Panel";W1.displayName="forwardRef(Panel)";let fv=null,Df=-1,ro=null;function DG(n,e){if(e){const t=(e&Q1)!==0,r=(e&Y1)!==0,s=(e&X1)!==0,o=(e&J1)!==0;if(t)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(n){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function OG(){ro!==null&&(document.head.removeChild(ro),fv=null,ro=null,Df=-1)}function n_(n,e){var t,r;const s=DG(n,e);if(fv!==s){if(fv=s,ro===null&&(ro=document.createElement("style"),document.head.appendChild(ro)),Df>=0){var o;(o=ro.sheet)===null||o===void 0||o.removeRule(Df)}Df=(t=(r=ro.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&t!==void 0?t:-1}}function H1(n){return n.type==="keydown"}function q1(n){return n.type.startsWith("pointer")}function G1(n){return n.type.startsWith("mouse")}function Mm(n){if(q1(n)){if(n.isPrimary)return{x:n.clientX,y:n.clientY}}else if(G1(n))return{x:n.clientX,y:n.clientY};return{x:1/0,y:1/0}}function MG(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function LG(n,e,t){return n.x<e.x+e.width&&n.x+n.width>e.x&&n.y<e.y+e.height&&n.y+n.height>e.y}function VG(n,e){if(n===e)throw new Error("Cannot compare node with itself");const t={a:lC(n),b:lC(e)};let r;for(;t.a.at(-1)===t.b.at(-1);)n=t.a.pop(),e=t.b.pop(),r=n;He(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:aC(oC(t.a)),b:aC(oC(t.b))};if(s.a===s.b){const o=r.childNodes,l={a:t.a.at(-1),b:t.b.at(-1)};let c=o.length;for(;c--;){const d=o[c];if(d===l.a)return 1;if(d===l.b)return-1}}return Math.sign(s.a-s.b)}const jG=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function FG(n){var e;const t=getComputedStyle((e=K1(n))!==null&&e!==void 0?e:n).display;return t==="flex"||t==="inline-flex"}function UG(n){const e=getComputedStyle(n);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||FG(n))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||jG.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function oC(n){let e=n.length;for(;e--;){const t=n[e];if(He(t,"Missing node"),UG(t))return t}return null}function aC(n){return n&&Number(getComputedStyle(n).zIndex)||0}function lC(n){const e=[];for(;n;)e.push(n),n=K1(n);return e}function K1(n){const{parentNode:e}=n;return e&&e instanceof ShadowRoot?e.host:e}const Q1=1,Y1=2,X1=4,J1=8,zG=MG()==="coarse";let zr=[],Hl=!1,oa=new Map,Lm=new Map;const ld=new Set;function BG(n,e,t,r,s){var o;const{ownerDocument:l}=e,c={direction:t,element:e,hitAreaMargins:r,setResizeHandlerState:s},d=(o=oa.get(l))!==null&&o!==void 0?o:0;return oa.set(l,d+1),ld.add(c),Rp(),function(){var m;Lm.delete(n),ld.delete(c);const g=(m=oa.get(l))!==null&&m!==void 0?m:1;if(oa.set(l,g-1),Rp(),g===1&&oa.delete(l),zr.includes(c)){const v=zr.indexOf(c);v>=0&&zr.splice(v,1),SE(),s("up",!0,null)}}}function $G(n){const{target:e}=n,{x:t,y:r}=Mm(n);Hl=!0,EE({target:e,x:t,y:r}),Rp(),zr.length>0&&(bp("down",n),n.preventDefault(),Z1(e)||n.stopImmediatePropagation())}function r_(n){const{x:e,y:t}=Mm(n);if(Hl&&n.buttons===0&&(Hl=!1,bp("up",n)),!Hl){const{target:r}=n;EE({target:r,x:e,y:t})}bp("move",n),SE(),zr.length>0&&n.preventDefault()}function s_(n){const{target:e}=n,{x:t,y:r}=Mm(n);Lm.clear(),Hl=!1,zr.length>0&&(n.preventDefault(),Z1(e)||n.stopImmediatePropagation()),bp("up",n),EE({target:e,x:t,y:r}),SE(),Rp()}function Z1(n){let e=n;for(;e;){if(e.hasAttribute(Pt.resizeHandle))return!0;e=e.parentElement}return!1}function EE({target:n,x:e,y:t}){zr.splice(0);let r=null;(n instanceof HTMLElement||n instanceof SVGElement)&&(r=n),ld.forEach(s=>{const{element:o,hitAreaMargins:l}=s,c=o.getBoundingClientRect(),{bottom:d,left:f,right:m,top:g}=c,v=zG?l.coarse:l.fine;if(e>=f-v&&e<=m+v&&t>=g-v&&t<=d+v){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&VG(r,o)>0){let b=r,x=!1;for(;b&&!b.contains(o);){if(LG(b.getBoundingClientRect(),c)){x=!0;break}b=b.parentElement}if(x)return}zr.push(s)}})}function i_(n,e){Lm.set(n,e)}function SE(){let n=!1,e=!1;zr.forEach(r=>{const{direction:s}=r;s==="horizontal"?n=!0:e=!0});let t=0;Lm.forEach(r=>{t|=r}),n&&e?n_("intersection",t):n?n_("horizontal",t):e?n_("vertical",t):OG()}let o_=new AbortController;function Rp(){o_.abort(),o_=new AbortController;const n={capture:!0,signal:o_.signal};ld.size&&(Hl?(zr.length>0&&oa.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("contextmenu",s_,n),r.addEventListener("pointerleave",r_,n),r.addEventListener("pointermove",r_,n))}),window.addEventListener("pointerup",s_,n),window.addEventListener("pointercancel",s_,n)):oa.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("pointerdown",$G,n),r.addEventListener("pointermove",r_,n))}))}function bp(n,e){ld.forEach(t=>{const{setResizeHandlerState:r}=t,s=zr.includes(t);r(n,s,e)})}function WG(){const[n,e]=S.useState(0);return S.useCallback(()=>e(t=>t+1),[])}function He(n,e){if(!n)throw console.error(e),Error(e)}function ba(n,e,t=vE){return n.toFixed(t)===e.toFixed(t)?0:n>e?1:-1}function Js(n,e,t=vE){return ba(n,e,t)===0}function er(n,e,t){return ba(n,e,t)===0}function HG(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){const s=n[r],o=e[r];if(!er(s,o,t))return!1}return!0}function Ml({panelConstraints:n,panelIndex:e,size:t}){const r=n[e];He(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:l=100,minSize:c=0}=r;if(ba(t,c)<0)if(o){const d=(s+c)/2;ba(t,d)<0?t=s:t=c}else t=c;return t=Math.min(l,t),t=parseFloat(t.toFixed(vE)),t}function ku({delta:n,initialLayout:e,panelConstraints:t,pivotIndices:r,prevLayout:s,trigger:o}){if(er(n,0))return e;const l=[...e],[c,d]=r;He(c!=null,"Invalid first pivot index"),He(d!=null,"Invalid second pivot index");let f=0;if(o==="keyboard"){{const g=n<0?d:c,v=t[g];He(v,`Panel constraints not found for index ${g}`);const{collapsedSize:I=0,collapsible:b,minSize:x=0}=v;if(b){const R=e[g];if(He(R!=null,`Previous layout not found for panel index ${g}`),er(R,I)){const L=x-R;ba(L,Math.abs(n))>0&&(n=n<0?0-L:L)}}}{const g=n<0?c:d,v=t[g];He(v,`No panel constraints found for index ${g}`);const{collapsedSize:I=0,collapsible:b,minSize:x=0}=v;if(b){const R=e[g];if(He(R!=null,`Previous layout not found for panel index ${g}`),er(R,x)){const L=R-I;ba(L,Math.abs(n))>0&&(n=n<0?0-L:L)}}}}{const g=n<0?1:-1;let v=n<0?d:c,I=0;for(;;){const x=e[v];He(x!=null,`Previous layout not found for panel index ${v}`);const L=Ml({panelConstraints:t,panelIndex:v,size:100})-x;if(I+=L,v+=g,v<0||v>=t.length)break}const b=Math.min(Math.abs(n),Math.abs(I));n=n<0?0-b:b}{let v=n<0?c:d;for(;v>=0&&v<t.length;){const I=Math.abs(n)-Math.abs(f),b=e[v];He(b!=null,`Previous layout not found for panel index ${v}`);const x=b-I,R=Ml({panelConstraints:t,panelIndex:v,size:x});if(!er(b,R)&&(f+=b-R,l[v]=R,f.toPrecision(3).localeCompare(Math.abs(n).toPrecision(3),void 0,{numeric:!0})>=0))break;n<0?v--:v++}}if(HG(s,l))return s;{const g=n<0?d:c,v=e[g];He(v!=null,`Previous layout not found for panel index ${g}`);const I=v+f,b=Ml({panelConstraints:t,panelIndex:g,size:I});if(l[g]=b,!er(b,I)){let x=I-b,L=n<0?d:c;for(;L>=0&&L<t.length;){const V=l[L];He(V!=null,`Previous layout not found for panel index ${L}`);const U=V+x,W=Ml({panelConstraints:t,panelIndex:L,size:U});if(er(V,W)||(x-=W-V,l[L]=W),er(x,0))break;n>0?L--:L++}}}const m=l.reduce((g,v)=>v+g,0);return er(m,100)?l:s}function qG({layout:n,panelsArray:e,pivotIndices:t}){let r=0,s=100,o=0,l=0;const c=t[0];He(c!=null,"No pivot index found"),e.forEach((g,v)=>{const{constraints:I}=g,{maxSize:b=100,minSize:x=0}=I;v===c?(r=x,s=b):(o+=x,l+=b)});const d=Math.min(s,100-o),f=Math.max(r,100-l),m=n[c];return{valueMax:d,valueMin:f,valueNow:m}}function cd(n,e=document){return Array.from(e.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${n}"]`))}function eD(n,e,t=document){const s=cd(n,t).findIndex(o=>o.getAttribute(Pt.resizeHandleId)===e);return s??null}function tD(n,e,t){const r=eD(n,e,t);return r!=null?[r,r+1]:[-1,-1]}function nD(n,e=document){var t;if(e instanceof HTMLElement&&(e==null||(t=e.dataset)===null||t===void 0?void 0:t.panelGroupId)==n)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${n}"]`);return r||null}function Vm(n,e=document){const t=e.querySelector(`[${Pt.resizeHandleId}="${n}"]`);return t||null}function GG(n,e,t,r=document){var s,o,l,c;const d=Vm(e,r),f=cd(n,r),m=d?f.indexOf(d):-1,g=(s=(o=t[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,v=(l=(c=t[m+1])===null||c===void 0?void 0:c.id)!==null&&l!==void 0?l:null;return[g,v]}function KG({committedValuesRef:n,eagerValuesRef:e,groupId:t,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:l}){S.useRef({didWarnAboutMissingResizeHandle:!1}),fa(()=>{if(!o)return;const c=cd(t,o);for(let d=0;d<s.length-1;d++){const{valueMax:f,valueMin:m,valueNow:g}=qG({layout:r,panelsArray:s,pivotIndices:[d,d+1]}),v=c[d];if(v!=null){const I=s[d];He(I,`No panel data found for index "${d}"`),v.setAttribute("aria-controls",I.id),v.setAttribute("aria-valuemax",""+Math.round(f)),v.setAttribute("aria-valuemin",""+Math.round(m)),v.setAttribute("aria-valuenow",g!=null?""+Math.round(g):"")}}return()=>{c.forEach((d,f)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[t,r,s,o]),S.useEffect(()=>{if(!o)return;const c=e.current;He(c,"Eager values not found");const{panelDataArray:d}=c,f=nD(t,o);He(f!=null,`No group found for id "${t}"`);const m=cd(t,o);He(m,`No resize handles found for group id "${t}"`);const g=m.map(v=>{const I=v.getAttribute(Pt.resizeHandleId);He(I,"Resize handle element has no handle id attribute");const[b,x]=GG(t,I,d,o);if(b==null||x==null)return()=>{};const R=L=>{if(!L.defaultPrevented)switch(L.key){case"Enter":{L.preventDefault();const V=d.findIndex(U=>U.id===b);if(V>=0){const U=d[V];He(U,`No panel data found for index ${V}`);const W=r[V],{collapsedSize:Y=0,collapsible:X,minSize:k=0}=U.constraints;if(W!=null&&X){const A=ku({delta:er(W,Y)?k-Y:Y-W,initialLayout:r,panelConstraints:d.map(N=>N.constraints),pivotIndices:tD(t,I,o),prevLayout:r,trigger:"keyboard"});r!==A&&l(A)}}break}}};return v.addEventListener("keydown",R),()=>{v.removeEventListener("keydown",R)}});return()=>{g.forEach(v=>v())}},[o,n,e,t,r,s,l])}function cC(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function rD(n,e){const t=n==="horizontal",{x:r,y:s}=Mm(e);return t?r:s}function QG(n,e,t,r,s){const o=t==="horizontal",l=Vm(e,s);He(l,`No resize handle element found for id "${e}"`);const c=l.getAttribute(Pt.groupId);He(c,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=r;const f=rD(t,n),m=nD(c,s);He(m,`No group element found for id "${c}"`);const g=m.getBoundingClientRect(),v=o?g.width:g.height;return(f-d)/v*100}function YG(n,e,t,r,s,o){if(H1(n)){const l=t==="horizontal";let c=0;n.shiftKey?c=100:s!=null?c=s:c=10;let d=0;switch(n.key){case"ArrowDown":d=l?0:c;break;case"ArrowLeft":d=l?-c:0;break;case"ArrowRight":d=l?c:0;break;case"ArrowUp":d=l?0:-c;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return r==null?0:QG(n,e,t,r,o)}function XG({panelDataArray:n}){const e=Array(n.length),t=n.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<n.length;o++){const l=t[o];He(l,`Panel constraints not found for index ${o}`);const{defaultSize:c}=l;c!=null&&(r++,e[o]=c,s-=c)}for(let o=0;o<n.length;o++){const l=t[o];He(l,`Panel constraints not found for index ${o}`);const{defaultSize:c}=l;if(c!=null)continue;const d=n.length-r,f=s/d;r++,e[o]=f,s-=f}return e}function Rl(n,e,t){e.forEach((r,s)=>{const o=n[s];He(o,`Panel data not found for index ${s}`);const{callbacks:l,constraints:c,id:d}=o,{collapsedSize:f=0,collapsible:m}=c,g=t[d];if(g==null||r!==g){t[d]=r;const{onCollapse:v,onExpand:I,onResize:b}=l;b&&b(r,g),m&&(v||I)&&(I&&(g==null||Js(g,f))&&!Js(r,f)&&I(),v&&(g==null||!Js(g,f))&&Js(r,f)&&v())}})}function yf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t])return!1;return!0}function JG({defaultSize:n,dragState:e,layout:t,panelData:r,panelIndex:s,precision:o=3}){const l=t[s];let c;return l==null?c=n!=null?n.toPrecision(o):"1":r.length===1?c="1":c=l.toPrecision(o),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function ZG(n,e=10){let t=null;return(...s)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...s)},e)}}function uC(n){try{if(typeof localStorage<"u")n.getItem=e=>localStorage.getItem(e),n.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),n.getItem=()=>null,n.setItem=()=>{}}}function sD(n){return`react-resizable-panels:${n}`}function iD(n){return n.map(e=>{const{constraints:t,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function oD(n,e){try{const t=sD(n),r=e.getItem(t);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function eK(n,e,t){var r,s;const o=(r=oD(n,t))!==null&&r!==void 0?r:{},l=iD(e);return(s=o[l])!==null&&s!==void 0?s:null}function tK(n,e,t,r,s){var o;const l=sD(n),c=iD(e),d=(o=oD(n,s))!==null&&o!==void 0?o:{};d[c]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{s.setItem(l,JSON.stringify(d))}catch(f){console.error(f)}}function dC({layout:n,panelConstraints:e}){const t=[...n],r=t.reduce((o,l)=>o+l,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!er(r,100)&&t.length>0)for(let o=0;o<e.length;o++){const l=t[o];He(l!=null,`No layout data found for index ${o}`);const c=100/r*l;t[o]=c}let s=0;for(let o=0;o<e.length;o++){const l=t[o];He(l!=null,`No layout data found for index ${o}`);const c=Ml({panelConstraints:e,panelIndex:o,size:l});l!=c&&(s+=l-c,t[o]=c)}if(!er(s,0))for(let o=0;o<e.length;o++){const l=t[o];He(l!=null,`No layout data found for index ${o}`);const c=l+s,d=Ml({panelConstraints:e,panelIndex:o,size:c});if(l!==d&&(s-=d-l,t[o]=d,er(s,0)))break}return t}const nK=100,Pu={getItem:n=>(uC(Pu),Pu.getItem(n)),setItem:(n,e)=>{uC(Pu),Pu.setItem(n,e)}},hC={};function aD({autoSaveId:n=null,children:e,className:t="",direction:r,forwardedRef:s,id:o=null,onLayout:l=null,keyboardResizeBy:c=null,storage:d=Pu,style:f,tagName:m="div",...g}){const v=wE(o),I=S.useRef(null),[b,x]=S.useState(null),[R,L]=S.useState([]),V=WG(),U=S.useRef({}),W=S.useRef(new Map),Y=S.useRef(0),X=S.useRef({autoSaveId:n,direction:r,dragState:b,id:v,keyboardResizeBy:c,onLayout:l,storage:d}),k=S.useRef({layout:R,panelDataArray:[],panelDataArrayChanged:!1});S.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),S.useImperativeHandle(s,()=>({getId:()=>X.current.id,getLayout:()=>{const{layout:te}=k.current;return te},setLayout:te=>{const{onLayout:se}=X.current,{layout:he,panelDataArray:ce}=k.current,q=dC({layout:te,panelConstraints:ce.map(oe=>oe.constraints)});cC(he,q)||(L(q),k.current.layout=q,se&&se(q),Rl(ce,q,U.current))}}),[]),fa(()=>{X.current.autoSaveId=n,X.current.direction=r,X.current.dragState=b,X.current.id=v,X.current.onLayout=l,X.current.storage=d}),KG({committedValuesRef:X,eagerValuesRef:k,groupId:v,layout:R,panelDataArray:k.current.panelDataArray,setLayout:L,panelGroupElement:I.current}),S.useEffect(()=>{const{panelDataArray:te}=k.current;if(n){if(R.length===0||R.length!==te.length)return;let se=hC[n];se==null&&(se=ZG(tK,nK),hC[n]=se);const he=[...te],ce=new Map(W.current);se(n,he,ce,R,d)}},[n,R,d]),S.useEffect(()=>{});const A=S.useCallback(te=>{const{onLayout:se}=X.current,{layout:he,panelDataArray:ce}=k.current;if(te.constraints.collapsible){const q=ce.map(je=>je.constraints),{collapsedSize:oe=0,panelSize:ye,pivotIndices:Ie}=ra(ce,te,he);if(He(ye!=null,`Panel size not found for panel "${te.id}"`),!Js(ye,oe)){W.current.set(te.id,ye);const $e=Nl(ce,te)===ce.length-1?ye-oe:oe-ye,Ue=ku({delta:$e,initialLayout:he,panelConstraints:q,pivotIndices:Ie,prevLayout:he,trigger:"imperative-api"});yf(he,Ue)||(L(Ue),k.current.layout=Ue,se&&se(Ue),Rl(ce,Ue,U.current))}}},[]),N=S.useCallback((te,se)=>{const{onLayout:he}=X.current,{layout:ce,panelDataArray:q}=k.current;if(te.constraints.collapsible){const oe=q.map(ft=>ft.constraints),{collapsedSize:ye=0,panelSize:Ie=0,minSize:je=0,pivotIndices:$e}=ra(q,te,ce),Ue=se??je;if(Js(Ie,ye)){const ft=W.current.get(te.id),Mn=ft!=null&&ft>=Ue?ft:Ue,bn=Nl(q,te)===q.length-1?Ie-Mn:Mn-Ie,Ft=ku({delta:bn,initialLayout:ce,panelConstraints:oe,pivotIndices:$e,prevLayout:ce,trigger:"imperative-api"});yf(ce,Ft)||(L(Ft),k.current.layout=Ft,he&&he(Ft),Rl(q,Ft,U.current))}}},[]),M=S.useCallback(te=>{const{layout:se,panelDataArray:he}=k.current,{panelSize:ce}=ra(he,te,se);return He(ce!=null,`Panel size not found for panel "${te.id}"`),ce},[]),O=S.useCallback((te,se)=>{const{panelDataArray:he}=k.current,ce=Nl(he,te);return JG({defaultSize:se,dragState:b,layout:R,panelData:he,panelIndex:ce})},[b,R]),F=S.useCallback(te=>{const{layout:se,panelDataArray:he}=k.current,{collapsedSize:ce=0,collapsible:q,panelSize:oe}=ra(he,te,se);return He(oe!=null,`Panel size not found for panel "${te.id}"`),q===!0&&Js(oe,ce)},[]),D=S.useCallback(te=>{const{layout:se,panelDataArray:he}=k.current,{collapsedSize:ce=0,collapsible:q,panelSize:oe}=ra(he,te,se);return He(oe!=null,`Panel size not found for panel "${te.id}"`),!q||ba(oe,ce)>0},[]),me=S.useCallback(te=>{const{panelDataArray:se}=k.current;se.push(te),se.sort((he,ce)=>{const q=he.order,oe=ce.order;return q==null&&oe==null?0:q==null?-1:oe==null?1:q-oe}),k.current.panelDataArrayChanged=!0,V()},[V]);fa(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:te,onLayout:se,storage:he}=X.current,{layout:ce,panelDataArray:q}=k.current;let oe=null;if(te){const Ie=eK(te,q,he);Ie&&(W.current=new Map(Object.entries(Ie.expandToSizes)),oe=Ie.layout)}oe==null&&(oe=XG({panelDataArray:q}));const ye=dC({layout:oe,panelConstraints:q.map(Ie=>Ie.constraints)});cC(ce,ye)||(L(ye),k.current.layout=ye,se&&se(ye),Rl(q,ye,U.current))}}),fa(()=>{const te=k.current;return()=>{te.layout=[]}},[]);const ve=S.useCallback(te=>{let se=!1;const he=I.current;return he&&window.getComputedStyle(he,null).getPropertyValue("direction")==="rtl"&&(se=!0),function(q){q.preventDefault();const oe=I.current;if(!oe)return()=>null;const{direction:ye,dragState:Ie,id:je,keyboardResizeBy:$e,onLayout:Ue}=X.current,{layout:ft,panelDataArray:Mn}=k.current,{initialLayout:Rn}=Ie??{},bn=tD(je,te,oe);let Ft=YG(q,te,ye,Ie,$e,oe);const It=ye==="horizontal";It&&se&&(Ft=-Ft);const xt=Mn.map(Ao=>Ao.constraints),rn=ku({delta:Ft,initialLayout:Rn??ft,panelConstraints:xt,pivotIndices:bn,prevLayout:ft,trigger:H1(q)?"keyboard":"mouse-or-touch"}),vi=!yf(ft,rn);(q1(q)||G1(q))&&Y.current!=Ft&&(Y.current=Ft,!vi&&Ft!==0?It?i_(te,Ft<0?Q1:Y1):i_(te,Ft<0?X1:J1):i_(te,0)),vi&&(L(rn),k.current.layout=rn,Ue&&Ue(rn),Rl(Mn,rn,U.current))}},[]),pe=S.useCallback((te,se)=>{const{onLayout:he}=X.current,{layout:ce,panelDataArray:q}=k.current,oe=q.map(ft=>ft.constraints),{panelSize:ye,pivotIndices:Ie}=ra(q,te,ce);He(ye!=null,`Panel size not found for panel "${te.id}"`);const $e=Nl(q,te)===q.length-1?ye-se:se-ye,Ue=ku({delta:$e,initialLayout:ce,panelConstraints:oe,pivotIndices:Ie,prevLayout:ce,trigger:"imperative-api"});yf(ce,Ue)||(L(Ue),k.current.layout=Ue,he&&he(Ue),Rl(q,Ue,U.current))},[]),Ee=S.useCallback((te,se)=>{const{layout:he,panelDataArray:ce}=k.current,{collapsedSize:q=0,collapsible:oe}=se,{collapsedSize:ye=0,collapsible:Ie,maxSize:je=100,minSize:$e=0}=te.constraints,{panelSize:Ue}=ra(ce,te,he);Ue!=null&&(oe&&Ie&&Js(Ue,q)?Js(q,ye)||pe(te,ye):Ue<$e?pe(te,$e):Ue>je&&pe(te,je))},[pe]),H=S.useCallback((te,se)=>{const{direction:he}=X.current,{layout:ce}=k.current;if(!I.current)return;const q=Vm(te,I.current);He(q,`Drag handle element not found for id "${te}"`);const oe=rD(he,se);x({dragHandleId:te,dragHandleRect:q.getBoundingClientRect(),initialCursorPosition:oe,initialLayout:ce})},[]),ee=S.useCallback(()=>{x(null)},[]),ue=S.useCallback(te=>{const{panelDataArray:se}=k.current,he=Nl(se,te);he>=0&&(se.splice(he,1),delete U.current[te.id],k.current.panelDataArrayChanged=!0,V())},[V]),B=S.useMemo(()=>({collapsePanel:A,direction:r,dragState:b,expandPanel:N,getPanelSize:M,getPanelStyle:O,groupId:v,isPanelCollapsed:F,isPanelExpanded:D,reevaluatePanelConstraints:Ee,registerPanel:me,registerResizeHandle:ve,resizePanel:pe,startDragging:H,stopDragging:ee,unregisterPanel:ue,panelGroupElement:I.current}),[A,b,r,N,M,O,v,F,D,Ee,me,ve,pe,H,ee,ue]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return S.createElement(Om.Provider,{value:B},S.createElement(m,{...g,children:e,className:t,id:o,ref:I,style:{...ne,...f},[Pt.group]:"",[Pt.groupDirection]:r,[Pt.groupId]:v}))}const lD=S.forwardRef((n,e)=>S.createElement(aD,{...n,forwardedRef:e}));aD.displayName="PanelGroup";lD.displayName="forwardRef(PanelGroup)";function Nl(n,e){return n.findIndex(t=>t===e||t.id===e.id)}function ra(n,e,t){const r=Nl(n,e),o=r===n.length-1?[r-1,r]:[r,r+1],l=t[r];return{...e.constraints,panelSize:l,pivotIndices:o}}function rK({disabled:n,handleId:e,resizeHandler:t,panelGroupElement:r}){S.useEffect(()=>{if(n||t==null||r==null)return;const s=Vm(e,r);if(s==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),t(l);break}case"F6":{l.preventDefault();const c=s.getAttribute(Pt.groupId);He(c,`No group element found for id "${c}"`);const d=cd(c,r),f=eD(c,e,r);He(f!==null,`No resize element found for id "${e}"`);const m=l.shiftKey?f>0?f-1:d.length-1:f+1<d.length?f+1:0;d[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,n,e,t])}function cD({children:n=null,className:e="",disabled:t=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:l,onDragging:c,onFocus:d,onPointerDown:f,onPointerUp:m,style:g={},tabIndex:v=0,tagName:I="div",...b}){var x,R;const L=S.useRef(null),V=S.useRef({onClick:l,onDragging:c,onPointerDown:f,onPointerUp:m});S.useEffect(()=>{V.current.onClick=l,V.current.onDragging=c,V.current.onPointerDown=f,V.current.onPointerUp=m});const U=S.useContext(Om);if(U===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:W,groupId:Y,registerResizeHandle:X,startDragging:k,stopDragging:A,panelGroupElement:N}=U,M=wE(s),[O,F]=S.useState("inactive"),[D,me]=S.useState(!1),[ve,pe]=S.useState(null),Ee=S.useRef({state:O});fa(()=>{Ee.current.state=O}),S.useEffect(()=>{if(t)pe(null);else{const B=X(M);pe(()=>B)}},[t,M,X]);const H=(x=r?.coarse)!==null&&x!==void 0?x:15,ee=(R=r?.fine)!==null&&R!==void 0?R:5;S.useEffect(()=>{if(t||ve==null)return;const B=L.current;He(B,"Element ref not attached");let ne=!1;return BG(M,B,W,{coarse:H,fine:ee},(se,he,ce)=>{if(!he){F("inactive");return}switch(se){case"down":{F("drag"),ne=!1,He(ce,'Expected event to be defined for "down" action'),k(M,ce);const{onDragging:q,onPointerDown:oe}=V.current;q?.(!0),oe?.();break}case"move":{const{state:q}=Ee.current;ne=!0,q!=="drag"&&F("hover"),He(ce,'Expected event to be defined for "move" action'),ve(ce);break}case"up":{F("hover"),A();const{onClick:q,onDragging:oe,onPointerUp:ye}=V.current;oe?.(!1),ye?.(),ne||q?.();break}}})},[H,W,t,ee,X,M,ve,k,A]),rK({disabled:t,handleId:M,resizeHandler:ve,panelGroupElement:N});const ue={touchAction:"none",userSelect:"none"};return S.createElement(I,{...b,children:n,className:e,id:s,onBlur:()=>{me(!1),o?.()},onFocus:()=>{me(!0),d?.()},ref:L,role:"separator",style:{...ue,...g},tabIndex:v,[Pt.groupDirection]:W,[Pt.groupId]:Y,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:O==="drag"?"pointer":D?"keyboard":void 0,[Pt.resizeHandleEnabled]:!t,[Pt.resizeHandleId]:M,[Pt.resizeHandleState]:O})}cD.displayName="PanelResizeHandle";function sK({className:n,...e}){return _.jsx(lD,{"data-slot":"resizable-panel-group",className:st("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),...e})}function fC({className:n,...e}){return _.jsx(W1,{"data-slot":"resizable-panel",className:st("relative",n),...e})}function iK({withHandle:n,className:e,...t}){return _.jsx(cD,{"data-slot":"resizable-handle",className:st("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...t,children:n&&_.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:_.jsx(mM,{className:"size-2.5"})})})}function oK(n){const e=aK(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,c=S.Children.toArray(o),d=c.find(cK);if(d){const f=d.props.children,m=c.map(g=>g===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:g);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function aK(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=dK(s),c=uK(o,s.props);return s.type!==S.Fragment&&(c.ref=r?mi(r,l):l),S.cloneElement(s,c)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var lK=Symbol("radix.slottable");function cK(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===lK}function uK(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function dK(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var jm="Dialog",[uD]=gi(jm),[hK,qr]=uD(jm),dD=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:o,modal:l=!0}=n,c=S.useRef(null),d=S.useRef(null),[f,m]=Gl({prop:r,defaultProp:s??!1,onChange:o,caller:jm});return _.jsx(hK,{scope:e,triggerRef:c,contentRef:d,contentId:ni(),titleId:ni(),descriptionId:ni(),open:f,onOpenChange:m,onOpenToggle:S.useCallback(()=>m(g=>!g),[m]),modal:l,children:t})};dD.displayName=jm;var hD="DialogTrigger",fK=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=qr(hD,t),o=Ze(e,s.triggerRef);return _.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":xE(s.open),...r,ref:o,onClick:Ae(n.onClick,s.onOpenToggle)})});fK.displayName=hD;var TE="DialogPortal",[pK,fD]=uD(TE,{forceMount:void 0}),pD=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,o=qr(TE,e);return _.jsx(pK,{scope:e,forceMount:t,children:S.Children.map(r,l=>_.jsx(Er,{present:t||o.open,children:_.jsx(zp,{asChild:!0,container:s,children:l})}))})};pD.displayName=TE;var Ap="DialogOverlay",mD=S.forwardRef((n,e)=>{const t=fD(Ap,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=qr(Ap,n.__scopeDialog);return o.modal?_.jsx(Er,{present:r||o.open,children:_.jsx(gK,{...s,ref:e})}):null});mD.displayName=Ap;var mK=oK("DialogOverlay.RemoveScroll"),gK=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=qr(Ap,t);return _.jsx($p,{as:mK,allowPinchZoom:!0,shards:[s.contentRef],children:_.jsx(We.div,{"data-state":xE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Aa="DialogContent",gD=S.forwardRef((n,e)=>{const t=fD(Aa,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=qr(Aa,n.__scopeDialog);return _.jsx(Er,{present:r||o.open,children:o.modal?_.jsx(yK,{...s,ref:e}):_.jsx(_K,{...s,ref:e})})});gD.displayName=Aa;var yK=S.forwardRef((n,e)=>{const t=qr(Aa,n.__scopeDialog),r=S.useRef(null),s=Ze(e,t.contentRef,r);return S.useEffect(()=>{const o=r.current;if(o)return bv(o)},[]),_.jsx(yD,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(n.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Ae(n.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:Ae(n.onFocusOutside,o=>o.preventDefault())})}),_K=S.forwardRef((n,e)=>{const t=qr(Aa,n.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return _.jsx(yD,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{n.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||t.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{n.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),yD=S.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=n,c=qr(Aa,t),d=S.useRef(null),f=Ze(e,d);return vv(),_.jsxs(_.Fragment,{children:[_.jsx(Mp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:_.jsx(Op,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":xE(c.open),...l,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(vK,{titleId:c.titleId}),_.jsx(EK,{contentRef:d,descriptionId:c.descriptionId})]})]})}),IE="DialogTitle",_D=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=qr(IE,t);return _.jsx(We.h2,{id:s.titleId,...r,ref:e})});_D.displayName=IE;var vD="DialogDescription",wD=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=qr(vD,t);return _.jsx(We.p,{id:s.descriptionId,...r,ref:e})});wD.displayName=vD;var ED="DialogClose",SD=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=qr(ED,t);return _.jsx(We.button,{type:"button",...r,ref:e,onClick:Ae(n.onClick,()=>s.onOpenChange(!1))})});SD.displayName=ED;function xE(n){return n?"open":"closed"}var TD="DialogTitleWarning",[dQ,ID]=bL(TD,{contentName:Aa,titleName:IE,docsSlug:"dialog"}),vK=({titleId:n})=>{const e=ID(TD),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},wK="DialogDescriptionWarning",EK=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ID(wK).contentName}}.`;return S.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},SK=dD,TK=pD,IK=mD,xK=gD,CK=_D,RK=wD,bK=SD;function AK({...n}){return _.jsx(SK,{"data-slot":"sheet",...n})}function kK({...n}){return _.jsx(TK,{"data-slot":"sheet-portal",...n})}const PK=S.forwardRef(({className:n,...e},t)=>_.jsx(IK,{className:st("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e,ref:t})),NK=S.forwardRef(({side:n="right",className:e,children:t,...r},s)=>_.jsxs(kK,{children:[_.jsx(PK,{className:e?.includes("landscape:hidden")?"landscape:hidden":""}),_.jsxs(xK,{ref:s,className:st("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,_.jsxs(bK,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[_.jsx(RC,{className:"size-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));function DK({className:n,...e}){return _.jsx("div",{"data-slot":"sheet-header",className:st("flex flex-col gap-1.5 p-4",n),...e})}function OK({className:n,...e}){return _.jsx(CK,{"data-slot":"sheet-title",className:st("text-foreground font-semibold",n),...e})}function MK({className:n,...e}){return _.jsx(RK,{"data-slot":"sheet-description",className:st("text-muted-foreground text-sm",n),...e})}async function pC(){const n=Ts.currentUser;if(!n)return;const e=ii(Ur,"users",n.uid);(await Id(e)).exists()||await qP(e,{displayName:n.displayName||n.email?.split("@")[0]||"",email:n.email||null,photoURL:n.photoURL||null,roles:{},createdAt:qw()},{merge:!0})}function mC(n){switch(n){case"auth/invalid-email":return"Invalid email address.";case"auth/missing-password":return"Please enter your password.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/email-already-in-use":return"That email is already in use.";case"auth/invalid-credential":case"auth/wrong-password":return"Wrong email or password.";case"auth/popup-closed-by-user":return"Popup closed before completing sign in.";default:return"Something went wrong. Please try again."}}function LK({onLogin:n}){const[e,t]=S.useState("signin"),[r,s]=S.useState(""),[o,l]=S.useState(""),[c,d]=S.useState(""),[f,m]=S.useState(!1),[g,v]=S.useState(null);async function I(){try{m(!0),v(null);const x=await lH(Ts,b7);await pC(),n(x.user)}catch(x){v(mC(x?.code))}finally{m(!1)}}async function b(x){x.preventDefault();try{m(!0),v(null);let R;e==="signin"?R=await jW(Ts,r,o):(R=await VW(Ts,r,o),c.trim()&&await UW(R.user,{displayName:c.trim()})),await pC(),n(R.user)}catch(R){v(mC(R?.code))}finally{m(!1)}}return _.jsxs("div",{className:"max-w-md mx-auto rounded-2xl shadow-sm border bg-card p-6",children:[_.jsx("h1",{className:"text-xl font-semibold mb-1",children:e==="signin"?"Sign in":"Create an account"}),_.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Use Google or email/password."}),g&&_.jsx("div",{className:"mb-3 text-sm text-destructive-foreground bg-destructive rounded-lg p-2",children:g}),_.jsx("button",{onClick:I,disabled:f,className:"w-full mb-4 px-3 py-2 rounded-xl text-sm font-medium border hover:bg-accent",children:"Continue with Google"}),_.jsxs("form",{onSubmit:b,className:"space-y-3",children:[e==="signup"&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm mb-1",children:"Display name"}),_.jsx("input",{type:"text",value:c,onChange:x=>d(x.target.value),className:"w-full rounded-lg border bg-transparent px-3 py-2 text-sm",placeholder:"Jane Doe"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm mb-1",children:"Email"}),_.jsx("input",{type:"email",value:r,onChange:x=>s(x.target.value),className:"w-full rounded-lg border bg-transparent px-3 py-2 text-sm",placeholder:"you@example.com",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm mb-1",children:"Password"}),_.jsx("input",{type:"password",value:o,onChange:x=>l(x.target.value),className:"w-full rounded-lg border bg-transparent px-3 py-2 text-sm",placeholder:"",required:!0})]}),_.jsx("button",{type:"submit",disabled:f,className:"w-full px-3 py-2 rounded-xl text-sm font-medium bg-primary text-primary-foreground",children:f?e==="signin"?"Signing in":"Creating":e==="signin"?"Sign in":"Create account"})]}),_.jsx("div",{className:"text-xs text-muted-foreground mt-3",children:e==="signin"?_.jsxs(_.Fragment,{children:["No account yet?"," ",_.jsx("button",{className:"underline",onClick:()=>t("signup"),children:"Create one"})]}):_.jsxs(_.Fragment,{children:["Already have an account?"," ",_.jsx("button",{className:"underline",onClick:()=>t("signin"),children:"Sign in"})]})})]})}function VK(){const[n,e]=S.useState(null);return S.useEffect(()=>{const t=yN(Ts,r=>{e(r)});return()=>t()},[]),n?_.jsx("div",{className:"flex justify-center items-center min-h-screen bg-background font-sans",children:_.jsxs("div",{className:"bg-card rounded-xl p-8 shadow-md text-center w-80 transition-transform duration-200 ease-in-out hover:-translate-y-1",children:[_.jsx("img",{src:n.photoURL||"https://via.placeholder.com/96?text=User",alt:n.displayName??"User photo",className:"w-24 h-24 rounded-full object-cover mb-4 mx-auto"}),_.jsx("h2",{className:"text-2xl font-semibold mb-1 text-foreground",children:n.displayName}),_.jsx("p",{className:"text-base text-muted-foreground mb-4",children:n.email}),_.jsxs("div",{className:"text-sm text-muted-foreground",children:[_.jsx("span",{className:"font-medium text-foreground",children:"Account created:"})," ",n.metadata.creationTime?new Date(n.metadata.creationTime).toLocaleString():"Unknown"]})]})}):_.jsx("div",{className:"flex justify-center items-center min-h-screen bg-background font-sans",children:_.jsx("div",{className:"bg-card rounded-xl p-8 shadow-md text-center w-80",children:_.jsx("p",{className:"text-muted-foreground text-base",children:"Loading user info..."})})})}function pv({children:n}){return _.jsx("div",{className:"rounded-2xl border bg-card p-4 shadow-sm",children:n})}function gC({title:n,right:e,children:t}){return _.jsxs("section",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h2",{className:"text-base font-semibold tracking-tight",children:n}),e]}),_.jsx(pv,{children:t})]})}function jK(){const[n,e]=S.useState(Ts.currentUser),[t,r]=S.useState(!Ts.currentUser);return S.useEffect(()=>{const s=yN(Ts,o=>{e(o),r(!1)});return()=>s()},[]),{user:n,loading:t}}function FK(n){const[e,t]=S.useState(null);return S.useEffect(()=>{if(!n){t(null);return}const r=ii(Ur,"users",n);Id(r).then(s=>t(s.exists()?s.data():null))},[n]),{profile:e}}function UK(n){const[e,t]=S.useState([]),[r,s]=S.useState(!!n);return S.useEffect(()=>{if(!n)return;const o=P$(rv(Ur,"signups"),N$("uid","==",n),D$("createdAt","desc"),O$(5)),l=GP(o,async c=>{const d=[];for(const f of c.docs){const m=f.get("assignmentId"),g=ii(Ur,"assignments",m),v=await Id(g);v.exists()&&d.push({id:v.id,data:v.data()})}t(d),s(!1)});return()=>l()},[n]),{items:e,loading:r}}async function zK(n){const e=ii(Ur,"users",n.uid);(await Id(e)).exists()||await qP(e,{displayName:n.displayName||n.email?.split("@")[0]||"",email:n.email||null,photoURL:n.photoURL||null,roles:{},createdAt:qw()},{merge:!0})}function BK({onLogin:n}={}){const{user:e,loading:t}=jK(),{profile:r}=FK(e?.uid),{items:s}=UK(e?.uid);Ks.useEffect(()=>{e&&n&&n(e)},[e,n]);const[o,l]=S.useState(!1),[c,d]=S.useState(null),[f,m]=S.useState(!1);S.useEffect(()=>{e&&zK(e)},[e]);async function g(){try{d(null),l(!0),await _N(Ts)}catch(I){d(I?.message??"Failed to sign out.")}finally{l(!1)}}if(t)return _.jsx("div",{className:"p-6 max-w-xl mx-auto",children:_.jsx(pv,{children:_.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading your session"})})});if(!e)return _.jsx("div",{className:"p-6 max-w-xl mx-auto",children:_.jsx(LK,{onLogin:n??(()=>{})})});if(f)return _.jsxs("div",{className:"p-6 space-y-6",children:[_.jsxs("header",{className:"flex items-center justify-between",children:[_.jsx("h1",{className:"text-2xl font-bold",children:"Your Profile"}),_.jsx("button",{onClick:()=>m(!1),className:"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium border bg-card hover:bg-accent",children:"Back"})]}),_.jsx(VK,{})]});const v=r?.displayName||e.displayName||e.email||"there";return _.jsxs("div",{className:"p-6 space-y-6",children:[_.jsxs("header",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",v," "]}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Youre signed in with Firebase Auth."})]}),_.jsx("button",{onClick:g,disabled:o,className:"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium border bg-card hover:bg-accent disabled:opacity-60","aria-label":"Sign out",children:o?"Signing out":"Sign out"})]}),c&&_.jsx(pv,{children:_.jsx("p",{className:"text-sm text-destructive-foreground bg-destructive rounded-lg p-2",children:c})}),_.jsx(gC,{title:"Your account",children:_.jsx("button",{onClick:()=>m(!0),className:"w-full rounded-xl px-3 py-2 text-sm font-medium border bg-card hover:bg-accent",children:"View Profile"})}),_.jsx(gC,{title:"Your latest signups",children:s.length===0?_.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent signups yet."}):_.jsx("ul",{className:"space-y-2",children:s.map(({id:I,data:b})=>_.jsx("li",{className:"flex items-center justify-between",children:_.jsxs("div",{children:[_.jsx("p",{className:"font-medium",children:b.title}),b.location&&_.jsx("p",{className:"text-sm text-muted-foreground",children:b.location})]})},I))})})]})}var $K=(n,e,t,r,s,o,l,c)=>{let d=document.documentElement,f=["light","dark"];function m(I){(Array.isArray(n)?n:[n]).forEach(b=>{let x=b==="class",R=x&&o?s.map(L=>o[L]||L):s;x?(d.classList.remove(...R),d.classList.add(o&&o[I]?o[I]:I)):d.setAttribute(b,I)}),g(I)}function g(I){c&&f.includes(I)&&(d.style.colorScheme=I)}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)m(r);else try{let I=localStorage.getItem(e)||t,b=l&&I==="system"?v():I;m(b)}catch{}},yC=["light","dark"],xD="(prefers-color-scheme: dark)",WK=typeof window>"u",CE=S.createContext(void 0),HK={setTheme:n=>{},themes:[]},qK=()=>{var n;return(n=S.useContext(CE))!=null?n:HK},GK=n=>S.useContext(CE)?S.createElement(S.Fragment,null,n.children):S.createElement(QK,{...n}),KK=["light","dark"],QK=({forcedTheme:n,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:o=KK,defaultTheme:l=t?"system":"light",attribute:c="data-theme",value:d,children:f,nonce:m,scriptProps:g})=>{let[v,I]=S.useState(()=>XK(s,l)),[b,x]=S.useState(()=>v==="system"?a_():v),R=d?Object.values(d):o,L=S.useCallback(Y=>{let X=Y;if(!X)return;Y==="system"&&t&&(X=a_());let k=d?d[X]:X,A=e?JK(m):null,N=document.documentElement,M=O=>{O==="class"?(N.classList.remove(...R),k&&N.classList.add(k)):O.startsWith("data-")&&(k?N.setAttribute(O,k):N.removeAttribute(O))};if(Array.isArray(c)?c.forEach(M):M(c),r){let O=yC.includes(l)?l:null,F=yC.includes(X)?X:O;N.style.colorScheme=F}A?.()},[m]),V=S.useCallback(Y=>{let X=typeof Y=="function"?Y(v):Y;I(X);try{localStorage.setItem(s,X)}catch{}},[v]),U=S.useCallback(Y=>{let X=a_(Y);x(X),v==="system"&&t&&!n&&L("system")},[v,n]);S.useEffect(()=>{let Y=window.matchMedia(xD);return Y.addListener(U),U(Y),()=>Y.removeListener(U)},[U]),S.useEffect(()=>{let Y=X=>{X.key===s&&(X.newValue?I(X.newValue):V(l))};return window.addEventListener("storage",Y),()=>window.removeEventListener("storage",Y)},[V]),S.useEffect(()=>{L(n??v)},[n,v]);let W=S.useMemo(()=>({theme:v,setTheme:V,forcedTheme:n,resolvedTheme:v==="system"?b:v,themes:t?[...o,"system"]:o,systemTheme:t?b:void 0}),[v,V,n,b,t,o]);return S.createElement(CE.Provider,{value:W},S.createElement(YK,{forcedTheme:n,storageKey:s,attribute:c,enableSystem:t,enableColorScheme:r,defaultTheme:l,value:d,themes:o,nonce:m,scriptProps:g}),f)},YK=S.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:l,themes:c,nonce:d,scriptProps:f})=>{let m=JSON.stringify([t,e,o,n,c,l,r,s]).slice(1,-1);return S.createElement("script",{...f,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${$K.toString()})(${m})`}})}),XK=(n,e)=>{if(WK)return;let t;try{t=localStorage.getItem(n)||void 0}catch{}return t||e},JK=n=>{let e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},a_=n=>(n||(n=window.matchMedia(xD)),n.matches?"dark":"light"),Fm="Switch",[ZK]=gi(Fm),[eQ,tQ]=ZK(Fm),CD=S.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:o,required:l,disabled:c,value:d="on",onCheckedChange:f,form:m,...g}=n,[v,I]=S.useState(null),b=Ze(e,U=>I(U)),x=S.useRef(!1),R=v?m||!!v.closest("form"):!0,[L,V]=Gl({prop:s,defaultProp:o??!1,onChange:f,caller:Fm});return _.jsxs(eQ,{scope:t,checked:L,disabled:c,children:[_.jsx(We.button,{type:"button",role:"switch","aria-checked":L,"aria-required":l,"data-state":kD(L),"data-disabled":c?"":void 0,disabled:c,value:d,...g,ref:b,onClick:Ae(n.onClick,U=>{V(W=>!W),R&&(x.current=U.isPropagationStopped(),x.current||U.stopPropagation())})}),R&&_.jsx(AD,{control:v,bubbles:!x.current,name:r,value:d,checked:L,required:l,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});CD.displayName=Fm;var RD="SwitchThumb",bD=S.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=tQ(RD,t);return _.jsx(We.span,{"data-state":kD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});bD.displayName=RD;var nQ="SwitchBubbleInput",AD=S.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...s},o)=>{const l=S.useRef(null),c=Ze(l,o),d=SR(t),f=lR(e);return S.useEffect(()=>{const m=l.current;if(!m)return;const g=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(g,"checked").set;if(d!==t&&I){const b=new Event("click",{bubbles:r});I.call(m,t),m.dispatchEvent(b)}},[d,t,r]),_.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:c,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});AD.displayName=nQ;function kD(n){return n?"checked":"unchecked"}var PD=CD,rQ=bD;const mv=S.forwardRef(({className:n,...e},t)=>_.jsx(PD,{className:st("peer inline-flex h-8 w-16 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-gray-400 dark:data-[state=unchecked]:bg-gray-600",n),...e,ref:t,children:_.jsx(rQ,{className:st("pointer-events-none block h-7 w-7 rounded-full bg-white shadow-lg ring-0 transition-transform","data-[state=checked]:translate-x-8 data-[state=unchecked]:translate-x-0.5")})}));mv.displayName=PD.displayName;function sQ({user:n,onBack:e,onSignOut:t}){const{theme:r,setTheme:s}=qK(),[o,l]=S.useState(!1),[c,d]=S.useState(!0);S.useEffect(()=>{async function m(){if(!n){d(!1);return}try{const g=ii(Ur,"users",n.uid),v=await Id(g);if(v.exists()){const I=v.data();l(!!I.fcmToken&&Notification.permission==="granted")}}catch(g){console.error("Error checking notification status:",g)}finally{d(!1)}}m()},[n]);const f=async m=>{if(n)if(m)try{if(await Notification.requestPermission()==="granted"){console.log("Notification permission granted, getting FCM token...");const v=await k7();if(v){const I=ii(Ur,"users",n.uid);await iv(I,{fcmToken:v,notificationsEnabled:!0,fcmTokenUpdatedAt:new Date().toISOString()}),l(!0),console.log(" FCM token saved successfully:",v)}else console.error(" Failed to get FCM token - check VAPID key configuration"),l(!1)}else console.log("Notification permission denied"),l(!1)}catch(g){console.error(" Error enabling notifications:",g),l(!1)}else try{const g=ii(Ur,"users",n.uid);await iv(g,{fcmToken:null,notificationsEnabled:!1}),l(!1),console.log("Notifications disabled and token removed")}catch(g){console.error("Error disabling notifications:",g)}};return _.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[_.jsx("header",{className:"sticky top-0 z-10 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:_.jsxs("div",{className:"container flex h-14 items-center px-4",children:[_.jsx(un,{variant:"ghost",size:"icon",onClick:e,className:"mr-2",children:_.jsx(lM,{className:"h-5 w-5"})}),_.jsx("h1",{className:"text-lg font-semibold",children:"Settings"})]})}),_.jsx("main",{className:"container flex-1 px-4 py-6",children:_.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Appearance"}),_.jsxs("div",{className:"flex items-center justify-between rounded-lg border-2 border-muted p-4 bg-card hover:bg-accent/5 transition-colors",children:[_.jsxs("div",{className:"flex items-center space-x-4",children:[r==="dark"?_.jsx(vM,{className:"h-5 w-5 text-blue-500"}):_.jsx(IM,{className:"h-5 w-5 text-orange-500"}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"theme-toggle",className:"text-base font-medium cursor-pointer",children:"Dark Mode"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Toggle dark mode theme"})]})]}),_.jsx(mv,{id:"theme-toggle",checked:r==="dark",onCheckedChange:m=>s(m?"dark":"light"),className:"data-[state=checked]:bg-blue-600 data-[state=unchecked]:bg-gray-300 dark:data-[state=unchecked]:bg-gray-600"})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Notifications"}),_.jsxs("div",{className:"flex items-center justify-between rounded-lg border-2 border-muted p-4 bg-card hover:bg-accent/5 transition-colors",children:[_.jsxs("div",{className:"flex items-center space-x-4",children:[o?_.jsx(tM,{className:"h-5 w-5 text-green-500"}):_.jsx(ZO,{className:"h-5 w-5 text-gray-400"}),_.jsxs("div",{className:"flex-1",children:[_.jsx("label",{htmlFor:"notifications-toggle",className:"text-base font-medium cursor-pointer",children:"Push Notifications"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications about new routes and updates"})]})]}),_.jsx(mv,{id:"notifications-toggle",checked:o,onCheckedChange:f,disabled:c,className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-300 dark:data-[state=unchecked]:bg-gray-600"})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Account"}),_.jsxs("div",{className:"rounded-lg border-2 border-muted p-4 bg-card",children:[_.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Signed in as:"}),_.jsx("p",{className:"font-medium",children:n?.displayName??"User"}),n?.email&&_.jsx("p",{className:"text-sm text-muted-foreground",children:n.email})]}),_.jsxs(un,{variant:"destructive",className:"w-full",onClick:t,children:[_.jsx(l_,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]}),_.jsx("div",{className:"pt-6 text-center text-sm text-muted-foreground border-t",children:"Boulder Gym App v1.0.0"})]})})]})}function iQ(){const[n,e]=S.useState(null),[t,r]=S.useState([]),[s,o]=S.useState(null),[l,c]=S.useState("gallery"),[d,f]=S.useState("");S.useEffect(()=>{if(!n)return;const V=GP(rv(Ur,"routes"),U=>{const W=[];U.forEach(Y=>{const X=Y.data(),k=X.reviews||[],A=k.length,N=A===0?0:Number((k.reduce((M,O)=>M+O.rating,0)/A).toFixed(1));W.push({id:Y.id,name:X.name,grade:X.grade,color:X.color,imageUrl:X.imageUrl,description:X.description,setter:X.setter,dateSet:X.dateSet,reviews:k,totalReviews:A,averageRating:N})}),r(W)});return()=>V()},[n]);const m=async V=>{try{await V$(rv(Ur,"routes"),{...V,createdAt:qw()}),c("gallery")}catch(U){console.error("Error adding route:",U)}},g=async(V,U)=>{if(n)try{const W={...U,id:Date.now().toString(),author:n.displayName||"Anonymous",date:new Date().toISOString()},Y=ii(Ur,"routes",V);await iv(Y,{reviews:j$(W)})}catch(W){console.error("Error adding review:",W)}},v=V=>{e(V)},I=()=>{_N(Ts).then(()=>{e(null),c("gallery"),o(null)}).catch(V=>{console.error("Sign out error:",V)})},b=d?t.filter(V=>V.grade===d):t;if(!n)return _.jsx(BK,{onLogin:v});const x=V=>{o(V)},R=()=>{o(null)},L=()=>{o(null)};return l==="settings"?_.jsx(sQ,{user:n,onBack:()=>c("gallery"),onSignOut:I}):l==="add"?_.jsxs("div",{children:[_.jsx("header",{className:"sticky top-0 z-50 border-b bg-background",children:_.jsx("div",{className:"container mx-auto px-4 py-4",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center",children:_.jsx(py,{className:"size-4 text-primary-foreground"})}),_.jsx("h1",{className:"text-xl font-medium",children:"Boulder Routes"})]}),_.jsx("div",{className:"flex items-center gap-3",children:_.jsxs(nC,{children:[_.jsx(rC,{asChild:!0,children:_.jsxs(un,{variant:"ghost",className:"gap-2",size:"sm",children:[_.jsx(ff,{className:"size-6",children:_.jsx(pf,{className:"text-xs",children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),_.jsx("span",{className:"hidden sm:inline",children:n.name})]})}),_.jsxs(sC,{align:"end",className:"w-56",children:[_.jsxs("div",{className:"flex items-center gap-2 p-2",children:[_.jsx(ff,{className:"size-8",children:_.jsx(pf,{children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),_.jsxs("div",{className:"flex flex-col space-y-1",children:[_.jsx("p",{className:"text-sm font-medium",children:n.name}),_.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]}),_.jsx(gf,{}),_.jsx(mf,{onClick:()=>c("settings"),children:"Settings"}),_.jsx(gf,{}),_.jsxs(mf,{onClick:I,className:"gap-2 text-destructive",children:[_.jsx(l_,{className:"size-4"}),"Sign out"]})]})]})})]})})}),_.jsx("main",{className:"container mx-auto px-4 py-6",children:_.jsx(O7,{onSave:m,onCancel:()=>c("gallery")})})]}):_.jsxs("div",{children:[_.jsx("header",{className:"flex-shrink-0 z-50 border-b landscape:sticky landscape:top-0 bg-background",children:_.jsx("div",{className:"container mx-auto px-4 py-4",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center",children:_.jsx(py,{className:"size-4 text-primary-foreground"})}),_.jsx("h1",{className:"text-xl font-medium",children:"Boulder Routes"})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs(un,{onClick:()=>c("add"),size:"sm",className:"gap-2",children:[_.jsx(EM,{className:"size-4"}),_.jsx("span",{className:"hidden sm:inline",children:"Add Route"})]}),_.jsxs(nC,{children:[_.jsx(rC,{asChild:!0,children:_.jsxs(un,{variant:"ghost",className:"gap-2",size:"sm",children:[_.jsx(ff,{className:"size-6",children:_.jsx(pf,{className:"text-xs",children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),_.jsx("span",{className:"hidden sm:inline",children:n.name})]})}),_.jsxs(sC,{align:"end",className:"w-56",children:[_.jsxs("div",{className:"flex items-center gap-2 p-2",children:[_.jsx(ff,{className:"size-8",children:_.jsx(pf,{children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),_.jsxs("div",{className:"flex flex-col space-y-1",children:[_.jsx("p",{className:"text-sm font-medium",children:n.name}),_.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]}),_.jsx(gf,{}),_.jsx(mf,{onClick:()=>c("settings"),children:"Settings"}),_.jsx(gf,{}),_.jsxs(mf,{onClick:I,className:"gap-2 text-destructive",children:[_.jsx(l_,{className:"size-4"}),"Sign out"]})]})]})]})]})})}),_.jsxs("main",{className:"flex-1 overflow-hidden",children:[_.jsx("div",{className:"landscape:block hidden",children:_.jsxs(sK,{direction:"horizontal",className:"h-full w-full",children:[_.jsx(fC,{defaultSize:35,minSize:25,maxSize:50,className:"h-full",children:_.jsx("div",{className:"h-full overflow-hidden",children:_.jsx(CF,{routes:b,onRouteClick:x,filterGrade:d,onFilterChange:f,selectedRouteId:s?.id})})}),_.jsx(iK,{withHandle:!0}),_.jsx(fC,{defaultSize:65,minSize:50,className:"h-full",children:_.jsx("div",{className:"h-full overflow-hidden",children:s?_.jsx(yb,{className:"h-full w-full",children:_.jsx("div",{className:"px-6 py-6",children:_.jsx(xI,{route:s,onBack:L,onAddReview:V=>g(s.id,V),currentUser:n,showBackButton:!1})})},s.id):_.jsx("div",{className:"flex items-center justify-center h-full w-full",children:_.jsxs("div",{className:"text-center space-y-3",children:[_.jsx("div",{className:"size-16 bg-muted rounded-full flex items-center justify-center mx-auto",children:_.jsx(py,{className:"size-8"})}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("h3",{className:"font-medium",children:"No route selected"}),_.jsx("p",{className:"text-sm",children:"Select a route from the list to view details"})]})]})})})})]})}),_.jsxs("div",{className:"landscape:hidden",children:[_.jsx("div",{children:_.jsx("div",{className:"container mx-auto px-4 py-6",children:_.jsx(oF,{routes:b,onRouteClick:x,filterGrade:d,onFilterChange:f,selectedRouteId:s?.id})})}),s&&_.jsx(AK,{open:!0,onOpenChange:V=>!V&&R(),children:_.jsxs(NK,{side:"right",className:"w-full sm:max-w-2xl p-0 overflow-auto landscape:hidden",children:[_.jsxs(DK,{className:"sr-only",children:[_.jsx(OK,{children:s.name}),_.jsxs(MK,{children:["Route details for ",s.name," - ",s.grade]})]}),_.jsx("div",{className:"p-6",children:_.jsx(xI,{route:s,onBack:R,onAddReview:V=>g(s.id,V),currentUser:n,showBackButton:!0})})]})})]})]})]})}function oQ({children:n,...e}){return _.jsx(GK,{...e,children:n})}document.getElementById("root").className="min-h-screen bg-background text-foreground";qO.createRoot(document.getElementById("root")).render(_.jsx(S.StrictMode,{children:_.jsx(oQ,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:_.jsx(iQ,{})})}));
