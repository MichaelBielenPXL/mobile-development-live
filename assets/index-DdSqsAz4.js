function vD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Ox(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qg={exports:{}},ou={},Yg={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function wD(){if(nT)return qe;nT=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,x={};function R(B,ne,te){this.props=B,this.context=ne,this.refs=x,this.updater=te||I}R.prototype.isReactComponent={},R.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},R.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=R.prototype;function V(B,ne,te){this.props=B,this.context=ne,this.refs=x,this.updater=te||I}var z=V.prototype=new j;z.constructor=V,A(z,R.prototype),z.isPureReactComponent=!0;var H=Array.isArray,J=Object.prototype.hasOwnProperty,Z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function b(B,ne,te){var se,he={},ce=null,G=null;if(ne!=null)for(se in ne.ref!==void 0&&(G=ne.ref),ne.key!==void 0&&(ce=""+ne.key),ne)J.call(ne,se)&&!P.hasOwnProperty(se)&&(he[se]=ne[se]);var oe=arguments.length-2;if(oe===1)he.children=te;else if(1<oe){for(var ye=Array(oe),Ie=0;Ie<oe;Ie++)ye[Ie]=arguments[Ie+2];he.children=ye}if(B&&B.defaultProps)for(se in oe=B.defaultProps,oe)he[se]===void 0&&(he[se]=oe[se]);return{$$typeof:n,type:B,key:ce,ref:G,props:he,_owner:Z.current}}function N(B,ne){return{$$typeof:n,type:B.type,key:ne,ref:B.ref,props:B.props,_owner:B._owner}}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function M(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(te){return ne[te]})}var F=/\/+/g;function D(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):ne.toString(36)}function me(B,ne,te,se,he){var ce=typeof B;(ce==="undefined"||ce==="boolean")&&(B=null);var G=!1;if(B===null)G=!0;else switch(ce){case"string":case"number":G=!0;break;case"object":switch(B.$$typeof){case n:case e:G=!0}}if(G)return G=B,he=he(G),B=se===""?"."+D(G,0):se,H(he)?(te="",B!=null&&(te=B.replace(F,"$&/")+"/"),me(he,ne,te,"",function(Ie){return Ie})):he!=null&&(O(he)&&(he=N(he,te+(!he.key||G&&G.key===he.key?"":(""+he.key).replace(F,"$&/")+"/")+B)),ne.push(he)),1;if(G=0,se=se===""?".":se+":",H(B))for(var oe=0;oe<B.length;oe++){ce=B[oe];var ye=se+D(ce,oe);G+=me(ce,ne,te,ye,he)}else if(ye=v(B),typeof ye=="function")for(B=ye.call(B),oe=0;!(ce=B.next()).done;)ce=ce.value,ye=se+D(ce,oe++),G+=me(ce,ne,te,ye,he);else if(ce==="object")throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return G}function ve(B,ne,te){if(B==null)return B;var se=[],he=0;return me(B,se,"","",function(ce){return ne.call(te,ce,he++)}),se}function pe(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(te){(B._status===0||B._status===-1)&&(B._status=1,B._result=te)},function(te){(B._status===0||B._status===-1)&&(B._status=2,B._result=te)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var Ee={current:null},W={transition:null},ee={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:W,ReactCurrentOwner:Z};function ue(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:ve,forEach:function(B,ne,te){ve(B,function(){ne.apply(this,arguments)},te)},count:function(B){var ne=0;return ve(B,function(){ne++}),ne},toArray:function(B){return ve(B,function(ne){return ne})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},qe.Component=R,qe.Fragment=t,qe.Profiler=s,qe.PureComponent=V,qe.StrictMode=r,qe.Suspense=d,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,qe.act=ue,qe.cloneElement=function(B,ne,te){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var se=A({},B.props),he=B.key,ce=B.ref,G=B._owner;if(ne!=null){if(ne.ref!==void 0&&(ce=ne.ref,G=Z.current),ne.key!==void 0&&(he=""+ne.key),B.type&&B.type.defaultProps)var oe=B.type.defaultProps;for(ye in ne)J.call(ne,ye)&&!P.hasOwnProperty(ye)&&(se[ye]=ne[ye]===void 0&&oe!==void 0?oe[ye]:ne[ye])}var ye=arguments.length-2;if(ye===1)se.children=te;else if(1<ye){oe=Array(ye);for(var Ie=0;Ie<ye;Ie++)oe[Ie]=arguments[Ie+2];se.children=oe}return{$$typeof:n,type:B.type,key:he,ref:ce,props:se,_owner:G}},qe.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},qe.createElement=b,qe.createFactory=function(B){var ne=b.bind(null,B);return ne.type=B,ne},qe.createRef=function(){return{current:null}},qe.forwardRef=function(B){return{$$typeof:u,render:B}},qe.isValidElement=O,qe.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:pe}},qe.memo=function(B,ne){return{$$typeof:f,type:B,compare:ne===void 0?null:ne}},qe.startTransition=function(B){var ne=W.transition;W.transition={};try{B()}finally{W.transition=ne}},qe.unstable_act=ue,qe.useCallback=function(B,ne){return Ee.current.useCallback(B,ne)},qe.useContext=function(B){return Ee.current.useContext(B)},qe.useDebugValue=function(){},qe.useDeferredValue=function(B){return Ee.current.useDeferredValue(B)},qe.useEffect=function(B,ne){return Ee.current.useEffect(B,ne)},qe.useId=function(){return Ee.current.useId()},qe.useImperativeHandle=function(B,ne,te){return Ee.current.useImperativeHandle(B,ne,te)},qe.useInsertionEffect=function(B,ne){return Ee.current.useInsertionEffect(B,ne)},qe.useLayoutEffect=function(B,ne){return Ee.current.useLayoutEffect(B,ne)},qe.useMemo=function(B,ne){return Ee.current.useMemo(B,ne)},qe.useReducer=function(B,ne,te){return Ee.current.useReducer(B,ne,te)},qe.useRef=function(B){return Ee.current.useRef(B)},qe.useState=function(B){return Ee.current.useState(B)},qe.useSyncExternalStore=function(B,ne,te){return Ee.current.useSyncExternalStore(B,ne,te)},qe.useTransition=function(){return Ee.current.useTransition()},qe.version="18.3.1",qe}var rT;function yp(){return rT||(rT=1,Yg.exports=wD()),Yg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function ED(){if(sT)return ou;sT=1;var n=yp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var m,y={},v=null,I=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(I=d.ref);for(m in d)r.call(d,m)&&!o.hasOwnProperty(m)&&(y[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:u,key:v,ref:I,props:y,_owner:s.current}}return ou.Fragment=t,ou.jsx=l,ou.jsxs=l,ou}var iT;function SD(){return iT||(iT=1,Qg.exports=ED()),Qg.exports}var _=SD(),S=yp();const Ws=Ox(S),_p=vD({__proto__:null,default:Ws},[S]);var Vh={},Xg={exports:{}},Fn={},Jg={exports:{}},Zg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function TD(){return oT||(oT=1,(function(n){function e(W,ee){var ue=W.length;W.push(ee);e:for(;0<ue;){var B=ue-1>>>1,ne=W[B];if(0<s(ne,ee))W[B]=ee,W[ue]=ne,ue=B;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ee=W[0],ue=W.pop();if(ue!==ee){W[0]=ue;e:for(var B=0,ne=W.length,te=ne>>>1;B<te;){var se=2*(B+1)-1,he=W[se],ce=se+1,G=W[ce];if(0>s(he,ue))ce<ne&&0>s(G,he)?(W[B]=G,W[ce]=ue,B=ce):(W[B]=he,W[se]=ue,B=se);else if(ce<ne&&0>s(G,ue))W[B]=G,W[ce]=ue,B=ce;else break e}}return ee}function s(W,ee){var ue=W.sortIndex-ee.sortIndex;return ue!==0?ue:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,y=null,v=3,I=!1,A=!1,x=!1,R=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(W){for(var ee=t(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=W)r(f),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(f)}}function H(W){if(x=!1,z(W),!A)if(t(d)!==null)A=!0,pe(J);else{var ee=t(f);ee!==null&&Ee(H,ee.startTime-W)}}function J(W,ee){A=!1,x&&(x=!1,j(b),b=-1),I=!0;var ue=v;try{for(z(ee),y=t(d);y!==null&&(!(y.expirationTime>ee)||W&&!M());){var B=y.callback;if(typeof B=="function"){y.callback=null,v=y.priorityLevel;var ne=B(y.expirationTime<=ee);ee=n.unstable_now(),typeof ne=="function"?y.callback=ne:y===t(d)&&r(d),z(ee)}else r(d);y=t(d)}if(y!==null)var te=!0;else{var se=t(f);se!==null&&Ee(H,se.startTime-ee),te=!1}return te}finally{y=null,v=ue,I=!1}}var Z=!1,P=null,b=-1,N=5,O=-1;function M(){return!(n.unstable_now()-O<N)}function F(){if(P!==null){var W=n.unstable_now();O=W;var ee=!0;try{ee=P(!0,W)}finally{ee?D():(Z=!1,P=null)}}else Z=!1}var D;if(typeof V=="function")D=function(){V(F)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ve=me.port2;me.port1.onmessage=F,D=function(){ve.postMessage(null)}}else D=function(){R(F,0)};function pe(W){P=W,Z||(Z=!0,D())}function Ee(W,ee){b=R(function(){W(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){A||I||(A=!0,pe(J))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(W){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var ue=v;v=ee;try{return W()}finally{v=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ue=v;v=W;try{return ee()}finally{v=ue}},n.unstable_scheduleCallback=function(W,ee,ue){var B=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?B+ue:B):ue=B,W){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ue+ne,W={id:m++,callback:ee,priorityLevel:W,startTime:ue,expirationTime:ne,sortIndex:-1},ue>B?(W.sortIndex=ue,e(f,W),t(d)===null&&W===t(f)&&(x?(j(b),b=-1):x=!0,Ee(H,ue-B))):(W.sortIndex=ne,e(d,W),A||I||(A=!0,pe(J))),W},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(W){var ee=v;return function(){var ue=v;v=ee;try{return W.apply(this,arguments)}finally{v=ue}}}})(Zg)),Zg}var aT;function ID(){return aT||(aT=1,Jg.exports=TD()),Jg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function xD(){if(lT)return Fn;lT=1;var n=yp(),e=ID();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function v(i){return d.call(y,i)?!0:d.call(m,i)?!1:f.test(i)?y[i]=!0:(m[i]=!0,!1)}function I(i,a,c,p){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,a,c,p){if(a===null||typeof a>"u"||I(i,a,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function x(i,a,c,p,g,w,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=C}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){R[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];R[a]=new x(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){R[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){R[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){R[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){R[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){R[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){R[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){R[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(j,V);R[a]=new x(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(j,V);R[a]=new x(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(j,V);R[a]=new x(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){R[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),R.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){R[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function z(i,a,c,p){var g=R.hasOwnProperty(a)?R[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,c,g,p)&&(c=null),p||g===null?v(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(a=g.attributeName,p=g.attributeNamespace,c===null?i.removeAttribute(a):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,p?i.setAttributeNS(p,a,c):i.setAttribute(a,c))))}var H=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),Z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),M=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),W=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,B;function ne(i){if(B===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+i}var te=!1;function se(i,a){if(!i||te)return"";te=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var p=Y}Reflect.construct(i,[],a)}else{try{a.call()}catch(Y){p=Y}i.call(a.prototype)}else{try{throw Error()}catch(Y){p=Y}i()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var g=Y.stack.split(`
`),w=p.stack.split(`
`),C=g.length-1,L=w.length-1;1<=C&&0<=L&&g[C]!==w[L];)L--;for(;1<=C&&0<=L;C--,L--)if(g[C]!==w[L]){if(C!==1||L!==1)do if(C--,L--,0>L||g[C]!==w[L]){var U=`
`+g[C].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=C&&0<=L);break}}}finally{te=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ne(i):""}function he(i){switch(i.tag){case 5:return ne(i.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return i=se(i.type,!1),i;case 11:return i=se(i.type.render,!1),i;case 1:return i=se(i.type,!0),i;default:return""}}function ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case Z:return"Portal";case N:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ve:return a=i.displayName||null,a!==null?a:ce(i.type)||"Memo";case pe:a=i._payload,i=i._init;try{return ce(i(a))}catch{}}return null}function G(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(a);case 8:return a===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ye(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ie(i){var a=ye(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,w=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(C){p=""+C,w.call(this,C)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function je(i){i._valueTracker||(i._valueTracker=Ie(i))}function $e(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),p="";return i&&(p=ye(i)?i.checked?"true":"false":i.value),i=p,i!==c?(a.setValue(i),!0):!1}function Ue(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ht(i,a){var c=a.checked;return ue({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function Dn(i,a){var c=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;c=oe(a.value!=null?a.value:c),i._wrapperState={initialChecked:p,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function xn(i,a){a=a.checked,a!=null&&z(i,"checked",a,!1)}function Cn(i,a){xn(i,a);var c=oe(a.value),p=a.type;if(c!=null)p==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?It(i,a.type,c):a.hasOwnProperty("defaultValue")&&It(i,a.type,oe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function jt(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function It(i,a,c){(a!=="number"||Ue(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var xt=Array.isArray;function nn(i,a,c,p){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&p&&(i[c].defaultSelected=!0)}else{for(c=""+oe(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,p&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function hi(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function xo(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(xt(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:oe(c)}}function Td(i,a){var c=oe(a.value),p=oe(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),p!=null&&(i.defaultValue=""+p)}function fi(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function gc(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Aa(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?gc(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var pi,Id=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,p,g){MSApp.execUnsafeLocalFunction(function(){return i(a,c,p,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(pi=pi||document.createElement("div"),pi.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=pi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Co(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xd=["Webkit","ms","Moz","O"];Object.keys(mi).forEach(function(i){xd.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),mi[a]=mi[i]})});function gi(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||mi.hasOwnProperty(i)&&mi[i]?(""+a).trim():a+"px"}function Pa(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var p=c.indexOf("--")===0,g=gi(c,a[c],p);c==="float"&&(c="cssFloat"),p?i.setProperty(c,g):i[c]=g}}var yc=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wr(i,a){if(a){if(yc[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function ka(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yi=null;function Na(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xs=null,Cs=null,At=null;function _c(i){if(i=Hc(i)){if(typeof xs!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Jd(a),xs(i.stateNode,i.type,a))}}function _i(i){Cs?At?At.push(i):At=[i]:Cs=i}function vi(){if(Cs){var i=Cs,a=At;if(At=Cs=null,_c(i),a)for(i=0;i<a.length;i++)_c(a[i])}}function Cd(i,a){return i(a)}function Rd(){}var Br=!1;function bd(i,a,c){if(Br)return i(a,c);Br=!0;try{return Cd(i,a,c)}finally{Br=!1,(Cs!==null||At!==null)&&(Rd(),vi())}}function Ro(i,a){var c=i.stateNode;if(c===null)return null;var p=Jd(c);if(p===null)return null;c=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var wi=!1;if(u)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){wi=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{wi=!1}function Ad(i,a,c,p,g,w,C,L,U){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(c,Y)}catch(le){this.onError(le)}}var Rs=!1,$r=null,Da=!1,sr=null,Pd={onError:function(i){Rs=!0,$r=i}};function kd(i,a,c,p,g,w,C,L,U){Rs=!1,$r=null,Ad.apply(Pd,arguments)}function vc(i,a,c,p,g,w,C,L,U){if(kd.apply(this,arguments),Rs){if(Rs){var Y=$r;Rs=!1,$r=null}else throw Error(t(198));Da||(Da=!0,sr=Y)}}function Er(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function wc(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Nd(i){if(Er(i)!==i)throw Error(t(188))}function Dd(i){var a=i.alternate;if(!a){if(a=Er(i),a===null)throw Error(t(188));return a!==i?null:i}for(var c=i,p=a;;){var g=c.return;if(g===null)break;var w=g.alternate;if(w===null){if(p=g.return,p!==null){c=p;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===c)return Nd(g),i;if(w===p)return Nd(g),a;w=w.sibling}throw Error(t(188))}if(c.return!==p.return)c=g,p=w;else{for(var C=!1,L=g.child;L;){if(L===c){C=!0,c=g,p=w;break}if(L===p){C=!0,p=g,c=w;break}L=L.sibling}if(!C){for(L=w.child;L;){if(L===c){C=!0,c=w,p=g;break}if(L===p){C=!0,p=w,c=g;break}L=L.sibling}if(!C)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:a}function Od(i){return i=Dd(i),i!==null?bo(i):null}function bo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=bo(i);if(a!==null)return a;i=i.sibling}return null}var Ec=e.unstable_scheduleCallback,Oa=e.unstable_cancelCallback,Ao=e.unstable_shouldYield,bs=e.unstable_requestPaint,gt=e.unstable_now,Cm=e.unstable_getCurrentPriorityLevel,Ma=e.unstable_ImmediatePriority,Sc=e.unstable_UserBlockingPriority,Po=e.unstable_NormalPriority,Tc=e.unstable_LowPriority,La=e.unstable_IdlePriority,ko=null,Bn=null;function Md(i){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(ko,i,void 0,(i.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:No,Wr=Math.log,ir=Math.LN2;function No(i){return i>>>=0,i===0?32:31-(Wr(i)/ir|0)|0}var Hr=64,Si=4194304;function it(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function As(i,a){var c=i.pendingLanes;if(c===0)return 0;var p=0,g=i.suspendedLanes,w=i.pingedLanes,C=c&268435455;if(C!==0){var L=C&~g;L!==0?p=it(L):(w&=C,w!==0&&(p=it(w)))}else C=c&~g,C!==0?p=it(C):w!==0&&(p=it(w));if(p===0)return 0;if(a!==0&&a!==p&&(a&g)===0&&(g=p&-p,w=a&-a,g>=w||g===16&&(w&4194240)!==0))return a;if((p&4)!==0&&(p|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)c=31-$n(a),g=1<<c,p|=i[c],a&=~g;return p}function Do(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oo(i,a){for(var c=i.suspendedLanes,p=i.pingedLanes,g=i.expirationTimes,w=i.pendingLanes;0<w;){var C=31-$n(w),L=1<<C,U=g[C];U===-1?((L&c)===0||(L&p)!==0)&&(g[C]=Do(L,a)):U<=a&&(i.expiredLanes|=L),w&=~L}}function Ic(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function xc(){var i=Hr;return Hr<<=1,(Hr&4194240)===0&&(Hr=64),i}function Cc(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Mo(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-$n(a),i[a]=c}function Rm(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-$n(c),w=1<<g;a[g]=0,p[g]=-1,i[g]=-1,c&=~w}}function Rc(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var p=31-$n(c),g=1<<p;g&a|i[p]&a&&(i[p]|=a),c&=~g}}var Xe=0;function Gr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var bc,Va,Ac,Pc,kc,qr=!1,ja=[],Kr=null,Qr=null,rn=null,Lo=new Map,Ps=new Map,Wn=[],Ld="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ti(i,a){switch(i){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":Lo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(a.pointerId)}}function Sr(i,a,c,p,g,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:c,eventSystemFlags:p,nativeEvent:w,targetContainers:[g]},a!==null&&(a=Hc(a),a!==null&&Va(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function Vd(i,a,c,p,g){switch(a){case"focusin":return Kr=Sr(Kr,i,a,c,p,g),!0;case"dragenter":return Qr=Sr(Qr,i,a,c,p,g),!0;case"mouseover":return rn=Sr(rn,i,a,c,p,g),!0;case"pointerover":var w=g.pointerId;return Lo.set(w,Sr(Lo.get(w)||null,i,a,c,p,g)),!0;case"gotpointercapture":return w=g.pointerId,Ps.set(w,Sr(Ps.get(w)||null,i,a,c,p,g)),!0}return!1}function Fa(i){var a=Uo(i.target);if(a!==null){var c=Er(a);if(c!==null){if(a=c.tag,a===13){if(a=wc(c),a!==null){i.blockedOn=a,kc(i.priority,function(){Ac(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function dt(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Ua(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var p=new c.constructor(c.type,c);yi=p,c.target.dispatchEvent(p),yi=null}else return a=Hc(c),a!==null&&Va(a),i.blockedOn=c,!1;a.shift()}return!0}function jd(i,a,c){dt(i)&&c.delete(a)}function bm(){qr=!1,Kr!==null&&dt(Kr)&&(Kr=null),Qr!==null&&dt(Qr)&&(Qr=null),rn!==null&&dt(rn)&&(rn=null),Lo.forEach(jd),Ps.forEach(jd)}function Ii(i,a){i.blockedOn===a&&(i.blockedOn=null,qr||(qr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bm)))}function xi(i){function a(g){return Ii(g,i)}if(0<ja.length){Ii(ja[0],i);for(var c=1;c<ja.length;c++){var p=ja[c];p.blockedOn===i&&(p.blockedOn=null)}}for(Kr!==null&&Ii(Kr,i),Qr!==null&&Ii(Qr,i),rn!==null&&Ii(rn,i),Lo.forEach(a),Ps.forEach(a),c=0;c<Wn.length;c++)p=Wn[c],p.blockedOn===i&&(p.blockedOn=null);for(;0<Wn.length&&(c=Wn[0],c.blockedOn===null);)Fa(c),c.blockedOn===null&&Wn.shift()}var ks=H.ReactCurrentBatchConfig,Ns=!0;function Yr(i,a,c,p){var g=Xe,w=ks.transition;ks.transition=null;try{Xe=1,Nc(i,a,c,p)}finally{Xe=g,ks.transition=w}}function Fd(i,a,c,p){var g=Xe,w=ks.transition;ks.transition=null;try{Xe=4,Nc(i,a,c,p)}finally{Xe=g,ks.transition=w}}function Nc(i,a,c,p){if(Ns){var g=Ua(i,a,c,p);if(g===null)Fm(i,a,p,Xr,c),Ti(i,p);else if(Vd(g,i,a,c,p))p.stopPropagation();else if(Ti(i,p),a&4&&-1<Ld.indexOf(i)){for(;g!==null;){var w=Hc(g);if(w!==null&&bc(w),w=Ua(i,a,c,p),w===null&&Fm(i,a,p,Xr,c),w===g)break;g=w}g!==null&&p.stopPropagation()}else Fm(i,a,p,null,c)}}var Xr=null;function Ua(i,a,c,p){if(Xr=null,i=Na(p),i=Uo(i),i!==null)if(a=Er(i),a===null)i=null;else if(c=a.tag,c===13){if(i=wc(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Xr=i,null}function za(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cm()){case Ma:return 1;case Sc:return 4;case Po:case Tc:return 16;case La:return 536870912;default:return 16}default:return 16}}var Hn=null,Ba=null,Ds=null;function Ud(){if(Ds)return Ds;var i,a=Ba,c=a.length,p,g="value"in Hn?Hn.value:Hn.textContent,w=g.length;for(i=0;i<c&&a[i]===g[i];i++);var C=c-i;for(p=1;p<=C&&a[c-p]===g[w-p];p++);return Ds=g.slice(i,1<p?1-p:void 0)}function Vo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Jr(){return!0}function Dc(){return!1}function hn(i){function a(c,p,g,w,C){this._reactName=c,this._targetInst=g,this.type=p,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Jr:Dc,this.isPropagationStopped=Dc,this}return ue(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),a}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=hn(Zr),Ci=ue({},Zr,{view:0,detail:0}),$a=hn(Ci),Wa,Ha,Gn,Fo=ue({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ze,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Gn&&(Gn&&i.type==="mousemove"?(Wa=i.screenX-Gn.screenX,Ha=i.screenY-Gn.screenY):Ha=Wa=0,Gn=i),Wa)},movementY:function(i){return"movementY"in i?i.movementY:Ha}}),Oc=hn(Fo),zd=ue({},Fo,{dataTransfer:0}),Bd=hn(zd),Ga=ue({},Ci,{relatedTarget:0}),sn=hn(Ga),$d=ue({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wd=hn($d),Ri=ue({},Zr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=hn(Ri),E=ue({},Zr,{data:0}),T=hn(E),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=X[i])?!!a[i]:!1}function ze(){return ge}var Mt=ue({},Ci,{key:function(i){if(i.key){var a=k[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Vo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?K[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ze,charCode:function(i){return i.type==="keypress"?Vo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Vo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ct=hn(Mt),Ft=ue({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qn=hn(Ft),Os=ue({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ze}),es=hn(Os),ts=ue({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),qa=hn(ts),Mc=ue({},Fo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),f1=hn(Mc),p1=[9,13,27,32],Am=u&&"CompositionEvent"in window,Lc=null;u&&"documentMode"in document&&(Lc=document.documentMode);var m1=u&&"TextEvent"in window&&!Lc,Kw=u&&(!Am||Lc&&8<Lc&&11>=Lc),Qw=" ",Yw=!1;function Xw(i,a){switch(i){case"keyup":return p1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ka=!1;function g1(i,a){switch(i){case"compositionend":return Jw(a);case"keypress":return a.which!==32?null:(Yw=!0,Qw);case"textInput":return i=a.data,i===Qw&&Yw?null:i;default:return null}}function y1(i,a){if(Ka)return i==="compositionend"||!Am&&Xw(i,a)?(i=Ud(),Ds=Ba=Hn=null,Ka=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Kw&&a.locale!=="ko"?null:a.data;default:return null}}var _1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zw(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!_1[i.type]:a==="textarea"}function eE(i,a,c,p){_i(p),a=Qd(a,"onChange"),0<a.length&&(c=new jo("onChange","change",null,c,p),i.push({event:c,listeners:a}))}var Vc=null,jc=null;function v1(i){_E(i,0)}function Hd(i){var a=Za(i);if($e(a))return i}function w1(i,a){if(i==="change")return a}var tE=!1;if(u){var Pm;if(u){var km="oninput"in document;if(!km){var nE=document.createElement("div");nE.setAttribute("oninput","return;"),km=typeof nE.oninput=="function"}Pm=km}else Pm=!1;tE=Pm&&(!document.documentMode||9<document.documentMode)}function rE(){Vc&&(Vc.detachEvent("onpropertychange",sE),jc=Vc=null)}function sE(i){if(i.propertyName==="value"&&Hd(jc)){var a=[];eE(a,jc,i,Na(i)),bd(v1,a)}}function E1(i,a,c){i==="focusin"?(rE(),Vc=a,jc=c,Vc.attachEvent("onpropertychange",sE)):i==="focusout"&&rE()}function S1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hd(jc)}function T1(i,a){if(i==="click")return Hd(a)}function I1(i,a){if(i==="input"||i==="change")return Hd(a)}function x1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Tr=typeof Object.is=="function"?Object.is:x1;function Fc(i,a){if(Tr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),p=Object.keys(a);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var g=c[p];if(!d.call(a,g)||!Tr(i[g],a[g]))return!1}return!0}function iE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function oE(i,a){var c=iE(i);i=0;for(var p;c;){if(c.nodeType===3){if(p=i+c.textContent.length,i<=a&&p>=a)return{node:c,offset:a-i};i=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=iE(c)}}function aE(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?aE(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function lE(){for(var i=window,a=Ue();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=Ue(i.document)}return a}function Nm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function C1(i){var a=lE(),c=i.focusedElem,p=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&aE(c.ownerDocument.documentElement,c)){if(p!==null&&Nm(c)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,w=Math.min(p.start,g);p=p.end===void 0?w:Math.min(p.end,g),!i.extend&&w>p&&(g=p,p=w,w=g),g=oE(c,w);var C=oE(c,p);g&&C&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),w>p?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var R1=u&&"documentMode"in document&&11>=document.documentMode,Qa=null,Dm=null,Uc=null,Om=!1;function cE(i,a,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Om||Qa==null||Qa!==Ue(p)||(p=Qa,"selectionStart"in p&&Nm(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Uc&&Fc(Uc,p)||(Uc=p,p=Qd(Dm,"onSelect"),0<p.length&&(a=new jo("onSelect","select",null,a,c),i.push({event:a,listeners:p}),a.target=Qa)))}function Gd(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var Ya={animationend:Gd("Animation","AnimationEnd"),animationiteration:Gd("Animation","AnimationIteration"),animationstart:Gd("Animation","AnimationStart"),transitionend:Gd("Transition","TransitionEnd")},Mm={},uE={};u&&(uE=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function qd(i){if(Mm[i])return Mm[i];if(!Ya[i])return i;var a=Ya[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in uE)return Mm[i]=a[c];return i}var dE=qd("animationend"),hE=qd("animationiteration"),fE=qd("animationstart"),pE=qd("transitionend"),mE=new Map,gE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(i,a){mE.set(i,a),o(a,[i])}for(var Lm=0;Lm<gE.length;Lm++){var Vm=gE[Lm],b1=Vm.toLowerCase(),A1=Vm[0].toUpperCase()+Vm.slice(1);bi(b1,"on"+A1)}bi(dE,"onAnimationEnd"),bi(hE,"onAnimationIteration"),bi(fE,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(pE,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P1=new Set("cancel close invalid load scroll toggle".split(" ").concat(zc));function yE(i,a,c){var p=i.type||"unknown-event";i.currentTarget=c,vc(p,a,void 0,i),i.currentTarget=null}function _E(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var p=i[c],g=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var C=p.length-1;0<=C;C--){var L=p[C],U=L.instance,Y=L.currentTarget;if(L=L.listener,U!==w&&g.isPropagationStopped())break e;yE(g,L,Y),w=U}else for(C=0;C<p.length;C++){if(L=p[C],U=L.instance,Y=L.currentTarget,L=L.listener,U!==w&&g.isPropagationStopped())break e;yE(g,L,Y),w=U}}}if(Da)throw i=sr,Da=!1,sr=null,i}function yt(i,a){var c=a[Hm];c===void 0&&(c=a[Hm]=new Set);var p=i+"__bubble";c.has(p)||(vE(a,i,2,!1),c.add(p))}function jm(i,a,c){var p=0;a&&(p|=4),vE(c,i,p,a)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Bc(i){if(!i[Kd]){i[Kd]=!0,r.forEach(function(c){c!=="selectionchange"&&(P1.has(c)||jm(c,!1,i),jm(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Kd]||(a[Kd]=!0,jm("selectionchange",!1,a))}}function vE(i,a,c,p){switch(za(a)){case 1:var g=Yr;break;case 4:g=Fd;break;default:g=Nc}c=g.bind(null,a,c,i),g=void 0,!wi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function Fm(i,a,c,p,g){var w=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var L=p.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(C===4)for(C=p.return;C!==null;){var U=C.tag;if((U===3||U===4)&&(U=C.stateNode.containerInfo,U===g||U.nodeType===8&&U.parentNode===g))return;C=C.return}for(;L!==null;){if(C=Uo(L),C===null)return;if(U=C.tag,U===5||U===6){p=w=C;continue e}L=L.parentNode}}p=p.return}bd(function(){var Y=w,le=Na(c),de=[];e:{var ae=mE.get(i);if(ae!==void 0){var Se=jo,Ce=i;switch(i){case"keypress":if(Vo(c)===0)break e;case"keydown":case"keyup":Se=ct;break;case"focusin":Ce="focus",Se=sn;break;case"focusout":Ce="blur",Se=sn;break;case"beforeblur":case"afterblur":Se=sn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=es;break;case dE:case hE:case fE:Se=Wd;break;case pE:Se=qa;break;case"scroll":Se=$a;break;case"wheel":Se=f1;break;case"copy":case"cut":case"paste":Se=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=qn}var Pe=(a&4)!==0,Lt=!Pe&&i==="scroll",q=Pe?ae!==null?ae+"Capture":null:ae;Pe=[];for(var $=Y,Q;$!==null;){Q=$;var fe=Q.stateNode;if(Q.tag===5&&fe!==null&&(Q=fe,q!==null&&(fe=Ro($,q),fe!=null&&Pe.push($c($,fe,Q)))),Lt)break;$=$.return}0<Pe.length&&(ae=new Se(ae,Ce,null,c,le),de.push({event:ae,listeners:Pe}))}}if((a&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",Se=i==="mouseout"||i==="pointerout",ae&&c!==yi&&(Ce=c.relatedTarget||c.fromElement)&&(Uo(Ce)||Ce[Ms]))break e;if((Se||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,Se?(Ce=c.relatedTarget||c.toElement,Se=Y,Ce=Ce?Uo(Ce):null,Ce!==null&&(Lt=Er(Ce),Ce!==Lt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Se=null,Ce=Y),Se!==Ce)){if(Pe=Oc,fe="onMouseLeave",q="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=qn,fe="onPointerLeave",q="onPointerEnter",$="pointer"),Lt=Se==null?ae:Za(Se),Q=Ce==null?ae:Za(Ce),ae=new Pe(fe,$+"leave",Se,c,le),ae.target=Lt,ae.relatedTarget=Q,fe=null,Uo(le)===Y&&(Pe=new Pe(q,$+"enter",Ce,c,le),Pe.target=Q,Pe.relatedTarget=Lt,fe=Pe),Lt=fe,Se&&Ce)t:{for(Pe=Se,q=Ce,$=0,Q=Pe;Q;Q=Xa(Q))$++;for(Q=0,fe=q;fe;fe=Xa(fe))Q++;for(;0<$-Q;)Pe=Xa(Pe),$--;for(;0<Q-$;)q=Xa(q),Q--;for(;$--;){if(Pe===q||q!==null&&Pe===q.alternate)break t;Pe=Xa(Pe),q=Xa(q)}Pe=null}else Pe=null;Se!==null&&wE(de,ae,Se,Pe,!1),Ce!==null&&Lt!==null&&wE(de,Lt,Ce,Pe,!0)}}e:{if(ae=Y?Za(Y):window,Se=ae.nodeName&&ae.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ae.type==="file")var ke=w1;else if(Zw(ae))if(tE)ke=I1;else{ke=S1;var De=E1}else(Se=ae.nodeName)&&Se.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(ke=T1);if(ke&&(ke=ke(i,Y))){eE(de,ke,c,le);break e}De&&De(i,ae,Y),i==="focusout"&&(De=ae._wrapperState)&&De.controlled&&ae.type==="number"&&It(ae,"number",ae.value)}switch(De=Y?Za(Y):window,i){case"focusin":(Zw(De)||De.contentEditable==="true")&&(Qa=De,Dm=Y,Uc=null);break;case"focusout":Uc=Dm=Qa=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,cE(de,c,le);break;case"selectionchange":if(R1)break;case"keydown":case"keyup":cE(de,c,le)}var Oe;if(Am)e:{switch(i){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ka?Xw(i,c)&&(Ve="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(Kw&&c.locale!=="ko"&&(Ka||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ka&&(Oe=Ud()):(Hn=le,Ba="value"in Hn?Hn.value:Hn.textContent,Ka=!0)),De=Qd(Y,Ve),0<De.length&&(Ve=new T(Ve,i,null,c,le),de.push({event:Ve,listeners:De}),Oe?Ve.data=Oe:(Oe=Jw(c),Oe!==null&&(Ve.data=Oe)))),(Oe=m1?g1(i,c):y1(i,c))&&(Y=Qd(Y,"onBeforeInput"),0<Y.length&&(le=new T("onBeforeInput","beforeinput",null,c,le),de.push({event:le,listeners:Y}),le.data=Oe))}_E(de,a)})}function $c(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Qd(i,a){for(var c=a+"Capture",p=[];i!==null;){var g=i,w=g.stateNode;g.tag===5&&w!==null&&(g=w,w=Ro(i,c),w!=null&&p.unshift($c(i,w,g)),w=Ro(i,a),w!=null&&p.push($c(i,w,g))),i=i.return}return p}function Xa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wE(i,a,c,p,g){for(var w=a._reactName,C=[];c!==null&&c!==p;){var L=c,U=L.alternate,Y=L.stateNode;if(U!==null&&U===p)break;L.tag===5&&Y!==null&&(L=Y,g?(U=Ro(c,w),U!=null&&C.unshift($c(c,U,L))):g||(U=Ro(c,w),U!=null&&C.push($c(c,U,L)))),c=c.return}C.length!==0&&i.push({event:a,listeners:C})}var k1=/\r\n?/g,N1=/\u0000|\uFFFD/g;function EE(i){return(typeof i=="string"?i:""+i).replace(k1,`
`).replace(N1,"")}function Yd(i,a,c){if(a=EE(a),EE(i)!==a&&c)throw Error(t(425))}function Xd(){}var Um=null,zm=null;function Bm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var $m=typeof setTimeout=="function"?setTimeout:void 0,D1=typeof clearTimeout=="function"?clearTimeout:void 0,SE=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof SE<"u"?function(i){return SE.resolve(null).then(i).catch(M1)}:$m;function M1(i){setTimeout(function(){throw i})}function Wm(i,a){var c=a,p=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(p===0){i.removeChild(g),xi(a);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=g}while(c);xi(a)}function Ai(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function TE(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var Ja=Math.random().toString(36).slice(2),ns="__reactFiber$"+Ja,Wc="__reactProps$"+Ja,Ms="__reactContainer$"+Ja,Hm="__reactEvents$"+Ja,L1="__reactListeners$"+Ja,V1="__reactHandles$"+Ja;function Uo(i){var a=i[ns];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Ms]||c[ns]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=TE(i);i!==null;){if(c=i[ns])return c;i=TE(i)}return a}i=c,c=i.parentNode}return null}function Hc(i){return i=i[ns]||i[Ms],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Za(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Jd(i){return i[Wc]||null}var Gm=[],el=-1;function Pi(i){return{current:i}}function _t(i){0>el||(i.current=Gm[el],Gm[el]=null,el--)}function ft(i,a){el++,Gm[el]=i.current,i.current=a}var ki={},fn=Pi(ki),On=Pi(!1),zo=ki;function tl(i,a){var c=i.type.contextTypes;if(!c)return ki;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},w;for(w in c)g[w]=a[w];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function Mn(i){return i=i.childContextTypes,i!=null}function Zd(){_t(On),_t(fn)}function IE(i,a,c){if(fn.current!==ki)throw Error(t(168));ft(fn,a),ft(On,c)}function xE(i,a,c){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(t(108,G(i)||"Unknown",g));return ue({},c,p)}function eh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ki,zo=fn.current,ft(fn,i),ft(On,On.current),!0}function CE(i,a,c){var p=i.stateNode;if(!p)throw Error(t(169));c?(i=xE(i,a,zo),p.__reactInternalMemoizedMergedChildContext=i,_t(On),_t(fn),ft(fn,i)):_t(On),ft(On,c)}var Ls=null,th=!1,qm=!1;function RE(i){Ls===null?Ls=[i]:Ls.push(i)}function j1(i){th=!0,RE(i)}function Ni(){if(!qm&&Ls!==null){qm=!0;var i=0,a=Xe;try{var c=Ls;for(Xe=1;i<c.length;i++){var p=c[i];do p=p(!0);while(p!==null)}Ls=null,th=!1}catch(g){throw Ls!==null&&(Ls=Ls.slice(i+1)),Ec(Ma,Ni),g}finally{Xe=a,qm=!1}}return null}var nl=[],rl=0,nh=null,rh=0,or=[],ar=0,Bo=null,Vs=1,js="";function $o(i,a){nl[rl++]=rh,nl[rl++]=nh,nh=i,rh=a}function bE(i,a,c){or[ar++]=Vs,or[ar++]=js,or[ar++]=Bo,Bo=i;var p=Vs;i=js;var g=32-$n(p)-1;p&=~(1<<g),c+=1;var w=32-$n(a)+g;if(30<w){var C=g-g%5;w=(p&(1<<C)-1).toString(32),p>>=C,g-=C,Vs=1<<32-$n(a)+g|c<<g|p,js=w+i}else Vs=1<<w|c<<g|p,js=i}function Km(i){i.return!==null&&($o(i,1),bE(i,1,0))}function Qm(i){for(;i===nh;)nh=nl[--rl],nl[rl]=null,rh=nl[--rl],nl[rl]=null;for(;i===Bo;)Bo=or[--ar],or[ar]=null,js=or[--ar],or[ar]=null,Vs=or[--ar],or[ar]=null}var Kn=null,Qn=null,Tt=!1,Ir=null;function AE(i,a){var c=dr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function PE(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Kn=i,Qn=Ai(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Kn=i,Qn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Bo!==null?{id:Vs,overflow:js}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=dr(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,Kn=i,Qn=null,!0):!1;default:return!1}}function Ym(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Xm(i){if(Tt){var a=Qn;if(a){var c=a;if(!PE(i,a)){if(Ym(i))throw Error(t(418));a=Ai(c.nextSibling);var p=Kn;a&&PE(i,a)?AE(p,c):(i.flags=i.flags&-4097|2,Tt=!1,Kn=i)}}else{if(Ym(i))throw Error(t(418));i.flags=i.flags&-4097|2,Tt=!1,Kn=i}}}function kE(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Kn=i}function sh(i){if(i!==Kn)return!1;if(!Tt)return kE(i),Tt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Bm(i.type,i.memoizedProps)),a&&(a=Qn)){if(Ym(i))throw NE(),Error(t(418));for(;a;)AE(i,a),a=Ai(a.nextSibling)}if(kE(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Qn=Ai(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Qn=null}}else Qn=Kn?Ai(i.stateNode.nextSibling):null;return!0}function NE(){for(var i=Qn;i;)i=Ai(i.nextSibling)}function sl(){Qn=Kn=null,Tt=!1}function Jm(i){Ir===null?Ir=[i]:Ir.push(i)}var F1=H.ReactCurrentBatchConfig;function Gc(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,i));var g=p,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(C){var L=g.refs;C===null?delete L[w]:L[w]=C},a._stringRef=w,a)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function ih(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function DE(i){var a=i._init;return a(i._payload)}function OE(i){function a(q,$){if(i){var Q=q.deletions;Q===null?(q.deletions=[$],q.flags|=16):Q.push($)}}function c(q,$){if(!i)return null;for(;$!==null;)a(q,$),$=$.sibling;return null}function p(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function g(q,$){return q=Ui(q,$),q.index=0,q.sibling=null,q}function w(q,$,Q){return q.index=Q,i?(Q=q.alternate,Q!==null?(Q=Q.index,Q<$?(q.flags|=2,$):Q):(q.flags|=2,$)):(q.flags|=1048576,$)}function C(q){return i&&q.alternate===null&&(q.flags|=2),q}function L(q,$,Q,fe){return $===null||$.tag!==6?($=$g(Q,q.mode,fe),$.return=q,$):($=g($,Q),$.return=q,$)}function U(q,$,Q,fe){var ke=Q.type;return ke===P?le(q,$,Q.props.children,fe,Q.key):$!==null&&($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===pe&&DE(ke)===$.type)?(fe=g($,Q.props),fe.ref=Gc(q,$,Q),fe.return=q,fe):(fe=Ah(Q.type,Q.key,Q.props,null,q.mode,fe),fe.ref=Gc(q,$,Q),fe.return=q,fe)}function Y(q,$,Q,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=Wg(Q,q.mode,fe),$.return=q,$):($=g($,Q.children||[]),$.return=q,$)}function le(q,$,Q,fe,ke){return $===null||$.tag!==7?($=Xo(Q,q.mode,fe,ke),$.return=q,$):($=g($,Q),$.return=q,$)}function de(q,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=$g(""+$,q.mode,Q),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case J:return Q=Ah($.type,$.key,$.props,null,q.mode,Q),Q.ref=Gc(q,null,$),Q.return=q,Q;case Z:return $=Wg($,q.mode,Q),$.return=q,$;case pe:var fe=$._init;return de(q,fe($._payload),Q)}if(xt($)||ee($))return $=Xo($,q.mode,Q,null),$.return=q,$;ih(q,$)}return null}function ae(q,$,Q,fe){var ke=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return ke!==null?null:L(q,$,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case J:return Q.key===ke?U(q,$,Q,fe):null;case Z:return Q.key===ke?Y(q,$,Q,fe):null;case pe:return ke=Q._init,ae(q,$,ke(Q._payload),fe)}if(xt(Q)||ee(Q))return ke!==null?null:le(q,$,Q,fe,null);ih(q,Q)}return null}function Se(q,$,Q,fe,ke){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return q=q.get(Q)||null,L($,q,""+fe,ke);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case J:return q=q.get(fe.key===null?Q:fe.key)||null,U($,q,fe,ke);case Z:return q=q.get(fe.key===null?Q:fe.key)||null,Y($,q,fe,ke);case pe:var De=fe._init;return Se(q,$,Q,De(fe._payload),ke)}if(xt(fe)||ee(fe))return q=q.get(Q)||null,le($,q,fe,ke,null);ih($,fe)}return null}function Ce(q,$,Q,fe){for(var ke=null,De=null,Oe=$,Ve=$=0,Xt=null;Oe!==null&&Ve<Q.length;Ve++){Oe.index>Ve?(Xt=Oe,Oe=null):Xt=Oe.sibling;var st=ae(q,Oe,Q[Ve],fe);if(st===null){Oe===null&&(Oe=Xt);break}i&&Oe&&st.alternate===null&&a(q,Oe),$=w(st,$,Ve),De===null?ke=st:De.sibling=st,De=st,Oe=Xt}if(Ve===Q.length)return c(q,Oe),Tt&&$o(q,Ve),ke;if(Oe===null){for(;Ve<Q.length;Ve++)Oe=de(q,Q[Ve],fe),Oe!==null&&($=w(Oe,$,Ve),De===null?ke=Oe:De.sibling=Oe,De=Oe);return Tt&&$o(q,Ve),ke}for(Oe=p(q,Oe);Ve<Q.length;Ve++)Xt=Se(Oe,q,Ve,Q[Ve],fe),Xt!==null&&(i&&Xt.alternate!==null&&Oe.delete(Xt.key===null?Ve:Xt.key),$=w(Xt,$,Ve),De===null?ke=Xt:De.sibling=Xt,De=Xt);return i&&Oe.forEach(function(zi){return a(q,zi)}),Tt&&$o(q,Ve),ke}function Pe(q,$,Q,fe){var ke=ee(Q);if(typeof ke!="function")throw Error(t(150));if(Q=ke.call(Q),Q==null)throw Error(t(151));for(var De=ke=null,Oe=$,Ve=$=0,Xt=null,st=Q.next();Oe!==null&&!st.done;Ve++,st=Q.next()){Oe.index>Ve?(Xt=Oe,Oe=null):Xt=Oe.sibling;var zi=ae(q,Oe,st.value,fe);if(zi===null){Oe===null&&(Oe=Xt);break}i&&Oe&&zi.alternate===null&&a(q,Oe),$=w(zi,$,Ve),De===null?ke=zi:De.sibling=zi,De=zi,Oe=Xt}if(st.done)return c(q,Oe),Tt&&$o(q,Ve),ke;if(Oe===null){for(;!st.done;Ve++,st=Q.next())st=de(q,st.value,fe),st!==null&&($=w(st,$,Ve),De===null?ke=st:De.sibling=st,De=st);return Tt&&$o(q,Ve),ke}for(Oe=p(q,Oe);!st.done;Ve++,st=Q.next())st=Se(Oe,q,Ve,st.value,fe),st!==null&&(i&&st.alternate!==null&&Oe.delete(st.key===null?Ve:st.key),$=w(st,$,Ve),De===null?ke=st:De.sibling=st,De=st);return i&&Oe.forEach(function(_D){return a(q,_D)}),Tt&&$o(q,Ve),ke}function Lt(q,$,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===P&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case J:e:{for(var ke=Q.key,De=$;De!==null;){if(De.key===ke){if(ke=Q.type,ke===P){if(De.tag===7){c(q,De.sibling),$=g(De,Q.props.children),$.return=q,q=$;break e}}else if(De.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===pe&&DE(ke)===De.type){c(q,De.sibling),$=g(De,Q.props),$.ref=Gc(q,De,Q),$.return=q,q=$;break e}c(q,De);break}else a(q,De);De=De.sibling}Q.type===P?($=Xo(Q.props.children,q.mode,fe,Q.key),$.return=q,q=$):(fe=Ah(Q.type,Q.key,Q.props,null,q.mode,fe),fe.ref=Gc(q,$,Q),fe.return=q,q=fe)}return C(q);case Z:e:{for(De=Q.key;$!==null;){if($.key===De)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){c(q,$.sibling),$=g($,Q.children||[]),$.return=q,q=$;break e}else{c(q,$);break}else a(q,$);$=$.sibling}$=Wg(Q,q.mode,fe),$.return=q,q=$}return C(q);case pe:return De=Q._init,Lt(q,$,De(Q._payload),fe)}if(xt(Q))return Ce(q,$,Q,fe);if(ee(Q))return Pe(q,$,Q,fe);ih(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,$!==null&&$.tag===6?(c(q,$.sibling),$=g($,Q),$.return=q,q=$):(c(q,$),$=$g(Q,q.mode,fe),$.return=q,q=$),C(q)):c(q,$)}return Lt}var il=OE(!0),ME=OE(!1),oh=Pi(null),ah=null,ol=null,Zm=null;function eg(){Zm=ol=ah=null}function tg(i){var a=oh.current;_t(oh),i._currentValue=a}function ng(i,a,c){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===c)break;i=i.return}}function al(i,a){ah=i,Zm=ol=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(Ln=!0),i.firstContext=null)}function lr(i){var a=i._currentValue;if(Zm!==i)if(i={context:i,memoizedValue:a,next:null},ol===null){if(ah===null)throw Error(t(308));ol=i,ah.dependencies={lanes:0,firstContext:i}}else ol=ol.next=i;return a}var Wo=null;function rg(i){Wo===null?Wo=[i]:Wo.push(i)}function LE(i,a,c,p){var g=a.interleaved;return g===null?(c.next=c,rg(a)):(c.next=g.next,g.next=c),a.interleaved=c,Fs(i,p)}function Fs(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Di=!1;function sg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VE(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Us(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Oi(i,a,c){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(nt&2)!==0){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,Fs(i,c)}return g=p.interleaved,g===null?(a.next=a,rg(p)):(a.next=g.next,g.next=a),p.interleaved=a,Fs(i,c)}function lh(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,c|=p,a.lanes=c,Rc(i,c)}}function jE(i,a){var c=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var g=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var C={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?g=w=C:w=w.next=C,c=c.next}while(c!==null);w===null?g=w=a:w=w.next=a}else g=w=a;c={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:p.shared,effects:p.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function ch(i,a,c,p){var g=i.updateQueue;Di=!1;var w=g.firstBaseUpdate,C=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var U=L,Y=U.next;U.next=null,C===null?w=Y:C.next=Y,C=U;var le=i.alternate;le!==null&&(le=le.updateQueue,L=le.lastBaseUpdate,L!==C&&(L===null?le.firstBaseUpdate=Y:L.next=Y,le.lastBaseUpdate=U))}if(w!==null){var de=g.baseState;C=0,le=Y=U=null,L=w;do{var ae=L.lane,Se=L.eventTime;if((p&ae)===ae){le!==null&&(le=le.next={eventTime:Se,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var Ce=i,Pe=L;switch(ae=a,Se=c,Pe.tag){case 1:if(Ce=Pe.payload,typeof Ce=="function"){de=Ce.call(Se,de,ae);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Pe.payload,ae=typeof Ce=="function"?Ce.call(Se,de,ae):Ce,ae==null)break e;de=ue({},de,ae);break e;case 2:Di=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,ae=g.effects,ae===null?g.effects=[L]:ae.push(L))}else Se={eventTime:Se,lane:ae,tag:L.tag,payload:L.payload,callback:L.callback,next:null},le===null?(Y=le=Se,U=de):le=le.next=Se,C|=ae;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;ae=L,L=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(le===null&&(U=de),g.baseState=U,g.firstBaseUpdate=Y,g.lastBaseUpdate=le,a=g.shared.interleaved,a!==null){g=a;do C|=g.lane,g=g.next;while(g!==a)}else w===null&&(g.shared.lanes=0);qo|=C,i.lanes=C,i.memoizedState=de}}function FE(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],g=p.callback;if(g!==null){if(p.callback=null,p=c,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var qc={},rs=Pi(qc),Kc=Pi(qc),Qc=Pi(qc);function Ho(i){if(i===qc)throw Error(t(174));return i}function ig(i,a){switch(ft(Qc,a),ft(Kc,i),ft(rs,qc),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Aa(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Aa(a,i)}_t(rs),ft(rs,a)}function ll(){_t(rs),_t(Kc),_t(Qc)}function UE(i){Ho(Qc.current);var a=Ho(rs.current),c=Aa(a,i.type);a!==c&&(ft(Kc,i),ft(rs,c))}function og(i){Kc.current===i&&(_t(rs),_t(Kc))}var Ct=Pi(0);function uh(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ag=[];function lg(){for(var i=0;i<ag.length;i++)ag[i]._workInProgressVersionPrimary=null;ag.length=0}var dh=H.ReactCurrentDispatcher,cg=H.ReactCurrentBatchConfig,Go=0,Rt=null,Ht=null,Qt=null,hh=!1,Yc=!1,Xc=0,U1=0;function pn(){throw Error(t(321))}function ug(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!Tr(i[c],a[c]))return!1;return!0}function dg(i,a,c,p,g,w){if(Go=w,Rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,dh.current=i===null||i.memoizedState===null?W1:H1,i=c(p,g),Yc){w=0;do{if(Yc=!1,Xc=0,25<=w)throw Error(t(301));w+=1,Qt=Ht=null,a.updateQueue=null,dh.current=G1,i=c(p,g)}while(Yc)}if(dh.current=mh,a=Ht!==null&&Ht.next!==null,Go=0,Qt=Ht=Rt=null,hh=!1,a)throw Error(t(300));return i}function hg(){var i=Xc!==0;return Xc=0,i}function ss(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Rt.memoizedState=Qt=i:Qt=Qt.next=i,Qt}function cr(){if(Ht===null){var i=Rt.alternate;i=i!==null?i.memoizedState:null}else i=Ht.next;var a=Qt===null?Rt.memoizedState:Qt.next;if(a!==null)Qt=a,Ht=i;else{if(i===null)throw Error(t(310));Ht=i,i={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Qt===null?Rt.memoizedState=Qt=i:Qt=Qt.next=i}return Qt}function Jc(i,a){return typeof a=="function"?a(i):a}function fg(i){var a=cr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=Ht,g=p.baseQueue,w=c.pending;if(w!==null){if(g!==null){var C=g.next;g.next=w.next,w.next=C}p.baseQueue=g=w,c.pending=null}if(g!==null){w=g.next,p=p.baseState;var L=C=null,U=null,Y=w;do{var le=Y.lane;if((Go&le)===le)U!==null&&(U=U.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:i(p,Y.action);else{var de={lane:le,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};U===null?(L=U=de,C=p):U=U.next=de,Rt.lanes|=le,qo|=le}Y=Y.next}while(Y!==null&&Y!==w);U===null?C=p:U.next=L,Tr(p,a.memoizedState)||(Ln=!0),a.memoizedState=p,a.baseState=C,a.baseQueue=U,c.lastRenderedState=p}if(i=c.interleaved,i!==null){g=i;do w=g.lane,Rt.lanes|=w,qo|=w,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function pg(i){var a=cr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=c.dispatch,g=c.pending,w=a.memoizedState;if(g!==null){c.pending=null;var C=g=g.next;do w=i(w,C.action),C=C.next;while(C!==g);Tr(w,a.memoizedState)||(Ln=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),c.lastRenderedState=w}return[w,p]}function zE(){}function BE(i,a){var c=Rt,p=cr(),g=a(),w=!Tr(p.memoizedState,g);if(w&&(p.memoizedState=g,Ln=!0),p=p.queue,mg(HE.bind(null,c,p,i),[i]),p.getSnapshot!==a||w||Qt!==null&&Qt.memoizedState.tag&1){if(c.flags|=2048,Zc(9,WE.bind(null,c,p,g,a),void 0,null),Yt===null)throw Error(t(349));(Go&30)!==0||$E(c,a,g)}return g}function $E(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Rt.updateQueue,a===null?(a={lastEffect:null,stores:null},Rt.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function WE(i,a,c,p){a.value=c,a.getSnapshot=p,GE(a)&&qE(i)}function HE(i,a,c){return c(function(){GE(a)&&qE(i)})}function GE(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!Tr(i,c)}catch{return!0}}function qE(i){var a=Fs(i,1);a!==null&&br(a,i,1,-1)}function KE(i){var a=ss();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jc,lastRenderedState:i},a.queue=i,i=i.dispatch=$1.bind(null,Rt,i),[a.memoizedState,i]}function Zc(i,a,c,p){return i={tag:i,create:a,destroy:c,deps:p,next:null},a=Rt.updateQueue,a===null?(a={lastEffect:null,stores:null},Rt.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(p=c.next,c.next=i,i.next=p,a.lastEffect=i)),i}function QE(){return cr().memoizedState}function fh(i,a,c,p){var g=ss();Rt.flags|=i,g.memoizedState=Zc(1|a,c,void 0,p===void 0?null:p)}function ph(i,a,c,p){var g=cr();p=p===void 0?null:p;var w=void 0;if(Ht!==null){var C=Ht.memoizedState;if(w=C.destroy,p!==null&&ug(p,C.deps)){g.memoizedState=Zc(a,c,w,p);return}}Rt.flags|=i,g.memoizedState=Zc(1|a,c,w,p)}function YE(i,a){return fh(8390656,8,i,a)}function mg(i,a){return ph(2048,8,i,a)}function XE(i,a){return ph(4,2,i,a)}function JE(i,a){return ph(4,4,i,a)}function ZE(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function eS(i,a,c){return c=c!=null?c.concat([i]):null,ph(4,4,ZE.bind(null,a,i),c)}function gg(){}function tS(i,a){var c=cr();a=a===void 0?null:a;var p=c.memoizedState;return p!==null&&a!==null&&ug(a,p[1])?p[0]:(c.memoizedState=[i,a],i)}function nS(i,a){var c=cr();a=a===void 0?null:a;var p=c.memoizedState;return p!==null&&a!==null&&ug(a,p[1])?p[0]:(i=i(),c.memoizedState=[i,a],i)}function rS(i,a,c){return(Go&21)===0?(i.baseState&&(i.baseState=!1,Ln=!0),i.memoizedState=c):(Tr(c,a)||(c=xc(),Rt.lanes|=c,qo|=c,i.baseState=!0),a)}function z1(i,a){var c=Xe;Xe=c!==0&&4>c?c:4,i(!0);var p=cg.transition;cg.transition={};try{i(!1),a()}finally{Xe=c,cg.transition=p}}function sS(){return cr().memoizedState}function B1(i,a,c){var p=ji(i);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},iS(i))oS(a,c);else if(c=LE(i,a,c,p),c!==null){var g=bn();br(c,i,p,g),aS(c,a,p)}}function $1(i,a,c){var p=ji(i),g={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(iS(i))oS(a,g);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var C=a.lastRenderedState,L=w(C,c);if(g.hasEagerState=!0,g.eagerState=L,Tr(L,C)){var U=a.interleaved;U===null?(g.next=g,rg(a)):(g.next=U.next,U.next=g),a.interleaved=g;return}}catch{}finally{}c=LE(i,a,g,p),c!==null&&(g=bn(),br(c,i,p,g),aS(c,a,p))}}function iS(i){var a=i.alternate;return i===Rt||a!==null&&a===Rt}function oS(i,a){Yc=hh=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function aS(i,a,c){if((c&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,c|=p,a.lanes=c,Rc(i,c)}}var mh={readContext:lr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},W1={readContext:lr,useCallback:function(i,a){return ss().memoizedState=[i,a===void 0?null:a],i},useContext:lr,useEffect:YE,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,fh(4194308,4,ZE.bind(null,a,i),c)},useLayoutEffect:function(i,a){return fh(4194308,4,i,a)},useInsertionEffect:function(i,a){return fh(4,2,i,a)},useMemo:function(i,a){var c=ss();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var p=ss();return a=c!==void 0?c(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=B1.bind(null,Rt,i),[p.memoizedState,i]},useRef:function(i){var a=ss();return i={current:i},a.memoizedState=i},useState:KE,useDebugValue:gg,useDeferredValue:function(i){return ss().memoizedState=i},useTransition:function(){var i=KE(!1),a=i[0];return i=z1.bind(null,i[1]),ss().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var p=Rt,g=ss();if(Tt){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),Yt===null)throw Error(t(349));(Go&30)!==0||$E(p,a,c)}g.memoizedState=c;var w={value:c,getSnapshot:a};return g.queue=w,YE(HE.bind(null,p,w,i),[i]),p.flags|=2048,Zc(9,WE.bind(null,p,w,c,a),void 0,null),c},useId:function(){var i=ss(),a=Yt.identifierPrefix;if(Tt){var c=js,p=Vs;c=(p&~(1<<32-$n(p)-1)).toString(32)+c,a=":"+a+"R"+c,c=Xc++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=U1++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},H1={readContext:lr,useCallback:tS,useContext:lr,useEffect:mg,useImperativeHandle:eS,useInsertionEffect:XE,useLayoutEffect:JE,useMemo:nS,useReducer:fg,useRef:QE,useState:function(){return fg(Jc)},useDebugValue:gg,useDeferredValue:function(i){var a=cr();return rS(a,Ht.memoizedState,i)},useTransition:function(){var i=fg(Jc)[0],a=cr().memoizedState;return[i,a]},useMutableSource:zE,useSyncExternalStore:BE,useId:sS,unstable_isNewReconciler:!1},G1={readContext:lr,useCallback:tS,useContext:lr,useEffect:mg,useImperativeHandle:eS,useInsertionEffect:XE,useLayoutEffect:JE,useMemo:nS,useReducer:pg,useRef:QE,useState:function(){return pg(Jc)},useDebugValue:gg,useDeferredValue:function(i){var a=cr();return Ht===null?a.memoizedState=i:rS(a,Ht.memoizedState,i)},useTransition:function(){var i=pg(Jc)[0],a=cr().memoizedState;return[i,a]},useMutableSource:zE,useSyncExternalStore:BE,useId:sS,unstable_isNewReconciler:!1};function xr(i,a){if(i&&i.defaultProps){a=ue({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function yg(i,a,c,p){a=i.memoizedState,c=c(p,a),c=c==null?a:ue({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var gh={isMounted:function(i){return(i=i._reactInternals)?Er(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var p=bn(),g=ji(i),w=Us(p,g);w.payload=a,c!=null&&(w.callback=c),a=Oi(i,w,g),a!==null&&(br(a,i,g,p),lh(a,i,g))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var p=bn(),g=ji(i),w=Us(p,g);w.tag=1,w.payload=a,c!=null&&(w.callback=c),a=Oi(i,w,g),a!==null&&(br(a,i,g,p),lh(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=bn(),p=ji(i),g=Us(c,p);g.tag=2,a!=null&&(g.callback=a),a=Oi(i,g,p),a!==null&&(br(a,i,p,c),lh(a,i,p))}};function lS(i,a,c,p,g,w,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,C):a.prototype&&a.prototype.isPureReactComponent?!Fc(c,p)||!Fc(g,w):!0}function cS(i,a,c){var p=!1,g=ki,w=a.contextType;return typeof w=="object"&&w!==null?w=lr(w):(g=Mn(a)?zo:fn.current,p=a.contextTypes,w=(p=p!=null)?tl(i,g):ki),a=new a(c,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=gh,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=w),a}function uS(i,a,c,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,p),a.state!==i&&gh.enqueueReplaceState(a,a.state,null)}function _g(i,a,c,p){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},sg(i);var w=a.contextType;typeof w=="object"&&w!==null?g.context=lr(w):(w=Mn(a)?zo:fn.current,g.context=tl(i,w)),g.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(yg(i,a,w,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&gh.enqueueReplaceState(g,g.state,null),ch(i,c,g,p),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function cl(i,a){try{var c="",p=a;do c+=he(p),p=p.return;while(p);var g=c}catch(w){g=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:g,digest:null}}function vg(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function wg(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var q1=typeof WeakMap=="function"?WeakMap:Map;function dS(i,a,c){c=Us(-1,c),c.tag=3,c.payload={element:null};var p=a.value;return c.callback=function(){Th||(Th=!0,Mg=p),wg(i,a)},c}function hS(i,a,c){c=Us(-1,c),c.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;c.payload=function(){return p(g)},c.callback=function(){wg(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){wg(i,a),typeof p!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),c}function fS(i,a,c){var p=i.pingCache;if(p===null){p=i.pingCache=new q1;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(c)||(g.add(c),i=aD.bind(null,i,a,c),a.then(i,i))}function pS(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function mS(i,a,c,p,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=Us(-1,1),a.tag=2,Oi(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var K1=H.ReactCurrentOwner,Ln=!1;function Rn(i,a,c,p){a.child=i===null?ME(a,null,c,p):il(a,i.child,c,p)}function gS(i,a,c,p,g){c=c.render;var w=a.ref;return al(a,g),p=dg(i,a,c,p,w,g),c=hg(),i!==null&&!Ln?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,zs(i,a,g)):(Tt&&c&&Km(a),a.flags|=1,Rn(i,a,p,g),a.child)}function yS(i,a,c,p,g){if(i===null){var w=c.type;return typeof w=="function"&&!Bg(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=w,_S(i,a,w,p,g)):(i=Ah(c.type,null,p,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,(i.lanes&g)===0){var C=w.memoizedProps;if(c=c.compare,c=c!==null?c:Fc,c(C,p)&&i.ref===a.ref)return zs(i,a,g)}return a.flags|=1,i=Ui(w,p),i.ref=a.ref,i.return=a,a.child=i}function _S(i,a,c,p,g){if(i!==null){var w=i.memoizedProps;if(Fc(w,p)&&i.ref===a.ref)if(Ln=!1,a.pendingProps=p=w,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Ln=!0);else return a.lanes=i.lanes,zs(i,a,g)}return Eg(i,a,c,p,g)}function vS(i,a,c){var p=a.pendingProps,g=p.children,w=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(dl,Yn),Yn|=c;else{if((c&1073741824)===0)return i=w!==null?w.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,ft(dl,Yn),Yn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:c,ft(dl,Yn),Yn|=p}else w!==null?(p=w.baseLanes|c,a.memoizedState=null):p=c,ft(dl,Yn),Yn|=p;return Rn(i,a,g,c),a.child}function wS(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Eg(i,a,c,p,g){var w=Mn(c)?zo:fn.current;return w=tl(a,w),al(a,g),c=dg(i,a,c,p,w,g),p=hg(),i!==null&&!Ln?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,zs(i,a,g)):(Tt&&p&&Km(a),a.flags|=1,Rn(i,a,c,g),a.child)}function ES(i,a,c,p,g){if(Mn(c)){var w=!0;eh(a)}else w=!1;if(al(a,g),a.stateNode===null)_h(i,a),cS(a,c,p),_g(a,c,p,g),p=!0;else if(i===null){var C=a.stateNode,L=a.memoizedProps;C.props=L;var U=C.context,Y=c.contextType;typeof Y=="object"&&Y!==null?Y=lr(Y):(Y=Mn(c)?zo:fn.current,Y=tl(a,Y));var le=c.getDerivedStateFromProps,de=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==p||U!==Y)&&uS(a,C,p,Y),Di=!1;var ae=a.memoizedState;C.state=ae,ch(a,p,C,g),U=a.memoizedState,L!==p||ae!==U||On.current||Di?(typeof le=="function"&&(yg(a,c,le,p),U=a.memoizedState),(L=Di||lS(a,c,L,p,ae,U,Y))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=U),C.props=p,C.state=U,C.context=Y,p=L):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{C=a.stateNode,VE(i,a),L=a.memoizedProps,Y=a.type===a.elementType?L:xr(a.type,L),C.props=Y,de=a.pendingProps,ae=C.context,U=c.contextType,typeof U=="object"&&U!==null?U=lr(U):(U=Mn(c)?zo:fn.current,U=tl(a,U));var Se=c.getDerivedStateFromProps;(le=typeof Se=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(L!==de||ae!==U)&&uS(a,C,p,U),Di=!1,ae=a.memoizedState,C.state=ae,ch(a,p,C,g);var Ce=a.memoizedState;L!==de||ae!==Ce||On.current||Di?(typeof Se=="function"&&(yg(a,c,Se,p),Ce=a.memoizedState),(Y=Di||lS(a,c,Y,p,ae,Ce,U)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,Ce,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,Ce,U)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Ce),C.props=p,C.state=Ce,C.context=U,p=Y):(typeof C.componentDidUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),p=!1)}return Sg(i,a,c,p,w,g)}function Sg(i,a,c,p,g,w){wS(i,a);var C=(a.flags&128)!==0;if(!p&&!C)return g&&CE(a,c,!1),zs(i,a,w);p=a.stateNode,K1.current=a;var L=C&&typeof c.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&C?(a.child=il(a,i.child,null,w),a.child=il(a,null,L,w)):Rn(i,a,L,w),a.memoizedState=p.state,g&&CE(a,c,!0),a.child}function SS(i){var a=i.stateNode;a.pendingContext?IE(i,a.pendingContext,a.pendingContext!==a.context):a.context&&IE(i,a.context,!1),ig(i,a.containerInfo)}function TS(i,a,c,p,g){return sl(),Jm(g),a.flags|=256,Rn(i,a,c,p),a.child}var Tg={dehydrated:null,treeContext:null,retryLane:0};function Ig(i){return{baseLanes:i,cachePool:null,transitions:null}}function IS(i,a,c){var p=a.pendingProps,g=Ct.current,w=!1,C=(a.flags&128)!==0,L;if((L=C)||(L=i!==null&&i.memoizedState===null?!1:(g&2)!==0),L?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),ft(Ct,g&1),i===null)return Xm(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=p.children,i=p.fallback,w?(p=a.mode,w=a.child,C={mode:"hidden",children:C},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=C):w=Ph(C,p,0,null),i=Xo(i,p,c,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=Ig(c),a.memoizedState=Tg,i):xg(a,C));if(g=i.memoizedState,g!==null&&(L=g.dehydrated,L!==null))return Q1(i,a,C,p,L,g,c);if(w){w=p.fallback,C=a.mode,g=i.child,L=g.sibling;var U={mode:"hidden",children:p.children};return(C&1)===0&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=U,a.deletions=null):(p=Ui(g,U),p.subtreeFlags=g.subtreeFlags&14680064),L!==null?w=Ui(L,w):(w=Xo(w,C,c,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,C=i.child.memoizedState,C=C===null?Ig(c):{baseLanes:C.baseLanes|c,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=i.childLanes&~c,a.memoizedState=Tg,p}return w=i.child,i=w.sibling,p=Ui(w,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=c),p.return=a,p.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=p,a.memoizedState=null,p}function xg(i,a){return a=Ph({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function yh(i,a,c,p){return p!==null&&Jm(p),il(a,i.child,null,c),i=xg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Q1(i,a,c,p,g,w,C){if(c)return a.flags&256?(a.flags&=-257,p=vg(Error(t(422))),yh(i,a,C,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=p.fallback,g=a.mode,p=Ph({mode:"visible",children:p.children},g,0,null),w=Xo(w,g,C,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,(a.mode&1)!==0&&il(a,i.child,null,C),a.child.memoizedState=Ig(C),a.memoizedState=Tg,w);if((a.mode&1)===0)return yh(i,a,C,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var L=p.dgst;return p=L,w=Error(t(419)),p=vg(w,p,void 0),yh(i,a,C,p)}if(L=(C&i.childLanes)!==0,Ln||L){if(p=Yt,p!==null){switch(C&-C){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|C))!==0?0:g,g!==0&&g!==w.retryLane&&(w.retryLane=g,Fs(i,g),br(p,i,g,-1))}return zg(),p=vg(Error(t(421))),yh(i,a,C,p)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=lD.bind(null,i),g._reactRetry=a,null):(i=w.treeContext,Qn=Ai(g.nextSibling),Kn=a,Tt=!0,Ir=null,i!==null&&(or[ar++]=Vs,or[ar++]=js,or[ar++]=Bo,Vs=i.id,js=i.overflow,Bo=a),a=xg(a,p.children),a.flags|=4096,a)}function xS(i,a,c){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),ng(i.return,a,c)}function Cg(i,a,c,p,g){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:g}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=c,w.tailMode=g)}function CS(i,a,c){var p=a.pendingProps,g=p.revealOrder,w=p.tail;if(Rn(i,a,p.children,c),p=Ct.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&xS(i,c,a);else if(i.tag===19)xS(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(ft(Ct,p),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&uh(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Cg(a,!1,g,c,w);break;case"backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&uh(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Cg(a,!0,c,null,w);break;case"together":Cg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function _h(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function zs(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),qo|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,c=Ui(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Ui(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function Y1(i,a,c){switch(a.tag){case 3:SS(a),sl();break;case 5:UE(a);break;case 1:Mn(a.type)&&eh(a);break;case 4:ig(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;ft(oh,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(ft(Ct,Ct.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?IS(i,a,c):(ft(Ct,Ct.current&1),i=zs(i,a,c),i!==null?i.sibling:null);ft(Ct,Ct.current&1);break;case 19:if(p=(c&a.childLanes)!==0,(i.flags&128)!==0){if(p)return CS(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ft(Ct,Ct.current),p)break;return null;case 22:case 23:return a.lanes=0,vS(i,a,c)}return zs(i,a,c)}var RS,Rg,bS,AS;RS=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Rg=function(){},bS=function(i,a,c,p){var g=i.memoizedProps;if(g!==p){i=a.stateNode,Ho(rs.current);var w=null;switch(c){case"input":g=ht(i,g),p=ht(i,p),w=[];break;case"select":g=ue({},g,{value:void 0}),p=ue({},p,{value:void 0}),w=[];break;case"textarea":g=hi(i,g),p=hi(i,p),w=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Xd)}wr(c,p);var C;c=null;for(Y in g)if(!p.hasOwnProperty(Y)&&g.hasOwnProperty(Y)&&g[Y]!=null)if(Y==="style"){var L=g[Y];for(C in L)L.hasOwnProperty(C)&&(c||(c={}),c[C]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(s.hasOwnProperty(Y)?w||(w=[]):(w=w||[]).push(Y,null));for(Y in p){var U=p[Y];if(L=g?.[Y],p.hasOwnProperty(Y)&&U!==L&&(U!=null||L!=null))if(Y==="style")if(L){for(C in L)!L.hasOwnProperty(C)||U&&U.hasOwnProperty(C)||(c||(c={}),c[C]="");for(C in U)U.hasOwnProperty(C)&&L[C]!==U[C]&&(c||(c={}),c[C]=U[C])}else c||(w||(w=[]),w.push(Y,c)),c=U;else Y==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,L=L?L.__html:void 0,U!=null&&L!==U&&(w=w||[]).push(Y,U)):Y==="children"?typeof U!="string"&&typeof U!="number"||(w=w||[]).push(Y,""+U):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(s.hasOwnProperty(Y)?(U!=null&&Y==="onScroll"&&yt("scroll",i),w||L===U||(w=[])):(w=w||[]).push(Y,U))}c&&(w=w||[]).push("style",c);var Y=w;(a.updateQueue=Y)&&(a.flags|=4)}},AS=function(i,a,c,p){c!==p&&(a.flags|=4)};function eu(i,a){if(!Tt)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function mn(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,p=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=p,i.childLanes=c,a}function X1(i,a,c){var p=a.pendingProps;switch(Qm(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(a),null;case 1:return Mn(a.type)&&Zd(),mn(a),null;case 3:return p=a.stateNode,ll(),_t(On),_t(fn),lg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(sh(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ir!==null&&(jg(Ir),Ir=null))),Rg(i,a),mn(a),null;case 5:og(a);var g=Ho(Qc.current);if(c=a.type,i!==null&&a.stateNode!=null)bS(i,a,c,p,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return mn(a),null}if(i=Ho(rs.current),sh(a)){p=a.stateNode,c=a.type;var w=a.memoizedProps;switch(p[ns]=a,p[Wc]=w,i=(a.mode&1)!==0,c){case"dialog":yt("cancel",p),yt("close",p);break;case"iframe":case"object":case"embed":yt("load",p);break;case"video":case"audio":for(g=0;g<zc.length;g++)yt(zc[g],p);break;case"source":yt("error",p);break;case"img":case"image":case"link":yt("error",p),yt("load",p);break;case"details":yt("toggle",p);break;case"input":Dn(p,w),yt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},yt("invalid",p);break;case"textarea":xo(p,w),yt("invalid",p)}wr(c,w),g=null;for(var C in w)if(w.hasOwnProperty(C)){var L=w[C];C==="children"?typeof L=="string"?p.textContent!==L&&(w.suppressHydrationWarning!==!0&&Yd(p.textContent,L,i),g=["children",L]):typeof L=="number"&&p.textContent!==""+L&&(w.suppressHydrationWarning!==!0&&Yd(p.textContent,L,i),g=["children",""+L]):s.hasOwnProperty(C)&&L!=null&&C==="onScroll"&&yt("scroll",p)}switch(c){case"input":je(p),jt(p,w,!0);break;case"textarea":je(p),fi(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=Xd)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{C=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=gc(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=C.createElement(c,{is:p.is}):(i=C.createElement(c),c==="select"&&(C=i,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):i=C.createElementNS(i,c),i[ns]=a,i[Wc]=p,RS(i,a,!1,!1),a.stateNode=i;e:{switch(C=ka(c,p),c){case"dialog":yt("cancel",i),yt("close",i),g=p;break;case"iframe":case"object":case"embed":yt("load",i),g=p;break;case"video":case"audio":for(g=0;g<zc.length;g++)yt(zc[g],i);g=p;break;case"source":yt("error",i),g=p;break;case"img":case"image":case"link":yt("error",i),yt("load",i),g=p;break;case"details":yt("toggle",i),g=p;break;case"input":Dn(i,p),g=ht(i,p),yt("invalid",i);break;case"option":g=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},g=ue({},p,{value:void 0}),yt("invalid",i);break;case"textarea":xo(i,p),g=hi(i,p),yt("invalid",i);break;default:g=p}wr(c,g),L=g;for(w in L)if(L.hasOwnProperty(w)){var U=L[w];w==="style"?Pa(i,U):w==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Id(i,U)):w==="children"?typeof U=="string"?(c!=="textarea"||U!=="")&&Co(i,U):typeof U=="number"&&Co(i,""+U):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?U!=null&&w==="onScroll"&&yt("scroll",i):U!=null&&z(i,w,U,C))}switch(c){case"input":je(i),jt(i,p,!1);break;case"textarea":je(i),fi(i);break;case"option":p.value!=null&&i.setAttribute("value",""+oe(p.value));break;case"select":i.multiple=!!p.multiple,w=p.value,w!=null?nn(i,!!p.multiple,w,!1):p.defaultValue!=null&&nn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Xd)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return mn(a),null;case 6:if(i&&a.stateNode!=null)AS(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(c=Ho(Qc.current),Ho(rs.current),sh(a)){if(p=a.stateNode,c=a.memoizedProps,p[ns]=a,(w=p.nodeValue!==c)&&(i=Kn,i!==null))switch(i.tag){case 3:Yd(p.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Yd(p.nodeValue,c,(i.mode&1)!==0)}w&&(a.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[ns]=a,a.stateNode=p}return mn(a),null;case 13:if(_t(Ct),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Tt&&Qn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)NE(),sl(),a.flags|=98560,w=!1;else if(w=sh(a),p!==null&&p.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[ns]=a}else sl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;mn(a),w=!1}else Ir!==null&&(jg(Ir),Ir=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Ct.current&1)!==0?Gt===0&&(Gt=3):zg())),a.updateQueue!==null&&(a.flags|=4),mn(a),null);case 4:return ll(),Rg(i,a),i===null&&Bc(a.stateNode.containerInfo),mn(a),null;case 10:return tg(a.type._context),mn(a),null;case 17:return Mn(a.type)&&Zd(),mn(a),null;case 19:if(_t(Ct),w=a.memoizedState,w===null)return mn(a),null;if(p=(a.flags&128)!==0,C=w.rendering,C===null)if(p)eu(w,!1);else{if(Gt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=uh(i),C!==null){for(a.flags|=128,eu(w,!1),p=C.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=c,c=a.child;c!==null;)w=c,i=p,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,i=C.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return ft(Ct,Ct.current&1|2),a.child}i=i.sibling}w.tail!==null&&gt()>hl&&(a.flags|=128,p=!0,eu(w,!1),a.lanes=4194304)}else{if(!p)if(i=uh(C),i!==null){if(a.flags|=128,p=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),eu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!Tt)return mn(a),null}else 2*gt()-w.renderingStartTime>hl&&c!==1073741824&&(a.flags|=128,p=!0,eu(w,!1),a.lanes=4194304);w.isBackwards?(C.sibling=a.child,a.child=C):(c=w.last,c!==null?c.sibling=C:a.child=C,w.last=C)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=gt(),a.sibling=null,c=Ct.current,ft(Ct,p?c&1|2:c&1),a):(mn(a),null);case 22:case 23:return Ug(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Yn&1073741824)!==0&&(mn(a),a.subtreeFlags&6&&(a.flags|=8192)):mn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function J1(i,a){switch(Qm(a),a.tag){case 1:return Mn(a.type)&&Zd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ll(),_t(On),_t(fn),lg(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return og(a),null;case 13:if(_t(Ct),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));sl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return _t(Ct),null;case 4:return ll(),null;case 10:return tg(a.type._context),null;case 22:case 23:return Ug(),null;case 24:return null;default:return null}}var vh=!1,gn=!1,Z1=typeof WeakSet=="function"?WeakSet:Set,xe=null;function ul(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Pt(i,a,p)}else c.current=null}function bg(i,a,c){try{c()}catch(p){Pt(i,a,p)}}var PS=!1;function eD(i,a){if(Um=Ns,i=lE(),Nm(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var g=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var C=0,L=-1,U=-1,Y=0,le=0,de=i,ae=null;t:for(;;){for(var Se;de!==c||g!==0&&de.nodeType!==3||(L=C+g),de!==w||p!==0&&de.nodeType!==3||(U=C+p),de.nodeType===3&&(C+=de.nodeValue.length),(Se=de.firstChild)!==null;)ae=de,de=Se;for(;;){if(de===i)break t;if(ae===c&&++Y===g&&(L=C),ae===w&&++le===p&&(U=C),(Se=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=Se}c=L===-1||U===-1?null:{start:L,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(zm={focusedElem:i,selectionRange:c},Ns=!1,xe=a;xe!==null;)if(a=xe,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,xe=i;else for(;xe!==null;){a=xe;try{var Ce=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var Pe=Ce.memoizedProps,Lt=Ce.memoizedState,q=a.stateNode,$=q.getSnapshotBeforeUpdate(a.elementType===a.type?Pe:xr(a.type,Pe),Lt);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){Pt(a,a.return,fe)}if(i=a.sibling,i!==null){i.return=a.return,xe=i;break}xe=a.return}return Ce=PS,PS=!1,Ce}function tu(i,a,c){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&i)===i){var w=g.destroy;g.destroy=void 0,w!==void 0&&bg(a,c,w)}g=g.next}while(g!==p)}}function wh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var p=c.create;c.destroy=p()}c=c.next}while(c!==a)}}function Ag(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function kS(i){var a=i.alternate;a!==null&&(i.alternate=null,kS(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[ns],delete a[Wc],delete a[Hm],delete a[L1],delete a[V1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function NS(i){return i.tag===5||i.tag===3||i.tag===4}function DS(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||NS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pg(i,a,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Xd));else if(p!==4&&(i=i.child,i!==null))for(Pg(i,a,c),i=i.sibling;i!==null;)Pg(i,a,c),i=i.sibling}function kg(i,a,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(kg(i,a,c),i=i.sibling;i!==null;)kg(i,a,c),i=i.sibling}var on=null,Cr=!1;function Mi(i,a,c){for(c=c.child;c!==null;)OS(i,a,c),c=c.sibling}function OS(i,a,c){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(ko,c)}catch{}switch(c.tag){case 5:gn||ul(c,a);case 6:var p=on,g=Cr;on=null,Mi(i,a,c),on=p,Cr=g,on!==null&&(Cr?(i=on,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):on.removeChild(c.stateNode));break;case 18:on!==null&&(Cr?(i=on,c=c.stateNode,i.nodeType===8?Wm(i.parentNode,c):i.nodeType===1&&Wm(i,c),xi(i)):Wm(on,c.stateNode));break;case 4:p=on,g=Cr,on=c.stateNode.containerInfo,Cr=!0,Mi(i,a,c),on=p,Cr=g;break;case 0:case 11:case 14:case 15:if(!gn&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var w=g,C=w.destroy;w=w.tag,C!==void 0&&((w&2)!==0||(w&4)!==0)&&bg(c,a,C),g=g.next}while(g!==p)}Mi(i,a,c);break;case 1:if(!gn&&(ul(c,a),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(L){Pt(c,a,L)}Mi(i,a,c);break;case 21:Mi(i,a,c);break;case 22:c.mode&1?(gn=(p=gn)||c.memoizedState!==null,Mi(i,a,c),gn=p):Mi(i,a,c);break;default:Mi(i,a,c)}}function MS(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new Z1),a.forEach(function(p){var g=cD.bind(null,i,p);c.has(p)||(c.add(p),p.then(g,g))})}}function Rr(i,a){var c=a.deletions;if(c!==null)for(var p=0;p<c.length;p++){var g=c[p];try{var w=i,C=a,L=C;e:for(;L!==null;){switch(L.tag){case 5:on=L.stateNode,Cr=!1;break e;case 3:on=L.stateNode.containerInfo,Cr=!0;break e;case 4:on=L.stateNode.containerInfo,Cr=!0;break e}L=L.return}if(on===null)throw Error(t(160));OS(w,C,g),on=null,Cr=!1;var U=g.alternate;U!==null&&(U.return=null),g.return=null}catch(Y){Pt(g,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)LS(a,i),a=a.sibling}function LS(i,a){var c=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Rr(a,i),is(i),p&4){try{tu(3,i,i.return),wh(3,i)}catch(Pe){Pt(i,i.return,Pe)}try{tu(5,i,i.return)}catch(Pe){Pt(i,i.return,Pe)}}break;case 1:Rr(a,i),is(i),p&512&&c!==null&&ul(c,c.return);break;case 5:if(Rr(a,i),is(i),p&512&&c!==null&&ul(c,c.return),i.flags&32){var g=i.stateNode;try{Co(g,"")}catch(Pe){Pt(i,i.return,Pe)}}if(p&4&&(g=i.stateNode,g!=null)){var w=i.memoizedProps,C=c!==null?c.memoizedProps:w,L=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{L==="input"&&w.type==="radio"&&w.name!=null&&xn(g,w),ka(L,C);var Y=ka(L,w);for(C=0;C<U.length;C+=2){var le=U[C],de=U[C+1];le==="style"?Pa(g,de):le==="dangerouslySetInnerHTML"?Id(g,de):le==="children"?Co(g,de):z(g,le,de,Y)}switch(L){case"input":Cn(g,w);break;case"textarea":Td(g,w);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!w.multiple;var Se=w.value;Se!=null?nn(g,!!w.multiple,Se,!1):ae!==!!w.multiple&&(w.defaultValue!=null?nn(g,!!w.multiple,w.defaultValue,!0):nn(g,!!w.multiple,w.multiple?[]:"",!1))}g[Wc]=w}catch(Pe){Pt(i,i.return,Pe)}}break;case 6:if(Rr(a,i),is(i),p&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,w=i.memoizedProps;try{g.nodeValue=w}catch(Pe){Pt(i,i.return,Pe)}}break;case 3:if(Rr(a,i),is(i),p&4&&c!==null&&c.memoizedState.isDehydrated)try{xi(a.containerInfo)}catch(Pe){Pt(i,i.return,Pe)}break;case 4:Rr(a,i),is(i);break;case 13:Rr(a,i),is(i),g=i.child,g.flags&8192&&(w=g.memoizedState!==null,g.stateNode.isHidden=w,!w||g.alternate!==null&&g.alternate.memoizedState!==null||(Og=gt())),p&4&&MS(i);break;case 22:if(le=c!==null&&c.memoizedState!==null,i.mode&1?(gn=(Y=gn)||le,Rr(a,i),gn=Y):Rr(a,i),is(i),p&8192){if(Y=i.memoizedState!==null,(i.stateNode.isHidden=Y)&&!le&&(i.mode&1)!==0)for(xe=i,le=i.child;le!==null;){for(de=xe=le;xe!==null;){switch(ae=xe,Se=ae.child,ae.tag){case 0:case 11:case 14:case 15:tu(4,ae,ae.return);break;case 1:ul(ae,ae.return);var Ce=ae.stateNode;if(typeof Ce.componentWillUnmount=="function"){p=ae,c=ae.return;try{a=p,Ce.props=a.memoizedProps,Ce.state=a.memoizedState,Ce.componentWillUnmount()}catch(Pe){Pt(p,c,Pe)}}break;case 5:ul(ae,ae.return);break;case 22:if(ae.memoizedState!==null){FS(de);continue}}Se!==null?(Se.return=ae,xe=Se):FS(de)}le=le.sibling}e:for(le=null,de=i;;){if(de.tag===5){if(le===null){le=de;try{g=de.stateNode,Y?(w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(L=de.stateNode,U=de.memoizedProps.style,C=U!=null&&U.hasOwnProperty("display")?U.display:null,L.style.display=gi("display",C))}catch(Pe){Pt(i,i.return,Pe)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=Y?"":de.memoizedProps}catch(Pe){Pt(i,i.return,Pe)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===i)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===i)break e;for(;de.sibling===null;){if(de.return===null||de.return===i)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Rr(a,i),is(i),p&4&&MS(i);break;case 21:break;default:Rr(a,i),is(i)}}function is(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(NS(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Co(g,""),p.flags&=-33);var w=DS(i);kg(i,w,g);break;case 3:case 4:var C=p.stateNode.containerInfo,L=DS(i);Pg(i,L,C);break;default:throw Error(t(161))}}catch(U){Pt(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function tD(i,a,c){xe=i,VS(i)}function VS(i,a,c){for(var p=(i.mode&1)!==0;xe!==null;){var g=xe,w=g.child;if(g.tag===22&&p){var C=g.memoizedState!==null||vh;if(!C){var L=g.alternate,U=L!==null&&L.memoizedState!==null||gn;L=vh;var Y=gn;if(vh=C,(gn=U)&&!Y)for(xe=g;xe!==null;)C=xe,U=C.child,C.tag===22&&C.memoizedState!==null?US(g):U!==null?(U.return=C,xe=U):US(g);for(;w!==null;)xe=w,VS(w),w=w.sibling;xe=g,vh=L,gn=Y}jS(i)}else(g.subtreeFlags&8772)!==0&&w!==null?(w.return=g,xe=w):jS(i)}}function jS(i){for(;xe!==null;){var a=xe;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:gn||wh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!gn)if(c===null)p.componentDidMount();else{var g=a.elementType===a.type?c.memoizedProps:xr(a.type,c.memoizedProps);p.componentDidUpdate(g,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&FE(a,w,p);break;case 3:var C=a.updateQueue;if(C!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}FE(a,C,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&c.focus();break;case"img":U.src&&(c.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var le=Y.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&xi(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gn||a.flags&512&&Ag(a)}catch(ae){Pt(a,a.return,ae)}}if(a===i){xe=null;break}if(c=a.sibling,c!==null){c.return=a.return,xe=c;break}xe=a.return}}function FS(i){for(;xe!==null;){var a=xe;if(a===i){xe=null;break}var c=a.sibling;if(c!==null){c.return=a.return,xe=c;break}xe=a.return}}function US(i){for(;xe!==null;){var a=xe;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{wh(4,a)}catch(U){Pt(a,c,U)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(U){Pt(a,g,U)}}var w=a.return;try{Ag(a)}catch(U){Pt(a,w,U)}break;case 5:var C=a.return;try{Ag(a)}catch(U){Pt(a,C,U)}}}catch(U){Pt(a,a.return,U)}if(a===i){xe=null;break}var L=a.sibling;if(L!==null){L.return=a.return,xe=L;break}xe=a.return}}var nD=Math.ceil,Eh=H.ReactCurrentDispatcher,Ng=H.ReactCurrentOwner,ur=H.ReactCurrentBatchConfig,nt=0,Yt=null,Ut=null,an=0,Yn=0,dl=Pi(0),Gt=0,nu=null,qo=0,Sh=0,Dg=0,ru=null,Vn=null,Og=0,hl=1/0,Bs=null,Th=!1,Mg=null,Li=null,Ih=!1,Vi=null,xh=0,su=0,Lg=null,Ch=-1,Rh=0;function bn(){return(nt&6)!==0?gt():Ch!==-1?Ch:Ch=gt()}function ji(i){return(i.mode&1)===0?1:(nt&2)!==0&&an!==0?an&-an:F1.transition!==null?(Rh===0&&(Rh=xc()),Rh):(i=Xe,i!==0||(i=window.event,i=i===void 0?16:za(i.type)),i)}function br(i,a,c,p){if(50<su)throw su=0,Lg=null,Error(t(185));Mo(i,c,p),((nt&2)===0||i!==Yt)&&(i===Yt&&((nt&2)===0&&(Sh|=c),Gt===4&&Fi(i,an)),jn(i,p),c===1&&nt===0&&(a.mode&1)===0&&(hl=gt()+500,th&&Ni()))}function jn(i,a){var c=i.callbackNode;Oo(i,a);var p=As(i,i===Yt?an:0);if(p===0)c!==null&&Oa(c),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(c!=null&&Oa(c),a===1)i.tag===0?j1(BS.bind(null,i)):RE(BS.bind(null,i)),O1(function(){(nt&6)===0&&Ni()}),c=null;else{switch(Gr(p)){case 1:c=Ma;break;case 4:c=Sc;break;case 16:c=Po;break;case 536870912:c=La;break;default:c=Po}c=YS(c,zS.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function zS(i,a){if(Ch=-1,Rh=0,(nt&6)!==0)throw Error(t(327));var c=i.callbackNode;if(fl()&&i.callbackNode!==c)return null;var p=As(i,i===Yt?an:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=bh(i,p);else{a=p;var g=nt;nt|=2;var w=WS();(Yt!==i||an!==a)&&(Bs=null,hl=gt()+500,Qo(i,a));do try{iD();break}catch(L){$S(i,L)}while(!0);eg(),Eh.current=w,nt=g,Ut!==null?a=0:(Yt=null,an=0,a=Gt)}if(a!==0){if(a===2&&(g=Ic(i),g!==0&&(p=g,a=Vg(i,g))),a===1)throw c=nu,Qo(i,0),Fi(i,p),jn(i,gt()),c;if(a===6)Fi(i,p);else{if(g=i.current.alternate,(p&30)===0&&!rD(g)&&(a=bh(i,p),a===2&&(w=Ic(i),w!==0&&(p=w,a=Vg(i,w))),a===1))throw c=nu,Qo(i,0),Fi(i,p),jn(i,gt()),c;switch(i.finishedWork=g,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Yo(i,Vn,Bs);break;case 3:if(Fi(i,p),(p&130023424)===p&&(a=Og+500-gt(),10<a)){if(As(i,0)!==0)break;if(g=i.suspendedLanes,(g&p)!==p){bn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=$m(Yo.bind(null,i,Vn,Bs),a);break}Yo(i,Vn,Bs);break;case 4:if(Fi(i,p),(p&4194240)===p)break;for(a=i.eventTimes,g=-1;0<p;){var C=31-$n(p);w=1<<C,C=a[C],C>g&&(g=C),p&=~w}if(p=g,p=gt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*nD(p/1960))-p,10<p){i.timeoutHandle=$m(Yo.bind(null,i,Vn,Bs),p);break}Yo(i,Vn,Bs);break;case 5:Yo(i,Vn,Bs);break;default:throw Error(t(329))}}}return jn(i,gt()),i.callbackNode===c?zS.bind(null,i):null}function Vg(i,a){var c=ru;return i.current.memoizedState.isDehydrated&&(Qo(i,a).flags|=256),i=bh(i,a),i!==2&&(a=Vn,Vn=c,a!==null&&jg(a)),i}function jg(i){Vn===null?Vn=i:Vn.push.apply(Vn,i)}function rD(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var g=c[p],w=g.getSnapshot;g=g.value;try{if(!Tr(w(),g))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Fi(i,a){for(a&=~Dg,a&=~Sh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-$n(a),p=1<<c;i[c]=-1,a&=~p}}function BS(i){if((nt&6)!==0)throw Error(t(327));fl();var a=As(i,0);if((a&1)===0)return jn(i,gt()),null;var c=bh(i,a);if(i.tag!==0&&c===2){var p=Ic(i);p!==0&&(a=p,c=Vg(i,p))}if(c===1)throw c=nu,Qo(i,0),Fi(i,a),jn(i,gt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Yo(i,Vn,Bs),jn(i,gt()),null}function Fg(i,a){var c=nt;nt|=1;try{return i(a)}finally{nt=c,nt===0&&(hl=gt()+500,th&&Ni())}}function Ko(i){Vi!==null&&Vi.tag===0&&(nt&6)===0&&fl();var a=nt;nt|=1;var c=ur.transition,p=Xe;try{if(ur.transition=null,Xe=1,i)return i()}finally{Xe=p,ur.transition=c,nt=a,(nt&6)===0&&Ni()}}function Ug(){Yn=dl.current,_t(dl)}function Qo(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,D1(c)),Ut!==null)for(c=Ut.return;c!==null;){var p=c;switch(Qm(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Zd();break;case 3:ll(),_t(On),_t(fn),lg();break;case 5:og(p);break;case 4:ll();break;case 13:_t(Ct);break;case 19:_t(Ct);break;case 10:tg(p.type._context);break;case 22:case 23:Ug()}c=c.return}if(Yt=i,Ut=i=Ui(i.current,null),an=Yn=a,Gt=0,nu=null,Dg=Sh=qo=0,Vn=ru=null,Wo!==null){for(a=0;a<Wo.length;a++)if(c=Wo[a],p=c.interleaved,p!==null){c.interleaved=null;var g=p.next,w=c.pending;if(w!==null){var C=w.next;w.next=g,p.next=C}c.pending=p}Wo=null}return i}function $S(i,a){do{var c=Ut;try{if(eg(),dh.current=mh,hh){for(var p=Rt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}hh=!1}if(Go=0,Qt=Ht=Rt=null,Yc=!1,Xc=0,Ng.current=null,c===null||c.return===null){Gt=1,nu=a,Ut=null;break}e:{var w=i,C=c.return,L=c,U=a;if(a=an,L.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var Y=U,le=L,de=le.tag;if((le.mode&1)===0&&(de===0||de===11||de===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var Se=pS(C);if(Se!==null){Se.flags&=-257,mS(Se,C,L,w,a),Se.mode&1&&fS(w,Y,a),a=Se,U=Y;var Ce=a.updateQueue;if(Ce===null){var Pe=new Set;Pe.add(U),a.updateQueue=Pe}else Ce.add(U);break e}else{if((a&1)===0){fS(w,Y,a),zg();break e}U=Error(t(426))}}else if(Tt&&L.mode&1){var Lt=pS(C);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),mS(Lt,C,L,w,a),Jm(cl(U,L));break e}}w=U=cl(U,L),Gt!==4&&(Gt=2),ru===null?ru=[w]:ru.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var q=dS(w,U,a);jE(w,q);break e;case 1:L=U;var $=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Li===null||!Li.has(Q)))){w.flags|=65536,a&=-a,w.lanes|=a;var fe=hS(w,L,a);jE(w,fe);break e}}w=w.return}while(w!==null)}GS(c)}catch(ke){a=ke,Ut===c&&c!==null&&(Ut=c=c.return);continue}break}while(!0)}function WS(){var i=Eh.current;return Eh.current=mh,i===null?mh:i}function zg(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Yt===null||(qo&268435455)===0&&(Sh&268435455)===0||Fi(Yt,an)}function bh(i,a){var c=nt;nt|=2;var p=WS();(Yt!==i||an!==a)&&(Bs=null,Qo(i,a));do try{sD();break}catch(g){$S(i,g)}while(!0);if(eg(),nt=c,Eh.current=p,Ut!==null)throw Error(t(261));return Yt=null,an=0,Gt}function sD(){for(;Ut!==null;)HS(Ut)}function iD(){for(;Ut!==null&&!Ao();)HS(Ut)}function HS(i){var a=QS(i.alternate,i,Yn);i.memoizedProps=i.pendingProps,a===null?GS(i):Ut=a,Ng.current=null}function GS(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=X1(c,a,Yn),c!==null){Ut=c;return}}else{if(c=J1(c,a),c!==null){c.flags&=32767,Ut=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Gt=6,Ut=null;return}}if(a=a.sibling,a!==null){Ut=a;return}Ut=a=i}while(a!==null);Gt===0&&(Gt=5)}function Yo(i,a,c){var p=Xe,g=ur.transition;try{ur.transition=null,Xe=1,oD(i,a,c,p)}finally{ur.transition=g,Xe=p}return null}function oD(i,a,c,p){do fl();while(Vi!==null);if((nt&6)!==0)throw Error(t(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=c.lanes|c.childLanes;if(Rm(i,w),i===Yt&&(Ut=Yt=null,an=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Ih||(Ih=!0,YS(Po,function(){return fl(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=ur.transition,ur.transition=null;var C=Xe;Xe=1;var L=nt;nt|=4,Ng.current=null,eD(i,c),LS(c,i),C1(zm),Ns=!!Um,zm=Um=null,i.current=c,tD(c),bs(),nt=L,Xe=C,ur.transition=w}else i.current=c;if(Ih&&(Ih=!1,Vi=i,xh=g),w=i.pendingLanes,w===0&&(Li=null),Md(c.stateNode),jn(i,gt()),a!==null)for(p=i.onRecoverableError,c=0;c<a.length;c++)g=a[c],p(g.value,{componentStack:g.stack,digest:g.digest});if(Th)throw Th=!1,i=Mg,Mg=null,i;return(xh&1)!==0&&i.tag!==0&&fl(),w=i.pendingLanes,(w&1)!==0?i===Lg?su++:(su=0,Lg=i):su=0,Ni(),null}function fl(){if(Vi!==null){var i=Gr(xh),a=ur.transition,c=Xe;try{if(ur.transition=null,Xe=16>i?16:i,Vi===null)var p=!1;else{if(i=Vi,Vi=null,xh=0,(nt&6)!==0)throw Error(t(331));var g=nt;for(nt|=4,xe=i.current;xe!==null;){var w=xe,C=w.child;if((xe.flags&16)!==0){var L=w.deletions;if(L!==null){for(var U=0;U<L.length;U++){var Y=L[U];for(xe=Y;xe!==null;){var le=xe;switch(le.tag){case 0:case 11:case 15:tu(8,le,w)}var de=le.child;if(de!==null)de.return=le,xe=de;else for(;xe!==null;){le=xe;var ae=le.sibling,Se=le.return;if(kS(le),le===Y){xe=null;break}if(ae!==null){ae.return=Se,xe=ae;break}xe=Se}}}var Ce=w.alternate;if(Ce!==null){var Pe=Ce.child;if(Pe!==null){Ce.child=null;do{var Lt=Pe.sibling;Pe.sibling=null,Pe=Lt}while(Pe!==null)}}xe=w}}if((w.subtreeFlags&2064)!==0&&C!==null)C.return=w,xe=C;else e:for(;xe!==null;){if(w=xe,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:tu(9,w,w.return)}var q=w.sibling;if(q!==null){q.return=w.return,xe=q;break e}xe=w.return}}var $=i.current;for(xe=$;xe!==null;){C=xe;var Q=C.child;if((C.subtreeFlags&2064)!==0&&Q!==null)Q.return=C,xe=Q;else e:for(C=$;xe!==null;){if(L=xe,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:wh(9,L)}}catch(ke){Pt(L,L.return,ke)}if(L===C){xe=null;break e}var fe=L.sibling;if(fe!==null){fe.return=L.return,xe=fe;break e}xe=L.return}}if(nt=g,Ni(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(ko,i)}catch{}p=!0}return p}finally{Xe=c,ur.transition=a}}return!1}function qS(i,a,c){a=cl(c,a),a=dS(i,a,1),i=Oi(i,a,1),a=bn(),i!==null&&(Mo(i,1,a),jn(i,a))}function Pt(i,a,c){if(i.tag===3)qS(i,i,c);else for(;a!==null;){if(a.tag===3){qS(a,i,c);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Li===null||!Li.has(p))){i=cl(c,i),i=hS(a,i,1),a=Oi(a,i,1),i=bn(),a!==null&&(Mo(a,1,i),jn(a,i));break}}a=a.return}}function aD(i,a,c){var p=i.pingCache;p!==null&&p.delete(a),a=bn(),i.pingedLanes|=i.suspendedLanes&c,Yt===i&&(an&c)===c&&(Gt===4||Gt===3&&(an&130023424)===an&&500>gt()-Og?Qo(i,0):Dg|=c),jn(i,a)}function KS(i,a){a===0&&((i.mode&1)===0?a=1:(a=Si,Si<<=1,(Si&130023424)===0&&(Si=4194304)));var c=bn();i=Fs(i,a),i!==null&&(Mo(i,a,c),jn(i,c))}function lD(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),KS(i,c)}function cD(i,a){var c=0;switch(i.tag){case 13:var p=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),KS(i,c)}var QS;QS=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||On.current)Ln=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return Ln=!1,Y1(i,a,c);Ln=(i.flags&131072)!==0}else Ln=!1,Tt&&(a.flags&1048576)!==0&&bE(a,rh,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;_h(i,a),i=a.pendingProps;var g=tl(a,fn.current);al(a,c),g=dg(null,a,p,i,g,c);var w=hg();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Mn(p)?(w=!0,eh(a)):w=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,sg(a),g.updater=gh,a.stateNode=g,g._reactInternals=a,_g(a,p,i,c),a=Sg(null,a,p,!0,w,c)):(a.tag=0,Tt&&w&&Km(a),Rn(null,a,g,c),a=a.child),a;case 16:p=a.elementType;e:{switch(_h(i,a),i=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=dD(p),i=xr(p,i),g){case 0:a=Eg(null,a,p,i,c);break e;case 1:a=ES(null,a,p,i,c);break e;case 11:a=gS(null,a,p,i,c);break e;case 14:a=yS(null,a,p,xr(p.type,i),c);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:xr(p,g),Eg(i,a,p,g,c);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:xr(p,g),ES(i,a,p,g,c);case 3:e:{if(SS(a),i===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,g=w.element,VE(i,a),ch(a,p,null,c);var C=a.memoizedState;if(p=C.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){g=cl(Error(t(423)),a),a=TS(i,a,p,c,g);break e}else if(p!==g){g=cl(Error(t(424)),a),a=TS(i,a,p,c,g);break e}else for(Qn=Ai(a.stateNode.containerInfo.firstChild),Kn=a,Tt=!0,Ir=null,c=ME(a,null,p,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(sl(),p===g){a=zs(i,a,c);break e}Rn(i,a,p,c)}a=a.child}return a;case 5:return UE(a),i===null&&Xm(a),p=a.type,g=a.pendingProps,w=i!==null?i.memoizedProps:null,C=g.children,Bm(p,g)?C=null:w!==null&&Bm(p,w)&&(a.flags|=32),wS(i,a),Rn(i,a,C,c),a.child;case 6:return i===null&&Xm(a),null;case 13:return IS(i,a,c);case 4:return ig(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=il(a,null,p,c):Rn(i,a,p,c),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:xr(p,g),gS(i,a,p,g,c);case 7:return Rn(i,a,a.pendingProps,c),a.child;case 8:return Rn(i,a,a.pendingProps.children,c),a.child;case 12:return Rn(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,w=a.memoizedProps,C=g.value,ft(oh,p._currentValue),p._currentValue=C,w!==null)if(Tr(w.value,C)){if(w.children===g.children&&!On.current){a=zs(i,a,c);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var L=w.dependencies;if(L!==null){C=w.child;for(var U=L.firstContext;U!==null;){if(U.context===p){if(w.tag===1){U=Us(-1,c&-c),U.tag=2;var Y=w.updateQueue;if(Y!==null){Y=Y.shared;var le=Y.pending;le===null?U.next=U:(U.next=le.next,le.next=U),Y.pending=U}}w.lanes|=c,U=w.alternate,U!==null&&(U.lanes|=c),ng(w.return,c,a),L.lanes|=c;break}U=U.next}}else if(w.tag===10)C=w.type===a.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(t(341));C.lanes|=c,L=C.alternate,L!==null&&(L.lanes|=c),ng(C,c,a),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===a){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}Rn(i,a,g.children,c),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,al(a,c),g=lr(g),p=p(g),a.flags|=1,Rn(i,a,p,c),a.child;case 14:return p=a.type,g=xr(p,a.pendingProps),g=xr(p.type,g),yS(i,a,p,g,c);case 15:return _S(i,a,a.type,a.pendingProps,c);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:xr(p,g),_h(i,a),a.tag=1,Mn(p)?(i=!0,eh(a)):i=!1,al(a,c),cS(a,p,g),_g(a,p,g,c),Sg(null,a,p,!0,i,c);case 19:return CS(i,a,c);case 22:return vS(i,a,c)}throw Error(t(156,a.tag))};function YS(i,a){return Ec(i,a)}function uD(i,a,c,p){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(i,a,c,p){return new uD(i,a,c,p)}function Bg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function dD(i){if(typeof i=="function")return Bg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===ve)return 14}return 2}function Ui(i,a){var c=i.alternate;return c===null?(c=dr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Ah(i,a,c,p,g,w){var C=2;if(p=i,typeof i=="function")Bg(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case P:return Xo(c.children,g,w,a);case b:C=8,g|=8;break;case N:return i=dr(12,c,a,g|2),i.elementType=N,i.lanes=w,i;case D:return i=dr(13,c,a,g),i.elementType=D,i.lanes=w,i;case me:return i=dr(19,c,a,g),i.elementType=me,i.lanes=w,i;case Ee:return Ph(c,g,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:C=10;break e;case M:C=9;break e;case F:C=11;break e;case ve:C=14;break e;case pe:C=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=dr(C,c,a,g),a.elementType=i,a.type=p,a.lanes=w,a}function Xo(i,a,c,p){return i=dr(7,i,p,a),i.lanes=c,i}function Ph(i,a,c,p){return i=dr(22,i,p,a),i.elementType=Ee,i.lanes=c,i.stateNode={isHidden:!1},i}function $g(i,a,c){return i=dr(6,i,null,a),i.lanes=c,i}function Wg(i,a,c){return a=dr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function hD(i,a,c,p,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cc(0),this.expirationTimes=Cc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Hg(i,a,c,p,g,w,C,L,U){return i=new hD(i,a,c,L,U),a===1?(a=1,w===!0&&(a|=8)):a=0,w=dr(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},sg(w),i}function fD(i,a,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:p==null?null:""+p,children:i,containerInfo:a,implementation:c}}function XS(i){if(!i)return ki;i=i._reactInternals;e:{if(Er(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Mn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(Mn(c))return xE(i,c,a)}return a}function JS(i,a,c,p,g,w,C,L,U){return i=Hg(c,p,!0,i,g,w,C,L,U),i.context=XS(null),c=i.current,p=bn(),g=ji(c),w=Us(p,g),w.callback=a??null,Oi(c,w,g),i.current.lanes=g,Mo(i,g,p),jn(i,p),i}function kh(i,a,c,p){var g=a.current,w=bn(),C=ji(g);return c=XS(c),a.context===null?a.context=c:a.pendingContext=c,a=Us(w,C),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=Oi(g,a,C),i!==null&&(br(i,g,C,w),lh(i,g,C)),C}function Nh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ZS(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Gg(i,a){ZS(i,a),(i=i.alternate)&&ZS(i,a)}function pD(){return null}var eT=typeof reportError=="function"?reportError:function(i){console.error(i)};function qg(i){this._internalRoot=i}Dh.prototype.render=qg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));kh(i,a,null,null)},Dh.prototype.unmount=qg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Ko(function(){kh(null,i,null,null)}),a[Ms]=null}};function Dh(i){this._internalRoot=i}Dh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Pc();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Wn.length&&a!==0&&a<Wn[c].priority;c++);Wn.splice(c,0,i),c===0&&Fa(i)}};function Kg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Oh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function tT(){}function mD(i,a,c,p,g){if(g){if(typeof p=="function"){var w=p;p=function(){var Y=Nh(C);w.call(Y)}}var C=JS(a,p,i,0,null,!1,!1,"",tT);return i._reactRootContainer=C,i[Ms]=C.current,Bc(i.nodeType===8?i.parentNode:i),Ko(),C}for(;g=i.lastChild;)i.removeChild(g);if(typeof p=="function"){var L=p;p=function(){var Y=Nh(U);L.call(Y)}}var U=Hg(i,0,!1,null,null,!1,!1,"",tT);return i._reactRootContainer=U,i[Ms]=U.current,Bc(i.nodeType===8?i.parentNode:i),Ko(function(){kh(a,U,c,p)}),U}function Mh(i,a,c,p,g){var w=c._reactRootContainer;if(w){var C=w;if(typeof g=="function"){var L=g;g=function(){var U=Nh(C);L.call(U)}}kh(a,C,i,g)}else C=mD(c,a,i,g,p);return Nh(C)}bc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=it(a.pendingLanes);c!==0&&(Rc(a,c|1),jn(a,gt()),(nt&6)===0&&(hl=gt()+500,Ni()))}break;case 13:Ko(function(){var p=Fs(i,1);if(p!==null){var g=bn();br(p,i,1,g)}}),Gg(i,1)}},Va=function(i){if(i.tag===13){var a=Fs(i,134217728);if(a!==null){var c=bn();br(a,i,134217728,c)}Gg(i,134217728)}},Ac=function(i){if(i.tag===13){var a=ji(i),c=Fs(i,a);if(c!==null){var p=bn();br(c,i,a,p)}Gg(i,a)}},Pc=function(){return Xe},kc=function(i,a){var c=Xe;try{return Xe=i,a()}finally{Xe=c}},xs=function(i,a,c){switch(a){case"input":if(Cn(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var p=c[a];if(p!==i&&p.form===i.form){var g=Jd(p);if(!g)throw Error(t(90));$e(p),Cn(p,g)}}}break;case"textarea":Td(i,c);break;case"select":a=c.value,a!=null&&nn(i,!!c.multiple,a,!1)}},Cd=Fg,Rd=Ko;var gD={usingClientEntryPoint:!1,Events:[Hc,Za,Jd,_i,vi,Fg]},iu={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yD={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Od(i),i===null?null:i.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||pD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{ko=Lh.inject(yD),Bn=Lh}catch{}}return Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gD,Fn.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kg(a))throw Error(t(200));return fD(i,a,null,c)},Fn.createRoot=function(i,a){if(!Kg(i))throw Error(t(299));var c=!1,p="",g=eT;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Hg(i,1,!1,null,null,c,!1,p,g),i[Ms]=a.current,Bc(i.nodeType===8?i.parentNode:i),new qg(a)},Fn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Od(a),i=i===null?null:i.stateNode,i},Fn.flushSync=function(i){return Ko(i)},Fn.hydrate=function(i,a,c){if(!Oh(a))throw Error(t(200));return Mh(null,i,a,!0,c)},Fn.hydrateRoot=function(i,a,c){if(!Kg(i))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,g=!1,w="",C=eT;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),a=JS(a,null,i,1,c??null,g,!1,w,C),i[Ms]=a.current,Bc(i),p)for(i=0;i<p.length;i++)c=p[i],g=c._getVersion,g=g(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,g]:a.mutableSourceEagerHydrationData.push(c,g);return new Dh(a)},Fn.render=function(i,a,c){if(!Oh(a))throw Error(t(200));return Mh(null,i,a,!1,c)},Fn.unmountComponentAtNode=function(i){if(!Oh(i))throw Error(t(40));return i._reactRootContainer?(Ko(function(){Mh(null,null,i,!1,function(){i._reactRootContainer=null,i[Ms]=null})}),!0):!1},Fn.unstable_batchedUpdates=Fg,Fn.unstable_renderSubtreeIntoContainer=function(i,a,c,p){if(!Oh(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Mh(i,a,c,!1,p)},Fn.version="18.3.1-next-f1338f8080-20240426",Fn}var cT;function Mx(){if(cT)return Xg.exports;cT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Xg.exports=xD(),Xg.exports}var uT;function CD(){if(uT)return Vh;uT=1;var n=Mx();return Vh.createRoot=n.createRoot,Vh.hydrateRoot=n.hydrateRoot,Vh}var RD=CD();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),dT=n=>{const e=AD(n);return e.charAt(0).toUpperCase()+e.slice(1)},Lx=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=S.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},d)=>S.createElement("svg",{ref:d,...PD,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Lx("lucide",s),...u},[...l.map(([f,m])=>S.createElement(f,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=(n,e)=>{const t=S.forwardRef(({className:r,...s},o)=>S.createElement(kD,{ref:o,iconNode:e,className:Lx(`lucide-${bD(dT(n))}`,`lucide-${n}`,r),...s}));return t.displayName=dT(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Vx=In("arrow-left",ND);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jx=In("calendar",DD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ey=In("camera",OD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],LD=In("check",MD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fx=In("chevron-down",VD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],FD=In("chevron-right",jD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zD=In("chevron-up",UD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ux=In("funnel",BD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],WD=In("grip-vertical",$D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],hT=In("log-out",HD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],zx=In("message-square",GD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],KD=In("plus",qD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Mu=In("star",QD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],XD=In("upload",YD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bx=In("user",JD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$x=In("x",ZD);function Wx(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Wx(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Hx(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Wx(n))&&(r&&(r+=" "),r+=e);return r}const eO=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},tO=(n,e)=>({classGroupId:n,validator:e}),Gx=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),Sf="-",fT=[],nO="arbitrary..",rO=n=>{const e=iO(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return sO(l);const u=l.split(Sf),d=u[0]===""&&u.length>1?1:0;return qx(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],f=t[l];return d?f?eO(f,d):d:f||fT}return t[l]||fT}}},qx=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const s=n[e],o=t.nextPart.get(s);if(o){const f=qx(n,e+1,o);if(f)return f}const l=t.validators;if(l===null)return;const u=e===0?n.join(Sf):n.slice(e).join(Sf),d=l.length;for(let f=0;f<d;f++){const m=l[f];if(m.validator(u))return m.classGroupId}},sO=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?nO+r:void 0})(),iO=n=>{const{theme:e,classGroups:t}=n;return oO(t,e)},oO=(n,e)=>{const t=Gx();for(const r in n){const s=n[r];H_(s,t,r,e)}return t},H_=(n,e,t,r)=>{const s=n.length;for(let o=0;o<s;o++){const l=n[o];aO(l,e,t,r)}},aO=(n,e,t,r)=>{if(typeof n=="string"){lO(n,e,t);return}if(typeof n=="function"){cO(n,e,t,r);return}uO(n,e,t,r)},lO=(n,e,t)=>{const r=n===""?e:Kx(e,n);r.classGroupId=t},cO=(n,e,t,r)=>{if(dO(n)){H_(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(tO(t,n))},uO=(n,e,t,r)=>{const s=Object.entries(n),o=s.length;for(let l=0;l<o;l++){const[u,d]=s[l];H_(d,Kx(e,u),t,r)}},Kx=(n,e)=>{let t=n;const r=e.split(Sf),s=r.length;for(let o=0;o<s;o++){const l=r[o];let u=t.nextPart.get(l);u||(u=Gx(),t.nextPart.set(l,u)),t=u}return t},dO=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,hO=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const s=(o,l)=>{t[o]=l,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(o){let l=t[o];if(l!==void 0)return l;if((l=r[o])!==void 0)return s(o,l),l},set(o,l){o in t?t[o]=l:s(o,l)}}},zy="!",pT=":",fO=[],mT=(n,e,t,r,s)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:s}),pO=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let l=0,u=0,d=0,f;const m=s.length;for(let x=0;x<m;x++){const R=s[x];if(l===0&&u===0){if(R===pT){o.push(s.slice(d,x)),d=x+1;continue}if(R==="/"){f=x;continue}}R==="["?l++:R==="]"?l--:R==="("?u++:R===")"&&u--}const y=o.length===0?s:s.slice(d);let v=y,I=!1;y.endsWith(zy)?(v=y.slice(0,-1),I=!0):y.startsWith(zy)&&(v=y.slice(1),I=!0);const A=f&&f>d?f-d:void 0;return mT(o,I,v,A)};if(e){const s=e+pT,o=r;r=l=>l.startsWith(s)?o(l.slice(s.length)):mT(fO,!1,l,void 0,!0)}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},mO=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let s=[];for(let o=0;o<t.length;o++){const l=t[o],u=l[0]==="[",d=e.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},gO=n=>({cache:hO(n.cacheSize),parseClassName:pO(n),sortModifiers:mO(n),...rO(n)}),yO=/\s+/,_O=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,l=[],u=n.trim().split(yO);let d="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{isExternal:y,modifiers:v,hasImportantModifier:I,baseClassName:A,maybePostfixModifierPosition:x}=t(m);if(y){d=m+(d.length>0?" "+d:d);continue}let R=!!x,j=r(R?A.substring(0,x):A);if(!j){if(!R){d=m+(d.length>0?" "+d:d);continue}if(j=r(A),!j){d=m+(d.length>0?" "+d:d);continue}R=!1}const V=v.length===0?"":v.length===1?v[0]:o(v).join(":"),z=I?V+zy:V,H=z+j;if(l.indexOf(H)>-1)continue;l.push(H);const J=s(j,R);for(let Z=0;Z<J.length;++Z){const P=J[Z];l.push(z+P)}d=m+(d.length>0?" "+d:d)}return d},vO=(...n)=>{let e=0,t,r,s="";for(;e<n.length;)(t=n[e++])&&(r=Qx(t))&&(s&&(s+=" "),s+=r);return s},Qx=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Qx(n[r]))&&(t&&(t+=" "),t+=e);return t},wO=(n,...e)=>{let t,r,s,o;const l=d=>{const f=e.reduce((m,y)=>y(m),n());return t=gO(f),r=t.cache.get,s=t.cache.set,o=u,u(d)},u=d=>{const f=r(d);if(f)return f;const m=_O(d,t);return s(d,m),m};return o=l,(...d)=>o(vO(...d))},EO=[],qt=n=>{const e=t=>t[n]||EO;return e.isThemeGetter=!0,e},Yx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Xx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,SO=/^\d+\/\d+$/,TO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,IO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,CO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,RO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pl=n=>SO.test(n),He=n=>!!n&&!Number.isNaN(Number(n)),Bi=n=>!!n&&Number.isInteger(Number(n)),ty=n=>n.endsWith("%")&&He(n.slice(0,-1)),$s=n=>TO.test(n),bO=()=>!0,AO=n=>IO.test(n)&&!xO.test(n),Jx=()=>!1,PO=n=>CO.test(n),kO=n=>RO.test(n),NO=n=>!Re(n)&&!be(n),DO=n=>Jl(n,tC,Jx),Re=n=>Yx.test(n),Jo=n=>Jl(n,nC,AO),ny=n=>Jl(n,jO,He),gT=n=>Jl(n,Zx,Jx),OO=n=>Jl(n,eC,kO),jh=n=>Jl(n,rC,PO),be=n=>Xx.test(n),au=n=>Zl(n,nC),MO=n=>Zl(n,FO),yT=n=>Zl(n,Zx),LO=n=>Zl(n,tC),VO=n=>Zl(n,eC),Fh=n=>Zl(n,rC,!0),Jl=(n,e,t)=>{const r=Yx.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Zl=(n,e,t=!1)=>{const r=Xx.exec(n);return r?r[1]?e(r[1]):t:!1},Zx=n=>n==="position"||n==="percentage",eC=n=>n==="image"||n==="url",tC=n=>n==="length"||n==="size"||n==="bg-size",nC=n=>n==="length",jO=n=>n==="number",FO=n=>n==="family-name",rC=n=>n==="shadow",UO=()=>{const n=qt("color"),e=qt("font"),t=qt("text"),r=qt("font-weight"),s=qt("tracking"),o=qt("leading"),l=qt("breakpoint"),u=qt("container"),d=qt("spacing"),f=qt("radius"),m=qt("shadow"),y=qt("inset-shadow"),v=qt("text-shadow"),I=qt("drop-shadow"),A=qt("blur"),x=qt("perspective"),R=qt("aspect"),j=qt("ease"),V=qt("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...H(),be,Re],Z=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],b=()=>[be,Re,d],N=()=>[pl,"full","auto",...b()],O=()=>[Bi,"none","subgrid",be,Re],M=()=>["auto",{span:["full",Bi,be,Re]},Bi,be,Re],F=()=>[Bi,"auto",be,Re],D=()=>["auto","min","max","fr",be,Re],me=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ve=()=>["start","end","center","stretch","center-safe","end-safe"],pe=()=>["auto",...b()],Ee=()=>[pl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],W=()=>[n,be,Re],ee=()=>[...H(),yT,gT,{position:[be,Re]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",LO,DO,{size:[be,Re]}],ne=()=>[ty,au,Jo],te=()=>["","none","full",f,be,Re],se=()=>["",He,au,Jo],he=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>[He,ty,yT,gT],oe=()=>["","none",A,be,Re],ye=()=>["none",He,be,Re],Ie=()=>["none",He,be,Re],je=()=>[He,be,Re],$e=()=>[pl,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[$s],breakpoint:[$s],color:[bO],container:[$s],"drop-shadow":[$s],ease:["in","out","in-out"],font:[NO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[$s],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[$s],shadow:[$s],spacing:["px",He],text:[$s],"text-shadow":[$s],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",pl,Re,be,R]}],container:["container"],columns:[{columns:[He,Re,be,u]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Bi,"auto",be,Re]}],basis:[{basis:[pl,"full","auto",u,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[He,pl,"auto","initial","none",Re]}],grow:[{grow:["",He,be,Re]}],shrink:[{shrink:["",He,be,Re]}],order:[{order:[Bi,"first","last","none",be,Re]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:[...me(),"normal"]}],"justify-items":[{"justify-items":[...ve(),"normal"]}],"justify-self":[{"justify-self":["auto",...ve()]}],"align-content":[{content:["normal",...me()]}],"align-items":[{items:[...ve(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ve(),{baseline:["","last"]}]}],"place-content":[{"place-content":me()}],"place-items":[{"place-items":[...ve(),"baseline"]}],"place-self":[{"place-self":["auto",...ve()]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:pe()}],mx:[{mx:pe()}],my:[{my:pe()}],ms:[{ms:pe()}],me:[{me:pe()}],mt:[{mt:pe()}],mr:[{mr:pe()}],mb:[{mb:pe()}],ml:[{ml:pe()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ee()}],w:[{w:[u,"screen",...Ee()]}],"min-w":[{"min-w":[u,"screen","none",...Ee()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Ee()]}],h:[{h:["screen","lh",...Ee()]}],"min-h":[{"min-h":["screen","lh","none",...Ee()]}],"max-h":[{"max-h":["screen","lh",...Ee()]}],"font-size":[{text:["base",t,au,Jo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,be,ny]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ty,Re]}],"font-family":[{font:[MO,Re,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,be,Re]}],"line-clamp":[{"line-clamp":[He,"none",be,ny]}],leading:[{leading:[o,...b()]}],"list-image":[{"list-image":["none",be,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",be,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[He,"from-font","auto",be,Jo]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[He,"auto",be,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bi,be,Re],radial:["",be,Re],conic:[Bi,be,Re]},VO,OO]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[He,be,Re]}],"outline-w":[{outline:["",He,au,Jo]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",m,Fh,jh]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",y,Fh,jh]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[He,Jo]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",v,Fh,jh]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[He,be,Re]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[He]}],"mask-image-linear-from-pos":[{"mask-linear-from":G()}],"mask-image-linear-to-pos":[{"mask-linear-to":G()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":G()}],"mask-image-t-to-pos":[{"mask-t-to":G()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":G()}],"mask-image-r-to-pos":[{"mask-r-to":G()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":G()}],"mask-image-b-to-pos":[{"mask-b-to":G()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":G()}],"mask-image-l-to-pos":[{"mask-l-to":G()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":G()}],"mask-image-x-to-pos":[{"mask-x-to":G()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":G()}],"mask-image-y-to-pos":[{"mask-y-to":G()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[be,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":G()}],"mask-image-radial-to-pos":[{"mask-radial-to":G()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":H()}],"mask-image-conic-pos":[{"mask-conic":[He]}],"mask-image-conic-from-pos":[{"mask-conic-from":G()}],"mask-image-conic-to-pos":[{"mask-conic-to":G()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",be,Re]}],filter:[{filter:["","none",be,Re]}],blur:[{blur:oe()}],brightness:[{brightness:[He,be,Re]}],contrast:[{contrast:[He,be,Re]}],"drop-shadow":[{"drop-shadow":["","none",I,Fh,jh]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",He,be,Re]}],"hue-rotate":[{"hue-rotate":[He,be,Re]}],invert:[{invert:["",He,be,Re]}],saturate:[{saturate:[He,be,Re]}],sepia:[{sepia:["",He,be,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",be,Re]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[He,be,Re]}],"backdrop-contrast":[{"backdrop-contrast":[He,be,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",He,be,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[He,be,Re]}],"backdrop-invert":[{"backdrop-invert":["",He,be,Re]}],"backdrop-opacity":[{"backdrop-opacity":[He,be,Re]}],"backdrop-saturate":[{"backdrop-saturate":[He,be,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",He,be,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",be,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[He,"initial",be,Re]}],ease:[{ease:["linear","initial",j,be,Re]}],delay:[{delay:[He,be,Re]}],animate:[{animate:["none",V,be,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,be,Re]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:ye()}],"rotate-x":[{"rotate-x":ye()}],"rotate-y":[{"rotate-y":ye()}],"rotate-z":[{"rotate-z":ye()}],scale:[{scale:Ie()}],"scale-x":[{"scale-x":Ie()}],"scale-y":[{"scale-y":Ie()}],"scale-z":[{"scale-z":Ie()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[be,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$e()}],"translate-x":[{"translate-x":$e()}],"translate-y":[{"translate-y":$e()}],"translate-z":[{"translate-z":$e()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be,Re]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[He,au,Jo,ny]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},zO=wO(UO);function ot(...n){return zO(Hx(n))}function Tf({className:n,...e}){return _.jsx("div",{"data-slot":"card",className:ot("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function sC({className:n,...e}){return _.jsx("div",{"data-slot":"card-header",className:ot("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function BO({className:n,...e}){return _.jsx("h4",{"data-slot":"card-title",className:ot("leading-none",n),...e})}function G_({className:n,...e}){return _.jsx("div",{"data-slot":"card-content",className:ot("px-6 [&:last-child]:pb-6",n),...e})}function _T(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function ci(...n){return e=>{let t=!1;const r=n.map(s=>{const o=_T(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():_T(n[s],null)}}}}function rt(...n){return S.useCallback(ci(...n),n)}var $O=Symbol.for("react.lazy"),If=_p[" use ".trim().toString()];function WO(n){return typeof n=="object"&&n!==null&&"then"in n}function iC(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===$O&&"_payload"in n&&WO(n._payload)}function vp(n){const e=HO(n),t=S.forwardRef((r,s)=>{let{children:o,...l}=r;iC(o)&&typeof If=="function"&&(o=If(o._payload));const u=S.Children.toArray(o),d=u.find(qO);if(d){const f=d.props.children,m=u.map(y=>y===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:y);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}var oC=vp("Slot");function HO(n){const e=S.forwardRef((t,r)=>{let{children:s,...o}=t;if(iC(s)&&typeof If=="function"&&(s=If(s._payload)),S.isValidElement(s)){const l=QO(s),u=KO(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ci(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var GO=Symbol("radix.slottable");function qO(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===GO}function KO(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function QO(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const vT=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,wT=Hx,aC=(n,e)=>t=>{var r;if(e?.variants==null)return wT(n,t?.class,t?.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(f=>{const m=t?.[f],y=o?.[f];if(m===null)return null;const v=vT(m)||vT(y);return s[f][v]}),u=t&&Object.entries(t).reduce((f,m)=>{let[y,v]=m;return v===void 0||(f[y]=v),f},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:y,className:v,...I}=m;return Object.entries(I).every(A=>{let[x,R]=A;return Array.isArray(R)?R.includes({...o,...u}[x]):{...o,...u}[x]===R})?[...f,y,v]:f},[]);return wT(n,l,d,t?.class,t?.className)},YO=aC("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Hs({className:n,variant:e,asChild:t=!1,...r}){const s=t?oC:"span";return _.jsx(s,{"data-slot":"badge",className:ot(YO({variant:e}),n),...r})}const XO=aC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Pn=S.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},o)=>{const l=r?oC:"button";return _.jsx(l,{"data-slot":"button",className:ot(XO({variant:e,size:t,className:n})),ref:o,...s})});Pn.displayName="Button";var td=Mx();const JO=Ox(td);function By(n,[e,t]){return Math.min(t,Math.max(e,n))}function Ae(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function ZO(n,e){const t=S.createContext(e),r=o=>{const{children:l,...u}=o,d=S.useMemo(()=>u,Object.values(u));return _.jsx(t.Provider,{value:d,children:l})};r.displayName=n+"Provider";function s(o){const l=S.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,s]}function go(n,e=[]){let t=[];function r(o,l){const u=S.createContext(l),d=t.length;t=[...t,l];const f=y=>{const{scope:v,children:I,...A}=y,x=v?.[n]?.[d]||u,R=S.useMemo(()=>A,Object.values(A));return _.jsx(x.Provider,{value:R,children:I})};f.displayName=o+"Provider";function m(y,v){const I=v?.[n]?.[d]||u,A=S.useContext(I);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[f,m]}const s=()=>{const o=t.map(l=>S.createContext(l));return function(u){const d=u?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return s.scopeName=n,[r,eM(s,...e)]}function eM(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((u,{useScope:d,scopeName:f})=>{const y=d(o)[`__scope${f}`];return{...u,...y}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function ET(n){const e=tM(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(rM);if(d){const f=d.props.children,m=u.map(y=>y===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:y);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function tM(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=iM(s),u=sM(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ci(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var nM=Symbol("radix.slottable");function rM(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===nM}function sM(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function iM(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function q_(n){const e=n+"CollectionProvider",[t,r]=go(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:R,children:j}=x,V=Ws.useRef(null),z=Ws.useRef(new Map).current;return _.jsx(s,{scope:R,itemMap:z,collectionRef:V,children:j})};l.displayName=e;const u=n+"CollectionSlot",d=ET(u),f=Ws.forwardRef((x,R)=>{const{scope:j,children:V}=x,z=o(u,j),H=rt(R,z.collectionRef);return _.jsx(d,{ref:H,children:V})});f.displayName=u;const m=n+"CollectionItemSlot",y="data-radix-collection-item",v=ET(m),I=Ws.forwardRef((x,R)=>{const{scope:j,children:V,...z}=x,H=Ws.useRef(null),J=rt(R,H),Z=o(m,j);return Ws.useEffect(()=>(Z.itemMap.set(H,{ref:H,...z}),()=>void Z.itemMap.delete(H))),_.jsx(v,{[y]:"",ref:J,children:V})});I.displayName=m;function A(x){const R=o(n+"CollectionConsumer",x);return Ws.useCallback(()=>{const V=R.collectionRef.current;if(!V)return[];const z=Array.from(V.querySelectorAll(`[${y}]`));return Array.from(R.itemMap.values()).sort((Z,P)=>z.indexOf(Z.ref.current)-z.indexOf(P.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:l,Slot:f,ItemSlot:I},A,r]}var oM=S.createContext(void 0);function wp(n){const e=S.useContext(oM);return n||e||"ltr"}function aM(n){const e=lM(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(uM);if(d){const f=d.props.children,m=u.map(y=>y===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:y);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function lM(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=hM(s),u=dM(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ci(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var cM=Symbol("radix.slottable");function uM(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===cM}function dM(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function hM(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var fM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=fM.reduce((n,e)=>{const t=aM(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function lC(n,e){n&&td.flushSync(()=>n.dispatchEvent(e))}function en(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>e.current?.(...t),[])}function pM(n,e=globalThis?.document){const t=en(n);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var mM="DismissableLayer",$y="dismissableLayer.update",gM="dismissableLayer.pointerDownOutside",yM="dismissableLayer.focusOutside",ST,cC=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ep=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...d}=n,f=S.useContext(cC),[m,y]=S.useState(null),v=m?.ownerDocument??globalThis?.document,[,I]=S.useState({}),A=rt(e,P=>y(P)),x=Array.from(f.layers),[R]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),j=x.indexOf(R),V=m?x.indexOf(m):-1,z=f.layersWithOutsidePointerEventsDisabled.size>0,H=V>=j,J=wM(P=>{const b=P.target,N=[...f.branches].some(O=>O.contains(b));!H||N||(s?.(P),l?.(P),P.defaultPrevented||u?.())},v),Z=EM(P=>{const b=P.target;[...f.branches].some(O=>O.contains(b))||(o?.(P),l?.(P),P.defaultPrevented||u?.())},v);return pM(P=>{V===f.layers.size-1&&(r?.(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),S.useEffect(()=>{if(m)return t&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(ST=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),TT(),()=>{t&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=ST)}},[m,v,t,f]),S.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),TT())},[m,f]),S.useEffect(()=>{const P=()=>I({});return document.addEventListener($y,P),()=>document.removeEventListener($y,P)},[]),_.jsx(Ge.div,{...d,ref:A,style:{pointerEvents:z?H?"auto":"none":void 0,...n.style},onFocusCapture:Ae(n.onFocusCapture,Z.onFocusCapture),onBlurCapture:Ae(n.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:Ae(n.onPointerDownCapture,J.onPointerDownCapture)})});Ep.displayName=mM;var _M="DismissableLayerBranch",vM=S.forwardRef((n,e)=>{const t=S.useContext(cC),r=S.useRef(null),s=rt(e,r);return S.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),_.jsx(Ge.div,{...n,ref:s})});vM.displayName=_M;function wM(n,e=globalThis?.document){const t=en(n),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let d=function(){uC(gM,t,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function EM(n,e=globalThis?.document){const t=en(n),r=S.useRef(!1);return S.useEffect(()=>{const s=o=>{o.target&&!r.current&&uC(yM,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function TT(){const n=new CustomEvent($y);document.dispatchEvent(n)}function uC(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?lC(s,o):s.dispatchEvent(o)}var ry=0;function K_(){S.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??IT()),document.body.insertAdjacentElement("beforeend",n[1]??IT()),ry++,()=>{ry===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ry--}},[])}function IT(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var sy="focusScope.autoFocusOnMount",iy="focusScope.autoFocusOnUnmount",xT={bubbles:!1,cancelable:!0},SM="FocusScope",Sp=S.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=n,[u,d]=S.useState(null),f=en(s),m=en(o),y=S.useRef(null),v=rt(e,x=>d(x)),I=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let x=function(z){if(I.paused||!u)return;const H=z.target;u.contains(H)?y.current=H:Wi(y.current,{select:!0})},R=function(z){if(I.paused||!u)return;const H=z.relatedTarget;H!==null&&(u.contains(H)||Wi(y.current,{select:!0}))},j=function(z){if(document.activeElement===document.body)for(const J of z)J.removedNodes.length>0&&Wi(u)};document.addEventListener("focusin",x),document.addEventListener("focusout",R);const V=new MutationObserver(j);return u&&V.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",R),V.disconnect()}}},[r,u,I.paused]),S.useEffect(()=>{if(u){RT.add(I);const x=document.activeElement;if(!u.contains(x)){const j=new CustomEvent(sy,xT);u.addEventListener(sy,f),u.dispatchEvent(j),j.defaultPrevented||(TM(bM(dC(u)),{select:!0}),document.activeElement===x&&Wi(u))}return()=>{u.removeEventListener(sy,f),setTimeout(()=>{const j=new CustomEvent(iy,xT);u.addEventListener(iy,m),u.dispatchEvent(j),j.defaultPrevented||Wi(x??document.body,{select:!0}),u.removeEventListener(iy,m),RT.remove(I)},0)}}},[u,f,m,I]);const A=S.useCallback(x=>{if(!t&&!r||I.paused)return;const R=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,j=document.activeElement;if(R&&j){const V=x.currentTarget,[z,H]=IM(V);z&&H?!x.shiftKey&&j===H?(x.preventDefault(),t&&Wi(z,{select:!0})):x.shiftKey&&j===z&&(x.preventDefault(),t&&Wi(H,{select:!0})):j===V&&x.preventDefault()}},[t,r,I.paused]);return _.jsx(Ge.div,{tabIndex:-1,...l,ref:v,onKeyDown:A})});Sp.displayName=SM;function TM(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Wi(r,{select:e}),document.activeElement!==t)return}function IM(n){const e=dC(n),t=CT(e,n),r=CT(e.reverse(),n);return[t,r]}function dC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function CT(n,e){for(const t of n)if(!xM(t,{upTo:e}))return t}function xM(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function CM(n){return n instanceof HTMLInputElement&&"select"in n}function Wi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&CM(n)&&e&&n.select()}}var RT=RM();function RM(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=bT(n,e),n.unshift(e)},remove(e){n=bT(n,e),n[0]?.resume()}}}function bT(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function bM(n){return n.filter(e=>e.tagName!=="A")}var Wt=globalThis?.document?S.useLayoutEffect:()=>{},AM=_p[" useId ".trim().toString()]||(()=>{}),PM=0;function Xs(n){const[e,t]=S.useState(AM());return Wt(()=>{t(r=>r??String(PM++))},[n]),n||(e?`radix-${e}`:"")}const kM=["top","right","bottom","left"],io=Math.min,Zn=Math.max,xf=Math.round,Uh=Math.floor,hs=n=>({x:n,y:n}),NM={left:"right",right:"left",bottom:"top",top:"bottom"},DM={start:"end",end:"start"};function Wy(n,e,t){return Zn(n,io(e,t))}function ei(n,e){return typeof n=="function"?n(e):n}function ti(n){return n.split("-")[0]}function ec(n){return n.split("-")[1]}function Q_(n){return n==="x"?"y":"x"}function Y_(n){return n==="y"?"height":"width"}const OM=new Set(["top","bottom"]);function ls(n){return OM.has(ti(n))?"y":"x"}function X_(n){return Q_(ls(n))}function MM(n,e,t){t===void 0&&(t=!1);const r=ec(n),s=X_(n),o=Y_(s);let l=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=Cf(l)),[l,Cf(l)]}function LM(n){const e=Cf(n);return[Hy(n),e,Hy(e)]}function Hy(n){return n.replace(/start|end/g,e=>DM[e])}const AT=["left","right"],PT=["right","left"],VM=["top","bottom"],jM=["bottom","top"];function FM(n,e,t){switch(n){case"top":case"bottom":return t?e?PT:AT:e?AT:PT;case"left":case"right":return e?VM:jM;default:return[]}}function UM(n,e,t,r){const s=ec(n);let o=FM(ti(n),t==="start",r);return s&&(o=o.map(l=>l+"-"+s),e&&(o=o.concat(o.map(Hy)))),o}function Cf(n){return n.replace(/left|right|bottom|top/g,e=>NM[e])}function zM(n){return{top:0,right:0,bottom:0,left:0,...n}}function hC(n){return typeof n!="number"?zM(n):{top:n,right:n,bottom:n,left:n}}function Rf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function kT(n,e,t){let{reference:r,floating:s}=n;const o=ls(e),l=X_(e),u=Y_(l),d=ti(e),f=o==="y",m=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let I;switch(d){case"top":I={x:m,y:r.y-s.height};break;case"bottom":I={x:m,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y};break;case"left":I={x:r.x-s.width,y};break;default:I={x:r.x,y:r.y}}switch(ec(e)){case"start":I[l]-=v*(t&&f?-1:1);break;case"end":I[l]+=v*(t&&f?-1:1);break}return I}const BM=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:l}=t,u=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:n,floating:e,strategy:s}),{x:m,y}=kT(f,r,d),v=r,I={},A=0;for(let x=0;x<u.length;x++){const{name:R,fn:j}=u[x],{x:V,y:z,data:H,reset:J}=await j({x:m,y,initialPlacement:r,placement:v,strategy:s,middlewareData:I,rects:f,platform:l,elements:{reference:n,floating:e}});m=V??m,y=z??y,I={...I,[R]:{...I[R],...H}},J&&A<=50&&(A++,typeof J=="object"&&(J.placement&&(v=J.placement),J.rects&&(f=J.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:s}):J.rects),{x:m,y}=kT(f,v,d)),x=-1)}return{x:m,y,placement:v,strategy:s,middlewareData:I}};async function Lu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:l,elements:u,strategy:d}=n,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:v=!1,padding:I=0}=ei(e,n),A=hC(I),R=u[v?y==="floating"?"reference":"floating":y],j=Rf(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(R)))==null||t?R:R.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:f,rootBoundary:m,strategy:d})),V=y==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,z=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),H=await(o.isElement==null?void 0:o.isElement(z))?await(o.getScale==null?void 0:o.getScale(z))||{x:1,y:1}:{x:1,y:1},J=Rf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:V,offsetParent:z,strategy:d}):V);return{top:(j.top-J.top+A.top)/H.y,bottom:(J.bottom-j.bottom+A.bottom)/H.y,left:(j.left-J.left+A.left)/H.x,right:(J.right-j.right+A.right)/H.x}}const $M=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:l,elements:u,middlewareData:d}=e,{element:f,padding:m=0}=ei(n,e)||{};if(f==null)return{};const y=hC(m),v={x:t,y:r},I=X_(s),A=Y_(I),x=await l.getDimensions(f),R=I==="y",j=R?"top":"left",V=R?"bottom":"right",z=R?"clientHeight":"clientWidth",H=o.reference[A]+o.reference[I]-v[I]-o.floating[A],J=v[I]-o.reference[I],Z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let P=Z?Z[z]:0;(!P||!await(l.isElement==null?void 0:l.isElement(Z)))&&(P=u.floating[z]||o.floating[A]);const b=H/2-J/2,N=P/2-x[A]/2-1,O=io(y[j],N),M=io(y[V],N),F=O,D=P-x[A]-M,me=P/2-x[A]/2+b,ve=Wy(F,me,D),pe=!d.arrow&&ec(s)!=null&&me!==ve&&o.reference[A]/2-(me<F?O:M)-x[A]/2<0,Ee=pe?me<F?me-F:me-D:0;return{[I]:v[I]+Ee,data:{[I]:ve,centerOffset:me-ve-Ee,...pe&&{alignmentOffset:Ee}},reset:pe}}}),WM=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:l,initialPlacement:u,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:x=!0,...R}=ei(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const j=ti(s),V=ls(u),z=ti(u)===u,H=await(d.isRTL==null?void 0:d.isRTL(f.floating)),J=v||(z||!x?[Cf(u)]:LM(u)),Z=A!=="none";!v&&Z&&J.push(...UM(u,x,A,H));const P=[u,...J],b=await Lu(e,R),N=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&N.push(b[j]),y){const me=MM(s,l,H);N.push(b[me[0]],b[me[1]])}if(O=[...O,{placement:s,overflows:N}],!N.every(me=>me<=0)){var M,F;const me=(((M=o.flip)==null?void 0:M.index)||0)+1,ve=P[me];if(ve&&(!(y==="alignment"?V!==ls(ve):!1)||O.every(W=>ls(W.placement)===V?W.overflows[0]>0:!0)))return{data:{index:me,overflows:O},reset:{placement:ve}};let pe=(F=O.filter(Ee=>Ee.overflows[0]<=0).sort((Ee,W)=>Ee.overflows[1]-W.overflows[1])[0])==null?void 0:F.placement;if(!pe)switch(I){case"bestFit":{var D;const Ee=(D=O.filter(W=>{if(Z){const ee=ls(W.placement);return ee===V||ee==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(ee=>ee>0).reduce((ee,ue)=>ee+ue,0)]).sort((W,ee)=>W[1]-ee[1])[0])==null?void 0:D[0];Ee&&(pe=Ee);break}case"initialPlacement":pe=u;break}if(s!==pe)return{reset:{placement:pe}}}return{}}}};function NT(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function DT(n){return kM.some(e=>n[e]>=0)}const HM=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=ei(n,e);switch(r){case"referenceHidden":{const o=await Lu(e,{...s,elementContext:"reference"}),l=NT(o,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:DT(l)}}}case"escaped":{const o=await Lu(e,{...s,altBoundary:!0}),l=NT(o,t.floating);return{data:{escapedOffsets:l,escaped:DT(l)}}}default:return{}}}}},fC=new Set(["left","top"]);async function GM(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=ti(t),u=ec(t),d=ls(t)==="y",f=fC.has(l)?-1:1,m=o&&d?-1:1,y=ei(e,n);let{mainAxis:v,crossAxis:I,alignmentAxis:A}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof A=="number"&&(I=u==="end"?A*-1:A),d?{x:I*m,y:v*f}:{x:v*f,y:I*m}}const qM=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:l,middlewareData:u}=e,d=await GM(e,n);return l===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:l}}}}},KM=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:R=>{let{x:j,y:V}=R;return{x:j,y:V}}},...d}=ei(n,e),f={x:t,y:r},m=await Lu(e,d),y=ls(ti(s)),v=Q_(y);let I=f[v],A=f[y];if(o){const R=v==="y"?"top":"left",j=v==="y"?"bottom":"right",V=I+m[R],z=I-m[j];I=Wy(V,I,z)}if(l){const R=y==="y"?"top":"left",j=y==="y"?"bottom":"right",V=A+m[R],z=A-m[j];A=Wy(V,A,z)}const x=u.fn({...e,[v]:I,[y]:A});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[v]:o,[y]:l}}}}}},QM=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:d=!0,crossAxis:f=!0}=ei(n,e),m={x:t,y:r},y=ls(s),v=Q_(y);let I=m[v],A=m[y];const x=ei(u,e),R=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const z=v==="y"?"height":"width",H=o.reference[v]-o.floating[z]+R.mainAxis,J=o.reference[v]+o.reference[z]-R.mainAxis;I<H?I=H:I>J&&(I=J)}if(f){var j,V;const z=v==="y"?"width":"height",H=fC.has(ti(s)),J=o.reference[y]-o.floating[z]+(H&&((j=l.offset)==null?void 0:j[y])||0)+(H?0:R.crossAxis),Z=o.reference[y]+o.reference[z]+(H?0:((V=l.offset)==null?void 0:V[y])||0)-(H?R.crossAxis:0);A<J?A=J:A>Z&&(A=Z)}return{[v]:I,[y]:A}}}},YM=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:l,elements:u}=e,{apply:d=()=>{},...f}=ei(n,e),m=await Lu(e,f),y=ti(s),v=ec(s),I=ls(s)==="y",{width:A,height:x}=o.floating;let R,j;y==="top"||y==="bottom"?(R=y,j=v===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(j=y,R=v==="end"?"top":"bottom");const V=x-m.top-m.bottom,z=A-m.left-m.right,H=io(x-m[R],V),J=io(A-m[j],z),Z=!e.middlewareData.shift;let P=H,b=J;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(b=z),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=V),Z&&!v){const O=Zn(m.left,0),M=Zn(m.right,0),F=Zn(m.top,0),D=Zn(m.bottom,0);I?b=A-2*(O!==0||M!==0?O+M:Zn(m.left,m.right)):P=x-2*(F!==0||D!==0?F+D:Zn(m.top,m.bottom))}await d({...e,availableWidth:b,availableHeight:P});const N=await l.getDimensions(u.floating);return A!==N.width||x!==N.height?{reset:{rects:!0}}:{}}}};function Tp(){return typeof window<"u"}function tc(n){return pC(n)?(n.nodeName||"").toLowerCase():"#document"}function nr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Es(n){var e;return(e=(pC(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function pC(n){return Tp()?n instanceof Node||n instanceof nr(n).Node:!1}function jr(n){return Tp()?n instanceof Element||n instanceof nr(n).Element:!1}function vs(n){return Tp()?n instanceof HTMLElement||n instanceof nr(n).HTMLElement:!1}function OT(n){return!Tp()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof nr(n).ShadowRoot}const XM=new Set(["inline","contents"]);function nd(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Fr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!XM.has(s)}const JM=new Set(["table","td","th"]);function ZM(n){return JM.has(tc(n))}const eL=[":popover-open",":modal"];function Ip(n){return eL.some(e=>{try{return n.matches(e)}catch{return!1}})}const tL=["transform","translate","scale","rotate","perspective"],nL=["transform","translate","scale","rotate","perspective","filter"],rL=["paint","layout","strict","content"];function J_(n){const e=Z_(),t=jr(n)?Fr(n):n;return tL.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||nL.some(r=>(t.willChange||"").includes(r))||rL.some(r=>(t.contain||"").includes(r))}function sL(n){let e=oo(n);for(;vs(e)&&!jl(e);){if(J_(e))return e;if(Ip(e))return null;e=oo(e)}return null}function Z_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const iL=new Set(["html","body","#document"]);function jl(n){return iL.has(tc(n))}function Fr(n){return nr(n).getComputedStyle(n)}function xp(n){return jr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function oo(n){if(tc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||OT(n)&&n.host||Es(n);return OT(e)?e.host:e}function mC(n){const e=oo(n);return jl(e)?n.ownerDocument?n.ownerDocument.body:n.body:vs(e)&&nd(e)?e:mC(e)}function Vu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=mC(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),l=nr(s);if(o){const u=Gy(l);return e.concat(l,l.visualViewport||[],nd(s)?s:[],u&&t?Vu(u):[])}return e.concat(s,Vu(s,[],t))}function Gy(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function gC(n){const e=Fr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=vs(n),o=s?n.offsetWidth:t,l=s?n.offsetHeight:r,u=xf(t)!==o||xf(r)!==l;return u&&(t=o,r=l),{width:t,height:r,$:u}}function ev(n){return jr(n)?n:n.contextElement}function bl(n){const e=ev(n);if(!vs(e))return hs(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=gC(e);let l=(o?xf(t.width):t.width)/r,u=(o?xf(t.height):t.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const oL=hs(0);function yC(n){const e=nr(n);return!Z_()||!e.visualViewport?oL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aL(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==nr(n)?!1:e}function ca(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=ev(n);let l=hs(1);e&&(r?jr(r)&&(l=bl(r)):l=bl(n));const u=aL(o,t,r)?yC(o):hs(0);let d=(s.left+u.x)/l.x,f=(s.top+u.y)/l.y,m=s.width/l.x,y=s.height/l.y;if(o){const v=nr(o),I=r&&jr(r)?nr(r):r;let A=v,x=Gy(A);for(;x&&r&&I!==A;){const R=bl(x),j=x.getBoundingClientRect(),V=Fr(x),z=j.left+(x.clientLeft+parseFloat(V.paddingLeft))*R.x,H=j.top+(x.clientTop+parseFloat(V.paddingTop))*R.y;d*=R.x,f*=R.y,m*=R.x,y*=R.y,d+=z,f+=H,A=nr(x),x=Gy(A)}}return Rf({width:m,height:y,x:d,y:f})}function Cp(n,e){const t=xp(n).scrollLeft;return e?e.left+t:ca(Es(n)).left+t}function _C(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-Cp(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function lL(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",l=Es(r),u=e?Ip(e.floating):!1;if(r===l||u&&o)return t;let d={scrollLeft:0,scrollTop:0},f=hs(1);const m=hs(0),y=vs(r);if((y||!y&&!o)&&((tc(r)!=="body"||nd(l))&&(d=xp(r)),vs(r))){const I=ca(r);f=bl(r),m.x=I.x+r.clientLeft,m.y=I.y+r.clientTop}const v=l&&!y&&!o?_C(l,d):hs(0);return{width:t.width*f.x,height:t.height*f.y,x:t.x*f.x-d.scrollLeft*f.x+m.x+v.x,y:t.y*f.y-d.scrollTop*f.y+m.y+v.y}}function cL(n){return Array.from(n.getClientRects())}function uL(n){const e=Es(n),t=xp(n),r=n.ownerDocument.body,s=Zn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Zn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+Cp(n);const u=-t.scrollTop;return Fr(r).direction==="rtl"&&(l+=Zn(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:l,y:u}}const MT=25;function dL(n,e){const t=nr(n),r=Es(n),s=t.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;const m=Z_();(!m||m&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const f=Cp(r);if(f<=0){const m=r.ownerDocument,y=m.body,v=getComputedStyle(y),I=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,A=Math.abs(r.clientWidth-y.clientWidth-I);A<=MT&&(o-=A)}else f<=MT&&(o+=f);return{width:o,height:l,x:u,y:d}}const hL=new Set(["absolute","fixed"]);function fL(n,e){const t=ca(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=vs(n)?bl(n):hs(1),l=n.clientWidth*o.x,u=n.clientHeight*o.y,d=s*o.x,f=r*o.y;return{width:l,height:u,x:d,y:f}}function LT(n,e,t){let r;if(e==="viewport")r=dL(n,t);else if(e==="document")r=uL(Es(n));else if(jr(e))r=fL(e,t);else{const s=yC(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Rf(r)}function vC(n,e){const t=oo(n);return t===e||!jr(t)||jl(t)?!1:Fr(t).position==="fixed"||vC(t,e)}function pL(n,e){const t=e.get(n);if(t)return t;let r=Vu(n,[],!1).filter(u=>jr(u)&&tc(u)!=="body"),s=null;const o=Fr(n).position==="fixed";let l=o?oo(n):n;for(;jr(l)&&!jl(l);){const u=Fr(l),d=J_(l);!d&&u.position==="fixed"&&(s=null),(o?!d&&!s:!d&&u.position==="static"&&!!s&&hL.has(s.position)||nd(l)&&!d&&vC(n,l))?r=r.filter(m=>m!==l):s=u,l=oo(l)}return e.set(n,r),r}function mL(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const l=[...t==="clippingAncestors"?Ip(e)?[]:pL(e,this._c):[].concat(t),r],u=l[0],d=l.reduce((f,m)=>{const y=LT(e,m,s);return f.top=Zn(y.top,f.top),f.right=io(y.right,f.right),f.bottom=io(y.bottom,f.bottom),f.left=Zn(y.left,f.left),f},LT(e,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function gL(n){const{width:e,height:t}=gC(n);return{width:e,height:t}}function yL(n,e,t){const r=vs(e),s=Es(e),o=t==="fixed",l=ca(n,!0,o,e);let u={scrollLeft:0,scrollTop:0};const d=hs(0);function f(){d.x=Cp(s)}if(r||!r&&!o)if((tc(e)!=="body"||nd(s))&&(u=xp(e)),r){const I=ca(e,!0,o,e);d.x=I.x+e.clientLeft,d.y=I.y+e.clientTop}else s&&f();o&&!r&&s&&f();const m=s&&!r&&!o?_C(s,u):hs(0),y=l.left+u.scrollLeft-d.x-m.x,v=l.top+u.scrollTop-d.y-m.y;return{x:y,y:v,width:l.width,height:l.height}}function oy(n){return Fr(n).position==="static"}function VT(n,e){if(!vs(n)||Fr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Es(n)===t&&(t=t.ownerDocument.body),t}function wC(n,e){const t=nr(n);if(Ip(n))return t;if(!vs(n)){let s=oo(n);for(;s&&!jl(s);){if(jr(s)&&!oy(s))return s;s=oo(s)}return t}let r=VT(n,e);for(;r&&ZM(r)&&oy(r);)r=VT(r,e);return r&&jl(r)&&oy(r)&&!J_(r)?t:r||sL(n)||t}const _L=async function(n){const e=this.getOffsetParent||wC,t=this.getDimensions,r=await t(n.floating);return{reference:yL(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vL(n){return Fr(n).direction==="rtl"}const wL={convertOffsetParentRelativeRectToViewportRelativeRect:lL,getDocumentElement:Es,getClippingRect:mL,getOffsetParent:wC,getElementRects:_L,getClientRects:cL,getDimensions:gL,getScale:bl,isElement:jr,isRTL:vL};function EC(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function EL(n,e){let t=null,r;const s=Es(n);function o(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),o();const f=n.getBoundingClientRect(),{left:m,top:y,width:v,height:I}=f;if(u||e(),!v||!I)return;const A=Uh(y),x=Uh(s.clientWidth-(m+v)),R=Uh(s.clientHeight-(y+I)),j=Uh(m),z={rootMargin:-A+"px "+-x+"px "+-R+"px "+-j+"px",threshold:Zn(0,io(1,d))||1};let H=!0;function J(Z){const P=Z[0].intersectionRatio;if(P!==d){if(!H)return l();P?l(!1,P):r=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!EC(f,n.getBoundingClientRect())&&l(),H=!1}try{t=new IntersectionObserver(J,{...z,root:s.ownerDocument})}catch{t=new IntersectionObserver(J,z)}t.observe(n)}return l(!0),o}function SL(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=ev(n),m=s||o?[...f?Vu(f):[],...Vu(e)]:[];m.forEach(j=>{s&&j.addEventListener("scroll",t,{passive:!0}),o&&j.addEventListener("resize",t)});const y=f&&u?EL(f,t):null;let v=-1,I=null;l&&(I=new ResizeObserver(j=>{let[V]=j;V&&V.target===f&&I&&(I.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var z;(z=I)==null||z.observe(e)})),t()}),f&&!d&&I.observe(f),I.observe(e));let A,x=d?ca(n):null;d&&R();function R(){const j=ca(n);x&&!EC(x,j)&&t(),x=j,A=requestAnimationFrame(R)}return t(),()=>{var j;m.forEach(V=>{s&&V.removeEventListener("scroll",t),o&&V.removeEventListener("resize",t)}),y?.(),(j=I)==null||j.disconnect(),I=null,d&&cancelAnimationFrame(A)}}const TL=qM,IL=KM,xL=WM,CL=YM,RL=HM,jT=$M,bL=QM,AL=(n,e,t)=>{const r=new Map,s={platform:wL,...t},o={...s.platform,_c:r};return BM(n,e,{...s,platform:o})};var PL=typeof document<"u",kL=function(){},of=PL?S.useLayoutEffect:kL;function bf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!bf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!bf(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function SC(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function FT(n,e){const t=SC(n);return Math.round(e*t)/t}function ay(n){const e=S.useRef(n);return of(()=>{e.current=n}),e}function NL(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:d,open:f}=n,[m,y]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,I]=S.useState(r);bf(v,r)||I(r);const[A,x]=S.useState(null),[R,j]=S.useState(null),V=S.useCallback(W=>{W!==Z.current&&(Z.current=W,x(W))},[]),z=S.useCallback(W=>{W!==P.current&&(P.current=W,j(W))},[]),H=o||A,J=l||R,Z=S.useRef(null),P=S.useRef(null),b=S.useRef(m),N=d!=null,O=ay(d),M=ay(s),F=ay(f),D=S.useCallback(()=>{if(!Z.current||!P.current)return;const W={placement:e,strategy:t,middleware:v};M.current&&(W.platform=M.current),AL(Z.current,P.current,W).then(ee=>{const ue={...ee,isPositioned:F.current!==!1};me.current&&!bf(b.current,ue)&&(b.current=ue,td.flushSync(()=>{y(ue)}))})},[v,e,t,M,F]);of(()=>{f===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,y(W=>({...W,isPositioned:!1})))},[f]);const me=S.useRef(!1);of(()=>(me.current=!0,()=>{me.current=!1}),[]),of(()=>{if(H&&(Z.current=H),J&&(P.current=J),H&&J){if(O.current)return O.current(H,J,D);D()}},[H,J,D,O,N]);const ve=S.useMemo(()=>({reference:Z,floating:P,setReference:V,setFloating:z}),[V,z]),pe=S.useMemo(()=>({reference:H,floating:J}),[H,J]),Ee=S.useMemo(()=>{const W={position:t,left:0,top:0};if(!pe.floating)return W;const ee=FT(pe.floating,m.x),ue=FT(pe.floating,m.y);return u?{...W,transform:"translate("+ee+"px, "+ue+"px)",...SC(pe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ee,top:ue}},[t,u,pe.floating,m.x,m.y]);return S.useMemo(()=>({...m,update:D,refs:ve,elements:pe,floatingStyles:Ee}),[m,D,ve,pe,Ee])}const DL=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?jT({element:r.current,padding:s}).fn(t):{}:r?jT({element:r,padding:s}).fn(t):{}}}},OL=(n,e)=>({...TL(n),options:[n,e]}),ML=(n,e)=>({...IL(n),options:[n,e]}),LL=(n,e)=>({...bL(n),options:[n,e]}),VL=(n,e)=>({...xL(n),options:[n,e]}),jL=(n,e)=>({...CL(n),options:[n,e]}),FL=(n,e)=>({...RL(n),options:[n,e]}),UL=(n,e)=>({...DL(n),options:[n,e]});var zL="Arrow",TC=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return _.jsx(Ge.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});TC.displayName=zL;var BL=TC;function $L(n){const[e,t]=S.useState(void 0);return Wt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let l,u;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;l=f.inlineSize,u=f.blockSize}else l=n.offsetWidth,u=n.offsetHeight;t({width:l,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var tv="Popper",[IC,Rp]=go(tv),[WL,xC]=IC(tv),CC=n=>{const{__scopePopper:e,children:t}=n,[r,s]=S.useState(null);return _.jsx(WL,{scope:e,anchor:r,onAnchorChange:s,children:t})};CC.displayName=tv;var RC="PopperAnchor",bC=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=xC(RC,t),l=S.useRef(null),u=rt(e,l),d=S.useRef(null);return S.useEffect(()=>{const f=d.current;d.current=r?.current||l.current,f!==d.current&&o.onAnchorChange(d.current)}),r?null:_.jsx(Ge.div,{...s,ref:u})});bC.displayName=RC;var nv="PopperContent",[HL,GL]=IC(nv),AC=S.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:I="optimized",onPlaced:A,...x}=n,R=xC(nv,t),[j,V]=S.useState(null),z=rt(e,G=>V(G)),[H,J]=S.useState(null),Z=$L(H),P=Z?.width??0,b=Z?.height??0,N=r+(o!=="center"?"-"+o:""),O=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},M=Array.isArray(f)?f:[f],F=M.length>0,D={padding:O,boundary:M.filter(KL),altBoundary:F},{refs:me,floatingStyles:ve,placement:pe,isPositioned:Ee,middlewareData:W}=NL({strategy:"fixed",placement:N,whileElementsMounted:(...G)=>SL(...G,{animationFrame:I==="always"}),elements:{reference:R.anchor},middleware:[OL({mainAxis:s+b,alignmentAxis:l}),d&&ML({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?LL():void 0,...D}),d&&VL({...D}),jL({...D,apply:({elements:G,rects:oe,availableWidth:ye,availableHeight:Ie})=>{const{width:je,height:$e}=oe.reference,Ue=G.floating.style;Ue.setProperty("--radix-popper-available-width",`${ye}px`),Ue.setProperty("--radix-popper-available-height",`${Ie}px`),Ue.setProperty("--radix-popper-anchor-width",`${je}px`),Ue.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),H&&UL({element:H,padding:u}),QL({arrowWidth:P,arrowHeight:b}),v&&FL({strategy:"referenceHidden",...D})]}),[ee,ue]=NC(pe),B=en(A);Wt(()=>{Ee&&B?.()},[Ee,B]);const ne=W.arrow?.x,te=W.arrow?.y,se=W.arrow?.centerOffset!==0,[he,ce]=S.useState();return Wt(()=>{j&&ce(window.getComputedStyle(j).zIndex)},[j]),_.jsx("div",{ref:me.setFloating,"data-radix-popper-content-wrapper":"",style:{...ve,transform:Ee?ve.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:_.jsx(HL,{scope:t,placedSide:ee,onArrowChange:J,arrowX:ne,arrowY:te,shouldHideArrow:se,children:_.jsx(Ge.div,{"data-side":ee,"data-align":ue,...x,ref:z,style:{...x.style,animation:Ee?void 0:"none"}})})})});AC.displayName=nv;var PC="PopperArrow",qL={top:"bottom",right:"left",bottom:"top",left:"right"},kC=S.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=GL(PC,r),l=qL[o.placedSide];return _.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:_.jsx(BL,{...s,ref:t,style:{...s.style,display:"block"}})})});kC.displayName=PC;function KL(n){return n!==null}var QL=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,l=s.arrow?.centerOffset!==0,u=l?0:n.arrowWidth,d=l?0:n.arrowHeight,[f,m]=NC(t),y={start:"0%",center:"50%",end:"100%"}[m],v=(s.arrow?.x??0)+u/2,I=(s.arrow?.y??0)+d/2;let A="",x="";return f==="bottom"?(A=l?y:`${v}px`,x=`${-d}px`):f==="top"?(A=l?y:`${v}px`,x=`${r.floating.height+d}px`):f==="right"?(A=`${-d}px`,x=l?y:`${I}px`):f==="left"&&(A=`${r.floating.width+d}px`,x=l?y:`${I}px`),{data:{x:A,y:x}}}});function NC(n){const[e,t="center"]=n.split("-");return[e,t]}var DC=CC,OC=bC,MC=AC,LC=kC,YL="Portal",bp=S.forwardRef((n,e)=>{const{container:t,...r}=n,[s,o]=S.useState(!1);Wt(()=>o(!0),[]);const l=t||s&&globalThis?.document?.body;return l?JO.createPortal(_.jsx(Ge.div,{...r,ref:e}),l):null});bp.displayName=YL;function XL(n){const e=JL(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(e2);if(d){const f=d.props.children,m=u.map(y=>y===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:y);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function JL(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=n2(s),u=t2(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ci(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var ZL=Symbol("radix.slottable");function e2(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===ZL}function t2(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function n2(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var r2=_p[" useInsertionEffect ".trim().toString()]||Wt;function ju({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,o,l]=s2({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:s;{const m=S.useRef(n!==void 0);S.useEffect(()=>{const y=m.current;y!==u&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,r])}const f=S.useCallback(m=>{if(u){const y=i2(m)?m(n):m;y!==n&&l.current?.(y)}else o(m)},[u,n,o,l]);return[d,f]}function s2({defaultProp:n,onChange:e}){const[t,r]=S.useState(n),s=S.useRef(t),o=S.useRef(e);return r2(()=>{o.current=e},[e]),S.useEffect(()=>{s.current!==t&&(o.current?.(t),s.current=t)},[t,s]),[t,r,o]}function i2(n){return typeof n=="function"}function o2(n){const e=S.useRef({value:n,previous:n});return S.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var VC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),a2="VisuallyHidden",l2=S.forwardRef((n,e)=>_.jsx(Ge.span,{...n,ref:e,style:{...VC,...n.style}}));l2.displayName=a2;var c2=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},ml=new WeakMap,zh=new WeakMap,Bh={},ly=0,jC=function(n){return n&&(n.host||jC(n.parentNode))},u2=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=jC(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},d2=function(n,e,t,r){var s=u2(e,Array.isArray(n)?n:[n]);Bh[t]||(Bh[t]=new WeakMap);var o=Bh[t],l=[],u=new Set,d=new Set(s),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};s.forEach(f);var m=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))m(v);else try{var I=v.getAttribute(r),A=I!==null&&I!=="false",x=(ml.get(v)||0)+1,R=(o.get(v)||0)+1;ml.set(v,x),o.set(v,R),l.push(v),x===1&&A&&zh.set(v,!0),R===1&&v.setAttribute(t,"true"),A||v.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",v,j)}})};return m(e),u.clear(),ly++,function(){l.forEach(function(y){var v=ml.get(y)-1,I=o.get(y)-1;ml.set(y,v),o.set(y,I),v||(zh.has(y)||y.removeAttribute(r),zh.delete(y)),I||y.removeAttribute(t)}),ly--,ly||(ml=new WeakMap,ml=new WeakMap,zh=new WeakMap,Bh={})}},rv=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=c2(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),d2(r,s,t,"aria-hidden")):function(){return null}},as=function(){return as=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},as.apply(this,arguments)};function FC(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function h2(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var af="right-scroll-bar-position",lf="width-before-scroll-bar",f2="with-scroll-bars-hidden",p2="--removed-body-scroll-bar-size";function cy(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function m2(n,e){var t=S.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var g2=typeof window<"u"?S.useLayoutEffect:S.useEffect,UT=new WeakMap;function y2(n,e){var t=m2(null,function(r){return n.forEach(function(s){return cy(s,r)})});return g2(function(){var r=UT.get(t);if(r){var s=new Set(r),o=new Set(n),l=t.current;s.forEach(function(u){o.has(u)||cy(u,null)}),o.forEach(function(u){s.has(u)||cy(u,l)})}UT.set(t,n)},[n]),t}function _2(n){return n}function v2(n,e){e===void 0&&(e=_2);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var l=e(o,r);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(r=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){r=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(o),l=t}var d=function(){var m=l;l=[],m.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),t={push:function(m){l.push(m),f()},filter:function(m){return l=l.filter(m),t}}}};return s}function w2(n){n===void 0&&(n={});var e=v2(null);return e.options=as({async:!0,ssr:!1},n),e}var UC=function(n){var e=n.sideCar,t=FC(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,as({},t))};UC.isSideCarExport=!0;function E2(n,e){return n.useMedium(e),UC}var zC=w2(),uy=function(){},Ap=S.forwardRef(function(n,e){var t=S.useRef(null),r=S.useState({onScrollCapture:uy,onWheelCapture:uy,onTouchMoveCapture:uy}),s=r[0],o=r[1],l=n.forwardProps,u=n.children,d=n.className,f=n.removeScrollBar,m=n.enabled,y=n.shards,v=n.sideCar,I=n.noRelative,A=n.noIsolation,x=n.inert,R=n.allowPinchZoom,j=n.as,V=j===void 0?"div":j,z=n.gapMode,H=FC(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),J=v,Z=y2([t,e]),P=as(as({},H),s);return S.createElement(S.Fragment,null,m&&S.createElement(J,{sideCar:zC,removeScrollBar:f,shards:y,noRelative:I,noIsolation:A,inert:x,setCallbacks:o,allowPinchZoom:!!R,lockRef:t,gapMode:z}),l?S.cloneElement(S.Children.only(u),as(as({},P),{ref:Z})):S.createElement(V,as({},P,{className:d,ref:Z}),u))});Ap.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ap.classNames={fullWidth:lf,zeroRight:af};var S2=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function T2(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=S2();return e&&n.setAttribute("nonce",e),n}function I2(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function x2(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var C2=function(){var n=0,e=null;return{add:function(t){n==0&&(e=T2())&&(I2(e,t),x2(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},R2=function(){var n=C2();return function(e,t){S.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},BC=function(){var n=R2(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},b2={left:0,top:0,right:0,gap:0},dy=function(n){return parseInt(n||"",10)||0},A2=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[dy(t),dy(r),dy(s)]},P2=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return b2;var e=A2(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},k2=BC(),Al="data-scroll-locked",N2=function(n,e,t,r){var s=n.left,o=n.top,l=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(f2,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Al,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(af,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(lf,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(af," .").concat(af,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(lf," .").concat(lf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Al,`] {
    `).concat(p2,": ").concat(u,`px;
  }
`)},zT=function(){var n=parseInt(document.body.getAttribute(Al)||"0",10);return isFinite(n)?n:0},D2=function(){S.useEffect(function(){return document.body.setAttribute(Al,(zT()+1).toString()),function(){var n=zT()-1;n<=0?document.body.removeAttribute(Al):document.body.setAttribute(Al,n.toString())}},[])},O2=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;D2();var o=S.useMemo(function(){return P2(s)},[s]);return S.createElement(k2,{styles:N2(o,!e,s,t?"":"!important")})},qy=!1;if(typeof window<"u")try{var $h=Object.defineProperty({},"passive",{get:function(){return qy=!0,!0}});window.addEventListener("test",$h,$h),window.removeEventListener("test",$h,$h)}catch{qy=!1}var gl=qy?{passive:!1}:!1,M2=function(n){return n.tagName==="TEXTAREA"},$C=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!M2(n)&&t[e]==="visible")},L2=function(n){return $C(n,"overflowY")},V2=function(n){return $C(n,"overflowX")},BT=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=WC(n,r);if(s){var o=HC(n,r),l=o[1],u=o[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},j2=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},F2=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},WC=function(n,e){return n==="v"?L2(e):V2(e)},HC=function(n,e){return n==="v"?j2(e):F2(e)},U2=function(n,e){return n==="h"&&e==="rtl"?-1:1},z2=function(n,e,t,r,s){var o=U2(n,window.getComputedStyle(e).direction),l=o*r,u=t.target,d=e.contains(u),f=!1,m=l>0,y=0,v=0;do{if(!u)break;var I=HC(n,u),A=I[0],x=I[1],R=I[2],j=x-R-o*A;(A||j)&&WC(n,u)&&(y+=j,v+=A);var V=u.parentNode;u=V&&V.nodeType===Node.DOCUMENT_FRAGMENT_NODE?V.host:V}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(m&&Math.abs(y)<1||!m&&Math.abs(v)<1)&&(f=!0),f},Wh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},$T=function(n){return[n.deltaX,n.deltaY]},WT=function(n){return n&&"current"in n?n.current:n},B2=function(n,e){return n[0]===e[0]&&n[1]===e[1]},$2=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},W2=0,yl=[];function H2(n){var e=S.useRef([]),t=S.useRef([0,0]),r=S.useRef(),s=S.useState(W2++)[0],o=S.useState(BC)[0],l=S.useRef(n);S.useEffect(function(){l.current=n},[n]),S.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var x=h2([n.lockRef.current],(n.shards||[]).map(WT),!0).filter(Boolean);return x.forEach(function(R){return R.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=S.useCallback(function(x,R){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var j=Wh(x),V=t.current,z="deltaX"in x?x.deltaX:V[0]-j[0],H="deltaY"in x?x.deltaY:V[1]-j[1],J,Z=x.target,P=Math.abs(z)>Math.abs(H)?"h":"v";if("touches"in x&&P==="h"&&Z.type==="range")return!1;var b=BT(P,Z);if(!b)return!0;if(b?J=P:(J=P==="v"?"h":"v",b=BT(P,Z)),!b)return!1;if(!r.current&&"changedTouches"in x&&(z||H)&&(r.current=J),!J)return!0;var N=r.current||J;return z2(N,R,x,N==="h"?z:H)},[]),d=S.useCallback(function(x){var R=x;if(!(!yl.length||yl[yl.length-1]!==o)){var j="deltaY"in R?$T(R):Wh(R),V=e.current.filter(function(J){return J.name===R.type&&(J.target===R.target||R.target===J.shadowParent)&&B2(J.delta,j)})[0];if(V&&V.should){R.cancelable&&R.preventDefault();return}if(!V){var z=(l.current.shards||[]).map(WT).filter(Boolean).filter(function(J){return J.contains(R.target)}),H=z.length>0?u(R,z[0]):!l.current.noIsolation;H&&R.cancelable&&R.preventDefault()}}},[]),f=S.useCallback(function(x,R,j,V){var z={name:x,delta:R,target:j,should:V,shadowParent:G2(j)};e.current.push(z),setTimeout(function(){e.current=e.current.filter(function(H){return H!==z})},1)},[]),m=S.useCallback(function(x){t.current=Wh(x),r.current=void 0},[]),y=S.useCallback(function(x){f(x.type,$T(x),x.target,u(x,n.lockRef.current))},[]),v=S.useCallback(function(x){f(x.type,Wh(x),x.target,u(x,n.lockRef.current))},[]);S.useEffect(function(){return yl.push(o),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",d,gl),document.addEventListener("touchmove",d,gl),document.addEventListener("touchstart",m,gl),function(){yl=yl.filter(function(x){return x!==o}),document.removeEventListener("wheel",d,gl),document.removeEventListener("touchmove",d,gl),document.removeEventListener("touchstart",m,gl)}},[]);var I=n.removeScrollBar,A=n.inert;return S.createElement(S.Fragment,null,A?S.createElement(o,{styles:$2(s)}):null,I?S.createElement(O2,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function G2(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const q2=E2(zC,H2);var Pp=S.forwardRef(function(n,e){return S.createElement(Ap,as({},n,{ref:e,sideCar:q2}))});Pp.classNames=Ap.classNames;var K2=[" ","Enter","ArrowUp","ArrowDown"],Q2=[" ","Enter"],ua="Select",[kp,Np,Y2]=q_(ua),[nc]=go(ua,[Y2,Rp]),Dp=Rp(),[X2,yo]=nc(ua),[J2,Z2]=nc(ua),GC=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:o,value:l,defaultValue:u,onValueChange:d,dir:f,name:m,autoComplete:y,disabled:v,required:I,form:A}=n,x=Dp(e),[R,j]=S.useState(null),[V,z]=S.useState(null),[H,J]=S.useState(!1),Z=wp(f),[P,b]=ju({prop:r,defaultProp:s??!1,onChange:o,caller:ua}),[N,O]=ju({prop:l,defaultProp:u,onChange:d,caller:ua}),M=S.useRef(null),F=R?A||!!R.closest("form"):!0,[D,me]=S.useState(new Set),ve=Array.from(D).map(pe=>pe.props.value).join(";");return _.jsx(DC,{...x,children:_.jsxs(X2,{required:I,scope:e,trigger:R,onTriggerChange:j,valueNode:V,onValueNodeChange:z,valueNodeHasChildren:H,onValueNodeHasChildrenChange:J,contentId:Xs(),value:N,onValueChange:O,open:P,onOpenChange:b,dir:Z,triggerPointerDownPosRef:M,disabled:v,children:[_.jsx(kp.Provider,{scope:e,children:_.jsx(J2,{scope:n.__scopeSelect,onNativeOptionAdd:S.useCallback(pe=>{me(Ee=>new Set(Ee).add(pe))},[]),onNativeOptionRemove:S.useCallback(pe=>{me(Ee=>{const W=new Set(Ee);return W.delete(pe),W})},[]),children:t})}),F?_.jsxs(pR,{"aria-hidden":!0,required:I,tabIndex:-1,name:m,autoComplete:y,value:N,onChange:pe=>O(pe.target.value),disabled:v,form:A,children:[N===void 0?_.jsx("option",{value:""}):null,Array.from(D)]},ve):null]})})};GC.displayName=ua;var qC="SelectTrigger",KC=S.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,o=Dp(t),l=yo(qC,t),u=l.disabled||r,d=rt(e,l.onTriggerChange),f=Np(t),m=S.useRef("touch"),[y,v,I]=gR(x=>{const R=f().filter(z=>!z.disabled),j=R.find(z=>z.value===l.value),V=yR(R,x,j);V!==void 0&&l.onValueChange(V.value)}),A=x=>{u||(l.onOpenChange(!0),I()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return _.jsx(OC,{asChild:!0,...o,children:_.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":mR(l.value)?"":void 0,...s,ref:d,onClick:Ae(s.onClick,x=>{x.currentTarget.focus(),m.current!=="mouse"&&A(x)}),onPointerDown:Ae(s.onPointerDown,x=>{m.current=x.pointerType;const R=x.target;R.hasPointerCapture(x.pointerId)&&R.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(A(x),x.preventDefault())}),onKeyDown:Ae(s.onKeyDown,x=>{const R=y.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&v(x.key),!(R&&x.key===" ")&&K2.includes(x.key)&&(A(),x.preventDefault())})})})});KC.displayName=qC;var QC="SelectValue",YC=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:o,placeholder:l="",...u}=n,d=yo(QC,t),{onValueNodeHasChildrenChange:f}=d,m=o!==void 0,y=rt(e,d.onValueNodeChange);return Wt(()=>{f(m)},[f,m]),_.jsx(Ge.span,{...u,ref:y,style:{pointerEvents:"none"},children:mR(d.value)?_.jsx(_.Fragment,{children:l}):o})});YC.displayName=QC;var eV="SelectIcon",XC=S.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return _.jsx(Ge.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});XC.displayName=eV;var tV="SelectPortal",JC=n=>_.jsx(bp,{asChild:!0,...n});JC.displayName=tV;var da="SelectContent",ZC=S.forwardRef((n,e)=>{const t=yo(da,n.__scopeSelect),[r,s]=S.useState();if(Wt(()=>{s(new DocumentFragment)},[]),!t.open){const o=r;return o?td.createPortal(_.jsx(eR,{scope:n.__scopeSelect,children:_.jsx(kp.Slot,{scope:n.__scopeSelect,children:_.jsx("div",{children:n.children})})}),o):null}return _.jsx(tR,{...n,ref:e})});ZC.displayName=da;var Ar=10,[eR,_o]=nc(da),nV="SelectContentImpl",rV=XL("SelectContent.RemoveScroll"),tR=S.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:l,side:u,sideOffset:d,align:f,alignOffset:m,arrowPadding:y,collisionBoundary:v,collisionPadding:I,sticky:A,hideWhenDetached:x,avoidCollisions:R,...j}=n,V=yo(da,t),[z,H]=S.useState(null),[J,Z]=S.useState(null),P=rt(e,G=>H(G)),[b,N]=S.useState(null),[O,M]=S.useState(null),F=Np(t),[D,me]=S.useState(!1),ve=S.useRef(!1);S.useEffect(()=>{if(z)return rv(z)},[z]),K_();const pe=S.useCallback(G=>{const[oe,...ye]=F().map($e=>$e.ref.current),[Ie]=ye.slice(-1),je=document.activeElement;for(const $e of G)if($e===je||($e?.scrollIntoView({block:"nearest"}),$e===oe&&J&&(J.scrollTop=0),$e===Ie&&J&&(J.scrollTop=J.scrollHeight),$e?.focus(),document.activeElement!==je))return},[F,J]),Ee=S.useCallback(()=>pe([b,z]),[pe,b,z]);S.useEffect(()=>{D&&Ee()},[D,Ee]);const{onOpenChange:W,triggerPointerDownPosRef:ee}=V;S.useEffect(()=>{if(z){let G={x:0,y:0};const oe=Ie=>{G={x:Math.abs(Math.round(Ie.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(Ie.pageY)-(ee.current?.y??0))}},ye=Ie=>{G.x<=10&&G.y<=10?Ie.preventDefault():z.contains(Ie.target)||W(!1),document.removeEventListener("pointermove",oe),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",ye,{capture:!0})}}},[z,W,ee]),S.useEffect(()=>{const G=()=>W(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[W]);const[ue,B]=gR(G=>{const oe=F().filter(je=>!je.disabled),ye=oe.find(je=>je.ref.current===document.activeElement),Ie=yR(oe,G,ye);Ie&&setTimeout(()=>Ie.ref.current.focus())}),ne=S.useCallback((G,oe,ye)=>{const Ie=!ve.current&&!ye;(V.value!==void 0&&V.value===oe||Ie)&&(N(G),Ie&&(ve.current=!0))},[V.value]),te=S.useCallback(()=>z?.focus(),[z]),se=S.useCallback((G,oe,ye)=>{const Ie=!ve.current&&!ye;(V.value!==void 0&&V.value===oe||Ie)&&M(G)},[V.value]),he=r==="popper"?Ky:nR,ce=he===Ky?{side:u,sideOffset:d,align:f,alignOffset:m,arrowPadding:y,collisionBoundary:v,collisionPadding:I,sticky:A,hideWhenDetached:x,avoidCollisions:R}:{};return _.jsx(eR,{scope:t,content:z,viewport:J,onViewportChange:Z,itemRefCallback:ne,selectedItem:b,onItemLeave:te,itemTextRefCallback:se,focusSelectedItem:Ee,selectedItemText:O,position:r,isPositioned:D,searchRef:ue,children:_.jsx(Pp,{as:rV,allowPinchZoom:!0,children:_.jsx(Sp,{asChild:!0,trapped:V.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:Ae(s,G=>{V.trigger?.focus({preventScroll:!0}),G.preventDefault()}),children:_.jsx(Ep,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>V.onOpenChange(!1),children:_.jsx(he,{role:"listbox",id:V.contentId,"data-state":V.open?"open":"closed",dir:V.dir,onContextMenu:G=>G.preventDefault(),...j,...ce,onPlaced:()=>me(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Ae(j.onKeyDown,G=>{const oe=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!oe&&G.key.length===1&&B(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let Ie=F().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(G.key)&&(Ie=Ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const je=G.target,$e=Ie.indexOf(je);Ie=Ie.slice($e+1)}setTimeout(()=>pe(Ie)),G.preventDefault()}})})})})})})});tR.displayName=nV;var sV="SelectItemAlignedPosition",nR=S.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,o=yo(da,t),l=_o(da,t),[u,d]=S.useState(null),[f,m]=S.useState(null),y=rt(e,P=>m(P)),v=Np(t),I=S.useRef(!1),A=S.useRef(!0),{viewport:x,selectedItem:R,selectedItemText:j,focusSelectedItem:V}=l,z=S.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&f&&x&&R&&j){const P=o.trigger.getBoundingClientRect(),b=f.getBoundingClientRect(),N=o.valueNode.getBoundingClientRect(),O=j.getBoundingClientRect();if(o.dir!=="rtl"){const je=O.left-b.left,$e=N.left-je,Ue=P.left-$e,ht=P.width+Ue,Dn=Math.max(ht,b.width),xn=window.innerWidth-Ar,Cn=By($e,[Ar,Math.max(Ar,xn-Dn)]);u.style.minWidth=ht+"px",u.style.left=Cn+"px"}else{const je=b.right-O.right,$e=window.innerWidth-N.right-je,Ue=window.innerWidth-P.right-$e,ht=P.width+Ue,Dn=Math.max(ht,b.width),xn=window.innerWidth-Ar,Cn=By($e,[Ar,Math.max(Ar,xn-Dn)]);u.style.minWidth=ht+"px",u.style.right=Cn+"px"}const M=v(),F=window.innerHeight-Ar*2,D=x.scrollHeight,me=window.getComputedStyle(f),ve=parseInt(me.borderTopWidth,10),pe=parseInt(me.paddingTop,10),Ee=parseInt(me.borderBottomWidth,10),W=parseInt(me.paddingBottom,10),ee=ve+pe+D+W+Ee,ue=Math.min(R.offsetHeight*5,ee),B=window.getComputedStyle(x),ne=parseInt(B.paddingTop,10),te=parseInt(B.paddingBottom,10),se=P.top+P.height/2-Ar,he=F-se,ce=R.offsetHeight/2,G=R.offsetTop+ce,oe=ve+pe+G,ye=ee-oe;if(oe<=se){const je=M.length>0&&R===M[M.length-1].ref.current;u.style.bottom="0px";const $e=f.clientHeight-x.offsetTop-x.offsetHeight,Ue=Math.max(he,ce+(je?te:0)+$e+Ee),ht=oe+Ue;u.style.height=ht+"px"}else{const je=M.length>0&&R===M[0].ref.current;u.style.top="0px";const Ue=Math.max(se,ve+x.offsetTop+(je?ne:0)+ce)+ye;u.style.height=Ue+"px",x.scrollTop=oe-se+x.offsetTop}u.style.margin=`${Ar}px 0`,u.style.minHeight=ue+"px",u.style.maxHeight=F+"px",r?.(),requestAnimationFrame(()=>I.current=!0)}},[v,o.trigger,o.valueNode,u,f,x,R,j,o.dir,r]);Wt(()=>z(),[z]);const[H,J]=S.useState();Wt(()=>{f&&J(window.getComputedStyle(f).zIndex)},[f]);const Z=S.useCallback(P=>{P&&A.current===!0&&(z(),V?.(),A.current=!1)},[z,V]);return _.jsx(oV,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:I,onScrollButtonChange:Z,children:_.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:H},children:_.jsx(Ge.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});nR.displayName=sV;var iV="SelectPopperPosition",Ky=S.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Ar,...o}=n,l=Dp(t);return _.jsx(MC,{...l,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ky.displayName=iV;var[oV,sv]=nc(da,{}),Qy="SelectViewport",rR=S.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,o=_o(Qy,t),l=sv(Qy,t),u=rt(e,o.onViewportChange),d=S.useRef(0);return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),_.jsx(kp.Slot,{scope:t,children:_.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ae(s.onScroll,f=>{const m=f.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=l;if(v?.current&&y){const I=Math.abs(d.current-m.scrollTop);if(I>0){const A=window.innerHeight-Ar*2,x=parseFloat(y.style.minHeight),R=parseFloat(y.style.height),j=Math.max(x,R);if(j<A){const V=j+I,z=Math.min(A,V),H=V-z;y.style.height=z+"px",y.style.bottom==="0px"&&(m.scrollTop=H>0?H:0,y.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});rR.displayName=Qy;var sR="SelectGroup",[aV,lV]=nc(sR),cV=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Xs();return _.jsx(aV,{scope:t,id:s,children:_.jsx(Ge.div,{role:"group","aria-labelledby":s,...r,ref:e})})});cV.displayName=sR;var iR="SelectLabel",uV=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=lV(iR,t);return _.jsx(Ge.div,{id:s.id,...r,ref:e})});uV.displayName=iR;var Af="SelectItem",[dV,oR]=nc(Af),aR=S.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:o,...l}=n,u=yo(Af,t),d=_o(Af,t),f=u.value===r,[m,y]=S.useState(o??""),[v,I]=S.useState(!1),A=rt(e,V=>d.itemRefCallback?.(V,r,s)),x=Xs(),R=S.useRef("touch"),j=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return _.jsx(dV,{scope:t,value:r,disabled:s,textId:x,isSelected:f,onItemTextChange:S.useCallback(V=>{y(z=>z||(V?.textContent??"").trim())},[]),children:_.jsx(kp.ItemSlot,{scope:t,value:r,disabled:s,textValue:m,children:_.jsx(Ge.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:A,onFocus:Ae(l.onFocus,()=>I(!0)),onBlur:Ae(l.onBlur,()=>I(!1)),onClick:Ae(l.onClick,()=>{R.current!=="mouse"&&j()}),onPointerUp:Ae(l.onPointerUp,()=>{R.current==="mouse"&&j()}),onPointerDown:Ae(l.onPointerDown,V=>{R.current=V.pointerType}),onPointerMove:Ae(l.onPointerMove,V=>{R.current=V.pointerType,s?d.onItemLeave?.():R.current==="mouse"&&V.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(l.onPointerLeave,V=>{V.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Ae(l.onKeyDown,V=>{d.searchRef?.current!==""&&V.key===" "||(Q2.includes(V.key)&&j(),V.key===" "&&V.preventDefault())})})})})});aR.displayName=Af;var fu="SelectItemText",lR=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...o}=n,l=yo(fu,t),u=_o(fu,t),d=oR(fu,t),f=Z2(fu,t),[m,y]=S.useState(null),v=rt(e,j=>y(j),d.onItemTextChange,j=>u.itemTextRefCallback?.(j,d.value,d.disabled)),I=m?.textContent,A=S.useMemo(()=>_.jsx("option",{value:d.value,disabled:d.disabled,children:I},d.value),[d.disabled,d.value,I]),{onNativeOptionAdd:x,onNativeOptionRemove:R}=f;return Wt(()=>(x(A),()=>R(A)),[x,R,A]),_.jsxs(_.Fragment,{children:[_.jsx(Ge.span,{id:d.textId,...o,ref:v}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?td.createPortal(o.children,l.valueNode):null]})});lR.displayName=fu;var cR="SelectItemIndicator",uR=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return oR(cR,t).isSelected?_.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});uR.displayName=cR;var Yy="SelectScrollUpButton",dR=S.forwardRef((n,e)=>{const t=_o(Yy,n.__scopeSelect),r=sv(Yy,n.__scopeSelect),[s,o]=S.useState(!1),l=rt(e,r.onScrollButtonChange);return Wt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const f=d.scrollTop>0;o(f)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?_.jsx(fR,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});dR.displayName=Yy;var Xy="SelectScrollDownButton",hR=S.forwardRef((n,e)=>{const t=_o(Xy,n.__scopeSelect),r=sv(Xy,n.__scopeSelect),[s,o]=S.useState(!1),l=rt(e,r.onScrollButtonChange);return Wt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;o(m)};const d=t.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?_.jsx(fR,{...n,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=t;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});hR.displayName=Xy;var fR=S.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,o=_o("SelectScrollButton",t),l=S.useRef(null),u=Np(t),d=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),Wt(()=>{u().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),_.jsx(Ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ae(s.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Ae(s.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Ae(s.onPointerLeave,()=>{d()})})}),hV="SelectSeparator",fV=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return _.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e})});fV.displayName=hV;var Jy="SelectArrow",pV=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Dp(t),o=yo(Jy,t),l=_o(Jy,t);return o.open&&l.position==="popper"?_.jsx(LC,{...s,...r,ref:e}):null});pV.displayName=Jy;var mV="SelectBubbleInput",pR=S.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=S.useRef(null),o=rt(r,s),l=o2(e);return S.useEffect(()=>{const u=s.current;if(!u)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&m){const y=new Event("change",{bubbles:!0});m.call(u,e),u.dispatchEvent(y)}},[l,e]),_.jsx(Ge.select,{...t,style:{...VC,...t.style},ref:o,defaultValue:e})});pR.displayName=mV;function mR(n){return n===""||n===void 0}function gR(n){const e=en(n),t=S.useRef(""),r=S.useRef(0),s=S.useCallback(l=>{const u=t.current+l;e(u),(function d(f){t.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(u)},[e]),o=S.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,o]}function yR(n,e,t){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=gV(n,Math.max(o,0));s.length===1&&(l=l.filter(f=>f!==t));const d=l.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function gV(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var yV=GC,_V=KC,vV=YC,wV=XC,EV=JC,SV=ZC,TV=rR,IV=aR,xV=lR,CV=uR,RV=dR,bV=hR;function Pf({...n}){return _.jsx(yV,{"data-slot":"select",...n})}function kf({...n}){return _.jsx(vV,{"data-slot":"select-value",...n})}function Nf({className:n,size:e="default",children:t,...r}){return _.jsxs(_V,{"data-slot":"select-trigger","data-size":e,className:ot("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,_.jsx(wV,{asChild:!0,children:_.jsx(Fx,{className:"size-4 opacity-50"})})]})}function Df({className:n,children:e,position:t="popper",...r}){return _.jsx(EV,{children:_.jsxs(SV,{"data-slot":"select-content",className:ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[_.jsx(AV,{}),_.jsx(TV,{className:ot("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),_.jsx(PV,{})]})})}function Fl({className:n,children:e,...t}){return _.jsxs(IV,{"data-slot":"select-item",className:ot("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[_.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:_.jsx(CV,{children:_.jsx(LD,{className:"size-4"})})}),_.jsx(xV,{children:e})]})}function AV({className:n,...e}){return _.jsx(RV,{"data-slot":"select-scroll-up-button",className:ot("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(zD,{className:"size-4"})})}function PV({className:n,...e}){return _.jsx(bV,{"data-slot":"select-scroll-down-button",className:ot("flex cursor-default items-center justify-center py-1",n),...e,children:_.jsx(Fx,{className:"size-4"})})}const kV="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Of(n){const[e,t]=S.useState(!1),r=()=>{t(!0)},{src:s,alt:o,style:l,className:u,...d}=n;return e?_.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${u??""}`,style:l,children:_.jsx("div",{className:"flex items-center justify-center w-full h-full",children:_.jsx("img",{src:kV,alt:"Error loading image",...d,"data-original-url":s})})}):_.jsx("img",{src:s,alt:o,className:u,style:l,...d,onError:r})}const NV=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],DV=({routes:n,onRouteClick:e,filterGrade:t,onFilterChange:r,selectedRouteId:s})=>_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Ux,{className:"size-4 text-muted-foreground"}),_.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by grade:"})]}),_.jsxs(Pf,{value:t||"all",onValueChange:o=>r(o==="all"?"":o),children:[_.jsx(Nf,{className:"w-32",children:_.jsx(kf,{placeholder:"All grades"})}),_.jsxs(Df,{children:[_.jsx(Fl,{value:"all",children:"All grades"}),NV.map(o=>_.jsx(Fl,{value:o,children:o},o))]})]}),t&&_.jsx(Pn,{variant:"outline",size:"sm",onClick:()=>r(""),children:"Clear filter"})]}),_.jsxs("div",{className:"landscape-mobile:space-y-4",children:[_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4 landscape-mobile:hidden",children:n.map(o=>_.jsxs(Tf,{className:`cursor-pointer hover:shadow-lg transition-all overflow-hidden ${s===o.id?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>e(o),children:[_.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[_.jsx(Of,{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"}),_.jsx("div",{className:"absolute top-3 left-3",children:_.jsx(Hs,{variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:o.grade})}),_.jsx("div",{className:"absolute top-3 right-3",children:_.jsx(Hs,{variant:"outline",className:"bg-background/90 backdrop-blur-sm border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-background)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff"},children:o.color})})]}),_.jsx(G_,{className:"p-4",children:_.jsxs("div",{className:"space-y-3",children:[_.jsx("h3",{className:"font-medium truncate",children:o.name}),_.jsx("div",{className:"flex items-center justify-center",children:_.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:5},(l,u)=>_.jsx(Mu,{className:`size-4 ${u<Math.round(o.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},u)),_.jsx("span",{className:"text-sm font-medium ml-2",children:o.averageRating>0?o.averageRating.toFixed(1):""}),_.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",o.totalReviews,")"]})]})}),_.jsx("div",{className:"text-center",children:_.jsxs("div",{className:"text-xs text-muted-foreground",children:["Set by ",o.setter]})})]})})]},o.id))}),_.jsx("div",{className:"hidden landscape-mobile:block space-y-4",children:n.map(o=>{const l=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),u=f=>Array.from({length:5},(m,y)=>_.jsx(Mu,{className:`size-3 ${y<f?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},y)),d=f=>{const m=new Date(f),v=Math.abs(new Date().getTime()-m.getTime());return Math.ceil(v/(1e3*60*60*24))};return _.jsx(Tf,{className:`cursor-pointer hover:shadow-lg transition-all overflow-hidden ${s===o.id?"ring-2 ring-primary shadow-lg":""}`,onClick:()=>e(o),children:_.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"space-y-3",children:[_.jsx("h3",{className:"text-2xl font-medium",children:o.name}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(Hs,{variant:"secondary",className:"text-base px-3 py-1.5",children:o.grade}),_.jsxs(Hs,{variant:"outline",className:"text-base px-3 py-1.5 border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-background)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff",borderColor:"transparent"},children:[o.color," holds"]}),d(o.dateSet)<=7&&_.jsx(Hs,{variant:"outline",className:"text-xs px-2 py-1 bg-green-50 text-green-700 border-green-200",children:"New"})]})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Bx,{className:"size-4 text-muted-foreground"}),_.jsxs("span",{className:"text-sm",children:["Route setter: ",_.jsx("strong",{children:o.setter})]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(jx,{className:"size-4 text-muted-foreground"}),_.jsxs("span",{className:"text-sm",children:["Set on ",l(o.dateSet)]}),_.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",d(o.dateSet)," days ago)"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"flex items-center gap-1",children:u(Math.round(o.averageRating))}),_.jsx("span",{className:"font-medium",children:o.averageRating>0?o.averageRating.toFixed(1):""}),_.jsxs("span",{className:"text-muted-foreground",children:["(",o.totalReviews," review",o.totalReviews!==1?"s":"",")"]})]}),o.totalReviews>0&&_.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[_.jsx(zx,{className:"size-4"}),_.jsx("span",{children:o.totalReviews===1?"Latest review":`${o.totalReviews} climbers have reviewed this route`})]})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"aspect-[4/3] relative overflow-hidden rounded-lg",children:_.jsx(Of,{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("h4",{className:"font-medium text-sm",children:"Route Description"}),_.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:o.description||"No description available for this route."})]})]})]})},o.id)})})]}),n.length===0&&_.jsx("div",{className:"text-center py-12",children:_.jsx("p",{className:"text-muted-foreground",children:"No routes found matching your filter."})})]});function OV(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var _r=n=>{const{present:e,children:t}=n,r=MV(e),s=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),o=rt(r.ref,LV(s));return typeof t=="function"||r.isPresent?S.cloneElement(s,{ref:o}):null};_r.displayName="Presence";function MV(n){const[e,t]=S.useState(),r=S.useRef(null),s=S.useRef(n),o=S.useRef("none"),l=n?"mounted":"unmounted",[u,d]=OV(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const f=Hh(r.current);o.current=u==="mounted"?f:"none"},[u]),Wt(()=>{const f=r.current,m=s.current;if(m!==n){const v=o.current,I=Hh(f);n?d("MOUNT"):I==="none"||f?.display==="none"?d("UNMOUNT"):d(m&&v!==I?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),Wt(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,y=I=>{const x=Hh(r.current).includes(CSS.escape(I.animationName));if(I.target===e&&x&&(d("ANIMATION_END"),!s.current)){const R=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=R)})}},v=I=>{I.target===e&&(o.current=Hh(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(f=>{r.current=f?getComputedStyle(f):null,t(f)},[])}}function Hh(n){return n?.animationName||"none"}function LV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function VV(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var iv="ScrollArea",[_R]=go(iv),[jV,vr]=_R(iv),vR=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:o=600,...l}=n,[u,d]=S.useState(null),[f,m]=S.useState(null),[y,v]=S.useState(null),[I,A]=S.useState(null),[x,R]=S.useState(null),[j,V]=S.useState(0),[z,H]=S.useState(0),[J,Z]=S.useState(!1),[P,b]=S.useState(!1),N=rt(e,M=>d(M)),O=wp(s);return _.jsx(jV,{scope:t,type:r,dir:O,scrollHideDelay:o,scrollArea:u,viewport:f,onViewportChange:m,content:y,onContentChange:v,scrollbarX:I,onScrollbarXChange:A,scrollbarXEnabled:J,onScrollbarXEnabledChange:Z,scrollbarY:x,onScrollbarYChange:R,scrollbarYEnabled:P,onScrollbarYEnabledChange:b,onCornerWidthChange:V,onCornerHeightChange:H,children:_.jsx(Ge.div,{dir:O,...l,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":z+"px",...n.style}})})});vR.displayName=iv;var wR="ScrollAreaViewport",ER=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...o}=n,l=vr(wR,t),u=S.useRef(null),d=rt(e,u,l.onViewportChange);return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),_.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...n.style},children:_.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});ER.displayName=wR;var Ss="ScrollAreaScrollbar",SR=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=vr(Ss,n.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,u=n.orientation==="horizontal";return S.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),s.type==="hover"?_.jsx(FV,{...r,ref:e,forceMount:t}):s.type==="scroll"?_.jsx(UV,{...r,ref:e,forceMount:t}):s.type==="auto"?_.jsx(TR,{...r,ref:e,forceMount:t}):s.type==="always"?_.jsx(ov,{...r,ref:e}):null});SR.displayName=Ss;var FV=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=vr(Ss,n.__scopeScrollArea),[o,l]=S.useState(!1);return S.useEffect(()=>{const u=s.scrollArea;let d=0;if(u){const f=()=>{window.clearTimeout(d),l(!0)},m=()=>{d=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",f),u.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",f),u.removeEventListener("pointerleave",m)}}},[s.scrollArea,s.scrollHideDelay]),_.jsx(_r,{present:t||o,children:_.jsx(TR,{"data-state":o?"visible":"hidden",...r,ref:e})})}),UV=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=vr(Ss,n.__scopeScrollArea),o=n.orientation==="horizontal",l=Mp(()=>d("SCROLL_END"),100),[u,d]=VV("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(u==="idle"){const f=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(f)}},[u,s.scrollHideDelay,d]),S.useEffect(()=>{const f=s.viewport,m=o?"scrollLeft":"scrollTop";if(f){let y=f[m];const v=()=>{const I=f[m];y!==I&&(d("SCROLL"),l()),y=I};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[s.viewport,o,d,l]),_.jsx(_r,{present:t||u!=="hidden",children:_.jsx(ov,{"data-state":u==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ae(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Ae(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),TR=S.forwardRef((n,e)=>{const t=vr(Ss,n.__scopeScrollArea),{forceMount:r,...s}=n,[o,l]=S.useState(!1),u=n.orientation==="horizontal",d=Mp(()=>{if(t.viewport){const f=t.viewport.offsetWidth<t.viewport.scrollWidth,m=t.viewport.offsetHeight<t.viewport.scrollHeight;l(u?f:m)}},10);return Ul(t.viewport,d),Ul(t.content,d),_.jsx(_r,{present:r||o,children:_.jsx(ov,{"data-state":o?"visible":"hidden",...s,ref:e})})}),ov=S.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=vr(Ss,n.__scopeScrollArea),o=S.useRef(null),l=S.useRef(0),[u,d]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=bR(u.viewport,u.content),m={...r,sizes:u,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:v=>o.current=v,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:v=>l.current=v};function y(v,I){return GV(v,l.current,u,I)}return t==="horizontal"?_.jsx(zV,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollLeft,I=HT(v,u,s.dir);o.current.style.transform=`translate3d(${I}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=y(v,s.dir))}}):t==="vertical"?_.jsx(BV,{...m,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollTop,I=HT(v,u);o.current.style.transform=`translate3d(0, ${I}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=y(v))}}):null}),zV=S.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=vr(Ss,n.__scopeScrollArea),[l,u]=S.useState(),d=S.useRef(null),f=rt(e,d,o.onScrollbarXChange);return S.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),_.jsx(xR,{"data-orientation":"horizontal",...s,ref:f,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Op(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.x),onDragScroll:m=>n.onDragScroll(m.x),onWheelScroll:(m,y)=>{if(o.viewport){const v=o.viewport.scrollLeft+m.deltaX;n.onWheelScroll(v),PR(v,y)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Lf(l.paddingLeft),paddingEnd:Lf(l.paddingRight)}})}})}),BV=S.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=vr(Ss,n.__scopeScrollArea),[l,u]=S.useState(),d=S.useRef(null),f=rt(e,d,o.onScrollbarYChange);return S.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),_.jsx(xR,{"data-orientation":"vertical",...s,ref:f,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Op(t)+"px",...n.style},onThumbPointerDown:m=>n.onThumbPointerDown(m.y),onDragScroll:m=>n.onDragScroll(m.y),onWheelScroll:(m,y)=>{if(o.viewport){const v=o.viewport.scrollTop+m.deltaY;n.onWheelScroll(v),PR(v,y)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Lf(l.paddingTop),paddingEnd:Lf(l.paddingBottom)}})}})}),[$V,IR]=_R(Ss),xR=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:m,onResize:y,...v}=n,I=vr(Ss,t),[A,x]=S.useState(null),R=rt(e,N=>x(N)),j=S.useRef(null),V=S.useRef(""),z=I.viewport,H=r.content-r.viewport,J=en(m),Z=en(d),P=Mp(y,10);function b(N){if(j.current){const O=N.clientX-j.current.left,M=N.clientY-j.current.top;f({x:O,y:M})}}return S.useEffect(()=>{const N=O=>{const M=O.target;A?.contains(M)&&J(O,H)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[z,A,H,J]),S.useEffect(Z,[r,Z]),Ul(A,P),Ul(I.content,P),_.jsx($V,{scope:t,scrollbar:A,hasThumb:s,onThumbChange:en(o),onThumbPointerUp:en(l),onThumbPositionChange:Z,onThumbPointerDown:en(u),children:_.jsx(Ge.div,{...v,ref:R,style:{position:"absolute",...v.style},onPointerDown:Ae(n.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),j.current=A.getBoundingClientRect(),V.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I.viewport&&(I.viewport.style.scrollBehavior="auto"),b(N))}),onPointerMove:Ae(n.onPointerMove,b),onPointerUp:Ae(n.onPointerUp,N=>{const O=N.target;O.hasPointerCapture(N.pointerId)&&O.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=V.current,I.viewport&&(I.viewport.style.scrollBehavior=""),j.current=null})})})}),Mf="ScrollAreaThumb",CR=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=IR(Mf,n.__scopeScrollArea);return _.jsx(_r,{present:t||s.hasThumb,children:_.jsx(WV,{ref:e,...r})})}),WV=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,o=vr(Mf,t),l=IR(Mf,t),{onThumbPositionChange:u}=l,d=rt(e,y=>l.onThumbChange(y)),f=S.useRef(void 0),m=Mp(()=>{f.current&&(f.current(),f.current=void 0)},100);return S.useEffect(()=>{const y=o.viewport;if(y){const v=()=>{if(m(),!f.current){const I=qV(y,u);f.current=I,u()}};return u(),y.addEventListener("scroll",v),()=>y.removeEventListener("scroll",v)}},[o.viewport,m,u]),_.jsx(Ge.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ae(n.onPointerDownCapture,y=>{const I=y.target.getBoundingClientRect(),A=y.clientX-I.left,x=y.clientY-I.top;l.onThumbPointerDown({x:A,y:x})}),onPointerUp:Ae(n.onPointerUp,l.onThumbPointerUp)})});CR.displayName=Mf;var av="ScrollAreaCorner",RR=S.forwardRef((n,e)=>{const t=vr(av,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?_.jsx(HV,{...n,ref:e}):null});RR.displayName=av;var HV=S.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=vr(av,t),[o,l]=S.useState(0),[u,d]=S.useState(0),f=!!(o&&u);return Ul(s.scrollbarX,()=>{const m=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(m),d(m)}),Ul(s.scrollbarY,()=>{const m=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(m),l(m)}),f?_.jsx(Ge.div,{...r,ref:e,style:{width:o,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Lf(n){return n?parseInt(n,10):0}function bR(n,e){const t=n/e;return isNaN(t)?0:t}function Op(n){const e=bR(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function GV(n,e,t,r="ltr"){const s=Op(t),o=s/2,l=e||o,u=s-l,d=t.scrollbar.paddingStart+l,f=t.scrollbar.size-t.scrollbar.paddingEnd-u,m=t.content-t.viewport,y=r==="ltr"?[0,m]:[m*-1,0];return AR([d,f],y)(n)}function HT(n,e,t="ltr"){const r=Op(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,l=e.content-e.viewport,u=o-r,d=t==="ltr"?[0,l]:[l*-1,0],f=By(n,d);return AR([0,l],[0,u])(f)}function AR(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function PR(n,e){return n>0&&n<e}var qV=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return(function s(){const o={left:n.scrollLeft,top:n.scrollTop},l=t.left!==o.left,u=t.top!==o.top;(l||u)&&e(),t=o,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function Mp(n,e){const t=en(n),r=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),S.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Ul(n,e){const t=en(e);Wt(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var KV=vR,QV=ER,YV=RR;function kR({className:n,children:e,...t}){return _.jsxs(KV,{"data-slot":"scroll-area",className:ot("relative",n),...t,children:[_.jsx(QV,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),_.jsx(XV,{}),_.jsx(YV,{})]})}function XV({className:n,orientation:e="vertical",...t}){return _.jsx(SR,{"data-slot":"scroll-area-scrollbar",orientation:e,className:ot("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:_.jsx(CR,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const JV=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],ZV=({routes:n,onRouteClick:e,filterGrade:t,onFilterChange:r,selectedRouteId:s})=>_.jsxs("div",{className:"h-full flex flex-col",children:[_.jsxs("div",{className:"p-4 border-b space-y-4 flex-shrink-0",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Ux,{className:"size-4 text-muted-foreground"}),_.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by grade"})]}),_.jsxs(Pf,{value:t||"all",onValueChange:o=>r(o==="all"?"":o),children:[_.jsx(Nf,{className:"w-full",children:_.jsx(kf,{placeholder:"All grades"})}),_.jsxs(Df,{children:[_.jsx(Fl,{value:"all",children:"All grades"}),JV.map(o=>_.jsx(Fl,{value:o,children:o},o))]})]}),t&&_.jsx(Pn,{variant:"outline",size:"sm",onClick:()=>r(""),className:"w-full",children:"Clear filter"})]}),_.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.length," route",n.length!==1?"s":""]})]}),_.jsxs(kR,{className:"flex-1",children:[_.jsx("div",{className:"divide-y divide-border",children:n.map(o=>_.jsx("button",{onClick:l=>{l.preventDefault(),e(o)},type:"button",className:`w-full text-left p-4 hover:bg-accent transition-colors ${s===o.id?"bg-accent border-l-4 border-l-primary":"border-l-4 border-l-transparent"}`,children:_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex items-start justify-between gap-2",children:[_.jsx("h3",{className:`font-medium line-clamp-1 ${s===o.id?"text-primary":""}`,children:o.name}),_.jsx(FD,{className:`size-4 flex-shrink-0 ${s===o.id?"text-primary":"text-muted-foreground"}`})]}),_.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[_.jsx(Hs,{variant:"secondary",className:"text-xs",children:o.grade}),_.jsx(Hs,{variant:"outline",className:"text-xs border-none",style:{backgroundColor:o.color.toLowerCase()==="multi-color"?"var(--color-muted)":o.color.toLowerCase()==="red"?"#ef4444":o.color.toLowerCase()==="blue"?"#3b82f6":o.color.toLowerCase()==="green"?"#22c55e":o.color.toLowerCase()==="yellow"?"#eab308":o.color.toLowerCase()==="purple"?"#a855f7":o.color.toLowerCase()==="orange"?"#f97316":"var(--color-muted)",color:o.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff"},children:o.color})]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(l,u)=>_.jsx(Mu,{className:`size-3 ${u<Math.round(o.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},u))}),_.jsx("span",{className:"text-xs text-muted-foreground",children:o.averageRating>0?o.averageRating.toFixed(1):""}),_.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",o.totalReviews,")"]})]}),_.jsxs("div",{className:"text-xs text-muted-foreground",children:["Set by ",o.setter]})]})},o.id))}),n.length===0&&_.jsx("div",{className:"p-8 text-center",children:_.jsx("p",{className:"text-sm text-muted-foreground",children:"No routes found matching your filter."})})]})]});var ej=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tj=ej.reduce((n,e)=>{const t=vp(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),nj="Separator",GT="horizontal",rj=["horizontal","vertical"],NR=S.forwardRef((n,e)=>{const{decorative:t,orientation:r=GT,...s}=n,o=sj(r)?r:GT,u=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return _.jsx(tj.div,{"data-orientation":o,...u,...s,ref:e})});NR.displayName=nj;function sj(n){return rj.includes(n)}var ij=NR;function oj({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return _.jsx(ij,{"data-slot":"separator-root",decorative:t,orientation:e,className:ot("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}function DR({className:n,...e}){return _.jsx("textarea",{"data-slot":"textarea",className:ot("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}var aj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lj=aj.reduce((n,e)=>{const t=vp(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),cj="Label",OR=S.forwardRef((n,e)=>_.jsx(lj.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));OR.displayName=cj;var uj=OR;function Hi({className:n,...e}){return _.jsx(uj,{"data-slot":"label",className:ot("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}const dj=({onSubmit:n,onCancel:e,currentUser:t})=>{const[r,s]=S.useState(0),[o,l]=S.useState(""),[u,d]=S.useState(0),f=v=>{v.preventDefault(),!(r===0||!o.trim())&&(n({rating:r,comment:o.trim()}),s(0),l(""))},m=()=>_.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(v,I)=>{const A=I+1,x=A<=(u||r);return _.jsx("button",{type:"button",className:"p-1 hover:scale-110 transition-transform",onClick:()=>s(A),onMouseEnter:()=>d(A),onMouseLeave:()=>d(0),children:_.jsx(Mu,{className:`size-6 transition-colors ${x?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-400"}`})},I)})}),y=r>0&&o.trim();return _.jsxs("form",{onSubmit:f,className:"space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("h3",{className:"font-medium",children:"Write a Review"}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reviewing as ",t.displayName||t.email||"Anonymous"]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Hi,{children:"Rating"}),m()]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Hi,{htmlFor:"comment",children:"Comment"}),_.jsx(DR,{id:"comment",placeholder:"Share your thoughts about this route...",value:o,onChange:v=>l(v.target.value),rows:4})]}),_.jsxs("div",{className:"flex gap-1 pt-2",children:[_.jsx(Pn,{type:"submit",disabled:!y,children:"Submit Review"}),_.jsx(Pn,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})},qT=({route:n,onBack:e,onAddReview:t,currentUser:r,showBackButton:s=!0})=>{const[o,l]=S.useState(!1),u=m=>{t(m),l(!1)},d=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),f=m=>Array.from({length:5},(y,v)=>_.jsx(Mu,{className:`size-4 ${v<m?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},v));return _.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 bg-white p-6 rounded-xl shadow",children:[s&&_.jsxs(Pn,{variant:"ghost",onClick:e,className:"gap-2",children:[_.jsx(Vx,{className:"size-4"}),"Back to Gallery"]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsx("div",{className:"space-y-6",children:_.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[_.jsx("div",{className:"aspect-[4/3] relative overflow-hidden rounded-lg",children:_.jsx(Of,{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("h1",{className:"text-3xl landscape-mobile:text-2xl xl:text-3xl font-medium",children:n.name}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(Hs,{variant:"secondary",className:"text-base px-3 py-1",children:n.grade}),_.jsx(Hs,{variant:"outline",style:{backgroundColor:n.color.toLowerCase()==="multi-color"?"var(--color-background)":n.color.toLowerCase()==="red"?"#ef4444":n.color.toLowerCase()==="blue"?"#3b82f6":n.color.toLowerCase()==="green"?"#22c55e":"var(--color-background)",color:n.color.toLowerCase()==="multi-color"?"var(--color-foreground)":"#ffffff",borderColor:"transparent"},children:n.color})]})]}),_.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_.jsx(Bx,{className:"size-4 text-muted-foreground"}),_.jsxs("span",{children:["Set by ",_.jsx("strong",{children:n.setter})]})]}),_.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_.jsx(jx,{className:"size-4 text-muted-foreground"}),_.jsxs("span",{children:["Set on ",d(n.dateSet)]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"flex items-center gap-1",children:f(Math.round(n.averageRating))}),_.jsx("span",{className:"font-medium",children:n.averageRating>0?n.averageRating.toFixed(1):""}),_.jsxs("span",{className:"text-muted-foreground",children:["(",n.totalReviews," review",n.totalReviews!==1?"s":"",")"]})]})]})]})]})}),_.jsx("div",{className:"landscape-mobile:max-h-[80vh] landscape-mobile:overflow-hidden landscape-mobile:flex landscape-mobile:flex-col",children:_.jsxs(Tf,{className:"landscape-mobile:flex landscape-mobile:flex-col landscape-mobile:h-full landscape-mobile:min-h-0",children:[_.jsx(sC,{className:"landscape-mobile:flex-shrink-0",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(zx,{className:"size-5"}),_.jsx("h2",{children:"Reviews"})]}),_.jsx(Pn,{onClick:()=>l(!0),size:"sm",className:"landscape-mobile:text-sm",children:"Write a Review"})]})}),_.jsxs(G_,{className:"space-y-4 landscape-mobile:flex-1 landscape-mobile:overflow-y-auto landscape-mobile:min-h-0",children:[o&&_.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:_.jsx(dj,{onSubmit:u,onCancel:()=>l(!1),currentUser:r})}),n.reviews.length>0?_.jsx("div",{className:"space-y-4",children:n.reviews.map((m,y)=>_.jsxs("div",{children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("div",{className:"flex items-start justify-between",children:_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"font-medium",children:m.author}),_.jsx("div",{className:"flex items-center gap-1",children:f(m.rating)})]}),_.jsx("p",{className:"text-sm text-muted-foreground",children:d(m.date)})]})}),_.jsx("p",{className:"text-sm leading-relaxed",children:m.comment})]}),y<n.reviews.length-1&&_.jsx(oj,{className:"mt-4"})]},m.id))}):_.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No reviews yet. Be the first to review this route!"})]})]})})]})]})};function KT({className:n,type:e,...t}){return _.jsx("input",{type:e,"data-slot":"input",className:ot("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}const hj=()=>{};var QT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e=function(n,e){if(!n)throw rc(e)},rc=function(n){return new Error("Firebase Database ("+MR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},fj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},lv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,m=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,I=f&63;d||(I=64,l||(v=64)),r.push(t[m],t[y],t[v],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(LR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||f==null||y==null)throw new pj;const v=o<<2|u>>4;if(r.push(v),f!==64){const I=u<<4&240|f>>2;if(r.push(I),y!==64){const A=f<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class pj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VR=function(n){const e=LR(n);return lv.encodeByteArray(e,!0)},Vf=function(n){return VR(n).replace(/\./g,"")},jf=function(n){try{return lv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(n){return jR(void 0,n)}function jR(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!gj(t)||(n[t]=jR(n[t],e[t]));return n}function gj(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=()=>yj().__FIREBASE_DEFAULTS__,vj=()=>{if(typeof process>"u"||typeof QT>"u")return;const n=QT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&jf(n[1]);return e&&JSON.parse(e)},Lp=()=>{try{return hj()||_j()||vj()||wj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},FR=n=>Lp()?.emulatorHosts?.[n],cv=n=>{const e=FR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},UR=()=>Lp()?.config,zR=n=>Lp()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vp(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Vf(JSON.stringify(t)),Vf(JSON.stringify(l)),""].join(".")}const Iu={};function Ej(){const n={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?n.emulator.push(e):n.prod.push(e);return n}function Sj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let YT=!1;function jp(n,e){if(typeof window>"u"||typeof document>"u"||!Ts(window.location.host)||Iu[n]===e||Iu[n]||YT)return;Iu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=Ej().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,I){v.setAttribute("width","24"),v.setAttribute("id",I),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{YT=!0,l()},v}function m(v,I){v.setAttribute("id",I),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=Sj(r),I=t("text"),A=document.getElementById(I)||document.createElement("span"),x=t("learnmore"),R=document.getElementById(x)||document.createElement("a"),j=t("preprendIcon"),V=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const z=v.element;u(z),m(R,x);const H=f();d(V,j),z.append(V,A,R,H),document.body.appendChild(z)}o?(A.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function Tj(){const n=Lp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ij(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xj(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cj(){const n=Tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Rj(){return MR.NODE_ADMIN===!0}function bj(){return!Tj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Aj(){try{return typeof indexedDB=="object"}catch{return!1}}function Pj(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="FirebaseError";class Is extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=kj,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rd.prototype.create)}}class rd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?Nj(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new Is(s,u,r)}}function Nj(n,e){return n.replace(Dj,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Dj=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(n){return JSON.parse(n)}function cn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=Fu(jf(o[0])||""),t=Fu(jf(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},Oj=function(n){const e=$R(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Mj=function(n){const e=$R(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function zl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Zy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ff(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function ni(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(XT(o)&&XT(l)){if(!ni(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function XT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function mu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)r[y]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let y=0;y<16;y++)r[y]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let y=16;y<80;y++){const v=r[y-3]^r[y-8]^r[y-14]^r[y-16];r[y]=(v<<1|v>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],d=this.chain_[4],f,m;for(let y=0;y<80;y++){y<40?y<20?(f=u^o&(l^u),m=1518500249):(f=o^l^u,m=1859775393):y<60?(f=o&l|u&(o|l),m=2400959708):(f=o^l^u,m=3395469782);const v=(s<<5|s>>>27)+f+d+m+r[y]&4294967295;d=u,u=l,l=(o<<30|o>>>2)&4294967295,o=s,s=v}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}else for(;s<t;)if(o[l]=e[s],++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function Vj(n,e){const t=new jj(n,e);return t.subscribe.bind(t)}class jj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Fj(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=hy),s.error===void 0&&(s.error=hy),s.complete===void 0&&(s.complete=hy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fj(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function hy(){}function Uj(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,_e(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(o<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Fp=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(n){return n&&n._delegate?n._delegate:n}class ri{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wj(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$j(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $j(n){return n===ea?void 0:n}function Wj(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Bj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const Gj={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},qj=Ke.INFO,Kj={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},Qj=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Kj[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Up{constructor(e){this.name=e,this._logLevel=qj,this._logHandler=Qj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const Yj=(n,e)=>e.some(t=>n instanceof t);let JT,ZT;function Xj(){return JT||(JT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jj(){return ZT||(ZT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WR=new WeakMap,e_=new WeakMap,HR=new WeakMap,fy=new WeakMap,fv=new WeakMap;function Zj(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Ji(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&WR.set(t,n)}).catch(()=>{}),fv.set(e,n),e}function eF(n){if(e_.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});e_.set(n,e)}let t_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return e_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||HR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ji(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tF(n){t_=n(t_)}function nF(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(py(this),e,...t);return HR.set(r,e.sort?e.sort():[e]),Ji(r)}:Jj().includes(n)?function(...e){return n.apply(py(this),e),Ji(WR.get(this))}:function(...e){return Ji(n.apply(py(this),e))}}function rF(n){return typeof n=="function"?nF(n):(n instanceof IDBTransaction&&eF(n),Yj(n,Xj())?new Proxy(n,t_):n)}function Ji(n){if(n instanceof IDBRequest)return Zj(n);if(fy.has(n))return fy.get(n);const e=rF(n);return e!==n&&(fy.set(n,e),fv.set(e,n)),e}const py=n=>fv.get(n);function sF(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=Ji(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Ji(l.result),d.oldVersion,d.newVersion,Ji(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const iF=["get","getKey","getAll","getAllKeys","count"],oF=["put","add","delete","clear"],my=new Map;function e0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(my.get(e))return my.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=oF.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||iF.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return my.set(e,o),o}tF(n=>({...n,get:(e,t,r)=>e0(e,t)||n.get(e,t,r),has:(e,t)=>!!e0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lF(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function lF(n){return n.getComponent()?.type==="VERSION"}const n_="@firebase/app",t0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new Up("@firebase/app"),cF="@firebase/app-compat",uF="@firebase/analytics-compat",dF="@firebase/analytics",hF="@firebase/app-check-compat",fF="@firebase/app-check",pF="@firebase/auth",mF="@firebase/auth-compat",gF="@firebase/database",yF="@firebase/data-connect",_F="@firebase/database-compat",vF="@firebase/functions",wF="@firebase/functions-compat",EF="@firebase/installations",SF="@firebase/installations-compat",TF="@firebase/messaging",IF="@firebase/messaging-compat",xF="@firebase/performance",CF="@firebase/performance-compat",RF="@firebase/remote-config",bF="@firebase/remote-config-compat",AF="@firebase/storage",PF="@firebase/storage-compat",kF="@firebase/firestore",NF="@firebase/ai",DF="@firebase/firestore-compat",OF="firebase",MF="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="[DEFAULT]",LF={[n_]:"fire-core",[cF]:"fire-core-compat",[dF]:"fire-analytics",[uF]:"fire-analytics-compat",[fF]:"fire-app-check",[hF]:"fire-app-check-compat",[pF]:"fire-auth",[mF]:"fire-auth-compat",[gF]:"fire-rtdb",[yF]:"fire-data-connect",[_F]:"fire-rtdb-compat",[vF]:"fire-fn",[wF]:"fire-fn-compat",[EF]:"fire-iid",[SF]:"fire-iid-compat",[TF]:"fire-fcm",[IF]:"fire-fcm-compat",[xF]:"fire-perf",[CF]:"fire-perf-compat",[RF]:"fire-rc",[bF]:"fire-rc-compat",[AF]:"fire-gcs",[PF]:"fire-gcs-compat",[kF]:"fire-fst",[DF]:"fire-fst-compat",[NF]:"fire-vertex","fire-js":"fire-js",[OF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map,VF=new Map,s_=new Map;function n0(n,e){try{n.container.addComponent(e)}catch(t){si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ao(n){const e=n.name;if(s_.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;s_.set(e,n);for(const t of Uf.values())n0(t,n);for(const t of VF.values())n0(t,n);return!0}function sd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new rd("app","Firebase",jF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=MF;function GR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:r_,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Zi.create("bad-app-name",{appName:String(s)});if(t||(t=UR()),!t)throw Zi.create("no-options");const o=Uf.get(s);if(o){if(ni(t,o.options)&&ni(r,o.config))return o;throw Zi.create("duplicate-app",{appName:s})}const l=new Hj(s);for(const d of s_.values())l.addComponent(d);const u=new FF(t,r,l);return Uf.set(s,u),u}function zp(n=r_){const e=Uf.get(n);if(!e&&n===r_&&UR())return GR();if(!e)throw Zi.create("no-app",{appName:n});return e}function pr(n,e,t){let r=LF[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(l.join(" "));return}ao(new ri(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF="firebase-heartbeat-database",zF=1,Uu="firebase-heartbeat-store";let gy=null;function qR(){return gy||(gy=sF(UF,zF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zi.create("idb-open",{originalErrorMessage:n.message})})),gy}async function BF(n){try{const t=(await qR()).transaction(Uu),r=await t.objectStore(Uu).get(KR(n));return await t.done,r}catch(e){if(e instanceof Is)si.warn(e.message);else{const t=Zi.create("idb-get",{originalErrorMessage:e?.message});si.warn(t.message)}}}async function r0(n,e){try{const r=(await qR()).transaction(Uu,"readwrite");await r.objectStore(Uu).put(e,KR(n)),await r.done}catch(t){if(t instanceof Is)si.warn(t.message);else{const r=Zi.create("idb-set",{originalErrorMessage:t?.message});si.warn(r.message)}}}function KR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=1024,WF=30;class HF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=s0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>WF){const s=KF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=s0(),{heartbeatsToSend:t,unsentEntries:r}=GF(this._heartbeatsCache.heartbeats),s=Vf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return si.warn(e),""}}}function s0(){return new Date().toISOString().substring(0,10)}function GF(n,e=$F){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),i0(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),i0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class qF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Aj()?Pj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await BF(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return r0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return r0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function i0(n){return Vf(JSON.stringify({version:2,heartbeats:n})).length}function KF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(n){ao(new ri("platform-logger",e=>new aF(e),"PRIVATE")),ao(new ri("heartbeat",e=>new HF(e),"PRIVATE")),pr(n_,t0,n),pr(n_,t0,"esm2020"),pr("fire-js","")}QF("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="firebasestorage.googleapis.com",YR="storageBucket",YF=120*1e3,XF=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Is{constructor(e,t,r=0){super(yy(e),`Firebase Storage: ${t} (${yy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function yy(n){return"storage/"+n}function pv(){const n="An unknown error occurred, please check the error payload for server response.";return new Ot(Dt.UNKNOWN,n)}function JF(n){return new Ot(Dt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function ZF(n){return new Ot(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e4(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Dt.UNAUTHENTICATED,n)}function t4(){return new Ot(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n4(n){return new Ot(Dt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function r4(){return new Ot(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s4(){return new Ot(Dt.CANCELED,"User canceled the upload/download.")}function i4(n){return new Ot(Dt.INVALID_URL,"Invalid URL '"+n+"'.")}function o4(n){return new Ot(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function a4(){return new Ot(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YR+"' property when initializing the app?")}function l4(){return new Ot(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function c4(){return new Ot(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function u4(n){return new Ot(Dt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function i_(n){return new Ot(Dt.INVALID_ARGUMENT,n)}function XR(){return new Ot(Dt.APP_DELETED,"The Firebase app was deleted.")}function d4(n){return new Ot(Dt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xu(n,e){return new Ot(Dt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function lu(n){throw new Ot(Dt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=er.makeFromUrl(e,t)}catch{return new er(e,"")}if(r.path==="")return r;throw o4(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const m="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",I=new RegExp(`^https?://${y}/${m}/b/${s}/o${v}`,"i"),A={bucket:1,path:3},x=t===QR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",j=new RegExp(`^https?://${x}/${s}/${R}`,"i"),z=[{regex:u,indices:d,postModify:o},{regex:I,indices:A,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<z.length;H++){const J=z[H],Z=J.regex.exec(e);if(Z){const P=Z[J.indices.bucket];let b=Z[J.indices.path];b||(b=""),r=new er(P,b),J.postModify(r);break}}if(r==null)throw i4(e);return r}}class h4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n,e,t){let r=1,s=null,o=null,l=!1,u=0;function d(){return u===2}let f=!1;function m(...R){f||(f=!0,e.apply(null,R))}function y(R){s=setTimeout(()=>{s=null,n(I,d())},R)}function v(){o&&clearTimeout(o)}function I(R,...j){if(f){v();return}if(R){v(),m.call(null,R,...j);return}if(d()||l){v(),m.call(null,R,...j);return}r<64&&(r*=2);let z;u===1?(u=2,z=0):z=(r+Math.random())*1e3,y(z)}let A=!1;function x(R){A||(A=!0,v(),!f&&(s!==null?(R||(u=2),clearTimeout(s),y(0)):R||(u=1)))}return y(0),o=setTimeout(()=>{l=!0,x(!0)},t),x}function p4(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n){return n!==void 0}function g4(n){return typeof n=="object"&&!Array.isArray(n)}function mv(n){return typeof n=="string"||n instanceof String}function o0(n){return gv()&&n instanceof Blob}function gv(){return typeof Blob<"u"}function a0(n,e,t,r){if(r<e)throw i_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw i_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function JR(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var oa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(oa||(oa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,t,r,s,o,l,u,d,f,m,y,v=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,x)=>{this.resolve_=A,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===oa.NO_ERROR,d=o.getStatus();if(!u||y4(d,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===oa.ABORT;r(!1,new Gh(!1,null,m));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new Gh(f,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());m4(d)?o(d):o()}catch(d){l(d)}else if(u!==null){const d=pv();d.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,d)):l(d)}else if(s.canceled){const d=this.appDelete_?XR():s4();l(d)}else{const d=r4();l(d)}};this.canceled_?t(!1,new Gh(!1,null,!0)):this.backoffId_=f4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&p4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function v4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function w4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function S4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function T4(n,e,t,r,s,o,l=!0,u=!1){const d=JR(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return E4(m,e),v4(m,t),w4(m,o),S4(m,r),new _4(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function x4(...n){const e=I4();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(gv())return new Blob(n);throw new Ot(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(n){if(typeof atob>"u")throw u4("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _y{constructor(e,t){this.data=e,this.contentType=t||null}}function b4(n,e){switch(n){case cs.RAW:return new _y(ZR(e));case cs.BASE64:case cs.BASE64URL:return new _y(eb(n,e));case cs.DATA_URL:return new _y(P4(e),k4(e))}throw pv()}function ZR(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function A4(n){let e;try{e=decodeURIComponent(n)}catch{throw xu(cs.DATA_URL,"Malformed data URL.")}return ZR(e)}function eb(n,e){switch(n){case cs.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw xu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case cs.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw xu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=R4(e)}catch(s){throw s.message.includes("polyfill")?s:xu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class tb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw xu(cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=N4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function P4(n){const e=new tb(n);return e.base64?eb(cs.BASE64,e.rest):A4(e.rest)}function k4(n){return new tb(n).contentType}function N4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){let r=0,s="";o0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(o0(this.data_)){const r=this.data_,s=C4(r,e,t);return s===null?null:new Gi(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Gi(r,!0)}}static getBlob(...e){if(gv()){const t=e.map(r=>r instanceof Gi?r.data_:r);return new Gi(x4.apply(null,t))}else{const t=e.map(l=>mv(l)?b4(cs.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new Gi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n){let e;try{e=JSON.parse(n)}catch{return null}return g4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function O4(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function rb(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(n,e){return e}class An{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||M4}}let qh=null;function L4(n){return!mv(n)||n.length<2?n:rb(n)}function sb(){if(qh)return qh;const n=[];n.push(new An("bucket")),n.push(new An("generation")),n.push(new An("metageneration")),n.push(new An("name","fullPath",!0));function e(o,l){return L4(l)}const t=new An("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new An("size");return s.xform=r,n.push(s),n.push(new An("timeCreated")),n.push(new An("updated")),n.push(new An("md5Hash",null,!0)),n.push(new An("cacheControl",null,!0)),n.push(new An("contentDisposition",null,!0)),n.push(new An("contentEncoding",null,!0)),n.push(new An("contentLanguage",null,!0)),n.push(new An("contentType",null,!0)),n.push(new An("metadata","customMetadata",!0)),qh=n,qh}function V4(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new er(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function j4(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return V4(r,n),r}function ib(n,e,t){const r=nb(e);return r===null?null:j4(n,r,t)}function F4(n,e,t,r){const s=nb(e);if(s===null||!mv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const m=n.bucket,y=n.fullPath,v="/b/"+l(m)+"/o/"+l(y),I=yv(v,t,r),A=JR({alt:"media",token:f});return I+A})[0]}function U4(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class ob{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(n){if(!n)throw pv()}function z4(n,e){function t(r,s){const o=ib(n,s,e);return ab(o!==null),o}return t}function B4(n,e){function t(r,s){const o=ib(n,s,e);return ab(o!==null),F4(o,s,n.host,n._protocol)}return t}function lb(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=t4():s=e4():t.getStatus()===402?s=ZF(n.bucket):t.getStatus()===403?s=n4(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function $4(n){const e=lb(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=JF(n.path)),o.serverResponse=s.serverResponse,o}return t}function W4(n,e,t){const r=e.fullServerUrl(),s=yv(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,u=new ob(s,o,B4(n,t),l);return u.errorHandler=$4(e),u}function H4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function G4(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=H4(null,e)),r}function q4(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let z="";for(let H=0;H<2;H++)z=z+Math.random().toString().slice(2);return z}const d=u();l["Content-Type"]="multipart/related; boundary="+d;const f=G4(e,r,s),m=U4(f,t),y="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+d+"--",I=Gi.getBlob(y,r,v);if(I===null)throw l4();const A={name:f.fullPath},x=yv(o,n.host,n._protocol),R="POST",j=n.maxUploadRetryTime,V=new ob(x,R,z4(n,t),j);return V.urlParams=A,V.headers=l,V.body=I.uploadData(),V.errorHandler=lb(e),V}class K4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,o){if(this.sent_)throw lu("cannot .send() more than once");if(Ts(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Q4 extends K4{initXhr(){this.xhr_.responseType="text"}}function cb(){return new Q4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t){this._service=e,t instanceof er?this._location=t:this._location=er.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ha(e,t)}get root(){const e=new er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rb(this._location.path)}get storage(){return this._service}get parent(){const e=D4(this._location.path);if(e===null)return null;const t=new er(this._location.bucket,e);return new ha(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw d4(e)}}function Y4(n,e,t){n._throwIfRoot("uploadBytes");const r=q4(n.storage,n._location,sb(),new Gi(e,!0),t);return n.storage.makeRequestWithTokens(r,cb).then(s=>({metadata:s,ref:n}))}function X4(n){n._throwIfRoot("getDownloadURL");const e=W4(n.storage,n._location,sb());return n.storage.makeRequestWithTokens(e,cb).then(t=>{if(t===null)throw c4();return t})}function J4(n,e){const t=O4(n._location.path,e),r=new er(n._location.bucket,t);return new ha(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(n){return/^[A-Za-z]+:\/\//.test(n)}function eU(n,e){return new ha(n,e)}function ub(n,e){if(n instanceof _v){const t=n;if(t._bucket==null)throw a4();const r=new ha(t,t._bucket);return e!=null?ub(r,e):r}else return e!==void 0?J4(n,e):n}function tU(n,e){if(e&&Z4(e)){if(n instanceof _v)return eU(n,e);throw i_("To use ref(service, url), the first argument must be a Storage instance.")}else return ub(n,e)}function l0(n,e){const t=e?.[YR];return t==null?null:er.makeFromBucketSpec(t,n)}function nU(n,e,t,r={}){n.host=`${e}:${t}`;const s=Ts(e);s&&(Vp(`https://${n.host}/b`),jp("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:dv(o,n.app.options.projectId))}class _v{constructor(e,t,r,s,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=QR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YF,this._maxUploadRetryTime=XF,this._requests=new Set,s!=null?this._bucket=er.makeFromBucketSpec(s,this._host):this._bucket=l0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=er.makeFromBucketSpec(this._url,e):this._bucket=l0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ha(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new h4(XR());{const l=T4(e,this._appId,r,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const c0="@firebase/storage",u0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="storage";function rU(n,e,t){return n=mt(n),Y4(n,e,t)}function sU(n){return n=mt(n),X4(n)}function iU(n,e){return n=mt(n),tU(n,e)}function oU(n=zp(),e){n=mt(n);const r=sd(n,db).getImmediate({identifier:e}),s=cv("storage");return s&&aU(r,...s),r}function aU(n,e,t,r={}){nU(n,e,t,r)}function lU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new _v(t,r,s,e,vo)}function cU(){ao(new ri(db,lU,"PUBLIC").setMultipleInstances(!0)),pr(c0,u0,""),pr(c0,u0,"esm2020")}cU();var uU="firebase",dU="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(uU,dU,"app");var d0={};const h0="@firebase/database",f0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hb="";function hU(n){hb=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Fu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ui(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fU(e)}}catch{}return new pU},ra=fb("localStorage"),mU=fb("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new Up("@firebase/database"),gU=(function(){let n=1;return function(){return n++}})(),pb=function(n){const e=zj(n),t=new Lj;t.update(e);const r=t.digest();return lv.encodeByteArray(r)},id=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=id.apply(null,r):typeof r=="object"?e+=cn(r):e+=r,e+=" "}return e};let Cu=null,p0=!0;const yU=function(n,e){_e(!0,"Can't turn on custom loggers persistently."),Pl.logLevel=Ke.VERBOSE,Cu=Pl.log.bind(Pl)},vn=function(...n){if(p0===!0&&(p0=!1,Cu===null&&mU.get("logging_enabled")===!0&&yU()),Cu){const e=id.apply(null,n);Cu(e)}},od=function(n){return function(...e){vn(n,...e)}},o_=function(...n){const e="FIREBASE INTERNAL ERROR: "+id(...n);Pl.error(e)},ii=function(...n){const e=`FIREBASE FATAL ERROR: ${id(...n)}`;throw Pl.error(e),new Error(e)},rr=function(...n){const e="FIREBASE WARNING: "+id(...n);Pl.warn(e)},_U=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&rr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mb=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vU=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Bl="[MIN_NAME]",fa="[MAX_NAME]",ic=function(n,e){if(n===e)return 0;if(n===Bl||e===fa)return-1;if(e===Bl||n===fa)return 1;{const t=m0(n),r=m0(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},wU=function(n,e){return n===e?0:n<e?-1:1},cu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+cn(e))},vv=function(n){if(typeof n!="object"||n===null)return cn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=cn(e[r]),t+=":",t+=vv(n[e[r]]);return t+="}",t},gb=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function gr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const yb=function(n){_e(!mb(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,l,u,d;n===0?(o=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=u+r,l=Math.round(n*Math.pow(2,t-u)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const f=[];for(d=t;d;d-=1)f.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(s?1:0),f.reverse();const m=f.join("");let y="";for(d=0;d<64;d+=8){let v=parseInt(m.substr(d,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},EU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},SU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},TU=new RegExp("^-?(0*)\\d{1,10}$"),IU=-2147483648,xU=2147483647,m0=function(n){if(TU.test(n)){const e=Number(n);if(e>=IU&&e<=xU)return e}return null},ad=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw rr("Exception was thrown by user callback.",t),e},Math.floor(0))}},CU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ru=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,kn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){rr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rr(e)}}class cf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}cf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="5",_b="v",vb="s",wb="r",Eb="f",Sb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Tb="ls",Ib="p",a_="ac",xb="websocket",Cb="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t,r,s,o=!1,l="",u=!1,d=!1,f=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=d,this.emulatorOptions=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ra.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ra.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function AU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function bb(n,e,t){_e(typeof e=="string","typeof type must == string"),_e(typeof t=="object","typeof params must == object");let r;if(e===xb)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Cb)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);AU(n)&&(t.ns=n.namespace);const s=[];return gr(t,(o,l)=>{s.push(o+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.counters_={}}incrementCounter(e,t=1){ui(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return mj(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy={},wy={};function Ev(n){const e=n.toString();return vy[e]||(vy[e]=new PU),vy[e]}function kU(n,e){const t=n.toString();return wy[t]||(wy[t]=e()),wy[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ad(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="start",DU="close",OU="pLPCommand",MU="pRTLPCB",Ab="id",Pb="pw",kb="ser",LU="cb",VU="seg",jU="ts",FU="d",UU="dframe",Nb=1870,Db=30,zU=Nb-Db,BU=25e3,$U=3e4;class xl{constructor(e,t,r,s,o,l,u){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=od(e),this.stats_=Ev(t),this.urlFn=d=>(this.appCheckToken&&(d[a_]=this.appCheckToken),bb(t,Cb,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new NU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($U)),vU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sv((...o)=>{const[l,u,d,f,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===g0)this.id=u,this.password=d;else if(l===DU)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[g0]="t",r[kb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[LU]=this.scriptTagHolder.uniqueCallbackIdentifier),r[_b]=wv,this.transportSessionId&&(r[vb]=this.transportSessionId),this.lastSessionId&&(r[Tb]=this.lastSessionId),this.applicationId&&(r[Ib]=this.applicationId),this.appCheckToken&&(r[a_]=this.appCheckToken),typeof location<"u"&&location.hostname&&Sb.test(location.hostname)&&(r[wb]=Eb);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xl.forceAllow_=!0}static forceDisallow(){xl.forceDisallow_=!0}static isAvailable(){return xl.forceAllow_?!0:!xl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!EU()&&!SU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=cn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=VR(t),s=gb(r,zU);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[UU]="t",r[Ab]=e,r[Pb]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=cn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Sv{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gU(),window[OU+this.uniqueCallbackIdentifier]=e,window[MU+this.uniqueCallbackIdentifier]=t,this.myIFrame=Sv.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){vn("frame writing exception"),u.stack&&vn(u.stack),vn(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||vn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Ab]=this.myID,e[Pb]=this.myPW,e[kb]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Db+r.length<=Nb;){const l=this.pendingSegs.shift();r=r+"&"+VU+s+"="+l.seg+"&"+jU+s+"="+l.ts+"&"+FU+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(BU)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{vn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=16384,HU=45e3;let zf=null;typeof MozWebSocket<"u"?zf=MozWebSocket:typeof WebSocket<"u"&&(zf=WebSocket);class Pr{constructor(e,t,r,s,o,l,u){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=od(this.connId),this.stats_=Ev(t),this.connURL=Pr.connectionURL_(t,l,u,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const l={};return l[_b]=wv,typeof location<"u"&&location.hostname&&Sb.test(location.hostname)&&(l[wb]=Eb),t&&(l[vb]=t),r&&(l[Tb]=r),s&&(l[a_]=s),o&&(l[Ib]=o),bb(e,xb,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ra.set("previous_websocket_failure",!0);try{let r;Rj(),this.mySock=new zf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Pr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&zf!==null&&!Pr.forceDisallow_}static previouslyFailed(){return ra.isInMemoryStorage||ra.get("previous_websocket_failure")===!0}markConnectionHealthy(){ra.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Fu(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(_e(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=cn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=gb(t,WU);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(HU))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pr.responsesRequiredToBeHealthy=2;Pr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{static get ALL_TRANSPORTS(){return[xl,Pr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Pr&&Pr.isAvailable();let r=t&&!Pr.previouslyFailed();if(e.webSocketOnly&&(t||rr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Pr];else{const s=this.transports_=[];for(const o of zu.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);zu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=6e4,qU=5e3,KU=10*1024,QU=100*1024,Ey="t",y0="d",YU="s",_0="r",XU="e",v0="o",w0="a",E0="n",S0="p",JU="h";class ZU{constructor(e,t,r,s,o,l,u,d,f,m){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=d,this.onKill_=f,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=od("c:"+this.id+":"),this.transportManager_=new zu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ru(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>QU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>KU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ey in e){const t=e[Ey];t===w0?this.upgradeIfSecondaryHealthy_():t===_0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===v0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=cu("t",e),r=cu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:S0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:w0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:E0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=cu("t",e),r=cu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=cu(Ey,e);if(y0 in e){const r=e[y0];if(t===JU){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===E0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===YU?this.onConnectionShutdown_(r):t===_0?this.onReset_(r):t===XU?o_("Server Error: "+r):t===v0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):o_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),wv!==r&&rr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ru(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(GU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ru(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:S0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ra.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.allowedEvents_=e,this.listeners_={},_e(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){_e(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends Mb{static getInstance(){return new Bf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!hv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return _e(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=32,I0=768;class St{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ut(){return new St("")}function et(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function lo(n){return n.pieces_.length-n.pieceNum_}function wt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new St(n.pieces_,e)}function Lb(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function e3(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Vb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function jb(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new St(e,0)}function tn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof St)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new St(t,0)}function Je(n){return n.pieceNum_>=n.pieces_.length}function fr(n,e){const t=et(n),r=et(e);if(t===null)return e;if(t===r)return fr(wt(n),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Fb(n,e){if(lo(n)!==lo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function kr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(lo(n)>lo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class t3{constructor(e,t){this.errorPrefix_=t,this.parts_=Vb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Fp(this.parts_[r]);Ub(this)}}function n3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Fp(e),Ub(n)}function r3(n){const e=n.parts_.pop();n.byteLength_-=Fp(e),n.parts_.length>0&&(n.byteLength_-=1)}function Ub(n){if(n.byteLength_>I0)throw new Error(n.errorPrefix_+"has a key path longer than "+I0+" bytes ("+n.byteLength_+").");if(n.parts_.length>T0)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+T0+") or object contains a cycle "+ta(n))}function ta(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends Mb{static getInstance(){return new Tv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return _e(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=1e3,s3=300*1e3,x0=30*1e3,i3=1.3,o3=3e4,a3="server_kill",C0=3;class Js extends Ob{constructor(e,t,r,s,o,l,u,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=d,this.id=Js.nextPersistentConnectionId_++,this.log_=od("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=uu,this.maxReconnectDelay_=s3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Bf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(cn(o)),_e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new uv,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?t.resolve(u):t.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_e(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const d=u.d,f=u.s;Js.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(f,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ui(e,"w")){const r=zl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();rr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Mj(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=x0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=Oj(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,l=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";s&&(o.q=r,o.t=s),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+cn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):o_("Unrecognized action received from server: "+cn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){_e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=uu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=uu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>o3&&(this.reconnectDelay_=uu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*i3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Js.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const d=function(){u?u.close():(l=!0,r())},f=function(y){_e(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(y)};this.realtime_={close:d,sendRequest:f};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);l?vn("getToken() completed but was canceled"):(vn("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,u=new ZU(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,I=>{rr(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(a3)},o))}catch(y){this.log_("Failed to get token: "+y),l||(this.repoInfo_.nodeAdmin&&rr(y),d())}}}interrupt(e){vn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){vn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Zy(this.interruptReasons_)&&(this.reconnectDelay_=uu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>vv(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new St(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){vn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=C0&&(this.reconnectDelay_=x0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){vn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=C0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+hb.replace(/\./g,"-")]=1,hv()?e["framework.cordova"]=1:BR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Bf.getInstance().currentlyOnline();return Zy(this.interruptReasons_)&&e}}Js.nextPersistentConnectionId_=0;Js.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new tt(Bl,e),s=new tt(Bl,t);return this.compare(r,s)!==0}minPost(){return tt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh;class zb extends Bp{static get __EMPTY_NODE(){return Kh}static set __EMPTY_NODE(e){Kh=e}compare(e,t){return ic(e.name,t.name)}isDefinedOn(e){throw rc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tt.MIN}maxPost(){return new tt(fa,Kh)}makePost(e,t){return _e(typeof e=="string","KeyIndex indexValue must always be a string."),new tt(e,Kh)}toString(){return".key"}}const kl=new zb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=class{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Xn=class gu{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??gu.RED,this.left=s??us.EMPTY_NODE,this.right=o??us.EMPTY_NODE}copy(e,t,r,s,o){return new gu(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return us.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return us.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Xn.RED=!0;Xn.BLACK=!1;class l3{copy(e,t,r,s,o){return this}insert(e,t,r){return new Xn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let us=class uf{constructor(e,t=uf.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new uf(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Xn.BLACK,null,null))}remove(e){return new uf(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Qh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Qh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Qh(this.root_,null,this.comparator_,!0,e)}};us.EMPTY_NODE=new l3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(n,e){return ic(n.name,e.name)}function Iv(n,e){return ic(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l_;function u3(n){l_=n}const Bb=function(n){return typeof n=="number"?"number:"+yb(n):"string:"+n},$b=function(n){if(n.isLeafNode()){const e=n.val();_e(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ui(e,".sv"),"Priority must be a string or number.")}else _e(n===l_||n.isEmpty(),"priority of unexpected type.");_e(n===l_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R0;class Jt{static set __childrenNodeConstructor(e){R0=e}static get __childrenNodeConstructor(){return R0}constructor(e,t=Jt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,_e(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$b(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Jt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Jt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Je(e)?this:et(e)===".priority"?this.priorityNode_:Jt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Jt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=et(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(_e(r!==".priority"||lo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Jt.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Bb(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=yb(this.value_):e+=this.value_,this.lazyHash_=pb(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Jt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Jt.__childrenNodeConstructor?-1:(_e(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=Jt.VALUE_TYPE_ORDER.indexOf(t),o=Jt.VALUE_TYPE_ORDER.indexOf(r);return _e(s>=0,"Unknown leaf type: "+t),_e(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Jt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wb,Hb;function d3(n){Wb=n}function h3(n){Hb=n}class f3 extends Bp{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?ic(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tt.MIN}maxPost(){return new tt(fa,new Jt("[PRIORITY-POST]",Hb))}makePost(e,t){const r=Wb(e);return new tt(t,new Jt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Sn=new f3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=Math.log(2);class m3{constructor(e){const t=o=>parseInt(Math.log(o)/p3,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $f=function(n,e,t,r){n.sort(e);const s=function(d,f){const m=f-d;let y,v;if(m===0)return null;if(m===1)return y=n[d],v=t?t(y):y,new Xn(v,y.node,Xn.BLACK,null,null);{const I=parseInt(m/2,10)+d,A=s(d,I),x=s(I+1,f);return y=n[I],v=t?t(y):y,new Xn(v,y.node,Xn.BLACK,A,x)}},o=function(d){let f=null,m=null,y=n.length;const v=function(A,x){const R=y-A,j=y;y-=A;const V=s(R+1,j),z=n[R],H=t?t(z):z;I(new Xn(H,z.node,x,null,V))},I=function(A){f?(f.left=A,f=A):(m=A,f=A)};for(let A=0;A<d.count;++A){const x=d.nextBitIsOne(),R=Math.pow(2,d.count-(A+1));x?v(R,Xn.BLACK):(v(R,Xn.BLACK),v(R,Xn.RED))}return m},l=new m3(n.length),u=o(l);return new us(r||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sy;const _l={};class Ks{static get Default(){return _e(_l&&Sn,"ChildrenNode.ts has not been loaded"),Sy=Sy||new Ks({".priority":_l},{".priority":Sn}),Sy}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=zl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof us?t:null}hasIndex(e){return ui(this.indexSet_,e.toString())}addIndex(e,t){_e(e!==kl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(tt.Wrap);let l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let u;s?u=$f(r,e.getCompare()):u=_l;const d=e.toString(),f={...this.indexSet_};f[d]=e;const m={...this.indexes_};return m[d]=u,new Ks(m,f)}addToIndexes(e,t){const r=Ff(this.indexes_,(s,o)=>{const l=zl(this.indexSet_,o);if(_e(l,"Missing index implementation for "+o),s===_l)if(l.isDefinedOn(e.node)){const u=[],d=t.getIterator(tt.Wrap);let f=d.getNext();for(;f;)f.name!==e.name&&u.push(f),f=d.getNext();return u.push(e),$f(u,l.getCompare())}else return _l;else{const u=t.get(e.name);let d=s;return u&&(d=d.remove(new tt(e.name,u))),d.insert(e,e.node)}});return new Ks(r,this.indexSet_)}removeFromIndexes(e,t){const r=Ff(this.indexes_,s=>{if(s===_l)return s;{const o=t.get(e.name);return o?s.remove(new tt(e.name,o)):s}});return new Ks(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du;class at{static get EMPTY_NODE(){return du||(du=new at(new us(Iv),null,Ks.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&$b(this.priorityNode_),this.children_.isEmpty()&&_e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||du}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?du:t}}getChild(e){const t=et(e);return t===null?this:this.getImmediateChild(t).getChild(wt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(_e(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new tt(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?du:this.priorityNode_;return new at(s,l,o)}}updateChild(e,t){const r=et(e);if(r===null)return t;{_e(et(e)!==".priority"||lo(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(wt(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(Sn,(l,u)=>{t[l]=u.val(e),r++,o&&at.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!e&&o&&s<2*r){const l=[];for(const u in t)l[u]=t[u];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Bb(this.getPriority().val())+":"),this.forEachChild(Sn,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":pb(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new tt(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new tt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new tt(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,tt.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,tt.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ld?-1:0}withIndex(e){if(e===kl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===kl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Sn),s=t.getIterator(Sn);let o=r.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=s.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===kl?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class g3 extends at{constructor(){super(new us(Iv),at.EMPTY_NODE,Ks.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const ld=new g3;Object.defineProperties(tt,{MIN:{value:new tt(Bl,at.EMPTY_NODE)},MAX:{value:new tt(fa,ld)}});zb.__EMPTY_NODE=at.EMPTY_NODE;Jt.__childrenNodeConstructor=at;u3(ld);h3(ld);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=!0;function wn(n,e=null){if(n===null)return at.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),_e(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Jt(t,wn(e))}if(!(n instanceof Array)&&y3){const t=[];let r=!1;if(gr(n,(l,u)=>{if(l.substring(0,1)!=="."){const d=wn(u);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new tt(l,d)))}}),t.length===0)return at.EMPTY_NODE;const o=$f(t,c3,l=>l.name,Iv);if(r){const l=$f(t,Sn.getCompare());return new at(o,wn(e),new Ks({".priority":l},{".priority":Sn}))}else return new at(o,wn(e),Ks.Default)}else{let t=at.EMPTY_NODE;return gr(n,(r,s)=>{if(ui(n,r)&&r.substring(0,1)!=="."){const o=wn(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(wn(e))}}d3(wn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3 extends Bp{constructor(e){super(),this.indexPath_=e,_e(!Je(e)&&et(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?ic(e.name,t.name):o}makePost(e,t){const r=wn(e),s=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new tt(t,s)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,ld);return new tt(fa,e)}toString(){return Vb(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3 extends Bp{compare(e,t){const r=e.node.compareTo(t.node);return r===0?ic(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tt.MIN}maxPost(){return tt.MAX}makePost(e,t){const r=wn(e);return new tt(t,r)}toString(){return".value"}}const w3=new v3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(n){return{type:"value",snapshotNode:n}}function S3(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function T3(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function b0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function I3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bl}hasEnd(){return this.endSet_}getIndexEndValue(){return _e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sn}copy(){const e=new xv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function A0(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Sn?t="$priority":n.index_===w3?t="$value":n.index_===kl?t="$key":(_e(n.index_ instanceof _3,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=cn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=cn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+cn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=cn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+cn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function P0(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Sn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends Ob{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(_e(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=od("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Wf.getListenId_(e,r),u={};this.listens_[l]=u;const d=A0(e._queryParams);this.restRequest_(o+".json",d,(f,m)=>{let y=m;if(f===404&&(y=null,f=null),f===null&&this.onDataUpdate_(o,y,!1,r),zl(this.listens_,l)===u){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",s(v,null)}})}unlisten(e,t){const r=Wf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=A0(e._queryParams),r=e._path.toString(),s=new uv;return this.restRequest_(r+".json",t,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(r,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+sc(t);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let d=null;if(u.status>=200&&u.status<300){try{d=Fu(u.responseText)}catch{rr("Failed to parse JSON response for "+l+": "+u.responseText)}r(null,d)}else u.status!==401&&u.status!==404&&rr("Got unsuccessful REST response for "+l+" Status: "+u.status),r(u.status);r=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(){return{value:null,children:new Map}}function Gb(n,e,t){if(Je(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=et(e);n.children.has(r)||n.children.set(r,Hf());const s=n.children.get(r);e=wt(e),Gb(s,e,t)}}function c_(n,e,t){n.value!==null?t(e,n.value):C3(n,(r,s)=>{const o=new St(e.toString()+"/"+r);c_(s,o,t)})}function C3(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&gr(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=10*1e3,b3=30*1e3,A3=300*1e3;class P3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new R3(e);const r=k0+(b3-k0)*Math.random();Ru(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;gr(e,(s,o)=>{o>0&&ui(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),Ru(this.reportStats_.bind(this),Math.floor(Math.random()*2*A3))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ds||(ds={}));function qb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Kb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qb(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ds.ACK_USER_WRITE,this.source=qb()}operationForChild(e){if(Je(this.path)){if(this.affectedTree.value!=null)return _e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new St(e));return new Gf(ut(),t,this.revert)}}else return _e(et(this.path)===e,"operationForChild called for unrelated child."),new Gf(wt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ds.OVERWRITE}operationForChild(e){return Je(this.path)?new pa(this.source,ut(),this.snap.getImmediateChild(e)):new pa(this.source,wt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ds.MERGE}operationForChild(e){if(Je(this.path)){const t=this.children.subtree(new St(e));return t.isEmpty()?null:t.value?new pa(this.source,ut(),t.value):new Bu(this.source,ut(),t)}else return _e(et(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Bu(this.source,wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Je(e))return this.isFullyInitialized()&&!this.filtered_;const t=et(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function k3(n,e,t,r){const s=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(I3(l.childName,l.snapshotNode))}),hu(n,s,"child_removed",e,r,t),hu(n,s,"child_added",e,r,t),hu(n,s,"child_moved",o,r,t),hu(n,s,"child_changed",e,r,t),hu(n,s,"value",e,r,t),s}function hu(n,e,t,r,s,o){const l=r.filter(u=>u.type===t);l.sort((u,d)=>D3(n,u,d)),l.forEach(u=>{const d=N3(n,u,o);s.forEach(f=>{f.respondsTo(u.type)&&e.push(f.createEvent(d,n.query_))})})}function N3(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function D3(n,e,t){if(e.childName==null||t.childName==null)throw rc("Should only compare child_ events.");const r=new tt(e.childName,e.snapshotNode),s=new tt(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(n,e){return{eventCache:n,serverCache:e}}function bu(n,e,t,r){return Yb(new Cv(e,t,r),n.serverCache)}function Xb(n,e,t,r){return Yb(n.eventCache,new Cv(e,t,r))}function u_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ma(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ty;const O3=()=>(Ty||(Ty=new us(wU)),Ty);class vt{static fromObject(e){let t=new vt(null);return gr(e,(r,s)=>{t=t.set(new St(r),s)}),t}constructor(e,t=O3()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ut(),value:this.value};if(Je(e))return null;{const r=et(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(wt(e),t);return o!=null?{path:tn(new St(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Je(e))return this;{const t=et(e),r=this.children.get(t);return r!==null?r.subtree(wt(e)):new vt(null)}}set(e,t){if(Je(e))return new vt(t,this.children);{const r=et(e),o=(this.children.get(r)||new vt(null)).set(wt(e),t),l=this.children.insert(r,o);return new vt(this.value,l)}}remove(e){if(Je(e))return this.children.isEmpty()?new vt(null):new vt(null,this.children);{const t=et(e),r=this.children.get(t);if(r){const s=r.remove(wt(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new vt(null):new vt(this.value,o)}else return this}}get(e){if(Je(e))return this.value;{const t=et(e),r=this.children.get(t);return r?r.get(wt(e)):null}}setTree(e,t){if(Je(e))return t;{const r=et(e),o=(this.children.get(r)||new vt(null)).setTree(wt(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new vt(this.value,l)}}fold(e){return this.fold_(ut(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(tn(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ut(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(Je(e))return null;{const o=et(e),l=this.children.get(o);return l?l.findOnPath_(wt(e),tn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ut(),t)}foreachOnPath_(e,t,r){if(Je(e))return this;{this.value&&r(t,this.value);const s=et(e),o=this.children.get(s);return o?o.foreachOnPath_(wt(e),tn(t,s),r):new vt(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(tn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.writeTree_=e}static empty(){return new Dr(new vt(null))}}function Au(n,e,t){if(Je(e))return new Dr(new vt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const l=fr(s,e);return o=o.updateChild(l,t),new Dr(n.writeTree_.set(s,o))}else{const s=new vt(t),o=n.writeTree_.setTree(e,s);return new Dr(o)}}}function N0(n,e,t){let r=n;return gr(t,(s,o)=>{r=Au(r,tn(e,s),o)}),r}function D0(n,e){if(Je(e))return Dr.empty();{const t=n.writeTree_.setTree(e,new vt(null));return new Dr(t)}}function d_(n,e){return Ta(n,e)!=null}function Ta(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(fr(t.path,e)):null}function O0(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Sn,(r,s)=>{e.push(new tt(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new tt(r,s.value))}),e}function eo(n,e){if(Je(e))return n;{const t=Ta(n,e);return t!=null?new Dr(new vt(t)):new Dr(n.writeTree_.subtree(e))}}function h_(n){return n.writeTree_.isEmpty()}function $l(n,e){return Jb(ut(),n.writeTree_,e)}function Jb(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(_e(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=Jb(tn(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(tn(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(n,e){return sA(e,n)}function M3(n,e,t,r,s){_e(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=Au(n.visibleWrites,e,t)),n.lastWriteId=r}function L3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function V3(n,e){const t=n.allWrites.findIndex(u=>u.writeId===e);_e(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const u=n.allWrites[l];u.visible&&(l>=t&&j3(u,r.path)?s=!1:kr(r.path,u.path)&&(o=!0)),l--}if(s){if(o)return F3(n),!0;if(r.snap)n.visibleWrites=D0(n.visibleWrites,r.path);else{const u=r.children;gr(u,d=>{n.visibleWrites=D0(n.visibleWrites,tn(r.path,d))})}return!0}else return!1}function j3(n,e){if(n.snap)return kr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&kr(tn(n.path,t),e))return!0;return!1}function F3(n){n.visibleWrites=eA(n.allWrites,U3,ut()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function U3(n){return n.visible}function eA(n,e,t){let r=Dr.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let u;if(o.snap)kr(t,l)?(u=fr(t,l),r=Au(r,u,o.snap)):kr(l,t)&&(u=fr(l,t),r=Au(r,ut(),o.snap.getChild(u)));else if(o.children){if(kr(t,l))u=fr(t,l),r=N0(r,u,o.children);else if(kr(l,t))if(u=fr(l,t),Je(u))r=N0(r,ut(),o.children);else{const d=zl(o.children,et(u));if(d){const f=d.getChild(wt(u));r=Au(r,ut(),f)}}}else throw rc("WriteRecord should have .snap or .children")}}return r}function tA(n,e,t,r,s){if(!r&&!s){const o=Ta(n.visibleWrites,e);if(o!=null)return o;{const l=eo(n.visibleWrites,e);if(h_(l))return t;if(t==null&&!d_(l,ut()))return null;{const u=t||at.EMPTY_NODE;return $l(l,u)}}}else{const o=eo(n.visibleWrites,e);if(!s&&h_(o))return t;if(!s&&t==null&&!d_(o,ut()))return null;{const l=function(f){return(f.visible||s)&&(!r||!~r.indexOf(f.writeId))&&(kr(f.path,e)||kr(e,f.path))},u=eA(n.allWrites,l,e),d=t||at.EMPTY_NODE;return $l(u,d)}}}function z3(n,e,t){let r=at.EMPTY_NODE;const s=Ta(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Sn,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=eo(n.visibleWrites,e);return t.forEachChild(Sn,(l,u)=>{const d=$l(eo(o,new St(l)),u);r=r.updateImmediateChild(l,d)}),O0(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=eo(n.visibleWrites,e);return O0(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function B3(n,e,t,r,s){_e(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=tn(e,t);if(d_(n.visibleWrites,o))return null;{const l=eo(n.visibleWrites,o);return h_(l)?s.getChild(t):$l(l,s.getChild(t))}}function $3(n,e,t,r){const s=tn(e,t),o=Ta(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=eo(n.visibleWrites,s);return $l(l,r.getNode().getImmediateChild(t))}else return null}function W3(n,e){return Ta(n.visibleWrites,e)}function H3(n,e,t,r,s,o,l){let u;const d=eo(n.visibleWrites,e),f=Ta(d,ut());if(f!=null)u=f;else if(t!=null)u=$l(d,t);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const m=[],y=l.getCompare(),v=o?u.getReverseIteratorFrom(r,l):u.getIteratorFrom(r,l);let I=v.getNext();for(;I&&m.length<s;)y(I,r)!==0&&m.push(I),I=v.getNext();return m}else return[]}function G3(){return{visibleWrites:Dr.empty(),allWrites:[],lastWriteId:-1}}function f_(n,e,t,r){return tA(n.writeTree,n.treePath,e,t,r)}function nA(n,e){return z3(n.writeTree,n.treePath,e)}function M0(n,e,t,r){return B3(n.writeTree,n.treePath,e,t,r)}function qf(n,e){return W3(n.writeTree,tn(n.treePath,e))}function q3(n,e,t,r,s,o){return H3(n.writeTree,n.treePath,e,t,r,s,o)}function Rv(n,e,t){return $3(n.writeTree,n.treePath,e,t)}function rA(n,e){return sA(tn(n.treePath,e),n.writeTree)}function sA(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;_e(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),_e(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,b0(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,T3(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,S3(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,b0(r,e.snapshotNode,s.oldSnap));else throw rc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const iA=new Q3;class bv{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Cv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rv(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ma(this.viewCache_),o=q3(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}function Y3(n,e){_e(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),_e(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function X3(n,e,t,r,s){const o=new K3;let l,u;if(t.type===ds.OVERWRITE){const f=t;f.source.fromUser?l=p_(n,e,f.path,f.snap,r,s,o):(_e(f.source.fromServer,"Unknown source."),u=f.source.tagged||e.serverCache.isFiltered()&&!Je(f.path),l=Kf(n,e,f.path,f.snap,r,s,u,o))}else if(t.type===ds.MERGE){const f=t;f.source.fromUser?l=Z3(n,e,f.path,f.children,r,s,o):(_e(f.source.fromServer,"Unknown source."),u=f.source.tagged||e.serverCache.isFiltered(),l=m_(n,e,f.path,f.children,r,s,u,o))}else if(t.type===ds.ACK_USER_WRITE){const f=t;f.revert?l=nz(n,e,f.path,r,s,o):l=ez(n,e,f.path,f.affectedTree,r,s,o)}else if(t.type===ds.LISTEN_COMPLETE)l=tz(n,e,t.path,r,o);else throw rc("Unknown operation type: "+t.type);const d=o.getChanges();return J3(e,l,d),{viewCache:l,changes:d}}function J3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=u_(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(E3(u_(e)))}}function oA(n,e,t,r,s,o){const l=e.eventCache;if(qf(r,t)!=null)return e;{let u,d;if(Je(t))if(_e(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=ma(e),m=f instanceof at?f:at.EMPTY_NODE,y=nA(r,m);u=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const f=f_(r,ma(e));u=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{const f=et(t);if(f===".priority"){_e(lo(t)===1,"Can't have a priority with additional path components");const m=l.getNode();d=e.serverCache.getNode();const y=M0(r,t,m,d);y!=null?u=n.filter.updatePriority(m,y):u=l.getNode()}else{const m=wt(t);let y;if(l.isCompleteForChild(f)){d=e.serverCache.getNode();const v=M0(r,t,l.getNode(),d);v!=null?y=l.getNode().getImmediateChild(f).updateChild(m,v):y=l.getNode().getImmediateChild(f)}else y=Rv(r,f,e.serverCache);y!=null?u=n.filter.updateChild(l.getNode(),f,y,m,s,o):u=l.getNode()}}return bu(e,u,l.isFullyInitialized()||Je(t),n.filter.filtersNodes())}}function Kf(n,e,t,r,s,o,l,u){const d=e.serverCache;let f;const m=l?n.filter:n.filter.getIndexedFilter();if(Je(t))f=m.updateFullNode(d.getNode(),r,null);else if(m.filtersNodes()&&!d.isFiltered()){const I=d.getNode().updateChild(t,r);f=m.updateFullNode(d.getNode(),I,null)}else{const I=et(t);if(!d.isCompleteForPath(t)&&lo(t)>1)return e;const A=wt(t),R=d.getNode().getImmediateChild(I).updateChild(A,r);I===".priority"?f=m.updatePriority(d.getNode(),R):f=m.updateChild(d.getNode(),I,R,A,iA,null)}const y=Xb(e,f,d.isFullyInitialized()||Je(t),m.filtersNodes()),v=new bv(s,y,o);return oA(n,y,t,s,v,u)}function p_(n,e,t,r,s,o,l){const u=e.eventCache;let d,f;const m=new bv(s,e,o);if(Je(t))f=n.filter.updateFullNode(e.eventCache.getNode(),r,l),d=bu(e,f,!0,n.filter.filtersNodes());else{const y=et(t);if(y===".priority")f=n.filter.updatePriority(e.eventCache.getNode(),r),d=bu(e,f,u.isFullyInitialized(),u.isFiltered());else{const v=wt(t),I=u.getNode().getImmediateChild(y);let A;if(Je(v))A=r;else{const x=m.getCompleteChild(y);x!=null?Lb(v)===".priority"&&x.getChild(jb(v)).isEmpty()?A=x:A=x.updateChild(v,r):A=at.EMPTY_NODE}if(I.equals(A))d=e;else{const x=n.filter.updateChild(u.getNode(),y,A,v,m,l);d=bu(e,x,u.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function L0(n,e){return n.eventCache.isCompleteForChild(e)}function Z3(n,e,t,r,s,o,l){let u=e;return r.foreach((d,f)=>{const m=tn(t,d);L0(e,et(m))&&(u=p_(n,u,m,f,s,o,l))}),r.foreach((d,f)=>{const m=tn(t,d);L0(e,et(m))||(u=p_(n,u,m,f,s,o,l))}),u}function V0(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function m_(n,e,t,r,s,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,f;Je(t)?f=r:f=new vt(null).setTree(t,r);const m=e.serverCache.getNode();return f.children.inorderTraversal((y,v)=>{if(m.hasChild(y)){const I=e.serverCache.getNode().getImmediateChild(y),A=V0(n,I,v);d=Kf(n,d,new St(y),A,s,o,l,u)}}),f.children.inorderTraversal((y,v)=>{const I=!e.serverCache.isCompleteForChild(y)&&v.value===null;if(!m.hasChild(y)&&!I){const A=e.serverCache.getNode().getImmediateChild(y),x=V0(n,A,v);d=Kf(n,d,new St(y),x,s,o,l,u)}}),d}function ez(n,e,t,r,s,o,l){if(qf(s,t)!=null)return e;const u=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(Je(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return Kf(n,e,t,d.getNode().getChild(t),s,o,u,l);if(Je(t)){let f=new vt(null);return d.getNode().forEachChild(kl,(m,y)=>{f=f.set(new St(m),y)}),m_(n,e,t,f,s,o,u,l)}else return e}else{let f=new vt(null);return r.foreach((m,y)=>{const v=tn(t,m);d.isCompleteForPath(v)&&(f=f.set(m,d.getNode().getChild(v)))}),m_(n,e,t,f,s,o,u,l)}}function tz(n,e,t,r,s){const o=e.serverCache,l=Xb(e,o.getNode(),o.isFullyInitialized()||Je(t),o.isFiltered());return oA(n,l,t,r,iA,s)}function nz(n,e,t,r,s,o){let l;if(qf(r,t)!=null)return e;{const u=new bv(r,e,s),d=e.eventCache.getNode();let f;if(Je(t)||et(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=f_(r,ma(e));else{const y=e.serverCache.getNode();_e(y instanceof at,"serverChildren would be complete if leaf node"),m=nA(r,y)}m=m,f=n.filter.updateFullNode(d,m,o)}else{const m=et(t);let y=Rv(r,m,e.serverCache);y==null&&e.serverCache.isCompleteForChild(m)&&(y=d.getImmediateChild(m)),y!=null?f=n.filter.updateChild(d,m,y,wt(t),u,o):e.eventCache.getNode().hasChild(m)?f=n.filter.updateChild(d,m,at.EMPTY_NODE,wt(t),u,o):f=d,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=f_(r,ma(e)),l.isLeafNode()&&(f=n.filter.updateFullNode(f,l,o)))}return l=e.serverCache.isFullyInitialized()||qf(r,ut())!=null,bu(e,f,l,n.filter.filtersNodes())}}function rz(n,e){const t=ma(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Je(e)&&!t.getImmediateChild(et(e)).isEmpty())?t.getChild(e):null}function j0(n,e,t,r){e.type===ds.MERGE&&e.source.queryId!==null&&(_e(ma(n.viewCache_),"We should always have a full cache before handling merges"),_e(u_(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=X3(n.processor_,s,e,t,r);return Y3(n.processor_,o.viewCache),_e(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,sz(n,o.changes,o.viewCache.eventCache.getNode())}function sz(n,e,t,r){const s=n.eventRegistrations_;return k3(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F0;function iz(n){_e(!F0,"__referenceConstructor has already been defined"),F0=n}function Av(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return _e(o!=null,"SyncTree gave us an op for an invalid query."),j0(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(j0(l,e,t,r));return o}}function Pv(n,e){let t=null;for(const r of n.views.values())t=t||rz(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U0;function oz(n){_e(!U0,"__referenceConstructor has already been defined"),U0=n}class z0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=G3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function az(n,e,t,r,s){return M3(n.pendingWriteTree_,e,t,r,s),s?Wp(n,new pa(qb(),e,t)):[]}function Cl(n,e,t=!1){const r=L3(n.pendingWriteTree_,e);if(V3(n.pendingWriteTree_,e)){let o=new vt(null);return r.snap!=null?o=o.set(ut(),!0):gr(r.children,l=>{o=o.set(new St(l),!0)}),Wp(n,new Gf(r.path,o,t))}else return[]}function $p(n,e,t){return Wp(n,new pa(Kb(),e,t))}function lz(n,e,t){const r=vt.fromObject(t);return Wp(n,new Bu(Kb(),e,r))}function cz(n,e,t,r){const s=uA(n,r);if(s!=null){const o=dA(s),l=o.path,u=o.queryId,d=fr(l,e),f=new pa(Qb(u),d,t);return hA(n,l,f)}else return[]}function uz(n,e,t,r){const s=uA(n,r);if(s){const o=dA(s),l=o.path,u=o.queryId,d=fr(l,e),f=vt.fromObject(t),m=new Bu(Qb(u),d,f);return hA(n,l,m)}else return[]}function aA(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,u)=>{const d=fr(l,e),f=Pv(u,d);if(f)return f});return tA(s,e,o,t,!0)}function Wp(n,e){return lA(e,n.syncPointTree_,null,Zb(n.pendingWriteTree_,ut()))}function lA(n,e,t,r){if(Je(n.path))return cA(n,e,t,r);{const s=e.get(ut());t==null&&s!=null&&(t=Pv(s,ut()));let o=[];const l=et(n.path),u=n.operationForChild(l),d=e.children.get(l);if(d&&u){const f=t?t.getImmediateChild(l):null,m=rA(r,l);o=o.concat(lA(u,d,f,m))}return s&&(o=o.concat(Av(s,n,r,t))),o}}function cA(n,e,t,r){const s=e.get(ut());t==null&&s!=null&&(t=Pv(s,ut()));let o=[];return e.children.inorderTraversal((l,u)=>{const d=t?t.getImmediateChild(l):null,f=rA(r,l),m=n.operationForChild(l);m&&(o=o.concat(cA(m,u,d,f)))}),s&&(o=o.concat(Av(s,n,r,t))),o}function uA(n,e){return n.tagToQueryMap.get(e)}function dA(n){const e=n.indexOf("$");return _e(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new St(n.substr(0,e))}}function hA(n,e,t){const r=n.syncPointTree_.get(e);_e(r,"Missing sync point for query tag that we're tracking");const s=Zb(n.pendingWriteTree_,e);return Av(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new kv(t)}node(){return this.node_}}class Nv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=tn(this.path_,e);return new Nv(this.syncTree_,t)}node(){return aA(this.syncTree_,this.path_)}}const dz=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},B0=function(n,e,t){if(!n||typeof n!="object")return n;if(_e(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return hz(n[".sv"],e,t);if(typeof n[".sv"]=="object")return fz(n[".sv"],e);_e(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},hz=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:_e(!1,"Unexpected server value: "+n)}},fz=function(n,e,t){n.hasOwnProperty("increment")||_e(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&_e(!1,"Unexpected increment value: "+r);const s=e.node();if(_e(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},pz=function(n,e,t,r){return Dv(e,new Nv(t,n),r)},mz=function(n,e,t){return Dv(n,new kv(e),t)};function Dv(n,e,t){const r=n.getPriority().val(),s=B0(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,u=B0(l.getValue(),e,t);return u!==l.getValue()||s!==l.getPriority().val()?new Jt(u,wn(s)):n}else{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new Jt(s))),l.forEachChild(Sn,(u,d)=>{const f=Dv(d,e.getImmediateChild(u),t);f!==d&&(o=o.updateImmediateChild(u,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Mv(n,e){let t=e instanceof St?e:new St(e),r=n,s=et(t);for(;s!==null;){const o=zl(r.node.children,s)||{children:{},childCount:0};r=new Ov(s,r,o),t=wt(t),s=et(t)}return r}function oc(n){return n.node.value}function fA(n,e){n.node.value=e,g_(n)}function pA(n){return n.node.childCount>0}function gz(n){return oc(n)===void 0&&!pA(n)}function Hp(n,e){gr(n.node.children,(t,r)=>{e(new Ov(t,n,r))})}function mA(n,e,t,r){t&&e(n),Hp(n,s=>{mA(s,e,!0)})}function yz(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function cd(n){return new St(n.parent===null?n.name:cd(n.parent)+"/"+n.name)}function g_(n){n.parent!==null&&_z(n.parent,n.name,n)}function _z(n,e,t){const r=gz(t),s=ui(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,g_(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,g_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz=/[\[\].#$\/\u0000-\u001F\u007F]/,wz=/[\[\].#$\u0000-\u001F\u007F]/,Iy=10*1024*1024,gA=function(n){return typeof n=="string"&&n.length!==0&&!vz.test(n)},Ez=function(n){return typeof n=="string"&&n.length!==0&&!wz.test(n)},Sz=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ez(n)},yA=function(n,e,t){const r=t instanceof St?new t3(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ta(r));if(typeof e=="function")throw new Error(n+"contains a function "+ta(r)+" with contents = "+e.toString());if(mb(e))throw new Error(n+"contains "+e.toString()+" "+ta(r));if(typeof e=="string"&&e.length>Iy/3&&Fp(e)>Iy)throw new Error(n+"contains a string greater than "+Iy+" utf8 bytes "+ta(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(gr(e,(l,u)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!gA(l)))throw new Error(n+" contains an invalid key ("+l+") "+ta(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);n3(r,l),yA(n,u,r),r3(r)}),s&&o)throw new Error(n+' contains ".value" child '+ta(r)+" in addition to actual children.")}},Tz=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gA(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Sz(t))throw new Error(Uj(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xz(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!Fb(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function Ia(n,e,t){xz(n,t),Cz(n,r=>kr(r,e)||kr(e,r))}function Cz(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(Rz(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Rz(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Cu&&vn("event: "+t.toString()),ad(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz="repo_interrupt",Az=25;class Pz{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Iz,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hf(),this.transactionQueueTree_=new Ov,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kz(n,e,t){if(n.stats_=Ev(n.repoInfo_),n.forceRestClient_||CU())n.server_=new Wf(n.repoInfo_,(r,s,o,l)=>{$0(n,r,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>W0(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Js(n.repoInfo_,e,(r,s,o,l)=>{$0(n,r,s,o,l)},r=>{W0(n,r)},r=>{Dz(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=kU(n.repoInfo_,()=>new P3(n.stats_,n.server_)),n.infoData_=new x3,n.infoSyncTree_=new z0({startListening:(r,s,o,l)=>{let u=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(u=$p(n.infoSyncTree_,r._path,d),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),Lv(n,"connected",!1),n.serverSyncTree_=new z0({startListening:(r,s,o,l)=>(n.server_.listen(r,o,s,(u,d)=>{const f=l(u,d);Ia(n.eventQueue_,r._path,f)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function Nz(n){const t=n.infoData_.getNode(new St(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function _A(n){return dz({timestamp:Nz(n)})}function $0(n,e,t,r,s){n.dataUpdateCount++;const o=new St(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const d=Ff(t,f=>wn(f));l=uz(n.serverSyncTree_,o,d,s)}else{const d=wn(t);l=cz(n.serverSyncTree_,o,d,s)}else if(r){const d=Ff(t,f=>wn(f));l=lz(n.serverSyncTree_,o,d)}else{const d=wn(t);l=$p(n.serverSyncTree_,o,d)}let u=o;l.length>0&&(u=jv(n,o)),Ia(n.eventQueue_,u,l)}function W0(n,e){Lv(n,"connected",e),e===!1&&Mz(n)}function Dz(n,e){gr(e,(t,r)=>{Lv(n,t,r)})}function Lv(n,e,t){const r=new St("/.info/"+e),s=wn(t);n.infoData_.updateSnapshot(r,s);const o=$p(n.infoSyncTree_,r,s);Ia(n.eventQueue_,r,o)}function Oz(n){return n.nextWriteId_++}function Mz(n){vA(n,"onDisconnectEvents");const e=_A(n),t=Hf();c_(n.onDisconnect_,ut(),(s,o)=>{const l=pz(s,o,n.serverSyncTree_,e);Gb(t,s,l)});let r=[];c_(t,ut(),(s,o)=>{r=r.concat($p(n.serverSyncTree_,s,o));const l=Fz(n,s);jv(n,l)}),n.onDisconnect_=Hf(),Ia(n.eventQueue_,ut(),r)}function Lz(n){n.persistentConnection_&&n.persistentConnection_.interrupt(bz)}function vA(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),vn(t,...e)}function wA(n,e,t){return aA(n.serverSyncTree_,e,t)||at.EMPTY_NODE}function Vv(n,e=n.transactionQueueTree_){if(e||Gp(n,e),oc(e)){const t=SA(n,e);_e(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&Vz(n,cd(e),t)}else pA(e)&&Hp(e,t=>{Vv(n,t)})}function Vz(n,e,t){const r=t.map(f=>f.currentWriteId),s=wA(n,e,r);let o=s;const l=s.hash();for(let f=0;f<t.length;f++){const m=t[f];_e(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const y=fr(e,m.path);o=o.updateChild(y,m.currentOutputSnapshotRaw)}const u=o.val(!0),d=e;n.server_.put(d.toString(),u,f=>{vA(n,"transaction put response",{path:d.toString(),status:f});let m=[];if(f==="ok"){const y=[];for(let v=0;v<t.length;v++)t[v].status=2,m=m.concat(Cl(n.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&y.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();Gp(n,Mv(n.transactionQueueTree_,e)),Vv(n,n.transactionQueueTree_),Ia(n.eventQueue_,e,m);for(let v=0;v<y.length;v++)ad(y[v])}else{if(f==="datastale")for(let y=0;y<t.length;y++)t[y].status===3?t[y].status=4:t[y].status=0;else{rr("transaction at "+d.toString()+" failed: "+f);for(let y=0;y<t.length;y++)t[y].status=4,t[y].abortReason=f}jv(n,e)}},l)}function jv(n,e){const t=EA(n,e),r=cd(t),s=SA(n,t);return jz(n,s,r),r}function jz(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const d=e[u],f=fr(t,d.path);let m=!1,y;if(_e(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,y=d.abortReason,s=s.concat(Cl(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=Az)m=!0,y="maxretry",s=s.concat(Cl(n.serverSyncTree_,d.currentWriteId,!0));else{const v=wA(n,d.path,l);d.currentInputSnapshot=v;const I=e[u].update(v.val());if(I!==void 0){yA("transaction failed: Data returned ",I,d.path);let A=wn(I);typeof I=="object"&&I!=null&&ui(I,".priority")||(A=A.updatePriority(v.getPriority()));const R=d.currentWriteId,j=_A(n),V=mz(A,v,j);d.currentOutputSnapshotRaw=A,d.currentOutputSnapshotResolved=V,d.currentWriteId=Oz(n),l.splice(l.indexOf(R),1),s=s.concat(az(n.serverSyncTree_,d.path,V,d.currentWriteId,d.applyLocally)),s=s.concat(Cl(n.serverSyncTree_,R,!0))}else m=!0,y="nodata",s=s.concat(Cl(n.serverSyncTree_,d.currentWriteId,!0))}Ia(n.eventQueue_,t,s),s=[],m&&(e[u].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[u].unwatcher),e[u].onComplete&&(y==="nodata"?r.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):r.push(()=>e[u].onComplete(new Error(y),!1,null))))}Gp(n,n.transactionQueueTree_);for(let u=0;u<r.length;u++)ad(r[u]);Vv(n,n.transactionQueueTree_)}function EA(n,e){let t,r=n.transactionQueueTree_;for(t=et(e);t!==null&&oc(r)===void 0;)r=Mv(r,t),e=wt(e),t=et(e);return r}function SA(n,e){const t=[];return TA(n,e,t),t.sort((r,s)=>r.order-s.order),t}function TA(n,e,t){const r=oc(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);Hp(e,s=>{TA(n,s,t)})}function Gp(n,e){const t=oc(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,fA(e,t.length>0?t:void 0)}Hp(e,r=>{Gp(n,r)})}function Fz(n,e){const t=cd(EA(n,e)),r=Mv(n.transactionQueueTree_,e);return yz(r,s=>{xy(n,s)}),xy(n,r),mA(r,s=>{xy(n,s)}),t}function xy(n,e){const t=oc(e);if(t){const r=[];let s=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(_e(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(_e(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(Cl(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?fA(e,void 0):t.length=o+1,Ia(n.eventQueue_,cd(e),s);for(let l=0;l<r.length;l++)ad(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function zz(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rr(`Invalid query segment '${t}' in query '${n}'`)}return e}const H0=function(n,e){const t=Bz(n),r=t.namespace;t.domain==="firebase.com"&&ii(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&ii("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||_U();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Rb(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new St(t.pathString)}},Bz=function(n){let e="",t="",r="",s="",o="",l=!0,u="https",d=443;if(typeof n=="string"){let f=n.indexOf("//");f>=0&&(u=n.substring(0,f-1),n=n.substring(f+2));let m=n.indexOf("/");m===-1&&(m=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),e=n.substring(0,Math.min(m,y)),m<y&&(s=Uz(n.substring(m,y)));const v=zz(n.substring(Math.min(n.length,y)));f=e.indexOf(":"),f>=0?(l=u==="https"||u==="wss",d=parseInt(e.substring(f+1),10)):f=e.length;const I=e.slice(0,f);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const A=e.indexOf(".");r=e.substring(0,A).toLowerCase(),t=e.substring(A+1),o=r}"ns"in v&&(o=v.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:l,scheme:u,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Je(this._path)?null:Lb(this._path)}get ref(){return new ac(this._repo,this._path)}get _queryIdentifier(){const e=P0(this._queryParams),t=vv(e);return t==="{}"?"default":t}get _queryObject(){return P0(this._queryParams)}isEqual(e){if(e=mt(e),!(e instanceof Fv))return!1;const t=this._repo===e._repo,r=Fb(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+e3(this._path)}}class ac extends Fv{constructor(e,t){super(e,t,new xv,!1)}get parent(){const e=jb(this._path);return e===null?null:new ac(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}iz(ac);oz(ac);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z="FIREBASE_DATABASE_EMULATOR_HOST",y_={};let Wz=!1;function Hz(n,e,t,r){const s=e.lastIndexOf(":"),o=e.substring(0,s),l=Ts(o);n.repoInfo_=new Rb(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function Gz(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||ii("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=H0(o,s),u=l.repoInfo,d;typeof process<"u"&&d0&&(d=d0[$z]),d?(o=`http://${d}?ns=${u.namespace}`,l=H0(o,s),u=l.repoInfo):l.repoInfo.secure;const f=new bU(n.name,n.options,e);Tz("Invalid Firebase Database URL",l),Je(l.path)||ii("Database URL must point to the root of a Firebase Database (not including a child path).");const m=Kz(u,n,f,new RU(n,t));return new Qz(m,n)}function qz(n,e){const t=y_[e];(!t||t[n.key]!==n)&&ii(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Lz(n),delete t[n.key]}function Kz(n,e,t,r){let s=y_[e.name];s||(s={},y_[e.name]=s);let o=s[n.toURLString()];return o&&ii("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Pz(n,Wz,t,r),s[n.toURLString()]=o,o}class Qz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kz(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ac(this._repo,ut())),this._rootInternal}_delete(){return this._rootInternal!==null&&(qz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ii("Cannot call "+e+" on a deleted database.")}}function Yz(n=zp(),e){const t=sd(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=cv("database");r&&Xz(t,...r)}return t}function Xz(n,e,t,r={}){n=mt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ni(r,o.repoInfo_.emulatorOptions))return;ii("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&ii('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new cf(cf.OWNER);else if(r.mockUserToken){const u=typeof r.mockUserToken=="string"?r.mockUserToken:dv(r.mockUserToken,n.app.options.projectId);l=new cf(u)}Ts(e)&&(Vp(e),jp("Database",!0)),Hz(o,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(n){hU(vo),ao(new ri("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Gz(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),pr(h0,f0,n),pr(h0,f0,"esm2020")}Js.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Js.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};Jz();var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var to,IA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,b){function N(){}N.prototype=b.prototype,P.F=b.prototype,P.prototype=new N,P.prototype.constructor=P,P.D=function(O,M,F){for(var D=Array(arguments.length-2),me=2;me<arguments.length;me++)D[me-2]=arguments[me];return b.prototype[M].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,b,N){N||(N=0);const O=Array(16);if(typeof b=="string")for(var M=0;M<16;++M)O[M]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(M=0;M<16;++M)O[M]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=P.g[0],N=P.g[1],M=P.g[2];let F=P.g[3],D;D=b+(F^N&(M^F))+O[0]+3614090360&4294967295,b=N+(D<<7&4294967295|D>>>25),D=F+(M^b&(N^M))+O[1]+3905402710&4294967295,F=b+(D<<12&4294967295|D>>>20),D=M+(N^F&(b^N))+O[2]+606105819&4294967295,M=F+(D<<17&4294967295|D>>>15),D=N+(b^M&(F^b))+O[3]+3250441966&4294967295,N=M+(D<<22&4294967295|D>>>10),D=b+(F^N&(M^F))+O[4]+4118548399&4294967295,b=N+(D<<7&4294967295|D>>>25),D=F+(M^b&(N^M))+O[5]+1200080426&4294967295,F=b+(D<<12&4294967295|D>>>20),D=M+(N^F&(b^N))+O[6]+2821735955&4294967295,M=F+(D<<17&4294967295|D>>>15),D=N+(b^M&(F^b))+O[7]+4249261313&4294967295,N=M+(D<<22&4294967295|D>>>10),D=b+(F^N&(M^F))+O[8]+1770035416&4294967295,b=N+(D<<7&4294967295|D>>>25),D=F+(M^b&(N^M))+O[9]+2336552879&4294967295,F=b+(D<<12&4294967295|D>>>20),D=M+(N^F&(b^N))+O[10]+4294925233&4294967295,M=F+(D<<17&4294967295|D>>>15),D=N+(b^M&(F^b))+O[11]+2304563134&4294967295,N=M+(D<<22&4294967295|D>>>10),D=b+(F^N&(M^F))+O[12]+1804603682&4294967295,b=N+(D<<7&4294967295|D>>>25),D=F+(M^b&(N^M))+O[13]+4254626195&4294967295,F=b+(D<<12&4294967295|D>>>20),D=M+(N^F&(b^N))+O[14]+2792965006&4294967295,M=F+(D<<17&4294967295|D>>>15),D=N+(b^M&(F^b))+O[15]+1236535329&4294967295,N=M+(D<<22&4294967295|D>>>10),D=b+(M^F&(N^M))+O[1]+4129170786&4294967295,b=N+(D<<5&4294967295|D>>>27),D=F+(N^M&(b^N))+O[6]+3225465664&4294967295,F=b+(D<<9&4294967295|D>>>23),D=M+(b^N&(F^b))+O[11]+643717713&4294967295,M=F+(D<<14&4294967295|D>>>18),D=N+(F^b&(M^F))+O[0]+3921069994&4294967295,N=M+(D<<20&4294967295|D>>>12),D=b+(M^F&(N^M))+O[5]+3593408605&4294967295,b=N+(D<<5&4294967295|D>>>27),D=F+(N^M&(b^N))+O[10]+38016083&4294967295,F=b+(D<<9&4294967295|D>>>23),D=M+(b^N&(F^b))+O[15]+3634488961&4294967295,M=F+(D<<14&4294967295|D>>>18),D=N+(F^b&(M^F))+O[4]+3889429448&4294967295,N=M+(D<<20&4294967295|D>>>12),D=b+(M^F&(N^M))+O[9]+568446438&4294967295,b=N+(D<<5&4294967295|D>>>27),D=F+(N^M&(b^N))+O[14]+3275163606&4294967295,F=b+(D<<9&4294967295|D>>>23),D=M+(b^N&(F^b))+O[3]+4107603335&4294967295,M=F+(D<<14&4294967295|D>>>18),D=N+(F^b&(M^F))+O[8]+1163531501&4294967295,N=M+(D<<20&4294967295|D>>>12),D=b+(M^F&(N^M))+O[13]+2850285829&4294967295,b=N+(D<<5&4294967295|D>>>27),D=F+(N^M&(b^N))+O[2]+4243563512&4294967295,F=b+(D<<9&4294967295|D>>>23),D=M+(b^N&(F^b))+O[7]+1735328473&4294967295,M=F+(D<<14&4294967295|D>>>18),D=N+(F^b&(M^F))+O[12]+2368359562&4294967295,N=M+(D<<20&4294967295|D>>>12),D=b+(N^M^F)+O[5]+4294588738&4294967295,b=N+(D<<4&4294967295|D>>>28),D=F+(b^N^M)+O[8]+2272392833&4294967295,F=b+(D<<11&4294967295|D>>>21),D=M+(F^b^N)+O[11]+1839030562&4294967295,M=F+(D<<16&4294967295|D>>>16),D=N+(M^F^b)+O[14]+4259657740&4294967295,N=M+(D<<23&4294967295|D>>>9),D=b+(N^M^F)+O[1]+2763975236&4294967295,b=N+(D<<4&4294967295|D>>>28),D=F+(b^N^M)+O[4]+1272893353&4294967295,F=b+(D<<11&4294967295|D>>>21),D=M+(F^b^N)+O[7]+4139469664&4294967295,M=F+(D<<16&4294967295|D>>>16),D=N+(M^F^b)+O[10]+3200236656&4294967295,N=M+(D<<23&4294967295|D>>>9),D=b+(N^M^F)+O[13]+681279174&4294967295,b=N+(D<<4&4294967295|D>>>28),D=F+(b^N^M)+O[0]+3936430074&4294967295,F=b+(D<<11&4294967295|D>>>21),D=M+(F^b^N)+O[3]+3572445317&4294967295,M=F+(D<<16&4294967295|D>>>16),D=N+(M^F^b)+O[6]+76029189&4294967295,N=M+(D<<23&4294967295|D>>>9),D=b+(N^M^F)+O[9]+3654602809&4294967295,b=N+(D<<4&4294967295|D>>>28),D=F+(b^N^M)+O[12]+3873151461&4294967295,F=b+(D<<11&4294967295|D>>>21),D=M+(F^b^N)+O[15]+530742520&4294967295,M=F+(D<<16&4294967295|D>>>16),D=N+(M^F^b)+O[2]+3299628645&4294967295,N=M+(D<<23&4294967295|D>>>9),D=b+(M^(N|~F))+O[0]+4096336452&4294967295,b=N+(D<<6&4294967295|D>>>26),D=F+(N^(b|~M))+O[7]+1126891415&4294967295,F=b+(D<<10&4294967295|D>>>22),D=M+(b^(F|~N))+O[14]+2878612391&4294967295,M=F+(D<<15&4294967295|D>>>17),D=N+(F^(M|~b))+O[5]+4237533241&4294967295,N=M+(D<<21&4294967295|D>>>11),D=b+(M^(N|~F))+O[12]+1700485571&4294967295,b=N+(D<<6&4294967295|D>>>26),D=F+(N^(b|~M))+O[3]+2399980690&4294967295,F=b+(D<<10&4294967295|D>>>22),D=M+(b^(F|~N))+O[10]+4293915773&4294967295,M=F+(D<<15&4294967295|D>>>17),D=N+(F^(M|~b))+O[1]+2240044497&4294967295,N=M+(D<<21&4294967295|D>>>11),D=b+(M^(N|~F))+O[8]+1873313359&4294967295,b=N+(D<<6&4294967295|D>>>26),D=F+(N^(b|~M))+O[15]+4264355552&4294967295,F=b+(D<<10&4294967295|D>>>22),D=M+(b^(F|~N))+O[6]+2734768916&4294967295,M=F+(D<<15&4294967295|D>>>17),D=N+(F^(M|~b))+O[13]+1309151649&4294967295,N=M+(D<<21&4294967295|D>>>11),D=b+(M^(N|~F))+O[4]+4149444226&4294967295,b=N+(D<<6&4294967295|D>>>26),D=F+(N^(b|~M))+O[11]+3174756917&4294967295,F=b+(D<<10&4294967295|D>>>22),D=M+(b^(F|~N))+O[2]+718787259&4294967295,M=F+(D<<15&4294967295|D>>>17),D=N+(F^(M|~b))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+b&4294967295,P.g[1]=P.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+F&4294967295}r.prototype.v=function(P,b){b===void 0&&(b=P.length);const N=b-this.blockSize,O=this.C;let M=this.h,F=0;for(;F<b;){if(M==0)for(;F<=N;)s(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<b;)if(O[M++]=P.charCodeAt(F++),M==this.blockSize){s(this,O),M=0;break}}else for(;F<b;)if(O[M++]=P[F++],M==this.blockSize){s(this,O),M=0;break}}this.h=M,this.o+=b},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var b=1;b<P.length-8;++b)P[b]=0;b=this.o*8;for(var N=P.length-8;N<P.length;++N)P[N]=b&255,b/=256;for(this.v(P),P=Array(16),b=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)P[b++]=this.g[N]>>>O&255;return P};function o(P,b){var N=u;return Object.prototype.hasOwnProperty.call(N,P)?N[P]:N[P]=b(P)}function l(P,b){this.h=b;const N=[];let O=!0;for(let M=P.length-1;M>=0;M--){const F=P[M]|0;O&&F==b||(N[M]=F,O=!1)}this.g=N}var u={};function d(P){return-128<=P&&P<128?o(P,function(b){return new l([b|0],b<0?-1:0)}):new l([P|0],P<0?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return y;if(P<0)return R(f(-P));const b=[];let N=1;for(let O=0;P>=N;O++)b[O]=P/N|0,N*=4294967296;return new l(b,0)}function m(P,b){if(P.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(P.charAt(0)=="-")return R(m(P.substring(1),b));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(b,8));let O=y;for(let F=0;F<P.length;F+=8){var M=Math.min(8,P.length-F);const D=parseInt(P.substring(F,F+M),b);M<8?(M=f(Math.pow(b,M)),O=O.j(M).add(f(D))):(O=O.j(N),O=O.add(f(D)))}return O}var y=d(0),v=d(1),I=d(16777216);n=l.prototype,n.m=function(){if(x(this))return-R(this).m();let P=0,b=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);P+=(O>=0?O:4294967296+O)*b,b*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(A(this))return"0";if(x(this))return"-"+R(this).toString(P);const b=f(Math.pow(P,6));var N=this;let O="";for(;;){const M=H(N,b).g;N=j(N,M.j(b));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(P);if(N=M,A(N))return F+O;for(;F.length<6;)F="0"+F;O=F+O}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function A(P){if(P.h!=0)return!1;for(let b=0;b<P.g.length;b++)if(P.g[b]!=0)return!1;return!0}function x(P){return P.h==-1}n.l=function(P){return P=j(this,P),x(P)?-1:A(P)?0:1};function R(P){const b=P.g.length,N=[];for(let O=0;O<b;O++)N[O]=~P.g[O];return new l(N,~P.h).add(v)}n.abs=function(){return x(this)?R(this):this},n.add=function(P){const b=Math.max(this.g.length,P.g.length),N=[];let O=0;for(let M=0;M<=b;M++){let F=O+(this.i(M)&65535)+(P.i(M)&65535),D=(F>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);O=D>>>16,F&=65535,D&=65535,N[M]=D<<16|F}return new l(N,N[N.length-1]&-2147483648?-1:0)};function j(P,b){return P.add(R(b))}n.j=function(P){if(A(this)||A(P))return y;if(x(this))return x(P)?R(this).j(R(P)):R(R(this).j(P));if(x(P))return R(this.j(R(P)));if(this.l(I)<0&&P.l(I)<0)return f(this.m()*P.m());const b=this.g.length+P.g.length,N=[];for(var O=0;O<2*b;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let M=0;M<P.g.length;M++){const F=this.i(O)>>>16,D=this.i(O)&65535,me=P.i(M)>>>16,ve=P.i(M)&65535;N[2*O+2*M]+=D*ve,V(N,2*O+2*M),N[2*O+2*M+1]+=F*ve,V(N,2*O+2*M+1),N[2*O+2*M+1]+=D*me,V(N,2*O+2*M+1),N[2*O+2*M+2]+=F*me,V(N,2*O+2*M+2)}for(P=0;P<b;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=b;P<2*b;P++)N[P]=0;return new l(N,0)};function V(P,b){for(;(P[b]&65535)!=P[b];)P[b+1]+=P[b]>>>16,P[b]&=65535,b++}function z(P,b){this.g=P,this.h=b}function H(P,b){if(A(b))throw Error("division by zero");if(A(P))return new z(y,y);if(x(P))return b=H(R(P),b),new z(R(b.g),R(b.h));if(x(b))return b=H(P,R(b)),new z(R(b.g),b.h);if(P.g.length>30){if(x(P)||x(b))throw Error("slowDivide_ only works with positive integers.");for(var N=v,O=b;O.l(P)<=0;)N=J(N),O=J(O);var M=Z(N,1),F=Z(O,1);for(O=Z(O,2),N=Z(N,2);!A(O);){var D=F.add(O);D.l(P)<=0&&(M=M.add(N),F=D),O=Z(O,1),N=Z(N,1)}return b=j(P,M.j(b)),new z(M,b)}for(M=y;P.l(b)>=0;){for(N=Math.max(1,Math.floor(P.m()/b.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),F=f(N),D=F.j(b);x(D)||D.l(P)>0;)N-=O,F=f(N),D=F.j(b);A(F)&&(F=v),M=M.add(F),P=j(P,D)}return new z(M,P)}n.B=function(P){return H(this,P).h},n.and=function(P){const b=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<b;O++)N[O]=this.i(O)&P.i(O);return new l(N,this.h&P.h)},n.or=function(P){const b=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<b;O++)N[O]=this.i(O)|P.i(O);return new l(N,this.h|P.h)},n.xor=function(P){const b=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<b;O++)N[O]=this.i(O)^P.i(O);return new l(N,this.h^P.h)};function J(P){const b=P.g.length+1,N=[];for(let O=0;O<b;O++)N[O]=P.i(O)<<1|P.i(O-1)>>>31;return new l(N,P.h)}function Z(P,b){const N=b>>5;b%=32;const O=P.g.length-N,M=[];for(let F=0;F<O;F++)M[F]=b>0?P.i(F+N)>>>b|P.i(F+N+1)<<32-b:P.i(F+N);return new l(M,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,IA=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,to=l}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xA,yu,CA,df,__,RA,bA,AA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var E=0;E<h.length;++E){var T=h[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(h,E){if(E)e:{var T=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var K=h[k];if(!(K in T))break e;T=T[K]}h=h[h.length-1],k=T[h],E=E(k),E!=k&&E!=null&&e(T,h,{configurable:!0,writable:!0,value:E})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(E){var T=[],k;for(k in E)Object.prototype.hasOwnProperty.call(E,k)&&T.push([k,E[k]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function d(h,E,T){return h.call.apply(h.bind,arguments)}function f(h,E,T){return f=d,f.apply(null,arguments)}function m(h,E){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function y(h,E){function T(){}T.prototype=E.prototype,h.Z=E.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(k,K,X){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return E.prototype[K].apply(k,ge)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const E=h.length;if(E>0){const T=Array(E);for(let k=0;k<E;k++)T[k]=h[k];return T}return[]}function A(h,E){for(let k=1;k<arguments.length;k++){const K=arguments[k];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=h.length||0;const X=K.length||0;h.length=T+X;for(let ge=0;ge<X;ge++)h[T+ge]=K[ge]}else h.push(K)}}class x{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function R(h){l.setTimeout(()=>{throw h},0)}function j(){var h=P;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class V{constructor(){this.h=this.g=null}add(E,T){const k=z.get();k.set(E,T),this.h?this.h.next=k:this.g=k,this.h=k}}var z=new x(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let J,Z=!1,P=new V,b=()=>{const h=Promise.resolve(void 0);J=()=>{h.then(N)}};function N(){for(var h;h=j();){try{h.h.call(h.g)}catch(T){R(T)}var E=z;E.j(h),E.h<100&&(E.h++,h.next=E.g,E.g=h)}Z=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};l.addEventListener("test",T,E),l.removeEventListener("test",T,E)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function me(h,E){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,E)}y(me,M),me.prototype.init=function(h,E){const T=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget,E||(T=="mouseover"?E=h.fromElement:T=="mouseout"&&(E=h.toElement)),this.relatedTarget=E,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ve="closure_listenable_"+(Math.random()*1e6|0),pe=0;function Ee(h,E,T,k,K){this.listener=h,this.proxy=null,this.src=E,this.type=T,this.capture=!!k,this.ha=K,this.key=++pe,this.da=this.fa=!1}function W(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ee(h,E,T){for(const k in h)E.call(T,h[k],k,h)}function ue(h,E){for(const T in h)E.call(void 0,h[T],T,h)}function B(h){const E={};for(const T in h)E[T]=h[T];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(h,E){let T,k;for(let K=1;K<arguments.length;K++){k=arguments[K];for(T in k)h[T]=k[T];for(let X=0;X<ne.length;X++)T=ne[X],Object.prototype.hasOwnProperty.call(k,T)&&(h[T]=k[T])}}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,E,T,k,K){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const ge=ce(h,E,k,K);return ge>-1?(E=h[ge],T||(E.fa=!1)):(E=new Ee(E,this.src,X,!!k,K),E.fa=T,h.push(E)),E};function he(h,E){const T=E.type;if(T in h.g){var k=h.g[T],K=Array.prototype.indexOf.call(k,E,void 0),X;(X=K>=0)&&Array.prototype.splice.call(k,K,1),X&&(W(E),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ce(h,E,T,k){for(let K=0;K<h.length;++K){const X=h[K];if(!X.da&&X.listener==E&&X.capture==!!T&&X.ha==k)return K}return-1}var G="closure_lm_"+(Math.random()*1e6|0),oe={};function ye(h,E,T,k,K){if(Array.isArray(E)){for(let X=0;X<E.length;X++)ye(h,E[X],T,k,K);return null}return T=jt(T),h&&h[ve]?h.J(E,T,u(k)?!!k.capture:!1,K):Ie(h,E,T,!1,k,K)}function Ie(h,E,T,k,K,X){if(!E)throw Error("Invalid event type");const ge=u(K)?!!K.capture:!!K;let ze=xn(h);if(ze||(h[G]=ze=new se(h)),T=ze.add(E,T,k,ge,X),T.proxy)return T;if(k=je(),T.proxy=k,k.src=h,k.listener=T,h.addEventListener)F||(K=ge),K===void 0&&(K=!1),h.addEventListener(E.toString(),k,K);else if(h.attachEvent)h.attachEvent(ht(E.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function je(){function h(T){return E.call(h.src,h.listener,T)}const E=Dn;return h}function $e(h,E,T,k,K){if(Array.isArray(E))for(var X=0;X<E.length;X++)$e(h,E[X],T,k,K);else k=u(k)?!!k.capture:!!k,T=jt(T),h&&h[ve]?(h=h.i,X=String(E).toString(),X in h.g&&(E=h.g[X],T=ce(E,T,k,K),T>-1&&(W(E[T]),Array.prototype.splice.call(E,T,1),E.length==0&&(delete h.g[X],h.h--)))):h&&(h=xn(h))&&(E=h.g[E.toString()],h=-1,E&&(h=ce(E,T,k,K)),(T=h>-1?E[h]:null)&&Ue(T))}function Ue(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[ve])he(E.i,h);else{var T=h.type,k=h.proxy;E.removeEventListener?E.removeEventListener(T,k,h.capture):E.detachEvent?E.detachEvent(ht(T),k):E.addListener&&E.removeListener&&E.removeListener(k),(T=xn(E))?(he(T,h),T.h==0&&(T.src=null,E[G]=null)):W(h)}}}function ht(h){return h in oe?oe[h]:oe[h]="on"+h}function Dn(h,E){if(h.da)h=!0;else{E=new me(E,this);const T=h.listener,k=h.ha||h.src;h.fa&&Ue(h),h=T.call(k,E)}return h}function xn(h){return h=h[G],h instanceof se?h:null}var Cn="__closure_events_fn_"+(Math.random()*1e9>>>0);function jt(h){return typeof h=="function"?h:(h[Cn]||(h[Cn]=function(E){return h.handleEvent(E)}),h[Cn])}function It(){O.call(this),this.i=new se(this),this.M=this,this.G=null}y(It,O),It.prototype[ve]=!0,It.prototype.removeEventListener=function(h,E,T,k){$e(this,h,E,T,k)};function xt(h,E){var T,k=h.G;if(k)for(T=[];k;k=k.G)T.push(k);if(h=h.M,k=E.type||E,typeof E=="string")E=new M(E,h);else if(E instanceof M)E.target=E.target||h;else{var K=E;E=new M(k,h),te(E,K)}K=!0;let X,ge;if(T)for(ge=T.length-1;ge>=0;ge--)X=E.g=T[ge],K=nn(X,k,!0,E)&&K;if(X=E.g=h,K=nn(X,k,!0,E)&&K,K=nn(X,k,!1,E)&&K,T)for(ge=0;ge<T.length;ge++)X=E.g=T[ge],K=nn(X,k,!1,E)&&K}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var h=this.i;for(const E in h.g){const T=h.g[E];for(let k=0;k<T.length;k++)W(T[k]);delete h.g[E],h.h--}}this.G=null},It.prototype.J=function(h,E,T,k){return this.i.add(String(h),E,!1,T,k)},It.prototype.K=function(h,E,T,k){return this.i.add(String(h),E,!0,T,k)};function nn(h,E,T,k){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();let K=!0;for(let X=0;X<E.length;++X){const ge=E[X];if(ge&&!ge.da&&ge.capture==T){const ze=ge.listener,Mt=ge.ha||ge.src;ge.fa&&he(h.i,ge),K=ze.call(Mt,k)!==!1&&K}}return K&&!k.defaultPrevented}function hi(h,E){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:l.setTimeout(h,E||0)}function xo(h){h.g=hi(()=>{h.g=null,h.i&&(h.i=!1,xo(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class Td extends O{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:xo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(h){O.call(this),this.h=h,this.g={}}y(fi,O);var gc=[];function Aa(h){ee(h.g,function(E,T){this.g.hasOwnProperty(T)&&Ue(E)},h),h.g={}}fi.prototype.N=function(){fi.Z.N.call(this),Aa(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pi=l.JSON.stringify,Id=l.JSON.parse,Co=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function mi(){}function xd(){}var gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pa(){M.call(this,"d")}y(Pa,M);function yc(){M.call(this,"c")}y(yc,M);var wr={},ka=null;function yi(){return ka=ka||new It}wr.Ia="serverreachability";function Na(h){M.call(this,wr.Ia,h)}y(Na,M);function xs(h){const E=yi();xt(E,new Na(E))}wr.STAT_EVENT="statevent";function Cs(h,E){M.call(this,wr.STAT_EVENT,h),this.stat=E}y(Cs,M);function At(h){const E=yi();xt(E,new Cs(E,h))}wr.Ja="timingevent";function _c(h,E){M.call(this,wr.Ja,h),this.size=E}y(_c,M);function _i(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},E)}function vi(){this.g=!0}vi.prototype.ua=function(){this.g=!1};function Cd(h,E,T,k,K,X){h.info(function(){if(h.g)if(X){var ge="",ze=X.split("&");for(let ct=0;ct<ze.length;ct++){var Mt=ze[ct].split("=");if(Mt.length>1){const Ft=Mt[0];Mt=Mt[1];const qn=Ft.split("_");ge=qn.length>=2&&qn[1]=="type"?ge+(Ft+"="+Mt+"&"):ge+(Ft+"=redacted&")}}}else ge=null;else ge=X;return"XMLHTTP REQ ("+k+") [attempt "+K+"]: "+E+`
`+T+`
`+ge})}function Rd(h,E,T,k,K,X,ge){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+K+"]: "+E+`
`+T+`
`+X+" "+ge})}function Br(h,E,T,k){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ro(h,T)+(k?" "+k:"")})}function bd(h,E){h.info(function(){return"TIMEOUT: "+E})}vi.prototype.info=function(){};function Ro(h,E){if(!h.g)return E;if(!E)return null;try{const X=JSON.parse(E);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var T=X[h];if(!(T.length<2)){var k=T[1];if(Array.isArray(k)&&!(k.length<1)){var K=k[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ge=1;ge<k.length;ge++)k[ge]=""}}}}return pi(X)}catch{return E}}var wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ei={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ad;function Rs(){}y(Rs,mi),Rs.prototype.g=function(){return new XMLHttpRequest},Ad=new Rs;function $r(h){return encodeURIComponent(String(h))}function Da(h){var E=1;h=h.split(":");const T=[];for(;E>0&&h.length;)T.push(h.shift()),E--;return h.length&&T.push(h.join(":")),T}function sr(h,E,T,k){this.j=h,this.i=E,this.l=T,this.S=k||1,this.V=new fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pd}function Pd(){this.i=null,this.g="",this.h=!1}var kd={},vc={};function Er(h,E,T){h.M=1,h.A=As(ir(E)),h.u=T,h.R=!0,wc(h,null)}function wc(h,E){h.F=Date.now(),bo(h),h.B=ir(h.A);var T=h.B,k=h.S;Array.isArray(k)||(k=[String(k)]),Pc(T.i,"t",k),h.C=0,T=h.j.L,h.h=new Pd,h.g=zd(h.j,T?E:null,!h.u),h.P>0&&(h.O=new Td(f(h.Y,h,h.g),h.P)),E=h.V,T=h.g,k=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(gc[0]=K.toString()),K=gc);for(let X=0;X<K.length;X++){const ge=ye(T,K[X],k||E.handleEvent,!1,E.h||E);if(!ge)break;E.g[ge.key]=ge}E=h.J?B(h.J):{},h.u?(h.v||(h.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,E)):(h.v="GET",h.g.ea(h.B,h.v,null,E)),xs(),Cd(h.i,h.v,h.B,h.l,h.S,h.u)}sr.prototype.ba=function(h){h=h.target;const E=this.O;E&&Yr(h)==3?E.j():this.Y(h)},sr.prototype.Y=function(h){try{if(h==this.g)e:{const ze=Yr(this.g),Mt=this.g.ya(),ct=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Fd(this.g)))){this.K||ze!=4||Mt==7||(Mt==8||ct<=0?xs(3):xs(2)),Oa(this);var E=this.g.ca();this.X=E;var T=Nd(this);if(this.o=E==200,Rd(this.i,this.v,this.B,this.l,this.S,ze,E),this.o){if(this.U&&!this.L){t:{if(this.g){var k,K=this.g;if((k=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(k)){var X=k;break t}}X=null}if(h=X)Br(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gt(this,h);else{this.o=!1,this.m=3,At(12),bs(this),Ao(this);break e}}if(this.R){h=!0;let Ft;for(;!this.K&&this.C<T.length;)if(Ft=Od(this,T),Ft==vc){ze==4&&(this.m=4,At(14),h=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==kd){this.m=4,At(15),Br(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Br(this.i,this.l,Ft,null),gt(this,Ft);if(Dd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||T.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)Br(this.i,this.l,T,"[Invalid Chunked Response]"),bs(this),Ao(this);else if(T.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),jo(ge),ge.P=!0,At(11))}}else Br(this.i,this.l,T,null),gt(this,T);ze==4&&bs(this),this.o&&!this.K&&(ze==4?Wa(this.j,this):(this.o=!1,bo(this)))}else Nc(this.g),E==400&&T.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),bs(this),Ao(this)}}}catch{}finally{}};function Nd(h){if(!Dd(h))return h.g.la();const E=Fd(h.g);if(E==="")return"";let T="";const k=E.length,K=Yr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return bs(h),Ao(h),"";h.h.i=new l.TextDecoder}for(let X=0;X<k;X++)h.h.h=!0,T+=h.h.i.decode(E[X],{stream:!(K&&X==k-1)});return E.length=0,h.h.g+=T,h.C=0,h.h.g}function Dd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Od(h,E){var T=h.C,k=E.indexOf(`
`,T);return k==-1?vc:(T=Number(E.substring(T,k)),isNaN(T)?kd:(k+=1,k+T>E.length?vc:(E=E.slice(k,k+T),h.C=k+T,E)))}sr.prototype.cancel=function(){this.K=!0,bs(this)};function bo(h){h.T=Date.now()+h.H,Ec(h,h.H)}function Ec(h,E){if(h.D!=null)throw Error("WatchDog timer not null");h.D=_i(f(h.aa,h),E)}function Oa(h){h.D&&(l.clearTimeout(h.D),h.D=null)}sr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(bd(this.i,this.B),this.M!=2&&(xs(),At(17)),bs(this),this.m=2,Ao(this)):Ec(this,this.T-h)};function Ao(h){h.j.I==0||h.K||Wa(h.j,h)}function bs(h){Oa(h);var E=h.O;E&&typeof E.dispose=="function"&&E.dispose(),h.O=null,Aa(h.V),h.g&&(E=h.g,h.g=null,E.abort(),E.dispose())}function gt(h,E){try{var T=h.j;if(T.I!=0&&(T.g==h||Tc(T.h,h))){if(!h.L&&Tc(T.h,h)&&T.I==3){try{var k=T.Ba.g.parse(E)}catch{k=null}if(Array.isArray(k)&&k.length==3){var K=k;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)$a(T),Hn(T);else break e;Zr(T),At(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=_i(f(T.Va,T),6e3));Po(T.h)<=1&&T.ta&&(T.ta=void 0)}else Gn(T,11)}else if((h.L||T.g==h)&&$a(T),!D(E))for(K=T.Ba.g.parse(E),E=0;E<K.length;E++){let ct=K[E];const Ft=ct[0];if(!(Ft<=T.K))if(T.K=Ft,ct=ct[1],T.I==2)if(ct[0]=="c"){T.M=ct[1],T.ba=ct[2];const qn=ct[3];qn!=null&&(T.ka=qn,T.j.info("VER="+T.ka));const Os=ct[4];Os!=null&&(T.za=Os,T.j.info("SVER="+T.za));const es=ct[5];es!=null&&typeof es=="number"&&es>0&&(k=1.5*es,T.O=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const ts=h.g;if(ts){const qa=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qa){var X=k.h;X.g||qa.indexOf("spdy")==-1&&qa.indexOf("quic")==-1&&qa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(La(X,X.h),X.h=null))}if(k.G){const Mc=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Mc&&(k.wa=Mc,it(k.J,k.G,Mc))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),k=T;var ge=h;if(k.na=Oc(k,k.L?k.ba:null,k.W),ge.L){ko(k.h,ge);var ze=ge,Mt=k.O;Mt&&(ze.H=Mt),ze.D&&(Oa(ze),bo(ze)),k.g=ge}else hn(k);T.i.length>0&&Ds(T)}else ct[0]!="stop"&&ct[0]!="close"||Gn(T,7);else T.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Gn(T,7):za(T):ct[0]!="noop"&&T.l&&T.l.qa(ct),T.A=0)}}xs(4)}catch{}}var Cm=class{constructor(h,E){this.g=h,this.map=E}};function Ma(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Po(h){return h.h?1:h.g?h.g.size:0}function Tc(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function La(h,E){h.g?h.g.add(E):h.h=E}function ko(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}Ma.prototype.cancel=function(){if(this.i=Bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Bn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const T of h.g.values())E=E.concat(T.G);return E}return I(h.i)}var Md=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $n(h,E){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const k=h[T].indexOf("=");let K,X=null;k>=0?(K=h[T].substring(0,k),X=h[T].substring(k+1)):K=h[T],E(K,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Wr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;h instanceof Wr?(this.l=h.l,No(this,h.j),this.o=h.o,this.g=h.g,Hr(this,h.u),this.h=h.h,Si(this,kc(h.i)),this.m=h.m):h&&(E=String(h).match(Md))?(this.l=!1,No(this,E[1]||"",!0),this.o=Do(E[2]||""),this.g=Do(E[3]||"",!0),Hr(this,E[4]),this.h=Do(E[5]||"",!0),Si(this,E[6]||"",!0),this.m=Do(E[7]||"")):(this.l=!1,this.i=new Xe(null,this.l))}Wr.prototype.toString=function(){const h=[];var E=this.j;E&&h.push(Oo(E,xc,!0),":");var T=this.g;return(T||E=="file")&&(h.push("//"),(E=this.o)&&h.push(Oo(E,xc,!0),"@"),h.push($r(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Oo(T,T.charAt(0)=="/"?Mo:Cc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Oo(T,Rc)),h.join("")},Wr.prototype.resolve=function(h){const E=ir(this);let T=!!h.j;T?No(E,h.j):T=!!h.o,T?E.o=h.o:T=!!h.g,T?E.g=h.g:T=h.u!=null;var k=h.h;if(T)Hr(E,h.u);else if(T=!!h.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var K=E.h.lastIndexOf("/");K!=-1&&(k=E.h.slice(0,K+1)+k)}if(K=k,K==".."||K==".")k="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){k=K.lastIndexOf("/",0)==0,K=K.split("/");const X=[];for(let ge=0;ge<K.length;){const ze=K[ge++];ze=="."?k&&ge==K.length&&X.push(""):ze==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),k&&ge==K.length&&X.push("")):(X.push(ze),k=!0)}k=X.join("/")}else k=K}return T?E.h=k:T=h.i.toString()!=="",T?Si(E,kc(h.i)):T=!!h.m,T&&(E.m=h.m),E};function ir(h){return new Wr(h)}function No(h,E,T){h.j=T?Do(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function Hr(h,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);h.u=E}else h.u=null}function Si(h,E,T){E instanceof Xe?(h.i=E,ja(h.i,h.l)):(T||(E=Oo(E,Rm)),h.i=new Xe(E,h.l))}function it(h,E,T){h.i.set(E,T)}function As(h){return it(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Do(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Oo(h,E,T){return typeof h=="string"?(h=encodeURI(h).replace(E,Ic),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ic(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var xc=/[#\/\?@]/g,Cc=/[#\?:]/g,Mo=/[#\?]/g,Rm=/[#\?@]/g,Rc=/#/g;function Xe(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Gr(h){h.g||(h.g=new Map,h.h=0,h.i&&$n(h.i,function(E,T){h.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}n=Xe.prototype,n.add=function(h,E){Gr(this),this.i=null,h=qr(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(E),this.h+=1,this};function bc(h,E){Gr(h),E=qr(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Va(h,E){return Gr(h),E=qr(h,E),h.g.has(E)}n.forEach=function(h,E){Gr(this),this.g.forEach(function(T,k){T.forEach(function(K){h.call(E,K,k,this)},this)},this)};function Ac(h,E){Gr(h);let T=[];if(typeof E=="string")Va(h,E)&&(T=T.concat(h.g.get(qr(h,E))));else for(h=Array.from(h.g.values()),E=0;E<h.length;E++)T=T.concat(h[E]);return T}n.set=function(h,E){return Gr(this),this.i=null,h=qr(this,h),Va(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=Ac(this,h),h.length>0?String(h[0]):E):E};function Pc(h,E,T){bc(h,E),T.length>0&&(h.i=null,h.g.set(qr(h,E),I(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(let k=0;k<E.length;k++){var T=E[k];const K=$r(T);T=Ac(this,T);for(let X=0;X<T.length;X++){let ge=K;T[X]!==""&&(ge+="="+$r(T[X])),h.push(ge)}}return this.i=h.join("&")};function kc(h){const E=new Xe;return E.i=h.i,h.g&&(E.g=new Map(h.g),E.h=h.h),E}function qr(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function ja(h,E){E&&!h.j&&(Gr(h),h.i=null,h.g.forEach(function(T,k){const K=k.toLowerCase();k!=K&&(bc(this,k),Pc(this,K,T))},h)),h.j=E}function Kr(h,E){const T=new vi;if(l.Image){const k=new Image;k.onload=m(rn,T,"TestLoadImage: loaded",!0,E,k),k.onerror=m(rn,T,"TestLoadImage: error",!1,E,k),k.onabort=m(rn,T,"TestLoadImage: abort",!1,E,k),k.ontimeout=m(rn,T,"TestLoadImage: timeout",!1,E,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else E(!1)}function Qr(h,E){const T=new vi,k=new AbortController,K=setTimeout(()=>{k.abort(),rn(T,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:k.signal}).then(X=>{clearTimeout(K),X.ok?rn(T,"TestPingServer: ok",!0,E):rn(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),rn(T,"TestPingServer: error",!1,E)})}function rn(h,E,T,k,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),k(T)}catch{}}function Lo(){this.g=new Co}function Ps(h){this.i=h.Sb||null,this.h=h.ab||!1}y(Ps,mi),Ps.prototype.g=function(){return new Wn(this.i,this.h)};function Wn(h,E){It.call(this),this.H=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Wn,It),n=Wn.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=E,this.readyState=1,Sr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(E.body=h),(this.H||l).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ld(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ld(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Ti(this):Sr(this),this.readyState==3&&Ld(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Ti(this))},n.Na=function(h){this.g&&(this.response=h,Ti(this))},n.ga=function(){this.g&&Ti(this)};function Ti(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Sr(h)}n.setRequestHeader=function(h,E){this.A.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=E.next();return h.join(`\r
`)};function Sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Wn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vd(h){let E="";return ee(h,function(T,k){E+=k,E+=":",E+=T,E+=`\r
`}),E}function Fa(h,E,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=Vd(T),typeof h=="string"?T!=null&&$r(T):it(h,E,T))}function dt(h){It.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(dt,It);var jd=/^https?$/i,bm=["POST","PUT"];n=dt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,E,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ad.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(X){Ii(this,X);return}if(h=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var K in k)T.set(K,k[K]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const X of k.keys())T.set(X,k.get(X));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(X=>X.toLowerCase()=="content-type"),K=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(bm,E,void 0)>=0)||k||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ge]of T)this.g.setRequestHeader(X,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){Ii(this,X)}};function Ii(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.o=5,xi(h),Ns(h)}function xi(h){h.A||(h.A=!0,xt(h,"complete"),xt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,xt(this,"complete"),xt(this,"abort"),Ns(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ns(this,!0)),dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ks(this):this.Xa())},n.Xa=function(){ks(this)};function ks(h){if(h.h&&typeof o<"u"){if(h.v&&Yr(h)==4)setTimeout(h.Ca.bind(h),0);else if(xt(h,"readystatechange"),Yr(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var T;if(!(T=E)){var k;if(k=X===0){let ge=String(h.D).match(Md)[1]||null;!ge&&l.self&&l.self.location&&(ge=l.self.location.protocol.slice(0,-1)),k=!jd.test(ge?ge.toLowerCase():"")}T=k}if(T)xt(h,"complete"),xt(h,"success");else{h.o=6;try{var K=Yr(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",xi(h)}}finally{Ns(h)}}}}function Ns(h,E){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,E||xt(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Yr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Yr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),Id(E)}};function Fd(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Nc(h){const E={};h=(h.g&&Yr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(D(h[k]))continue;var T=Da(h[k]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const X=E[K]||[];E[K]=X,X.push(T)}ue(E,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(h,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||E}function Ua(h){this.za=0,this.i=[],this.j=new vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xr("baseRetryDelayMs",5e3,h),this.Za=Xr("retryDelaySeedMs",1e4,h),this.Ta=Xr("forwardChannelMaxRetries",2,h),this.va=Xr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ma(h&&h.concurrentRequestLimit),this.Ba=new Lo,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ua.prototype,n.ka=8,n.I=1,n.connect=function(h,E,T,k){At(0),this.W=h,this.H=E||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.J=Oc(this,null,this.W),Ds(this)};function za(h){if(Ba(h),h.I==3){var E=h.V++,T=ir(h.J);if(it(T,"SID",h.M),it(T,"RID",E),it(T,"TYPE","terminate"),Jr(h,T),E=new sr(h,h.j,E),E.M=2,E.A=As(ir(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(E.A.toString(),"")}catch{}!T&&l.Image&&(new Image().src=E.A,T=!0),T||(E.g=zd(E.j,null),E.g.ea(E.A)),E.F=Date.now(),bo(E)}Fo(h)}function Hn(h){h.g&&(jo(h),h.g.cancel(),h.g=null)}function Ba(h){Hn(h),h.v&&(l.clearTimeout(h.v),h.v=null),$a(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function Ds(h){if(!Sc(h.h)&&!h.m){h.m=!0;var E=h.Ea;J||b(),Z||(J(),Z=!0),P.add(E,h),h.D=0}}function Ud(h,E){return Po(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=E.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=_i(f(h.Ea,h,E),Ha(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new sr(this,this.j,h);let X=this.o;if(this.U&&(X?(X=B(X),te(X,this.U)):X=this.U),this.u!==null||this.R||(K.J=X,X=null),this.S)e:{for(var E=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(E+=k,E>4096){E=T;break e}if(E===4096||T===this.i.length-1){E=T+1;break e}}E=1e3}else E=1e3;E=Dc(this,K,E),T=ir(this.J),it(T,"RID",h),it(T,"CVER",22),this.G&&it(T,"X-HTTP-Session-Id",this.G),Jr(this,T),X&&(this.R?E="headers="+$r(Vd(X))+"&"+E:this.u&&Fa(T,this.u,X)),La(this.h,K),this.Ra&&it(T,"TYPE","init"),this.S?(it(T,"$req",E),it(T,"SID","null"),K.U=!0,Er(K,T,null)):Er(K,T,E),this.I=2}}else this.I==3&&(h?Vo(this,h):this.i.length==0||Sc(this.h)||Vo(this))};function Vo(h,E){var T;E?T=E.l:T=h.V++;const k=ir(h.J);it(k,"SID",h.M),it(k,"RID",T),it(k,"AID",h.K),Jr(h,k),h.u&&h.o&&Fa(k,h.u,h.o),T=new sr(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),E&&(h.i=E.G.concat(h.i)),E=Dc(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),La(h.h,T),Er(T,k,E)}function Jr(h,E){h.H&&ee(h.H,function(T,k){it(E,k,T)}),h.l&&ee({},function(T,k){it(E,k,T)})}function Dc(h,E,T){T=Math.min(h.i.length,T);const k=h.l?f(h.l.Ka,h.l,h):null;e:{var K=h.i;let ze=-1;for(;;){const Mt=["count="+T];ze==-1?T>0?(ze=K[0].g,Mt.push("ofs="+ze)):ze=0:Mt.push("ofs="+ze);let ct=!0;for(let Ft=0;Ft<T;Ft++){var X=K[Ft].g;const qn=K[Ft].map;if(X-=ze,X<0)ze=Math.max(0,K[Ft].g-100),ct=!1;else try{X="req"+X+"_"||"";try{var ge=qn instanceof Map?qn:Object.entries(qn);for(const[Os,es]of ge){let ts=es;u(es)&&(ts=pi(es)),Mt.push(X+Os+"="+encodeURIComponent(ts))}}catch(Os){throw Mt.push(X+"type="+encodeURIComponent("_badmap")),Os}}catch{k&&k(qn)}}if(ct){ge=Mt.join("&");break e}}ge=void 0}return h=h.i.splice(0,T),E.G=h,ge}function hn(h){if(!h.g&&!h.v){h.Y=1;var E=h.Da;J||b(),Z||(J(),Z=!0),P.add(E,h),h.A=0}}function Zr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=_i(f(h.Da,h),Ha(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Ci(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=_i(f(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Hn(this),Ci(this))};function jo(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function Ci(h){h.g=new sr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var E=ir(h.na);it(E,"RID","rpc"),it(E,"SID",h.M),it(E,"AID",h.K),it(E,"CI",h.F?"0":"1"),!h.F&&h.ia&&it(E,"TO",h.ia),it(E,"TYPE","xmlhttp"),Jr(h,E),h.u&&h.o&&Fa(E,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=As(ir(E)),T.u=null,T.R=!0,wc(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Hn(this),Zr(this),At(19))};function $a(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Wa(h,E){var T=null;if(h.g==E){$a(h),jo(h),h.g=null;var k=2}else if(Tc(h.h,E))T=E.G,ko(h.h,E),k=1;else return;if(h.I!=0){if(E.o)if(k==1){T=E.u?E.u.length:0,E=Date.now()-E.F;var K=h.D;k=yi(),xt(k,new _c(k,T)),Ds(h)}else hn(h);else if(K=E.m,K==3||K==0&&E.X>0||!(k==1&&Ud(h,E)||k==2&&Zr(h)))switch(T&&T.length>0&&(E=h.h,E.i=E.i.concat(T)),K){case 1:Gn(h,5);break;case 4:Gn(h,10);break;case 3:Gn(h,6);break;default:Gn(h,2)}}}function Ha(h,E){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*E}function Gn(h,E){if(h.j.info("Error code "+E),E==2){var T=f(h.bb,h),k=h.Ua;const K=!k;k=new Wr(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||No(k,"https"),As(k),K?Kr(k.toString(),T):Qr(k.toString(),T)}else At(2);h.I=0,h.l&&h.l.pa(E),Fo(h),Ba(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Fo(h){if(h.I=0,h.ja=[],h.l){const E=Bn(h.h);(E.length!=0||h.i.length!=0)&&(A(h.ja,E),A(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Oc(h,E,T){var k=T instanceof Wr?ir(T):new Wr(T);if(k.g!="")E&&(k.g=E+"."+k.g),Hr(k,k.u);else{var K=l.location;k=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;const X=new Wr(null);k&&No(X,k),E&&(X.g=E),K&&Hr(X,K),T&&(X.h=T),k=X}return T=h.G,E=h.wa,T&&E&&it(k,T,E),it(k,"VER",h.ka),Jr(h,k),k}function zd(h,E,T){if(E&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Aa&&!h.ma?new dt(new Ps({ab:T})):new dt(h.ma),E.Fa(h.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bd(){}n=Bd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ga(){}Ga.prototype.g=function(h,E){return new sn(h,E)};function sn(h,E){It.call(this),this.g=new Ua(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(h?h["X-WebChannel-Client-Profile"]=E.sa:h={"X-WebChannel-Client-Profile":E.sa}),this.g.U=h,(h=E&&E.Qb)&&!D(h)&&(this.g.u=h),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new Ri(this)}y(sn,It),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){za(this.g)},sn.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=pi(h),h=T);E.i.push(new Cm(E.Ya++,h)),E.I==3&&Ds(E)},sn.prototype.N=function(){this.g.l=null,delete this.j,za(this.g),delete this.g,sn.Z.N.call(this)};function $d(h){Pa.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const T in E){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}y($d,Pa);function Wd(){yc.call(this),this.status=1}y(Wd,yc);function Ri(h){this.g=h}y(Ri,Bd),Ri.prototype.ra=function(){xt(this.g,"a")},Ri.prototype.qa=function(h){xt(this.g,new $d(h))},Ri.prototype.pa=function(h){xt(this.g,new Wd)},Ri.prototype.oa=function(){xt(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,AA=function(){return new Ga},bA=function(){return yi()},RA=wr,__={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,df=wi,Ei.COMPLETE="complete",CA=Ei,xd.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",It.prototype.listen=It.prototype.J,yu=xd,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,xA=dt}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});const q0="@firebase/firestore",K0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Up("@firebase/firestore");function wl(){return ga.logLevel}function Te(n,...e){if(ga.logLevel<=Ke.DEBUG){const t=e.map(Uv);ga.debug(`Firestore (${lc}): ${n}`,...t)}}function oi(n,...e){if(ga.logLevel<=Ke.ERROR){const t=e.map(Uv);ga.error(`Firestore (${lc}): ${n}`,...t)}}function Wl(n,...e){if(ga.logLevel<=Ke.WARN){const t=e.map(Uv);ga.warn(`Firestore (${lc}): ${n}`,...t)}}function Uv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,PA(n,r,t)}function PA(n,e,t){let r=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw oi(r),new Error(r)}function lt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||PA(e,s,r)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_n.UNAUTHENTICATED)))}shutdown(){}}class e6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class t6{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new no;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new no,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new no)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string",31837,{l:r}),new kA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class n6{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class r6{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new n6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){lt(this.o===void 0,3512);const r=o=>{o.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Te("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Q0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(lt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Q0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=i6(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function v_(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return Cy(s)===Cy(o)?Qe(s,o):Cy(s)?1:-1}return Qe(n.length,e.length)}const o6=55296,a6=57343;function Cy(n){const e=n.charCodeAt(0);return e>=o6&&e<=a6}function Hl(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="__name__";class os{constructor(e,t,r){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return os.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof os?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=os.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Qe(e.length,t.length)}static compareSegments(e,t){const r=os.isNumericId(e),s=os.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?os.extractNumericId(e).compare(os.extractNumericId(t)):v_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return to.fromString(e.substring(4,e.length-2))}}class pt extends os{construct(e,t,r){return new pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const l6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends os{construct(e,t,r){return new un(e,t,r)}static isValidIdentifier(e){return l6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y0}static keyField(){return new un([Y0])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new we(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new we(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new we(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(t)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(pt.fromString(e))}static fromName(e){return new Ne(pt.fromString(e).popFirst(5))}static empty(){return new Ne(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(n,e,t){if(!t)throw new we(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c6(n,e,t,r){if(e===!0&&r===!0)throw new we(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function X0(n){if(!Ne.isDocumentKey(n))throw new we(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function J0(n){if(Ne.isDocumentKey(n))throw new we(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function DA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function Or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qp(n);throw new we(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function ud(n,e){if(!DA(n))throw new we(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new we(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=-62135596800,eI=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*eI);return new Et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Z0)throw new we(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eI}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ud(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:$t("string",Et._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Et(0,0))}static max(){return new Fe(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=-1;function u6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new Et(t+1,0):new Et(t,r));return new co(s,Ne.empty(),e)}function d6(n){return new co(n.readTime,n.key,$u)}class co{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new co(Fe.min(),Ne.empty(),$u)}static max(){return new co(Fe.max(),Ne.empty(),$u)}}function h6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==f6)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>r(d)))})),l=!0,o===s&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((s=>s?ie.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next((m=>{l[f]=m,++u,u===o&&r(l)}),(m=>s(m)))}}))}static doWhile(e,t){return new ie(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function m6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function uc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=-1;function Qp(n){return n==null}function Qf(n){return n===0&&1/n==-1/0}function g6(n){return typeof n=="number"&&Number.isInteger(n)&&!Qf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="";function y6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tI(e)),e=_6(n.get(t),e);return tI(e)}function _6(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case OA:t+="";break;default:t+=o}}return t}function tI(n){return n+OA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??ln.RED,this.left=s??ln.EMPTY,this.right=o??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new ln(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ln.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rI(this.data.getIterator())}getIteratorFrom(e){return new rI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class rI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new tr([])}unionWith(e){let t=new Kt(un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new LA("Invalid base64 string: "+o):o}})(e);return new dn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const v6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(n){if(lt(!!n,39018),typeof n=="string"){let e=0;const t=v6.exec(n);if(lt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ho(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="server_timestamp",jA="__type__",FA="__previous_value__",UA="__local_write_time__";function $v(n){return(n?.mapValue?.fields||{})[jA]?.stringValue===VA}function Yp(n){const e=n.mapValue.fields[FA];return $v(e)?Yp(e):e}function Wu(n){const e=uo(n.mapValue.fields[UA].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t,r,s,o,l,u,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}}const Yf="(default)";class Hu{constructor(e,t){this.projectId=e,this.database=t||Yf}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database===Yf}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="__type__",E6="__max__",Jh={mapValue:{}},BA="__vector__",Xf="value";function fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$v(n)?4:T6(n)?9007199254740991:S6(n)?10:11:Le(28295,{value:n})}function ws(n,e){if(n===e)return!0;const t=fo(n);if(t!==fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wu(n).isEqual(Wu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=uo(s.timestampValue),u=uo(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ho(s.bytesValue).isEqual(ho(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Vt(s.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Vt(s.integerValue)===Vt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Vt(s.doubleValue),u=Vt(o.doubleValue);return l===u?Qf(l)===Qf(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return Hl(n.arrayValue.values||[],e.arrayValue.values||[],ws);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(nI(l)!==nI(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!ws(l[d],u[d])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function Gu(n,e){return(n.values||[]).find((t=>ws(t,e)))!==void 0}function Gl(n,e){if(n===e)return 0;const t=fo(n),r=fo(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Vt(o.integerValue||o.doubleValue),d=Vt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return sI(n.timestampValue,e.timestampValue);case 4:return sI(Wu(n),Wu(e));case 5:return v_(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=ho(o),d=ho(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const m=Qe(u[f],d[f]);if(m!==0)return m}return Qe(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Qe(Vt(o.latitude),Vt(l.latitude));return u!==0?u:Qe(Vt(o.longitude),Vt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return iI(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},f=u[Xf]?.arrayValue,m=d[Xf]?.arrayValue,y=Qe(f?.values?.length||0,m?.values?.length||0);return y!==0?y:iI(f,m)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Jh.mapValue&&l===Jh.mapValue)return 0;if(o===Jh.mapValue)return 1;if(l===Jh.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=l.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const v=v_(d[y],m[y]);if(v!==0)return v;const I=Gl(u[d[y]],f[m[y]]);if(I!==0)return I}return Qe(d.length,m.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function sI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=uo(n),r=uo(e),s=Qe(t.seconds,r.seconds);return s!==0?s:Qe(t.nanos,r.nanos)}function iI(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Gl(t[s],r[s]);if(o)return o}return Qe(t.length,r.length)}function ql(n){return w_(n)}function w_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=uo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ho(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=w_(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${w_(t.fields[l])}`;return s+"}"})(n.mapValue):Le(61005,{value:n})}function hf(n){switch(fo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yp(n);return e?16+hf(e):16;case 5:return 2*n.stringValue.length;case 6:return ho(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+hf(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return wo(r.fields,((o,l)=>{s+=o.length+hf(l)})),s})(n.mapValue);default:throw Le(13486,{value:n})}}function oI(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function E_(n){return!!n&&"integerValue"in n}function Wv(n){return!!n&&"arrayValue"in n}function aI(n){return!!n&&"nullValue"in n}function lI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ff(n){return!!n&&"mapValue"in n}function S6(n){return(n?.mapValue?.fields||{})[zA]?.stringValue===BA}function Pu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return wo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Pu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pu(n.arrayValue.values[t]);return e}return{...n}}function T6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===E6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=un.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=Pu(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ff(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){wo(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new zn(Pu(this.value))}}function $A(n){const e=[];return wo(n.fields,((t,r)=>{const s=new un([t]);if(ff(r)){const o=$A(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new En(e,0,Fe.min(),Fe.min(),Fe.min(),zn.empty(),0)}static newFoundDocument(e,t,r,s){return new En(e,1,t,Fe.min(),r,s,0)}static newNoDocument(e,t){return new En(e,2,t,Fe.min(),Fe.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,Fe.min(),Fe.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){this.position=e,this.inclusive=t}}function cI(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Ne.comparator(Ne.fromName(l.referenceValue),t.key):r=Gl(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ws(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function I6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{}class Bt extends WA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new C6(e,t,r):t==="array-contains"?new A6(e,r):t==="in"?new P6(e,r):t==="not-in"?new k6(e,r):t==="array-contains-any"?new N6(e,r):new Bt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new R6(e,r):new b6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gl(t,this.value)):t!==null&&fo(this.value)===fo(t)&&this.matchesComparison(Gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends WA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ur(e,t)}matches(e){return HA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function HA(n){return n.op==="and"}function GA(n){return x6(n)&&HA(n)}function x6(n){for(const e of n.filters)if(e instanceof Ur)return!1;return!0}function S_(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+ql(n.value);if(GA(n))return n.filters.map((e=>S_(e))).join(",");{const e=n.filters.map((t=>S_(t))).join(",");return`${n.op}(${e})`}}function qA(n,e){return n instanceof Bt?(function(r,s){return s instanceof Bt&&r.op===s.op&&r.field.isEqual(s.field)&&ws(r.value,s.value)})(n,e):n instanceof Ur?(function(r,s){return s instanceof Ur&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&qA(l,s.filters[u])),!0):!1})(n,e):void Le(19439)}function KA(n){return n instanceof Bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ql(t.value)}`})(n):n instanceof Ur?(function(t){return t.op.toString()+" {"+t.getFilters().map(KA).join(" ,")+"}"})(n):"Filter"}class C6 extends Bt{constructor(e,t,r){super(e,t,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class R6 extends Bt{constructor(e,t){super(e,"in",t),this.keys=QA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class b6 extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=QA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function QA(n,e){return(e.arrayValue?.values||[]).map((t=>Ne.fromName(t.referenceValue)))}class A6 extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wv(t)&&Gu(t.arrayValue,this.value)}}class P6 extends Bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gu(this.value.arrayValue,t)}}class k6 extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gu(this.value.arrayValue,t)}}class N6 extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Gu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function dI(n,e=null,t=[],r=[],s=null,o=null,l=null){return new D6(n,e,t,r,s,o,l)}function Hv(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>S_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Qp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ql(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ql(r))).join(",")),e.Te=t}return e.Te}function Gv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!I6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uI(n.startAt,e.startAt)&&uI(n.endAt,e.endAt)}function T_(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O6(n,e,t,r,s,o,l,u){return new dc(n,e,t,r,s,o,l,u)}function Xp(n){return new dc(n)}function hI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YA(n){return n.collectionGroup!==null}function ku(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Kt(un.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new qu(o,r))})),t.has(un.keyField().canonicalString())||e.Ie.push(new qu(un.keyField(),r))}return e.Ie}function fs(n){const e=Be(n);return e.Ee||(e.Ee=M6(e,ku(n))),e.Ee}function M6(n,e){if(n.limitType==="F")return dI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new qu(s.field,o)}));const t=n.endAt?new Jf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Jf(n.startAt.position,n.startAt.inclusive):null;return dI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function I_(n,e){const t=n.filters.concat([e]);return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zf(n,e,t){return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jp(n,e){return Gv(fs(n),fs(e))&&n.limitType===e.limitType}function XA(n){return`${Hv(fs(n))}|lt:${n.limitType}`}function El(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>KA(s))).join(", ")}]`),Qp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>ql(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>ql(s))).join(",")),`Target(${r})`})(fs(n))}; limitType=${n.limitType})`}function Zp(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of ku(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const f=cI(l,u,d);return l.inclusive?f<=0:f<0})(r.startAt,ku(r),s)||r.endAt&&!(function(l,u,d){const f=cI(l,u,d);return l.inclusive?f>=0:f>0})(r.endAt,ku(r),s))})(n,e)}function L6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JA(n){return(e,t)=>{let r=!1;for(const s of ku(n)){const o=V6(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function V6(n,e,t){const r=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Gl(d,f):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return MA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=new bt(Ne.comparator);function ai(){return j6}const ZA=new bt(Ne.comparator);function _u(...n){let e=ZA;for(const t of n)e=e.insert(t.key,t);return e}function eP(n){let e=ZA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function sa(){return Nu()}function tP(){return Nu()}function Nu(){return new xa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const F6=new bt(Ne.comparator),U6=new Kt(Ne.comparator);function Ye(...n){let e=U6;for(const t of n)e=e.add(t);return e}const z6=new Kt(Qe);function B6(){return z6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qf(e)?"-0":e}}function nP(n){return{integerValue:""+n}}function $6(n,e){return g6(e)?nP(e):qv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this._=void 0}}function W6(n,e,t){return n instanceof Ku?(function(s,o){const l={fields:{[jA]:{stringValue:VA},[UA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&$v(o)&&(o=Yp(o)),o&&(l.fields[FA]=o),{mapValue:l}})(t,e):n instanceof Kl?sP(n,e):n instanceof Qu?iP(n,e):(function(s,o){const l=rP(s,o),u=fI(l)+fI(s.Ae);return E_(l)&&E_(s.Ae)?nP(u):qv(s.serializer,u)})(n,e)}function H6(n,e,t){return n instanceof Kl?sP(n,e):n instanceof Qu?iP(n,e):t}function rP(n,e){return n instanceof ep?(function(r){return E_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Ku extends em{}class Kl extends em{constructor(e){super(),this.elements=e}}function sP(n,e){const t=oP(e);for(const r of n.elements)t.some((s=>ws(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Qu extends em{constructor(e){super(),this.elements=e}}function iP(n,e){let t=oP(e);for(const r of n.elements)t=t.filter((s=>!ws(s,r)));return{arrayValue:{values:t}}}class ep extends em{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function fI(n){return Vt(n.integerValue||n.doubleValue)}function oP(n){return Wv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t){this.field=e,this.transform=t}}function G6(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Kl&&s instanceof Kl||r instanceof Qu&&s instanceof Qu?Hl(r.elements,s.elements,ws):r instanceof ep&&s instanceof ep?ws(r.Ae,s.Ae):r instanceof Ku&&s instanceof Ku})(n.transform,e.transform)}class q6{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tm{}function lP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uP(n.key,Mr.none()):new dd(n.key,n.data,Mr.none());{const t=n.data,r=zn.empty();let s=new Kt(un.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Eo(n.key,r,new tr(s.toArray()),Mr.none())}}function K6(n,e,t){n instanceof dd?(function(s,o,l){const u=s.value.clone(),d=mI(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Eo?(function(s,o,l){if(!pf(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=mI(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(cP(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Du(n,e,t,r){return n instanceof dd?(function(o,l,u,d){if(!pf(o.precondition,l))return u;const f=o.value.clone(),m=gI(o.fieldTransforms,d,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Eo?(function(o,l,u,d){if(!pf(o.precondition,l))return u;const f=gI(o.fieldTransforms,d,l),m=l.data;return m.setAll(cP(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,l,u){return pf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function Q6(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=rP(r.transform,s||null);o!=null&&(t===null&&(t=zn.empty()),t.set(r.field,o))}return t||null}function pI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Hl(r,s,((o,l)=>G6(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class dd extends tm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Eo extends tm{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function cP(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function mI(n,e,t){const r=new Map;lt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,H6(l,u,t[s]))}return r}function gI(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,W6(o,l,e))}return r}class uP extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y6 extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&K6(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tP();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=lP(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Fe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,((t,r)=>pI(t,r)))&&Hl(this.baseMutations,e.baseMutations,((t,r)=>pI(t,r)))}}class Kv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){lt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return F6})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new Kv(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J6=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,Ze;function e5(n){switch(n){case re.OK:return Le(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function dP(n){if(n===void 0)return oi("GRPC error has no .code"),re.UNKNOWN;switch(n){case zt.OK:return re.OK;case zt.CANCELLED:return re.CANCELLED;case zt.UNKNOWN:return re.UNKNOWN;case zt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case zt.INTERNAL:return re.INTERNAL;case zt.UNAVAILABLE:return re.UNAVAILABLE;case zt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case zt.NOT_FOUND:return re.NOT_FOUND;case zt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case zt.ABORTED:return re.ABORTED;case zt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case zt.DATA_LOSS:return re.DATA_LOSS;default:return Le(39323,{code:n})}}(Ze=zt||(zt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=new to([4294967295,4294967295],0);function yI(n){const e=t5().encode(n),t=new IA;return t.update(e),new Uint8Array(t.digest())}function _I(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new to([t,r],0),new to([s,o],0)]}class Qv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vu(`Invalid padding: ${t}`);if(r<0)throw new vu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=to.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(to.fromNumber(r)));return s.compare(n5)===1&&(s=new to([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=yI(e),[r,s]=_I(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Qv(o,s,t);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=yI(e),[r,s]=_I(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,hd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nm(Fe.min(),s,new bt(Qe),ai(),Ye())}}class hd{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hd(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class hP{constructor(e,t){this.targetId=e,this.Ce=t}}class fP{constructor(e,t,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class vI{constructor(){this.ve=0,this.Fe=wI(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),r=Ye();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Le(38017,{changeType:o})}})),new hd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=wI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class r5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ai(),this.Je=Zh(),this.He=Zh(),this.Ye=new bt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(T_(o))if(r===0){const l=new Ne(o.path);this.et(t,l,En.newNoDocument(l,Fe.min()))}else lt(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=ho(r).toUint8Array()}catch(d){if(d instanceof LA)return Wl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Qv(l,s,o)}catch(d){return Wl(d instanceof vu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&T_(u.target)){const d=new Ne(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,En.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Ye();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new nm(e,t,this.Ye,this.je,r);return this.je=ai(),this.Je=Zh(),this.He=Zh(),this.Ye=new bt(Qe),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new vI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kt(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kt(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zh(){return new bt(Ne.comparator)}function wI(){return new bt(Ne.comparator)}const s5={asc:"ASCENDING",desc:"DESCENDING"},i5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o5={and:"AND",or:"OR"};class a5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function x_(n,e){return n.useProto3Json||Qp(e)?e:{value:e}}function tp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function l5(n,e){return tp(n,e.toTimestamp())}function ps(n){return lt(!!n,49232),Fe.fromTimestamp((function(t){const r=uo(t);return new Et(r.seconds,r.nanos)})(n))}function Yv(n,e){return C_(n,e).canonicalString()}function C_(n,e){const t=(function(s){return new pt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mP(n){const e=pt.fromString(n);return lt(wP(e),10190,{key:e.toString()}),e}function R_(n,e){return Yv(n.databaseId,e.path)}function Ry(n,e){const t=mP(e);if(t.get(1)!==n.databaseId.projectId)throw new we(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(yP(t))}function gP(n,e){return Yv(n.databaseId,e)}function c5(n){const e=mP(n);return e.length===4?pt.emptyPath():yP(e)}function b_(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yP(n){return lt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function EI(n,e,t){return{name:R_(n,e),fields:t.value.mapValue.fields}}function u5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Le(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,m){return f.useProto3Json?(lt(m===void 0||typeof m=="string",58123),dn.fromBase64String(m||"")):(lt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),dn.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const m=f.code===void 0?re.UNKNOWN:dP(f.code);return new we(m,f.message||"")})(l);t=new fP(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ry(n,r.document.name),o=ps(r.document.updateTime),l=r.document.createTime?ps(r.document.createTime):Fe.min(),u=new zn({mapValue:{fields:r.document.fields}}),d=En.newFoundDocument(s,o,l,u),f=r.targetIds||[],m=r.removedTargetIds||[];t=new mf(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ry(n,r.document),o=r.readTime?ps(r.readTime):Fe.min(),l=En.newNoDocument(s,o),u=r.removedTargetIds||[];t=new mf([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ry(n,r.document),o=r.removedTargetIds||[];t=new mf([],o,s,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new Z6(s,o),u=r.targetId;t=new hP(u,l)}}return t}function d5(n,e){let t;if(e instanceof dd)t={update:EI(n,e.key,e.value)};else if(e instanceof uP)t={delete:R_(n,e.key)};else if(e instanceof Eo)t={update:EI(n,e.key,e.data),updateMask:w5(e.fieldMask)};else{if(!(e instanceof Y6))return Le(16599,{Vt:e.type});t={verify:R_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof Ku)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Kl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ep)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw Le(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:l5(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Le(27497)})(n,e.precondition)),t}function h5(n,e){return n&&n.length>0?(lt(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?ps(s.updateTime):ps(o);return l.isEqual(Fe.min())&&(l=ps(o)),new q6(l,s.transformResults||[])})(t,e)))):[]}function f5(n,e){return{documents:[gP(n,e.path)]}}function p5(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gP(n,s);const o=(function(f){if(f.length!==0)return vP(Ur.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((m=>(function(v){return{field:Sl(v.field),direction:y5(v.dir)}})(m)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=x_(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function m5(n){let e=c5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){lt(r===1,65062);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){const v=_P(y);return v instanceof Ur&&GA(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((v=>(function(A){return new qu(Tl(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let v;return v=typeof y=="object"?y.value:y,Qp(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,I=y.values||[];return new Jf(I,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const v=!y.before,I=y.values||[];return new Jf(I,v)})(t.endAt)),O6(e,s,l,o,u,"F",d,f)}function g5(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _P(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Tl(t.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Tl(t.unaryFilter.field);return Bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Tl(t.unaryFilter.field);return Bt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Tl(t.unaryFilter.field);return Bt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Bt.create(Tl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ur.create(t.compositeFilter.filters.map((r=>_P(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function y5(n){return s5[n]}function _5(n){return i5[n]}function v5(n){return o5[n]}function Sl(n){return{fieldPath:n.canonicalString()}}function Tl(n){return un.fromServerFormat(n.fieldPath)}function vP(n){return n instanceof Bt?(function(t){if(t.op==="=="){if(lI(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NAN"}};if(aI(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lI(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NOT_NAN"}};if(aI(t.value))return{unaryFilter:{field:Sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sl(t.field),op:_5(t.op),value:t.value}}})(n):n instanceof Ur?(function(t){const r=t.getFilters().map((s=>vP(s)));return r.length===1?r[0]:{compositeFilter:{op:v5(t.op),filters:r}}})(n):Le(54877,{filter:n})}function w5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function wP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,r,s,o=Fe.min(),l=Fe.min(),u=dn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.yt=e}}function S5(n){const e=m5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this.Cn=new I5}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(co.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(co.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class I5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Kt(pt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Kt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EP=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(EP,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ql(0)}static cr(){return new Ql(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="LruGarbageCollector",x5=1048576;function II([n,e],[t,r]){const s=Qe(n,t);return s===0?Qe(e,r):s}class C5{constructor(e){this.Ir=e,this.buffer=new Kt(II),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();II(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class R5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(TI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){uc(t)?Te(TI,"Ignoring IndexedDB error during garbage collection: ",t):await cc(t)}await this.Vr(3e5)}))}}class b5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Kp.ce);const r=new C5(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(SI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,l,u,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),wl()<=Ke.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function A5(n,e){return new b5(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this.changes=new xa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Du(r.mutation,s,tr.empty(),Et.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const s=sa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=_u();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=sa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,r,s){let o=ai();const l=Nu(),u=(function(){return Nu()})();return t.forEach(((d,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Eo)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),Du(m.mutation,f,m.mutation.getFieldMask(),Et.now())):l.set(f.key,tr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,m)=>l.set(f,m))),t.forEach(((f,m)=>u.set(f,new k5(m,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Nu();let s=new bt(((l,u)=>l-u)),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let m=r.get(d)||tr.empty();m=u.applyToLocalView(f,m),r.set(d,m);const y=(s.get(u.batchId)||Ye()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,m=d.value,y=tP();m.forEach((v=>{if(!o.has(v)){const I=lP(t.get(v),r.get(v));I!==null&&y.set(v,I),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ie.resolve(sa());let u=$u,d=o;return l.next((f=>ie.forEach(f,((m,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(m)?ie.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{d=d.insert(m,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,Ye()))).next((m=>({batchId:u,changes:eP(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((r=>{let s=_u();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=_u();return this.indexManager.getCollectionParents(e,o).next((u=>ie.forEach(u,(d=>{const f=(function(y,v){return new dc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((m=>{m.forEach(((y,v)=>{l=l.insert(y,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((d,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,En.newInvalidDocument(m)))}));let u=_u();return l.forEach(((d,f)=>{const m=o.get(d);m!==void 0&&Du(m.mutation,f,tr.empty(),Et.now()),Zp(t,f)&&(u=u.insert(d,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ps(s.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:S5(s.bundledQuery),readTime:ps(s.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.overlays=new bt(Ne.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=sa();return ie.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=sa(),o=t.length+1,l=new Ne(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new bt(((f,m)=>f-m));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=sa(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=sa(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,m)=>u.set(f,m))),!(u.size()>=s)););return ie.resolve(u)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new J6(t,r));let o=this.qr.get(t);o===void 0&&(o=Ye(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.Qr=new Kt(Zt.$r),this.Ur=new Kt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Zt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ne(new pt([])),r=new Zt(t,e),s=new Zt(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new pt([])),r=new Zt(t,e),s=new Zt(t,e+1);let o=Ye();return this.Ur.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Zt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Zt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new X6(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new Zt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Bv:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zt(t,0),s=new Zt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kt(Qe);return t.forEach((s=>{const o=new Zt(s,0),l=new Zt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{r=r.add(u.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const l=new Zt(new Ne(o),0);let u=new Kt(Qe);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),l),ie.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){lt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(s=>{const o=new Zt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Zt(t,0),s=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.ri=e,this.docs=(function(){return new bt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=ai();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():En.newInvalidDocument(s))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=ai();const l=t.path,u=new Ne(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||h6(d6(m),r)<=0||(s.has(m.key)||Zp(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Le(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new j5(this)}getSize(e){return ie.resolve(this.size)}}class j5 extends P5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.persistence=e,this.si=new xa((t=>Hv(t)),Gv),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new Xv,this.targetCount=0,this.ai=Ql.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ql(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),ie.waitFor(o).next((()=>s))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,t){this.ui={},this.overlays={},this.ci=new Kp(0),this.li=!1,this.li=!0,this.hi=new M5,this.referenceDelegate=e(this),this.Pi=new F5(this),this.indexManager=new T5,this.remoteDocumentCache=(function(s){return new V5(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new E5(t),this.Ii=new D5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new L5(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const s=new U5(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class U5 extends p6{constructor(e){super(),this.currentSequenceNumber=e}}class Jv{constructor(e){this.persistence=e,this.Ri=new Xv,this.Vi=null}static mi(e){return new Jv(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const s=Ne.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class np{constructor(e,t){this.persistence=e,this.pi=new xa((r=>y6(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=A5(this,t)}static mi(e,t){return new np(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?ie.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((u=>{u||(r++,o.removeEntry(l,Fe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hf(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ie.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ye(),s=Ye();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Zv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return bj()?8:m6(Tn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new z5;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(wl()<=Ke.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",El(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(wl()<=Ke.DEBUG&&Te("QueryEngine","Query:",El(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(wl()<=Ke.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",El(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fs(t))):ie.resolve())}ys(e,t){if(hI(t))return ie.resolve(null);let r=fs(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Zf(t,null,"F"),r=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ye(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const f=this.Ds(t,u);return this.Cs(t,f,l,d.readTime)?this.ys(e,Zf(t,null,"F")):this.vs(e,f,t,d)}))))})))))}ws(e,t,r,s){return hI(t)||s.isEqual(Fe.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,s)?ie.resolve(null):(wl()<=Ke.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),El(t)),this.vs(e,l,t,u6(s,$u)).next((u=>u)))}))}Ds(e,t){let r=new Kt(JA(e));return t.forEach(((s,o)=>{Zp(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return wl()<=Ke.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",El(t)),this.ps.getDocumentsMatchingQuery(e,t,co.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="LocalStore",$5=3e8;class W5{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new bt(Qe),this.xs=new xa((o=>Hv(o)),Gv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function H5(n,e,t,r){return new W5(n,e,t,r)}async function TP(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Ye();for(const f of s){l.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function G5(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,m){const y=f.batch,v=y.keys();let I=ie.resolve();return v.forEach((A=>{I=I.next((()=>m.getEntry(d,A))).next((x=>{const R=f.docVersions.get(A);lt(R!==null,48541),x.version.compareTo(R)<0&&(y.applyToRemoteDocument(x,f),x.isValidDocument()&&(x.setReadTime(f.commitVersion),m.addEntry(x)))}))})),I.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Ye();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function IP(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function q5(n,e){const t=Be(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((m,y)=>{const v=s.get(y);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,m.addedDocuments,y))));let I=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?I=I.withResumeToken(dn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),s=s.insert(y,I),(function(x,R,j){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=$5?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(v,I,m)&&u.push(t.Pi.updateTargetData(o,I))}));let d=ai(),f=Ye();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),u.push(K5(o,l,e.documentUpdates).next((m=>{d=m.ks,f=m.qs}))),!r.isEqual(Fe.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(m)}return ie.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function K5(n,e,t){let r=Ye(),s=Ye();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=ai();return t.forEach(((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Fe.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):Te(ew,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function Q5(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Bv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Y5(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,ie.resolve(s)):t.Pi.allocateTargetId(r).next((l=>(s=new Xi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function A_(n,e,t){const r=Be(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!uc(l))throw l;Te(ew,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function xI(n,e,t){const r=Be(n);let s=Fe.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,m){const y=Be(d),v=y.xs.get(m);return v!==void 0?ie.resolve(y.Ms.get(v)):y.Pi.getTargetData(f,m)})(r,l,fs(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?s:Fe.min(),t?o:Ye()))).next((u=>(X5(r,L6(e),u),{documents:u,Qs:o})))))}function X5(n,e,t){let r=n.Os.get(e)||Fe.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class CI{constructor(){this.activeTargetIds=B6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J5{constructor(){this.Mo=new CI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new CI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="ConnectivityMonitor";class bI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(RI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(RI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function P_(){return ef===null?ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="RestConnection",e9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Yf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const l=P_(),u=this.zo(e,t.toUriEncodedString());Te(by,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:f}=new URL(u),m=Ts(f);return this.Jo(e,u,d,r,m).then((y=>(Te(by,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw Wl(by,`RPC '${e}' ${l} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,t,r,s,o,l){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+lc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=e9[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class r9 extends t9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const l=P_();return new Promise(((u,d)=>{const f=new xA;f.setWithCredentials(!0),f.listenOnce(CA.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case df.NO_ERROR:const y=f.getResponseJson();Te(yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),u(y);break;case df.TIMEOUT:Te(yn,`RPC '${e}' ${l} timed out`),d(new we(re.DEADLINE_EXCEEDED,"Request time out"));break;case df.HTTP_ERROR:const v=f.getStatus();if(Te(yn,`RPC '${e}' ${l} failed with status:`,v,"response text:",f.getResponseText()),v>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const A=I?.error;if(A&&A.status&&A.message){const x=(function(j){const V=j.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(V)>=0?V:re.UNKNOWN})(A.status);d(new we(x,A.message))}else d(new we(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new we(re.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Te(yn,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(s);Te(yn,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",m,r,15)}))}T_(e,t,r){const s=P_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=AA(),u=bA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");Te(yn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const y=l.createWebChannel(m,d);this.I_(y);let v=!1,I=!1;const A=new n9({Yo:R=>{I?Te(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(v||(Te(yn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),Te(yn,`RPC '${e}' stream ${s} sending:`,R),y.send(R))},Zo:()=>y.close()}),x=(R,j,V)=>{R.listen(j,(z=>{try{V(z)}catch(H){setTimeout((()=>{throw H}),0)}}))};return x(y,yu.EventType.OPEN,(()=>{I||(Te(yn,`RPC '${e}' stream ${s} transport opened.`),A.o_())})),x(y,yu.EventType.CLOSE,(()=>{I||(I=!0,Te(yn,`RPC '${e}' stream ${s} transport closed`),A.a_(),this.E_(y))})),x(y,yu.EventType.ERROR,(R=>{I||(I=!0,Wl(yn,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),A.a_(new we(re.UNAVAILABLE,"The operation could not be completed")))})),x(y,yu.EventType.MESSAGE,(R=>{if(!I){const j=R.data[0];lt(!!j,16349);const V=j,z=V?.error||V[0]?.error;if(z){Te(yn,`RPC '${e}' stream ${s} received error:`,z);const H=z.status;let J=(function(b){const N=zt[b];if(N!==void 0)return dP(N)})(H),Z=z.message;J===void 0&&(J=re.INTERNAL,Z="Unknown error status: "+H+" with message "+z.message),I=!0,A.a_(new we(J,Z)),y.close()}else Te(yn,`RPC '${e}' stream ${s} received:`,j),A.u_(j)}})),x(u,RA.STAT_EVENT,(R=>{R.stat===__.PROXY?Te(yn,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===__.NOPROXY&&Te(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ay(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(n){return new a5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="PersistentStream";class CP{constructor(e,t,r,s,o,l,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xP(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(oi(t.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new we(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(AI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(AI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class s9 extends CP{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=u5(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Fe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Fe.min():l.readTime?ps(l.readTime):Fe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=b_(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=T_(d)?{documents:f5(o,d)}:{query:p5(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=pP(o,l.resumeToken);const f=x_(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(Fe.min())>0){u.readTime=tp(o,l.snapshotVersion.toTimestamp());const f=x_(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=g5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=b_(this.serializer),t.removeTarget=e,this.q_(t)}}class i9 extends CP{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=h5(e.writeResults,e.commitTime),r=ps(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=b_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>d5(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{}class a9 extends o9{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new we(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,C_(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(re.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,C_(t,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(re.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class l9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oi(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class c9{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Ca(this)&&(Te(ya,"Restarting streams for network reachability change."),await(async function(d){const f=Be(d);f.Ea.add(4),await fd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await sm(f)})(this))}))})),this.Ra=new l9(r,s)}}async function sm(n){if(Ca(n))for(const e of n.da)await e(!0)}async function fd(n){for(const e of n.da)await e(!1)}function RP(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sw(t)?rw(t):hc(t).O_()&&nw(t,e))}function tw(n,e){const t=Be(n),r=hc(t);t.Ia.delete(e),r.O_()&&bP(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ca(t)&&t.Ra.set("Unknown"))}function nw(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hc(n).Y_(e)}function bP(n,e){n.Va.Ue(e),hc(n).Z_(e)}function rw(n){n.Va=new r5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),hc(n).start(),n.Ra.ua()}function sw(n){return Ca(n)&&!hc(n).x_()&&n.Ia.size>0}function Ca(n){return Be(n).Ea.size===0}function AP(n){n.Va=void 0}async function u9(n){n.Ra.set("Online")}async function d9(n){n.Ia.forEach(((e,t)=>{nw(n,e)}))}async function h9(n,e){AP(n),sw(n)?(n.Ra.ha(e),rw(n)):n.Ra.set("Unknown")}async function f9(n,e,t){if(n.Ra.set("Online"),e instanceof fP&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(r){Te(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rp(n,r)}else if(e instanceof mf?n.Va.Ze(e):e instanceof hP?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const r=await IP(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,f)=>{const m=o.Ia.get(d);if(!m)return;o.Ia.set(d,m.withResumeToken(dn.EMPTY_BYTE_STRING,m.snapshotVersion)),bP(o,d);const y=new Xi(m.target,d,f,m.sequenceNumber);nw(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){Te(ya,"Failed to raise snapshot:",r),await rp(n,r)}}async function rp(n,e,t){if(!uc(e))throw e;n.Ea.add(1),await fd(n),n.Ra.set("Offline"),t||(t=()=>IP(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(ya,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await sm(n)}))}function PP(n,e){return e().catch((t=>rp(n,t,e)))}async function im(n){const e=Be(n),t=po(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bv;for(;p9(e);)try{const s=await Q5(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,m9(e,s)}catch(s){await rp(e,s)}kP(e)&&NP(e)}function p9(n){return Ca(n)&&n.Ta.length<10}function m9(n,e){n.Ta.push(e);const t=po(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kP(n){return Ca(n)&&!po(n).x_()&&n.Ta.length>0}function NP(n){po(n).start()}async function g9(n){po(n).ra()}async function y9(n){const e=po(n);for(const t of n.Ta)e.ea(t.mutations)}async function _9(n,e,t){const r=n.Ta.shift(),s=Kv.from(r,e,t);await PP(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await im(n)}async function v9(n,e){e&&po(n).X_&&await(async function(r,s){if((function(l){return e5(l)&&l!==re.ABORTED})(s.code)){const o=r.Ta.shift();po(r).B_(),await PP(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await im(r)}})(n,e),kP(n)&&NP(n)}async function PI(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Te(ya,"RemoteStore received new credentials");const r=Ca(t);t.Ea.add(3),await fd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await sm(t)}async function w9(n,e){const t=Be(n);e?(t.Ea.delete(2),await sm(t)):e||(t.Ea.add(2),await fd(t),t.Ra.set("Unknown"))}function hc(n){return n.ma||(n.ma=(function(t,r,s){const o=Be(t);return o.sa(),new s9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:u9.bind(null,n),t_:d9.bind(null,n),r_:h9.bind(null,n),H_:f9.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),sw(n)?rw(n):n.Ra.set("Unknown")):(await n.ma.stop(),AP(n))}))),n.ma}function po(n){return n.fa||(n.fa=(function(t,r,s){const o=Be(t);return o.sa(),new i9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:g9.bind(null,n),r_:v9.bind(null,n),ta:y9.bind(null,n),na:_9.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await im(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(ya,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new iw(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ow(n,e){if(oi("AsyncQueue",`${e}: ${n}`),uc(n))return new we(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{static emptySet(e){return new Nl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ne.comparator(t.key,r.key):(t,r)=>Ne.comparator(t.key,r.key),this.keyedMap=_u(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.ga=new bt(Ne.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Yl{constructor(e,t,r,s,o,l,u,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Yl(e,t,Nl.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class S9{constructor(){this.queries=NI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Be(t),o=s.queries;s.queries=NI(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new we(re.ABORTED,"Firestore shutting down"))}}function NI(){return new xa((n=>XA(n)),Jp)}async function DP(n,e){const t=Be(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new E9,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=ow(l,`Initialization of query '${El(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&aw(t)}async function OP(n,e){const t=Be(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function T9(n,e){const t=Be(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(r=!0);l.wa=s}}r&&aw(t)}function I9(n,e,t){const r=Be(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function aw(n){n.Ca.forEach((e=>{e.next()}))}var k_,DI;(DI=k_||(k_={})).Ma="default",DI.Cache="cache";class MP{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==k_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.key=e}}class VP{constructor(e){this.key=e}}class x9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=JA(e),this.tu=new Nl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new kI,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,y)=>{const v=s.get(m),I=Zp(this.query,y)?y:null,A=!!v&&this.mutatedKeys.has(v.key),x=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let R=!1;v&&I?v.data.isEqual(I.data)?A!==x&&(r.track({type:3,doc:I}),R=!0):this.su(v,I)||(r.track({type:2,doc:I}),R=!0,(d&&this.eu(I,d)>0||f&&this.eu(I,f)<0)&&(u=!0)):!v&&I?(r.track({type:0,doc:I}),R=!0):v&&!I&&(r.track({type:1,doc:v}),R=!0,(d||f)&&(u=!0)),R&&(I?(l=l.add(I),o=x?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,y)=>(function(I,A){const x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:R})}};return x(I)-x(A)})(m.type,y.type)||this.eu(m.doc,y.doc))),this.ou(r),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new Yl(this.query,e.tu,o,l,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new VP(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new LP(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lw="SyncEngine";class C9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class R9{constructor(e){this.key=e,this.hu=!1}}class b9{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new xa((u=>XA(u)),Jp),this.Iu=new Map,this.Eu=new Set,this.du=new bt(Ne.comparator),this.Au=new Map,this.Ru=new Xv,this.Vu={},this.mu=new Map,this.fu=Ql.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function A9(n,e,t=!0){const r=$P(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await jP(r,e,t,!0),s}async function P9(n,e){const t=$P(n);await jP(t,e,!0,!1)}async function jP(n,e,t,r){const s=await Y5(n.localStore,fs(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await k9(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&RP(n.remoteStore,s),u}async function k9(n,e,t,r,s){n.pu=(y,v,I)=>(async function(x,R,j,V){let z=R.view.ru(j);z.Cs&&(z=await xI(x.localStore,R.query,!1).then((({documents:P})=>R.view.ru(P,z))));const H=V&&V.targetChanges.get(R.targetId),J=V&&V.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(z,x.isPrimaryClient,H,J);return MI(x,R.targetId,Z.au),Z.snapshot})(n,y,v,I);const o=await xI(n.localStore,e,!0),l=new x9(e,o.Qs),u=l.ru(o.documents),d=hd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,d);MI(n,t,f.au);const m=new C9(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function N9(n,e,t){const r=Be(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!Jp(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await A_(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&tw(r.remoteStore,s.targetId),N_(r,s.targetId)})).catch(cc)):(N_(r,s.targetId),await A_(r.localStore,s.targetId,!0))}async function D9(n,e){const t=Be(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tw(t.remoteStore,r.targetId))}async function O9(n,e,t){const r=z9(n);try{const s=await(function(l,u){const d=Be(l),f=Et.now(),m=u.reduce(((I,A)=>I.add(A.key)),Ye());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let A=ai(),x=Ye();return d.Ns.getEntries(I,m).next((R=>{A=R,A.forEach(((j,V)=>{V.isValidDocument()||(x=x.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(I,A))).next((R=>{y=R;const j=[];for(const V of u){const z=Q6(V,y.get(V.key).overlayedDocument);z!=null&&j.push(new Eo(V.key,z,$A(z.value.mapValue),Mr.exists(!0)))}return d.mutationQueue.addMutationBatch(I,f,j,u)})).next((R=>{v=R;const j=R.applyToLocalDocumentSet(y,x);return d.documentOverlayCache.saveOverlays(I,R.batchId,j)}))})).then((()=>({batchId:v.batchId,changes:eP(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new bt(Qe)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f})(r,s.batchId,t),await pd(r,s.changes),await im(r.remoteStore)}catch(s){const o=ow(s,"Failed to persist write");t.reject(o)}}async function FP(n,e){const t=Be(n);try{const r=await q5(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?lt(l.hu,14607):s.removedDocuments.size>0&&(lt(l.hu,42227),l.hu=!1))})),await pd(t,r,e)}catch(r){await cc(r)}}function OI(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=Be(l);d.onlineState=u;let f=!1;d.queries.forEach(((m,y)=>{for(const v of y.Sa)v.va(u)&&(f=!0)})),f&&aw(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M9(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new bt(Ne.comparator);l=l.insert(o,En.newNoDocument(o,Fe.min()));const u=Ye().add(o),d=new nm(Fe.min(),new Map,new bt(Qe),l,u);await FP(r,d),r.du=r.du.remove(o),r.Au.delete(e),cw(r)}else await A_(r.localStore,e,!1).then((()=>N_(r,e,t))).catch(cc)}async function L9(n,e){const t=Be(n),r=e.batch.batchId;try{const s=await G5(t.localStore,e);zP(t,r,null),UP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pd(t,s)}catch(s){await cc(s)}}async function V9(n,e,t){const r=Be(n);try{const s=await(function(l,u){const d=Be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return d.mutationQueue.lookupMutationBatch(f,u).next((y=>(lt(y!==null,37113),m=y.keys(),d.mutationQueue.removeMutationBatch(f,y)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>d.localDocuments.getDocuments(f,m)))}))})(r.localStore,e);zP(r,e,t),UP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pd(r,s)}catch(s){await cc(s)}}function UP(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function zP(n,e,t){const r=Be(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function N_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||BP(n,r)}))}function BP(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(tw(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),cw(n))}function MI(n,e,t){for(const r of t)r instanceof LP?(n.Ru.addReference(r.key,e),j9(n,r)):r instanceof VP?(Te(lw,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||BP(n,r.key)):Le(19791,{wu:r})}function j9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Te(lw,"New document in limbo: "+t),n.Eu.add(r),cw(n))}function cw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ne(pt.fromString(e)),r=n.fu.next();n.Au.set(r,new R9(t)),n.du=n.du.insert(t,r),RP(n.remoteStore,new Xi(fs(Xp(t.path)),r,"TargetPurposeLimboResolution",Kp.ce))}}async function pd(n,e,t){const r=Be(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{l.push(r.pu(d,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const m=f?!f.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(f){s.push(f);const m=Zv.As(d.targetId,f);o.push(m)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(d,f){const m=Be(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ie.forEach(f,(v=>ie.forEach(v.Es,(I=>m.persistence.referenceDelegate.addReference(y,v.targetId,I))).next((()=>ie.forEach(v.ds,(I=>m.persistence.referenceDelegate.removeReference(y,v.targetId,I)))))))))}catch(y){if(!uc(y))throw y;Te(ew,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const I=m.Ms.get(v),A=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(v,x)}}})(r.localStore,o))}async function F9(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Te(lw,"User change. New user:",e.toKey());const r=await TP(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new we(re.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pd(t,r.Ls)}}function U9(n,e){const t=Be(n),r=t.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let s=Ye();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function $P(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M9.bind(null,e),e.Pu.H_=T9.bind(null,e.eventManager),e.Pu.yu=I9.bind(null,e.eventManager),e}function z9(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V9.bind(null,e),e}class sp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return H5(this.persistence,new B5,e.initialUser,this.serializer)}Cu(e){return new SP(Jv.mi,this.serializer)}Du(e){return new J5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sp.provider={build:()=>new sp};class B9 extends sp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){lt(this.persistence.referenceDelegate instanceof np,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new R5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new SP((r=>np.mi(r,t)),this.serializer)}}class D_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F9.bind(null,this.syncEngine),await w9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new S9})()}createDatastore(e){const t=rm(e.databaseInfo.databaseId),r=(function(o){return new r9(o)})(e.databaseInfo);return(function(o,l,u,d){return new a9(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,u){return new c9(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>OI(this.syncEngine,t,0)),(function(){return bI.v()?new bI:new Z5})())}createSyncEngine(e,t){return(function(s,o,l,u,d,f,m){const y=new b9(s,o,l,u,d,f);return m&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Be(t);Te(ya,"RemoteStore shutting down."),r.Ea.add(5),await fd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}D_.provider={build:()=>new D_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="FirestoreClient";class $9{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=zv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{Te(mo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Te(mo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new no;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=ow(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Py(n,e){n.asyncQueue.verifyOperationInProgress(),Te(mo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await TP(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function LI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await W9(n);Te(mo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>PI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>PI(e.remoteStore,s))),n._onlineComponents=e}async function W9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(mo,"Using user provided OfflineComponentProvider");try{await Py(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Wl("Error using user provided cache. Falling back to memory cache: "+t),await Py(n,new sp)}}else Te(mo,"Using default OfflineComponentProvider"),await Py(n,new B9(void 0));return n._offlineComponents}async function HP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(mo,"Using user provided OnlineComponentProvider"),await LI(n,n._uninitializedComponentsProvider._online)):(Te(mo,"Using default OnlineComponentProvider"),await LI(n,new D_))),n._onlineComponents}function H9(n){return HP(n).then((e=>e.syncEngine))}async function O_(n){const e=await HP(n),t=e.eventManager;return t.onListen=A9.bind(null,e.syncEngine),t.onUnlisten=N9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=P9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=D9.bind(null,e.syncEngine),t}function G9(n,e,t={}){const r=new no;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,f){const m=new WP({next:v=>{m.Nu(),l.enqueueAndForget((()=>OP(o,y)));const I=v.docs.has(u);!I&&v.fromCache?f.reject(new we(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&d&&d.source==="server"?f.reject(new we(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new MP(Xp(u.path),m,{includeMetadataChanges:!0,qa:!0});return DP(o,y)})(await O_(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="firestore.googleapis.com",jI=!0;class FI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qP,this.ssl=jI}else this.host=e.host,this.ssl=e.ssl??jI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<x5)throw new we(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GP(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class om{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Zz;switch(r.type){case"firstParty":return new r6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=VI.get(t);r&&(Te("ComponentProvider","Removing Datastore"),VI.delete(t),r.terminate())})(this),Promise.resolve()}}function q9(n,e,t,r={}){n=Or(n,om);const s=Ts(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;s&&(Vp(`https://${u}`),jp("Firestore",!0)),o.host!==qP&&o.host!==u&&Wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:r};if(!ni(d,l)&&(n._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=_n.MOCK_USER;else{f=dv(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new we(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _n(y)}n._authCredentials=new e6(new kA(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class Nt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ud(t,Nt._jsonSchema))return new Nt(e,r||null,new Ne(pt.fromString(t.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:$t("string",Nt._jsonSchemaVersion),referencePath:$t("string")};class ro extends So{constructor(e,t,r){super(e,t,Xp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Ne(e))}withConverter(e){return new ro(this.firestore,e,this._path)}}function M_(n,e,...t){if(n=mt(n),NA("collection","path",e),n instanceof om){const r=pt.fromString(e,...t);return J0(r),new ro(n,null,r)}{if(!(n instanceof Nt||n instanceof ro))throw new we(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return J0(r),new ro(n.firestore,null,r)}}function fc(n,e,...t){if(n=mt(n),arguments.length===1&&(e=zv.newId()),NA("doc","path",e),n instanceof om){const r=pt.fromString(e,...t);return X0(r),new Nt(n,null,new Ne(r))}{if(!(n instanceof Nt||n instanceof ro))throw new we(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pt.fromString(e,...t));return X0(r),new Nt(n.firestore,n instanceof ro?n.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="AsyncQueue";class zI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xP(this,"async_queue_retry"),this._c=()=>{const r=Ay();r&&Te(UI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ay();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ay();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new no;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!uc(e))throw e;Te(UI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,oi("INTERNAL UNHANDLED ERROR: ",BI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=iw.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Le(47125,{Pc:BI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function BI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class _a extends om{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new zI,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zI(e),this._firestoreClient=void 0,await e}}}function K9(n,e){const t=typeof n=="object"?n:zp(),r=typeof n=="string"?n:Yf,s=sd(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=cv("firestore");o&&q9(s,...o)}return s}function uw(n){if(n._terminated)throw new we(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Q9(n),n._firestoreClient}function Q9(n){const e=n._freezeSettings(),t=(function(s,o,l,u){return new w6(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,GP(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new $9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hr(dn.fromBase64String(e))}catch(t){throw new we(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hr(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ud(e,hr._jsonSchema))return hr.fromBase64String(e.bytes)}}hr._jsonSchemaVersion="firestore/bytes/1.0",hr._jsonSchema={type:$t("string",hr._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ms._jsonSchemaVersion}}static fromJSON(e){if(ud(e,ms._jsonSchema))return new ms(e.latitude,e.longitude)}}ms._jsonSchemaVersion="firestore/geoPoint/1.0",ms._jsonSchema={type:$t("string",ms._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ud(e,gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gs(e.vectorValues);throw new we(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gs._jsonSchemaVersion="firestore/vectorValue/1.0",gs._jsonSchema={type:$t("string",gs._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=/^__.*__$/;class X9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new dd(e,this.data,t,this.fieldTransforms)}}class KP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:n})}}class lm{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ip(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QP(this.Ac)&&Y9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class J9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rm(e)}Cc(e,t,r,s=!1){return new lm({Ac:e,methodName:t,Dc:r,path:un.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cm(n){const e=n._freezeSettings(),t=rm(n._databaseId);return new J9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YP(n,e,t,r,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);fw("Data must be an object, but it was:",l,r);const u=XP(r,l);let d,f;if(o.merge)d=new tr(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const v=L_(e,y,t);if(!l.contains(v))throw new we(re.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);ZP(m,v)||m.push(v)}d=new tr(m),f=l.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,f=l.fieldTransforms;return new X9(new zn(u),d,f)}class um extends md{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof um}}function Z9(n,e,t){return new lm({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dw extends md{_toFieldTransform(e){return new aP(e.path,new Ku)}isEqual(e){return e instanceof dw}}class hw extends md{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Z9(this,e,!0),r=this.vc.map((o=>pc(o,t))),s=new Kl(r);return new aP(e.path,s)}isEqual(e){return e instanceof hw&&ni(this.vc,e.vc)}}function eB(n,e,t,r){const s=n.Cc(1,e,t);fw("Data must be an object, but it was:",s,r);const o=[],l=zn.empty();wo(r,((d,f)=>{const m=pw(e,d,t);f=mt(f);const y=s.yc(m);if(f instanceof um)o.push(m);else{const v=pc(f,y);v!=null&&(o.push(m),l.set(m,v))}}));const u=new tr(o);return new KP(l,u,s.fieldTransforms)}function tB(n,e,t,r,s,o){const l=n.Cc(1,e,t),u=[L_(e,r,t)],d=[s];if(o.length%2!=0)throw new we(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(L_(e,o[v])),d.push(o[v+1]);const f=[],m=zn.empty();for(let v=u.length-1;v>=0;--v)if(!ZP(f,u[v])){const I=u[v];let A=d[v];A=mt(A);const x=l.yc(I);if(A instanceof um)f.push(I);else{const R=pc(A,x);R!=null&&(f.push(I),m.set(I,R))}}const y=new tr(f);return new KP(m,y,l.fieldTransforms)}function nB(n,e,t,r=!1){return pc(t,n.Cc(r?4:3,e))}function pc(n,e){if(JP(n=mt(n)))return fw("Unsupported field value:",e,n),XP(n,e);if(n instanceof md)return(function(r,s){if(!QP(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=pc(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Et.fromDate(r);return{timestampValue:tp(s.serializer,o)}}if(r instanceof Et){const o=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tp(s.serializer,o)}}if(r instanceof ms)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hr)return{bytesValue:pP(s.serializer,r._byteString)};if(r instanceof Nt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gs)return(function(l,u){return{mapValue:{fields:{[zA]:{stringValue:BA},[Xf]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return qv(u.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${qp(r)}`)})(n,e)}function XP(n,e){const t={};return MA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(n,((r,s)=>{const o=pc(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function JP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof ms||n instanceof hr||n instanceof Nt||n instanceof md||n instanceof gs)}function fw(n,e,t){if(!JP(t)||!DA(t)){const r=qp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function L_(n,e,t){if((e=mt(e))instanceof am)return e._internalPath;if(typeof e=="string")return pw(n,e);throw ip("Field path arguments must be of type string or ",n,!1,void 0,t)}const rB=new RegExp("[~\\*/\\[\\]]");function pw(n,e,t){if(e.search(rB)>=0)throw ip(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new am(...e.split("."))._internalPath}catch{throw ip(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ip(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new we(re.INVALID_ARGUMENT,u+n+d)}function ZP(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sB extends ek{data(){return super.data()}}function dm(n,e){return typeof e=="string"?pw(n,e):e instanceof am?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mw{}class gw extends mw{}function oB(n,e,...t){let r=[];e instanceof mw&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((d=>d instanceof yw)).length,u=o.filter((d=>d instanceof hm)).length;if(l>1||l>0&&u>0)throw new we(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class hm extends gw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hm(e,t,r)}_apply(e){const t=this._parse(e);return tk(e._query,t),new So(e.firestore,e.converter,I_(e._query,t))}_parse(e){const t=cm(e.firestore);return(function(o,l,u,d,f,m,y){let v;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new we(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){HI(y,m);const A=[];for(const x of y)A.push(WI(d,o,x));v={arrayValue:{values:A}}}else v=WI(d,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||HI(y,m),v=nB(u,l,y,m==="in"||m==="not-in");return Bt.create(f,m,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function aB(n,e,t){const r=e,s=dm("where",n);return hm._create(s,r,t)}class yw extends mw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yw(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)tk(l,d),l=I_(l,d)})(e._query,t),new So(e.firestore,e.converter,I_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _w extends gw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _w(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new we(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qu(o,l)})(e._query,this._field,this._direction);return new So(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new dc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function lB(n,e="asc"){const t=e,r=dm("orderBy",n);return _w._create(r,t)}class vw extends gw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new vw(e,t,r)}_apply(e){return new So(e.firestore,e.converter,Zf(e._query,this._limit,this._limitType))}}function cB(n){return vw._create("limit",n,"F")}function WI(n,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new we(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YA(e)&&t.indexOf("/")!==-1)throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pt.fromString(t));if(!Ne.isDocumentKey(r))throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oI(n,new Ne(r))}if(t instanceof Nt)return oI(n,t._key);throw new we(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qp(t)}.`)}function HI(n,e){if(!Array.isArray(n)||n.length===0)throw new we(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tk(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uB{convertValue(e,t="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return wo(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Xf].arrayValue?.values?.map((r=>Vt(r.doubleValue)));return new gs(t)}convertGeoPoint(e){return new ms(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=uo(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pt.fromString(e);lt(wP(r),9688,{name:e});const s=new Hu(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return s.isEqual(t)||oi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aa extends ek{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=aa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}aa._jsonSchemaVersion="firestore/documentSnapshot/1.0",aa._jsonSchema={type:$t("string",aa._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class gf extends aa{data(e={}){return super.data(e)}}class Dl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new wu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new gf(this._firestore,this._userDataWriter,r.key,r,new wu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new gf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new wu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new gf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new wu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),m=l.indexOf(u.doc.key)),{type:dB(u.type),doc:d,oldIndex:f,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Dl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n){n=Or(n,Nt);const e=Or(n.firestore,_a);return G9(uw(e),n._key).then((t=>ok(e,n,t)))}Dl._jsonSchemaVersion="firestore/querySnapshot/1.0",Dl._jsonSchema={type:$t("string",Dl._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class rk extends uB{constructor(e){super(),this.firestore=e}convertBytes(e){return new hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,t)}}function sk(n,e,t){n=Or(n,Nt);const r=Or(n.firestore,_a),s=nk(n.converter,e,t);return ww(r,[YP(cm(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Mr.none())])}function hB(n,e,t,...r){n=Or(n,Nt);const s=Or(n.firestore,_a),o=cm(s);let l;return l=typeof(e=mt(e))=="string"||e instanceof am?tB(o,"updateDoc",n._key,e,t,r):eB(o,"updateDoc",n._key,e),ww(s,[l.toMutation(n._key,Mr.exists(!0))])}function fB(n,e){const t=Or(n.firestore,_a),r=fc(n),s=nk(n.converter,e);return ww(t,[YP(cm(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Mr.exists(!1))]).then((()=>r))}function ik(n,...e){n=mt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||$I(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($I(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,l,u;if(n instanceof Nt)l=Or(n.firestore,_a),u=Xp(n._key.path),o={next:d=>{e[r]&&e[r](ok(l,n,d))},error:e[r+1],complete:e[r+2]};else{const d=Or(n,So);l=Or(d.firestore,_a),u=d._query;const f=new rk(l);o={next:m=>{e[r]&&e[r](new Dl(l,f,d,m))},error:e[r+1],complete:e[r+2]},iB(n._query)}return(function(f,m,y,v){const I=new WP(v),A=new MP(m,I,y);return f.asyncQueue.enqueueAndForget((async()=>DP(await O_(f),A))),()=>{I.Nu(),f.asyncQueue.enqueueAndForget((async()=>OP(await O_(f),A)))}})(uw(l),u,s,o)}function ww(n,e){return(function(r,s){const o=new no;return r.asyncQueue.enqueueAndForget((async()=>O9(await H9(r),s,o))),o.promise})(uw(n),e)}function ok(n,e,t){const r=t.docs.get(e._key),s=new rk(n);return new aa(n,s,e._key,r,new wu(t.hasPendingWrites,t.fromCache),e.converter)}function Ew(){return new dw("serverTimestamp")}function pB(...n){return new hw("arrayUnion",n)}(function(e,t=!0){(function(s){lc=s})(vo),ao(new ri("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new _a(new t6(r.getProvider("auth-internal")),new s6(l,r.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new we(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(f.options.projectId,m)})(l,s),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),pr(q0,K0,e),pr(q0,K0,"esm2020")})();function ak(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mB=ak,lk=new rd("auth","Firebase",ak());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new Up("@firebase/auth");function gB(n,...e){op.logLevel<=Ke.WARN&&op.warn(`Auth (${vo}): ${n}`,...e)}function yf(n,...e){op.logLevel<=Ke.ERROR&&op.error(`Auth (${vo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(n,...e){throw Tw(n,...e)}function Lr(n,...e){return Tw(n,...e)}function Sw(n,e,t){const r={...mB(),[e]:t};return new rd("auth","Firebase",r).create(e,{appName:n.name})}function Zs(n){return Sw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yB(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&yr(n,"argument-error"),Sw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lk.create(n,...e)}function Me(n,e,...t){if(!n)throw Tw(e,...t)}function Qs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yf(e),new Error(e)}function li(n,e){n||Qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return typeof self<"u"&&self.location?.href||""}function _B(){return GI()==="http:"||GI()==="https:"}function GI(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_B()||xj()||"connection"in navigator)?navigator.onLine:!0}function wB(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=hv()||BR()}get(){return vB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(n,e){li(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TB=new gd(3e4,6e4);function To(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function di(n,e,t,r,s={}){return uk(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=sc({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:d,...o};return Ij()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ts(n.emulatorConfig.host)&&(f.credentials="include"),ck.fetch()(await dk(n,n.config.apiHost,t,u),f)})}async function uk(n,e,t){n._canInitEmulator=!1;const r={...EB,...e};try{const s=new xB(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw tf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw tf(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw tf(n,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Sw(n,m,f);yr(n,m)}}catch(s){if(s instanceof Is)throw s;yr(n,"network-request-failed",{message:String(s)})}}async function yd(n,e,t,r,s={}){const o=await di(n,e,t,r,s);return"mfaPendingCredential"in o&&yr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function dk(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?Iw(n.config,s):`${n.config.apiScheme}://${s}`;return SB.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function IB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),TB.get())})}}function tf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Lr(n,e,r);return s.customData._tokenResponse=t,s}function qI(n){return n!==void 0&&n.enterprise!==void 0}class CB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return IB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function RB(n,e){return di(n,"GET","/v2/recaptchaConfig",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bB(n,e){return di(n,"POST","/v1/accounts:delete",e)}async function ap(n,e){return di(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AB(n,e=!1){const t=mt(n),r=await t.getIdToken(e),s=xw(r);Me(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:Ou(ky(s.auth_time)),issuedAtTime:Ou(ky(s.iat)),expirationTime:Ou(ky(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ky(n){return Number(n)*1e3}function xw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return yf("JWT malformed, contained fewer than 3 sections"),null;try{const s=jf(t);return s?JSON.parse(s):(yf("Failed to decode base64 JWT payload"),null)}catch(s){return yf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function KI(n){const e=xw(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Is&&PB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function PB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ou(this.lastLoginAt),this.creationTime=Ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(n){const e=n.auth,t=await n.getIdToken(),r=await Xl(n,ap(e,{idToken:t}));Me(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?hk(s.providerUserInfo):[],l=DB(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,f=u?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new j_(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function NB(n){const e=mt(n);await lp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DB(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function hk(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OB(n,e){const t=await uk(n,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await dk(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&Ts(n.emulatorConfig.host)&&(d.credentials="include"),ck.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MB(n,e){return di(n,"POST","/v2/accounts:revokeToken",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=KI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await OB(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Ol;return r&&(Me(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Me(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Nr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new kB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new j_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Xl(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AB(this,e)}reload(){return NB(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await lp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Zs(this.auth));const e=await this.getIdToken();return await Xl(this,bB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,f=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:I,providerData:A,stsTokenManager:x}=t;Me(y&&x,e,"internal-error");const R=Ol.fromJSON(this.name,x);Me(typeof y=="string",e,"internal-error"),$i(r,e.name),$i(s,e.name),Me(typeof v=="boolean",e,"internal-error"),Me(typeof I=="boolean",e,"internal-error"),$i(o,e.name),$i(l,e.name),$i(u,e.name),$i(d,e.name),$i(f,e.name),$i(m,e.name);const j=new Nr({uid:y,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:I,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:R,createdAt:f,lastLoginAt:m});return A&&Array.isArray(A)&&(j.providerData=A.map(V=>({...V}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ol;s.updateFromServerResponse(t);const o=new Nr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lp(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Me(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?hk(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new Ol;u.updateFromIdToken(r);const d=new Nr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new j_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new Map;function Ys(n){li(n instanceof Function,"Expected a class definition");let e=QI.get(n);return e?(li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,QI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fk.type="NONE";const YI=fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n,e,t){return`firebase:${n}:${e}:${t}`}class Ml{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=_f(this.userKey,s.apiKey,o),this.fullPersistenceKey=_f("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ap(this.auth,{idToken:e}).catch(()=>{});return t?Nr._fromGetAccountInfoResponse(this.auth,t,e):null}return Nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ml(Ys(YI),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Ys(YI);const l=_f(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const m=await f._get(l);if(m){let y;if(typeof m=="string"){const v=await ap(e,{idToken:m}).catch(()=>{});if(!v)break;y=await Nr._fromGetAccountInfoResponse(e,v,m)}else y=Nr._fromJSON(e,m);f!==o&&(u=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Ml(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Ml(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vk(e))return"Blackberry";if(wk(e))return"Webos";if(mk(e))return"Safari";if((e.includes("chrome/")||gk(e))&&!e.includes("edge/"))return"Chrome";if(_k(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function pk(n=Tn()){return/firefox\//i.test(n)}function mk(n=Tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gk(n=Tn()){return/crios\//i.test(n)}function yk(n=Tn()){return/iemobile/i.test(n)}function _k(n=Tn()){return/android/i.test(n)}function vk(n=Tn()){return/blackberry/i.test(n)}function wk(n=Tn()){return/webos/i.test(n)}function Cw(n=Tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LB(n=Tn()){return Cw(n)&&!!window.navigator?.standalone}function VB(){return Cj()&&document.documentMode===10}function Ek(n=Tn()){return Cw(n)||_k(n)||wk(n)||vk(n)||/windows phone/i.test(n)||yk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(n,e=[]){let t;switch(n){case"Browser":t=XI(Tn());break;case"Worker":t=`${XI(Tn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(n,e={}){return di(n,"GET","/v2/passwordPolicy",To(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=6;class zB{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??UB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JI(this),this.idTokenSubscription=new JI(this),this.beforeStateQueue=new jB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ys(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ml.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ap(this,{idToken:e}),r=await Nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(Zs(this));const t=e?mt(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(Zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FB(this),t=new zB(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await MB(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ys(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Ml.create(this,[Ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gB(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Io(n){return mt(n)}class JI{constructor(e){this.auth=e,this.observer=null,this.addObserver=Vj(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $B(n){pm=n}function Tk(n){return pm.loadJS(n)}function WB(){return pm.recaptchaEnterpriseScript}function HB(){return pm.gapiScript}function GB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class qB{constructor(){this.enterprise=new KB}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KB{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const QB="recaptcha-enterprise",Ik="NO_RECAPTCHA";class YB{constructor(e){this.type=QB,this.auth=Io(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{RB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new CB(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;qI(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(Ik)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qB().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&qI(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=WB();d.length!==0&&(d+=u),Tk(d).then(()=>{s(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function ZI(n,e,t,r=!1,s=!1){const o=new YB(n);let l;if(s)l=Ik;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function F_(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ZI(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ZI(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(n,e){const t=sd(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ni(o,e??{}))return s;yr(s,"already-initialized")}return t.initialize({options:e})}function JB(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ys);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ZB(n,e,t){const r=Io(n);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=xk(e),{host:l,port:u}=e$(e),d=u===null?"":`:${u}`,f={url:`${o}//${l}${d}/`},m=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(ni(f,r.config.emulator)&&ni(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Ts(l)?(Vp(`${o}//${l}${d}`),jp("Auth",!0)):t$()}function xk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function e$(n){const e=xk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:ex(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:ex(l)}}}function ex(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function t$(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qs("not implemented")}_getIdTokenResponse(e){return Qs("not implemented")}_linkToIdToken(e,t){return Qs("not implemented")}_getReauthenticationResolver(e){return Qs("not implemented")}}async function n$(n,e){return di(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r$(n,e){return yd(n,"POST","/v1/accounts:signInWithPassword",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s$(n,e){return yd(n,"POST","/v1/accounts:signInWithEmailLink",To(n,e))}async function i$(n,e){return yd(n,"POST","/v1/accounts:signInWithEmailLink",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends Rw{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Yu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Yu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return F_(e,t,"signInWithPassword",r$);case"emailLink":return s$(e,{email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return F_(e,r,"signUpPassword",n$);case"emailLink":return i$(e,{idToken:t,email:this._email,oobCode:this._password});default:yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(n,e){return yd(n,"POST","/v1/accounts:signInWithIdp",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o$="http://localhost";class va extends Rw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new va(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ll(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ll(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ll(e,t)}buildRequest(){const e={requestUri:o$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=sc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l$(n){const e=pu(mu(n)).link,t=e?pu(mu(e)).deep_link_id:null,r=pu(mu(n)).deep_link_id;return(r?pu(mu(r)).link:null)||r||t||e||n}class bw{constructor(e){const t=pu(mu(e)),r=t.apiKey??null,s=t.oobCode??null,o=a$(t.mode??null);Me(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=l$(e);try{return new bw(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(){this.providerId=mc.PROVIDER_ID}static credential(e,t){return Yu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=bw.parseLink(t);return Me(r,"argument-error"),Yu._fromEmailAndCode(e,r.code,r.tenantId)}}mc.PROVIDER_ID="password";mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends Aw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends _d{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends _d{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return va._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Gs.credential(t,r)}catch{return null}}}Gs.GOOGLE_SIGN_IN_METHOD="google.com";Gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends _d{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends _d{constructor(){super("twitter.com")}static credential(e,t){return va._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Qi.credential(t,r)}catch{return null}}}Qi.TWITTER_SIGN_IN_METHOD="twitter.com";Qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c$(n,e){return yd(n,"POST","/v1/accounts:signUp",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Nr._fromIdTokenResponse(e,r,s),l=tx(r);return new wa({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=tx(r);return new wa({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function tx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends Is{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,cp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new cp(e,t,r,s)}}function Ck(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?cp._fromErrorAndOperation(n,o,e,r):o})}async function u$(n,e,t=!1){const r=await Xl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return wa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d$(n,e,t=!1){const{auth:r}=n;if(kn(r.app))return Promise.reject(Zs(r));const s="reauthenticate";try{const o=await Xl(n,Ck(r,s,e,n),t);Me(o.idToken,r,"internal-error");const l=xw(o.idToken);Me(l,r,"internal-error");const{sub:u}=l;return Me(n.uid===u,r,"user-mismatch"),wa._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&yr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(n,e,t=!1){if(kn(n.app))return Promise.reject(Zs(n));const r="signIn",s=await Ck(n,r,e),o=await wa._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function h$(n,e){return Rk(Io(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(n){const e=Io(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function f$(n,e,t){if(kn(n.app))return Promise.reject(Zs(n));const r=Io(n),l=await F_(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c$).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&bk(n),d}),u=await wa._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function p$(n,e,t){return kn(n.app)?Promise.reject(Zs(n)):h$(mt(n),mc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bk(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m$(n,e){return di(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g$(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=mt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Xl(r,m$(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function y$(n,e,t,r){return mt(n).onIdTokenChanged(e,t,r)}function _$(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function Ak(n,e,t,r){return mt(n).onAuthStateChanged(e,t,r)}function Pk(n){return mt(n).signOut()}const up="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(up,"1"),this.storage.removeItem(up),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$=1e3,w$=10;class Nk extends kk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ek(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);VB()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,w$):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},v$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nk.type="LOCAL";const E$=Nk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk extends kk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dk.type="SESSION";const Ok=Dk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async f=>f(t.origin,o)),d=await S$(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const f=Pw("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(){return window}function I$(n){ys().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(){return typeof ys().WorkerGlobalScope<"u"&&typeof ys().importScripts=="function"}async function x$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C$(){return navigator?.serviceWorker?.controller||null}function R$(){return Mk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="firebaseLocalStorageDb",b$=1,dp="firebaseLocalStorage",Vk="fbase_key";class vd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gm(n,e){return n.transaction([dp],e?"readwrite":"readonly").objectStore(dp)}function A$(){const n=indexedDB.deleteDatabase(Lk);return new vd(n).toPromise()}function U_(){const n=indexedDB.open(Lk,b$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(dp,{keyPath:Vk})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(dp)?e(r):(r.close(),await A$(),e(await U_()))})})}async function nx(n,e,t){const r=gm(n,!0).put({[Vk]:e,value:t});return new vd(r).toPromise()}async function P$(n,e){const t=gm(n,!1).get(e),r=await new vd(t).toPromise();return r===void 0?null:r.value}function rx(n,e){const t=gm(n,!0).delete(e);return new vd(t).toPromise()}const k$=800,N$=3;class jk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await U_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>N$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mm._getInstance(R$()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await x$(),!this.activeServiceWorker)return;this.sender=new T$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||C$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await U_();return await nx(e,up,"1"),await rx(e,up),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>nx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>P$(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=gm(s,!1).getAll();return new vd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jk.type="LOCAL";const D$=jk;new gd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n,e){return e?Ys(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw extends Rw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ll(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ll(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ll(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function O$(n){return Rk(n.auth,new kw(n),n.bypassAuthState)}function M$(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),d$(t,new kw(n),n.bypassAuthState)}async function L$(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),u$(t,new kw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O$;case"linkViaPopup":case"linkViaRedirect":return L$;case"reauthViaPopup":case"reauthViaRedirect":return M$;default:yr(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=new gd(2e3,1e4);async function j$(n,e,t){if(kn(n.app))return Promise.reject(Lr(n,"operation-not-supported-in-this-environment"));const r=Io(n);yB(n,e,Aw);const s=Fk(r,t);return new ia(r,"signInViaPopup",e,s).executeNotNull()}class ia extends Uk{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,ia.currentPopupAction&&ia.currentPopupAction.cancel(),ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=Pw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,V$.get())};e()}}ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$="pendingRedirect",vf=new Map;class U$ extends Uk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=vf.get(this.auth._key());if(!e){try{const r=await z$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}vf.set(this.auth._key(),e)}return this.bypassAuthState||vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z$(n,e){const t=W$(e),r=$$(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function B$(n,e){vf.set(n._key(),e)}function $$(n){return Ys(n._redirectPersistence)}function W$(n){return _f(F$,n.config.apiKey,n.name)}async function H$(n,e,t=!1){if(kn(n.app))return Promise.reject(Zs(n));const r=Io(n),s=Fk(r,e),l=await new U$(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$=600*1e3;class q${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!zk(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Lr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=G$&&this.cachedEventUids.clear(),this.cachedEventUids.has(sx(e))}saveEventToCache(e){this.cachedEventUids.add(sx(e)),this.lastProcessedEventTime=Date.now()}}function sx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zk({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function K$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zk(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q$(n,e={}){return di(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X$=/^https?/;async function J$(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Q$(n);for(const t of e)try{if(Z$(t))return}catch{}yr(n,"unauthorized-domain")}function Z$(n){const e=V_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!X$.test(t))return!1;if(Y$.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=new gd(3e4,6e4);function ix(){const n=ys().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tW(n){return new Promise((e,t)=>{function r(){ix(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ix(),t(Lr(n,"network-request-failed"))},timeout:eW.get()})}if(ys().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ys().gapi?.load)r();else{const s=GB("iframefcb");return ys()[s]=()=>{gapi.load?r():t(Lr(n,"network-request-failed"))},Tk(`${HB()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw wf=null,e})}let wf=null;function nW(n){return wf=wf||tW(n),wf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW=new gd(5e3,15e3),sW="__/auth/iframe",iW="emulator/auth/iframe",oW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lW(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Iw(e,iW):`https://${n.config.authDomain}/${sW}`,r={apiKey:e.apiKey,appName:n.name,v:vo},s=aW.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${sc(r).slice(1)}`}async function cW(n){const e=await nW(n),t=ys().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:lW(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oW,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Lr(n,"network-request-failed"),u=ys().setTimeout(()=>{o(l)},rW.get());function d(){ys().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dW=500,hW=600,fW="_blank",pW="http://localhost";class ox{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mW(n,e,t,r=dW,s=hW){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...uW,width:r.toString(),height:s.toString(),top:o,left:l},f=Tn().toLowerCase();t&&(u=gk(f)?fW:t),pk(f)&&(e=e||pW,d.scrollbars="yes");const m=Object.entries(d).reduce((v,[I,A])=>`${v}${I}=${A},`,"");if(LB(f)&&u!=="_self")return gW(e||"",u),new ox(null);const y=window.open(e||"",u,m);Me(y,n,"popup-blocked");try{y.focus()}catch{}return new ox(y)}function gW(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW="__/auth/handler",_W="emulator/auth/handler",vW=encodeURIComponent("fac");async function ax(n,e,t,r,s,o){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vo,eventId:s};if(e instanceof Aw){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Zy(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof _d){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),f=d?`#${vW}=${encodeURIComponent(d)}`:"";return`${wW(n)}?${sc(u).slice(1)}${f}`}function wW({config:n}){return n.emulator?Iw(n,_W):`https://${n.authDomain}/${yW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="webStorageSupport";class EW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ok,this._completeRedirectFn=H$,this._overrideRedirectResult=B$}async _openPopup(e,t,r,s){li(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await ax(e,t,r,V_(),s);return mW(e,o,Pw())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await ax(e,t,r,V_(),s);return I$(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(li(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await cW(e),r=new q$(e);return t.register("authEvent",s=>(Me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ny,{type:Ny},s=>{const o=s?.[0]?.[Ny];o!==void 0&&t(!!o),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=J$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ek()||mk()||Cw()}}const SW=EW;var lx="@firebase/auth",cx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IW(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xW(n){ao(new ri("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Me(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sk(n)},f=new BB(r,s,o,d);return JB(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ao(new ri("auth-internal",e=>{const t=Io(e.getProvider("auth").getImmediate());return(r=>new TW(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(lx,cx,IW(n)),pr(lx,cx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW=300,RW=zR("authIdTokenMaxAge")||CW;let ux=null;const bW=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>RW)return;const s=t?.token;ux!==s&&(ux=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function AW(n=zp()){const e=sd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=XB(n,{popupRedirectResolver:SW,persistence:[D$,E$,Ok]}),r=zR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=bW(o.toString());_$(t,l,()=>l(t.currentUser)),y$(t,u=>l(u))}}const s=FR("auth");return s&&ZB(t,`http://${s}`),t}function PW(){return document.getElementsByTagName("head")?.[0]??document}$B({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Lr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",PW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xW("Browser");const kW={apiKey:"AIzaSyB1z04jNS4gnwWa4VI10cXinj2PBg3KHe0",authDomain:"boulder-gym.firebaseapp.com",projectId:"boulder-gym",storageBucket:"boulder-gym.firebasestorage.app",messagingSenderId:"837049852336",appId:"1:837049852336:web:73b74809c9f120dc75b675",measurementId:"G-PKT03CZKTN"},ym=GR(kW);Yz(ym);const so=K9(ym),_s=AW(ym),NW=oU(ym),DW=new Gs,OW=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],MW=["Red","Blue","Green","Yellow","Purple","Orange","Black","White","Multi-color"];function LW({onSave:n,onCancel:e}){const[t,r]=S.useState({name:"",grade:"",color:"",description:"",setter:"",imageUrl:""}),[s,o]=S.useState(""),[l,u]=S.useState(!1),d=(x,R)=>{r(j=>({...j,[x]:R}))},f=async x=>{if(x.type.startsWith("image/"))try{const R=iU(NW,`routes/${Date.now()}-${x.name}`);await rU(R,x);const j=await sU(R);o(j),r(V=>({...V,imageUrl:j}))}catch(R){console.error("Image upload failed:",R)}},m=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?u(!0):x.type==="dragleave"&&u(!1)},y=x=>{x.preventDefault(),x.stopPropagation(),u(!1);const R=x.dataTransfer.files;R&&R[0]&&f(R[0])},v=x=>{const R=x.target.files;R&&R[0]&&f(R[0])},I=x=>{x.preventDefault(),A&&(console.log(t.imageUrl),n({name:t.name,grade:t.grade,color:t.color,description:t.description,setter:t.setter,imageUrl:t.imageUrl||"https://images.unsplash.com/photo-1730659071194-4c833ac5da4e",dateSet:new Date().toISOString().split("T")[0]}))},A=t.name&&t.grade&&t.color&&t.setter;return _.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[_.jsxs(Pn,{variant:"ghost",onClick:e,className:"gap-2",children:[_.jsx(Vx,{className:"size-4"}),"Back to Gallery"]}),_.jsxs(Tf,{children:[_.jsx(sC,{children:_.jsx(BO,{children:"Add New Route"})}),_.jsx(G_,{children:_.jsxs("form",{onSubmit:I,className:"space-y-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Hi,{children:"Route Photo"}),_.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${l?"border-primary bg-primary/10":""}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:y,children:s?_.jsxs("div",{className:"relative",children:[_.jsx(Of,{src:s,alt:"Route preview",className:"w-full h-48 object-cover rounded-lg"}),_.jsx(Pn,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{o(""),r(x=>({...x,imageUrl:""}))},children:_.jsx($x,{className:"size-4"})})]}):_.jsxs("div",{className:"space-y-4",children:[_.jsx(XD,{className:"size-12 text-muted-foreground mx-auto"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Drag and drop an image here, or click to select"}),_.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",id:"image-upload"}),_.jsx(Pn,{type:"button",variant:"outline",asChild:!0,children:_.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:"Choose Image"})})]})]})})]}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Hi,{htmlFor:"name",children:"Route Name *"}),_.jsx(KT,{id:"name",type:"text",placeholder:"Enter route name",value:t.name,onChange:x=>d("name",x.target.value)})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Hi,{htmlFor:"setter",children:"Route Setter *"}),_.jsx(KT,{id:"setter",type:"text",placeholder:"Who set this route?",value:t.setter,onChange:x=>d("setter",x.target.value)})]})]}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Hi,{children:"Grade *"}),_.jsxs(Pf,{value:t.grade,onValueChange:x=>d("grade",x),children:[_.jsx(Nf,{children:_.jsx(kf,{placeholder:"Select grade"})}),_.jsx(Df,{children:OW.map(x=>_.jsx(Fl,{value:x,children:x},x))})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Hi,{children:"Hold Color *"}),_.jsxs(Pf,{value:t.color,onValueChange:x=>d("color",x),children:[_.jsx(Nf,{children:_.jsx(kf,{placeholder:"Select color"})}),_.jsx(Df,{children:MW.map(x=>_.jsx(Fl,{value:x,children:x},x))})]})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Hi,{htmlFor:"description",children:"Description"}),_.jsx(DR,{id:"description",placeholder:"Describe the route, key moves, or tips...",value:t.description,onChange:x=>d("description",x.target.value),rows:4})]}),_.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[_.jsx(Pn,{type:"submit",disabled:!A,children:"Add Route"}),_.jsx(Pn,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})]})}function VW(n,e=[]){let t=[];function r(o,l){const u=S.createContext(l);u.displayName=o+"Context";const d=t.length;t=[...t,l];const f=y=>{const{scope:v,children:I,...A}=y,x=v?.[n]?.[d]||u,R=S.useMemo(()=>A,Object.values(A));return _.jsx(x.Provider,{value:R,children:I})};f.displayName=o+"Provider";function m(y,v){const I=v?.[n]?.[d]||u,A=S.useContext(I);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[f,m]}const s=()=>{const o=t.map(l=>S.createContext(l));return function(u){const d=u?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return s.scopeName=n,[r,jW(s,...e)]}function jW(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((u,{useScope:d,scopeName:f})=>{const y=d(o)[`__scope${f}`];return{...u,...y}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var FW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nw=FW.reduce((n,e)=>{const t=vp(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),Dy={exports:{}},Oy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function UW(){if(dx)return Oy;dx=1;var n=yp();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(y,v){var I=v(),A=r({inst:{value:I,getSnapshot:v}}),x=A[0].inst,R=A[1];return o(function(){x.value=I,x.getSnapshot=v,d(x)&&R({inst:x})},[y,I,v]),s(function(){return d(x)&&R({inst:x}),y(function(){d(x)&&R({inst:x})})},[y]),l(I),I}function d(y){var v=y.getSnapshot;y=y.value;try{var I=v();return!t(y,I)}catch{return!0}}function f(y,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Oy.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Oy}var hx;function zW(){return hx||(hx=1,Dy.exports=UW()),Dy.exports}var BW=zW();function $W(){return BW.useSyncExternalStore(WW,()=>!0,()=>!1)}function WW(){return()=>{}}var Dw="Avatar",[HW]=VW(Dw),[GW,Bk]=HW(Dw),$k=S.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,o]=S.useState("idle");return _.jsx(GW,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:_.jsx(Nw.span,{...r,ref:e})})});$k.displayName=Dw;var Wk="AvatarImage",qW=S.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...o}=n,l=Bk(Wk,t),u=KW(r,o),d=en(f=>{s(f),l.onImageLoadingStatusChange(f)});return Wt(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?_.jsx(Nw.img,{...o,ref:e,src:r}):null});qW.displayName=Wk;var Hk="AvatarFallback",Gk=S.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,o=Bk(Hk,t),[l,u]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&o.imageLoadingStatus!=="loaded"?_.jsx(Nw.span,{...s,ref:e}):null});Gk.displayName=Hk;function fx(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function KW(n,{referrerPolicy:e,crossOrigin:t}){const r=$W(),s=S.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[l,u]=S.useState(()=>fx(o,n));return Wt(()=>{u(fx(o,n))},[o,n]),Wt(()=>{const d=y=>()=>{u(y)};if(!o)return;const f=d("loaded"),m=d("error");return o.addEventListener("load",f),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof t=="string"&&(o.crossOrigin=t),()=>{o.removeEventListener("load",f),o.removeEventListener("error",m)}},[o,t,e]),l}var QW=$k,YW=Gk;function nf({className:n,...e}){return _.jsx(QW,{"data-slot":"avatar",className:ot("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function rf({className:n,...e}){return _.jsx(YW,{"data-slot":"avatar-fallback",className:ot("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}var My="rovingFocusGroup.onEntryFocus",XW={bubbles:!1,cancelable:!0},wd="RovingFocusGroup",[z_,qk,JW]=q_(wd),[ZW,Kk]=go(wd,[JW]),[eH,tH]=ZW(wd),Qk=S.forwardRef((n,e)=>_.jsx(z_.Provider,{scope:n.__scopeRovingFocusGroup,children:_.jsx(z_.Slot,{scope:n.__scopeRovingFocusGroup,children:_.jsx(nH,{...n,ref:e})})}));Qk.displayName=wd;var nH=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...y}=n,v=S.useRef(null),I=rt(e,v),A=wp(o),[x,R]=ju({prop:l,defaultProp:u??null,onChange:d,caller:wd}),[j,V]=S.useState(!1),z=en(f),H=qk(t),J=S.useRef(!1),[Z,P]=S.useState(0);return S.useEffect(()=>{const b=v.current;if(b)return b.addEventListener(My,z),()=>b.removeEventListener(My,z)},[z]),_.jsx(eH,{scope:t,orientation:r,dir:A,loop:s,currentTabStopId:x,onItemFocus:S.useCallback(b=>R(b),[R]),onItemShiftTab:S.useCallback(()=>V(!0),[]),onFocusableItemAdd:S.useCallback(()=>P(b=>b+1),[]),onFocusableItemRemove:S.useCallback(()=>P(b=>b-1),[]),children:_.jsx(Ge.div,{tabIndex:j||Z===0?-1:0,"data-orientation":r,...y,ref:I,style:{outline:"none",...n.style},onMouseDown:Ae(n.onMouseDown,()=>{J.current=!0}),onFocus:Ae(n.onFocus,b=>{const N=!J.current;if(b.target===b.currentTarget&&N&&!j){const O=new CustomEvent(My,XW);if(b.currentTarget.dispatchEvent(O),!O.defaultPrevented){const M=H().filter(pe=>pe.focusable),F=M.find(pe=>pe.active),D=M.find(pe=>pe.id===x),ve=[F,D,...M].filter(Boolean).map(pe=>pe.ref.current);Jk(ve,m)}}J.current=!1}),onBlur:Ae(n.onBlur,()=>V(!1))})})}),Yk="RovingFocusGroupItem",Xk=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,children:l,...u}=n,d=Xs(),f=o||d,m=tH(Yk,t),y=m.currentTabStopId===f,v=qk(t),{onFocusableItemAdd:I,onFocusableItemRemove:A,currentTabStopId:x}=m;return S.useEffect(()=>{if(r)return I(),()=>A()},[r,I,A]),_.jsx(z_.ItemSlot,{scope:t,id:f,focusable:r,active:s,children:_.jsx(Ge.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...u,ref:e,onMouseDown:Ae(n.onMouseDown,R=>{r?m.onItemFocus(f):R.preventDefault()}),onFocus:Ae(n.onFocus,()=>m.onItemFocus(f)),onKeyDown:Ae(n.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){m.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const j=iH(R,m.orientation,m.dir);if(j!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let z=v().filter(H=>H.focusable).map(H=>H.ref.current);if(j==="last")z.reverse();else if(j==="prev"||j==="next"){j==="prev"&&z.reverse();const H=z.indexOf(R.currentTarget);z=m.loop?oH(z,H+1):z.slice(H+1)}setTimeout(()=>Jk(z))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:x!=null}):l})})});Xk.displayName=Yk;var rH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sH(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function iH(n,e,t){const r=sH(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rH[r]}function Jk(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function oH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var aH=Qk,lH=Xk;function cH(n){const e=uH(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(hH);if(d){const f=d.props.children,m=u.map(y=>y===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:y);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function uH(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=pH(s),u=fH(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ci(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var dH=Symbol("radix.slottable");function hH(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===dH}function fH(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function pH(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var B_=["Enter"," "],mH=["ArrowDown","PageUp","Home"],Zk=["ArrowUp","PageDown","End"],gH=[...mH,...Zk],yH={ltr:[...B_,"ArrowRight"],rtl:[...B_,"ArrowLeft"]},_H={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ed="Menu",[Xu,vH,wH]=q_(Ed),[Ra,eN]=go(Ed,[wH,Rp,Kk]),_m=Rp(),tN=Kk(),[EH,ba]=Ra(Ed),[SH,Sd]=Ra(Ed),nN=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:o,modal:l=!0}=n,u=_m(e),[d,f]=S.useState(null),m=S.useRef(!1),y=en(o),v=wp(s);return S.useEffect(()=>{const I=()=>{m.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>m.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),_.jsx(DC,{...u,children:_.jsx(EH,{scope:e,open:t,onOpenChange:y,content:d,onContentChange:f,children:_.jsx(SH,{scope:e,onClose:S.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:m,dir:v,modal:l,children:r})})})};nN.displayName=Ed;var TH="MenuAnchor",Ow=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=_m(t);return _.jsx(OC,{...s,...r,ref:e})});Ow.displayName=TH;var Mw="MenuPortal",[IH,rN]=Ra(Mw,{forceMount:void 0}),sN=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,o=ba(Mw,e);return _.jsx(IH,{scope:e,forceMount:t,children:_.jsx(_r,{present:t||o.open,children:_.jsx(bp,{asChild:!0,container:s,children:r})})})};sN.displayName=Mw;var mr="MenuContent",[xH,Lw]=Ra(mr),iN=S.forwardRef((n,e)=>{const t=rN(mr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=ba(mr,n.__scopeMenu),l=Sd(mr,n.__scopeMenu);return _.jsx(Xu.Provider,{scope:n.__scopeMenu,children:_.jsx(_r,{present:r||o.open,children:_.jsx(Xu.Slot,{scope:n.__scopeMenu,children:l.modal?_.jsx(CH,{...s,ref:e}):_.jsx(RH,{...s,ref:e})})})})}),CH=S.forwardRef((n,e)=>{const t=ba(mr,n.__scopeMenu),r=S.useRef(null),s=rt(e,r);return S.useEffect(()=>{const o=r.current;if(o)return rv(o)},[]),_.jsx(Vw,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Ae(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),RH=S.forwardRef((n,e)=>{const t=ba(mr,n.__scopeMenu);return _.jsx(Vw,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),bH=cH("MenuContent.ScrollLock"),Vw=S.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:v,onDismiss:I,disableOutsideScroll:A,...x}=n,R=ba(mr,t),j=Sd(mr,t),V=_m(t),z=tN(t),H=vH(t),[J,Z]=S.useState(null),P=S.useRef(null),b=rt(e,P,R.onContentChange),N=S.useRef(0),O=S.useRef(""),M=S.useRef(0),F=S.useRef(null),D=S.useRef("right"),me=S.useRef(0),ve=A?Pp:S.Fragment,pe=A?{as:bH,allowPinchZoom:!0}:void 0,Ee=ee=>{const ue=O.current+ee,B=H().filter(G=>!G.disabled),ne=document.activeElement,te=B.find(G=>G.ref.current===ne)?.textValue,se=B.map(G=>G.textValue),he=UH(se,ue,te),ce=B.find(G=>G.textValue===he)?.ref.current;(function G(oe){O.current=oe,window.clearTimeout(N.current),oe!==""&&(N.current=window.setTimeout(()=>G(""),1e3))})(ue),ce&&setTimeout(()=>ce.focus())};S.useEffect(()=>()=>window.clearTimeout(N.current),[]),K_();const W=S.useCallback(ee=>D.current===F.current?.side&&BH(ee,F.current?.area),[]);return _.jsx(xH,{scope:t,searchRef:O,onItemEnter:S.useCallback(ee=>{W(ee)&&ee.preventDefault()},[W]),onItemLeave:S.useCallback(ee=>{W(ee)||(P.current?.focus(),Z(null))},[W]),onTriggerLeave:S.useCallback(ee=>{W(ee)&&ee.preventDefault()},[W]),pointerGraceTimerRef:M,onPointerGraceIntentChange:S.useCallback(ee=>{F.current=ee},[]),children:_.jsx(ve,{...pe,children:_.jsx(Sp,{asChild:!0,trapped:s,onMountAutoFocus:Ae(o,ee=>{ee.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:_.jsx(Ep,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:y,onInteractOutside:v,onDismiss:I,children:_.jsx(aH,{asChild:!0,...z,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:J,onCurrentTabStopIdChange:Z,onEntryFocus:Ae(d,ee=>{j.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:_.jsx(MC,{role:"menu","aria-orientation":"vertical","data-state":EN(R.open),"data-radix-menu-content":"",dir:j.dir,...V,...x,ref:b,style:{outline:"none",...x.style},onKeyDown:Ae(x.onKeyDown,ee=>{const B=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,ne=ee.ctrlKey||ee.altKey||ee.metaKey,te=ee.key.length===1;B&&(ee.key==="Tab"&&ee.preventDefault(),!ne&&te&&Ee(ee.key));const se=P.current;if(ee.target!==se||!gH.includes(ee.key))return;ee.preventDefault();const ce=H().filter(G=>!G.disabled).map(G=>G.ref.current);Zk.includes(ee.key)&&ce.reverse(),jH(ce)}),onBlur:Ae(n.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(N.current),O.current="")}),onPointerMove:Ae(n.onPointerMove,Ju(ee=>{const ue=ee.target,B=me.current!==ee.clientX;if(ee.currentTarget.contains(ue)&&B){const ne=ee.clientX>me.current?"right":"left";D.current=ne,me.current=ee.clientX}}))})})})})})})});iN.displayName=mr;var AH="MenuGroup",jw=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Ge.div,{role:"group",...r,ref:e})});jw.displayName=AH;var PH="MenuLabel",oN=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Ge.div,{...r,ref:e})});oN.displayName=PH;var hp="MenuItem",px="menu.itemSelect",vm=S.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,o=S.useRef(null),l=Sd(hp,n.__scopeMenu),u=Lw(hp,n.__scopeMenu),d=rt(e,o),f=S.useRef(!1),m=()=>{const y=o.current;if(!t&&y){const v=new CustomEvent(px,{bubbles:!0,cancelable:!0});y.addEventListener(px,I=>r?.(I),{once:!0}),lC(y,v),v.defaultPrevented?f.current=!1:l.onClose()}};return _.jsx(aN,{...s,ref:d,disabled:t,onClick:Ae(n.onClick,m),onPointerDown:y=>{n.onPointerDown?.(y),f.current=!0},onPointerUp:Ae(n.onPointerUp,y=>{f.current||y.currentTarget?.click()}),onKeyDown:Ae(n.onKeyDown,y=>{const v=u.searchRef.current!=="";t||v&&y.key===" "||B_.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});vm.displayName=hp;var aN=S.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...o}=n,l=Lw(hp,t),u=tN(t),d=S.useRef(null),f=rt(e,d),[m,y]=S.useState(!1),[v,I]=S.useState("");return S.useEffect(()=>{const A=d.current;A&&I((A.textContent??"").trim())},[o.children]),_.jsx(Xu.ItemSlot,{scope:t,disabled:r,textValue:s??v,children:_.jsx(lH,{asChild:!0,...u,focusable:!r,children:_.jsx(Ge.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:f,onPointerMove:Ae(n.onPointerMove,Ju(A=>{r?l.onItemLeave(A):(l.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ae(n.onPointerLeave,Ju(A=>l.onItemLeave(A))),onFocus:Ae(n.onFocus,()=>y(!0)),onBlur:Ae(n.onBlur,()=>y(!1))})})})}),kH="MenuCheckboxItem",lN=S.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return _.jsx(fN,{scope:n.__scopeMenu,checked:t,children:_.jsx(vm,{role:"menuitemcheckbox","aria-checked":fp(t)?"mixed":t,...s,ref:e,"data-state":Uw(t),onSelect:Ae(s.onSelect,()=>r?.(fp(t)?!0:!t),{checkForDefaultPrevented:!1})})})});lN.displayName=kH;var cN="MenuRadioGroup",[NH,DH]=Ra(cN,{value:void 0,onValueChange:()=>{}}),uN=S.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,o=en(r);return _.jsx(NH,{scope:n.__scopeMenu,value:t,onValueChange:o,children:_.jsx(jw,{...s,ref:e})})});uN.displayName=cN;var dN="MenuRadioItem",hN=S.forwardRef((n,e)=>{const{value:t,...r}=n,s=DH(dN,n.__scopeMenu),o=t===s.value;return _.jsx(fN,{scope:n.__scopeMenu,checked:o,children:_.jsx(vm,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":Uw(o),onSelect:Ae(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});hN.displayName=dN;var Fw="MenuItemIndicator",[fN,OH]=Ra(Fw,{checked:!1}),pN=S.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,o=OH(Fw,t);return _.jsx(_r,{present:r||fp(o.checked)||o.checked===!0,children:_.jsx(Ge.span,{...s,ref:e,"data-state":Uw(o.checked)})})});pN.displayName=Fw;var MH="MenuSeparator",mN=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return _.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});mN.displayName=MH;var LH="MenuArrow",gN=S.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=_m(t);return _.jsx(LC,{...s,...r,ref:e})});gN.displayName=LH;var VH="MenuSub",[tG,yN]=Ra(VH),Eu="MenuSubTrigger",_N=S.forwardRef((n,e)=>{const t=ba(Eu,n.__scopeMenu),r=Sd(Eu,n.__scopeMenu),s=yN(Eu,n.__scopeMenu),o=Lw(Eu,n.__scopeMenu),l=S.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=o,f={__scopeMenu:n.__scopeMenu},m=S.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return S.useEffect(()=>m,[m]),S.useEffect(()=>{const y=u.current;return()=>{window.clearTimeout(y),d(null)}},[u,d]),_.jsx(Ow,{asChild:!0,...f,children:_.jsx(aN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":EN(t.open),...n,ref:ci(e,s.onTriggerChange),onClick:y=>{n.onClick?.(y),!(n.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Ae(n.onPointerMove,Ju(y=>{o.onItemEnter(y),!y.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),m()},100))})),onPointerLeave:Ae(n.onPointerLeave,Ju(y=>{m();const v=t.content?.getBoundingClientRect();if(v){const I=t.content?.dataset.side,A=I==="right",x=A?-5:5,R=v[A?"left":"right"],j=v[A?"right":"left"];o.onPointerGraceIntentChange({area:[{x:y.clientX+x,y:y.clientY},{x:R,y:v.top},{x:j,y:v.top},{x:j,y:v.bottom},{x:R,y:v.bottom}],side:I}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(y),y.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(n.onKeyDown,y=>{const v=o.searchRef.current!=="";n.disabled||v&&y.key===" "||yH[r.dir].includes(y.key)&&(t.onOpenChange(!0),t.content?.focus(),y.preventDefault())})})})});_N.displayName=Eu;var vN="MenuSubContent",wN=S.forwardRef((n,e)=>{const t=rN(mr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=ba(mr,n.__scopeMenu),l=Sd(mr,n.__scopeMenu),u=yN(vN,n.__scopeMenu),d=S.useRef(null),f=rt(e,d);return _.jsx(Xu.Provider,{scope:n.__scopeMenu,children:_.jsx(_r,{present:r||o.open,children:_.jsx(Xu.Slot,{scope:n.__scopeMenu,children:_.jsx(Vw,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:f,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{l.isUsingKeyboardRef.current&&d.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Ae(n.onFocusOutside,m=>{m.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ae(n.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:Ae(n.onKeyDown,m=>{const y=m.currentTarget.contains(m.target),v=_H[l.dir].includes(m.key);y&&v&&(o.onOpenChange(!1),u.trigger?.focus(),m.preventDefault())})})})})})});wN.displayName=vN;function EN(n){return n?"open":"closed"}function fp(n){return n==="indeterminate"}function Uw(n){return fp(n)?"indeterminate":n?"checked":"unchecked"}function jH(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function FH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function UH(n,e,t){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=FH(n,Math.max(o,0));s.length===1&&(l=l.filter(f=>f!==t));const d=l.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function zH(n,e){const{x:t,y:r}=n;let s=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],d=e[l],f=u.x,m=u.y,y=d.x,v=d.y;m>r!=v>r&&t<(y-f)*(r-m)/(v-m)+f&&(s=!s)}return s}function BH(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return zH(t,e)}function Ju(n){return e=>e.pointerType==="mouse"?n(e):void 0}var $H=nN,WH=Ow,HH=sN,GH=iN,qH=jw,KH=oN,QH=vm,YH=lN,XH=uN,JH=hN,ZH=pN,e8=mN,t8=gN,n8=_N,r8=wN,wm="DropdownMenu",[s8]=go(wm,[eN]),Nn=eN(),[i8,SN]=s8(wm),TN=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:o,onOpenChange:l,modal:u=!0}=n,d=Nn(e),f=S.useRef(null),[m,y]=ju({prop:s,defaultProp:o??!1,onChange:l,caller:wm});return _.jsx(i8,{scope:e,triggerId:Xs(),triggerRef:f,contentId:Xs(),open:m,onOpenChange:y,onOpenToggle:S.useCallback(()=>y(v=>!v),[y]),modal:u,children:_.jsx($H,{...d,open:m,onOpenChange:y,dir:r,modal:u,children:t})})};TN.displayName=wm;var IN="DropdownMenuTrigger",xN=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,o=SN(IN,t),l=Nn(t);return _.jsx(WH,{asChild:!0,...l,children:_.jsx(Ge.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ci(e,o.triggerRef),onPointerDown:Ae(n.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:Ae(n.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});xN.displayName=IN;var o8="DropdownMenuPortal",CN=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Nn(e);return _.jsx(HH,{...r,...t})};CN.displayName=o8;var RN="DropdownMenuContent",bN=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=SN(RN,t),o=Nn(t),l=S.useRef(!1);return _.jsx(GH,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:Ae(n.onCloseAutoFocus,u=>{l.current||s.triggerRef.current?.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Ae(n.onInteractOutside,u=>{const d=u.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,m=d.button===2||f;(!s.modal||m)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bN.displayName=RN;var a8="DropdownMenuGroup",l8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(qH,{...s,...r,ref:e})});l8.displayName=a8;var c8="DropdownMenuLabel",u8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(KH,{...s,...r,ref:e})});u8.displayName=c8;var d8="DropdownMenuItem",AN=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(QH,{...s,...r,ref:e})});AN.displayName=d8;var h8="DropdownMenuCheckboxItem",f8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(YH,{...s,...r,ref:e})});f8.displayName=h8;var p8="DropdownMenuRadioGroup",m8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(XH,{...s,...r,ref:e})});m8.displayName=p8;var g8="DropdownMenuRadioItem",y8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(JH,{...s,...r,ref:e})});y8.displayName=g8;var _8="DropdownMenuItemIndicator",v8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(ZH,{...s,...r,ref:e})});v8.displayName=_8;var w8="DropdownMenuSeparator",PN=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(e8,{...s,...r,ref:e})});PN.displayName=w8;var E8="DropdownMenuArrow",S8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(t8,{...s,...r,ref:e})});S8.displayName=E8;var T8="DropdownMenuSubTrigger",I8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(n8,{...s,...r,ref:e})});I8.displayName=T8;var x8="DropdownMenuSubContent",C8=S.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Nn(t);return _.jsx(r8,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C8.displayName=x8;var R8=TN,b8=xN,A8=CN,P8=bN,k8=AN,N8=PN;function mx({...n}){return _.jsx(R8,{"data-slot":"dropdown-menu",...n})}function gx({...n}){return _.jsx(b8,{"data-slot":"dropdown-menu-trigger",...n})}function yx({className:n,sideOffset:e=4,...t}){return _.jsx(A8,{children:_.jsx(P8,{"data-slot":"dropdown-menu-content",sideOffset:e,className:ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function _x({className:n,inset:e,variant:t="default",...r}){return _.jsx(k8,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:ot("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function vx({className:n,...e}){return _.jsx(N8,{"data-slot":"dropdown-menu-separator",className:ot("bg-border -mx-1 my-1 h-px",n),...e})}const Em=S.createContext(null);Em.displayName="PanelGroupContext";const kt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},zw=10,la=S.useLayoutEffect,wx=_p.useId,D8=typeof wx=="function"?wx:()=>null;let O8=0;function Bw(n=null){const e=D8(),t=S.useRef(n||e||null);return t.current===null&&(t.current=""+O8++),n??t.current}function kN({children:n,className:e="",collapsedSize:t,collapsible:r,defaultSize:s,forwardedRef:o,id:l,maxSize:u,minSize:d,onCollapse:f,onExpand:m,onResize:y,order:v,style:I,tagName:A="div",...x}){const R=S.useContext(Em);if(R===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:j,expandPanel:V,getPanelSize:z,getPanelStyle:H,groupId:J,isPanelCollapsed:Z,reevaluatePanelConstraints:P,registerPanel:b,resizePanel:N,unregisterPanel:O}=R,M=Bw(l),F=S.useRef({callbacks:{onCollapse:f,onExpand:m,onResize:y},constraints:{collapsedSize:t,collapsible:r,defaultSize:s,maxSize:u,minSize:d},id:M,idIsFromProps:l!==void 0,order:v});S.useRef({didLogMissingDefaultSizeWarning:!1}),la(()=>{const{callbacks:me,constraints:ve}=F.current,pe={...ve};F.current.id=M,F.current.idIsFromProps=l!==void 0,F.current.order=v,me.onCollapse=f,me.onExpand=m,me.onResize=y,ve.collapsedSize=t,ve.collapsible=r,ve.defaultSize=s,ve.maxSize=u,ve.minSize=d,(pe.collapsedSize!==ve.collapsedSize||pe.collapsible!==ve.collapsible||pe.maxSize!==ve.maxSize||pe.minSize!==ve.minSize)&&P(F.current,pe)}),la(()=>{const me=F.current;return b(me),()=>{O(me)}},[v,M,b,O]),S.useImperativeHandle(o,()=>({collapse:()=>{j(F.current)},expand:me=>{V(F.current,me)},getId(){return M},getSize(){return z(F.current)},isCollapsed(){return Z(F.current)},isExpanded(){return!Z(F.current)},resize:me=>{N(F.current,me)}}),[j,V,z,Z,M,N]);const D=H(F.current,s);return S.createElement(A,{...x,children:n,className:e,id:M,style:{...D,...I},[kt.groupId]:J,[kt.panel]:"",[kt.panelCollapsible]:r||void 0,[kt.panelId]:M,[kt.panelSize]:parseFloat(""+D.flexGrow).toFixed(1)})}const NN=S.forwardRef((n,e)=>S.createElement(kN,{...n,forwardedRef:e}));kN.displayName="Panel";NN.displayName="forwardRef(Panel)";let $_=null,Ef=-1,Yi=null;function M8(n,e){if(e){const t=(e&VN)!==0,r=(e&jN)!==0,s=(e&FN)!==0,o=(e&UN)!==0;if(t)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(n){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function L8(){Yi!==null&&(document.head.removeChild(Yi),$_=null,Yi=null,Ef=-1)}function Ly(n,e){var t,r;const s=M8(n,e);if($_!==s){if($_=s,Yi===null&&(Yi=document.createElement("style"),document.head.appendChild(Yi)),Ef>=0){var o;(o=Yi.sheet)===null||o===void 0||o.removeRule(Ef)}Ef=(t=(r=Yi.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&t!==void 0?t:-1}}function DN(n){return n.type==="keydown"}function ON(n){return n.type.startsWith("pointer")}function MN(n){return n.type.startsWith("mouse")}function Sm(n){if(ON(n)){if(n.isPrimary)return{x:n.clientX,y:n.clientY}}else if(MN(n))return{x:n.clientX,y:n.clientY};return{x:1/0,y:1/0}}function V8(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function j8(n,e,t){return n.x<e.x+e.width&&n.x+n.width>e.x&&n.y<e.y+e.height&&n.y+n.height>e.y}function F8(n,e){if(n===e)throw new Error("Cannot compare node with itself");const t={a:Tx(n),b:Tx(e)};let r;for(;t.a.at(-1)===t.b.at(-1);)n=t.a.pop(),e=t.b.pop(),r=n;We(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:Sx(Ex(t.a)),b:Sx(Ex(t.b))};if(s.a===s.b){const o=r.childNodes,l={a:t.a.at(-1),b:t.b.at(-1)};let u=o.length;for(;u--;){const d=o[u];if(d===l.a)return 1;if(d===l.b)return-1}}return Math.sign(s.a-s.b)}const U8=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function z8(n){var e;const t=getComputedStyle((e=LN(n))!==null&&e!==void 0?e:n).display;return t==="flex"||t==="inline-flex"}function B8(n){const e=getComputedStyle(n);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||z8(n))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||U8.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function Ex(n){let e=n.length;for(;e--;){const t=n[e];if(We(t,"Missing node"),B8(t))return t}return null}function Sx(n){return n&&Number(getComputedStyle(n).zIndex)||0}function Tx(n){const e=[];for(;n;)e.push(n),n=LN(n);return e}function LN(n){const{parentNode:e}=n;return e&&e instanceof ShadowRoot?e.host:e}const VN=1,jN=2,FN=4,UN=8,$8=V8()==="coarse";let Vr=[],Vl=!1,na=new Map,Tm=new Map;const Zu=new Set;function W8(n,e,t,r,s){var o;const{ownerDocument:l}=e,u={direction:t,element:e,hitAreaMargins:r,setResizeHandlerState:s},d=(o=na.get(l))!==null&&o!==void 0?o:0;return na.set(l,d+1),Zu.add(u),pp(),function(){var m;Tm.delete(n),Zu.delete(u);const y=(m=na.get(l))!==null&&m!==void 0?m:1;if(na.set(l,y-1),pp(),y===1&&na.delete(l),Vr.includes(u)){const v=Vr.indexOf(u);v>=0&&Vr.splice(v,1),Ww(),s("up",!0,null)}}}function H8(n){const{target:e}=n,{x:t,y:r}=Sm(n);Vl=!0,$w({target:e,x:t,y:r}),pp(),Vr.length>0&&(mp("down",n),n.preventDefault(),zN(e)||n.stopImmediatePropagation())}function Vy(n){const{x:e,y:t}=Sm(n);if(Vl&&n.buttons===0&&(Vl=!1,mp("up",n)),!Vl){const{target:r}=n;$w({target:r,x:e,y:t})}mp("move",n),Ww(),Vr.length>0&&n.preventDefault()}function jy(n){const{target:e}=n,{x:t,y:r}=Sm(n);Tm.clear(),Vl=!1,Vr.length>0&&(n.preventDefault(),zN(e)||n.stopImmediatePropagation()),mp("up",n),$w({target:e,x:t,y:r}),Ww(),pp()}function zN(n){let e=n;for(;e;){if(e.hasAttribute(kt.resizeHandle))return!0;e=e.parentElement}return!1}function $w({target:n,x:e,y:t}){Vr.splice(0);let r=null;(n instanceof HTMLElement||n instanceof SVGElement)&&(r=n),Zu.forEach(s=>{const{element:o,hitAreaMargins:l}=s,u=o.getBoundingClientRect(),{bottom:d,left:f,right:m,top:y}=u,v=$8?l.coarse:l.fine;if(e>=f-v&&e<=m+v&&t>=y-v&&t<=d+v){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&F8(r,o)>0){let A=r,x=!1;for(;A&&!A.contains(o);){if(j8(A.getBoundingClientRect(),u)){x=!0;break}A=A.parentElement}if(x)return}Vr.push(s)}})}function Fy(n,e){Tm.set(n,e)}function Ww(){let n=!1,e=!1;Vr.forEach(r=>{const{direction:s}=r;s==="horizontal"?n=!0:e=!0});let t=0;Tm.forEach(r=>{t|=r}),n&&e?Ly("intersection",t):n?Ly("horizontal",t):e?Ly("vertical",t):L8()}let Uy=new AbortController;function pp(){Uy.abort(),Uy=new AbortController;const n={capture:!0,signal:Uy.signal};Zu.size&&(Vl?(Vr.length>0&&na.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("contextmenu",jy,n),r.addEventListener("pointerleave",Vy,n),r.addEventListener("pointermove",Vy,n))}),window.addEventListener("pointerup",jy,n),window.addEventListener("pointercancel",jy,n)):na.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("pointerdown",H8,n),r.addEventListener("pointermove",Vy,n))}))}function mp(n,e){Zu.forEach(t=>{const{setResizeHandlerState:r}=t,s=Vr.includes(t);r(n,s,e)})}function G8(){const[n,e]=S.useState(0);return S.useCallback(()=>e(t=>t+1),[])}function We(n,e){if(!n)throw console.error(e),Error(e)}function Ea(n,e,t=zw){return n.toFixed(t)===e.toFixed(t)?0:n>e?1:-1}function qs(n,e,t=zw){return Ea(n,e,t)===0}function Jn(n,e,t){return Ea(n,e,t)===0}function q8(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){const s=n[r],o=e[r];if(!Jn(s,o,t))return!1}return!0}function Rl({panelConstraints:n,panelIndex:e,size:t}){const r=n[e];We(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:l=100,minSize:u=0}=r;if(Ea(t,u)<0)if(o){const d=(s+u)/2;Ea(t,d)<0?t=s:t=u}else t=u;return t=Math.min(l,t),t=parseFloat(t.toFixed(zw)),t}function Su({delta:n,initialLayout:e,panelConstraints:t,pivotIndices:r,prevLayout:s,trigger:o}){if(Jn(n,0))return e;const l=[...e],[u,d]=r;We(u!=null,"Invalid first pivot index"),We(d!=null,"Invalid second pivot index");let f=0;if(o==="keyboard"){{const y=n<0?d:u,v=t[y];We(v,`Panel constraints not found for index ${y}`);const{collapsedSize:I=0,collapsible:A,minSize:x=0}=v;if(A){const R=e[y];if(We(R!=null,`Previous layout not found for panel index ${y}`),Jn(R,I)){const j=x-R;Ea(j,Math.abs(n))>0&&(n=n<0?0-j:j)}}}{const y=n<0?u:d,v=t[y];We(v,`No panel constraints found for index ${y}`);const{collapsedSize:I=0,collapsible:A,minSize:x=0}=v;if(A){const R=e[y];if(We(R!=null,`Previous layout not found for panel index ${y}`),Jn(R,x)){const j=R-I;Ea(j,Math.abs(n))>0&&(n=n<0?0-j:j)}}}}{const y=n<0?1:-1;let v=n<0?d:u,I=0;for(;;){const x=e[v];We(x!=null,`Previous layout not found for panel index ${v}`);const j=Rl({panelConstraints:t,panelIndex:v,size:100})-x;if(I+=j,v+=y,v<0||v>=t.length)break}const A=Math.min(Math.abs(n),Math.abs(I));n=n<0?0-A:A}{let v=n<0?u:d;for(;v>=0&&v<t.length;){const I=Math.abs(n)-Math.abs(f),A=e[v];We(A!=null,`Previous layout not found for panel index ${v}`);const x=A-I,R=Rl({panelConstraints:t,panelIndex:v,size:x});if(!Jn(A,R)&&(f+=A-R,l[v]=R,f.toPrecision(3).localeCompare(Math.abs(n).toPrecision(3),void 0,{numeric:!0})>=0))break;n<0?v--:v++}}if(q8(s,l))return s;{const y=n<0?d:u,v=e[y];We(v!=null,`Previous layout not found for panel index ${y}`);const I=v+f,A=Rl({panelConstraints:t,panelIndex:y,size:I});if(l[y]=A,!Jn(A,I)){let x=I-A,j=n<0?d:u;for(;j>=0&&j<t.length;){const V=l[j];We(V!=null,`Previous layout not found for panel index ${j}`);const z=V+x,H=Rl({panelConstraints:t,panelIndex:j,size:z});if(Jn(V,H)||(x-=H-V,l[j]=H),Jn(x,0))break;n>0?j--:j++}}}const m=l.reduce((y,v)=>v+y,0);return Jn(m,100)?l:s}function K8({layout:n,panelsArray:e,pivotIndices:t}){let r=0,s=100,o=0,l=0;const u=t[0];We(u!=null,"No pivot index found"),e.forEach((y,v)=>{const{constraints:I}=y,{maxSize:A=100,minSize:x=0}=I;v===u?(r=x,s=A):(o+=x,l+=A)});const d=Math.min(s,100-o),f=Math.max(r,100-l),m=n[u];return{valueMax:d,valueMin:f,valueNow:m}}function ed(n,e=document){return Array.from(e.querySelectorAll(`[${kt.resizeHandleId}][data-panel-group-id="${n}"]`))}function BN(n,e,t=document){const s=ed(n,t).findIndex(o=>o.getAttribute(kt.resizeHandleId)===e);return s??null}function $N(n,e,t){const r=BN(n,e,t);return r!=null?[r,r+1]:[-1,-1]}function WN(n,e=document){var t;if(e instanceof HTMLElement&&(e==null||(t=e.dataset)===null||t===void 0?void 0:t.panelGroupId)==n)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${n}"]`);return r||null}function Im(n,e=document){const t=e.querySelector(`[${kt.resizeHandleId}="${n}"]`);return t||null}function Q8(n,e,t,r=document){var s,o,l,u;const d=Im(e,r),f=ed(n,r),m=d?f.indexOf(d):-1,y=(s=(o=t[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,v=(l=(u=t[m+1])===null||u===void 0?void 0:u.id)!==null&&l!==void 0?l:null;return[y,v]}function Y8({committedValuesRef:n,eagerValuesRef:e,groupId:t,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:l}){S.useRef({didWarnAboutMissingResizeHandle:!1}),la(()=>{if(!o)return;const u=ed(t,o);for(let d=0;d<s.length-1;d++){const{valueMax:f,valueMin:m,valueNow:y}=K8({layout:r,panelsArray:s,pivotIndices:[d,d+1]}),v=u[d];if(v!=null){const I=s[d];We(I,`No panel data found for index "${d}"`),v.setAttribute("aria-controls",I.id),v.setAttribute("aria-valuemax",""+Math.round(f)),v.setAttribute("aria-valuemin",""+Math.round(m)),v.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{u.forEach((d,f)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[t,r,s,o]),S.useEffect(()=>{if(!o)return;const u=e.current;We(u,"Eager values not found");const{panelDataArray:d}=u,f=WN(t,o);We(f!=null,`No group found for id "${t}"`);const m=ed(t,o);We(m,`No resize handles found for group id "${t}"`);const y=m.map(v=>{const I=v.getAttribute(kt.resizeHandleId);We(I,"Resize handle element has no handle id attribute");const[A,x]=Q8(t,I,d,o);if(A==null||x==null)return()=>{};const R=j=>{if(!j.defaultPrevented)switch(j.key){case"Enter":{j.preventDefault();const V=d.findIndex(z=>z.id===A);if(V>=0){const z=d[V];We(z,`No panel data found for index ${V}`);const H=r[V],{collapsedSize:J=0,collapsible:Z,minSize:P=0}=z.constraints;if(H!=null&&Z){const b=Su({delta:Jn(H,J)?P-J:J-H,initialLayout:r,panelConstraints:d.map(N=>N.constraints),pivotIndices:$N(t,I,o),prevLayout:r,trigger:"keyboard"});r!==b&&l(b)}}break}}};return v.addEventListener("keydown",R),()=>{v.removeEventListener("keydown",R)}});return()=>{y.forEach(v=>v())}},[o,n,e,t,r,s,l])}function Ix(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function HN(n,e){const t=n==="horizontal",{x:r,y:s}=Sm(e);return t?r:s}function X8(n,e,t,r,s){const o=t==="horizontal",l=Im(e,s);We(l,`No resize handle element found for id "${e}"`);const u=l.getAttribute(kt.groupId);We(u,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=r;const f=HN(t,n),m=WN(u,s);We(m,`No group element found for id "${u}"`);const y=m.getBoundingClientRect(),v=o?y.width:y.height;return(f-d)/v*100}function J8(n,e,t,r,s,o){if(DN(n)){const l=t==="horizontal";let u=0;n.shiftKey?u=100:s!=null?u=s:u=10;let d=0;switch(n.key){case"ArrowDown":d=l?0:u;break;case"ArrowLeft":d=l?-u:0;break;case"ArrowRight":d=l?u:0;break;case"ArrowUp":d=l?0:-u;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return r==null?0:X8(n,e,t,r,o)}function Z8({panelDataArray:n}){const e=Array(n.length),t=n.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<n.length;o++){const l=t[o];We(l,`Panel constraints not found for index ${o}`);const{defaultSize:u}=l;u!=null&&(r++,e[o]=u,s-=u)}for(let o=0;o<n.length;o++){const l=t[o];We(l,`Panel constraints not found for index ${o}`);const{defaultSize:u}=l;if(u!=null)continue;const d=n.length-r,f=s/d;r++,e[o]=f,s-=f}return e}function vl(n,e,t){e.forEach((r,s)=>{const o=n[s];We(o,`Panel data not found for index ${s}`);const{callbacks:l,constraints:u,id:d}=o,{collapsedSize:f=0,collapsible:m}=u,y=t[d];if(y==null||r!==y){t[d]=r;const{onCollapse:v,onExpand:I,onResize:A}=l;A&&A(r,y),m&&(v||I)&&(I&&(y==null||qs(y,f))&&!qs(r,f)&&I(),v&&(y==null||!qs(y,f))&&qs(r,f)&&v())}})}function sf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t])return!1;return!0}function e7({defaultSize:n,dragState:e,layout:t,panelData:r,panelIndex:s,precision:o=3}){const l=t[s];let u;return l==null?u=n!=null?n.toPrecision(o):"1":r.length===1?u="1":u=l.toPrecision(o),{flexBasis:0,flexGrow:u,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function t7(n,e=10){let t=null;return(...s)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...s)},e)}}function xx(n){try{if(typeof localStorage<"u")n.getItem=e=>localStorage.getItem(e),n.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),n.getItem=()=>null,n.setItem=()=>{}}}function GN(n){return`react-resizable-panels:${n}`}function qN(n){return n.map(e=>{const{constraints:t,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function KN(n,e){try{const t=GN(n),r=e.getItem(t);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function n7(n,e,t){var r,s;const o=(r=KN(n,t))!==null&&r!==void 0?r:{},l=qN(e);return(s=o[l])!==null&&s!==void 0?s:null}function r7(n,e,t,r,s){var o;const l=GN(n),u=qN(e),d=(o=KN(n,s))!==null&&o!==void 0?o:{};d[u]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{s.setItem(l,JSON.stringify(d))}catch(f){console.error(f)}}function Cx({layout:n,panelConstraints:e}){const t=[...n],r=t.reduce((o,l)=>o+l,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!Jn(r,100)&&t.length>0)for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=100/r*l;t[o]=u}let s=0;for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=Rl({panelConstraints:e,panelIndex:o,size:l});l!=u&&(s+=l-u,t[o]=u)}if(!Jn(s,0))for(let o=0;o<e.length;o++){const l=t[o];We(l!=null,`No layout data found for index ${o}`);const u=l+s,d=Rl({panelConstraints:e,panelIndex:o,size:u});if(l!==d&&(s-=d-l,t[o]=d,Jn(s,0)))break}return t}const s7=100,Tu={getItem:n=>(xx(Tu),Tu.getItem(n)),setItem:(n,e)=>{xx(Tu),Tu.setItem(n,e)}},Rx={};function QN({autoSaveId:n=null,children:e,className:t="",direction:r,forwardedRef:s,id:o=null,onLayout:l=null,keyboardResizeBy:u=null,storage:d=Tu,style:f,tagName:m="div",...y}){const v=Bw(o),I=S.useRef(null),[A,x]=S.useState(null),[R,j]=S.useState([]),V=G8(),z=S.useRef({}),H=S.useRef(new Map),J=S.useRef(0),Z=S.useRef({autoSaveId:n,direction:r,dragState:A,id:v,keyboardResizeBy:u,onLayout:l,storage:d}),P=S.useRef({layout:R,panelDataArray:[],panelDataArrayChanged:!1});S.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),S.useImperativeHandle(s,()=>({getId:()=>Z.current.id,getLayout:()=>{const{layout:te}=P.current;return te},setLayout:te=>{const{onLayout:se}=Z.current,{layout:he,panelDataArray:ce}=P.current,G=Cx({layout:te,panelConstraints:ce.map(oe=>oe.constraints)});Ix(he,G)||(j(G),P.current.layout=G,se&&se(G),vl(ce,G,z.current))}}),[]),la(()=>{Z.current.autoSaveId=n,Z.current.direction=r,Z.current.dragState=A,Z.current.id=v,Z.current.onLayout=l,Z.current.storage=d}),Y8({committedValuesRef:Z,eagerValuesRef:P,groupId:v,layout:R,panelDataArray:P.current.panelDataArray,setLayout:j,panelGroupElement:I.current}),S.useEffect(()=>{const{panelDataArray:te}=P.current;if(n){if(R.length===0||R.length!==te.length)return;let se=Rx[n];se==null&&(se=t7(r7,s7),Rx[n]=se);const he=[...te],ce=new Map(H.current);se(n,he,ce,R,d)}},[n,R,d]),S.useEffect(()=>{});const b=S.useCallback(te=>{const{onLayout:se}=Z.current,{layout:he,panelDataArray:ce}=P.current;if(te.constraints.collapsible){const G=ce.map(je=>je.constraints),{collapsedSize:oe=0,panelSize:ye,pivotIndices:Ie}=Zo(ce,te,he);if(We(ye!=null,`Panel size not found for panel "${te.id}"`),!qs(ye,oe)){H.current.set(te.id,ye);const $e=Il(ce,te)===ce.length-1?ye-oe:oe-ye,Ue=Su({delta:$e,initialLayout:he,panelConstraints:G,pivotIndices:Ie,prevLayout:he,trigger:"imperative-api"});sf(he,Ue)||(j(Ue),P.current.layout=Ue,se&&se(Ue),vl(ce,Ue,z.current))}}},[]),N=S.useCallback((te,se)=>{const{onLayout:he}=Z.current,{layout:ce,panelDataArray:G}=P.current;if(te.constraints.collapsible){const oe=G.map(ht=>ht.constraints),{collapsedSize:ye=0,panelSize:Ie=0,minSize:je=0,pivotIndices:$e}=Zo(G,te,ce),Ue=se??je;if(qs(Ie,ye)){const ht=H.current.get(te.id),Dn=ht!=null&&ht>=Ue?ht:Ue,Cn=Il(G,te)===G.length-1?Ie-Dn:Dn-Ie,jt=Su({delta:Cn,initialLayout:ce,panelConstraints:oe,pivotIndices:$e,prevLayout:ce,trigger:"imperative-api"});sf(ce,jt)||(j(jt),P.current.layout=jt,he&&he(jt),vl(G,jt,z.current))}}},[]),O=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{panelSize:ce}=Zo(he,te,se);return We(ce!=null,`Panel size not found for panel "${te.id}"`),ce},[]),M=S.useCallback((te,se)=>{const{panelDataArray:he}=P.current,ce=Il(he,te);return e7({defaultSize:se,dragState:A,layout:R,panelData:he,panelIndex:ce})},[A,R]),F=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{collapsedSize:ce=0,collapsible:G,panelSize:oe}=Zo(he,te,se);return We(oe!=null,`Panel size not found for panel "${te.id}"`),G===!0&&qs(oe,ce)},[]),D=S.useCallback(te=>{const{layout:se,panelDataArray:he}=P.current,{collapsedSize:ce=0,collapsible:G,panelSize:oe}=Zo(he,te,se);return We(oe!=null,`Panel size not found for panel "${te.id}"`),!G||Ea(oe,ce)>0},[]),me=S.useCallback(te=>{const{panelDataArray:se}=P.current;se.push(te),se.sort((he,ce)=>{const G=he.order,oe=ce.order;return G==null&&oe==null?0:G==null?-1:oe==null?1:G-oe}),P.current.panelDataArrayChanged=!0,V()},[V]);la(()=>{if(P.current.panelDataArrayChanged){P.current.panelDataArrayChanged=!1;const{autoSaveId:te,onLayout:se,storage:he}=Z.current,{layout:ce,panelDataArray:G}=P.current;let oe=null;if(te){const Ie=n7(te,G,he);Ie&&(H.current=new Map(Object.entries(Ie.expandToSizes)),oe=Ie.layout)}oe==null&&(oe=Z8({panelDataArray:G}));const ye=Cx({layout:oe,panelConstraints:G.map(Ie=>Ie.constraints)});Ix(ce,ye)||(j(ye),P.current.layout=ye,se&&se(ye),vl(G,ye,z.current))}}),la(()=>{const te=P.current;return()=>{te.layout=[]}},[]);const ve=S.useCallback(te=>{let se=!1;const he=I.current;return he&&window.getComputedStyle(he,null).getPropertyValue("direction")==="rtl"&&(se=!0),function(G){G.preventDefault();const oe=I.current;if(!oe)return()=>null;const{direction:ye,dragState:Ie,id:je,keyboardResizeBy:$e,onLayout:Ue}=Z.current,{layout:ht,panelDataArray:Dn}=P.current,{initialLayout:xn}=Ie??{},Cn=$N(je,te,oe);let jt=J8(G,te,ye,Ie,$e,oe);const It=ye==="horizontal";It&&se&&(jt=-jt);const xt=Dn.map(xo=>xo.constraints),nn=Su({delta:jt,initialLayout:xn??ht,panelConstraints:xt,pivotIndices:Cn,prevLayout:ht,trigger:DN(G)?"keyboard":"mouse-or-touch"}),hi=!sf(ht,nn);(ON(G)||MN(G))&&J.current!=jt&&(J.current=jt,!hi&&jt!==0?It?Fy(te,jt<0?VN:jN):Fy(te,jt<0?FN:UN):Fy(te,0)),hi&&(j(nn),P.current.layout=nn,Ue&&Ue(nn),vl(Dn,nn,z.current))}},[]),pe=S.useCallback((te,se)=>{const{onLayout:he}=Z.current,{layout:ce,panelDataArray:G}=P.current,oe=G.map(ht=>ht.constraints),{panelSize:ye,pivotIndices:Ie}=Zo(G,te,ce);We(ye!=null,`Panel size not found for panel "${te.id}"`);const $e=Il(G,te)===G.length-1?ye-se:se-ye,Ue=Su({delta:$e,initialLayout:ce,panelConstraints:oe,pivotIndices:Ie,prevLayout:ce,trigger:"imperative-api"});sf(ce,Ue)||(j(Ue),P.current.layout=Ue,he&&he(Ue),vl(G,Ue,z.current))},[]),Ee=S.useCallback((te,se)=>{const{layout:he,panelDataArray:ce}=P.current,{collapsedSize:G=0,collapsible:oe}=se,{collapsedSize:ye=0,collapsible:Ie,maxSize:je=100,minSize:$e=0}=te.constraints,{panelSize:Ue}=Zo(ce,te,he);Ue!=null&&(oe&&Ie&&qs(Ue,G)?qs(G,ye)||pe(te,ye):Ue<$e?pe(te,$e):Ue>je&&pe(te,je))},[pe]),W=S.useCallback((te,se)=>{const{direction:he}=Z.current,{layout:ce}=P.current;if(!I.current)return;const G=Im(te,I.current);We(G,`Drag handle element not found for id "${te}"`);const oe=HN(he,se);x({dragHandleId:te,dragHandleRect:G.getBoundingClientRect(),initialCursorPosition:oe,initialLayout:ce})},[]),ee=S.useCallback(()=>{x(null)},[]),ue=S.useCallback(te=>{const{panelDataArray:se}=P.current,he=Il(se,te);he>=0&&(se.splice(he,1),delete z.current[te.id],P.current.panelDataArrayChanged=!0,V())},[V]),B=S.useMemo(()=>({collapsePanel:b,direction:r,dragState:A,expandPanel:N,getPanelSize:O,getPanelStyle:M,groupId:v,isPanelCollapsed:F,isPanelExpanded:D,reevaluatePanelConstraints:Ee,registerPanel:me,registerResizeHandle:ve,resizePanel:pe,startDragging:W,stopDragging:ee,unregisterPanel:ue,panelGroupElement:I.current}),[b,A,r,N,O,M,v,F,D,Ee,me,ve,pe,W,ee,ue]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return S.createElement(Em.Provider,{value:B},S.createElement(m,{...y,children:e,className:t,id:o,ref:I,style:{...ne,...f},[kt.group]:"",[kt.groupDirection]:r,[kt.groupId]:v}))}const YN=S.forwardRef((n,e)=>S.createElement(QN,{...n,forwardedRef:e}));QN.displayName="PanelGroup";YN.displayName="forwardRef(PanelGroup)";function Il(n,e){return n.findIndex(t=>t===e||t.id===e.id)}function Zo(n,e,t){const r=Il(n,e),o=r===n.length-1?[r-1,r]:[r,r+1],l=t[r];return{...e.constraints,panelSize:l,pivotIndices:o}}function i7({disabled:n,handleId:e,resizeHandler:t,panelGroupElement:r}){S.useEffect(()=>{if(n||t==null||r==null)return;const s=Im(e,r);if(s==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),t(l);break}case"F6":{l.preventDefault();const u=s.getAttribute(kt.groupId);We(u,`No group element found for id "${u}"`);const d=ed(u,r),f=BN(u,e,r);We(f!==null,`No resize element found for id "${e}"`);const m=l.shiftKey?f>0?f-1:d.length-1:f+1<d.length?f+1:0;d[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,n,e,t])}function XN({children:n=null,className:e="",disabled:t=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:l,onDragging:u,onFocus:d,onPointerDown:f,onPointerUp:m,style:y={},tabIndex:v=0,tagName:I="div",...A}){var x,R;const j=S.useRef(null),V=S.useRef({onClick:l,onDragging:u,onPointerDown:f,onPointerUp:m});S.useEffect(()=>{V.current.onClick=l,V.current.onDragging=u,V.current.onPointerDown=f,V.current.onPointerUp=m});const z=S.useContext(Em);if(z===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:H,groupId:J,registerResizeHandle:Z,startDragging:P,stopDragging:b,panelGroupElement:N}=z,O=Bw(s),[M,F]=S.useState("inactive"),[D,me]=S.useState(!1),[ve,pe]=S.useState(null),Ee=S.useRef({state:M});la(()=>{Ee.current.state=M}),S.useEffect(()=>{if(t)pe(null);else{const B=Z(O);pe(()=>B)}},[t,O,Z]);const W=(x=r?.coarse)!==null&&x!==void 0?x:15,ee=(R=r?.fine)!==null&&R!==void 0?R:5;S.useEffect(()=>{if(t||ve==null)return;const B=j.current;We(B,"Element ref not attached");let ne=!1;return W8(O,B,H,{coarse:W,fine:ee},(se,he,ce)=>{if(!he){F("inactive");return}switch(se){case"down":{F("drag"),ne=!1,We(ce,'Expected event to be defined for "down" action'),P(O,ce);const{onDragging:G,onPointerDown:oe}=V.current;G?.(!0),oe?.();break}case"move":{const{state:G}=Ee.current;ne=!0,G!=="drag"&&F("hover"),We(ce,'Expected event to be defined for "move" action'),ve(ce);break}case"up":{F("hover"),b();const{onClick:G,onDragging:oe,onPointerUp:ye}=V.current;oe?.(!1),ye?.(),ne||G?.();break}}})},[W,H,t,ee,Z,O,ve,P,b]),i7({disabled:t,handleId:O,resizeHandler:ve,panelGroupElement:N});const ue={touchAction:"none",userSelect:"none"};return S.createElement(I,{...A,children:n,className:e,id:s,onBlur:()=>{me(!1),o?.()},onFocus:()=>{me(!0),d?.()},ref:j,role:"separator",style:{...ue,...y},tabIndex:v,[kt.groupDirection]:H,[kt.groupId]:J,[kt.resizeHandle]:"",[kt.resizeHandleActive]:M==="drag"?"pointer":D?"keyboard":void 0,[kt.resizeHandleEnabled]:!t,[kt.resizeHandleId]:O,[kt.resizeHandleState]:M})}XN.displayName="PanelResizeHandle";function o7({className:n,...e}){return _.jsx(YN,{"data-slot":"resizable-panel-group",className:ot("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),...e})}function bx({className:n,...e}){return _.jsx(NN,{"data-slot":"resizable-panel",className:ot("relative",n),...e})}function a7({withHandle:n,className:e,...t}){return _.jsx(XN,{"data-slot":"resizable-handle",className:ot("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...t,children:n&&_.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:_.jsx(WD,{className:"size-2.5"})})})}function l7(n){const e=c7(n),t=S.forwardRef((r,s)=>{const{children:o,...l}=r,u=S.Children.toArray(o),d=u.find(d7);if(d){const f=d.props.children,m=u.map(y=>y===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:y);return _.jsx(e,{...l,ref:s,children:S.isValidElement(f)?S.cloneElement(f,void 0,m):null})}return _.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}function c7(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const l=f7(s),u=h7(o,s.props);return s.type!==S.Fragment&&(u.ref=r?ci(r,l):l),S.cloneElement(s,u)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var u7=Symbol("radix.slottable");function d7(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===u7}function h7(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function f7(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var xm="Dialog",[JN]=go(xm),[p7,zr]=JN(xm),ZN=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:o,modal:l=!0}=n,u=S.useRef(null),d=S.useRef(null),[f,m]=ju({prop:r,defaultProp:s??!1,onChange:o,caller:xm});return _.jsx(p7,{scope:e,triggerRef:u,contentRef:d,contentId:Xs(),titleId:Xs(),descriptionId:Xs(),open:f,onOpenChange:m,onOpenToggle:S.useCallback(()=>m(y=>!y),[m]),modal:l,children:t})};ZN.displayName=xm;var e1="DialogTrigger",m7=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=zr(e1,t),o=rt(e,s.triggerRef);return _.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":qw(s.open),...r,ref:o,onClick:Ae(n.onClick,s.onOpenToggle)})});m7.displayName=e1;var Hw="DialogPortal",[g7,t1]=JN(Hw,{forceMount:void 0}),n1=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,o=zr(Hw,e);return _.jsx(g7,{scope:e,forceMount:t,children:S.Children.map(r,l=>_.jsx(_r,{present:t||o.open,children:_.jsx(bp,{asChild:!0,container:s,children:l})}))})};n1.displayName=Hw;var gp="DialogOverlay",r1=S.forwardRef((n,e)=>{const t=t1(gp,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=zr(gp,n.__scopeDialog);return o.modal?_.jsx(_r,{present:r||o.open,children:_.jsx(_7,{...s,ref:e})}):null});r1.displayName=gp;var y7=l7("DialogOverlay.RemoveScroll"),_7=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=zr(gp,t);return _.jsx(Pp,{as:y7,allowPinchZoom:!0,shards:[s.contentRef],children:_.jsx(Ge.div,{"data-state":qw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Sa="DialogContent",s1=S.forwardRef((n,e)=>{const t=t1(Sa,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=zr(Sa,n.__scopeDialog);return _.jsx(_r,{present:r||o.open,children:o.modal?_.jsx(v7,{...s,ref:e}):_.jsx(w7,{...s,ref:e})})});s1.displayName=Sa;var v7=S.forwardRef((n,e)=>{const t=zr(Sa,n.__scopeDialog),r=S.useRef(null),s=rt(e,t.contentRef,r);return S.useEffect(()=>{const o=r.current;if(o)return rv(o)},[]),_.jsx(i1,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(n.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Ae(n.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:Ae(n.onFocusOutside,o=>o.preventDefault())})}),w7=S.forwardRef((n,e)=>{const t=zr(Sa,n.__scopeDialog),r=S.useRef(!1),s=S.useRef(!1);return _.jsx(i1,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{n.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||t.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{n.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),i1=S.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=n,u=zr(Sa,t),d=S.useRef(null),f=rt(e,d);return K_(),_.jsxs(_.Fragment,{children:[_.jsx(Sp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:_.jsx(Ep,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":qw(u.open),...l,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(E7,{titleId:u.titleId}),_.jsx(T7,{contentRef:d,descriptionId:u.descriptionId})]})]})}),Gw="DialogTitle",o1=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=zr(Gw,t);return _.jsx(Ge.h2,{id:s.titleId,...r,ref:e})});o1.displayName=Gw;var a1="DialogDescription",l1=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=zr(a1,t);return _.jsx(Ge.p,{id:s.descriptionId,...r,ref:e})});l1.displayName=a1;var c1="DialogClose",u1=S.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=zr(c1,t);return _.jsx(Ge.button,{type:"button",...r,ref:e,onClick:Ae(n.onClick,()=>s.onOpenChange(!1))})});u1.displayName=c1;function qw(n){return n?"open":"closed"}var d1="DialogTitleWarning",[nG,h1]=ZO(d1,{contentName:Sa,titleName:Gw,docsSlug:"dialog"}),E7=({titleId:n})=>{const e=h1(d1),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},S7="DialogDescriptionWarning",T7=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${h1(S7).contentName}}.`;return S.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},I7=ZN,x7=n1,C7=r1,R7=s1,b7=o1,A7=l1,P7=u1;function k7({...n}){return _.jsx(I7,{"data-slot":"sheet",...n})}function N7({...n}){return _.jsx(x7,{"data-slot":"sheet-portal",...n})}function D7({className:n,...e}){return _.jsx(C7,{"data-slot":"sheet-overlay",className:ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function O7({className:n,children:e,side:t="right",...r}){return _.jsxs(N7,{children:[_.jsx(D7,{className:n?.includes("landscape:hidden")?"landscape:hidden":""}),_.jsxs(R7,{"data-slot":"sheet-content",className:ot("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",n),...r,children:[e,_.jsxs(P7,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[_.jsx($x,{className:"size-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function M7({className:n,...e}){return _.jsx("div",{"data-slot":"sheet-header",className:ot("flex flex-col gap-1.5 p-4",n),...e})}function L7({className:n,...e}){return _.jsx(b7,{"data-slot":"sheet-title",className:ot("text-foreground font-semibold",n),...e})}function V7({className:n,...e}){return _.jsx(A7,{"data-slot":"sheet-description",className:ot("text-muted-foreground text-sm",n),...e})}async function Ax(){const n=_s.currentUser;if(!n)return;const e=fc(so,"users",n.uid);(await fm(e)).exists()||await sk(e,{displayName:n.displayName||n.email?.split("@")[0]||"",email:n.email||null,photoURL:n.photoURL||null,roles:{},createdAt:Ew()},{merge:!0})}function Px(n){switch(n){case"auth/invalid-email":return"Invalid email address.";case"auth/missing-password":return"Please enter your password.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/email-already-in-use":return"That email is already in use.";case"auth/invalid-credential":case"auth/wrong-password":return"Wrong email or password.";case"auth/popup-closed-by-user":return"Popup closed before completing sign in.";default:return"Something went wrong. Please try again."}}function j7({onLogin:n}){const[e,t]=S.useState("signin"),[r,s]=S.useState(""),[o,l]=S.useState(""),[u,d]=S.useState(""),[f,m]=S.useState(!1),[y,v]=S.useState(null);async function I(){try{m(!0),v(null);const x=await j$(_s,DW);await Ax(),n(x.user)}catch(x){v(Px(x?.code))}finally{m(!1)}}async function A(x){x.preventDefault();try{m(!0),v(null);let R;e==="signin"?R=await p$(_s,r,o):(R=await f$(_s,r,o),u.trim()&&await g$(R.user,{displayName:u.trim()})),await Ax(),n(R.user)}catch(R){v(Px(R?.code))}finally{m(!1)}}return _.jsxs("div",{className:"max-w-md mx-auto rounded-2xl shadow-sm border border-gray-200 dark:border-gray-800 bg-white dark:bg-zinc-900 p-6",children:[_.jsx("h1",{className:"text-xl font-semibold mb-1",children:e==="signin"?"Sign in":"Create an account"}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Use Google or email/password."}),y&&_.jsx("div",{className:"mb-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 rounded-lg p-2",children:y}),_.jsx("button",{onClick:I,disabled:f,className:"w-full mb-4 px-3 py-2 rounded-xl text-sm font-medium border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"Continue with Google"}),_.jsxs("form",{onSubmit:A,className:"space-y-3",children:[e==="signup"&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm mb-1",children:"Display name"}),_.jsx("input",{type:"text",value:u,onChange:x=>d(x.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"Jane Doe"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm mb-1",children:"Email"}),_.jsx("input",{type:"email",value:r,onChange:x=>s(x.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"you@example.com",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm mb-1",children:"Password"}),_.jsx("input",{type:"password",value:o,onChange:x=>l(x.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2 text-sm",placeholder:"",required:!0})]}),_.jsx("button",{type:"submit",disabled:f,className:"w-full px-3 py-2 rounded-xl text-sm font-medium bg-black text-white dark:bg-white dark:text-black",children:f?e==="signin"?"Signing in":"Creating":e==="signin"?"Sign in":"Create account"})]}),_.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-3",children:e==="signin"?_.jsxs(_.Fragment,{children:["No account yet?"," ",_.jsx("button",{className:"underline",onClick:()=>t("signup"),children:"Create one"})]}):_.jsxs(_.Fragment,{children:["Already have an account?"," ",_.jsx("button",{className:"underline",onClick:()=>t("signin"),children:"Sign in"})]})})]})}const kx={display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f5f6fa",fontFamily:"Arial, sans-serif"},Nx={backgroundColor:"#fff",borderRadius:"12px",padding:"2rem",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"320px",transition:"transform 0.2s ease"},F7={width:"96px",height:"96px",borderRadius:"50%",objectFit:"cover",marginBottom:"1rem"},U7={fontSize:"1.4rem",fontWeight:600,marginBottom:"0.25rem",color:"#222"},z7={fontSize:"0.95rem",color:"#555",marginBottom:"1rem"},B7={fontSize:"0.9rem",color:"#666"},$7={fontWeight:500,color:"#333"},W7={color:"#555",fontSize:"1rem"};function H7(){const[n,e]=S.useState(null);return S.useEffect(()=>{const t=Ak(_s,r=>{e(r)});return()=>t()},[]),n?_.jsx("div",{style:kx,children:_.jsxs("div",{style:{...Nx,cursor:"default",transform:"translateY(0)"},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-3px)"},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)"},children:[_.jsx("img",{src:n.photoURL||"https://via.placeholder.com/96?text=User",alt:n.displayName??"User photo",style:F7}),_.jsx("h2",{style:U7,children:n.displayName}),_.jsx("p",{style:z7,children:n.email}),_.jsxs("div",{style:B7,children:[_.jsx("span",{style:$7,children:"Account created:"})," ",n.metadata.creationTime?new Date(n.metadata.creationTime).toLocaleString():"Unknown"]})]})}):_.jsx("div",{style:kx,children:_.jsx("div",{style:Nx,children:_.jsx("p",{style:W7,children:"Loading user info..."})})})}function W_({children:n}){return _.jsx("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-zinc-900 p-4 shadow-sm",children:n})}function Dx({title:n,right:e,children:t}){return _.jsxs("section",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h2",{className:"text-base font-semibold tracking-tight",children:n}),e]}),_.jsx(W_,{children:t})]})}function G7(){const[n,e]=S.useState(_s.currentUser),[t,r]=S.useState(!_s.currentUser);return S.useEffect(()=>{const s=Ak(_s,o=>{e(o),r(!1)});return()=>s()},[]),{user:n,loading:t}}function q7(n){const[e,t]=S.useState(null);return S.useEffect(()=>{if(!n){t(null);return}const r=fc(so,"users",n);fm(r).then(s=>t(s.exists()?s.data():null))},[n]),{profile:e}}function K7(n){const[e,t]=S.useState([]),[r,s]=S.useState(!!n);return S.useEffect(()=>{if(!n)return;const o=oB(M_(so,"signups"),aB("uid","==",n),lB("createdAt","desc"),cB(5)),l=ik(o,async u=>{const d=[];for(const f of u.docs){const m=f.get("assignmentId"),y=fc(so,"assignments",m),v=await fm(y);v.exists()&&d.push({id:v.id,data:v.data()})}t(d),s(!1)});return()=>l()},[n]),{items:e,loading:r}}async function Q7(n){const e=fc(so,"users",n.uid);(await fm(e)).exists()||await sk(e,{displayName:n.displayName||n.email?.split("@")[0]||"",email:n.email||null,photoURL:n.photoURL||null,roles:{},createdAt:Ew()},{merge:!0})}function Y7({onLogin:n}={}){const{user:e,loading:t}=G7(),{profile:r}=q7(e?.uid),{items:s}=K7(e?.uid);Ws.useEffect(()=>{e&&n&&n(e)},[e,n]);const[o,l]=S.useState(!1),[u,d]=S.useState(null),[f,m]=S.useState(!1);S.useEffect(()=>{e&&Q7(e)},[e]);async function y(){try{d(null),l(!0),await Pk(_s)}catch(I){d(I?.message??"Failed to sign out.")}finally{l(!1)}}if(t)return _.jsx("div",{className:"p-6 max-w-xl mx-auto",children:_.jsx(W_,{children:_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Loading your session"})})});if(!e)return _.jsx("div",{className:"p-6 max-w-xl mx-auto",children:_.jsx(j7,{onLogin:n??(()=>{})})});if(f)return _.jsxs("div",{className:"p-6 space-y-6",children:[_.jsxs("header",{className:"flex items-center justify-between",children:[_.jsx("h1",{className:"text-2xl font-bold",children:"Your Profile"}),_.jsx("button",{onClick:()=>m(!1),className:"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"Back"})]}),_.jsx(H7,{})]});const v=r?.displayName||e.displayName||e.email||"there";return _.jsxs("div",{className:"p-6 space-y-6",children:[_.jsxs("header",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",v," "]}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Youre signed in with Firebase Auth."})]}),_.jsx("button",{onClick:y,disabled:o,className:"inline-flex items-center rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800 disabled:opacity-60","aria-label":"Sign out",children:o?"Signing out":"Sign out"})]}),u&&_.jsx(W_,{children:_.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:u})}),_.jsx(Dx,{title:"Your account",children:_.jsx("button",{onClick:()=>m(!0),className:"w-full rounded-xl px-3 py-2 text-sm font-medium border border-gray-200 dark:border-gray-700 bg-white dark:bg-zinc-900 hover:bg-gray-50 dark:hover:bg-zinc-800",children:"View Profile"})}),_.jsx(Dx,{title:"Your latest signups",children:s.length===0?_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No recent signups yet."}):_.jsx("ul",{className:"space-y-2",children:s.map(({id:I,data:A})=>_.jsx("li",{className:"flex items-center justify-between",children:_.jsxs("div",{children:[_.jsx("p",{className:"font-medium",children:A.title}),A.location&&_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:A.location})]})},I))})})]})}function X7(){const[n,e]=S.useState(null),[t,r]=S.useState([]),[s,o]=S.useState(null),[l,u]=S.useState("gallery"),[d,f]=S.useState("");S.useEffect(()=>{if(!n)return;const V=ik(M_(so,"routes"),z=>{const H=[];z.forEach(J=>{const Z=J.data(),P=Z.reviews||[],b=P.length,N=b===0?0:Number((P.reduce((O,M)=>O+M.rating,0)/b).toFixed(1));H.push({id:J.id,name:Z.name,grade:Z.grade,color:Z.color,imageUrl:Z.imageUrl,description:Z.description,setter:Z.setter,dateSet:Z.dateSet,reviews:P,totalReviews:b,averageRating:N})}),r(H)});return()=>V()},[n]);const m=async V=>{try{await fB(M_(so,"routes"),{...V,createdAt:Ew()}),u("gallery")}catch(z){console.error("Error adding route:",z)}},y=async(V,z)=>{if(n)try{const H={...z,id:Date.now().toString(),author:n.displayName||"Anonymous",date:new Date().toISOString()},J=fc(so,"routes",V);await hB(J,{reviews:pB(H)})}catch(H){console.error("Error adding review:",H)}},v=V=>{e(V)},I=()=>{Pk(_s).then(()=>{e(null),u("gallery"),o(null)}).catch(V=>{console.error("Sign out error:",V)})},A=d?t.filter(V=>V.grade===d):t;if(!n)return _.jsx(Y7,{onLogin:v});const x=V=>{o(V)},R=()=>{o(null)},j=()=>{o(null)};return l==="add"?_.jsxs("div",{className:"min-h-screen bg-white",children:[_.jsx("header",{className:"sticky top-0 z-50 border-b bg-white",children:_.jsx("div",{className:"container mx-auto px-4 py-4",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center",children:_.jsx(ey,{className:"size-4 text-primary-foreground"})}),_.jsx("h1",{className:"text-xl font-medium",children:"Boulder Routes"})]}),_.jsx("div",{className:"flex items-center gap-3",children:_.jsxs(mx,{children:[_.jsx(gx,{asChild:!0,children:_.jsxs(Pn,{variant:"ghost",className:"gap-2",size:"sm",children:[_.jsx(nf,{className:"size-6",children:_.jsx(rf,{className:"text-xs",children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),_.jsx("span",{className:"hidden sm:inline",children:n.name})]})}),_.jsxs(yx,{align:"end",className:"w-56",children:[_.jsxs("div",{className:"flex items-center gap-2 p-2",children:[_.jsx(nf,{className:"size-8",children:_.jsx(rf,{children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),_.jsxs("div",{className:"flex flex-col space-y-1",children:[_.jsx("p",{className:"text-sm font-medium",children:n.name}),_.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]}),_.jsx(vx,{}),_.jsxs(_x,{onClick:I,className:"gap-2 text-destructive",children:[_.jsx(hT,{className:"size-4"}),"Sign out"]})]})]})})]})})}),_.jsx("main",{className:"container mx-auto px-4 py-6",children:_.jsx(LW,{onSave:m,onCancel:()=>u("gallery")})})]}):_.jsxs("div",{className:"h-screen flex flex-col landscape:h-full bg-white",children:[_.jsx("header",{className:"flex-shrink-0 z-50 border-b landscape:sticky landscape:top-0",children:_.jsx("div",{className:"container mx-auto px-4 py-4",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center",children:_.jsx(ey,{className:"size-4 text-primary-foreground"})}),_.jsx("h1",{className:"text-xl font-medium",children:"Boulder Routes"})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs(Pn,{onClick:()=>u("add"),size:"sm",className:"gap-2",children:[_.jsx(KD,{className:"size-4"}),_.jsx("span",{className:"hidden sm:inline",children:"Add Route"})]}),_.jsxs(mx,{children:[_.jsx(gx,{asChild:!0,children:_.jsxs(Pn,{variant:"ghost",className:"gap-2",size:"sm",children:[_.jsx(nf,{className:"size-6",children:_.jsx(rf,{className:"text-xs",children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),_.jsx("span",{className:"hidden sm:inline",children:n.name})]})}),_.jsxs(yx,{align:"end",className:"w-56",children:[_.jsxs("div",{className:"flex items-center gap-2 p-2",children:[_.jsx(nf,{className:"size-8",children:_.jsx(rf,{children:n.name?.split(" ").map(V=>V[0]).join("").toUpperCase()})}),_.jsxs("div",{className:"flex flex-col space-y-1",children:[_.jsx("p",{className:"text-sm font-medium",children:n.name}),_.jsx("p",{className:"text-xs text-muted-foreground",children:n.email})]})]}),_.jsx(vx,{}),_.jsxs(_x,{onClick:I,className:"gap-2 text-destructive",children:[_.jsx(hT,{className:"size-4"}),"Sign out"]})]})]})]})]})})}),_.jsxs("main",{className:"flex-1 overflow-hidden",children:[_.jsx("div",{className:"landscape:block hidden h-full",children:_.jsxs(o7,{direction:"horizontal",className:"h-full w-full",children:[_.jsx(bx,{defaultSize:35,minSize:25,maxSize:50,className:"h-full",children:_.jsx("div",{className:"h-full overflow-hidden",children:_.jsx(ZV,{routes:A,onRouteClick:x,filterGrade:d,onFilterChange:f,selectedRouteId:s?.id})})}),_.jsx(a7,{withHandle:!0}),_.jsx(bx,{defaultSize:65,minSize:50,className:"h-full",children:_.jsx("div",{className:"h-full overflow-hidden",children:s?_.jsx(kR,{className:"h-full w-full",children:_.jsx("div",{className:"px-6 py-6",children:_.jsx(qT,{route:s,onBack:j,onAddReview:V=>y(s.id,V),currentUser:n,showBackButton:!1})})},s.id):_.jsx("div",{className:"flex items-center justify-center h-full w-full",children:_.jsxs("div",{className:"text-center space-y-3",children:[_.jsx("div",{className:"size-16 bg-muted rounded-full flex items-center justify-center mx-auto",children:_.jsx(ey,{className:"size-8"})}),_.jsxs("div",{className:"space-y-1",children:[_.jsx("h3",{className:"font-medium",children:"No route selected"}),_.jsx("p",{className:"text-sm",children:"Select a route from the list to view details"})]})]})})})})]})}),_.jsxs("div",{className:"landscape:hidden h-full",children:[_.jsx("div",{className:"h-full overflow-auto",children:_.jsx("div",{className:"container mx-auto px-4 py-6",children:_.jsx(DV,{routes:A,onRouteClick:x,filterGrade:d,onFilterChange:f,selectedRouteId:s?.id})})}),s&&_.jsx(k7,{open:!0,onOpenChange:V=>!V&&R(),children:_.jsxs(O7,{side:"right",className:"w-full sm:max-w-2xl p-0 overflow-auto landscape:hidden",children:[_.jsxs(M7,{className:"sr-only",children:[_.jsx(L7,{children:s.name}),_.jsxs(V7,{children:["Route details for ",s.name," - ",s.grade]})]}),_.jsx("div",{className:"p-6",children:_.jsx(qT,{route:s,onBack:R,onAddReview:V=>y(s.id,V),currentUser:n,showBackButton:!0})})]})})]})]})]})}RD.createRoot(document.getElementById("root")).render(_.jsx(S.StrictMode,{children:_.jsx(X7,{})}));
